<?php /* <ViaThinkSoftSignature>
Jzcf62HSBgqHUxXUYRd1rYEfwuMQOo65BvgzE7WCxirr/Av5eThdF/GS8kUBUs7qs
nIiW3p6r6+0w3r4F9cD0p9t4cG3KhfAeTKsVr/WseQuIUZQQ5X8veSS3hqxVQGjkW
Sc2vJ4dJmnjlgB/Q8OSlm5EeWOMPZRpNKQspk/IAheAZyMMzXCGcyXHp8MhPiiJdp
437mws+eGyO9ZIKWh25NwNbDmKnosaPqkqLgRANOUIH0o7ytPhOfSrUIC617bfkMC
VTG+O1cYV/W95EuVsTsWSPEwpqUJF8mpiYxEyMUVMH+s4hlQ7p1aG0ikTp1VREBio
4UoInl1oJUxmFSlhfRxRhyHjVmjd2ndQz9OaL7rnDzxY32nUdNXKPXg3v9OPrQZHm
L88nvnORcfB7AWvMXxzAmsFpGu5qxb8HdMN44FR/5mz835fcjJLLjBSEo4z68PD0U
WGcExNuvnQZnXpAIjsnhjE5s2U/Wid9l9hsiA+rKin3PF0veM7LtEgktW9ivQUSdE
lVs5O99h4YgBai/glkqmJlGeub1vGY0z1tHo5O2mPQ/FHBRAaBj634c8m0dmG4dq8
mCBBMup/AI8CECOw/EjZTn+RN5HA0YSq/w62l+RoddGz/7gWaUbs+qnfYlX/9Jwyf
9iAglL6r6KQ/Az5HGA8KvWpkAmtQ8HAIlG0gAN7ASK4dRmh9OGF4U73OfTERQD2pl
ODcgg1c8/0myiEcxhDPQA2uOUGpzxiML67N/Cc5yj7e6vdF5HYXSEinyqcDIdtj2E
rN/SMasrAk/XotoSOB/85y/LtIraIv/CnIYhjzZdD8XrZPA+E+Sv2AIoe4WGXLw7c
vW2WDgRRqif5xHQEo2FNf1lswp0nd3rpIvKJgU6rzQvso63mao3tcamklorRKTkWf
FoVsuFSK67S5MD1Een4y0xjyk53rSNG+viNu83iZHLyaqnSbT4AvkmRhCoOJ8kIGj
3biw9Lg1L23GB+Hzmo8HUJPPUSRtS2UEubSVmKMPJJWtonR0uEBTJgjaPohWvCwT9
L7v1R4GurMhTUSi9S7VUtTnDnKGU/gYAwck5TFvHsW/vGz14U69OAfJVl2izqbXIM
5NFRmaplutppDBqhoG9KXPC/rvPAts9cj82S3pah6hzaWDGSRwv9DJVYunFwvP58L
bfyvBEr1jgPC621+0yyYIr3ONARWPqeJ6d3ZAD4dCmH9/mDKV0iIW37EMfq9KwD4E
klW+Sj+Nx2EnfQPlbnF5esb7VRgRRYoNBt7lgB3eLPef/94n4jj5ZpybCeJXhh58u
1lNRYD+NehGfY5Pfn59UvvXkcun8V2wqT2Ro2DS1t8uKstmaXxJjiku74M2eGS9G+
g==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 156') {
	err('This update can only be applied to OIDplus version 2.0.0.156!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: TODO
function writefile_1() {
	@$fp = fopen('TODO', 'w');
	@fwrite($fp, base64_decode('CklNUE9SVEFOVAotIFRlc3QgYWxsIG5ldyBwcmVwYXJlZCBzdGF0ZW1lbnRzCi0gQ29va2llIGxhdzoKCURvd25sb2FkIENvb2tpZUNvbnNlbnQgY29kZSBpbnRvIF8zcCBmb2xkZXIsIGRvIG5vdCBob3RsaW5rIGl0Cgl3ZSBuZWVkIHRvIGxvZyBhbGwgY29uc2Vu'));
	@fwrite($fp, base64_decode('dHMKCWRvIHdlIG5lZWQgYW4gZXhwbGljaXQgY29uc2VudCBhdCB0aGUgbG9naW4gZm9ybT8KCWRvIHdlIG5lZWQgYSBjb25zZW50IGZvciB0aGUgY29va2llIFNTTF9DSEVDSz8KLSBkc2d2byBkYXRlbnNjaHV0emVya2zkcnVuZywgYWdicyBldGMuCi0gVmVyaWZ5'));
	@fwrite($fp, base64_decode('IHRoYXQgbG9nZ2VyIHdvcmtzIGNvcnJlY3RseSwgY2hlY2sgaWYgYWxsIGxvZ21hc2tzIGFyZSBjb3JyZWN0Ci0gcmVtb3ZlIGJhY2t0aWNrIG9wZXJhdG9ycyBkdWUgdG8gc3FsIGNvbXBhdGliaWxpdHkKLSB0aGUgaW5hY3Rpdml0eSB0aW1lciBpcyBtdWNoIHRv'));
	@fwrite($fp, base64_decode('byBmYXN0IQotIERvZXMgdGhlIGFkbWluIGZlYXR1cmUgIjYwMF9sb2ciIGFsc28gc2hvdyBhbGwgbG9nIGV2ZW50cyBmcm9tIGFsbCBPYmplY3RzIGFuZCBhbGwgUkFzPwotIGF0IGEgbG90IG9mIGZvcm1zLCBpZiB5b3UgcHJlc3MgImVudGVyIiwgdGhlICJmb3Jt'));
	@fwrite($fp, base64_decode('IiB3aWxsIG5vdCBiZSBzdWJtaXR0ZWQgKGUuZy4gImNyZWF0ZSByYSIgcGx1Z2luKSwgY2Fubm90IHJlcHJvZHVjZT8KClJGQwotIHByb29mIHJlYWQKLSBzaG91bGQgdGhlIHdob2xlIFdIT0lTIG91dHB1dCBiZSBjYXNlIGluc2Vuc2l0aXZlPwotIHNob3VsZCAi'));
	@fwrite($fp, base64_decode('ZGlzdGFuY2UiIGJlIG1hbmRhdG9yeT8KLSB0cnkgdG8gdXNlIE1VU1QsIE1VU1QgTk9ULCBTSEFMTCBldGMuIGFjY29yZGluZyB0byBSRkMgMjExOQotIGZlbGRlciBkaWUgbmljaHQgb3B0aW9uYWwgc2luZCA9PiBtYW5kYXRvcnkga2VubnplaWNobmVuCgpPT0JF'));
	@fwrite($fp, base64_decode('L1NFVFVQCi0gVGhlcmUgc2hvdWxkIGJlIGEgInRlc3QgZGF0YWJhc2UgY29ubmVjdGlvbiIgYnV0dG9uCgpTTUFMTCBUSElOR1MKLSBUaGluZ3MgbGlrZSAiY29uZmlnKCktPm1pblJhUGFzc3dvcmRMZW5ndGgiIHNob3VsZCBub3QgYmUgaGFyZGNvZGVkIGZ1bmN0'));
	@fwrite($fp, base64_decode('aW9ucywgYnV0IHJhdGhlciBxdWVyaWVkIHdpdGggbm9ybWFsIGdldFZhbHVlKCkgZXRjLgotIEFQSSA6IE1ha2UgYSBmdW5jdGlvbiB0aGF0IGNoZWNrcyBpZiBhIFJBIGV4aXN0cywgYW5kIHVzZSBpdCBldmVyeXdoZXJlIHdoZXJlIG5lZWRlZAotIFNob3VsZCB3'));
	@fwrite($fp, base64_decode('ZSBzZWxmLWhvc3QgcG9seWZpbGwgZHVlIHRvIEdEUFIgc3R1ZmY/Ci0gT2JqZWN0IHR5cGUgcGx1Z2lucyA6IG5hbWUgYWxsIGZpbGVzICJwbHVnaW4uaW5jLnBocCIgYW5kIGFsc28gdGFrZSBjYXJlIHRoYXQgInRyZWVpY29uLnBuZyIgYW5kICJpY29uX2JpZy5w'));
	@fwrite($fp, base64_decode('bmciIGV4aXN0IGV2ZXJ5d2hlcmUgKGJlY29tZSBzdGFuZGFyZCkKLSB3aGVuIGFqYXgucGhwIGdlbmVyYXRlcyBhIFBIUCBlcnJvciwgdGhlIGNsaWVudCBnaXZlcyBhICJzeW50YXggZXJyb3IiIG1lc3NhZ2UuLi4gaXQgd291bGQgYmUgYmV0dGVyIGlmIHRoZSBj'));
	@fwrite($fp, base64_decode('bGllbnQgc2hvd3MgdGhlIGZ1bGwgcGhwIGVycm9yPyBvciBzb21ldGhpbmcgbW9yZSB1c2VyLWZyaWVuZGx5PwotIGZyZWVvaWQ6IGdtYWlsIGFwcCBkb2VzIG5vdCBoeXBlcmxpbmsgdGhlIGFjdGl2YXRpb24gVVJMLiB3aHk/Ci0gaG93IHRvIGF2b2lkIGludml0'));
	@fwrite($fp, base64_decode('ZSBzcGFtbWluZz8KLSB3aGVuIGEgUEhQIGVycm9yIGhhcHBlbnMsIHRoZSBBSkFYIHNjcmlwdCBvdXRwdXRzICJFcnJvcjogU3ludGF4RXJyb3I6IFVuZXhwZWN0ZWQgdG9rZW4gPCBpbiBKU09OIGF0IHBvc2l0aW9uIDAiIC4uLiBiZXR0ZXIgc2hvdyB0aGUgdXNl'));
	@fwrite($fp, base64_decode('ciB0aGUgYWN0dWFsIG1lc3NhZ2UKLSAicGx1Z2luLmluYy5waHAiID0+IHJlbmFtZSB0byAqLmNsYXNzLnBocCA/IE9yIHZpY2UgdmVyc2EgZm9yIG9iamVjdCB0eXBlcz8KLSB3aGVuIGxvZ2luIGV4cGlyZWQsIHJlbW92ZSBlbnRyaWVzIGluIHRoZSB0cmVldmll'));
	@fwrite($fp, base64_decode('dwotIGNhbiB3ZSBwdXQgZXZlbiBtb3JlIGNvZGUgKGUuZy4gb2JqZWN0IENSVUQpIGludG8gdGhlIHBsdWdpbiBkaXJlY3Rvcnk/Ci0gZGlzYWJsZSBzcGVjaWZpYyBmdW5jdGlvbnMgKGUuZy4gaW52aXRlLCBsb2dpbiwgcmFpbmZvLCBmb3Jnb3QgcGFzc3dvcmQp'));
	@fwrite($fp, base64_decode('IGlmIHRoZSBwbHVnaW5zIGFyZSBub3QgaW5zdGFsbGVkIChjaGVjayBpZiBjbGFzcyB0eXBlIGlzIHJlZ2lzdGVyZWQpCi0gbWFrZSB1c2FnZSBvZiBGb3JlaWduIEtleXMKLSA8YWJicj4gaW4gPGNvZGU+IHdpcmQgZG9wcGVsdCB1bnRlcnN0cmljaGVuCi0gd2Vu'));
	@fwrite($fp, base64_decode('biBtYW4gZWluZSB3ZWxsLWtub3duIE9JRCBhbmxlZ2VuIG32Y2h0ZSwgZGFubiBrb21tdCBmZWhsZXIgd2VnZW4gcmVwbGFjZUFzbjEvcmVwbGFjZUlyaSwgYWJlciBkaWUgT0lEIGlzdCBlcnN0ZWxsdC4gRGllIEFQSSBpc3QgYWJlciBuaWNodCByZWxvYWRlZC4g'));
	@fwrite($fp, base64_decode('TWFuIHNpZWh0IGFsc28gbmljaHQsIGRhc3MgZGllIE9JRCBlcnN0ZWxsdCB3dXJkZSwgdW5kIGVpbiBlcm5ldXRlciBrbGljayBhdWYgSW5zZXJ0IGb8aHJ0IHp1bSBQcmltYXJ5LUtleSBmZWhsZXIKLSBwcm9ibGVtOiB3ZW5uIGVpbmUgUkEgZWluZ2VsYWRlbiB3'));
	@fwrite($fp, base64_decode('ZXJkZW4gbfZjaHRlLCBtdXNzIG1hbiAidXBkYXRlIiBkcvxja2VuIHVuZCBkaWUgT0lEIHdpcmQgYWxzIHVwZGF0ZWQgbWFya2llcnQKLSBiZWkgbWVocmVyZW4gaWRlbnRpZmllcm4ga2FubiBtYW4gbmljaHQgYmVzdGltbWVuLCB3ZWxjaGVyIGlkZW50aWZpZXIg'));
	@fwrite($fp, base64_decode('ZGVyIGJldm9yenVndGUgc2VpbiBzb2xsISEKLSBzaG93IHdob2lzIGxpbmtzIG9ubHkgaWYgZm9sZGVyICJ3aG9pcy8iIGV4aXN0cwotIGRpc2FibGUgYXV0b2NvbXBsZXRlIG9uIHNvbWUgZm9ybXMKLSBncmFwaGljYWwgaW1wb3J2ZW1lbnRzIG9mIGZvcm1zIChp'));
	@fwrite($fp, base64_decode('bnB1dCBlZGl0cyBhbGlnbmVkKQotICJEb2N1bWVudHMiIHNlY3Rpb246IE1ha2UgZG9jdW1lbnRhdGlvbiBmb3IgdXNhZ2Ugb2YgT0lEcGx1cyAoZm9yIG1lbWJlcnMgb25seSkKLSBhZG1pbiBjb25maWcgbWVociB1c2VyIGZyaWVuZGx5LCBlLmcuIGhhdmluZyB0'));
	@fwrite($fp, base64_decode('aGUgZW5hYmxlL2Rpc2FibGUgb2JqZWN0IHR5cGUgc3R1ZmYgKGxpa2UgaW4gcmVnaXN0cmF0aW9uIHdpemFyZCkgYWxzbyBpbiB0aGUgYWRtaW4gY29udHJvbCBwYW5lbAotIGl0IHdvdWxkIGJlIGNvb2wgaWYgYWZ0ZXIgdGhlIGxvZ2luLCB0aGUgb3BlbmVkIG5v'));
	@fwrite($fp, base64_decode('ZGVzIGluIHRoZSB0cmVlIHdvdWxkIHN0YXkgb3BlbgotIHNob3VsZCB3ZSBsb2cgc29tZXdoZXJlLCB3aGVuIHRoZSBhZG1pbiBhY2NvdW50IHdhcyBsb2dnZWQgaW4/Ci0gbXVsdGlsYW5nCi0gaHRtbCBjaGVja2JveDogImxhYmVsIGZvciIgdmVyd2VuZGVuCi0g'));
	@fwrite($fp, base64_decode('d2hlbiBqYXZhc2NyaXB0IGZhaWxzLCB0aGUgZm9ybSB3aWxsIGJlIHN1Ym1pdHRlZCB0byAnLi8nICwgdGhhdCBpcyBub3QgZ29vZCEgZmFpbGVkIGphdmFzY3JpcHQgbXVzdCByZXR1cm4gZmFsc2UsIHNvIHRoYXQgdGhlIGZvcm0gZG9lcyBub3QgZ2V0IHN1Ym1p'));
	@fwrite($fp, base64_decode('dHRlZAotIGFkbWluOiBzaG93IHByaXZhY3kgZW50cmllcyBmcm9tIFJBcyAoYnV0IGdyZXksIHNvIHlvdSBrbm93IHRoYXQgaXQgaXMgcHJpdmF0ZSkKLSBhZG1pbiBzb2xsIGNvbnRhY3QgZGF0YSBlaW5lciBmcmVtZGVuIFJBIORuZGVybiBk/HJmZW4KLSBmcmVl'));
	@fwrite($fp, base64_decode('b2lkOiBhc24uMSB1bmQgaXJpIHNwYWx0ZW4gYXVzYmxlbmRlbiwgZGEgZGllc2VyIGFyYyBrZWluZSBJRHMgdmVyZ2lidD8KLSBQcml2YWN5OiBNZWhyIHN0dWZlbiwgei5iLiBkYXNzIG1hbiBkZW4gcGVyc29uYWwgbmFtZSBldnRsIGdhciBuaWNodCB6ZWlnZW4g'));
	@fwrite($fp, base64_decode('bfZjaHRlCi0gTWFuIHNvbGx0ZSAiY3JlYXRlZCIgYWLkbmRlcm4gZPxyZmVuISBvZGVyIGV2dGwgZ2FueiB2ZXJzdGVja2VuLCB3ZW5uIG1hbiBlcyBuaWNodCB3ZWnfCi0gaW4gZGVyIGNydWQgbGlzdGUgZGVuIHRpdGVsIGRlcyBvYmpla3RzIHplaWdlbgotIG5h'));
	@fwrite($fp, base64_decode('dE9yZGVyKCkgaXN0IG51ciBm/HIgT0lEIGf8bHRpZyEhISBhbmRlcmUgc29ydC1tZWNoYW5pc21lbiBm/HIgYW5kZXJlIG9iamVrdHR5cGVuIGVyZm9yZGVybGljaAotIHRpbnltY2UKCW1jZSBkaXJ0eSBmbGFnOgoJCS0gd2VubiBtYW4gd2VjaHNlbCAoanMgdHJl'));
	@fwrite($fp, base64_decode('ZSBzZWxlY3QpLCBkYW5uIHNvbGwgYWJnZWZyYWd0IHdlcmRlbiwgb2IgdGlueW1jZSBkaXJ0eSBpc3QsIHVuZCBlaW5lIHdhcm51bmcgYnJpbmdlbiwgYWxzbyBzbywgd2llIHdlbm4gbWFuIGRpZSBzZWl0ZSBuZXUgbGFkZW4gd/xyZGUKCQktIGtyaXRpc2NoZXIg'));
	@fwrite($fp, base64_decode('YnVnOiBzZWl0ZSD2ZmZuZW4sIHRpbnkgbWNlIGVkaXRpZXJlbiwgc3BlaWNoZXJuIGtsaWNrZW4uIGRhbm4gZjUgbmV1IGxhZGVuIChuaWNodCBzdHJnK2Y1KTogZGFubiBpc3QgZGVyIGFsdGUgY29udGVudCB3aWVkZXIgZGEuIGF132VyIG1hbiBkcvxja3Qgc3Ry'));
	@fwrite($fp, base64_decode('ZytmNQotIGpzdHJlZSBzZWxlY3Q6IGF1dG9tYXRpY2FsbHkgc2Nyb2xsIGRvd24KLSBvcHRpc2NoIGF1Zmj8YnNjaGVuLiBkaW5nZSB3aWUgUkE6IG1laHIgZGluZ2UgemVpZ2VuLCBhZHJlc3NlLCBlbWFpbCBldGMKCkZVVFVSRQotIHdlIG5lZWQgdG8gbWFrZSBP'));
	@fwrite($fp, base64_decode('SURwbHVzIG1vcmUgY29tcGF0aWJsZSB3aXRoIG5vbi1NeVNRTCBkYXRhYmFzZXMgKGRpZmZlcmVudCBTUUwgZGlhbGVjdHMpCi0gbWFrZSB1c2Ugb2YgQ29tcG9zZXIuIFByb2JsZW1zOgogICogV2hhdCBpZiBjb21wb3NlciBpbnN0YWxscyBhIHZlcnNpb24gb2Yg'));
	@fwrite($fp, base64_decode('YSBjb21wb25lbnQsIHdoaWNoIGlzIGluY29tcGF0aWJsZT8KICAqIFdlIG5lZWQgYSBuZXcgcHVibGlzaGluZyBzY3JpcHQsIGJlY2F1c2Ugc2ltcGx5IGNoZWNraW5nIG91dCBTVk4gaXMgbm90IGVub3VnaCBhbnltb3JlLiBUaGUgdXNlciBuZWVkcyB0byBleGVj'));
	@fwrite($fp, base64_decode('dXRlIGNvbXBvc2VyLiBCdXQgd2hhdCBpcyBpZiB0aGUgdXNlciBkb24ndCBoYXZlIGNvbXBvc2VyIChvciBkb250IGhhdmUgc2hlbGwgYWNjZXNzIGF0IGFsbD8pCi0gaW1wbGVtZW50IHNpdGVtYXBzIHhtbAotIGFkbWluIHNob3VsZCBiZSBhYmxlIHRvIGNoYW5n'));
	@fwrite($fp, base64_decode('ZSB3ZWxsa25vd24gb2lkcz8KLSBtb3ZlIG9pZCB0byBkaWZmZXJlbnQgYXJjCi0gYmVpIHNlaHIgZ3Jv32VuIGFyY3MgKHouQi4gUEVOKSBzb2xsZW4gbmljaHQgYWxsZSBhbmdlemVpZ3Qgd2VyZGVuCi0gdW50ZXJzdPx0enVuZyBm/HIgT1JTPwotIE1laHIgIkN1'));
	@fwrite($fp, base64_decode('dHRpbmcgRWRnZSBUZWNobm9sb2dpZSIgc29sbCBpbiBkaWVzZW0gUHJvamVrdCB6dW0gVHJhZ2VuIGtvbW1lbjogQUpBWCwgSlNPTiwgdm9sbHN05G5kaWcgVVRGOCwgQ1JVRCBmcmFtZXdvcmtzLCBQRE8sIEhUTUw1LCBNb2JpbGVzIERlc2lnbiwgUHVyZSBDU1Ms'));
	@fwrite($fp, base64_decode('IEF1dG9sb2FkaW5nLCBPYmpla3RvcmllbnRpZXJ1bmcgKGFiZXIgbmljaHQgdW5iZWRpbmd0IE1WQyksIC4uLjxicj4KLSAiU2VhcmNoIiBwbHVnaW46IEZlYXR1cmUgdG8gc2VhcmNoIGluc2lkZSBkb2N1bWVudGF0aW9uIChkb2MvIGRpcmVjdG9yeSkKLSAiU2Vh'));
	@fwrite($fp, base64_decode('cmNoIiBwbHVnaW46IEkgd2FudCB0byBzZWFyY2ggaW4gYWxsIG9iamVjdCB0eXBlcyBhbmQgUkFzLiBOb3QgZmlyc3Qgc2VsZWN0IHRoZSB0eXBlLgotIEhvdyBjYW4gd2UgbWFrZSBzdXJlIHRoYXQgZXhhbXBsZSBvYmplY3RzIGFyZSBub3QgZXhwb3J0ZWQgdXNp'));
	@fwrite($fp, base64_decode('bmcgb2lkLWluZm8uY29tIGV4cG9ydD8KLSBBZG1pbmlzdHJhdG9yLUludGVyZmFjZTogZW5hYmxlIGFuZCBkaXNhYmxlIG9iamVjdCB0eXBlcwoKQlVHUz8KLSBPSURwbHVzIGRvZXMgbm90IHdvcmsgaW4gU2FmYXJpIE1vYmlsZSEKCTEuIFlvdSBjYW5ub3Qgc2Ny'));
	@fwrite($fp, base64_decode('b2xsIHRoZSBPSUQgZ3JpZCwgYXMgdGhlIHNjcm9sbGluZyBhZmZlY3RzIHRoZSB3aG9sZSBwYWdlLCBub3QgdGhlIGdyaWQuCgkyLiBKUXVlcnlVSSBzbGlkZXJzIGNhbm5vdCBiZSBkcmFnZ2VkCgpSRUpFQ1RFRCBJREVBUwotIHNvbGx0ZSBlcyBtZWhlcmUgYWRt'));
	@fwrite($fp, base64_decode('aW5zIGdlYmVuPwotIGNoYW5nZSBoaXN0b3J5IG9mIGVhY2ggb2lkCi0gcmVjb3JkIGZpcnN0IFJBIGFuZCBjdXJyZW50IFJBID0+IFguNjYwIGRvZXMgbm90IGhhdmUgdGhpcyByZXF1aXJlbWVudAotIG1hcmtlcnMgRFJBRlQsIExFQUYgYW5kIEZST1pFTiBldGMu'));
	@fwrite($fp, base64_decode('ID0+IHVzZSAiUHJvdGVjdGVkIiBpZiB5b3Ugd2FudCB0byBtYWtlIGl0IGludmlzaWJsZQoKSURFQVMKLSBhZG1pbiBhcmVhOiBtYWtlIGEgcGx1Z2luIHRoYXQgc2hvd3MgYWxsIHBsdWdpbnMgKEFsc28gYnkgdHlwZSwgZS5nLiBwYWdlIHBsdWdpbiBhbmQgb2Jq'));
	@fwrite($fp, base64_decode('ZWN0dHlwZSBwbHVnaW4pCi0gbWFrZSBjb2xvciBwbHVnaW4gYXZhaWxhYmxlIGZvciBldmVyeW9uZS4gQWRtaW4gbWF5IHBlcm1hbmVudGx5IHNhdmUgdGhlIGNvbG9ycywgYnV0IHVzZXJzIHNob3VsZCBiZSBhYmxlIHRvIHNldCB0aGVpciBvd24gdGhlbWUsIHNh'));
	@fwrite($fp, base64_decode('dmVkIHZpYSBjb29raWVzCi0gdGhlcmUgc2hvdWxkIGJlIGEgZm9ybSB3aGVyZSBhbiBSQSBjYW4gcmVxdWVzdCBhbiBpbnZpdGF0aW9uLCBldmVuIGlmIHRoZSBzdXBlcmlvciBSQSBkaWQgbm90IGludml0ZSB0aGVtLgogIHRoZSBmYWN0IHRoYXQgYSBSQSBleGlz'));
	@fwrite($fp, base64_decode('dHMgaW4gdGhlIE9iamVjdCBUYWJsZSBzaG91bGQgcGVybWl0IHRoZSBSQSB0byBpbnZpdGUgdGhlaXJzZWxmLgotIGJlaW0gdmVybGFzc2VuIGRlciBzZWl0ZSwgei5iLiB3ZW5uIG1hbiBsaW5rcyBhdWYgZWluZW4gbmV1ZW4gbWVu/HB1bmt0IGtsaWNrdCwgc29s'));
	@fwrite($fp, base64_decode('bCBlaW5lIGFiZnJhZ2Uga29tbWVuLCBvYiBtYW4gc3BlaWNoZXJuIG32Y2h0ZQotIG1ha2UgYSBsaXN0IG9mIE9JRHMgdGhhdCBkbyBub3QgYXNzaWduIEFTTjEvSVJJIGlkZW50aWZpZXJzIChlLmcuIElBTkEgUEVOIG9yIFZpYVRoaW5rU29mdCBGcmVlT0lEKSwg'));
	@fwrite($fp, base64_decode('dGhlbiByZWplY3QgYW55IGlkZW50aWZpZXIgdGhlIHVzZXIgcHJvdmlkZXMKLSBzYW5pdGl6ZSBJUHY0LCBJUHY2LCBHVUlEIGR1cmluZyBjcmVhdGlvbgoJYmVpIElQdjQgdW5kIElQdjY6IC0gaWYgaXQgaXMgYSBzaW5nbGUgaG9zdCBhZGRyZXNzLCBkb24ndCBw'));
	@fwrite($fp, base64_decode('dXQgLzMyIG9yIC8xMjggc3VmZml4CgkgICAgICAgICAgICAgICAgICAgLSBzdHJpa2UgdW5uZWNlc3NhcnkgYml0cyB0aGF0IGFyZSBub3QgZGVmaW5lZCBpbiB0aGUgbmV0bWFzayAoYWxzbyBhdCB0aGUgd2hvaXMgb3V0cHV0KQotIGxldCB0aGUgc3lzYWRtaW4g'));
	@fwrite($fp, base64_decode('ZGVjaWRlIGlmIHRoZXkgd2FudCB0aGUgdGl0bGUgYmUgInN5c3RlbXRpdGxlIC0gb2JqZWN0IHRpdGxlIiBvciAib2JqZWN0IHRpdGxlIC0gc3lzdGVtdGl0bGUiCi0gc2hvdWxkIGEgUkEgYmUgYWJsZSB0byBtYXJrIHRoZWlyIG93biBvaWQgYXMgY29uZmlkZW50'));
	@fwrite($fp, base64_decode('aWFsLCBpbnN0ZWFkIG9mIGFza2luZyB0aGUgc3VwZXJpb3IgUkE/Ci0gc29sbHRlIGVzIGVpbmUgb2lkcGx1cyBwcm9qZWt0c2VpdGUgZ2ViZW4gYW5zdGVsbGUgbnVyIGRhcyBuYWNrdGUgc3lzdGVtPwotIHZlbmRvciBzaWduYXR1cmUgdG8gcGx1Z2lucwoKUVVF'));
	@fwrite($fp, base64_decode('U1RJT05TCi0gc2hvdWxkIHRoZSBjb2xsYXRpb24gYmUgY2FzZSBzZW5zaXRpdmUgb3IgY2FzZSBpbnNlbnNpdGl2ZT8gRm9yIEphdmEgcGFja2FnZSBuYW1lcywgaXQgc2hvdWxkIGJlIGNhc2Ugc2Vuc3RpdmllCi0gd29ydCAiZ3VpZCIgb2RlciAidXVpZCIgdmVy'));
	@fwrite($fp, base64_decode('d2VuZGVuPwotIGJpdCBvciB0aW55aW50KDEpID8KLSBzaG91bGQgIk9JRCB1cGRhdGVkIiBiZSBzcGxpdCBpbnRvIHR3byBjYXRlZ29yaWVzICJ1cGRhdGVkIGJ5IHN1cGVyaW9yIiAoZS5nLiBpZGVudGlmaWVycykgYW5kICJ1cGRhdGVkIGJ5IG93bmVyIiAoZGVz'));
	@fwrite($fp, base64_decode('Y3JpcHRpb24gZXRjKT8KLSAidXBkYXRlZCIgbmljaHQgYWt0dWFsaXNpZXJlbiwgd2VubiBtYW4gbnVyIGF1ZiAidXBkYXRlIiBrbGlja3QgYWJlciBuaXggZ2XkbmRlcnQgaGF0Ci0gIkRvY3VtZW50cyIgc2VjdGlvbjogQ2FuIGJhc2Ugb2YgVVJMcy9pbWFnZXMg'));
	@fwrite($fp, base64_decode('aW5zaWRlIHRoZSBIVE1MIGJlIGNoYW5nZWQgYXV0b21hdGljYWxseT8KCkdVSUQgTWFuYWdlbWVudAotIExlYWYgbm9kZXMgKEdVSURzKSBzaG91bGQgc2hvdy9lZGl0IHRoZSBUaXRsZSBpbiB0aGUgQ1JVRCwgc28geW91IGRvbnQgaGF2ZSB0byBjbGljayB0aGUg'));
	@fwrite($fp, base64_decode('R1VJRCB0byBzZWUgdGhlIHRpdGxlCi0gc2VsdHNhbWVyIGJ1Zzogd2VubiBpY2ggZ3VpZDpvaWRwbHVzIGVkaXRpZXJlLCBkYW5uIPZmZm5ldCBzaWNoIGxpbmtzIGd1aWQ6YWN0aXZlZGlyZWN0b3J5IGJlaW0gbmV1bGFkZW4gZGVzIGJhdW1zIG5hY2ggZGVtIHVw'));
	@fwrite($fp, base64_decode('ZGF0ZS4gaXJnZW5kd2llIPZmZm5ldCBlciBkZW4genVsZXR6dCBnZfZmZm5ldGVuIG5vZGUgYmVpbSByZWxvYWQgbm9jaG1hbAo='));
	@fclose($fp);
}
if (!is_file('TODO')) {
	warn('File has vanished! Will re-create it: TODO');
	writefile_1();
	if (!is_file('TODO')) {
		warn('File cannot be created (not existing): TODO');
	} else if (sha1_file('TODO') != '3179300c17f0e55a2dd898fc6e6762eb140dd9fb') {
		warn('File cannot be created (checksum mismatch): TODO');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('TODO', 0644)) {
		warn('Could not change file permissions of TODO');
	}
} else {
	if (@sha1_file('TODO') !== '3179300c17f0e55a2dd898fc6e6762eb140dd9fb') {
		if (@sha1_file('TODO') !== 'fd771b1d918d7811a9f2a8e742360e83d5a7ec99') {
			warn('File was modified. Will overwrite the changes now: TODO');
			$tmp = pathinfo('TODO');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('TODO')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('TODO', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('TODO') !== '3179300c17f0e55a2dd898fc6e6762eb140dd9fb') {
			warn('File cannot be written (checksum mismatch): TODO');
		}
	}
}

// Files different: index.php
function writefile_2() {
	@$fp = fopen('index.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCnJlcXVpcmVfb25jZSBfX0RJUl9fIC4gJy9pbmNsdWRlcy9vaWRwbHVzLmluYy5waHAnOwoKb2Jfc3RhcnQoKTsgLy8gYWxsb3cgY29va2llIGhlYWRlcnMgdG8gYmUgc2VudAoKaGVhZGVyKCdDb250'));
	@fwrite($fp, base64_decode('ZW50LVR5cGU6dGV4dC9odG1sOyBjaGFyc2V0PVVURi04Jyk7CgppZiAoIWZ1bmN0aW9uX2V4aXN0cygnZ21wX2luaXQnKSkgewoJLy8gUmVxdWlyZWQgZm9yIHV1aWRfZnVuY3Rpb25zLmluYy5waHAgYW5kIGlwdjZfZnVuY3Rpb25zLmluYy5waHAKCWRpZSgnPGgx'));
	@fwrite($fp, base64_decode('Pk9JRHBsdXMgSW5zdGFsbGF0aW9uPC9oMT48cD5FUlJPUjogVGhlIGV4dGVuc2lvbiA8Yj5nbXA8L2I+IGlzIG5vdCBpbnN0YWxsZWQuPC9wPjxwPkluc3RhbGwgaXQgdXNpbmcgPGNvZGU+c3VkbyBhcHRpdHVkZSB1cGRhdGUgJiYgc3VkbyBhcHRpdHVkZSBpbnN0'));
	@fwrite($fp, base64_decode('YWxsIHBocC1nbXAgJiYgc3VkbyBzZXJ2aWNlIGFwYWNoZTIgcmVzdGFydDwvY29kZT4gb24gTGludXggc3lzdGVtcy48L3A+Jyk7Cn0KCmlmICghZnVuY3Rpb25fZXhpc3RzKCdtYl9zdWJzdHInKSkgewoJLy8gUmVxdWlyZWQgZm9yIGluY2x1ZGVzL2NsYXNzZXMv'));
	@fwrite($fp, base64_decode('T0lEcGx1c1Nlc3Npb25IYW5kbGVyLmNsYXNzLnBocCwgaW5jbHVkZXMvb2lkX3V0aWxzLmluYy5waHAsIDNwL21pbmlmeS9wYXRoLWNvbnZlcnRlci9Db252ZXJ0ZXIucGhwLCAzcC8weGJiL1NoYTMuY2xhc3MucGhwCglkaWUoJzxoMT5PSURwbHVzIEluc3RhbGxh'));
	@fwrite($fp, base64_decode('dGlvbjwvaDE+PHA+RVJST1I6IFRoZSBleHRlbnNpb24gPGI+cGhwLW1ic3RyaW5nPC9iPiBpcyBub3QgaW5zdGFsbGVkLjwvcD48cD5JbnN0YWxsIGl0IHVzaW5nIDxjb2RlPnN1ZG8gYXB0aXR1ZGUgdXBkYXRlICYmIHN1ZG8gYXB0aXR1ZGUgaW5zdGFsbCBwaHAt'));
	@fwrite($fp, base64_decode('bWJzdHJpbmcgJiYgc3VkbyBzZXJ2aWNlIGFwYWNoZTIgcmVzdGFydDwvY29kZT4gb24gTGludXggc3lzdGVtcy48L3A+Jyk7Cn0KCk9JRHBsdXM6OmluaXQodHJ1ZSk7Cgokc3RhdGljX25vZGVfaWQgPSBpc3NldCgkX1JFUVVFU1RbJ2dvdG8nXSkgPyAkX1JFUVVF'));
	@fwrite($fp, base64_decode('U1RbJ2dvdG8nXSA6ICdvaWRwbHVzOnN5c3RlbSc7CiRzdGF0aWMgPSBPSURwbHVzOjpndWkoKTo6Z2VuZXJhdGVDb250ZW50UGFnZSgkc3RhdGljX25vZGVfaWQpOwokc3RhdGljX3RpdGxlID0gJHN0YXRpY1sndGl0bGUnXTsKJHN0YXRpY19pY29uID0gJHN0YXRp'));
	@fwrite($fp, base64_decode('Y1snaWNvbiddOwokc3RhdGljX2NvbnRlbnQgPSAkc3RhdGljWyd0ZXh0J107CgpmdW5jdGlvbiBjb21iaW5lX3N5c3RlbXRpdGxlX2FuZF9wYWdldGl0bGUoJHN5c3RlbXRpdGxlLCAkcGFnZXRpdGxlKSB7CglpZiAoJHN5c3RlbXRpdGxlID09ICRwYWdldGl0bGUp'));
	@fwrite($fp, base64_decode('IHsKCQlyZXR1cm4gJHN5c3RlbXRpdGxlOwoJfSBlbHNlIHsKCQlyZXR1cm4gJHN5c3RlbXRpdGxlIC4gJyAtICcgLiAkcGFnZXRpdGxlOwoJfQp9Cgokc3lzaWRfb2lkID0gT0lEcGx1czo6c3lzdGVtX2lkKHRydWUpOwppZiAoISRzeXNpZF9vaWQpICRzeXNpZF9v'));
	@fwrite($fp, base64_decode('aWQgPSAndW5rbm93bic7CmhlYWRlcignWC1PSURwbHVzLVN5c3RlbUlEOicuJHN5c2lkX29pZCk7Cgokc3lzX3VybCA9IE9JRHBsdXM6OnN5c3RlbV91cmwoKTsKaGVhZGVyKCdYLU9JRHBsdXMtU3lzdGVtVVJMOicuJHN5c191cmwpOwoKJHN5c192ZXIgPSBPSURw'));
	@fwrite($fp, base64_decode('bHVzOjpnZXRWZXJzaW9uKCk7CmlmICghJHN5c192ZXIpICRzeXNfdmVyID0gJ3Vua25vd24nOwpoZWFkZXIoJ1gtT0lEcGx1cy1TeXN0ZW1WZXJzaW9uOicuJHN5c192ZXIpOwoKJHN5c190aXRsZSA9IE9JRHBsdXM6OmNvbmZpZygpLT5zeXN0ZW1UaXRsZSgpOwpo'));
	@fwrite($fp, base64_decode('ZWFkZXIoJ1gtT0lEcGx1cy1TeXN0ZW1UaXRsZTonLiRzeXNfdGl0bGUpOwoKaWYgKGNsYXNzX2V4aXN0cygnT0lEcGx1c1BhZ2VBZG1pbkNvbG9ycycpKSB7CgkkY3NzID0gJ29pZHBsdXMubWluLmNzcy5waHA/aF9zaGlmdD0nLihPSURwbHVzOjpjb25maWcoKS0+'));
	@fwrite($fp, base64_decode('Z2V0VmFsdWUoJ2NvbG9yX2h1ZV9zaGlmdCcpLzM2MCkuJyZzX3NoaWZ0PScuKE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgnY29sb3Jfc2F0X3NoaWZ0JykvMTAwKS4nJnZfc2hpZnQ9Jy4oT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdjb2xvcl92YWxf'));
	@fwrite($fp, base64_decode('c2hpZnQnKS8xMDApOwp9IGVsc2UgewoJJGNzcyA9ICdvaWRwbHVzLm1pbi5jc3MucGhwJzsKfQoKPz48IURPQ1RZUEUgaHRtbD4KPGh0bWwgbGFuZz0iZW4iPgoKPGhlYWQ+Cgk8bWV0YSBodHRwLWVxdWl2PSJDb250ZW50LVR5cGUiIGNvbnRlbnQ9InRleHQvaHRt'));
	@fwrite($fp, base64_decode('bDsgY2hhcnNldD11dGYtOCI+Cgk8bWV0YSBuYW1lPSJPSURwbHVzLVN5c3RlbUlEIiBjb250ZW50PSI8P3BocCBlY2hvIGh0bWxlbnRpdGllcygkc3lzaWRfb2lkKTsgPz4iPgoJPG1ldGEgbmFtZT0iT0lEcGx1cy1TeXN0ZW1VUkwiIGNvbnRlbnQ9Ijw/cGhwIGVj'));
	@fwrite($fp, base64_decode('aG8gaHRtbGVudGl0aWVzKCRzeXNfdXJsKTsgPz4iPgoJPG1ldGEgbmFtZT0iT0lEcGx1cy1TeXN0ZW1WZXJzaW9uIiBjb250ZW50PSI8P3BocCBlY2hvIGh0bWxlbnRpdGllcygkc3lzX3Zlcik7ID8+Ij4KCTxtZXRhIG5hbWU9Ik9JRHBsdXMtU3lzdGVtVGl0bGUi'));
	@fwrite($fp, base64_decode('IGNvbnRlbnQ9Ijw/cGhwIGVjaG8gaHRtbGVudGl0aWVzKCRzeXNfdGl0bGUpOyAvKiBEbyBub3QgcmVtb3ZlLiBUaGlzIG1ldGEgdGFnIGlzIGFjZXNzZWQgdmlhIEpTICovID8+Ij4KCTxtZXRhIG5hbWU9InRoZW1lLWNvbG9yIiBjb250ZW50PSIjQTlEQ0YwIj4K'));
	@fwrite($fp, base64_decode('CTxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wIj4KCgk8dGl0bGU+PD9waHAgZWNobyBjb21iaW5lX3N5c3RlbXRpdGxlX2FuZF9wYWdldGl0bGUoT0lEcGx1czo6Y29uZmlnKCktPnN5c3Rl'));
	@fwrite($fp, base64_decode('bVRpdGxlKCksICRzdGF0aWNfdGl0bGUpOyA/PjwvdGl0bGU+CgoJPCEtLSBXZSBhcmUgdXNpbmcgalF1ZXJ5IDIuMi4xLCBiZWNhdXNlIDMuMy4xIHNlZW1zIHRvIGJlIGluY29tcGF0aWJsZSB3aXRoIGpzVHJlZSAoSFRNTCBjb250ZW50IHdpbGwgbm90IGJlIGxv'));
	@fwrite($fp, base64_decode('YWRlZCBpbnRvIGpzVHJlZSEpIFRPRE86IEZpbGUgYnVnIHJlcG9ydCAtLT4KCTxzY3JpcHQgc3JjPSIzcC9qcXVlcnkvanF1ZXJ5LTIuMi4xLm1pbi5qcyI+PC9zY3JpcHQ+Cgk8c2NyaXB0IHNyYz0iM3AvYm9vdHN0cmFwL2pzL2Jvb3RzdHJhcC5taW4uanMiPjwv'));
	@fwrite($fp, base64_decode('c2NyaXB0PgoJPHNjcmlwdCBzcmM9IjNwL2pzdHJlZS9qc3RyZWUubWluLmpzIj48L3NjcmlwdD4KCTxzY3JpcHQgc3JjPSczcC90aW55bWNlL3RpbnltY2UubWluLmpzJz48L3NjcmlwdD4KCTxzY3JpcHQgc3JjPSIzcC9qcXVlcnktdWkvanF1ZXJ5LXVpLm1pbi5q'));
	@fwrite($fp, base64_decode('cyI+PC9zY3JpcHQ+Cgk8c2NyaXB0IHNyYz0iM3AvbGF5b3V0L2pxdWVyeS5sYXlvdXQubWluLmpzIj48L3NjcmlwdD4KCTxzY3JpcHQgc3JjPSIzcC9zcGFtc3Bhbi9zcGFtc3Bhbi5qcyI+PC9zY3JpcHQ+Cgk8c2NyaXB0IHNyYz0iM3Avc2hhM19qcy9zaGEzLmpz'));
	@fwrite($fp, base64_decode('Ij48L3NjcmlwdD48IS0tIGh0dHBzOi8vZ2l0aHViLmNvbS9lbW4xNzgvanMtc2hhMyAtLT4KCTxzY3JpcHQgc3JjPSJodHRwczovL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS9hcGkuanMiPjwvc2NyaXB0PgoJPHNjcmlwdCBzcmM9Imh0dHBzOi8vcG9seWZpbGwu'));
	@fwrite($fp, base64_decode('aW8vdjMvcG9seWZpbGwubWluLmpzP2ZlYXR1cmVzPWZldGNoJTJDVVJMIj48L3NjcmlwdD48IS0tIEZvciBJRS4uLiAtLT4KCTxzY3JpcHQgc3JjPSJvaWRwbHVzLm1pbi5qcy5waHAiPjwvc2NyaXB0PgoKCTxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iPD9w'));
	@fwrite($fp, base64_decode('aHAgZWNobyBodG1sZW50aXRpZXMoJGNzcyk7ID8+Ij4KCgk8bGluayByZWw9InNob3J0Y3V0IGljb24iIHR5cGU9ImltYWdlL3gtaWNvbiIgaHJlZj0iaW1nL2Zhdmljb24uaWNvIj4KCgk8IS0tIERNIDI4IE1heSAyMDE5OiBSZW1vdmVkIENvb2tpZUNvbnNlbnQg'));
	@fwrite($fp, base64_decode('dGVtcG9yYXJpbHksIGJlY2F1c2UgaXQgaXMgcGxhY2VkIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIHBhZ2UgYW5kIHRoZXJlZm9yZSBydWlucyB0aGUgR29vZ2xlIGluZGV4IC4uLiAtLT4KCTwhLS0gV2UgbWlnaHQgbm90IG5lZWQgaXQsIGJlY2F1c2UgY29va2ll'));
	@fwrite($fp, base64_decode('cyBhcmUgb25seSBzZXQgZHVyaW5nIGxvZ2luLCBhbmQgYXQgdGhlIGxvZ2luIHBhZ2Ugd2UgYWxyZWFkeSB3YXJuIGFib3V0IGNvb2tpZXMgLS0+Cgk8IS0tIFRPRE86IEJyaW5nIGJhY2s/IC0tPgoJPCEtLSA8bGluayByZWw9InN0eWxlc2hlZXQiIHR5cGU9InRl'));
	@fwrite($fp, base64_decode('eHQvY3NzIiBocmVmPSIzcC9jb29raWVjb25zZW50L2Nvb2tpZWNvbnNlbnQubWluLmNzcyI+Cgk8c2NyaXB0IHNyYz0iM3AvY29va2llY29uc2VudC9jb29raWVjb25zZW50Lm1pbi5qcyI+PC9zY3JpcHQ+Cgk8c2NyaXB0PgoJCXdpbmRvdy5hZGRFdmVudExpc3Rl'));
	@fwrite($fp, base64_decode('bmVyKCJsb2FkIiwgZnVuY3Rpb24oKXsKCQl3aW5kb3cuY29va2llY29uc2VudC5pbml0aWFsaXNlKHsKCQkJInBhbGV0dGUiOiB7CgkJCQkicG9wdXAiOiB7CgkJCQkJImJhY2tncm91bmQiOiAiI2VkZWZmNSIsCgkJCQkJInRleHQiOiAiIzgzODM5MSIKCQkJCX0s'));
	@fwrite($fp, base64_decode('CgkJCQkiYnV0dG9uIjogewoJCQkJCSJiYWNrZ3JvdW5kIjogIiM0YjgxZTgiCgkJCQl9CgkJCX0sCgkJCSJwb3NpdGlvbiI6ICJib3R0b20tcmlnaHQiCgkJfSl9KTsKCTwvc2NyaXB0PiAtLT4KPC9oZWFkPgoKPGJvZHk+Cgo8ZGl2IGlkPSJmcmFtZXMiPgoJPGRp'));
	@fwrite($fp, base64_decode('diBpZD0iY29udGVudF93aW5kb3ciIGNsYXNzPSJib3JkZXJib3giPgoJCTw/cGhwCgkJJHN0YXRpY19jb250ZW50ID0gcHJlZ19yZXBsYWNlX2NhbGxiYWNrKAoJCQknfDxhXHMoW14+XSopaHJlZj0ibWFpbHRvOihbXiJdKykiKFtePl0qKT4oW148XSopPC9hPnxp'));
	@fwrite($fp, base64_decode('c21VJywKCQkJZnVuY3Rpb24gKCR0cmVmZmVyKSB7CgkJCQkkZW1haWwgPSAkdHJlZmZlclsyXTsKCQkJCSR0ZXh0ID0gJHRyZWZmZXJbNF07CgkJCQlyZXR1cm4gc2VjdXJlX2VtYWlsKCRlbWFpbCwgJHRleHQsIDEpOyAvLyBBbnRpU3BhbQoJCQl9LCAkc3RhdGlj'));
	@fwrite($fp, base64_decode('X2NvbnRlbnQpOwoKCQllY2hvICc8aDEgaWQ9InJlYWxfdGl0bGUiPic7CgkJaWYgKCRzdGF0aWNfaWNvbiAhPSAnJykgZWNobyAnPGltZyBzcmM9IicuaHRtbGVudGl0aWVzKCRzdGF0aWNfaWNvbikuJyIgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiBhbHQ9IiI+ICc7'));
	@fwrite($fp, base64_decode('CgkJZWNobyBodG1sZW50aXRpZXMoJHN0YXRpY190aXRsZSkuJzwvaDE+JzsKCQllY2hvICc8ZGl2IGlkPSJyZWFsX2NvbnRlbnQiPicuJHN0YXRpY19jb250ZW50Lic8L2Rpdj4nOwoJCWlmICgkX1NFUlZFUlsnUkVRVUVTVF9NRVRIT0QnXSA9PSAnR0VUJykgewoJ'));
	@fwrite($fp, base64_decode('CQllY2hvICc8YnI+PHA+PGltZyBzcmM9ImltZy9zaGFyZS5wbmciIHdpZHRoPSIxNSIgaGVpZ2h0PSIxNSIgYWx0PSJTaGFyZSI+IDxhIGhyZWY9Ij9nb3RvPScuaHRtbGVudGl0aWVzKCRzdGF0aWNfbm9kZV9pZCkuJyIgaWQ9InN0YXRpY19saW5rIiBjbGFzcz0i'));
	@fwrite($fp, base64_decode('Z3JheV9mb290ZXJfZm9udCI+U3RhdGljIGxpbmsgdG8gdGhpcyBwYWdlPC9hPic7CgkJCWVjaG8gJzwvcD4nOwoJCX0KCQllY2hvICc8YnI+JzsKCQk/PgoJPC9kaXY+CgoJPGRpdiBpZD0ic3lzdGVtX3RpdGxlX2JhciI+CgkJPGRpdiBpZD0ic3lzdGVtX3RpdGxl'));
	@fwrite($fp, base64_decode('X21lbnUiIG9uY2xpY2s9Im1vYmlsZU5hdkJ1dHRvbkNsaWNrKHRoaXMpIiBvbm1vdXNlZW50ZXI9Im1vYmlsZU5hdkJ1dHRvbkhvdmVyKHRoaXMpIiBvbm1vdXNlbGVhdmU9Im1vYmlsZU5hdkJ1dHRvbkhvdmVyKHRoaXMpIj4KCQkJPGRpdiBpZD0iYmFyMSI+PC9k'));
	@fwrite($fp, base64_decode('aXY+CgkJCTxkaXYgaWQ9ImJhcjIiPjwvZGl2PgoJCQk8ZGl2IGlkPSJiYXIzIj48L2Rpdj4KCQk8L2Rpdj4KCgkJPGRpdiBpZD0ic3lzdGVtX3RpdGxlX3RleHQiPgoJCQk8YSA8P3BocCBlY2hvIG9pZHBsdXNfbGluaygnb2lkcGx1czpzeXN0ZW0nKTsgPz4+CgkJ'));
	@fwrite($fp, base64_decode('CQk8c3BhbiBpZD0ic3lzdGVtX3RpdGxlXzEiPlZpYVRoaW5rU29mdCBPSURwbHVzIDIuMDwvc3Bhbj48YnI+CgkJCQk8c3BhbiBpZD0ic3lzdGVtX3RpdGxlXzIiPjw/cGhwIGVjaG8gaHRtbGVudGl0aWVzKE9JRHBsdXM6OmNvbmZpZygpLT5zeXN0ZW1UaXRsZSgp'));
	@fwrite($fp, base64_decode('KTsgPz48L3NwYW4+CgkJCTwvYT4KCQk8L2Rpdj4KCTwvZGl2PgoKCTxkaXYgaWQ9Im9pZHRyZWUiIGNsYXNzPSJib3JkZXJib3giPgoJCTwhLS0gPG5vc2NyaXB0PgoJCQk8cD48Yj5QbGVhc2UgZW5hYmxlIEphdmFTY3JpcHQgdG8gdXNlIGFsbCBmZWF0dXJlczwv'));
	@fwrite($fp, base64_decode('Yj48L3A+CgkJPC9ub3NjcmlwdD4gLS0+CgkJPD9waHAgT0lEcGx1c1RyZWU6Om5vbmpzX21lbnUoKTsgPz4KCTwvZGl2Pgo8L2Rpdj4KCjwvYm9keT4KPC9odG1sPgo8P3BocAoKJGNvbnQgPSBvYl9nZXRfY29udGVudHMoKTsKb2JfZW5kX2NsZWFuKCk7CgplY2hv'));
	@fwrite($fp, base64_decode('ICRjb250Owo='));
	@fclose($fp);
}
if (!is_file('index.php')) {
	warn('File has vanished! Will re-create it: index.php');
	writefile_2();
	if (!is_file('index.php')) {
		warn('File cannot be created (not existing): index.php');
	} else if (sha1_file('index.php') != '1f5dab82b11fe2ec111551da26d388fb738cf410') {
		warn('File cannot be created (checksum mismatch): index.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('index.php', 0644)) {
		warn('Could not change file permissions of index.php');
	}
} else {
	if (@sha1_file('index.php') !== '1f5dab82b11fe2ec111551da26d388fb738cf410') {
		if (@sha1_file('index.php') !== 'e3e06dca03f72d47f5ae72524c8e370fd805a08a') {
			warn('File was modified. Will overwrite the changes now: index.php');
			$tmp = pathinfo('index.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('index.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('index.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_2();
		if (@sha1_file('index.php') !== '1f5dab82b11fe2ec111551da26d388fb738cf410') {
			warn('File cannot be written (checksum mismatch): index.php');
		}
	}
}

// Files different: plugins/adminPages/120_registration/registration.php
function writefile_3() {
	@$fp = fopen('plugins/adminPages/120_registration/registration.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCnJlcXVpcmVfb25jZSBfX0RJUl9fIC4gJy8uLi8uLi8uLi9pbmNsdWRlcy9vaWRwbHVzLmluYy5waHAnOwoKb2Jfc3RhcnQoKTsgLy8gYWxsb3cgY29va2llIGhlYWRlcnMgdG8gYmUgc2VudAoKaGVh'));
	@fwrite($fp, base64_decode('ZGVyKCdDb250ZW50LVR5cGU6dGV4dC9odG1sOyBjaGFyc2V0PVVURi04Jyk7CgpPSURwbHVzOjppbml0KHRydWUpOwoKb2Jfc3RhcnQoKTsKCiRzdGVwID0gMTsKJGVycm9yc19oYXBwZW5lZCA9IGZhbHNlOwokZWRpdHNfcG9zc2libGUgPSB0cnVlOwoKPz48IURP'));
	@fwrite($fp, base64_decode('Q1RZUEUgaHRtbD4KPGh0bWwgbGFuZz0iZW4iPgoKPGhlYWQ+Cgk8dGl0bGU+T0lEcGx1cyBTZXR1cDwvdGl0bGU+Cgk8bWV0YSBuYW1lPSJyb2JvdHMiIGNvbnRlbnQ9Im5vaW5kZXgiPgoJPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmlj'));
	@fwrite($fp, base64_decode('ZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiPgoJPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSIuLi8uLi8uLi9zZXR1cC9zZXR1cC5jc3MiPgoJPHNjcmlwdCBzcmM9Imh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vcmVjYXB0Y2hhL2FwaS5qcyI+PC9zY3JpcHQ+'));
	@fwrite($fp, base64_decode('CjwvaGVhZD4KCjxib2R5PgoKPGgxPk9JRHBsdXMgU2V0dXAgLSBJbml0aWFsIFNldHRpbmdzPC9oMT4KCjxwPllvdXIgZGF0YWJhc2Ugc2V0dGluZ3MgYXJlIGNvcnJlY3QuPC9wPgoKPHA+VGhlIGZvbGxvd2luZyBzZXR0aW5ncyBuZWVkIHRvIGJlIGNvbmZpZ3Vy'));
	@fwrite($fp, base64_decode('ZWQgb25jZS48YnI+CkFmdGVyIHNldHVwIGlzIGNvbXBsZXRlLCB5b3UgY2FuIGNoYW5nZSBhbGwgdGhlc2Ugc2V0dGluZ3MgaWYgcmVxdWlyZWQuPC9wPgoKPGZvcm0gbWV0aG9kPSJQT1NUIiBhY3Rpb249InJlZ2lzdHJhdGlvbi5waHAiPgo8aW5wdXQgdHlwZT0i'));
	@fwrite($fp, base64_decode('aGlkZGVuIiBuYW1lPSJzZW50IiB2YWx1ZT0iMSI+Cgo8P3BocAppZiAoUkVDQVBUQ0hBX0VOQUJMRUQpIHsKCWVjaG8gJzxwPjx1PlN0ZXAgJy4oJHN0ZXArKykuJzogU29sdmUgQ0FQVENIQTwvdT48L3A+JzsKCWVjaG8gJzxub3NjcmlwdD4nOwoJZWNobyAnPHA+'));
	@fwrite($fp, base64_decode('PGZvbnQgY29sb3I9InJlZCI+WW91IG5lZWQgdG8gZW5hYmxlIEphdmFTY3JpcHQgdG8gc29sdmUgdGhlIENBUFRDSEEuPC9mb250PjwvcD4nOwoJZWNobyAnPC9ub3NjcmlwdD4nOwoJZWNobyAnPHNjcmlwdD4gZ3JlY2FwdGNoYS5yZW5kZXIoZG9jdW1lbnQuZ2V0'));
	@fwrite($fp, base64_decode('RWxlbWVudEJ5SWQoImctcmVjYXB0Y2hhIiksIHsgInNpdGVrZXkiIDogIicuUkVDQVBUQ0hBX1BVQkxJQy4nIiB9KTsgPC9zY3JpcHQ+JzsKCWVjaG8gJzxwPkJlZm9yZSBsb2dnaW5nIGluLCBwbGVhc2Ugc29sdmUgdGhlIGZvbGxvd2luZyBDQVBUQ0hBPC9wPic7'));
	@fwrite($fp, base64_decode('CgllY2hvICc8cD5JZiB0aGUgQ0FQVENIQSBkb2VzIG5vdCB3b3JrIChlLmcuIGJlY2F1c2Ugb2Ygd3Jvbmcga2V5cywgcGxlYXNlIHJ1biA8YSBocmVmPSI8P3BocCBlY2hvIE9JRHBsdXM6OnN5c3RlbV91cmwoKTsgPz5zZXR1cC8iPnNldHVwIHBhcnQgMTwvYT4g'));
	@fwrite($fp, base64_decode('YWdhaW4gb3IgZWRpdCBpbmNsdWRlcy9jb25maWcuaW5jLnBocCkuPC9wPic7CgllY2hvICc8ZGl2IGlkPSJnLXJlY2FwdGNoYSIgY2xhc3M9ImctcmVjYXB0Y2hhIiBkYXRhLXNpdGVrZXk9IicuUkVDQVBUQ0hBX1BVQkxJQy4nIj48L2Rpdj4nOwoKCWlmIChpc3Nl'));
	@fwrite($fp, base64_decode('dCgkX1JFUVVFU1RbJ3NlbnQnXSkpIHsKCQkkc2VjcmV0PVJFQ0FQVENIQV9QUklWQVRFOwoJCSRyZXNwb25zZT0kX1BPU1RbImctcmVjYXB0Y2hhLXJlc3BvbnNlIl07CgkJJHZlcmlmeT1maWxlX2dldF9jb250ZW50cygiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9y'));
	@fwrite($fp, base64_decode('ZWNhcHRjaGEvYXBpL3NpdGV2ZXJpZnk/c2VjcmV0PXskc2VjcmV0fSZyZXNwb25zZT17JHJlc3BvbnNlfSIpOwoJCSRjYXB0Y2hhX3N1Y2Nlc3M9anNvbl9kZWNvZGUoJHZlcmlmeSk7CgkJaWYgKCRjYXB0Y2hhX3N1Y2Nlc3MtPnN1Y2Nlc3M9PWZhbHNlKSB7CgkJ'));
	@fwrite($fp, base64_decode('CWVjaG8gJzxwPjxmb250IGNvbG9yPSJyZWQiPjxiPkNBUFRDSEEgbm90IHN1Y2Vzc2Z1bGx5IHZlcmlmaWVkPC9iPjwvZm9udD48L3A+JzsKCQkJJGVycm9yc19oYXBwZW5lZCA9IHRydWU7CgkJCSRlZGl0c19wb3NzaWJsZSA9IGZhbHNlOwoJCX0KCX0KfQo/PgoK'));
	@fwrite($fp, base64_decode('PHA+PHU+U3RlcCA8P3BocCBlY2hvICRzdGVwKys7ID8+OiBBdXRoZW50aWZpY2F0ZTwvdT48L3A+Cgo8cD5QbGVhc2UgZW50ZXIgdGhlIGFkbWluaXN0cmF0b3IgcGFzc3dvcmQgeW91IGhhdmUgZW50ZXJlZCBiZWZvcmUuPC9wPgoKPHA+PGlucHV0IHR5cGU9InBh'));
	@fwrite($fp, base64_decode('c3N3b3JkIiBuYW1lPSJhZG1pbl9wYXNzd29yZCIgdmFsdWU9IiI+ICg8YSBocmVmPSI8P3BocCBlY2hvIE9JRHBsdXM6OnN5c3RlbV91cmwoKTsgPz5zZXR1cC8iPkZvcmdvdD88L2E+KSA8P3BocAoKaWYgKGlzc2V0KCRfUkVRVUVTVFsnc2VudCddKSkgewoJaWYg'));
	@fwrite($fp, base64_decode('KCFPSURwbHVzQXV0aFV0aWxzOjphZG1pbkNoZWNrUGFzc3dvcmQoJF9SRVFVRVNUWydhZG1pbl9wYXNzd29yZCddKSkgewoJCSRlcnJvcnNfaGFwcGVuZWQgPSB0cnVlOwoJCSRlZGl0c19wb3NzaWJsZSA9IGZhbHNlOwoJCWVjaG8gJzxmb250IGNvbG9yPSJyZWQi'));
	@fwrite($fp, base64_decode('PjxiPldyb25nIHBhc3N3b3JkPC9iPjwvZm9udD4nOwoJfQp9Cgo/PjwvcD4KCjw/cGhwCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KJGRvX2VkaXRzID0gaXNzZXQoJF9SRVFVRVNUWydzZW50J10pICYmICRlZGl0c19wb3NzaWJsZTs7CiMtLS0tLS0tLS0tLS0t'));
	@fwrite($fp, base64_decode('LS0tLS0tLS0tLS0KPz4KCjxwPjx1PlN0ZXAgPD9waHAgZWNobyAkc3RlcCsrOyA/PjogUGxlYXNlIGVudGVyIHRoZSBlbWFpbCBhZGRyZXNzIG9mIHRoZSBzeXN0ZW0gYWRtaW5pc3RyYXRvcjwvdT48L3A+Cgo8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0iYWRtaW5f'));
	@fwrite($fp, base64_decode('ZW1haWwiIHZhbHVlPSI8P3BocAoKJG1zZyA9ICcnOwppZiAoaXNzZXQoJF9SRVFVRVNUWydzZW50J10pKSB7CgllY2hvIGh0bWxlbnRpdGllcygkX1JFUVVFU1RbJ2FkbWluX2VtYWlsJ10pOwoJaWYgKCRkb19lZGl0cykgewoJCXRyeSB7CgkJCU9JRHBsdXM6OmNv'));
	@fwrite($fp, base64_decode('bmZpZygpLT5zZXRWYWx1ZSgnYWRtaW5fZW1haWwnLCAkX1JFUVVFU1RbJ2FkbWluX2VtYWlsJ10pOwoJCX0gY2F0Y2ggKEV4Y2VwdGlvbiAkZSkgewoJCQkkbXNnID0gJGUtPmdldE1lc3NhZ2UoKTsKCQkJJGVycm9yc19oYXBwZW5lZCA9IHRydWU7CgkJfQoJfQp9'));
	@fwrite($fp, base64_decode('IGVsc2UgewoJZWNobyBodG1sZW50aXRpZXMoT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdhZG1pbl9lbWFpbCcpKTsKfQoKPz4iIHNpemU9IjI1Ij48P3BocCBlY2hvICcgPGZvbnQgY29sb3I9InJlZCI+PGI+Jy4kbXNnLic8L2I+PC9mb250Pic7ID8+Cgo8'));
	@fwrite($fp, base64_decode('cD48dT5TdGVwIDw/cGhwIGVjaG8gJHN0ZXArKzsgPz46IFdoYXQgdGl0bGUgc2hvdWxkIHlvdXIgUmVnaXN0cmF0aW9uIEF1dGhvcml0eSAvIE9JRHBsdXMgaW5zdGFuY2UgaGF2ZT88L3U+PC9wPgoKPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InN5c3RlbV90aXRs'));
	@fwrite($fp, base64_decode('ZSIgdmFsdWU9Ijw/cGhwCgokbXNnID0gJyc7CmlmIChpc3NldCgkX1JFUVVFU1RbJ3NlbnQnXSkpIHsKCWVjaG8gaHRtbGVudGl0aWVzKCRfUkVRVUVTVFsnc3lzdGVtX3RpdGxlJ10pOwoJaWYgKCRkb19lZGl0cykgewoJCXRyeSB7CgkJCU9JRHBsdXM6OmNvbmZp'));
	@fwrite($fp, base64_decode('ZygpLT5zZXRWYWx1ZSgnc3lzdGVtX3RpdGxlJywgJF9SRVFVRVNUWydzeXN0ZW1fdGl0bGUnXSk7CgkJfSBjYXRjaCAoRXhjZXB0aW9uICRlKSB7CgkJCSRtc2cgPSAkZS0+Z2V0TWVzc2FnZSgpOwoJCQkkZXJyb3JzX2hhcHBlbmVkID0gdHJ1ZTsKCQl9Cgl9Cn0g'));
	@fwrite($fp, base64_decode('ZWxzZSB7CgllY2hvIGh0bWxlbnRpdGllcyhPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ3N5c3RlbV90aXRsZScpKTsKfQoKPz4iIHNpemU9IjUwIj48P3BocCBlY2hvICcgPGZvbnQgY29sb3I9InJlZCI+PGI+Jy4kbXNnLic8L2I+PC9mb250Pic7ID8+Cgo8'));
	@fwrite($fp, base64_decode('cD48dT5TdGVwIDw/cGhwIGVjaG8gJHN0ZXArKzsgPz46IEVuYWJsZS9EaXNhYmxlIG9iamVjdCB0eXBlIHBsdWdpbnM8L3U+PC9wPgoKPHA+V2hpY2ggb2JqZWN0IHR5cGVzIGRvIHlvdSB3YW50IHRvIG1hbmFnZSB1c2luZyBPSURwbHVzPzwvcD4KCjw/cGhwCgok'));
	@fwrite($fp, base64_decode('ZW5hYmxlZF9hcnkgPSBhcnJheSgpOwoKZm9yZWFjaCAoT0lEcGx1czo6Z2V0UmVnaXN0ZXJlZE9iamVjdFR5cGVzKCkgYXMgJG90KSB7CgllY2hvICc8aW5wdXQgdHlwZT0iY2hlY2tib3giIG5hbWU9ImVuYWJsZV9vdF8nLiRvdDo6bnMoKS4nIiBpZD0iZW5hYmxl'));
	@fwrite($fp, base64_decode('X290XycuJG90OjpucygpLiciJzsKCWlmIChpc3NldCgkX1JFUVVFU1RbJ3NlbnQnXSkpIHsKCSAgICAgICAgaWYgKGlzc2V0KCRfUkVRVUVTVFsnZW5hYmxlX290XycuJG90OjpucygpXSkpIHsKCQkJZWNobyAnIGNoZWNrZWQnOwoJCQkkZW5hYmxlZF9hcnlbXSA9'));
	@fwrite($fp, base64_decode('ICRvdDo6bnMoKTsKCQl9Cgl9IGVsc2UgewoJICAgICAgICBlY2hvICcgY2hlY2tlZCc7Cgl9CgllY2hvICc+IDxsYWJlbCBmb3I9ImVuYWJsZV9vdF8nLiRvdDo6bnMoKS4nIj4nLmh0bWxlbnRpdGllcygkb3Q6Om9iamVjdFR5cGVUaXRsZSgpKS4nPC9sYWJlbD48'));
	@fwrite($fp, base64_decode('YnI+JzsKfQoKZm9yZWFjaCAoT0lEcGx1czo6Z2V0RGlzYWJsZWRPYmplY3RUeXBlcygpIGFzICRvdCkgewoJZWNobyAnPGlucHV0IHR5cGU9ImNoZWNrYm94IiBuYW1lPSJlbmFibGVfb3RfJy4kb3Q6Om5zKCkuJyIgaWQ9ImVuYWJsZV9vdF8nLiRvdDo6bnMoKS4n'));
	@fwrite($fp, base64_decode('Iic7CglpZiAoaXNzZXQoJF9SRVFVRVNUWydzZW50J10pKSB7CgkgICAgICAgIGlmIChpc3NldCgkX1JFUVVFU1RbJ2VuYWJsZV9vdF8nLiRvdDo6bnMoKV0pKSB7CgkJCWVjaG8gJyBjaGVja2VkJzsKCQkJJGVuYWJsZWRfYXJ5W10gPSAkb3Q6Om5zKCk7CgkJfQoJ'));
	@fwrite($fp, base64_decode('fSBlbHNlIHsKCSAgICAgICAgZWNobyAnJzsgLy8gPC0tIGRpZmZlcmVuY2UKCX0KCWVjaG8gJz4gPGxhYmVsIGZvcj0iZW5hYmxlX290XycuJG90OjpucygpLiciPicuaHRtbGVudGl0aWVzKCRvdDo6b2JqZWN0VHlwZVRpdGxlKCkpLic8L2xhYmVsPjxicj4nOwp9'));
	@fwrite($fp, base64_decode('CgokbXNnID0gJyc7CmlmICgkZG9fZWRpdHMpIHsKCXRyeSB7CgkJT0lEcGx1czo6Y29uZmlnKCktPnNldFZhbHVlKCdvYmplY3R0eXBlc19lbmFibGVkJywgaW1wbG9kZSgnOycsICRlbmFibGVkX2FyeSkpOwoJfSBjYXRjaCAoRXhjZXB0aW9uICRlKSB7CgkJJG1z'));
	@fwrite($fp, base64_decode('ZyA9ICRlLT5nZXRNZXNzYWdlKCk7CgkJJGVycm9yc19oYXBwZW5lZCA9IHRydWU7Cgl9Cn0KCj8+PD9waHAgZWNobyAnIDxmb250IGNvbG9yPSJyZWQiPjxiPicuJG1zZy4nPC9iPjwvZm9udD4nOyA/PgoKPHA+PHU+U3RlcCA8P3BocCBlY2hvICRzdGVwKys7ID8+'));
	@fwrite($fp, base64_decode('OiBTeXN0ZW0gcmVnaXN0cmF0aW9uIGFuZCBhdXRvbWF0aWMgUHVibGlzaGluZzwvdT48L3A+Cgo8cD5UaGUgcmVnaXN0cmF0aW9uIG9mIHlvdXIgT0lEcGx1cyBpbnN0YWxsYXRpb24gaGFzIHZhcmlvdXMgYWR2YW50YWdlczogVGhlIHB1YmxpYyBrZXkgb2YgeW91'));
	@fwrite($fp, base64_decode('ciBzeXN0ZW0gaXMgcHVibGlzaGVkLCBzbyB0aGF0IHVzZXJzIGNhbiBjaGVjayB0aGUgaW50ZWdyaXR5IG9mIHlvdXIgZGF0YSAoZS5nLiBzaWduZWQgT0lELW92ZXItV0hPSVMgcmVxdWVzdHMpLiBZb3UgY2FuIG9wdGlvbmFsbHkgYWxzbyBlbmFibGUgdGhlIGF1'));
	@fwrite($fp, base64_decode('dG9tYXRpYyBwdWJsaXNoaW5nIG9mIHlvdXIgcHVibGljIE9JRCBpbmZvcm1hdGlvbiB0byB0aGUgcmVwb3NpdG9yeSBvaWQtaW5mby5jb20uPC9wPgoKPD9waHAKCmlmICghZnVuY3Rpb25fZXhpc3RzKCdvcGVuc3NsX3NpZ24nKSkgewoJZWNobyAnPHA+T3BlblNT'));
	@fwrite($fp, base64_decode('TCBwbHVnaW4gaXMgbWlzc2luZyBpbiBQSFAuIFlvdSBjYW5ub3QgcmVnaXN0ZXIgeW91ciBPSURwbHVzIGluc3RhbmNlLjwvcD4nOwp9IGVsc2UgewoKCWVjaG8gJzxwPlByaXZhY3kgbGV2ZWw6PC9wPjxzZWxlY3QgbmFtZT0icmVnX3ByaXZhY3kiIGlkPSJyZWdf'));
	@fwrite($fp, base64_decode('cHJpdmFjeSI+JzsKCgkjIC0tLQoKCWVjaG8gJzxvcHRpb24gdmFsdWU9IjAiJzsKCWlmIChpc3NldCgkX1JFUVVFU1RbJ3NlbnQnXSkpIHsKCQlpZiAoaXNzZXQoJF9SRVFVRVNUWydyZWdfcHJpdmFjeSddKSAmJiAoJF9SRVFVRVNUWydyZWdfcHJpdmFjeSddID09'));
	@fwrite($fp, base64_decode('IDApKSBlY2hvICcgc2VsZWN0ZWQnOwoJfSBlbHNlIHsKCQlpZiAoKE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgncmVnX3ByaXZhY3knKSA9PSAwKSB8fCAhT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdyZWdfd2l6YXJkX2RvbmUnKSkgewoJCQllY2hv'));
	@fwrite($fp, base64_decode('ICcgc2VsZWN0ZWQnOwoJCX0gZWxzZSB7CgkJCWVjaG8gJyc7CgkJfQoJfQoJZWNobyAnPjAgPSBSZWdpc3RlciB0byBkaXJlY3Rvcnkgc2VydmljZSBhbmQgYXV0b21hdGljYWxseSBwdWJsaXNoIFJBL09JRCBkYXRhIGF0IG9pZC1pbmZvLmNvbTwvb3B0aW9uPic7'));
	@fwrite($fp, base64_decode('CgoJIyAtLS0KCgllY2hvICc8b3B0aW9uIHZhbHVlPSIxIic7CglpZiAoaXNzZXQoJF9SRVFVRVNUWydzZW50J10pKSB7CgkJaWYgKGlzc2V0KCRfUkVRVUVTVFsncmVnX3ByaXZhY3knXSkgJiYgKCRfUkVRVUVTVFsncmVnX3ByaXZhY3knXSA9PSAxKSkgZWNobyAn'));
	@fwrite($fp, base64_decode('IHNlbGVjdGVkJzsKCX0gZWxzZSB7CgkJaWYgKChPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ3JlZ19wcml2YWN5JykgPT0gMSkpIHsKCQkJZWNobyAnIHNlbGVjdGVkJzsKCQl9IGVsc2UgewoJCQllY2hvICcnOwoJCX0KCX0KCWVjaG8gJz4xID0gT25seSBy'));
	@fwrite($fp, base64_decode('ZWdpc3RlciB0byBkaXJlY3Rvcnkgc2VydmljZTwvb3B0aW9uPic7CgoJIyAtLS0KCgllY2hvICc8b3B0aW9uIHZhbHVlPSIyIic7CglpZiAoaXNzZXQoJF9SRVFVRVNUWydzZW50J10pKSB7CgkJaWYgKGlzc2V0KCRfUkVRVUVTVFsncmVnX3ByaXZhY3knXSkgJiYg'));
	@fwrite($fp, base64_decode('KCRfUkVRVUVTVFsncmVnX3ByaXZhY3knXSA9PSAyKSkgZWNobyAnIHNlbGVjdGVkJzsKCX0gZWxzZSB7CgkJaWYgKChPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ3JlZ19wcml2YWN5JykgPT0gMikpIHsKCQkJZWNobyAnIHNlbGVjdGVkJzsKCQl9IGVsc2Ug'));
	@fwrite($fp, base64_decode('ewoJCQllY2hvICcnOwoJCX0KCX0KCWVjaG8gJz4yID0gSGlkZSBzeXN0ZW08L29wdGlvbj4nOwoKCSMgLS0tCgoJZWNobyAnPC9zZWxlY3Q+JzsKCgkkbXNnID0gJyc7CglpZiAoJGRvX2VkaXRzKSB7CgkJdHJ5IHsKCQkJT0lEcGx1czo6Y29uZmlnKCktPnNldFZh'));
	@fwrite($fp, base64_decode('bHVlKCdyZWdfcHJpdmFjeScsICRfUkVRVUVTVFsncmVnX3ByaXZhY3knXSk7CgkJfSBjYXRjaCAoRXhjZXB0aW9uICRlKSB7CgkJCSRtc2cgPSAkZS0+Z2V0TWVzc2FnZSgpOwoJCQkkZXJyb3JzX2hhcHBlbmVkID0gdHJ1ZTsKCQl9Cgl9CgllY2hvICcgPGZvbnQg'));
	@fwrite($fp, base64_decode('Y29sb3I9InJlZCI+PGI+Jy4kbXNnLic8L2I+PC9mb250Pic7CgoJZWNobyAnPHA+PGk+UHJpdmFjeSBpbmZvcm1hdGlvbjo8L2k+IFRoaXMgc2V0dGluZyBjYW4gYWx3YXlzIGJlIGNoYW5nZWQgaW4gdGhlIGFkbWluaXN0cmF0b3IgbG9naW4gLyBjb250cm9sIHBh'));
	@fwrite($fp, base64_decode('bmVsLjwvcD4nOwoJLy8gVE9ETzogZGVzY3JpYmUgd2hhdCBkYXRhIGlzIHRyYW5zbWl0dGVkIG9yIGxpbmsgdG8gYSBwcml2YWN5IHN0YXRlbWVudAp9Cgo/PgoKPHA+PHU+U3VibWl0PC91PjwvcD4KCjxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJTYXZlIGFu'));
	@fwrite($fp, base64_decode('ZCBzdGFydCBPSURwbHVzISI+Cgo8L2Zvcm0+Cgo8P3BocAoKaWYgKGZ1bmN0aW9uX2V4aXN0cygnb3BlbnNzbF9zaWduJykpIHsKCj8+Cgo8cD48dT5Zb3VyIE9JRHBsdXMgc3lzdGVtIElEIChkZXJpdmVkIGZyb20gdGhlIHB1YmxpYyBrZXkpIGlzOjwvdT48L3A+'));
	@fwrite($fp, base64_decode('CgoxLjMuNi4xLjQuMS4zNzQ3Ni4zMC45LjxiPjw/cGhwCmVjaG8gaHRtbGVudGl0aWVzKE9JRHBsdXM6OnN5c3RlbV9pZCgpKTsKPz48L2I+Cgo8cD48dT5Zb3VyIHB1YmxpYyBrZXkgaXM8L3U+PC9wPgoKPD9waHAKCmVjaG8gJzxwcmU+Jy5odG1sZW50aXRpZXMo'));
	@fwrite($fp, base64_decode('T0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdvaWRwbHVzX3B1YmxpY19rZXknKSkuJzwvcHJlPic7Cgp9Cgo/PgoKPC9ib2R5PgoKPC9odG1sPgoKPD9waHAKCiRjb250ID0gb2JfZ2V0X2NvbnRlbnRzKCk7Cm9iX2VuZF9jbGVhbigpOwoKaWYgKCRkb19lZGl0'));
	@fwrite($fp, base64_decode('cyAmJiAhJGVycm9yc19oYXBwZW5lZCkgIHsKCU9JRHBsdXM6OmNvbmZpZygpLT5zZXRWYWx1ZSgncmVnX3dpemFyZF9kb25lJywgJzEnKTsKCWhlYWRlcignTG9jYXRpb246Li4vLi4vLi4vJyk7Cn0gZWxzZSB7CgllY2hvICRjb250Owp9Cg=='));
	@fclose($fp);
}
if (!is_file('plugins/adminPages/120_registration/registration.php')) {
	warn('File has vanished! Will re-create it: plugins/adminPages/120_registration/registration.php');
	writefile_3();
	if (!is_file('plugins/adminPages/120_registration/registration.php')) {
		warn('File cannot be created (not existing): plugins/adminPages/120_registration/registration.php');
	} else if (sha1_file('plugins/adminPages/120_registration/registration.php') != 'd39e8a0b48dd24a557f7c9dfff04a3f3dc19be53') {
		warn('File cannot be created (checksum mismatch): plugins/adminPages/120_registration/registration.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/adminPages/120_registration/registration.php', 0644)) {
		warn('Could not change file permissions of plugins/adminPages/120_registration/registration.php');
	}
} else {
	if (@sha1_file('plugins/adminPages/120_registration/registration.php') !== 'd39e8a0b48dd24a557f7c9dfff04a3f3dc19be53') {
		if (@sha1_file('plugins/adminPages/120_registration/registration.php') !== '6e81239e34e7e549b42653c2abdc2e313864be54') {
			warn('File was modified. Will overwrite the changes now: plugins/adminPages/120_registration/registration.php');
			$tmp = pathinfo('plugins/adminPages/120_registration/registration.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/adminPages/120_registration/registration.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/adminPages/120_registration/registration.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_3();
		if (@sha1_file('plugins/adminPages/120_registration/registration.php') !== 'd39e8a0b48dd24a557f7c9dfff04a3f3dc19be53') {
			warn('File cannot be written (checksum mismatch): plugins/adminPages/120_registration/registration.php');
		}
	}
}

// Files different: setup/index.php
function writefile_4() {
	@$fp = fopen('setup/index.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCiRvd25fZGlyID0gKGlzc2V0KCRfU0VSVkVSWydIVFRQUyddKSAmJiAkX1NFUlZFUlsnSFRUUFMnXSA9PT0gJ29uJyA/ICJodHRwcyIgOiAiaHR0cCIpIC4gIjovLyIgLiAkX1NFUlZFUlsiSFRUUF9IT1NUIl0gLiAkX1NFUlZFUlsnUkVRVUVTVF9VUkkn'));
	@fwrite($fp, base64_decode('XTsKCj8+PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KCjxoZWFkPgoJPHRpdGxlPk9JRHBsdXMgU2V0dXA8L3RpdGxlPgoJPG1ldGEgbmFtZT0icm9ib3RzIiBjb250ZW50PSJub2luZGV4Ij4KCTxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3'));
	@fwrite($fp, base64_decode('aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wIj4KCTxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0ic2V0dXAuY3NzIj4KCTxzY3JpcHQgc3JjPSIuLi8zcC9zaGEzX2pzL3NoYTMuanMiPjwvc2NyaXB0PjwhLS0gaHR0cHM6Ly9naXRodWIuY29t'));
	@fwrite($fp, base64_decode('L2VtbjE3OC9qcy1zaGEzIC0tPgoJPHNjcmlwdCBzcmM9InNldHVwLmpzIj48L3NjcmlwdD4KPC9oZWFkPgoKPGJvZHkgb25sb2FkPSJyZWJ1aWxkKCkiPgoKPGgxPk9JRHBsdXMgU2V0dXAgLSBDb25maWd1cmF0aW9uIEZpbGUgR2VuZXJhdG9yPC9oMT4KCjxwPlRo'));
	@fwrite($fp, base64_decode('YW5rIHlvdSB2ZXJ5IG11Y2ggZm9yIGNob29zaW5nIE9JRHBsdXMhIFRoaXMgc2V0dXAgYXNzaXN0YW50IHdpbGwgaGVscCB5b3UgY3JlYXRpbmcgb3IgdXBkYXRpbmcgdGhlIGZpbGUgPGI+aW5jbHVkZXMvY29uZmlnLmluYy5waHA8L2I+LgpTZXR1cCBkb2VzIG5v'));
	@fwrite($fp, base64_decode('dCBhdXRvbWF0aWNhbGx5IHdyaXRlIHRvIHRoaXMgZmlsZS4gSW5zdGVhZCwgeW91IG5lZWQgdG8gY29weS1wYXN0ZSB0aGUgY29udGVudHMgaW50byB0aGUgZmlsZS4KT25jZSBPSURwbHVzIHNldHVwIGlzIGZpbmlzaGVkLCB5b3UgY2FuIGNoYW5nZSB0aGUgY29u'));
	@fwrite($fp, base64_decode('ZmlnIGZpbGUgYnkgaGFuZCwgb3IgcnVuIHRoaXMgc2V0dXAgYXNzaXN0YW50IGFnYWluLjwvcD4KCjxkaXYgaWQ9InN0ZXAxIj4KPGgyPlN0ZXAgMTogRW50ZXIgc2V0dXAgaW5mb3JtYXRpb248L2gyPgoKPGgzPkFkbWluaXN0cmF0b3IgcGFzc3dvcmQ8L2gzPgoK'));
	@fwrite($fp, base64_decode('PGZvcm0gaWQ9InN0ZXAxX2Zvcm0iPgo8cD5XaGljaCBhZG1pbiBwYXNzd29yZCBkbyB5b3Ugd2FudD88YnI+PGlucHV0IGlkPSJhZG1pbl9wYXNzd29yZCIgdHlwZT0icGFzc3dvcmQiIGF1dG9jb21wbGV0ZT0ibmV3LXBhc3N3b3JkIiBvbmtleXByZXNzPSJyZWJ1'));
	@fwrite($fp, base64_decode('aWxkKCkiIG9ua2V5dXA9InJlYnVpbGQoKSI+IDxzcGFuIGlkPSJwYXNzd29yZF93YXJuIj48L3NwYW4+PC9wPgo8cD5QbGVhc2UgcmVwZWF0IHRoZSBwYXNzd29yZCBpbnB1dDo8YnI+PGlucHV0IGlkPSJhZG1pbl9wYXNzd29yZDIiIHR5cGU9InBhc3N3b3JkIiBh'));
	@fwrite($fp, base64_decode('dXRvY29tcGxldGU9Im5ldy1wYXNzd29yZCIgb25rZXlwcmVzcz0icmVidWlsZCgpIiBvbmtleXVwPSJyZWJ1aWxkKCkiPiA8c3BhbiBpZD0icGFzc3dvcmRfd2FybjIiPjwvc3Bhbj48L3A+Cgo8aDM+RGF0YWJhc2UgY29ubmVjdGl2aXR5PC9oMz4KCkRhdGFiYXNl'));
	@fwrite($fp, base64_decode('IHBsdWdpbjogPHNlbGVjdCBuYW1lPSJkYl9wbHVnaW4iIG9uQ2hhbmdlPSJkYnBsdWdpbl9jaGFuZ2VkKCkiIGlkPSJkYl9wbHVnaW4iPgo8b3B0aW9uIHZhbHVlPSJNeVNRTCIgc2VsZWN0ZWQ9InRydWUiPk15U1FMPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9IlBE'));
	@fwrite($fp, base64_decode('TyI+UERPPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9Ik9EQkMiPk9EQkM8L29wdGlvbj4KPC9zZWxlY3Q+Cgo8c2NyaXB0PgoKb3duZGlyID0gJzw/cGhwIGVjaG8gJG93bl9kaXI7ID8+JzsKcmVidWlsZF9jYWxsYmFja3MgPSBbXTsKcmVidWlsZF9jb25maWdfY2Fs'));
	@fwrite($fp, base64_decode('bGJhY2tzID0gW107CnBsdWdpbl9jb21ib2JveF9jaGFuZ2VfY2FsbGJhY2tzID0gW107CgpmdW5jdGlvbiBkYnBsdWdpbl9jaGFuZ2VkKCkgewoJdmFyIGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZGJfcGx1Z2luIik7Cgl2YXIgc3RyUGx1Z2luID0gZS5v'));
	@fwrite($fp, base64_decode('cHRpb25zW2Uuc2VsZWN0ZWRJbmRleF0udmFsdWU7CgoJZm9yICh2YXIgaSA9IDA7IGkgPCBwbHVnaW5fY29tYm9ib3hfY2hhbmdlX2NhbGxiYWNrcy5sZW5ndGg7IGkrKykgewoJCXZhciBmID0gcGx1Z2luX2NvbWJvYm94X2NoYW5nZV9jYWxsYmFja3NbaV07CgkJ'));
	@fwrite($fp, base64_decode('ZihzdHJQbHVnaW4pOwoJfQoKCXJlYnVpbGQoKTsKfQoKPC9zY3JpcHQ+Cgo8ZGl2IHN0eWxlPSJtYXJnaW4tbGVmdDo1MHB4Ij4KCjw/cGhwCgokZmlsZXMgPSBnbG9iKF9fRElSX18uJy8uLi9wbHVnaW5zL2RhdGFiYXNlLyovc2V0dXAucGFydC5odG1sJyk7CmZv'));
	@fwrite($fp, base64_decode('cmVhY2ggKCRmaWxlcyBhcyAkZmlsZSkgewoJZWNobyBmaWxlX2dldF9jb250ZW50cygkZmlsZSk7Cn0KaWYgKGNvdW50KCRmaWxlcykgPT0gMCkgewoJZWNobyAnPHA+PGZvbnQgY29sb3I9InJlZCI+QVRURU5USU9OOiBObyBkYXRhYmFzZSBwbHVnaW5zIGZvdW5k'));
	@fwrite($fp, base64_decode('ITwvZm9udD48L3A+JzsKfQoKPz4KCjwvZGl2PgoKPHNjcmlwdD4KZGJwbHVnaW5fY2hhbmdlZCgpOwo8L3NjcmlwdD4KCjxwPlRhYmxlbmFtZSBwcmVmaXggKGUuZy4gPGI+b2lkcGx1c188L2I+KTo8YnI+PGlucHV0IGlkPSJ0YWJsZW5hbWVfcHJlZml4IiB0eXBl'));
	@fwrite($fp, base64_decode('PSJ0ZXh0IiB2YWx1ZT0ib2lkcGx1c18iIG9ua2V5cHJlc3M9InJlYnVpbGQoKSIgb25rZXl1cD0icmVidWlsZCgpIj48L3A+Cgo8aDM+UmVDQVBUQ0hBPC9oMz4KCjxwPjxpbnB1dCBpZD0icmVjYXB0Y2hhX2VuYWJsZWQiIHR5cGU9ImNoZWNrYm94IiBvbmNsaWNr'));
	@fwrite($fp, base64_decode('PSJyZWJ1aWxkKCkiPiA8bGFiZWwgZm9yPSJyZWNhcHRjaGFfZW5hYmxlZCI+cmVDQVBUQ0hBIGVuYWJsZWQ8L2xhYmVsPiAoPGEgaHJlZj0iaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vcmVjYXB0Y2hhL2ludHJvIiB0YXJnZXQ9Il9ibGFuayI+bW9yZSBp'));
	@fwrite($fp, base64_decode('bmZvcm1hdGlvbiBhbmQgb2J0YWluIGtleTwvYT4pPC9wPgo8cD5yZUNBUFRDSEEgUHVibGljIGtleTxicj48aW5wdXQgaWQ9InJlY2FwdGNoYV9wdWJsaWMiIHR5cGU9InRleHQiIG9ua2V5cHJlc3M9InJlYnVpbGQoKSIgb25rZXl1cD0icmVidWlsZCgpIj48L3A+'));
	@fwrite($fp, base64_decode('CjxwPnJlQ0FQVENIQSBQcml2YXRlIGtleTxicj48aW5wdXQgaWQ9InJlY2FwdGNoYV9wcml2YXRlIiB0eXBlPSJ0ZXh0IiBvbmtleXByZXNzPSJyZWJ1aWxkKCkiIG9ua2V5dXA9InJlYnVpbGQoKSI+PC9wPgoKPGgzPlRMUzwvaDM+Cgo8cD5TU0wgZW5mb3JjZW1l'));
	@fwrite($fp, base64_decode('bnQ8YnI+PHNlbGVjdCBuYW1lPSJlbmZvcmNlX3NzbCIgaWQ9ImVuZm9yY2Vfc3NsIiBvbmNsaWNrPSJyZWJ1aWxkKCkiPgo8b3B0aW9uIHZhbHVlPSIwIj5ObyBTU0wgYXZhaWxhYmxlIChkb24ndCByZWRpcmVjdCk8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0iMSI+'));
	@fwrite($fp, base64_decode('RW5mb3JjZSBTU0wgKGFsd2F5cyByZWRpcmVjdCk8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0iMiIgc2VsZWN0ZWQ+SW50ZWxsaWdlbnQgU1NMIGRldGVjdGlvbiAocmVkaXJlY3QgaWYgcG9ydCA0NDMgaXMgb3Blbik8L29wdGlvbj4KPC9zZWxlY3Q+PC9wPgo8L2Zv'));
	@fwrite($fp, base64_decode('cm0+CjwvZGl2PgoKPGRpdiBpZD0ic3RlcDIiPgo8aDI+U3RlcCAyOiBJbXBvcnQgZGF0YTwvaDI+CjxwPjxiPklmIHlvdSBhbHJlYWR5IGhhdmUgYW4gT0lEcGx1cyBkYXRhYmFzZSBhbmQganVzdCB3YW50IHRvIHJlYnVpbGQgdGhlIGNvbmZpZyBmaWxlLCBwbGVh'));
	@fwrite($fp, base64_decode('c2Ugc2tpcCB0aGlzIHN0ZXAuPC9iPjwvcD4KPHA+T3RoZXJ3aXNlLCBpbXBvcnQgb25lIG9mIHRoZSBmb2xsb3dpbmcgTXlTUUwgZHVtcHMgaW4geW91ciBkYXRhYmFzZTo8L3A+CjxwPjx1bD4KCTxsaT48YSBocmVmPSJzdHJ1Y3RfZW1wdHkuc3FsLnBocCIgaWQ9'));
	@fwrite($fp, base64_decode('InN0cnVjdF8xIiB0YXJnZXQ9Il9ibGFuayI+RW1wdHkgT0lEcGx1cyBkYXRhYmFzZSB3aXRob3V0IGV4YW1wbGUgZGF0YTwvYT48c3BhbiBpZD0ic3RydWN0X2NsaV8xIj48L3NwYW4+PGJyPjxicj48L2xpPgoJPGxpPjxhIGhyZWY9InN0cnVjdF93aXRoX2V4YW1w'));
	@fwrite($fp, base64_decode('bGVzLnNxbC5waHAiIGlkPSJzdHJ1Y3RfMiIgdGFyZ2V0PSJfYmxhbmsiPk9JRHBsdXMgZGF0YWJhc2Ugd2l0aCBleGFtcGxlIGRhdGE8L2E+PHNwYW4gaWQ9InN0cnVjdF9jbGlfMiI+PC9zcGFuPjxicj48YnI+PC9saT4KCjwvdWw+PC9wPgo8cD48Zm9udCBjb2xv'));
	@fwrite($fp, base64_decode('cj0icmVkIj5XYXJuaW5nOiBBbGwgZGF0YSBmcm9tIHRoZSBwcmV2aW91cyBPSURwbHVzIGluc3RhbmNlIHdpbGwgYmUgZGVsZXRlZCBkdXJpbmcgdGhlIGltcG9ydC48YnI+SWYgeW91IGFscmVhZHkgaGF2ZSBhbiBPSURwbHVzIGRhdGFiYXNlLCBza2lwIHRvIFN0'));
	@fwrite($fp, base64_decode('ZXAgMy48L2ZvbnQ+PC9wPgoKPC9kaXY+Cgo8ZGl2IGlkPSJzdGVwMyI+CjxoMj5TdGVwIDM6IFNhdmUgY29uZmlnLmluYy5waHAgZmlsZTwvaDI+CjxwPlNhdmUgZm9sbG93aW5nIGNvbnRlbnRzIGludG8gdGhlIGZpbGUgPGI+aW5jbHVkZXMvY29uZmlnLmluYy5w'));
	@fwrite($fp, base64_decode('aHA8L2I+OjwvcD4KPGNvZGU+PGZvbnQgY29sb3I9ImRhcmtibHVlIj48ZGl2IGlkPSJjb25maWciPjwvZGl2PjwvZm9udD48L2NvZGU+CjwvZGl2PgoKPGRpdiBpZD0ic3RlcDQiPgo8aDI+U3RlcCA0OiBDb250aW51ZSB0byBuZXh0IHN0ZXA8L2gyPgo8cD48aW5w'));
	@fwrite($fp, base64_decode('dXQgdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJ3aW5kb3cubG9jYXRpb24uaHJlZj0nLi4vJyIgdmFsdWU9IkNvbnRpbnVlIj48L3A+CjwhLS0gPHA+PGEgaHJlZj0iLi4vIj5SdW4gdGhlIE9JRHBsdXMgc3lzdGVtPC9hPjwvcD4gLS0+CjwvZGl2PgoKPC9ib2R5Pgo8'));
	@fwrite($fp, base64_decode('L2h0bWw+Cg=='));
	@fclose($fp);
}
if (!is_file('setup/index.php')) {
	warn('File has vanished! Will re-create it: setup/index.php');
	writefile_4();
	if (!is_file('setup/index.php')) {
		warn('File cannot be created (not existing): setup/index.php');
	} else if (sha1_file('setup/index.php') != '9060e4b807b8bce95efab8bbeaf5d751a33d7340') {
		warn('File cannot be created (checksum mismatch): setup/index.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('setup/index.php', 0644)) {
		warn('Could not change file permissions of setup/index.php');
	}
} else {
	if (@sha1_file('setup/index.php') !== '9060e4b807b8bce95efab8bbeaf5d751a33d7340') {
		if (@sha1_file('setup/index.php') !== '0b2a8160d4e22859131bd222cfbec69d6f214634') {
			warn('File was modified. Will overwrite the changes now: setup/index.php');
			$tmp = pathinfo('setup/index.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('setup/index.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('setup/index.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_4();
		if (@sha1_file('setup/index.php') !== '9060e4b807b8bce95efab8bbeaf5d751a33d7340') {
			warn('File cannot be written (checksum mismatch): setup/index.php');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 157\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 157') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

