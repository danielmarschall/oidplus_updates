<?php /* <ViaThinkSoftSignature>
fHT/tPcoacgLyH6D0fmZQI6A2zUq2/MgXee/lS6kmileJGgx1iNukpRYFQsDYzZa+
3SLVf7jAP57NZe1MfVuEEalVU8UBa9LFpHkUoSAGB3I8iecINKuJiiiVXVldmO7fh
VsPvWDRbVjetb4zlz1UhOWgJByuf39d5QVGWjU68DjGK10HgflogHsjcOm+8+Dz2E
wJIozXTcisGttlWG+4auZNUb3ZvOFqqV3B0Rjc4AIGMNApsf69DyHi6b000tMYDMn
jSYj1Yu4Tx4YQoVmHhKOl2Sts9mYlUr4qrmodmfuPgdJ8KebeBVrHZ3WBioV5ZxKy
QxTWJxcv0Fpjkb5WFkFhaxqmev71+Sv5vWvfou40RYz2RnGVXTmcArZblFG640+pt
TEl4L1DIwIkUAI6m7bobcEblpg6t72ru5+UoRNxFn/+haTvjctxAmHtk413FIIMRk
4eqk7GIXj7iuD/g8raV4XTE4FqyBFSKQZujSD7SNI53r0xO9lMfhXGHU9HghDjNe5
nYIAr2UplB9dMw5E6LxZi0R48Iqfmb6JCGpP9cqf5f6NMaogLDM/4IPx/zmJ6UqE1
F8GjsYY2S8+CsfBrEXxISwg2mkj05TETkBlIuPWR200YEFjOVnBWcIrZCCP1v4Qsm
G8Ap5UHkeV+RMaupg+hPy1dhxPjdQDOH2jJakms5Y0mM2qz8iM8EB++0Dy2/prGWV
o21SF3RKA4jjOX1d+6ZQ1XKV1KxryJncLvhVwqQOAOyEnhnZAW1V+UUTsiV8Th0o0
8n/SW4jWSfO279jvFA6eX1Rdjdv1R+0jheQA9BAStIKrXvmJxluewf08MlpQ0+ROK
Z4SjgPwXhIUOnbJyfUwn8XaagIV+0+5w2UGesrQ1v2CsjHw84uvSFlLdwavJuua0T
wsmbeh8iOxP63Xd9o7+NHpAg64qFHrm4f7Mrzm/v1uR13M5K13B9316b4x5VM5Rk3
uG0iJ3vtQW4f/qA1ddxTYHi5FM06wYi4Qrp05F2biOrxXD5HQyt97nkcGOqiybfJe
EI5t9cOBxopRi94+qsObfyAwG9Kp9WIecCr8MCqpD7duvJJZqLW0g7AMj7fIdAHfc
h6oFJ+A7wgkaaU9jjNdq68r7DAWdp4RsuMLpHYU1M9hU/B4hI34AHPbaM7/RG63fk
AEBZtdWfwKpCQmZzbdRowXztWVaPheC7E0hATRehVNSBlGFNufRHvzx+hX+qLgwso
pNxyr5BcEUwXS+NtzWFd5No1BRt5aNzVEMTxHswTdIJDN52lCrygtsUyQhxKvWT6S
6mCYcfODyKK8CvYy+QkQLuZPaUOUXO89DDusk4NMugpFSUG+OQLgbw70cTlK7+AAk
w==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('.version.php')) !== '<?php // Revision 1096') {
	err('This update can only be applied to OIDplus version 2.0.0.1096!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: includes/oidplus.inc.php
function writefile_1() {
	@$fp = fopen('includes/oidplus.inc.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMyBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgovLyBCZWZvcmUgd2UgZG8gQU5ZVEhJTkcsIGNoZWNrIGZvciBQSFAgdmVyc2lvbiBhbmQgZGVwZW5kZW5jaWVzIQovLyBEbyBub3QgaW5jbHVkZSBhbnl0aGluZyAoZXhjZXB0IHRoZSBz'));
	@fwrite($fp, base64_decode('dXBwbGVtZW50cykgeWV0LgovLyBLZWVwIHRoaXMgZmlsZSBjbGVhbiBmcm9tIGZhbmN5IHN5bnRheCBzdWdhciwgb3RoZXJ3aXNlIG9sZCBQSFAgdmVyc2lvbnMKLy8gd2lsbCBnZXQgYSBjb21waWxhdGlvbiBlcnJvciBhbmQgdGhlbiB0aGV5IHdvbid0IHNlZSBv'));
	@fwrite($fp, base64_decode('dXIgZnJpZW5kbHkgZXJyb3IgbWVzc2FnZS4KLy8gTW9yZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcmVxdWlyZWQgUEhQIHZlcnNpb246ICBkb2MvZGV2ZWxvcGVyX25vdGVzL3BocDdfY29tcGF0LnR4dAoKZGVmaW5lKCdJTlNJREVfT0lEUExVUycsIHRydWUpOwoK'));
	@fwrite($fp, base64_decode('aWYgKHZlcnNpb25fY29tcGFyZShQSFBfVkVSU0lPTiwgJG9pZHBsdXNfbWluX3ZlcnNpb249JzcuMC4wJykgPCAwKSB7CgkvLyBOb3RlOiBUaGVzZSBzdHJpbmdzIGFyZSBub3QgdHJhbnNsYXRlZCwgYmVjYXVzZSBpbiBjYXNlIG9mIGFuIGluY29tcGF0aWJsZQoJ'));
	@fwrite($fp, base64_decode('Ly8gUEhQIHZlcnNpb24sIHdlIGFyZSBub3QgYWJsZSB0byBsb2FkIGxhbmd1YWdlIHBsdWdpbnMgYXQgYWxsLgoJJG1lc3NhZ2UgPSAnPHA+Jy5zcHJpbnRmKCdPSURwbHVzIHJlcXVpcmVzIGF0IGxlYXN0IFBIUCB2ZXJzaW9uICVzITxicj5Zb3UgYXJlIGN1cnJl'));
	@fwrite($fp, base64_decode('bnRseSB1c2luZyB2ZXJzaW9uICVzJywkb2lkcGx1c19taW5fdmVyc2lvbixQSFBfVkVSU0lPTikuJzwvcD4nOwoJb2lkcGx1c19kZXBlbmRlbmN5X3BhbmljKCRtZXNzYWdlKTsKfQp1bnNldCgkb2lkcGx1c19taW5fdmVyc2lvbik7CgovLyBXZSBuZWVkIHRoZSBh'));
	@fwrite($fp, base64_decode('dXRvbG9hZGVyIG5vdywgb3RoZXJ3aXNlIG9wZW5zc2xfc3VwcGxlbWVudCB3b24ndCB3b3JrIChpdCBuZWVkcyB0byBjaGVjayBpZiBwaHBzZWNsaWIgaXMgZXhpc3RpbmcpCi8vIEF1dG9sb2FkZXIgb2YgInZlbmRvci8iIChQU1ItNCAqLnBocCkKCnJlcXVpcmVf'));
	@fwrite($fp, base64_decode('b25jZSBfX0RJUl9fIC4gJy8uLi92ZW5kb3IvYXV0b2xvYWQucGhwJzsKCi8vIFBvbHlmaWxscy9TdXBwbGVtZW50cyB0byBpbXBsZW1lbnQgc29tZSBtaXNzaW5nIGRlcGVuZGVuY2llcyBpZiBwb3NzaWJsZQoKaW5jbHVkZV9vbmNlIF9fRElSX18gLiAnLy4uL3Zl'));
	@fwrite($fp, base64_decode('bmRvci9kYW5pZWxtYXJzY2hhbGwvcGhwX3V0aWxzL29wZW5zc2xfc3VwcGxlbWVudC5pbmMucGhwJzsKaW5jbHVkZV9vbmNlIF9fRElSX18gLiAnLy4uL3ZlbmRvci9kYW5pZWxtYXJzY2hhbGwvcGhwX3V0aWxzL2dtcF9zdXBwbGVtZW50LmluYy5waHAnOwppbmNs'));
	@fwrite($fp, base64_decode('dWRlX29uY2UgX19ESVJfXyAuICcvLi4vdmVuZG9yL3N5bWZvbnkvcG9seWZpbGwtbWJzdHJpbmcvYm9vdHN0cmFwLnBocCc7CmluY2x1ZGVfb25jZSBfX0RJUl9fIC4gJy8uLi92ZW5kb3IvZGFuaWVsbWFyc2NoYWxsL3BocF91dGlscy9zaW1wbGV4bWxfc3VwcGxl'));
	@fwrite($fp, base64_decode('bWVudC5pbmMucGhwJzsKCi8vIE5vdyBjaGVjayBmb3IgdGhpbmdzIGxpa2UgbWlzc2luZyBQSFAgbGlicmFyaWVzICh3aGljaCBjb3VsZCBub3QgYmUgaW1wbGVtZW50ZWQgdXNpbmcgdGhlIHBvbHlmaWxscykKCnJlcXVpcmVfb25jZSBfX0RJUl9fIC4gJy9vaWRw'));
	@fwrite($fp, base64_decode('bHVzX2RlcGVuZGVuY3kuaW5jLnBocCc7CiRtaXNzaW5nX2RlcGVuZGVuY2llcyA9IG9pZHBsdXNfZ2V0X21pc3NpbmdfZGVwZW5kZW5jaWVzKCk7CmlmIChjb3VudCgkbWlzc2luZ19kZXBlbmRlbmNpZXMpID49IDEpIHsKCS8vIE5vdGUgdGhhdCB0aGVyZSBhcmUg'));
	@fwrite($fp, base64_decode('bm8gdHJhbnNsYXRpb25zIF9MKCkgYmVjYXVzZSBpZiB3ZSBnZXQgYW4gZXJyb3IgYXQgdGhpcwoJLy8gc3RhZ2UsIHRoZW4gd2UgaGF2ZSBubyBsYW5ndWFnZSBwbHVnaW5zIGFueXdheXMuCgkkbWVzc2FnZSAgPSAnPHA+Jy5zcHJpbnRmKCdUaGUgZm9sbG93aW5n'));
	@fwrite($fp, base64_decode('IFBIUCBleHRlbnNpb25zIG5lZWQgdG8gYmUgaW5zdGFsbGVkIGluIG9yZGVyIHRvIHJ1biBPSURwbHVzOicpLic8L3A+JzsKCSRtZXNzYWdlIC49ICc8cD48dWw+JzsKCWZvcmVhY2ggKCRtaXNzaW5nX2RlcGVuZGVuY2llcyBhcyAkZGVwZW5kZW5jeSkgewoJCSRt'));
	@fwrite($fp, base64_decode('ZXNzYWdlIC49ICc8bGk+Jy4kZGVwZW5kZW5jeS4nPGJyPjxicj48L2xpPic7Cgl9CgkkbWVzc2FnZSAuPSAnPC91bD48L3A+JzsKCW9pZHBsdXNfZGVwZW5kZW5jeV9wYW5pYygkbWVzc2FnZSk7Cn0KdW5zZXQoJG1pc3NpbmdfZGVwZW5kZW5jaWVzKTsKCi8vIE5v'));
	@fwrite($fp, base64_decode('dyB3ZSBjYW4gY29udGludWUhCgpyZXF1aXJlX29uY2UgX19ESVJfXyAuICcvZnVuY3Rpb25zLmluYy5waHAnOwpyZXF1aXJlX29uY2UgX19ESVJfXyAuICcvLi4vdmVuZG9yL2RhbmllbG1hcnNjaGFsbC9waHBfdXRpbHMvb2lkX3V0aWxzLmluYy5waHAnOwpyZXF1'));
	@fwrite($fp, base64_decode('aXJlX29uY2UgX19ESVJfXyAuICcvLi4vdmVuZG9yL2RhbmllbG1hcnNjaGFsbC9waHBfdXRpbHMveG1sX3V0aWxzLmluYy5waHAnOwpyZXF1aXJlX29uY2UgX19ESVJfXyAuICcvLi4vdmVuZG9yL2RhbmllbG1hcnNjaGFsbC91dWlkX21hY191dGlscy9pbmNsdWRl'));
	@fwrite($fp, base64_decode('cy91dWlkX3V0aWxzLmluYy5waHAnOwpyZXF1aXJlX29uY2UgX19ESVJfXyAuICcvLi4vdmVuZG9yL2RhbmllbG1hcnNjaGFsbC9waHBfdXRpbHMvY29sb3JfdXRpbHMuaW5jLnBocCc7CnJlcXVpcmVfb25jZSBfX0RJUl9fIC4gJy8uLi92ZW5kb3IvZGFuaWVsbWFy'));
	@fwrite($fp, base64_decode('c2NoYWxsL3BocF91dGlscy9pcHY0X2Z1bmN0aW9ucy5pbmMucGhwJzsKcmVxdWlyZV9vbmNlIF9fRElSX18gLiAnLy4uL3ZlbmRvci9kYW5pZWxtYXJzY2hhbGwvcGhwX3V0aWxzL2lwdjZfZnVuY3Rpb25zLmluYy5waHAnOwpyZXF1aXJlX29uY2UgX19ESVJfXyAu'));
	@fwrite($fp, base64_decode('ICcvLi4vdmVuZG9yL2RhbmllbG1hcnNjaGFsbC9waHBfdXRpbHMvYW50aV94c3MuaW5jLnBocCc7CnJlcXVpcmVfb25jZSBfX0RJUl9fIC4gJy8uLi92ZW5kb3IvZGFuaWVsbWFyc2NoYWxsL3BocF91dGlscy9naXRfdXRpbHMuaW5jLnBocCc7CnJlcXVpcmVfb25j'));
	@fwrite($fp, base64_decode('ZSBfX0RJUl9fIC4gJy8uLi92ZW5kb3IvZGFuaWVsbWFyc2NoYWxsL3BocF91dGlscy9zdm5fdXRpbHMuaW5jLnBocCc7CnJlcXVpcmVfb25jZSBfX0RJUl9fIC4gJy8uLi92ZW5kb3IvZGFuaWVsbWFyc2NoYWxsL3BocF91dGlscy9haWRfZGVjb2Rlci5pbmMucGhw'));
	@fwrite($fp, base64_decode('JzsKcmVxdWlyZV9vbmNlIF9fRElSX18gLiAnLy4uL3ZlbmRvci9kYW5pZWxtYXJzY2hhbGwvcGhwX3V0aWxzL21pc2NfZnVuY3Rpb25zLmluYy5waHAnOwpyZXF1aXJlX29uY2UgX19ESVJfXyAuICcvLi4vdmVuZG9yL2RhbmllbG1hcnNjaGFsbC9waHBfdXRpbHMv'));
	@fwrite($fp, base64_decode('dnRzX2NyeXB0LmluYy5waHAnOwoKLy8gQXV0b2xvYWRlciBmb3IgYWxsIE9JRHBsdXMgYmFzZSBjbGFzc2VzIGFuZCBwbHVnaW5zICgqLmNsYXNzLnBocCkKCnJlcXVpcmVfb25jZSBfX0RJUl9fIC4gJy9vaWRwbHVzX2F1dG9sb2FkZXIuaW5jLnBocCc7CgovLyBG'));
	@fwrite($fp, base64_decode('dW5jdGlvbnMKCmZ1bmN0aW9uIG9pZHBsdXNfZGVwZW5kZW5jeV9wYW5pYygkbWVzc2FnZSkvKjogbmV2ZXIqLyB7CgkkdGl0bGUgPSBzcHJpbnRmKCdPSURwbHVzIHN0YXJ0dXAgZXJyb3InKTsKCWlmIChQSFBfU0FQSSA9PT0gJ2NsaScpIHsKCQkkbWVzc2FnZSA9'));
	@fwrite($fp, base64_decode('IHN0cl9yZXBsYWNlKCc8bGk+JywgIi0gIiwgJG1lc3NhZ2UpOwoJCSRtZXNzYWdlID0gc3RyX3JlcGxhY2UoJzxicj4nLCAiXG4iLCAkbWVzc2FnZSk7CgkJJG1lc3NhZ2UgPSBzdHJfcmVwbGFjZSgnPC9wPicsICJcblxuIiwgJG1lc3NhZ2UpOwoJCSRtZXNzYWdl'));
	@fwrite($fp, base64_decode('ID0gdHJpbShzdHJpcF90YWdzKCRtZXNzYWdlKSk7CgkJZnByaW50ZihTVERFUlIsICIkdGl0bGVcblxuJG1lc3NhZ2VcblxuIik7CgkJZXhpdCgxKTsKCX0gZWxzZSB7CgkJQGh0dHBfcmVzcG9uc2VfY29kZSg1MDApOwoJCWVjaG8gJzwhRE9DVFlQRSBIVE1MPic7'));
	@fwrite($fp, base64_decode('CgkJZWNobyAnPGh0bWw+PGhlYWQ+PHRpdGxlPicuJHRpdGxlLic8L3RpdGxlPjwvaGVhZD48Ym9keT4nOwoJCWVjaG8gJzxoMT4nLiR0aXRsZS4nPC9oMT4nOwoJCWVjaG8gJG1lc3NhZ2U7CgkJZWNobyAnPC9ib2R5PjwvaHRtbD4nOwoJCWRpZSgpOwoJfQp9Cg=='));
	@fclose($fp);
}
if (!is_file('includes/oidplus.inc.php')) {
	warn('File has vanished! Will re-create it: includes/oidplus.inc.php');
	writefile_1();
	if (!is_file('includes/oidplus.inc.php')) {
		warn('File cannot be created (not existing): includes/oidplus.inc.php');
	} else if (sha1_file('includes/oidplus.inc.php') != '5b33eff9ea7059df89a455b1a4e892007e36c887') {
		warn('File cannot be created (checksum mismatch): includes/oidplus.inc.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/oidplus.inc.php', 0644)) {
		warn('Could not change file permissions of includes/oidplus.inc.php');
	}
} else {
	if (@sha1_file('includes/oidplus.inc.php') !== '5b33eff9ea7059df89a455b1a4e892007e36c887') {
		if (@sha1_file('includes/oidplus.inc.php') !== 'c826476f0b19a5da65a9f51c1fb414065aa3fd87') {
			warn('File was modified. Will overwrite the changes now: includes/oidplus.inc.php');
			$tmp = pathinfo('includes/oidplus.inc.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/oidplus.inc.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('includes/oidplus.inc.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('includes/oidplus.inc.php') !== '5b33eff9ea7059df89a455b1a4e892007e36c887') {
			warn('File cannot be written (checksum mismatch): includes/oidplus.inc.php');
		}
	}
}

// Files different: plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php
function writefile_2() {
	@$fp = fopen('plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDIzIERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCm5hbWVzcGFjZSBWaWFUaGlua1NvZnRcT0lEcGx1czsKCi8vIHBocGNzOmRpc2FibGUgUFNSMS5GaWxlcy5TaWRlRWZmZWN0cwpcZGVmaW5lZCgnSU5TSURFX09JRFBMVVMnKSBvciBkaWU7Ci8vIHBo'));
	@fwrite($fp, base64_decode('cGNzOmVuYWJsZSBQU1IxLkZpbGVzLlNpZGVFZmZlY3RzCgpjbGFzcyBPSURwbHVzQXV0aFBsdWdpblZ0c01jZiBleHRlbmRzIE9JRHBsdXNBdXRoUGx1Z2luIHsKCglwdWJsaWMgZnVuY3Rpb24gdmVyaWZ5KE9JRHBsdXNSQUF1dGhJbmZvICRhdXRoSW5mbywgJGNo'));
	@fwrite($fp, base64_decode('ZWNrX3Bhc3N3b3JkKSB7CgkJJGF1dGhLZXkgPSAkYXV0aEluZm8tPmdldEF1dGhLZXkoKTsKCgkJaWYgKHN0cl9zdGFydHNfd2l0aCgkYXV0aEtleSwgJyQnLk9JRF9NQ0ZfVlRTX1YxLickJykpIHsKCQkJcmV0dXJuIHZ0c19wYXNzd29yZF92ZXJpZnkoJGNoZWNr'));
	@fwrite($fp, base64_decode('X3Bhc3N3b3JkLCAkYXV0aEtleSk7CgkJfSBlbHNlIHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCX0KCglwdWJsaWMgZnVuY3Rpb24gZ2VuZXJhdGUoJHBhc3N3b3JkKTogT0lEcGx1c1JBQXV0aEluZm8gewoJCSRoYXNoYWxnbyA9ICdzaGEzLTUxMic7IC8vIHdlIGNh'));
	@fwrite($fp, base64_decode('biBzYWZlbHkgdXNlIGl0LCBiZWNhdXNlIHdlIGhhdmUgYSBwdXJlLVBIUCBpbXBsZW1lbnRhdGlvbiBzaGlwcGVkIHdpdGggT0lEcGx1cwoKCQkkc2FsdCA9IHJhbmRvbV9ieXRlc19leCg1MCk7CgoJCWlmIChmdW5jdGlvbl9leGlzdHMoJ3NoYTNfNTEyX2htYWMn'));
	@fwrite($fp, base64_decode('KSkgewoJCQkkY2FsY19hdXRoa2V5ID0gdnRzX3Bhc3N3b3JkX2hhc2goJHBhc3N3b3JkLCBQQVNTV09SRF9WVFNfTUNGMSwgYXJyYXkoCgkJCQknYWxnbycgPT4gJGhhc2hhbGdvLAoJCQkJJ21vZGUnID0+ICdobWFjJwoJCQkpKTsKCQl9IGVsc2UgaWYgKGZ1bmN0'));
	@fwrite($fp, base64_decode('aW9uX2V4aXN0cygnc2hhM181MTInKSkgewoJCQkkY2FsY19hdXRoa2V5ID0gdnRzX3Bhc3N3b3JkX2hhc2goJHBhc3N3b3JkLCBQQVNTV09SRF9WVFNfTUNGMSwgYXJyYXkoCgkJCQknYWxnbycgPT4gJGhhc2hhbGdvLAoJCQkJJ21vZGUnID0+ICdwcycgLy8gJ3Bz'));
	@fwrite($fp, base64_decode('JyBtZWFucyBQYXNzd29yZCtTYWx0IGNvbmNhdGVuYXRlZAoJCQkpKTsKCQl9IGVsc2UgewoJCQkkY2FsY19hdXRoa2V5ID0gJyc7IC8vIGF2b2lkIFBIUHN0YW4gd2FybmluZwoJCQlhc3NlcnQoZmFsc2UpOwoJCX0KCgkJcmV0dXJuIG5ldyBPSURwbHVzUkFBdXRo'));
	@fwrite($fp, base64_decode('SW5mbygkY2FsY19hdXRoa2V5KTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gYXZhaWxhYmxlKCYkcmVhc29uKTogYm9vbCB7CgkJcmV0dXJuIGZ1bmN0aW9uX2V4aXN0cygnc2hhM181MTJfaG1hYycpIHx8IGZ1bmN0aW9uX2V4aXN0cygnc2hhM181MTInKTsKCX0KCn0K'));
	@fwrite($fp, base64_decode(''));
	@fclose($fp);
}
if (!is_file('plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php')) {
	warn('File has vanished! Will re-create it: plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php');
	writefile_2();
	if (!is_file('plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php')) {
		warn('File cannot be created (not existing): plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php');
	} else if (sha1_file('plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php') != '41b5e7687287f1cc2fa636363578f7ce49fb7466') {
		warn('File cannot be created (checksum mismatch): plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php', 0644)) {
		warn('Could not change file permissions of plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php');
	}
} else {
	if (@sha1_file('plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php') !== '41b5e7687287f1cc2fa636363578f7ce49fb7466') {
		if (@sha1_file('plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php') !== '1f1b5acdc6f005bef8af987ac74907e1d56790c8') {
			warn('File was modified. Will overwrite the changes now: plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php');
			$tmp = pathinfo('plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_2();
		if (@sha1_file('plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php') !== '41b5e7687287f1cc2fa636363578f7ce49fb7466') {
			warn('File cannot be written (checksum mismatch): plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php');
		}
	}
}

// Files different: plugins/viathinksoft/auth/A6_crypt/OIDplusAuthPluginCrypt.class.php
function writefile_3() {
	@$fp = fopen('plugins/viathinksoft/auth/A6_crypt/OIDplusAuthPluginCrypt.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDIzIERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCm5hbWVzcGFjZSBWaWFUaGlua1NvZnRcT0lEcGx1czsKCi8vIHBocGNzOmRpc2FibGUgUFNSMS5GaWxlcy5TaWRlRWZmZWN0cwpcZGVmaW5lZCgnSU5TSURFX09JRFBMVVMnKSBvciBkaWU7Ci8vIHBo'));
	@fwrite($fp, base64_decode('cGNzOmVuYWJsZSBQU1IxLkZpbGVzLlNpZGVFZmZlY3RzCgpjbGFzcyBPSURwbHVzQXV0aFBsdWdpbkNyeXB0IGV4dGVuZHMgT0lEcGx1c0F1dGhQbHVnaW4gewoKCXB1YmxpYyBmdW5jdGlvbiB2ZXJpZnkoT0lEcGx1c1JBQXV0aEluZm8gJGF1dGhJbmZvLCAkY2hl'));
	@fwrite($fp, base64_decode('Y2tfcGFzc3dvcmQpIHsKCQkkYXV0aEtleSA9ICRhdXRoSW5mby0+Z2V0QXV0aEtleSgpOwoJCXJldHVybiBwYXNzd29yZF92ZXJpZnkoJGNoZWNrX3Bhc3N3b3JkLCAkYXV0aEtleSk7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGdlbmVyYXRlKCRwYXNzd29yZCk6IE9J'));
	@fwrite($fp, base64_decode('RHBsdXNSQUF1dGhJbmZvIHsKCQkkaGFzaGFsZ28gPSBQQVNTV09SRF9TSEE1MTI7IC8vIGNob29zZSB0aGUgYmVzdCBvdXQgb2YgY3J5cHQoKQoJCSRjYWxjX2F1dGhrZXkgPSB2dHNfcGFzc3dvcmRfaGFzaCgkcGFzc3dvcmQsICRoYXNoYWxnbyk7CgkJcmV0dXJu'));
	@fwrite($fp, base64_decode('IG5ldyBPSURwbHVzUkFBdXRoSW5mbygkY2FsY19hdXRoa2V5KTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gYXZhaWxhYmxlKCYkcmVhc29uKTogYm9vbCB7CgkJcmV0dXJuIGZ1bmN0aW9uX2V4aXN0cygndnRzX3Bhc3N3b3JkX2hhc2gnKTsKCX0KCn0K'));
	@fclose($fp);
}
if (!is_file('plugins/viathinksoft/auth/A6_crypt/OIDplusAuthPluginCrypt.class.php')) {
	warn('File has vanished! Will re-create it: plugins/viathinksoft/auth/A6_crypt/OIDplusAuthPluginCrypt.class.php');
	writefile_3();
	if (!is_file('plugins/viathinksoft/auth/A6_crypt/OIDplusAuthPluginCrypt.class.php')) {
		warn('File cannot be created (not existing): plugins/viathinksoft/auth/A6_crypt/OIDplusAuthPluginCrypt.class.php');
	} else if (sha1_file('plugins/viathinksoft/auth/A6_crypt/OIDplusAuthPluginCrypt.class.php') != 'a110224bc8a69435ea8dda6335bc4781371dcf9a') {
		warn('File cannot be created (checksum mismatch): plugins/viathinksoft/auth/A6_crypt/OIDplusAuthPluginCrypt.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/viathinksoft/auth/A6_crypt/OIDplusAuthPluginCrypt.class.php', 0644)) {
		warn('Could not change file permissions of plugins/viathinksoft/auth/A6_crypt/OIDplusAuthPluginCrypt.class.php');
	}
} else {
	if (@sha1_file('plugins/viathinksoft/auth/A6_crypt/OIDplusAuthPluginCrypt.class.php') !== 'a110224bc8a69435ea8dda6335bc4781371dcf9a') {
		if (@sha1_file('plugins/viathinksoft/auth/A6_crypt/OIDplusAuthPluginCrypt.class.php') !== '7992c7b065872670afdb609c3ac138217e381735') {
			warn('File was modified. Will overwrite the changes now: plugins/viathinksoft/auth/A6_crypt/OIDplusAuthPluginCrypt.class.php');
			$tmp = pathinfo('plugins/viathinksoft/auth/A6_crypt/OIDplusAuthPluginCrypt.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/viathinksoft/auth/A6_crypt/OIDplusAuthPluginCrypt.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/viathinksoft/auth/A6_crypt/OIDplusAuthPluginCrypt.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_3();
		if (@sha1_file('plugins/viathinksoft/auth/A6_crypt/OIDplusAuthPluginCrypt.class.php') !== 'a110224bc8a69435ea8dda6335bc4781371dcf9a') {
			warn('File cannot be written (checksum mismatch): plugins/viathinksoft/auth/A6_crypt/OIDplusAuthPluginCrypt.class.php');
		}
	}
}

// Files different: vendor/danielmarschall/php_utils/vts_crypt.inc.php
function writefile_4() {
	@$fp = fopen('vendor/danielmarschall/php_utils/vts_crypt.inc.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIFZpYVRoaW5rU29mdCBNb2R1bGFyIENyeXB0IEZvcm1hdCAxLjAgLyB2dHNfcGFzc3dvcmRfaGFzaCgpIC8gdnRzX3Bhc3N3b3JkX3ZlcmlmeSgpCiAqIENvcHlyaWdodCAyMDIzIERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKiBS'));
	@fwrite($fp, base64_decode('ZXZpc2lvbiAyMDIzLTAyLTI3CiAqCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExp'));
	@fwrite($fp, base64_decode('Y2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3Jl'));
	@fwrite($fp, base64_decode('ZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhl'));
	@fwrite($fp, base64_decode('ciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwoKLyoKClRoZSBmdW5jdGlvbiB2'));
	@fwrite($fp, base64_decode('dHNfcGFzc3dvcmRfaGFzaCgpIHJlcGxhY2VzIHBhc3N3b3JkX2hhc2goKQphbmQgYWRkcyB0aGUgVmlhVGhpbmtTb2Z0IE1vZHVsYXIgQ3J5cHQgRm9ybWF0IDEuMCBoYXNoIGFzIHdlbGwgYXMKYWxsIGhhc2hlcyBmcm9tIHBhc3N3b3JkX2hhc2goKSBhbmQgY3J5'));
	@fwrite($fp, base64_decode('cHQoKS4KClRoZSBmdW5jdGlvbiB2dHNfcGFzc3dvcmRfdmVyaWZ5KCkgcmVwbGFjZXMgcGFzc3dvcmRfdmVyaWZ5KCkuCgpWaWFUaGlua1NvZnQgTW9kdWxhciBDcnlwdCBGb3JtYXQgMS4wIHBlcmZvcm1zIGEgc2ltcGxlIGhhc2ggb3IgSE1BQyBvcGVyYXRpb24u'));
	@fwrite($fp, base64_decode('Ck5vIGtleSBkZXJpdmF0aW9uIGZ1bmN0aW9uIG9yIGl0ZXJhdGlvbnMgYXJlIHBlcmZvcm1lZC4KRm9ybWF0OgoJJDEuMy42LjEuNC4xLjM3NDc2LjMuMC4xLjEkYT08YWxnbz4sbT08bW9kZT4kPHNhbHQ+JDxoYXNoPgp3aGVyZSA8YWxnbz4gaXMgYW55IHZhbGlk'));
	@fwrite($fp, base64_decode('IGhhc2ggYWxnb3JpdGhtIChuYW1lIHNjaGVtZSBvZiBQSFAgaGFzaF9hbGdvcygpIHByZWZlcnJlZCksIGUuZy4KCXNoYTMtNTEyCglzaGEzLTM4NAoJc2hhMy0yNTYKCXNoYTMtMjI0CglzaGE1MTIKCXNoYTUxMi8yNTYKCXNoYTUxMi8yMjQKCXNoYTM4NAoJc2hh'));
	@fwrite($fp, base64_decode('MjU2CglzaGEyMjQKCXNoYTEKCW1kNQpWYWxpZCA8bW9kZT4gOgoJc3AgPSBzYWx0ICsgcGFzc3dvcmQKCXBzID0gcGFzc3dvcmQgKyBzYWx0CglzcHMgPSBzYWx0ICsgcGFzc3dvcmQgKyBzYWx0CglobWFjID0gSE1BQyAoc2FsdCBpcyB0aGUga2V5KQpMaWtlIG1v'));
	@fwrite($fp, base64_decode('c3QgQ3J5cHQtaGFzaGVzLCA8c2FsdD4gYW5kIDxoYXNoPiBhcmUgUmFkaXg2NCBjb2RlZAp3aXRoIGFscGhhYmV0ICcuLzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6JyBhbmQgbm8gcGFkZGluZy4K'));
	@fwrite($fp, base64_decode('TGluayB0byB0aGUgb25saW5lIHNwZWNpZmljYXRpb246CglodHRwczovL29pZHBsdXMudmlhdGhpbmtzb2Z0LmNvbS9vaWRwbHVzLz9nb3RvPW9pZCUzQTEuMy42LjEuNC4xLjM3NDc2LjMuMC4xLjEKUmVmZXJlbmNlIGltcGxlbWVudGF0aW9uIGluIFBIUDoKCWh0'));
	@fwrite($fp, base64_decode('dHBzOi8vZ2l0aHViLmNvbS9kYW5pZWxtYXJzY2hhbGwvcGhwX3V0aWxzL2Jsb2IvbWFzdGVyL3Z0c19jcnlwdC5pbmMucGhwCgoqLwoKcmVxdWlyZV9vbmNlIF9fRElSX18gLiAnL21pc2NfZnVuY3Rpb25zLmluYy5waHAnOwoKZGVmaW5lKCdPSURfTUNGX1ZUU19W'));
	@fwrite($fp, base64_decode('MScsICAgICcxLjMuNi4xLjQuMS4zNzQ3Ni4zLjAuMS4xJyk7IC8vIHsgaXNvKDEpIGlkZW50aWZpZWQtb3JnYW5pemF0aW9uKDMpIGRvZCg2KSBpbnRlcm5ldCgxKSBwcml2YXRlKDQpIGVudGVycHJpc2UoMSkgMzc0NzYgc3BlY2lmaWNhdGlvbnMoMykgbWlzYygw'));
	@fwrite($fp, base64_decode('KSBtb2R1bGFyLWNyeXB0LWZvcm1hdCgxKSB2dHMtY3J5cHQtdjEoMSkgfQoKZGVmaW5lKCdQQVNTV09SRF9TVERfREVTJywgICAnc3RkX2RlcycpOwpkZWZpbmUoJ1BBU1NXT1JEX0VYVF9ERVMnLCAgICdleHRfZGVzJyk7CmRlZmluZSgnUEFTU1dPUkRfTUQ1Jywg'));
	@fwrite($fp, base64_decode('ICAgICAgJ21kNScpOwpkZWZpbmUoJ1BBU1NXT1JEX0JMT1dGSVNIJywgICdibG93ZmlzaCcpOwpkZWZpbmUoJ1BBU1NXT1JEX1NIQTI1NicsICAgICdzaGEyNTYnKTsKZGVmaW5lKCdQQVNTV09SRF9TSEE1MTInLCAgICAnc2hhNTEyJyk7CmRlZmluZSgnUEFTU1dP'));
	@fwrite($fp, base64_decode('UkRfVlRTX01DRjEnLCAgT0lEX01DRl9WVFNfVjEpOwoKZGVmaW5lKCdCQVNFNjRfUkZDNDY0OF9BTFBIQUJFVCcsICcwMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eisvJyk7CmRlZmluZSgnQkFTRTY0'));
	@fwrite($fp, base64_decode('X0NSWVBUX0FMUEhBQkVUJywgICAnLi8wMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicpOwoKLy8gLS0tIFBhcnQgMTogTW9kdWxhciBDcnlwdCBGb3JtYXQgZW5jb2RlL2RlY29kZQoKZnVuY3Rpb24g'));
	@fwrite($fp, base64_decode('Y3J5cHRfbW9kdWxhcl9mb3JtYXQoJGlkLCAkYmluX3NhbHQsICRiaW5faGFzaCwgJHBhcmFtcz1udWxsKSB7CgkvLyAkPGlkPlskPHBhcmFtPj08dmFsdWU+KCw8cGFyYW0+PTx2YWx1ZT4pKl1bJDxzYWx0PlskPGhhc2g+XV0KCSRvdXQgPSAnJCcuJGlkOwoJaWYg'));
	@fwrite($fp, base64_decode('KCFpc19udWxsKCRwYXJhbXMpKSB7CgkJJGFyeV9wYXJhbXMgPSBhcnJheSgpOwoJCS8va3NvcnQoJHBhcmFtcyk7CgkJZm9yZWFjaCAoJHBhcmFtcyBhcyAkbmFtZSA9PiAkdmFsdWUpIHsKCQkJJGFyeV9wYXJhbXNbXSA9ICIkbmFtZT0kdmFsdWUiOwoJCX0KCQkk'));
	@fwrite($fp, base64_decode('b3V0IC49ICckJy5pbXBsb2RlKCcsJywkYXJ5X3BhcmFtcyk7Cgl9Cgkkb3V0IC49ICckJy5jcnlwdF9yYWRpeDY0X2VuY29kZSgkYmluX3NhbHQpOwoJJG91dCAuPSAnJCcuY3J5cHRfcmFkaXg2NF9lbmNvZGUoJGJpbl9oYXNoKTsKCXJldHVybiAkb3V0Owp9Cgpm'));
	@fwrite($fp, base64_decode('dW5jdGlvbiBjcnlwdF9tb2R1bGFyX2Zvcm1hdF9kZWNvZGUoJG1jZikgewoJJGFyeSA9IGV4cGxvZGUoJyQnLCAkbWNmKTsKCgkkZHVtbXkgPSBhcnJheV9zaGlmdCgkYXJ5KTsKCWlmICgkZHVtbXkgIT09ICcnKSByZXR1cm4gZmFsc2U7CgoJJGR1bW15ID0gYXJy'));
	@fwrite($fp, base64_decode('YXlfc2hpZnQoJGFyeSk7CgkkaWQgPSAkZHVtbXk7CgoJJHBhcmFtcyA9IGFycmF5KCk7CgkkZHVtbXkgPSBhcnJheV9zaGlmdCgkYXJ5KTsKCWlmIChzdHJwb3MoJGR1bW15LCAnPScpICE9PSBmYWxzZSkgewoJCSRwYXJhbXNfYXJ5ID0gZXhwbG9kZSgnLCcsJGR1'));
	@fwrite($fp, base64_decode('bW15KTsKCQlmb3JlYWNoICgkcGFyYW1zX2FyeSBhcyAkcGFyYW0pIHsKCQkJJGJyeSA9IGV4cGxvZGUoJz0nLCAkcGFyYW0sIDIpOwoJCQlpZiAoY291bnQoJGJyeSkgPiAxKSB7CgkJCQkkcGFyYW1zWyRicnlbMF1dID0gJGJyeVsxXTsKCQkJfQoJCX0KCX0gZWxz'));
	@fwrite($fp, base64_decode('ZSB7CgkJYXJyYXlfdW5zaGlmdCgkYXJ5LCAkZHVtbXkpOwoJfQoKCWlmIChjb3VudCgkYXJ5KSA+IDEpIHsKCQkkZHVtbXkgPSBhcnJheV9zaGlmdCgkYXJ5KTsKCQkkYmluX3NhbHQgPSBjcnlwdF9yYWRpeDY0X2RlY29kZSgkZHVtbXkpOwoJfSBlbHNlIHsKCQkk'));
	@fwrite($fp, base64_decode('YmluX3NhbHQgPSAnJzsKCX0KCgkkZHVtbXkgPSBhcnJheV9zaGlmdCgkYXJ5KTsKCSRiaW5faGFzaCA9IGNyeXB0X3JhZGl4NjRfZGVjb2RlKCRkdW1teSk7CgoJcmV0dXJuIGFycmF5KCdpZCcgPT4gJGlkLCAnc2FsdCcgPT4gJGJpbl9zYWx0LCAnaGFzaCcgPT4g'));
	@fwrite($fp, base64_decode('JGJpbl9oYXNoLCAncGFyYW1zJyA9PiAkcGFyYW1zKTsKfQoKLy8gLS0tIFBhcnQgMjogVmlhVGhpbmtTb2Z0IE1vZHVsYXIgQ3J5cHQgRm9ybWF0IDEuMAoKZnVuY3Rpb24gdnRzX2NyeXB0KCRhbGdvLCAkc3RyX3Bhc3N3b3JkLCAkc3RyX3NhbHQsICR2ZXI9JzEn'));
	@fwrite($fp, base64_decode('LCAkbW9kZT0ncHMnKSB7CglpZiAoJHZlciA9PSAnMScpIHsKCQlpZiAoJG1vZGUgPT0gJ3NwJykgewoJCQkkcGF5bG9hZCA9ICRzdHJfc2FsdC4kc3RyX3Bhc3N3b3JkOwoJCQlpZiAoKCRhbGdvID09PSAnc2hhMy01MTInKSAmJiAhaW5fYXJyYXkoJGFsZ28sIGhh'));
	@fwrite($fp, base64_decode('c2hfYWxnb3MoKSkgJiYgZnVuY3Rpb25fZXhpc3RzKCdzaGEzXzUxMicpKSB7CgkJCQkkYmluX2hhc2ggPSBzaGEzXzUxMigkcGF5bG9hZCwgdHJ1ZSk7CgkJCX0gZWxzZSB7CgkJCQkkYmluX2hhc2ggPSBoYXNoKCRhbGdvLCAkcGF5bG9hZCwgdHJ1ZSk7CgkJCX0K'));
	@fwrite($fp, base64_decode('CQl9IGVsc2UgaWYgKCRtb2RlID09ICdwcycpIHsKCQkJJHBheWxvYWQgPSAkc3RyX3Bhc3N3b3JkLiRzdHJfc2FsdDsKCQkJaWYgKCgkYWxnbyA9PT0gJ3NoYTMtNTEyJykgJiYgIWluX2FycmF5KCRhbGdvLCBoYXNoX2FsZ29zKCkpICYmIGZ1bmN0aW9uX2V4aXN0'));
	@fwrite($fp, base64_decode('cygnc2hhM181MTInKSkgewoJCQkJJGJpbl9oYXNoID0gc2hhM181MTIoJHBheWxvYWQsIHRydWUpOwoJCQl9IGVsc2UgewoJCQkJJGJpbl9oYXNoID0gaGFzaCgkYWxnbywgJHBheWxvYWQsIHRydWUpOwoJCQl9CgkJfSBlbHNlIGlmICgkbW9kZSA9PSAnc3BzJykg'));
	@fwrite($fp, base64_decode('ewoJCQkkcGF5bG9hZCA9ICRzdHJfc2FsdC4kc3RyX3Bhc3N3b3JkLiRzdHJfc2FsdDsKCQkJaWYgKCgkYWxnbyA9PT0gJ3NoYTMtNTEyJykgJiYgIWluX2FycmF5KCRhbGdvLCBoYXNoX2FsZ29zKCkpICYmIGZ1bmN0aW9uX2V4aXN0cygnc2hhM181MTInKSkgewoJ'));
	@fwrite($fp, base64_decode('CQkJJGJpbl9oYXNoID0gc2hhM181MTIoJHBheWxvYWQsIHRydWUpOwoJCQl9IGVsc2UgewoJCQkJJGJpbl9oYXNoID0gaGFzaCgkYWxnbywgJHBheWxvYWQsIHRydWUpOwoJCQl9CgkJfSBlbHNlIGlmICgkbW9kZSA9PSAnaG1hYycpIHsKCQkJLy8gTm90ZTogQWN0'));
	@fwrite($fp, base64_decode('dWFsbHksIHdlIHNob3VsZCB1c2UgaGFzaF9obWFjX2FsZ29zKCksIGJ1dCB0aGlzIHJlcXVpcmVzIFBIUCA3LjIsIGFuZCB3ZSB3b3VsZCBsaWtlIHRvIHN0YXkgY29tcGF0aWJsZSB3aXRoIFBIUCA3LjAgZm9yIG5vdwoJCQlpZiAoKCRhbGdvID09PSAnc2hhMy01'));
	@fwrite($fp, base64_decode('MTInKSAmJiAhaW5fYXJyYXkoJGFsZ28sIGhhc2hfYWxnb3MoKSkgJiYgZnVuY3Rpb25fZXhpc3RzKCdzaGEzXzUxMl9obWFjJykpIHsKCQkJCSRiaW5faGFzaCA9IHNoYTNfNTEyX2htYWMoJHN0cl9wYXNzd29yZCwgJHN0cl9zYWx0LCB0cnVlKTsKCQkJfSBlbHNl'));
	@fwrite($fp, base64_decode('IHsKCQkJCSRiaW5faGFzaCA9IGhhc2hfaG1hYygkYWxnbywgJHN0cl9wYXNzd29yZCwgJHN0cl9zYWx0LCB0cnVlKTsKCQkJfQoJCX0gZWxzZSB7CgkJCXRocm93IG5ldyBFeGNlcHRpb24oIkludmFsaWQgVlRTIGNyeXB0IHZlcnNpb24gMSBtb2RlLiBFeHBlY3Qg'));
	@fwrite($fp, base64_decode('c3AsIHBzLCBzcHMsIG9yIGhtYWMuIik7CgkJfQoJCSRiaW5fc2FsdCA9ICRzdHJfc2FsdDsKCQlyZXR1cm4gY3J5cHRfbW9kdWxhcl9mb3JtYXQoT0lEX01DRl9WVFNfVjEsICRiaW5fc2FsdCwgJGJpbl9oYXNoLCBhcnJheSgnYSc9PiRhbGdvLCdtJz0+JG1vZGUp'));
	@fwrite($fp, base64_decode('KTsKCX0gZWxzZSB7CgkJdGhyb3cgbmV3IEV4Y2VwdGlvbigiSW52YWxpZCBWVFMgY3J5cHQgdmVyc2lvbiwgZXhwZWN0IDEuIik7Cgl9Cn0KCi8vIC0tLSBQYXJ0IDM6IHZ0c19wYXNzd29yZF9oYXNoKCkgYW5kIHZ0c19wYXNzd29yZF92ZXJpZnkoKQoKLyoqIFRo'));
	@fwrite($fp, base64_decode('aXMgZnVuY3Rpb24gZXh0ZW5kcyBwYXNzd29yZF92ZXJpZnkoKSBieSBhZGRpbmcgVmlhVGhpbmtTb2Z0IE1vZHVsYXIgQ3J5cHQgRm9ybWF0IDEuMC4KICogQHBhcmFtIHN0cmluZyAkcGFzc3dvcmQgdG8gYmUgY2hlY2tlZAogKiBAcGFyYW0gc3RyaW5nICRoYXNo'));
	@fwrite($fp, base64_decode('IEhhc2ggY3JlYXRlZCBieSBjcnlwdCgpLCBwYXNzd29yZF9oYXNoKCksIG9yIHZ0c19wYXNzd29yZF9oYXNoKCkuCiAqIEByZXR1cm4gYm9vbCB0cnVlIGlmIHBhc3N3b3JkIGlzIHZhbGlkCiAqLwpmdW5jdGlvbiB2dHNfcGFzc3dvcmRfdmVyaWZ5KCRwYXNzd29y'));
	@fwrite($fp, base64_decode('ZCwgJGhhc2gpOiBib29sIHsKCWlmIChzdHJfc3RhcnRzX3dpdGgoJGhhc2gsICckJy5QQVNTV09SRF9WVFNfTUNGMS4nJCcpKSB7CgoJCS8vIERlY29kZSB0aGUgTUNGIGhhc2ggcGFyYW1ldGVycwoJCSRkYXRhID0gY3J5cHRfbW9kdWxhcl9mb3JtYXRfZGVjb2Rl'));
	@fwrite($fp, base64_decode('KCRoYXNoKTsKCQlpZiAoJGRhdGEgPT09IGZhbHNlKSB0aHJvdyBuZXcgRXhjZXB0aW9uKCdJbnZhbGlkIGF1dGgga2V5Jyk7CgkJJGlkID0gJGRhdGFbJ2lkJ107CgkJJGJpbl9zYWx0ID0gJGRhdGFbJ3NhbHQnXTsKCQkkYmluX2hhc2ggPSAkZGF0YVsnaGFzaCdd'));
	@fwrite($fp, base64_decode('OwoJCSRwYXJhbXMgPSAkZGF0YVsncGFyYW1zJ107CgkJJGFsZ28gPSAkcGFyYW1zWydhJ107CgkJJG1vZGUgPSAkcGFyYW1zWydtJ107CgkJJHZlciA9ICcxJzsKCgkJLy8gQ3JlYXRlIGEgVlRTIE1DRiAxLjAgaGFzaCBiYXNlZCBvbiB0aGUgcGFyYW1ldGVycyBv'));
	@fwrite($fp, base64_decode('ZiAkaGFzaCBhbmQgdGhlIHBhc3N3b3JkICRwYXNzd29yZAoJCSRjYWxjX2F1dGhrZXlfMSA9IHZ0c19jcnlwdCgkYWxnbywgJHBhc3N3b3JkLCAkYmluX3NhbHQsICR2ZXIsICRtb2RlKTsKCgkJLy8gV2UgcmV3cml0ZSB0aGUgTUNGIHRvIG1ha2Ugc3VyZSB0aGF0'));
	@fwrite($fp, base64_decode('IHRoZXkgbWF0Y2ggKGlmIHBhcmFtcykgaGF2ZSB0aGUgd3Jvbmcgb3JkZXIKCQkkY2FsY19hdXRoa2V5XzIgPSBjcnlwdF9tb2R1bGFyX2Zvcm1hdCgkaWQsICRiaW5fc2FsdCwgJGJpbl9oYXNoLCAkcGFyYW1zKTsKCgkJcmV0dXJuIGhhc2hfZXF1YWxzKCRjYWxj'));
	@fwrite($fp, base64_decode('X2F1dGhrZXlfMSwgJGNhbGNfYXV0aGtleV8yKTsKCgl9IGVsc2UgewoJCS8vIHBhc3N3b3JkX2hhc2goKSBhbmQgY3J5cHQoKSBoYXNoZXMKCQlyZXR1cm4gcGFzc3dvcmRfdmVyaWZ5KCRwYXNzd29yZCwgJGhhc2gpOwoJfQp9CgovKiogVGhpcyBmdW5jdGlvbiBl'));
	@fwrite($fp, base64_decode('eHRlbmRzIHBhc3N3b3JkX2hhc2goKSB3aXRoIHRoZSBhbGdvcml0aG1zIHN1cHBvcnRlZCBieSBjcnlwdCgpLgogKiBJdCBhbHNvIGFkZHMgVmlhVGhpbmtTb2Z0IE1vZHVsYXIgQ3J5cHQgRm9ybWF0IDEuMC4KICogVGhlIHJlc3VsdCBjYW4gYmUgdmVyaWZpZWQg'));
	@fwrite($fp, base64_decode('dXNpbmcgdnRzX3Bhc3N3b3JkX3ZlcmlmeSgpLgogKiBAcGFyYW0gc3RyaW5nICRwYXNzd29yZCB0byBiZSBoYXNoZWQKICogQHBhcmFtIG1peGVkICRhbGdvIGFsZ29yaXRobQogKiBAcGFyYW0gYXJyYXkgJG9wdGlvbnMgb3B0aW9ucyBmb3IgdGhlIGhhc2hpbmcg'));
	@fwrite($fp, base64_decode('YWxnb3JpdGhtCiAqIEByZXR1cm4gc3RyaW5nIENyeXB0IGNvbXBhdGlibGUgcGFzc3dvcmQgaGFzaAogKi8KZnVuY3Rpb24gdnRzX3Bhc3N3b3JkX2hhc2goJHBhc3N3b3JkLCAkYWxnbywgJG9wdGlvbnM9YXJyYXkoKSk6IHN0cmluZyB7CgkkY3J5cHRfc2FsdCA9'));
	@fwrite($fp, base64_decode('IG51bGw7CglpZiAoKCRhbGdvID09PSBQQVNTV09SRF9TVERfREVTKSAmJiBkZWZpbmVkKCdDUllQVF9TVERfREVTJykpIHsKCQkvLyBTdGFuZGFyZCBERVMtYmFzZWQgaGFzaCB3aXRoIGEgdHdvIGNoYXJhY3RlciBzYWx0IGZyb20gdGhlIGFscGhhYmV0ICIuLzAt'));
	@fwrite($fp, base64_decode('OUEtWmEteiIuIFVzaW5nIGludmFsaWQgY2hhcmFjdGVycyBpbiB0aGUgc2FsdCB3aWxsIGNhdXNlIGNyeXB0KCkgdG8gZmFpbC4KCQkkY3J5cHRfc2FsdCA9IGRlc19jb21wYXRfc2FsdCgyKTsKCX0gZWxzZSBpZiAoKCRhbGdvID09PSBQQVNTV09SRF9FWFRfREVT'));
	@fwrite($fp, base64_decode('KSAmJiBkZWZpbmVkKCdDUllQVF9FWFRfREVTJykpIHsKCQkvLyBFeHRlbmRlZCBERVMtYmFzZWQgaGFzaC4gVGhlICJzYWx0IiBpcyBhIDktY2hhcmFjdGVyIHN0cmluZyBjb25zaXN0aW5nIG9mIGFuIHVuZGVyc2NvcmUgZm9sbG93ZWQgYnkgNCBjaGFyYWN0ZXJz'));
	@fwrite($fp, base64_decode('IG9mIGl0ZXJhdGlvbiBjb3VudCBhbmQgNCBjaGFyYWN0ZXJzIG9mIHNhbHQuIEVhY2ggb2YgdGhlc2UgNC1jaGFyYWN0ZXIgc3RyaW5ncyBlbmNvZGUgMjQgYml0cywgbGVhc3Qgc2lnbmlmaWNhbnQgY2hhcmFjdGVyIGZpcnN0LiBUaGUgdmFsdWVzIDAgdG8gNjMg'));
	@fwrite($fp, base64_decode('YXJlIGVuY29kZWQgYXMgLi8wLTlBLVphLXouIFVzaW5nIGludmFsaWQgY2hhcmFjdGVycyBpbiB0aGUgc2FsdCB3aWxsIGNhdXNlIGNyeXB0KCkgdG8gZmFpbC4KCQkkaXRlcmF0aW9ucyA9IGlzc2V0KCRvcHRpb25zWydpdGVyYXRpb25zJ10pID8gJG9wdGlvbnNb'));
	@fwrite($fp, base64_decode('J2l0ZXJhdGlvbnMnXSA6IDcyNTsKCQkkY3J5cHRfc2FsdCA9ICdfJyAuIGJhc2U2NF9pbnRfZW5jb2RlKCRpdGVyYXRpb25zKSAuIGRlc19jb21wYXRfc2FsdCg0KTsKCX0gZWxzZSBpZiAoKCRhbGdvID09PSBQQVNTV09SRF9NRDUpICYmIGRlZmluZWQoJ0NSWVBU'));
	@fwrite($fp, base64_decode('X01ENScpKSB7CgkJLy8gTUQ1IGhhc2hpbmcgd2l0aCBhIHR3ZWx2ZSBjaGFyYWN0ZXIgc2FsdCBzdGFydGluZyB3aXRoICQxJAoJCSRjcnlwdF9zYWx0ID0gJyQxJCcuZGVzX2NvbXBhdF9zYWx0KDEyKS4nJCc7Cgl9IGVsc2UgaWYgKCgkYWxnbyA9PT0gUEFTU1dP'));
	@fwrite($fp, base64_decode('UkRfQkxPV0ZJU0gpICYmIGRlZmluZWQoJ0NSWVBUX0JMT1dGSVNIJykpIHsKCQkvLyBCbG93ZmlzaCBoYXNoaW5nIHdpdGggYSBzYWx0IGFzIGZvbGxvd3M6ICIkMmEkIiwgIiQyeCQiIG9yICIkMnkkIiwgYSB0d28gZGlnaXQgY29zdCBwYXJhbWV0ZXIsICIkIiwg'));
	@fwrite($fp, base64_decode('YW5kIDIyIGNoYXJhY3RlcnMgZnJvbSB0aGUgYWxwaGFiZXQgIi4vMC05QS1aYS16Ii4gVXNpbmcgY2hhcmFjdGVycyBvdXRzaWRlIG9mIHRoaXMgcmFuZ2UgaW4gdGhlIHNhbHQgd2lsbCBjYXVzZSBjcnlwdCgpIHRvIHJldHVybiBhIHplcm8tbGVuZ3RoIHN0cmlu'));
	@fwrite($fp, base64_decode('Zy4gVGhlIHR3byBkaWdpdCBjb3N0IHBhcmFtZXRlciBpcyB0aGUgYmFzZS0yIGxvZ2FyaXRobSBvZiB0aGUgaXRlcmF0aW9uIGNvdW50IGZvciB0aGUgdW5kZXJseWluZyBCbG93ZmlzaC1iYXNlZCBoYXNoaW5nIGFsZ29yaXRobSBhbmQgbXVzdCBiZSBpbiByYW5n'));
	@fwrite($fp, base64_decode('ZSAwNC0zMSwgdmFsdWVzIG91dHNpZGUgdGhpcyByYW5nZSB3aWxsIGNhdXNlIGNyeXB0KCkgdG8gZmFpbC4gIiQyeCQiIGhhc2hlcyBhcmUgcG90ZW50aWFsbHkgd2VhazsgIiQyYSQiIGhhc2hlcyBhcmUgY29tcGF0aWJsZSBhbmQgbWl0aWdhdGUgdGhpcyB3ZWFr'));
	@fwrite($fp, base64_decode('bmVzcy4gRm9yIG5ldyBoYXNoZXMsICIkMnkkIiBzaG91bGQgYmUgdXNlZC4KCQkkYWxnbyA9ICckMnkkJzsgLy8gbW9zdCBzZWN1cmUKCQkkY29zdCA9IGlzc2V0KCRvcHRpb25zWydjb3N0J10pID8gJG9wdGlvbnNbJ2Nvc3QnXSA6IDEwOwoJCSRjcnlwdF9zYWx0'));
	@fwrite($fp, base64_decode('ID0gJGFsZ28uc3RyX3BhZCgkY29zdCwyLCcwJyxTVFJfUEFEX0xFRlQpLickJy5kZXNfY29tcGF0X3NhbHQoMjIpLickJzsKCX0gZWxzZSBpZiAoKCRhbGdvID09PSBQQVNTV09SRF9TSEEyNTYpICYmIGRlZmluZWQoJ0NSWVBUX1NIQTI1NicpKSB7CgkJLy8gU0hB'));
	@fwrite($fp, base64_decode('LTI1NiBoYXNoIHdpdGggYSBzaXh0ZWVuIGNoYXJhY3RlciBzYWx0IHByZWZpeGVkIHdpdGggJDUkLiBJZiB0aGUgc2FsdCBzdHJpbmcgc3RhcnRzIHdpdGggJ3JvdW5kcz08Tj4kJywgdGhlIG51bWVyaWMgdmFsdWUgb2YgTiBpcyB1c2VkIHRvIGluZGljYXRlIGhv'));
	@fwrite($fp, base64_decode('dyBtYW55IHRpbWVzIHRoZSBoYXNoaW5nIGxvb3Agc2hvdWxkIGJlIGV4ZWN1dGVkLCBtdWNoIGxpa2UgdGhlIGNvc3QgcGFyYW1ldGVyIG9uIEJsb3dmaXNoLiBUaGUgZGVmYXVsdCBudW1iZXIgb2Ygcm91bmRzIGlzIDUwMDAsIHRoZXJlIGlzIGEgbWluaW11bSBv'));
	@fwrite($fp, base64_decode('ZiAxMDAwIGFuZCBhIG1heGltdW0gb2YgOTk5LDk5OSw5OTkuIEFueSBzZWxlY3Rpb24gb2YgTiBvdXRzaWRlIHRoaXMgcmFuZ2Ugd2lsbCBiZSB0cnVuY2F0ZWQgdG8gdGhlIG5lYXJlc3QgbGltaXQuCgkJJGFsZ28gPSAnJDUkJzsKCQkkcm91bmRzID0gaXNzZXQo'));
	@fwrite($fp, base64_decode('JG9wdGlvbnNbJ3JvdW5kcyddKSA/ICRvcHRpb25zWydyb3VuZHMnXSA6IDUwMDA7CgkJJGNyeXB0X3NhbHQgPSAkYWxnby4ncm91bmRzPScuJHJvdW5kcy4nJCcuZGVzX2NvbXBhdF9zYWx0KDE2KS4nJCc7Cgl9IGVsc2UgaWYgKCgkYWxnbyA9PT0gUEFTU1dPUkRf'));
	@fwrite($fp, base64_decode('U0hBNTEyKSAmJiBkZWZpbmVkKCdDUllQVF9TSEE1MTInKSkgewoJCS8vIFNIQS01MTIgaGFzaCB3aXRoIGEgc2l4dGVlbiBjaGFyYWN0ZXIgc2FsdCBwcmVmaXhlZCB3aXRoICQ2JC4gSWYgdGhlIHNhbHQgc3RyaW5nIHN0YXJ0cyB3aXRoICdyb3VuZHM9PE4+JCcs'));
	@fwrite($fp, base64_decode('IHRoZSBudW1lcmljIHZhbHVlIG9mIE4gaXMgdXNlZCB0byBpbmRpY2F0ZSBob3cgbWFueSB0aW1lcyB0aGUgaGFzaGluZyBsb29wIHNob3VsZCBiZSBleGVjdXRlZCwgbXVjaCBsaWtlIHRoZSBjb3N0IHBhcmFtZXRlciBvbiBCbG93ZmlzaC4gVGhlIGRlZmF1bHQg'));
	@fwrite($fp, base64_decode('bnVtYmVyIG9mIHJvdW5kcyBpcyA1MDAwLCB0aGVyZSBpcyBhIG1pbmltdW0gb2YgMTAwMCBhbmQgYSBtYXhpbXVtIG9mIDk5OSw5OTksOTk5LiBBbnkgc2VsZWN0aW9uIG9mIE4gb3V0c2lkZSB0aGlzIHJhbmdlIHdpbGwgYmUgdHJ1bmNhdGVkIHRvIHRoZSBuZWFy'));
	@fwrite($fp, base64_decode('ZXN0IGxpbWl0LgoJCSRhbGdvID0gJyQ2JCc7CgkJJHJvdW5kcyA9IGlzc2V0KCRvcHRpb25zWydyb3VuZHMnXSkgPyAkb3B0aW9uc1sncm91bmRzJ10gOiA1MDAwOwoJCSRjcnlwdF9zYWx0ID0gJGFsZ28uJ3JvdW5kcz0nLiRyb3VuZHMuJyQnLmRlc19jb21wYXRf'));
	@fwrite($fp, base64_decode('c2FsdCgxNikuJyQnOwoJfQoKCWlmICghaXNfbnVsbCgkY3J5cHRfc2FsdCkpIHsKCQkkb3V0ID0gY3J5cHQoJHBhc3N3b3JkLCAkY3J5cHRfc2FsdCk7CgkJaWYgKHN0cmxlbigkb3V0KSA8IDEzKSB0aHJvdyBuZXcgRXhjZXB0aW9uKCJjcnlwdCgpIGZhaWxlZCIp'));
	@fwrite($fp, base64_decode('OwoJCXJldHVybiAkb3V0OwoJfSBlbHNlIGlmICgkYWxnbyA9PT0gUEFTU1dPUkRfVlRTX01DRjEpIHsKCQkkdmVyICA9ICcxJzsKCQkkYWxnbyA9IGlzc2V0KCRvcHRpb25zWydhbGdvJ10pID8gJG9wdGlvbnNbJ2FsZ28nXSA6ICdzaGEzLTUxMic7CgkJJG1vZGUg'));
	@fwrite($fp, base64_decode('PSBpc3NldCgkb3B0aW9uc1snbW9kZSddKSA/ICRvcHRpb25zWydtb2RlJ10gOiAncHMnOwoJCSRzYWx0X2xlbiA9IGlzc2V0KCRvcHRpb25zWydzYWx0X2xlbmd0aCddKSA/ICRvcHRpb25zWydzYWx0X2xlbmd0aCddIDogNTA7CgkJJHNhbHQgPSByYW5kb21fYnl0'));
	@fwrite($fp, base64_decode('ZXNfZXgoJHNhbHRfbGVuKTsKCQlyZXR1cm4gdnRzX2NyeXB0KCRhbGdvLCAkcGFzc3dvcmQsICRzYWx0LCAkdmVyLCAkbW9kZSk7Cgl9IGVsc2UgewoJCS8vICRhbGdvID09PSBQQVNTV09SRF9ERUZBVUxUCgkJLy8gJGFsZ28gPT09IFBBU1NXT1JEX0JDUllQVAoJ'));
	@fwrite($fp, base64_decode('CS8vICRhbGdvID09PSBQQVNTV09SRF9BUkdPTjJJCgkJLy8gJGFsZ28gPT09IFBBU1NXT1JEX0FSR09OMklECgkJcmV0dXJuIHBhc3N3b3JkX2hhc2goJHBhc3N3b3JkLCAkYWxnbywgJG9wdGlvbnMpOwoJfQp9CgovLyAtLS0gUGFydCA0OiBVc2VmdWwgZnVuY3Rp'));
	@fwrite($fp, base64_decode('b25zIHJlcXVpcmVkIGJ5IHRoZSBhYm92ZSBmdW5jdGlvbnMKCmZ1bmN0aW9uIGRlc19jb21wYXRfc2FsdCgkc2FsdF9sZW4pIHsKCWlmICgkc2FsdF9sZW4gPD0gMCkgcmV0dXJuICcnOwoJJGNoYXJhY3RlcnMgPSAnLi8wMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5P'));
	@fwrite($fp, base64_decode('UFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eic7Cgkkc2FsdCA9ICcnOwoJJGJ5dGVzID0gcmFuZG9tX2J5dGVzX2V4KCRzYWx0X2xlbik7Cglmb3IgKCRpPTA7ICRpPCRzYWx0X2xlbjsgJGkrKykgewoJCSRzYWx0IC49ICRjaGFyYWN0ZXJzW29y'));
	@fwrite($fp, base64_decode('ZCgkYnl0ZXNbJGldKSAlIHN0cmxlbigkY2hhcmFjdGVycyldOwoJfQoJcmV0dXJuICRzYWx0Owp9CgpmdW5jdGlvbiBiYXNlNjRfaW50X2VuY29kZSgkbnVtKSB7CgkvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xNTUzNDk4Mi93aGljaC1p'));
	@fwrite($fp, base64_decode('dGVyYXRpb24tcnVsZXMtYXBwbHktb24tY3J5cHQtdXNpbmctY3J5cHQtZXh0LWRlcwoJJGFscGhhYmV0X3Jhdz0nLi8wMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eic7CgkkYWxwaGFiZXQ9c3RyX3Nw'));
	@fwrite($fp, base64_decode('bGl0KCRhbHBoYWJldF9yYXcpOwoJJGFycj1hcnJheSgpOwoJJGJhc2U9c2l6ZW9mKCRhbHBoYWJldCk7Cgl3aGlsZSgkbnVtKSB7CgkJJHJlbT0kbnVtICUgJGJhc2U7CgkJJG51bT0oaW50KSgkbnVtIC8gJGJhc2UpOwoJCSRhcnJbXT0kYWxwaGFiZXRbJHJlbV07'));
	@fwrite($fp, base64_decode('Cgl9Cgkkc3RyaW5nPWltcGxvZGUoJGFycik7CglyZXR1cm4gc3RyX3BhZCgkc3RyaW5nLCA0LCAnLicsIFNUUl9QQURfUklHSFQpOwp9CgpmdW5jdGlvbiBjcnlwdF9yYWRpeDY0X2VuY29kZSgkc3RyKSB7CgkkeCA9ICRzdHI7CgkkeCA9IGJhc2U2NF9lbmNvZGUo'));
	@fwrite($fp, base64_decode('JHgpOwoJJHggPSBydHJpbSgkeCwgJz0nKTsKCSR4ID0gc3RydHIoJHgsIEJBU0U2NF9SRkM0NjQ4X0FMUEhBQkVULCBCQVNFNjRfQ1JZUFRfQUxQSEFCRVQpOwoJcmV0dXJuICR4Owp9CgpmdW5jdGlvbiBjcnlwdF9yYWRpeDY0X2RlY29kZSgkc3RyKSB7CgkkeCA9'));
	@fwrite($fp, base64_decode('ICRzdHI7CgkkeCA9IHN0cnRyKCR4LCBCQVNFNjRfQ1JZUFRfQUxQSEFCRVQsIEJBU0U2NF9SRkM0NjQ4X0FMUEhBQkVUKTsKCSR4ID0gYmFzZTY0X2RlY29kZSgkeCk7CglyZXR1cm4gJHg7Cn0KCi8vIC0tLSBQYXJ0IDU6IFNlbGZ0ZXN0CgovKgphc3NlcnQoY3J5'));
	@fwrite($fp, base64_decode('cHRfcmFkaXg2NF9kZWNvZGUoY3J5cHRfcmFkaXg2NF9lbmNvZGUoJ3Rlc3QxMjMnKSkgPT09ICd0ZXN0MTIzJyk7Cgphc3NlcnQodnRzX3Bhc3N3b3JkX1ZlcmlmeSgndGVzdDEyMycsdnRzX3Bhc3N3b3JkX2hhc2goJ3Rlc3QxMjMnLCBQQVNTV09SRF9TVERfREVT'));
	@fwrite($fp, base64_decode('KSkpOwphc3NlcnQodnRzX3Bhc3N3b3JkX1ZlcmlmeSgndGVzdDEyMycsdnRzX3Bhc3N3b3JkX2hhc2goJ3Rlc3QxMjMnLCBQQVNTV09SRF9FWFRfREVTKSkpOwphc3NlcnQodnRzX3Bhc3N3b3JkX1ZlcmlmeSgndGVzdDEyMycsdnRzX3Bhc3N3b3JkX2hhc2goJ3Rl'));
	@fwrite($fp, base64_decode('c3QxMjMnLCBQQVNTV09SRF9NRDUpKSk7CmFzc2VydCh2dHNfcGFzc3dvcmRfVmVyaWZ5KCd0ZXN0MTIzJyx2dHNfcGFzc3dvcmRfaGFzaCgndGVzdDEyMycsIFBBU1NXT1JEX0JMT1dGSVNIKSkpOwphc3NlcnQodnRzX3Bhc3N3b3JkX1ZlcmlmeSgndGVzdDEyMycs'));
	@fwrite($fp, base64_decode('dnRzX3Bhc3N3b3JkX2hhc2goJ3Rlc3QxMjMnLCBQQVNTV09SRF9TSEEyNTYpKSk7CmFzc2VydCh2dHNfcGFzc3dvcmRfVmVyaWZ5KCd0ZXN0MTIzJyx2dHNfcGFzc3dvcmRfaGFzaCgndGVzdDEyMycsIFBBU1NXT1JEX1NIQTUxMikpKTsKYXNzZXJ0KHZ0c19wYXNz'));
	@fwrite($fp, base64_decode('d29yZF9WZXJpZnkoJ3Rlc3QxMjMnLHZ0c19wYXNzd29yZF9oYXNoKCd0ZXN0MTIzJywgUEFTU1dPUkRfVlRTX01DRjEpKSk7CmFzc2VydCh2dHNfcGFzc3dvcmRfVmVyaWZ5KCd0ZXN0MTIzJyx2dHNfcGFzc3dvcmRfaGFzaCgndGVzdDEyMycsIFBBU1NXT1JEX0RF'));
	@fwrite($fp, base64_decode('RkFVTFQpKSk7CmFzc2VydCh2dHNfcGFzc3dvcmRfVmVyaWZ5KCd0ZXN0MTIzJyx2dHNfcGFzc3dvcmRfaGFzaCgndGVzdDEyMycsIFBBU1NXT1JEX0JDUllQVCkpKTsKYXNzZXJ0KHZ0c19wYXNzd29yZF9WZXJpZnkoJ3Rlc3QxMjMnLHZ0c19wYXNzd29yZF9oYXNo'));
	@fwrite($fp, base64_decode('KCd0ZXN0MTIzJywgUEFTU1dPUkRfQVJHT04ySSkpKTsKYXNzZXJ0KHZ0c19wYXNzd29yZF9WZXJpZnkoJ3Rlc3QxMjMnLHZ0c19wYXNzd29yZF9oYXNoKCd0ZXN0MTIzJywgUEFTU1dPUkRfQVJHT04ySUQpKSk7CiovCgo='));
	@fclose($fp);
}
if (!is_file('vendor/danielmarschall/php_utils/vts_crypt.inc.php')) {
	warn('File has vanished! Will re-create it: vendor/danielmarschall/php_utils/vts_crypt.inc.php');
	writefile_4();
	if (!is_file('vendor/danielmarschall/php_utils/vts_crypt.inc.php')) {
		warn('File cannot be created (not existing): vendor/danielmarschall/php_utils/vts_crypt.inc.php');
	} else if (sha1_file('vendor/danielmarschall/php_utils/vts_crypt.inc.php') != '22df6c757d9bbc8fd5aa6073ee1354ba6d4fa9b2') {
		warn('File cannot be created (checksum mismatch): vendor/danielmarschall/php_utils/vts_crypt.inc.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('vendor/danielmarschall/php_utils/vts_crypt.inc.php', 0644)) {
		warn('Could not change file permissions of vendor/danielmarschall/php_utils/vts_crypt.inc.php');
	}
} else {
	if (@sha1_file('vendor/danielmarschall/php_utils/vts_crypt.inc.php') !== '22df6c757d9bbc8fd5aa6073ee1354ba6d4fa9b2') {
		if (@sha1_file('vendor/danielmarschall/php_utils/vts_crypt.inc.php') !== 'd53ee257d3be6f2a9a18bd30e7b4a5774d9bdcdc') {
			warn('File was modified. Will overwrite the changes now: vendor/danielmarschall/php_utils/vts_crypt.inc.php');
			$tmp = pathinfo('vendor/danielmarschall/php_utils/vts_crypt.inc.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('vendor/danielmarschall/php_utils/vts_crypt.inc.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('vendor/danielmarschall/php_utils/vts_crypt.inc.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_4();
		if (@sha1_file('vendor/danielmarschall/php_utils/vts_crypt.inc.php') !== '22df6c757d9bbc8fd5aa6073ee1354ba6d4fa9b2') {
			warn('File cannot be written (checksum mismatch): vendor/danielmarschall/php_utils/vts_crypt.inc.php');
		}
	}
}

// File deleted: vendor/danielmarschall/php_utils/password_hash_ex.inc.php
@unlink('vendor/danielmarschall/php_utils/password_hash_ex.inc.php');
if (is_file('vendor/danielmarschall/php_utils/password_hash_ex.inc.php')) {
	warn('File could not be deleted: vendor/danielmarschall/php_utils/password_hash_ex.inc.php');
}


file_put_contents('.version.php', "<?php // Revision 1097\n");
if (trim(@file_get_contents('.version.php')) !== '<?php // Revision 1097') err('Could not write to .version.php!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

