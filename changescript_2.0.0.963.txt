<?php /* <ViaThinkSoftSignature>
ZJDxh+culAWV4jM/Sz04KxEzmiHZ/inbuqEzbM0+FR+ukzxb2acBkZslTiQfyWVc+
KnULw9etoO33yqxphXoctvN3uisGTVOIht2j5geCKTK/H3bexzJ8IJiC/f2WUajxh
vS4Dr5PySOd7YmDB+JSv6GKdX3ErWTWbx+PzSBcP2rmhw67WSITTuWemptrA05/Js
sScBbsOHQN1YgcccuY+V497cQnFSfxuSQmRXsalwDGZ8XBLEkIZY2zHmdtZtsvz2Y
u6zwwGOZ+rXE04vQ+lGMpYYokgw5wVqJdsSii5t9jYuUTZR6P3ycKIZD3U2n0wIp3
VeuoZzK6LirpCo64nlJSLdSyLLADzQStzlOFiWMxc283O8WIiAVFQpt0LRYI7yVIZ
qet/hETC8rIM4sZkDYEaMaIbU+6bk4GJzkllXWK72rNO6gQ3hM6Anbs2COcG6FcF5
2K7rinWMjpFGg8QGiZy7GCPjsVIpUS99m7EyaM2j1L8OBlOrrZSLe7/y/Vycxw+n5
irb5MPjpcG3bbui3xpmbbQNkm70bTwq5UPcEucWNg/tBOmWJeTcaJupbJp/G6AWOJ
AMdR9T04D0E01/SvgEa7SOp7fNm3czmfejxdPXAVfjn3Uka4sMDqj51mjwnLJ3432
piECuGxR4CGT6+3gX9okJ3d6zLevKiM6LpbJLfps/vkbnwOSImgLKoI5y4zRPFjvP
Okuali9tjsE9PkKB2DkzRasQGa7QIjB/y/qhB6lZ9YVBlf0fhZ9WfmAqTy3VB/p3v
iJCMj/TC7hwj59DdOPGpnJZgW8u8qa8qTNmil/LMpENLdo07vO9nTooIyruL1TGcJ
51ad00t2PFl+IMK5m9WyaF6122q4BlPTljuol68u5XKC4amHeYbR93hyPLSI8JluT
7CkkzC/8bJg5dgdzyU7hrddnR+xO3urdMyGPR47YfOOJj9GLBd2mD2FXmBpmpn6Uf
3uczO2m6HDwVGMcQN1sdPhr+Drcjs0pjwlXHW5JIMfau2uta8ws2gFho5PNfVyfjJ
CgKN0tlSBVCLO3aFoZh4PN0X/dACLXKmC73/7Yr/787EexodBcoWUnr54HvVIZpar
aW/+dQOTOTK5RntPbv56qnifjbj8skuEN3dAkR7i7b0i5HLYyry0xzKd+3b/YCxX+
NOnTpyAPtgSTp4cQ9n5HeRkH1kp+llUxpVuVNBJjWfRErTK4UstbmqIIP0bJCpAkU
8I0HUz/Mk8FcN3/6Dde3Hs3iNAgxvTPnazF8kLRoFG3m4vcmBNrGaHvP+Kf9NNOYo
J+JolJMVuhgIi/tOeTwy5VRcV046NhrV1YKtcrWFMtoi2JmSKtmrSWs4lrYxXS6g7
g==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('.version.php')) !== '<?php // Revision 962') {
	err('This update can only be applied to OIDplus version 2.0.0.962!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: includes/functions.inc.php
function writefile_1() {
	@$fp = fopen('includes/functions.inc.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMiBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgpmdW5jdGlvbiBpc19wcml2YXRla2V5X2VuY3J5cHRlZCgkcHJpdktleSkgewoJcmV0dXJuIHN0cnBvcygkcHJpdktleSwnQkVHSU4gRU5DUllQVEVEIFBSSVZBVEUgS0VZJykgIT09IGZh'));
	@fwrite($fp, base64_decode('bHNlOwp9CgpmdW5jdGlvbiB2ZXJpZnlfcHJpdmF0ZV9wdWJsaWNfa2V5KCRwcml2S2V5LCAkcHViS2V5KSB7CglpZiAoIWZ1bmN0aW9uX2V4aXN0cygnb3BlbnNzbF9wdWJsaWNfZW5jcnlwdCcpKSByZXR1cm4gZmFsc2U7Cgl0cnkgewoJCWlmIChlbXB0eSgkcHJp'));
	@fwrite($fp, base64_decode('dktleSkpIHJldHVybiBmYWxzZTsKCQlpZiAoZW1wdHkoJHB1YktleSkpIHJldHVybiBmYWxzZTsKCQkkZGF0YSA9IGdlbmVyYXRlUmFuZG9tU3RyaW5nKDI1KTsKCQkkZW5jcnlwdGVkID0gJyc7CgkJJGRlY3J5cHRlZCA9ICcnOwoJCWlmICghQG9wZW5zc2xfcHVi'));
	@fwrite($fp, base64_decode('bGljX2VuY3J5cHQoJGRhdGEsICRlbmNyeXB0ZWQsICRwdWJLZXkpKSByZXR1cm4gZmFsc2U7CgkJaWYgKCFAb3BlbnNzbF9wcml2YXRlX2RlY3J5cHQoJGVuY3J5cHRlZCwgJGRlY3J5cHRlZCwgJHByaXZLZXkpKSByZXR1cm4gZmFsc2U7CgkJcmV0dXJuICRkZWNy'));
	@fwrite($fp, base64_decode('eXB0ZWQgPT0gJGRhdGE7Cgl9IGNhdGNoIChFeGNlcHRpb24gJGUpIHsKCQlyZXR1cm4gZmFsc2U7Cgl9Cn0KCmZ1bmN0aW9uIGNoYW5nZV9wcml2YXRlX2tleV9wYXNzcGhyYXNlKCRwcml2S2V5T2xkLCAkcGFzc3BocmFzZV9vbGQsICRwYXNzcGhyYXNlX25ldykg'));
	@fwrite($fp, base64_decode('ewoJJHBrZXlfY29uZmlnID0gYXJyYXkoCgkgICAgLy8iZGlnZXN0X2FsZyIgPT4gInNoYTUxMiIsCgkgICAgLy8icHJpdmF0ZV9rZXlfYml0cyIgPT4gMjA0OCwKCSAgICAvLyJwcml2YXRlX2tleV90eXBlIiA9PiBPUEVOU1NMX0tFWVRZUEVfUlNBLAoJICAgICJj'));
	@fwrite($fp, base64_decode('b25maWciID0+IGNsYXNzX2V4aXN0cygiT0lEcGx1cyIpID8gT0lEcGx1czo6Z2V0T3BlblNzbENuZigpIDogQGdldGVudignT1BFTlNTTF9DT05GJykKCSk7CgkkcHJpdktleU5ldyA9IEBvcGVuc3NsX3BrZXlfZ2V0X3ByaXZhdGUoJHByaXZLZXlPbGQsICRwYXNz'));
	@fwrite($fp, base64_decode('cGhyYXNlX29sZCk7CglpZiAoJHByaXZLZXlOZXcgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7CglAb3BlbnNzbF9wa2V5X2V4cG9ydCgkcHJpdktleU5ldywgJHByaXZLZXlOZXdFeHBvcnQsICRwYXNzcGhyYXNlX25ldywgJHBrZXlfY29uZmlnKTsKCWlmICgkcHJp'));
	@fwrite($fp, base64_decode('dktleU5ld0V4cG9ydCA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTsKCXJldHVybiAkcHJpdktleU5ld0V4cG9ydC4iIjsKfQoKZnVuY3Rpb24gZGVjcnlwdF9wcml2YXRlX2tleSgkcHJpdktleSwgJHBhc3NwaHJhc2UpIHsKCXJldHVybiBjaGFuZ2VfcHJpdmF0ZV9r'));
	@fwrite($fp, base64_decode('ZXlfcGFzc3BocmFzZSgkcHJpdktleSwgJHBhc3NwaHJhc2UsIG51bGwpOwp9CgpmdW5jdGlvbiBlbmNyeXB0X3ByaXZhdGVfa2V5KCRwcml2S2V5LCAkcGFzc3BocmFzZSkgewoJcmV0dXJuIGNoYW5nZV9wcml2YXRlX2tleV9wYXNzcGhyYXNlKCRwcml2S2V5LCBu'));
	@fwrite($fp, base64_decode('dWxsLCAkcGFzc3BocmFzZSk7Cn0KCmZ1bmN0aW9uIHNtYWxsaGFzaCgkZGF0YSkgeyAvLyBnZXQgMzEgYml0cyBmcm9tIFNIQTEuIFZhbHVlcyAwLi4yMTQ3NDgzNjQ3CglyZXR1cm4gKGhleGRlYyhzdWJzdHIoc2hhMSgkZGF0YSksLTQqMikpICYgMHg3RkZGRkZG'));
	@fwrite($fp, base64_decode('Rik7Cn0KCmZ1bmN0aW9uIHNwbGl0X2ZpcnN0bmFtZV9sYXN0bmFtZSgkbmFtZSkgewoJJGFyeSA9IGV4cGxvZGUoJyAnLCAkbmFtZSk7CgkkbGFzdF9uYW1lID0gYXJyYXlfcG9wKCRhcnkpOwoJJGZpcnN0X25hbWUgPSBpbXBsb2RlKCcgJywgJGFyeSk7CglyZXR1'));
	@fwrite($fp, base64_decode('cm4gYXJyYXkoJGZpcnN0X25hbWUsICRsYXN0X25hbWUpOwp9CgpmdW5jdGlvbiBvcmlnaW5IZWFkZXJzKCkgewoJLy8gQ09SUwoJLy8gQXV0aG9yOiBUaWxsIFdlaG93c2tpCgkvLyBUT0RPOiBhZGQgdG8gY2xhc3MgT0lEcGx1cwoKCWhlYWRlcigiQWNjZXNzLUNv'));
	@fwrite($fp, base64_decode('bnRyb2wtQWxsb3ctQ3JlZGVudGlhbHM6IHRydWUiKTsKCWhlYWRlcigiQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luOiAiLnN0cmlwX3RhZ3MoKChpc3NldCgkX1NFUlZFUlsnSFRUUF9PUklHSU4nXSkpID8gJF9TRVJWRVJbJ0hUVFBfT1JJR0lOJ10gOiAiKiIp'));
	@fwrite($fp, base64_decode('KSk7CgoJaGVhZGVyKCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzOiBJZi1Ob25lLU1hdGNoLCBYLVJlcXVlc3RlZC1XaXRoLCBPcmlnaW4sIFgtRnJkbHdlYi1CdWdzLCBFdGFnLCBYLUZvcmdlcnktUHJvdGVjdGlvbi1Ub2tlbiwgWC1DU1JGLVRva2VuIik7'));
	@fwrite($fp, base64_decode('CgoJaWYgKGlzc2V0KCRfU0VSVkVSWydIVFRQX09SSUdJTiddKSkgewoJCWhlYWRlcignWC1GcmFtZS1PcHRpb25zOiBBTExPVy1GUk9NICcuJF9TRVJWRVJbJ0hUVFBfT1JJR0lOJ10pOwoJfSBlbHNlIHsKCQloZWFkZXJfcmVtb3ZlKCJYLUZyYW1lLU9wdGlvbnMi'));
	@fwrite($fp, base64_decode('KTsKCX0KCgkkZXhwb3NlID0gYXJyYXkoJ0V0YWcnLCAnWC1DU1JGLVRva2VuJyk7Cglmb3JlYWNoIChoZWFkZXJzX2xpc3QoKSBhcyAkbnVtID0+ICRoZWFkZXIpIHsKCQkkaCA9IGV4cGxvZGUoJzonLCAkaGVhZGVyKTsKCQkkZXhwb3NlW10gPSB0cmltKCRoWzBd'));
	@fwrite($fp, base64_decode('KTsKCX0KCWhlYWRlcigiQWNjZXNzLUNvbnRyb2wtRXhwb3NlLUhlYWRlcnM6ICIuaW1wbG9kZSgnLCcsJGV4cG9zZSkpOwoKCWhlYWRlcigiVmFyeTogT3JpZ2luIik7Cn0KCmlmICghZnVuY3Rpb25fZXhpc3RzKCdtYl93b3Jkd3JhcCcpKSB7CglmdW5jdGlvbiBt'));
	@fwrite($fp, base64_decode('Yl93b3Jkd3JhcCgkc3RyLCAkd2lkdGggPSA3NSwgJGJyZWFrID0gIlxuIiwgJGN1dCA9IGZhbHNlKSB7CgkJLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzQ5ODg0OTQvNDg4NTM5CgkJJGxpbmVzID0gZXhwbG9kZSgkYnJlYWssICRzdHIpOwoJCWZvcmVh'));
	@fwrite($fp, base64_decode('Y2ggKCRsaW5lcyBhcyAmJGxpbmUpIHsKCQkJJGxpbmUgPSBydHJpbSgkbGluZSk7CgkJCWlmIChtYl9zdHJsZW4oJGxpbmUpIDw9ICR3aWR0aCkgewoJCQkJY29udGludWU7CgkJCX0KCQkJJHdvcmRzID0gZXhwbG9kZSgnICcsICRsaW5lKTsKCQkJJGxpbmUgPSAn'));
	@fwrite($fp, base64_decode('JzsKCQkJJGFjdHVhbCA9ICcnOwoJCQlmb3JlYWNoICgkd29yZHMgYXMgJHdvcmQpIHsKCQkJCWlmIChtYl9zdHJsZW4oJGFjdHVhbC4kd29yZCkgPD0gJHdpZHRoKSB7CgkJCQkJJGFjdHVhbCAuPSAkd29yZC4nICc7CgkJCQl9IGVsc2UgewoJCQkJCWlmICgkYWN0'));
	@fwrite($fp, base64_decode('dWFsICE9ICcnKSB7CgkJCQkJCSRsaW5lIC49IHJ0cmltKCRhY3R1YWwpLiRicmVhazsKCQkJCQl9CgkJCQkJJGFjdHVhbCA9ICR3b3JkOwoJCQkJCWlmICgkY3V0KSB7CgkJCQkJCXdoaWxlIChtYl9zdHJsZW4oJGFjdHVhbCkgPiAkd2lkdGgpIHsKCQkJCQkJCSRs'));
	@fwrite($fp, base64_decode('aW5lIC49IG1iX3N1YnN0cigkYWN0dWFsLCAwLCAkd2lkdGgpLiRicmVhazsKCQkJCQkJCSRhY3R1YWwgPSBtYl9zdWJzdHIoJGFjdHVhbCwgJHdpZHRoKTsKCQkJCQkJfQoJCQkJCX0KCQkJCQkkYWN0dWFsIC49ICcgJzsKCQkJCX0KCQkJfQoJCQkkbGluZSAuPSB0'));
	@fwrite($fp, base64_decode('cmltKCRhY3R1YWwpOwoJCX0KCQlyZXR1cm4gaW1wbG9kZSgkYnJlYWssICRsaW5lcyk7Cgl9Cn0KCmZ1bmN0aW9uIGh0dHBPdXRXaXRoRVRhZygkb3V0LCAkY29udGVudFR5cGUsICRmaWxlbmFtZT0nJykgewoJJGV0YWcgPSBtZDUoJG91dCk7CgloZWFkZXIoIkV0'));
	@fwrite($fp, base64_decode('YWc6ICRldGFnIik7CgloZWFkZXIoIkNvbnRlbnQtTUQ1OiAkZXRhZyIpOyAvLyBSRkMgMjYxNiBjbGF1c2UgMTQuMTUKCWlmIChpc3NldCgkX1NFUlZFUlsnSFRUUF9JRl9OT05FX01BVENIJ10pICYmICh0cmltKCRfU0VSVkVSWydIVFRQX0lGX05PTkVfTUFUQ0gn'));
	@fwrite($fp, base64_decode('XSkgPT0gJGV0YWcpKSB7CgkJaHR0cF9yZXNwb25zZV9jb2RlKDMwNCk7IC8vIDMwNCBOb3QgTW9kaWZpZWQKCX0gZWxzZSB7CgkJaGVhZGVyKCJDb250ZW50LVR5cGU6ICRjb250ZW50VHlwZSIpOwoJCWlmICghZW1wdHkoJGZpbGVuYW1lKSkgewoJCQloZWFkZXIo'));
	@fwrite($fp, base64_decode('J0NvbnRlbnQtRGlzcG9zaXRpb246aW5saW5lOyBmaWxlbmFtZT0iJy4kZmlsZW5hbWUuJyInKTsKCQl9CgkJZWNobyAkb3V0OwoJfQoJZGllKCk7Cn0KCmZ1bmN0aW9uIG15X3ZzcHJpbnRmKCRzdHIsICRhcmdzKSB7CiAgICAgICAgJG4gPSAxOwogICAgICAgIGZv'));
	@fwrite($fp, base64_decode('cmVhY2ggKCRhcmdzIGFzICR2YWwpIHsKICAgICAgICAgICAgICAgICRzdHIgPSBzdHJfcmVwbGFjZSgiJSRuIiwgJHZhbCwgJHN0cik7CiAgICAgICAgICAgICAgICAkbisrOwogICAgICAgIH0KICAgICAgICAkc3RyID0gc3RyX3JlcGxhY2UoIiUlIiwgIiUiLCAk'));
	@fwrite($fp, base64_decode('c3RyKTsKICAgICAgICByZXR1cm4gJHN0cjsKfQoKZnVuY3Rpb24gX0woJHN0ciwgLi4uJHNwcmludGZBcmdzKSB7CglzdGF0aWMgJHRyYW5zbGF0aW9uX2FycmF5ID0gYXJyYXkoKTsKCXN0YXRpYyAkdHJhbnNsYXRpb25fbG9hZGVkID0gbnVsbDsKCgkkc3RyID0g'));
	@fwrite($fp, base64_decode('dHJpbSgkc3RyKTsKCglpZiAoIWNsYXNzX2V4aXN0cygnT0lEcGx1cycpKSB7CgkJcmV0dXJuIG15X3ZzcHJpbnRmKCRzdHIsICRzcHJpbnRmQXJncyk7Cgl9CgoJJGxhbmcgPSBPSURwbHVzOjpnZXRDdXJyZW50TGFuZygpOwoJJHRhID0gT0lEcGx1czo6Z2V0VHJh'));
	@fwrite($fp, base64_decode('bnNsYXRpb25BcnJheSgkbGFuZyk7CgkkcmVzID0gKGlzc2V0KCR0YVskbGFuZ10pICYmIGlzc2V0KCR0YVskbGFuZ11bJHN0cl0pKSA/ICR0YVskbGFuZ11bJHN0cl0gOiAkc3RyOwoKCSRyZXMgPSBzdHJfcmVwbGFjZSgnIyMjJywgT0lEcGx1czo6YmFzZUNvbmZp'));
	@fwrite($fp, base64_decode('ZygpLT5nZXRWYWx1ZSgnVEFCTEVOQU1FX1BSRUZJWCcsICcnKSwgJHJlcyk7CgoJJHJlcyA9IG15X3ZzcHJpbnRmKCRyZXMsICRzcHJpbnRmQXJncyk7CgoJcmV0dXJuICRyZXM7Cn0KCmZ1bmN0aW9uIF9DaGVja1BhcmFtRXhpc3RzKCRwYXJhbXMsICRrZXkpIHsK'));
	@fwrite($fp, base64_decode('CWlmIChjbGFzc19leGlzdHMoJ09JRHBsdXNFeGNlcHRpb24nKSkgewoJCWlmICghaXNzZXQoJHBhcmFtc1ska2V5XSkpIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdQYXJhbWV0ZXIgJTEgaXMgbWlzc2luZycsICRrZXkpKTsKCX0gZWxzZSB7CgkJaWYg'));
	@fwrite($fp, base64_decode('KCFpc3NldCgkcGFyYW1zWyRrZXldKSkgdGhyb3cgbmV3IEV4Y2VwdGlvbihfTCgnUGFyYW1ldGVyICUxIGlzIG1pc3NpbmcnLCAka2V5KSk7Cgl9Cn0KCmZ1bmN0aW9uIGV4dHJhY3RIdG1sQ29udGVudHMoJGNvbnQpIHsKCS8vIG1ha2Ugc3VyZSB0aGUgcHJvZ3Jh'));
	@fwrite($fp, base64_decode('bSB3b3JrcyBldmVuIGlmIHRoZSB1c2VyIHByb3ZpZGVkIEhUTUwgaXMgbm90IFVURi04CgkkY29udCA9IGNvbnZlcnRfdG9fdXRmOF9ub19ib20oJGNvbnQpOwoKCSRvdXRfanMgPSAnJzsKCSRtID0gYXJyYXkoKTsKCXByZWdfbWF0Y2hfYWxsKCdAPHNjcmlwdFte'));
	@fwrite($fp, base64_decode('Pl0qPiguKyk8L3NjcmlwdD5AaXNtVScsICRjb250LCAkbSk7Cglmb3JlYWNoICgkbVsxXSBhcyAkeCkgewoJCSRvdXRfanMgPSAkeCAuICJcblxuIjsKCX0KCgkkb3V0X2NzcyA9ICcnOwoJJG0gPSBhcnJheSgpOwoJcHJlZ19tYXRjaF9hbGwoJ0A8c3R5bGVbXj5d'));
	@fwrite($fp, base64_decode('Kj4oLispPC9zdHlsZT5AaXNtVScsICRjb250LCAkbSk7Cglmb3JlYWNoICgkbVsxXSBhcyAkeCkgewoJCSRvdXRfY3NzID0gJHggLiAiXG5cbiI7Cgl9CgoJJG91dF9odG1sID0gJGNvbnQ7Cgkkb3V0X2h0bWwgPSBwcmVnX3JlcGxhY2UoJ0BeKC4rKTxib2R5W14+'));
	@fwrite($fp, base64_decode('XSo+QGlzVScsICcnLCAkb3V0X2h0bWwpOwoJJG91dF9odG1sID0gcHJlZ19yZXBsYWNlKCdAPC9ib2R5Pi4rJEBpc1UnLCAnJywgJG91dF9odG1sKTsKCSRvdXRfaHRtbCA9IHByZWdfcmVwbGFjZSgnQDx0aXRsZT4uKzwvdGl0bGU+QGlzVScsICcnLCAkb3V0X2h0'));
	@fwrite($fp, base64_decode('bWwpOwoJJG91dF9odG1sID0gcHJlZ19yZXBsYWNlKCdAPGgxPi4rPC9oMT5AaXNVJywgJycsICRvdXRfaHRtbCwgMSk7Cgkkb3V0X2h0bWwgPSBwcmVnX3JlcGxhY2UoJ0A8c2NyaXB0W14+XSo+KC4rKTwvc2NyaXB0PkBpc21VJywgJycsICRvdXRfaHRtbCk7Cgkk'));
	@fwrite($fp, base64_decode('b3V0X2h0bWwgPSBwcmVnX3JlcGxhY2UoJ0A8c3R5bGVbXj5dKj4oLispPC9zdHlsZT5AaXNtVScsICcnLCAkb3V0X2h0bWwpOwoKCXJldHVybiBhcnJheSgkb3V0X2h0bWwsICRvdXRfanMsICRvdXRfY3NzKTsKfQoKZnVuY3Rpb24gc2hhM181MTIoJHBhc3N3b3Jk'));
	@fwrite($fp, base64_decode('LCAkcmF3X291dHB1dD1mYWxzZSkgewoJaWYgKHZlcnNpb25fY29tcGFyZShQSFBfVkVSU0lPTiwgJzcuMS4wJykgPj0gMCkgewoJCXJldHVybiBoYXNoKCdzaGEzLTUxMicsICRwYXNzd29yZCwgJHJhd19vdXRwdXQpOwoJfSBlbHNlIHsKCQlyZXR1cm4gYmJcU2hh'));
	@fwrite($fp, base64_decode('M1xTaGEzOjpoYXNoKCRwYXNzd29yZCwgNTEyLCAkcmF3X291dHB1dCk7Cgl9Cn0KCmZ1bmN0aW9uIHNoYTNfNTEyX2htYWMoJG1lc3NhZ2UsICRrZXksICRyYXdfb3V0cHV0PWZhbHNlKSB7CgkvLyBSRkMgMjEwNCBITUFDCglpZiAodmVyc2lvbl9jb21wYXJlKFBI'));
	@fwrite($fp, base64_decode('UF9WRVJTSU9OLCAnNy4xLjAnKSA+PSAwKSB7CgkJcmV0dXJuIGhhc2hfaG1hYygnc2hhMy01MTInLCAkbWVzc2FnZSwgJGtleSwgJHJhd19vdXRwdXQpOwoJfSBlbHNlIHsKCQkkYmxvY2tzaXplID0gNTc2OyAvLyBibG9jayBzaXplIG9mIHNoYS01MTIhCgoJCWlm'));
	@fwrite($fp, base64_decode('IChzdHJsZW4oJGtleSkgPiAoJGJsb2Nrc2l6ZS84KSkgewoJCQkka18gPSBzaGEzXzUxMigka2V5LHRydWUpOwoJCX0gZWxzZSB7CgkJCSRrXyA9ICRrZXk7CgkJfQoKCQkka19vcGFkID0gc3RyX3JlcGVhdChjaHIoMHg1QyksKCRibG9ja3NpemUvOCkpOwoJCSRr'));
	@fwrite($fp, base64_decode('X2lwYWQgPSBzdHJfcmVwZWF0KGNocigweDM2KSwoJGJsb2Nrc2l6ZS84KSk7CgkJZm9yICgkaT0wOyAkaTxzdHJsZW4oJGtfKTsgJGkrKykgewoJCQkka19vcGFkWyRpXSA9ICRrX29wYWRbJGldIF4gJGtfWyRpXTsKCQkJJGtfaXBhZFskaV0gPSAka19pcGFkWyRp'));
	@fwrite($fp, base64_decode('XSBeICRrX1skaV07CgkJfQoKCQlyZXR1cm4gc2hhM181MTIoJGtfb3BhZCAuIHNoYTNfNTEyKCRrX2lwYWQgLiAkbWVzc2FnZSwgdHJ1ZSksICRyYXdfb3V0cHV0KTsKCX0KfQoKaWYgKCFmdW5jdGlvbl9leGlzdHMoJ3N0cl9lbmRzX3dpdGgnKSkgewoJLy8gUEhQ'));
	@fwrite($fp, base64_decode('IDcueCBjb21wYXRpYmlsaXR5CglmdW5jdGlvbiBzdHJfZW5kc193aXRoKCRoYXlzdGFjaywgJG5lZWRsZSkgewoJCSRsZW5ndGggPSBzdHJsZW4oJG5lZWRsZSk7CgkJcmV0dXJuICRsZW5ndGggPiAwID8gc3Vic3RyKCRoYXlzdGFjaywgLSRsZW5ndGgpID09PSAk'));
	@fwrite($fp, base64_decode('bmVlZGxlIDogdHJ1ZTsKCX0KfQoKaWYgKCFmdW5jdGlvbl9leGlzdHMoJ3N0cl9zdGFydHNfd2l0aCcpKSB7CgkvLyBQSFAgNy54IGNvbXBhdGliaWxpdHkKCWZ1bmN0aW9uIHN0cl9zdGFydHNfd2l0aCgkaGF5c3RhY2ssICRuZWVkbGUpIHsKCQlyZXR1cm4gc3Ry'));
	@fwrite($fp, base64_decode('cG9zKCRoYXlzdGFjaywgJG5lZWRsZSkgPT09IDA7Cgl9Cn0KCmZ1bmN0aW9uIHVybF9nZXRfY29udGVudHMoJHVybCwgJHVzZXJBZ2VudD0nVmlhVGhpbmtTb2Z0LU9JRHBsdXMvMi4wJykgewoJaWYgKGZ1bmN0aW9uX2V4aXN0cygnY3VybF9pbml0JykpIHsKCQkk'));
	@fwrite($fp, base64_decode('Y2ggPSBjdXJsX2luaXQoKTsKCQlpZiAoY2xhc3NfZXhpc3RzKCdPSURwbHVzJykpIHsKCQkJaWYgKGluaV9nZXQoJ2N1cmwuY2FpbmZvJykgPT0gJycpIGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9DQUlORk8sIE9JRHBsdXM6OmxvY2FscGF0aCgpIC4gJ3ZlbmRv'));
	@fwrite($fp, base64_decode('ci9jYWNlcnQucGVtJyk7CgkJfQoJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9VUkwsICR1cmwpOwoJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9VU0VSQUdFTlQsICR1c2VyQWdlbnQpOwoJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9QT1NULCAwKTsKCQlj'));
	@fwrite($fp, base64_decode('dXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUkVUVVJOVFJBTlNGRVIsIHRydWUpOwoJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9GT0xMT1dMT0NBVElPTiwgdHJ1ZSk7CgkJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX0FVVE9SRUZFUkVSLCB0cnVlKTsKCQlpZiAo'));
	@fwrite($fp, base64_decode('ISgkcmVzID0gQGN1cmxfZXhlYygkY2gpKSkgcmV0dXJuIGZhbHNlOwoJCSRlcnJvcl9jb2RlID0gQGN1cmxfZ2V0aW5mbygkY2gsIENVUkxJTkZPX0hUVFBfQ09ERSk7CgkJaWYgKCRlcnJvcl9jb2RlID49IDQwMCkgcmV0dXJuIGZhbHNlOwoJCUBjdXJsX2Nsb3Nl'));
	@fwrite($fp, base64_decode('KCRjaCk7Cgl9IGVsc2UgewoJCS8vIEF0dGVudGlvbjogSFRUUFMgb25seSB3b3JrcyBpZiBPcGVuU1NMIGV4dGVuc2lvbiBpcyBlbmFibGVkLgoJCS8vIE91ciBzdXBwbGVtZW50IGRvZXMgbm90IGhlbHAuLi4KCQkkb3B0cyA9IFsKCQkJImh0dHAiID0+IFsKCQkJ'));
	@fwrite($fp, base64_decode('CSJtZXRob2QiID0+ICJHRVQiLAoJCQkJImhlYWRlciIgPT4gIlVzZXItQWdlbnQ6ICR1c2VyQWdlbnRcclxuIgoJCQldCgkJXTsKCQkkY29udGV4dCA9IHN0cmVhbV9jb250ZXh0X2NyZWF0ZSgkb3B0cyk7CgkJJHJlcyA9IEBmaWxlX2dldF9jb250ZW50cygkdXJs'));
	@fwrite($fp, base64_decode('LCBmYWxzZSwgJGNvbnRleHQpOwoJCWlmICgkcmVzID09PSBmYWxzZSkgcmV0dXJuIGZhbHNlOwoJfQoJcmV0dXJuICRyZXM7Cn0KCmZ1bmN0aW9uIGdldFNvcnRlZFF1ZXJ5KCkgewoJLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzUxNzc3MjQ5LzQ4ODUz'));
	@fwrite($fp, base64_decode('OQoJJHVybCA9IFtdOwoJcGFyc2Vfc3RyKCRfU0VSVkVSWydRVUVSWV9TVFJJTkcnXSwgJHVybCk7Cglrc29ydCgkdXJsKTsKCXJldHVybiBodHRwX2J1aWxkX3F1ZXJ5KCR1cmwpOwp9Cg=='));
	@fclose($fp);
}
if (!is_file('includes/functions.inc.php')) {
	warn('File has vanished! Will re-create it: includes/functions.inc.php');
	writefile_1();
	if (!is_file('includes/functions.inc.php')) {
		warn('File cannot be created (not existing): includes/functions.inc.php');
	} else if (sha1_file('includes/functions.inc.php') != '656c0dda22715944d7a4b0ca3e78150e42855b98') {
		warn('File cannot be created (checksum mismatch): includes/functions.inc.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/functions.inc.php', 0644)) {
		warn('Could not change file permissions of includes/functions.inc.php');
	}
} else {
	if (@sha1_file('includes/functions.inc.php') !== '656c0dda22715944d7a4b0ca3e78150e42855b98') {
		if (@sha1_file('includes/functions.inc.php') !== 'c1edc8de1848ced8636faf2006c4523763daba6b') {
			warn('File was modified. Will overwrite the changes now: includes/functions.inc.php');
			$tmp = pathinfo('includes/functions.inc.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/functions.inc.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('includes/functions.inc.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('includes/functions.inc.php') !== '656c0dda22715944d7a4b0ca3e78150e42855b98') {
			warn('File cannot be written (checksum mismatch): includes/functions.inc.php');
		}
	}
}

// Files different: plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php
function writefile_2() {
	@$fp = fopen('plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMiBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgpoZWFkZXIoJ0NvbnRlbnQtVHlwZTp0ZXh0L2h0bWw7IGNoYXJzZXQ9VVRGLTgnKTsKCnJlcXVpcmVfb25jZSBfX0RJUl9fIC4gJy8uLi8uLi8uLi8uLi9pbmNsdWRlcy9vaWRwbHVzLmlu'));
	@fwrite($fp, base64_decode('Yy5waHAnOwoKc2V0X2V4Y2VwdGlvbl9oYW5kbGVyKGFycmF5KCdPSURwbHVzR3VpJywgJ2h0bWxfZXhjZXB0aW9uX2hhbmRsZXInKSk7CgpAc2V0X3RpbWVfbGltaXQoMCk7CgpPSURwbHVzOjppbml0KHRydWUpOwoKaWYgKE9JRHBsdXM6OmJhc2VDb25maWcoKS0+'));
	@fwrite($fp, base64_decode('Z2V0VmFsdWUoJ0RJU0FCTEVfUExVR0lOX09JRHBsdXNQYWdlQWRtaW5Ob3N0YWxnaWEnLCBmYWxzZSkpIHsKCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdUaGlzIHBsdWdpbiB3YXMgZGlzYWJsZWQgYnkgdGhlIHN5c3RlbSBhZG1pbmlzdHJhdG9yIScp'));
	@fwrite($fp, base64_decode('KTsKfQoKaWYgKCFPSURwbHVzOjphdXRoVXRpbHMoKS0+aXNBZG1pbkxvZ2dlZEluKCkpIHsKCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdZb3UgbmVlZCB0byA8YSAlMT5sb2cgaW48L2E+IGFzIGFkbWluaXN0cmF0b3IuJyxPSURwbHVzOjpndWkoKS0+'));
	@fwrite($fp, base64_decode('bGluaygnb2lkcGx1czpsb2dpbiRhZG1pbicpKSk7Cn0KCmlmICghY2xhc3NfZXhpc3RzKCdaaXBBcmNoaXZlJykpIHsKCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdUaGUgUEhQIGV4dGVuc2lvbiAiWmlwQXJjaGl2ZSIgbmVlZHMgdG8gYmUgaW5zdGFs'));
	@fwrite($fp, base64_decode('bGVkIHRvIGNyZWF0ZSBhIFpJUCBhcmNoaXZlIHdpdGggYW4gaW5jbHVkZWQgZGF0YWJhc2UuIE90aGVyd2lzZSwgeW91IGNhbiBqdXN0IGRvd25sb2FkIHRoZSBwbGFpbiBwcm9ncmFtIHdpdGhvdXQgZGF0YS4nKSk7Cn0KCiRkb3NfaWRzID0gYXJyYXkoKTsKJHBh'));
	@fwrite($fp, base64_decode('cmVudF9vaWRzID0gYXJyYXkoKTsKJGkgPSAwOwokZG9zX2lkc1snJ10gPSAnMDAwMDAwMDAnOwokcGFyZW50X29pZHNbJyddID0gJyc7CgokZG9zX2lkc1snJ10gPSBzdHJfcGFkKHN0cnZhbCgkaSsrKSwgOCwgJzAnLCBTVFJfUEFEX0xFRlQpOwokcmVzID0gT0lE'));
	@fwrite($fp, base64_decode('cGx1czo6ZGIoKS0+cXVlcnkoInNlbGVjdCAqIGZyb20gIyMjb2JqZWN0cyB3aGVyZSBpZCBsaWtlICdvaWQ6JScgb3JkZXIgYnkgIi5PSURwbHVzOjpkYigpLT5uYXRPcmRlcignaWQnKSk7CndoaWxlICgkcm93ID0gJHJlcy0+ZmV0Y2hfb2JqZWN0KCkpIHsKCSRv'));
	@fwrite($fp, base64_decode('aWQgPSBzdWJzdHIoJHJvdy0+aWQsIHN0cmxlbignb2lkOicpKTsKCSRwYXJlbnRfb2lkID0gc3Vic3RyKCRyb3ctPnBhcmVudCwgc3RybGVuKCdvaWQ6JykpOwoJJGRvc19pZHNbJG9pZF0gPSBzdHJfcGFkKHN0cnZhbCgkaSsrKSwgOCwgJzAnLCBTVFJfUEFEX0xF'));
	@fwrite($fp, base64_decode('RlQpOwoJaWYgKCRwYXJlbnRfb2lkID09ICcnKSB7CgkJJHBhcmVudF9vaWRzWyRvaWRdID0gJyc7Cgl9IGVsc2UgewoJCSRwYXJlbnRfb2lkc1skb2lkXSA9ICRwYXJlbnRfb2lkOwoJfQp9CgokdG1wX2ZpbGUgPSBPSURwbHVzOjpsb2NhbHBhdGgoKS4ndXNlcmRh'));
	@fwrite($fp, base64_decode('dGEvZG9zX2V4cG9ydC56aXAnOwoKJHppcCA9IG5ldyBaaXBBcmNoaXZlKCk7CmlmICgkemlwLT5vcGVuKCR0bXBfZmlsZSwgWmlwQXJjaGl2ZTo6Q1JFQVRFKSE9PSB0cnVlKSB7Cgl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigiY2Fubm90IG9wZW4gPCR0bXBf'));
	@fwrite($fp, base64_decode('ZmlsZT4iKTsKfQoKZm9yZWFjaCAoJGRvc19pZHMgYXMgJG9pZCA9PiAkZG9zX2lkKSB7CgkkY29udCA9ICcnOwoKCSRjb250IC49ICJWRVJTMjAyMlxyXG4iOwoKCSRjb250IC49ICJTRUxGJGRvc19pZCRvaWRcclxuIjsKCgkkcGFyZW50X29pZCA9ICRwYXJlbnRf'));
	@fwrite($fp, base64_decode('b2lkc1skb2lkXTsKCSRwYXJlbnRfaWQgPSAkZG9zX2lkc1skcGFyZW50X29pZF07CgkkY29udCAuPSAiU1VQUiRwYXJlbnRfaWQkcGFyZW50X29pZFxyXG4iOwoKCWZvcmVhY2ggKCRwYXJlbnRfb2lkcyBhcyAkY2hpbGRfb2lkID0+ICRwYXJlbnRfb2lkKSB7CgkJ'));
	@fwrite($fp, base64_decode('aWYgKCRjaGlsZF9vaWQgPT0gJycpIGNvbnRpbnVlOwoJCWlmICgkcGFyZW50X29pZCA9PSAkb2lkKSB7CgkJCSRjaGlsZF9pZCA9ICRkb3NfaWRzWyRjaGlsZF9vaWRdOwoJCQkkY29udCAuPSAiQ0hMRCRjaGlsZF9pZCRjaGlsZF9vaWRcclxuIjsKCQl9Cgl9CgoJ'));
	@fwrite($fp, base64_decode('JHJlcyA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgKiBmcm9tICMjI2FzbjFpZCB3aGVyZSBvaWQgPSAnb2lkOiRvaWQnIik7Cgl3aGlsZSAoJHJvdyA9ICRyZXMtPmZldGNoX29iamVjdCgpKSB7CgkJJGFzbjEgPSAkcm93LT5uYW1lOwoJCSRjb250IC49'));
	@fwrite($fp, base64_decode('ICJBU04xJGFzbjFcclxuIjsKCX0KCgkkcmVzID0gT0lEcGx1czo6ZGIoKS0+cXVlcnkoInNlbGVjdCAqIGZyb20gIyMjaXJpIHdoZXJlIG9pZCA9ICdvaWQ6JG9pZCciKTsKCXdoaWxlICgkcm93ID0gJHJlcy0+ZmV0Y2hfb2JqZWN0KCkpIHsKCQkkaXJpID0gJHJv'));
	@fwrite($fp, base64_decode('dy0+bmFtZTsKCQkkY29udCAuPSAiVU5JTCRpcmlcclxuIjsKCX0KCglpZiAoJG9pZCA9PSAnJykgewoJCS8vIFRPRE86IFNwbGl0IG91ciBPSURwbHVzIHJvb3QgT0lEcyBpbnRvIHRoZSByZWFsIE9JRCB0cmVlICgxLCAxLjMsIDEuMy42LCAuLi4pCgkJJGNvbnQg'));
	@fwrite($fp, base64_decode('Lj0gIkRFU0NIZXJlLCB5b3UgY2FuIGZpbmQgdGhlIHJvb3QgT0lEcy5cclxuIjsKCX0gZWxzZSB7CgkJJHJlcyA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgKiBmcm9tICMjI29iamVjdHMgd2hlcmUgaWQgPSAnb2lkOiRvaWQnOyIpOwoJCSRyb3cgPSAk'));
	@fwrite($fp, base64_decode('cmVzLT5mZXRjaF9vYmplY3QoKTsKCQkkZGVzYyA9IHRyaW0odHJpbShzdHJpcF90YWdzKCRyb3ctPmRlc2NyaXB0aW9uKSkpOwoJCSRkZXNjID0gc3RyX3JlcGxhY2UoIlxyIiwgIiIsICRkZXNjKTsKCQkkZGVzYyA9IHN0cl9yZXBsYWNlKCJcbiIsICIgICIsICRk'));
	@fwrite($fp, base64_decode('ZXNjKTsKCQkkZGVzY19hcnkxID0gZXhwbG9kZSgiXHJcbiIsIHdvcmR3cmFwKCRkZXNjLCA4MC8qVFJFRVZJRVdfV0lEVEgqLywgIlxyXG4iLCB0cnVlKSk7CgkJJGRlc2NfYXJ5MiA9IGV4cGxvZGUoIlxyXG4iLCB3b3Jkd3JhcCgkcm93LT50aXRsZSwgODAvKlRS'));
	@fwrite($fp, base64_decode('RUVWSUVXX1dJRFRIKi8sICJcclxuIiwgdHJ1ZSkpOwoJCWlmIChpbXBsb2RlKCcnLCRkZXNjX2FyeTEpID09ICcnKSAkZGVzY19hcnkxID0gYXJyYXkoKTsKCQlpZiAoaW1wbG9kZSgnJywkZGVzY19hcnkyKSA9PSAnJykgJGRlc2NfYXJ5MiA9IGFycmF5KCk7CgkJ'));
	@fwrite($fp, base64_decode('JGRlc2NfYXJ5ID0gYXJyYXlfbWVyZ2UoJGRlc2NfYXJ5MSwgJGRlc2NfYXJ5Mik7CgkJZm9yZWFjaCAoJGRlc2NfYXJ5IGFzICRsaW5lX2lkeCA9PiAkbGluZSkgewoJCQlpZiAoJGxpbmVfaWR4ID49IDEwLypERVNDRURJVF9MSU5FUyovKSBicmVhazsKCQkJJGNv'));
	@fwrite($fp, base64_decode('bnQgLj0gIkRFU0MkbGluZVxyXG4iOwoJCX0KCX0KCgkvL2VjaG8gIioqKiokZG9zX2lkLk9JRFxyXG4iOwoJLy9lY2hvICIkY29udFxyXG4iOwoKCSR6aXAtPmFkZEZyb21TdHJpbmcoIiRkb3NfaWQuT0lEIiwgJGNvbnQpOwp9CgokZXhlX3VybCA9ICdodHRwczov'));
	@fwrite($fp, base64_decode('L2dpdGh1Yi5jb20vZGFuaWVsbWFyc2NoYWxsL29pZHBsdXNfZG9zL3Jhdy9tYXN0ZXIvT0lEUExVUy5FWEUnOwokZXhlID0gdXJsX2dldF9jb250ZW50cygkZXhlX3VybCk7CmlmICghJGV4ZSkgewoJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woIkNhbm5v'));
	@fwrite($fp, base64_decode('dCBkb3dubG9hZCB0aGUgYmluYXJ5IGZpbGUgZnJvbSBHaXRIdWIgKCUxKSIsICRleGVfdXJsKSk7Cn0KJHppcC0+YWRkRnJvbVN0cmluZygnT0lEUExVUy5FWEUnLCAkZXhlKTsKCiR6aXAtPmNsb3NlKCk7CgppZiAoIWhlYWRlcnNfc2VudCgpKSB7CgloZWFkZXIo'));
	@fwrite($fp, base64_decode('J0NvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vemlwJyk7CgloZWFkZXIoJ0NvbnRlbnQtRGlzcG9zaXRpb246IGF0dGFjaG1lbnQ7IGZpbGVuYW1lPW9pZHBsdXNfZG9zLnppcCcpOwoJcmVhZGZpbGUoJHRtcF9maWxlKTsKfQoKdW5saW5rKCR0bXBfZmlsZSk7CgpP'));
	@fwrite($fp, base64_decode('SURwbHVzOjppbnZva2Vfc2h1dGRvd24oKTsK'));
	@fclose($fp);
}
if (!is_file('plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php')) {
	warn('File has vanished! Will re-create it: plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php');
	writefile_2();
	if (!is_file('plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php')) {
		warn('File cannot be created (not existing): plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php');
	} else if (sha1_file('plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php') != '7429cdbdcda0cf410d61fb31c644f92109675a0a') {
		warn('File cannot be created (checksum mismatch): plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php', 0644)) {
		warn('Could not change file permissions of plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php');
	}
} else {
	if (@sha1_file('plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php') !== '7429cdbdcda0cf410d61fb31c644f92109675a0a') {
		if (@sha1_file('plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php') !== 'f37240a6475562843d8ab8efef760cdb9f9fead6') {
			warn('File was modified. Will overwrite the changes now: plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php');
			$tmp = pathinfo('plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_2();
		if (@sha1_file('plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php') !== '7429cdbdcda0cf410d61fb31c644f92109675a0a') {
			warn('File cannot be written (checksum mismatch): plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php');
		}
	}
}

// Files different: plugins/viathinksoft/adminPages/920_nostalgia/export_win.php
function writefile_3() {
	@$fp = fopen('plugins/viathinksoft/adminPages/920_nostalgia/export_win.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMiBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgpoZWFkZXIoJ0NvbnRlbnQtVHlwZTp0ZXh0L2h0bWw7IGNoYXJzZXQ9VVRGLTgnKTsKCnJlcXVpcmVfb25jZSBfX0RJUl9fIC4gJy8uLi8uLi8uLi8uLi9pbmNsdWRlcy9vaWRwbHVzLmlu'));
	@fwrite($fp, base64_decode('Yy5waHAnOwoKc2V0X2V4Y2VwdGlvbl9oYW5kbGVyKGFycmF5KCdPSURwbHVzR3VpJywgJ2h0bWxfZXhjZXB0aW9uX2hhbmRsZXInKSk7CgpAc2V0X3RpbWVfbGltaXQoMCk7CgpPSURwbHVzOjppbml0KHRydWUpOwoKaWYgKE9JRHBsdXM6OmJhc2VDb25maWcoKS0+'));
	@fwrite($fp, base64_decode('Z2V0VmFsdWUoJ0RJU0FCTEVfUExVR0lOX09JRHBsdXNQYWdlQWRtaW5Ob3N0YWxnaWEnLCBmYWxzZSkpIHsKCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdUaGlzIHBsdWdpbiB3YXMgZGlzYWJsZWQgYnkgdGhlIHN5c3RlbSBhZG1pbmlzdHJhdG9yIScp'));
	@fwrite($fp, base64_decode('KTsKfQoKaWYgKCFPSURwbHVzOjphdXRoVXRpbHMoKS0+aXNBZG1pbkxvZ2dlZEluKCkpIHsKCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdZb3UgbmVlZCB0byA8YSAlMT5sb2cgaW48L2E+IGFzIGFkbWluaXN0cmF0b3IuJyxPSURwbHVzOjpndWkoKS0+'));
	@fwrite($fp, base64_decode('bGluaygnb2lkcGx1czpsb2dpbiRhZG1pbicpKSk7Cn0KCmlmICghY2xhc3NfZXhpc3RzKCdaaXBBcmNoaXZlJykpIHsKCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdUaGUgUEhQIGV4dGVuc2lvbiAiWmlwQXJjaGl2ZSIgbmVlZHMgdG8gYmUgaW5zdGFs'));
	@fwrite($fp, base64_decode('bGVkIHRvIGNyZWF0ZSBhIFpJUCBhcmNoaXZlIHdpdGggYW4gaW5jbHVkZWQgZGF0YWJhc2UuIE90aGVyd2lzZSwgeW91IGNhbiBqdXN0IGRvd25sb2FkIHRoZSBwbGFpbiBwcm9ncmFtIHdpdGhvdXQgZGF0YS4nKSk7Cn0KCiRkb3NfaWRzID0gYXJyYXkoKTsKJHBh'));
	@fwrite($fp, base64_decode('cmVudF9vaWRzID0gYXJyYXkoKTsKJGkgPSAwOwokZG9zX2lkc1snJ10gPSAnMDAwMDAwMDAnOwokcGFyZW50X29pZHNbJyddID0gJyc7CgokZG9zX2lkc1snJ10gPSBzdHJfcGFkKHN0cnZhbCgkaSsrKSwgOCwgJzAnLCBTVFJfUEFEX0xFRlQpOwokcmVzID0gT0lE'));
	@fwrite($fp, base64_decode('cGx1czo6ZGIoKS0+cXVlcnkoInNlbGVjdCAqIGZyb20gIyMjb2JqZWN0cyB3aGVyZSBpZCBsaWtlICdvaWQ6JScgb3JkZXIgYnkgIi5PSURwbHVzOjpkYigpLT5uYXRPcmRlcignaWQnKSk7CndoaWxlICgkcm93ID0gJHJlcy0+ZmV0Y2hfb2JqZWN0KCkpIHsKCSRv'));
	@fwrite($fp, base64_decode('aWQgPSBzdWJzdHIoJHJvdy0+aWQsIHN0cmxlbignb2lkOicpKTsKCSRwYXJlbnRfb2lkID0gc3Vic3RyKCRyb3ctPnBhcmVudCwgc3RybGVuKCdvaWQ6JykpOwoJJGRvc19pZHNbJG9pZF0gPSBzdHJfcGFkKHN0cnZhbCgkaSsrKSwgOCwgJzAnLCBTVFJfUEFEX0xF'));
	@fwrite($fp, base64_decode('RlQpOwoJaWYgKCRwYXJlbnRfb2lkID09ICcnKSB7CgkJJHBhcmVudF9vaWRzWyRvaWRdID0gJyc7Cgl9IGVsc2UgewoJCSRwYXJlbnRfb2lkc1skb2lkXSA9ICRwYXJlbnRfb2lkOwoJfQp9CgokdG1wX2ZpbGUgPSBPSURwbHVzOjpsb2NhbHBhdGgoKS4ndXNlcmRh'));
	@fwrite($fp, base64_decode('dGEvd2luZG93c19leHBvcnQuemlwJzsKCiR6aXAgPSBuZXcgWmlwQXJjaGl2ZSgpOwppZiAoJHppcC0+b3BlbigkdG1wX2ZpbGUsIFppcEFyY2hpdmU6OkNSRUFURSkhPT0gdHJ1ZSkgewoJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oImNhbm5vdCBvcGVuIDwk'));
	@fwrite($fp, base64_decode('dG1wX2ZpbGU+Iik7Cn0KCiRjb250ID0gJyc7Cgpmb3JlYWNoICgkZG9zX2lkcyBhcyAkb2lkID0+ICRkb3NfaWQpIHsKCSRjb250IC49ICJbT0lEOiRvaWRdXHJcbiI7CgoJJGkgPSAxOwoJZm9yZWFjaCAoJHBhcmVudF9vaWRzIGFzICRjaGlsZF9vaWQgPT4gJHBh'));
	@fwrite($fp, base64_decode('cmVudF9vaWQpIHsKCQlpZiAoJGNoaWxkX29pZCA9PSAnJykgY29udGludWU7CgkJaWYgKCRwYXJlbnRfb2lkID09ICRvaWQpIHsKCQkJJGNvbnQgLj0gImRlbGVnYXRlJGk9T0lEOiRjaGlsZF9vaWRcclxuIjsKCQkJJGkrKzsKCQl9Cgl9CgkkY29udCAuPSAiZGVs'));
	@fwrite($fp, base64_decode('ZWdhdGVzPSIuKCRpLTEpLiJcbiI7CgoJaWYgKCRvaWQgIT0gJycpIHsKCQkkcmVzID0gT0lEcGx1czo6ZGIoKS0+cXVlcnkoInNlbGVjdCAqIGZyb20gIyMjYXNuMWlkIHdoZXJlIG9pZCA9ICdvaWQ6JG9pZCciKTsKCQkkYXNuaWRzID0gYXJyYXkoKTsKCQl3aGls'));
	@fwrite($fp, base64_decode('ZSAoJHJvdyA9ICRyZXMtPmZldGNoX29iamVjdCgpKSB7CgkJCSRhc24xID0gJHJvdy0+bmFtZTsKCQkJJGFzbmlkc1tdID0gJGFzbjE7CgkJfQoJCSRhc25pZHMgPSBpbXBsb2RlKCcsJywgJGFzbmlkcyk7CgkJaWYgKCRhc25pZHMgIT0gJycpICRjb250IC49ICJh'));
	@fwrite($fp, base64_decode('c24xaWQ9JGFzbmlkc1xyXG4iOwoKCQkvKgoJCSRyZXMgPSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0ICogZnJvbSAjIyNpcmkgd2hlcmUgb2lkID0gJ29pZDokb2lkJyIpOwoJCSRpcmlzID0gYXJyYXkoKTsKCQl3aGlsZSAoJHJvdyA9ICRyZXMtPmZldGNo'));
	@fwrite($fp, base64_decode('X29iamVjdCgpKSB7CgkJCSRpcmkgPSAkcm93LT5uYW1lOwoJCQkkaXJpc1tdID0gJGlyaTsKCQl9CgkJJGlyaXMgPSBpbXBsb2RlKCcsJywgJGlyaXMpOwoJCWlmICgkaXJpcyAhPSAnJykgJGNvbnQgLj0gImlyaT0kaXJpc1xyXG4iOwoJCSovCgoJCSRyZXMgPSBP'));
	@fwrite($fp, base64_decode('SURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0ICogZnJvbSAjIyNvYmplY3RzIHdoZXJlIGlkID0gJ29pZDokb2lkJzsiKTsKCQkkcm93ID0gJHJlcy0+ZmV0Y2hfb2JqZWN0KCk7CgoJCWlmICgkcm93LT50aXRsZSAhPSAnJykgJGNvbnQgLj0gImRlc2NyaXB0aW9u'));
	@fwrite($fp, base64_decode('PSIuJHJvdy0+dGl0bGUuIlxyXG4iOwoKCQlpZiAoJHJvdy0+dXBkYXRlZCAhPSAnJykgJGNvbnQgLj0gInVwZGF0ZWRhdGU9Ii5leHBsb2RlKCcgJywkcm93LT51cGRhdGVkKVswXS4iXHJcbiI7CgkJaWYgKCRyb3ctPmNyZWF0ZWQgIT0gJycpICRjb250IC49ICJj'));
	@fwrite($fp, base64_decode('cmVhdGVkYXRlPSIuZXhwbG9kZSgnICcsJHJvdy0+Y3JlYXRlZClbMF0uIlxyXG4iOwoKCQkkZGVzYyA9ICRyb3ctPmRlc2NyaXB0aW9uOwoJCSRkZXNjID0gc3RyaXBfdGFncygkZGVzYyk7CgkJJGRlc2MgPSB0cmltKCRkZXNjKTsKCQlpZiAoJGRlc2MgIT0gJycp'));
	@fwrite($fp, base64_decode('IHsKCQkJJGNvbnQgLj0gImluZm9ybWF0aW9uPSRkb3NfaWQuVFhUXHJcbiI7CgkJCSR6aXAtPmFkZEZyb21TdHJpbmcoIkRCLy8kZG9zX2lkLlRYVCIsICRkZXNjKTsKCQl9Cgl9Cn0KCi8vZWNobyAnPHByZT4nLiRjb250Lic8L3ByZT4nOwovL2RpZSgpOwoKJHNl'));
	@fwrite($fp, base64_decode('dHRpbmdzID0gYXJyYXkoKTsKJHNldHRpbmdzW10gPSAnW1NFVFRJTkdTXSc7CiRzZXR0aW5nc1tdID0gJ0RBVEE9REJcXCc7CiR6aXAtPmFkZEZyb21TdHJpbmcoIk9JRFBMVVMuSU5JIiwgaW1wbG9kZSgiXHJcbiIsJHNldHRpbmdzKS4iXHJcbiIpOwoKCiR6aXAt'));
	@fwrite($fp, base64_decode('PmFkZEZyb21TdHJpbmcoJ0RCLy9PSUQuSU5JJywgJGNvbnQpOwoKJGV4ZV91cmwgPSAnaHR0cHM6Ly9naXRodWIuY29tL2RhbmllbG1hcnNjaGFsbC9vaWRwbHVzX3dpbjk1L3Jhdy9tYXN0ZXIvT0lEUExVUy5leGUnOwokZXhlID0gdXJsX2dldF9jb250ZW50cygk'));
	@fwrite($fp, base64_decode('ZXhlX3VybCk7CmlmICghJGV4ZSkgewoJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woIkNhbm5vdCBkb3dubG9hZCB0aGUgYmluYXJ5IGZpbGUgZnJvbSBHaXRIdWIgKCUxKSIsICRleGVfdXJsKSk7Cn0KJHppcC0+YWRkRnJvbVN0cmluZygnT0lEUExTMzIu'));
	@fwrite($fp, base64_decode('RVhFJywgJGV4ZSk7CgokZXhlX3VybCA9ICdodHRwczovL2dpdGh1Yi5jb20vZGFuaWVsbWFyc2NoYWxsL29pZHBsdXNfd2luMzExL3Jhdy9tYXN0ZXIvT0lEUExVUy5leGUnOwokZXhlID0gdXJsX2dldF9jb250ZW50cygkZXhlX3VybCk7CmlmICghJGV4ZSkgewoJ'));
	@fwrite($fp, base64_decode('dGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woIkNhbm5vdCBkb3dubG9hZCB0aGUgYmluYXJ5IGZpbGUgZnJvbSBHaXRIdWIgKCUxKSIsICRleGVfdXJsKSk7Cn0KJHppcC0+YWRkRnJvbVN0cmluZygnT0lEUExTMTYuRVhFJywgJGV4ZSk7CgokemlwLT5jbG9z'));
	@fwrite($fp, base64_decode('ZSgpOwoKaWYgKCFoZWFkZXJzX3NlbnQoKSkgewoJaGVhZGVyKCdDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL3ppcCcpOwoJaGVhZGVyKCdDb250ZW50LURpc3Bvc2l0aW9uOiBhdHRhY2htZW50OyBmaWxlbmFtZT1vaWRwbHVzX3dpbmRvd3MuemlwJyk7CglyZWFk'));
	@fwrite($fp, base64_decode('ZmlsZSgkdG1wX2ZpbGUpOwp9Cgp1bmxpbmsoJHRtcF9maWxlKTsKCk9JRHBsdXM6Omludm9rZV9zaHV0ZG93bigpOwo='));
	@fclose($fp);
}
if (!is_file('plugins/viathinksoft/adminPages/920_nostalgia/export_win.php')) {
	warn('File has vanished! Will re-create it: plugins/viathinksoft/adminPages/920_nostalgia/export_win.php');
	writefile_3();
	if (!is_file('plugins/viathinksoft/adminPages/920_nostalgia/export_win.php')) {
		warn('File cannot be created (not existing): plugins/viathinksoft/adminPages/920_nostalgia/export_win.php');
	} else if (sha1_file('plugins/viathinksoft/adminPages/920_nostalgia/export_win.php') != '58058c4a103ad9ff6549052732ab62c8cbc1a4ef') {
		warn('File cannot be created (checksum mismatch): plugins/viathinksoft/adminPages/920_nostalgia/export_win.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/viathinksoft/adminPages/920_nostalgia/export_win.php', 0644)) {
		warn('Could not change file permissions of plugins/viathinksoft/adminPages/920_nostalgia/export_win.php');
	}
} else {
	if (@sha1_file('plugins/viathinksoft/adminPages/920_nostalgia/export_win.php') !== '58058c4a103ad9ff6549052732ab62c8cbc1a4ef') {
		if (@sha1_file('plugins/viathinksoft/adminPages/920_nostalgia/export_win.php') !== '3478663902a501502d1e9a1f71b2a8e0f0dc9b70') {
			warn('File was modified. Will overwrite the changes now: plugins/viathinksoft/adminPages/920_nostalgia/export_win.php');
			$tmp = pathinfo('plugins/viathinksoft/adminPages/920_nostalgia/export_win.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/viathinksoft/adminPages/920_nostalgia/export_win.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/viathinksoft/adminPages/920_nostalgia/export_win.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_3();
		if (@sha1_file('plugins/viathinksoft/adminPages/920_nostalgia/export_win.php') !== '58058c4a103ad9ff6549052732ab62c8cbc1a4ef') {
			warn('File cannot be written (checksum mismatch): plugins/viathinksoft/adminPages/920_nostalgia/export_win.php');
		}
	}
}

// Files different: plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.class.php
function writefile_4() {
	@$fp = fopen('plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMiBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgppZiAoIWRlZmluZWQoJ0lOU0lERV9PSURQTFVTJykpIGRpZSgpOwoKY2xhc3MgT0lEcGx1c09iamVjdFR5cGVQbHVnaW5BaWQgZXh0ZW5kcyBPSURwbHVzT2JqZWN0VHlwZVBsdWdpbiB7'));
	@fwrite($fp, base64_decode('CgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRPYmplY3RUeXBlQ2xhc3NOYW1lKCkgewoJCXJldHVybiBPSURwbHVzQWlkOjpjbGFzczsKCX0KCglwdWJsaWMgZnVuY3Rpb24gaW1wbGVtZW50c0ZlYXR1cmUoJGlkKSB7CgkJaWYgKHN0cnRvbG93ZXIoJGlkKSA9'));
	@fwrite($fp, base64_decode('PSAnMS4zLjYuMS40LjEuMzc0NzYuMi41LjIuMy42JykgcmV0dXJuIHRydWU7IC8vIGdyaWRHZW5lcmF0b3JMaW5rcwoJCXJldHVybiBmYWxzZTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZ3JpZEdlbmVyYXRvckxpbmtzKCRvYmpQYXJlbnQpIHsgLy8gSW50ZXJmYWNl'));
	@fwrite($fp, base64_decode('IDEuMy42LjEuNC4xLjM3NDc2LjIuNS4yLjMuNgoKCQlpZiAoJG9ialBhcmVudC0+aXNSb290KCkpIHsKCQkJcmV0dXJuICc8YnI+PGEgaHJlZj0iamF2YXNjcmlwdDpPSURwbHVzT2JqZWN0VHlwZVBsdWdpbkFpZC5nZW5lcmF0ZVJhbmRvbUFJRCgpIj4oJy5fTCgn'));
	@fwrite($fp, base64_decode('R2VuZXJhdGUgYSByYW5kb20gQUlEIC0gbm90IHVuaXF1ZSEnKS4nKTwvYT4nLgoJCQkgICAgICAgJzxicj48YSBocmVmPSJodHRwczovL29pZHBsdXMudmlhdGhpbmtzb2Z0LmNvbS9vaWRwbHVzLz9nb3RvPWFpZCUzQUQyNzYwMDAxODZGIiB0YXJnZXQ9Il9ibGFu'));
	@fwrite($fp, base64_decode('ayI+KCcuX0woJ1JlcXVlc3QgYSBmcmVlIEFJRCBmcm9tIFZpYVRoaW5rU29mdCcpLicpPC9hPic7CgkJfSBlbHNlIHsKCQkJcmV0dXJuICcnOwoJCX0KCX0KCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHByZWZpbHRlclF1ZXJ5KCRzdGF0aWNfbm9kZV9pZCwgJHRo'));
	@fwrite($fp, base64_decode('cm93X2V4Y2VwdGlvbikgewoJCWlmIChzdHJfc3RhcnRzX3dpdGgoJHN0YXRpY19ub2RlX2lkLCdhaWQ6JykpIHsKCQkJJHN0YXRpY19ub2RlX2lkID0gc3RyX3JlcGxhY2UoJyAnLCAnJywgJHN0YXRpY19ub2RlX2lkKTsKCgkJCSR0bXAgPSBleHBsb2RlKCc6Jywk'));
	@fwrite($fp, base64_decode('c3RhdGljX25vZGVfaWQsMik7CgkJCWlmIChpc3NldCgkdG1wWzFdKSkgJHRtcFsxXSA9IHN0cnRvdXBwZXIoJHRtcFsxXSk7CgkJCSRzdGF0aWNfbm9kZV9pZCA9IGltcGxvZGUoJzonLCR0bXApOwoJCX0KCQlyZXR1cm4gJHN0YXRpY19ub2RlX2lkOwoJfQoKfQo='));
	@fclose($fp);
}
if (!is_file('plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.class.php')) {
	warn('File has vanished! Will re-create it: plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.class.php');
	writefile_4();
	if (!is_file('plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.class.php')) {
		warn('File cannot be created (not existing): plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.class.php');
	} else if (sha1_file('plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.class.php') != '05a87ec9739fbecdff29dbaa7c701ae43ecc551a') {
		warn('File cannot be created (checksum mismatch): plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.class.php', 0644)) {
		warn('Could not change file permissions of plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.class.php');
	}
} else {
	if (@sha1_file('plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.class.php') !== '05a87ec9739fbecdff29dbaa7c701ae43ecc551a') {
		if (@sha1_file('plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.class.php') !== '63c6ec678a23d892f92c601156e5a23c2cb5d87b') {
			warn('File was modified. Will overwrite the changes now: plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.class.php');
			$tmp = pathinfo('plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_4();
		if (@sha1_file('plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.class.php') !== '05a87ec9739fbecdff29dbaa7c701ae43ecc551a') {
			warn('File cannot be written (checksum mismatch): plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.class.php');
		}
	}
}

// Files different: plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.js
function writefile_5() {
	@$fp = fopen('plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.js', 'w');
	@fwrite($fp, base64_decode('LyoNCiAqIE9JRHBsdXMgMi4wDQogKiBDb3B5cmlnaHQgMjAxOSAtIDIwMjIgRGFuaWVsIE1hcnNjaGFsbCwgVmlhVGhpbmtTb2Z0DQogKg0KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7DQog'));
	@fwrite($fp, base64_decode('KiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuDQogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vu'));
	@fwrite($fp, base64_decode('c2VzL0xJQ0VOU0UtMi4wDQogKg0KICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQ0KICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFT'));
	@fwrite($fp, base64_decode('IElTIiBCQVNJUywNCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLg0KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1p'));
	@fwrite($fp, base64_decode('c3Npb25zIGFuZA0KICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuDQogKi8NCg0KdmFyIE9JRHBsdXNPYmplY3RUeXBlUGx1Z2luQWlkID0gew0KDQoJT0lEOiAiMS4zLjYuMS40LjEuMzc0NzYuMi41LjIuNC44LjExIiwNCg0KCWdlbmVyYXRlUmFuZG9t'));
	@fwrite($fp, base64_decode('QUlEOiBmdW5jdGlvbigpIHsNCgkJdmFyIGxlbmd0aD0xNTsNCgkJdmFyIHJlc3VsdCAgICAgICAgICAgPSAnJzsNCgkJdmFyIGNoYXJhY3RlcnMgICAgICAgPSAnMDEyMzQ1Njc4OUFCQ0RFRic7DQoJCXZhciBjaGFyYWN0ZXJzTGVuZ3RoID0gY2hhcmFjdGVycy5s'));
	@fwrite($fp, base64_decode('ZW5ndGg7DQoJCWZvciAoIHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrICkgew0KCQkJcmVzdWx0ICs9IGNoYXJhY3RlcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJhY3RlcnNMZW5ndGgpKTsNCgkJfQ0KDQoJCSQoIiNpZCIpLnZhbCgi'));
	@fwrite($fp, base64_decode('RiIrcmVzdWx0KTsNCgl9DQoNCn07DQo='));
	@fclose($fp);
}
if (!is_file('plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.js')) {
	warn('File has vanished! Will re-create it: plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.js');
	writefile_5();
	if (!is_file('plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.js')) {
		warn('File cannot be created (not existing): plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.js');
	} else if (sha1_file('plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.js') != 'f0116b7f09be7cb16737e999a51ef1d7e55c5088') {
		warn('File cannot be created (checksum mismatch): plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.js');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.js', 0644)) {
		warn('Could not change file permissions of plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.js');
	}
} else {
	if (@sha1_file('plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.js') !== 'f0116b7f09be7cb16737e999a51ef1d7e55c5088') {
		if (@sha1_file('plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.js') !== 'c5f887c5bf070e579eeebe99a08ece20a066a46d') {
			warn('File was modified. Will overwrite the changes now: plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.js');
			$tmp = pathinfo('plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.js');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.js')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.js', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_5();
		if (@sha1_file('plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.js') !== 'f0116b7f09be7cb16737e999a51ef1d7e55c5088') {
			warn('File cannot be written (checksum mismatch): plugins/viathinksoft/objectTypes/aid/OIDplusObjectTypePluginAid.js');
		}
	}
}

// Files different: polyfill.min.js.php
function writefile_6() {
	@$fp = fopen('polyfill.min.js.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMSBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgovLyBXZSBkbyB0aGlzIHN0dWZmIHRvIGF2b2lkIHRoYXQgdGhlIGNsaWVudCBpbmNsdWRlcyBhbiBleHRlcm5hbCBKYXZhU2NyaXB0IGZyb20gcG9seWZpbGwuaW8sCi8vIHNpbmNlIHNv'));
	@fwrite($fp, base64_decode('bWUgdXNlcnMgbWlnaHQgaGF2ZSBhIHByb2JsZW0gd2l0aCB0aGF0IChpbiByZWdhcmRzIHByaXZhY3kgb2YgdGhlaXIgSVAgYWRkcmVzcyBldGMuKQovLyBTbywgdGhlIE9JRHBsdXMgd2Vic2VydmVyIHdpbGwgYWN0IGFzIHByb3h5LgoKLy8gc2VlIGh0dHBzOi8v'));
	@fwrite($fp, base64_decode('cG9seWZpbGwuaW8vdjMvdXJsLWJ1aWxkZXIvCmRlZmluZSgnUkVRVUlSRURfUE9MWUZJTExTJywgYXJyYXkoCgkvLyBJbnRlcm5ldCBFeHBsb3JlciBmb3IgdmFyaW91cyBBSkFYIGNhbGxzCgknZmV0Y2gnLAoJJ1VSTCcsCgoJLy8gSW50ZXJuZXQgRXhwbG9yZXIg'));
	@fwrite($fp, base64_decode('Zm9yIE9JRHBsdXNQYWdlUHVibGljV2hvaXMuanMsIE9JRHBsdXNQYWdlQWRtaW5Tb2Z0d2FyZVVwZGF0ZS5qcywgYW5kIE9JRHBsdXNQYWdlQWRtaW5Db2xvcnMuanMKCSdTdHJpbmcucHJvdG90eXBlLmluY2x1ZGVzJywKCgkvLyBJbnRlcm5ldCBFeHBsb3JlciBm'));
	@fwrite($fp, base64_decode('b3IgVGlueU1DRSBpZiBpdCBpcyBpbmNsdWRlZCBpbnNpZGUgb2lkcGx1cy5taW4uanMucGhwICggaHR0cHM6Ly9naXRodWIuY29tL3RpbnltY2UvdGlueW1jZS9ibG9iLzVjMTcwMmExMTllNjgzZjkzZTAzZWNjMjIzMWYxMWQxN2NlNTczOTUvbW9kdWxlcy90aW55'));
	@fwrite($fp, base64_decode('bWNlL3NyYy9jb3JlL21haW4vdHMvYXBpL0VkaXRvck1hbmFnZXIudHMjTDI3MSApCgknZG9jdW1lbnQuY3VycmVudFNjcmlwdCcKKSk7CgpkZWZpbmUoJ01JTklGWV9QT0xZRklMTCcsIHRydWUpOyAvLyBUT0RPOiBwdXQgaW50byBiYXNlY29uZmlnPwoKZGVmaW5l'));
	@fwrite($fp, base64_decode('KCdQT0xZRklMTF9DQUNIRV9NQVhfQUdFJywgMjQqNjAqNjApOyAvLyAxIGRheSwgVE9ETzogcHV0IGludG8gYmFzZWNvbmZpZz8KCiMgLS0tCgpyZXF1aXJlX29uY2UgX19ESVJfXyAuICcvaW5jbHVkZXMvZnVuY3Rpb25zLmluYy5waHAnOwoKZXJyb3JfcmVwb3J0'));
	@fwrite($fp, base64_decode('aW5nKDApOwoKaWYgKCFpc3NldCgkX1NFUlZFUlsnSFRUUF9VU0VSX0FHRU5UJ10pKSB7Cgkkb3V0ID0gJy8qIEVSUk9SOiBObyBVc2VyIEFnZW50IGF2YWlsYWJsZSAqLyc7CglodHRwT3V0V2l0aEVUYWcoJG91dCwgJ2FwcGxpY2F0aW9uL2phdmFzY3JpcHQnLCAn'));
	@fwrite($fp, base64_decode('cG9seWZpbGwnLihNSU5JRllfUE9MWUZJTEwgPyAnLm1pbicgOiAnJykuJy5qcycpOwp9CgokdWEgPSAkX1NFUlZFUlsnSFRUUF9VU0VSX0FHRU5UJ107CgppZiAoTUlOSUZZX1BPTFlGSUxMKSB7CgkkY2FjaGVfZmlsZSA9IF9fRElSX18gLiAnL3VzZXJkYXRhL2Nh'));
	@fwrite($fp, base64_decode('Y2hlL2pzX3BvbHlmaWxsXycubWQ1KGltcGxvZGUoJywnLFJFUVVJUkVEX1BPTFlGSUxMUykpLidfJy5tZDUoJHVhKS4nLm1pbi5qcyc7Cn0gZWxzZSB7CgkkY2FjaGVfZmlsZSA9IF9fRElSX18gLiAnL3VzZXJkYXRhL2NhY2hlL2pzX3BvbHlmaWxsXycubWQ1KGlt'));
	@fwrite($fp, base64_decode('cGxvZGUoJywnLFJFUVVJUkVEX1BPTFlGSUxMUykpLidfJy5tZDUoJHVhKS4nLmpzJzsKfQoKaWYgKCFmaWxlX2V4aXN0cygkY2FjaGVfZmlsZSkgfHwgKHRpbWUoKS1maWxlbXRpbWUoJGNhY2hlX2ZpbGUpKSA+IFBPTFlGSUxMX0NBQ0hFX01BWF9BR0UpIHsKCglp'));
	@fwrite($fp, base64_decode('ZiAoTUlOSUZZX1BPTFlGSUxMKSB7CgkJJHVybCA9ICdodHRwczovL3BvbHlmaWxsLmlvL3YzL3BvbHlmaWxsLm1pbi5qcz9mZWF0dXJlcz0nLnVybGVuY29kZShpbXBsb2RlKCcsJyxSRVFVSVJFRF9QT0xZRklMTFMpKTsKCX0gZWxzZSB7CgkJJHVybCA9ICdodHRw'));
	@fwrite($fp, base64_decode('czovL3BvbHlmaWxsLmlvL3YzL3BvbHlmaWxsLmpzP2ZlYXR1cmVzPScudXJsZW5jb2RlKGltcGxvZGUoJywnLFJFUVVJUkVEX1BPTFlGSUxMUykpOwoJfQoKCSRjb250ID0gdXJsX2dldF9jb250ZW50cygkdXJsLCAkdWEpOwoKCWlmICgkY29udCA9PT0gZmFsc2Up'));
	@fwrite($fp, base64_decode('IHsKCgkJaWYgKGZpbGVfZXhpc3RzKCRjYWNoZV9maWxlKSkgewoJCQkkb3V0ID0gZmlsZV9nZXRfY29udGVudHMoJGNhY2hlX2ZpbGUpOwoKCQkJLy8gSW4gY2FzZSBwb2x5ZmlsbC5pbyBpcyBkb3duLCBkb24ndCBkZWxheSBmdXJ0aGVyIHJlcXVlc3RzCgkJCS8v'));
	@fwrite($fp, base64_decode('IEluc3RlYWQsIHRyeSBhZ2FpbiBhZnRlciB0aGUgbmV4dCBtYXggY2FjaGUgYWdlCgkJCXRvdWNoKCRjYWNoZV9maWxlKTsKCQl9IGVsc2UgewoJCQkkb3V0ID0gJy8qIEVSUk9SOiBwb2x5ZmlsbC5pbyAoJy4kdXJsLicpIG5vdCBhdmFpbGFibGUgYW5kIG5vIGNh'));
	@fwrite($fp, base64_decode('Y2hlIGZpbGUgZXhpc3RzISAqLyc7CgkJCWh0dHBPdXRXaXRoRVRhZygkb3V0LCAnYXBwbGljYXRpb24vamF2YXNjcmlwdCcsICdwb2x5ZmlsbCcuKE1JTklGWV9QT0xZRklMTCA/ICcubWluJyA6ICcnKS4nLmpzJyk7CgkJfQoKCX0gZWxzZSB7CgoJCSR1YSA9IHN0'));
	@fwrite($fp, base64_decode('cl9yZXBsYWNlKCcqLycsICcnLCAkdWEpOwoJCSRjb250ID0gJy8qIFBvbHlmaWxsICcuJHVybC4nIGZvciAnLiR1YS4nICovJy4kY29udDsKCgkJaWYgKFBPTFlGSUxMX0NBQ0hFX01BWF9BR0UgPiAwKSB7CgkJCUBmaWxlX3B1dF9jb250ZW50cygkY2FjaGVfZmls'));
	@fwrite($fp, base64_decode('ZSwgJGNvbnQpOwoJCX0KCgkJJG91dCA9ICRjb250OwoJfQoKfSBlbHNlIHsKCgkkb3V0ID0gZmlsZV9nZXRfY29udGVudHMoJGNhY2hlX2ZpbGUpOwoKfQoKIyAtLS0KCmh0dHBPdXRXaXRoRVRhZygkb3V0LCAnYXBwbGljYXRpb24vamF2YXNjcmlwdCcsICdwb2x5'));
	@fwrite($fp, base64_decode('ZmlsbCcuKE1JTklGWV9QT0xZRklMTCA/ICcubWluJyA6ICcnKS4nLmpzJyk7Cg=='));
	@fclose($fp);
}
if (!is_file('polyfill.min.js.php')) {
	warn('File has vanished! Will re-create it: polyfill.min.js.php');
	writefile_6();
	if (!is_file('polyfill.min.js.php')) {
		warn('File cannot be created (not existing): polyfill.min.js.php');
	} else if (sha1_file('polyfill.min.js.php') != '8994c1f90eae48e148729037f84e8d8e3323bdfc') {
		warn('File cannot be created (checksum mismatch): polyfill.min.js.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('polyfill.min.js.php', 0644)) {
		warn('Could not change file permissions of polyfill.min.js.php');
	}
} else {
	if (@sha1_file('polyfill.min.js.php') !== '8994c1f90eae48e148729037f84e8d8e3323bdfc') {
		if (@sha1_file('polyfill.min.js.php') !== '324c46737e5df871eea68383b40c85453a54753b') {
			warn('File was modified. Will overwrite the changes now: polyfill.min.js.php');
			$tmp = pathinfo('polyfill.min.js.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('polyfill.min.js.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('polyfill.min.js.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_6();
		if (@sha1_file('polyfill.min.js.php') !== '8994c1f90eae48e148729037f84e8d8e3323bdfc') {
			warn('File cannot be written (checksum mismatch): polyfill.min.js.php');
		}
	}
}


file_put_contents('.version.php', "<?php // Revision 963\n");
if (trim(@file_get_contents('.version.php')) !== '<?php // Revision 963') err('Could not write to .version.php!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

