<?php /* <ViaThinkSoftSignature>
HKj+0uoR8hY/xmROitVuDATDYMDqnudaUrkB/VY0apMCRsB9BYL4zLqugcDsS4710
7A4UjQyWsSs+eZObC7XrgU6C28nRBeXHDQmeQxdZTKmt1nLtdolcUC0Aw2AG4H/Ox
OS7sizJ6cNIqCi0BTLvO+mGtUMmeHFLSXu3DadVroMgDDdVF413R+lrSUcMVbg0Ca
OaMWbQ1/jAe2xoUw0R+LFQreU0cHxNTZH4tZXkn86OxtoH1ocGqPM6fRGiKHrHKRI
DysQfTSY5lDZuAgsel+Pan4oYiZuiExAAZZO7QihIlGuqGY+agl+RblCdGZQD16n7
HLG9XpppKH4SjIBOgkSUklb9y94pKMF0Yf86jrApw1lj6hAEHcS54qfQvVovfPWzT
WSw3GgmSAxHPf5wBZCBxNZzZ+SQJNC02qa9xOBnx+yrdcTSXbBZgnGKnFEtJG5olM
0mFR/rQPWXzNHg0EAZBisQYCNt6SbdH8moWUN7ZanTfGasMU36wTUiU87qzNvl+w9
dZQ+Tc9qT9ezjreL/6PRkqtZRC6ASOzEyxAw2+FKcH8owzkuyMGb3WLW1jNrrQAJy
S6tbC2CFG4B9c4jtAshNv2FBAFHYEYYzzlb1ZN390BqB4RFqrLdZc7BREL6imIR21
2dzMkDZpJKMVT7fC4bJKBTEXdR89SeHpGysf7xrK7nLEa5dsojrvjNMp8pNEUBl5u
P+Wlk0Z5+l+TfF42k66J/jYzy/vuB6Eb+hxZwYOHxgYsgB1MBl4qG25RtTwJkcA+8
L0Lg9BzeLCKBSzgPGxsvWx7Mpgd0Jlzl8jBUFQ7rczbmkSol2OiHDeioV1Rk0/G1b
y6Q5OEikHyNTu2rM6OkI70Imo9GL32/MeeAkWjbD0fQCh91PQYmNW3If3Eq66ETGk
2+MC1uPODnelQQyvUOxwfK/ZOmcpug8CJk0a8HDuaiBHwi5hCrZmarnLCnGY9t522
p2swGnIXHdjf8RMXDHs5Rtp5wf4CBBP5+VVzSheXV4krfxu/FuHAI6nrV+Sn/3bQ5
Ptn1wi3UFPx6pBvGApRz7oDdq1VL/GwKmLE8HF0U21raBhE/MGH8S7MO3MfdJeOSE
HjcZGsvrQ6PqhZ/gFKNXKprmhsmZ+sBIx5cjpM/Poip5TydktOeI5URwH0f8gL1fe
wwOQ/ut5mP+OGT6YSMcy44eQQpmTK6Tuy1nY8OuVsTUvEvpPDDFsIXbqutdb72OtM
q+K5UOg3uIApAaMheAQvrsv0C0OwukW1GL5284ecqNLtrWhGhJwY0QF677nTQTh5J
OSnim9pxgLfpIJwZ/kVV427IJAzKxEUYNdoeVEXYVM7wg9jUJBalno4J/CJjhF3XE
g==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 313') {
	err('This update can only be applied to OIDplus version 2.0.0.313!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// File added: favicon.ico.php
function writefile_1() {
	@$fp = fopen('favicon.ico.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCnJlcXVpcmVfb25jZSBfX0RJUl9fIC4gJy9pbmNsdWRlcy9vaWRwbHVzLmluYy5waHAnOwoKaWYgKGZpbGVfZXhpc3RzKF9fRElSX18uJy91c2VyZGF0YS9mYXZpY29uLmljbycpKSB7CglWdHNCcm93'));
	@fwrite($fp, base64_decode('c2VyRG93bmxvYWQ6Om91dHB1dF9maWxlKF9fRElSX18uJy91c2VyZGF0YS9mYXZpY29uLmljbycpOwp9IGVsc2UgewoJVnRzQnJvd3NlckRvd25sb2FkOjpvdXRwdXRfZmlsZShfX0RJUl9fLicvaW1nL2Zhdmljb24uaWNvJyk7Cn0KCg=='));
	@fclose($fp);
}
if (is_file('favicon.ico.php') && (sha1_file('favicon.ico.php') != '324469e9dbaa9070d5c00061da1156c288ea055f')) {
	warn('File was created by someone else. Will overwrite the changes now: favicon.ico.php');
	$tmp = pathinfo('favicon.ico.php');
	$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('favicon.ico.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
	warn('Creating a backup as '.$backup_name);
	if (!@copy('favicon.ico.php', $backup_name)) {
		warn('Creation of backup failed');
	}
}
writefile_1();
if (!is_file('favicon.ico.php')) {
	warn('File cannot be created (not existing): favicon.ico.php');
} else if (sha1_file('favicon.ico.php') != '324469e9dbaa9070d5c00061da1156c288ea055f') {
	warn('File cannot be created (checksum mismatch): favicon.ico.php');
} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('favicon.ico.php', 0644)) {
	warn('Could not change file permissions of favicon.ico.php');
}

// Files different: TODO
function writefile_2() {
	@$fp = fopen('TODO', 'w');
	@fwrite($fp, base64_decode('ClJFQ0VOVCBTVFVGRgotIENvb2tpZSBsYXc6CglEb3dubG9hZCBDb29raWVDb25zZW50IGNvZGUgaW50byBfM3AgZm9sZGVyLCBkbyBub3QgaG90bGluayBpdAoJd2UgbmVlZCB0byBsb2cgYWxsIGNvbnNlbnRzCglkbyB3ZSBuZWVkIGFuIGV4cGxpY2l0IGNvbnNl'));
	@fwrite($fp, base64_decode('bnQgYXQgdGhlIGxvZ2luIGZvcm0/CglkbyB3ZSBuZWVkIGEgY29uc2VudCBmb3IgdGhlIGNvb2tpZSBTU0xfQ0hFQ0s/Ci0gVmVyaWZ5IHRoYXQgbG9nZ2VyIHdvcmtzIGNvcnJlY3RseSwgY2hlY2sgaWYgYWxsIGxvZ21hc2tzIGFyZSBjb3JyZWN0Ci0gdGhlIGlu'));
	@fwrite($fp, base64_decode('YWN0aXZpdHkgdGltZXIgaXMgbXVjaCB0b28gZmFzdCEKLSBEb2VzIHRoZSBhZG1pbiBmZWF0dXJlICI2MDBfbG9nIiBhbHNvIHNob3cgYWxsIGxvZyBldmVudHMgZnJvbSBhbGwgT2JqZWN0cyBhbmQgYWxsIFJBcz8KLSBhdCBhIGxvdCBvZiBmb3JtcywgaWYgeW91'));
	@fwrite($fp, base64_decode('IHByZXNzICJlbnRlciIsIHRoZSAiZm9ybSIgd2lsbCBub3QgYmUgc3VibWl0dGVkIChlLmcuICJjcmVhdGUgcmEiIHBsdWdpbiksIGNhbm5vdCByZXByb2R1Y2U/Ci0gVGVzdCBldmVyeSBmdW5jdGlvbiBvZiBPSURwbHVzIHRvIGVuc3VyZSBldmVyeXRoaW5nIHdv'));
	@fwrite($fp, base64_decode('cmtzIGFmdGVyIHRoZSByZWNlbnQgY2hhbmdlcyBpbiBPT1AKClRJTllNQ0UKLSBtZW51IGVudHJ5ICJmb3JtYXRzIiBpcyBlbXB0eS4gY2FuIGl0IGJlIHJlbW92ZWQ/Ci0gY2xpY2tpbmcgIlBhcmFncmFwaCIgZHJvcGRvd24gYm94IGRvZXMgbm90IHdvcmsgKFNh'));
	@fwrite($fp, base64_decode('ZmFyaSBwcm9ibGVtPykKCldIT0lTCi0gd2Vid2hvaXM6IGJlc2lkZSBUWFQvWE1ML0pTT04gbW9yZSBvdXRwdXQgbW9kaT8gIENTViwgUy9NSU1FICAoYW5kIGFkZCB0aGUgUy9NSU1FIGtleXB1cnBvc2UgdG8gdGhlIFguNTA5IGNlcnRpZmljYXRlcykKLSB3aG9p'));
	@fwrite($fp, base64_decode('cyBxdWVyeSAnb2lkOicgc2hvdWxkIHNob3cgYWxsIHJvb3QgZW50cmllcyAoc3Vib3JkaW5hdGUgZW50cmllcyksIGJ1dCB0aGVyZSBpcyBvbmx5IHRoZSBtZXNzYWdlICJub3QgZm91bmQiCgpSRkMKLSBwcm9vZiByZWFkCi0gc2hvdWxkIHRoZSB3aG9sZSBXSE9J'));
	@fwrite($fp, base64_decode('UyBvdXRwdXQgYmUgY2FzZSBpbnNlbnNpdGl2ZT8KLSBzaG91bGQgImRpc3RhbmNlIiBiZSBtYW5kYXRvcnk/Ci0gdHJ5IHRvIHVzZSBNVVNULCBNVVNUIE5PVCwgU0hBTEwgZXRjLiBhY2NvcmRpbmcgdG8gUkZDIDIxMTkKLSBmZWxkZXIgZGllIG5pY2h0IG9wdGlv'));
	@fwrite($fp, base64_decode('bmFsIHNpbmQgPT4gbWFuZGF0b3J5IGtlbm56ZWljaG5lbgoKU0VUVVAKLSBUaGVyZSBzaG91bGQgYmUgYSAidGVzdCBkYXRhYmFzZSBjb25uZWN0aW9uIiBidXR0b24KCldFQlNWTiBVUERBVEVSCi0gaW1wbGVtZW50IHN1cHBvcnQgZm9yIGV4dGVybmFsIHJlcG9z'));
	@fwrite($fp, base64_decode('ISEhCgpTTUFMTCBUSElOR1MKLSBSQSBhZGRyZXNzIGRhdGE6IENvdW50cnkgc2VsZWN0aW9uIGJveCBsaWtlIGluIE9JREluZm8KLSBXZSBzaG91bGQgcmVtb3ZlICJkaWUoKSIgd2hlbmV2ZXIgcG9zc2libGUsIGJlY2F1c2UgaXQgaXMgdmVyeSB1bmZsZXhpYmxl'));
	@fwrite($fp, base64_decode('Ci0gb2ZmZXIgc2lnbmF0dXJlIGNoZWNrZXIgdG9vbCB0byB2ZXJpZnkgV0hPSVMgcmVzcG9uc2VzCi0gbWluaW11bS1hdWZrbGFwcHN0dWZlbiBmdWVyIGFsbGUgb2JqZWt0ZSB1bmQgcGx1Z2lucyBlaW5zdGVsbGJhciBtYWNoZW4sIHNvZGFzcyB6LmIuIGFsbGUg'));
	@fwrite($fp, base64_decode('T0lEcyBpbW1lciBiaXMgenVyIHN0dWZlIDIgYXVmZ2VrbGFwcHQgc2luZCwgd2VubiBtYW4gT0lEcGx1cyBmcmlzY2ggw7ZmZm5ldAotIG1ha2UgdXNlIG9mIGF1dG9sb2FkaW5nIG9mIFBIUCBjbGFzc2VzCi0gUmV2aXZlIHRoZSBpZGVhIG9mICJpbmZvcm1hdGlv'));
	@fwrite($fp, base64_decode('biBvYmplY3RzIiA9IE9JRHMgdGhhdCBjb250YWluIGNvbnRlbnQKLSBUaGluZ3MgbGlrZSAiY29uZmlnKCktPm1pblJhUGFzc3dvcmRMZW5ndGgiIHNob3VsZCBub3QgYmUgaGFyZGNvZGVkIGZ1bmN0aW9ucywgYnV0IHJhdGhlciBxdWVyaWVkIHdpdGggbm9ybWFs'));
	@fwrite($fp, base64_decode('IGdldFZhbHVlKCkgZXRjLgotIEFQSSA6IE1ha2UgYSBmdW5jdGlvbiB0aGF0IGNoZWNrcyBpZiBhIFJBIGV4aXN0cywgYW5kIHVzZSBpdCBldmVyeXdoZXJlIHdoZXJlIG5lZWRlZAotIFNob3VsZCB3ZSBzZWxmLWhvc3QgcG9seWZpbGwgZHVlIHRvIEdEUFIgc3R1'));
	@fwrite($fp, base64_decode('ZmY/Ci0gT2JqZWN0IHR5cGUgcGx1Z2lucyA6IHRha2UgY2FyZSB0aGF0ICJ0cmVlaWNvbi5wbmciIGFuZCAiaWNvbl9iaWcucG5nIiBleGlzdCBldmVyeXdoZXJlIChiZWNvbWUgc3RhbmRhcmQpCi0gd2hlbiBhamF4LnBocCBnZW5lcmF0ZXMgYSBQSFAgZXJyb3Is'));
	@fwrite($fp, base64_decode('IHRoZSBjbGllbnQgZ2l2ZXMgYSAic3ludGF4IGVycm9yIiBtZXNzYWdlLi4uIGl0IHdvdWxkIGJlIGJldHRlciBpZiB0aGUgY2xpZW50IHNob3dzIHRoZSBmdWxsIHBocCBlcnJvcj8gb3Igc29tZXRoaW5nIG1vcmUgdXNlci1mcmllbmRseT8KLSBmcmVlb2lkOiBn'));
	@fwrite($fp, base64_decode('bWFpbCBhcHAgZG9lcyBub3QgaHlwZXJsaW5rIHRoZSBhY3RpdmF0aW9uIFVSTC4gd2h5PwotIGhvdyB0byBhdm9pZCBpbnZpdGUgc3BhbW1pbmc/Ci0gd2hlbiBhIFBIUCBlcnJvciBoYXBwZW5zIChpLmUuIHRoZSBBSkFYIHNjcmlwdCBkaWQgbm90IG1hbmFnZSB0'));
	@fwrite($fp, base64_decode('byBvdXRwdXQgYSBKU09OKSwgdGhlIEFKQVggc2NyaXB0IG91dHB1dHMgIkVycm9yOiBTeW50YXhFcnJvcjogVW5leHBlY3RlZCB0b2tlbiA8IGluIEpTT04gYXQgcG9zaXRpb24gMCIgLi4uIGJldHRlciBzaG93IHRoZSB1c2VyIHRoZSBhY3R1YWwgbWVzc2FnZQot'));
	@fwrite($fp, base64_decode('IHdoZW4gbG9naW4gZXhwaXJlZCwgcmVtb3ZlIGVudHJpZXMgaW4gdGhlIHRyZWV2aWV3Ci0gZGlzYWJsZSBzcGVjaWZpYyBmdW5jdGlvbnMgKGUuZy4gaW52aXRlLCBsb2dpbiwgcmFpbmZvLCBmb3Jnb3QgcGFzc3dvcmQpIGlmIHRoZSBwbHVnaW5zIGFyZSBub3Qg'));
	@fwrite($fp, base64_decode('aW5zdGFsbGVkIChjaGVjayBpZiBjbGFzcyB0eXBlIGlzIHJlZ2lzdGVyZWQgdXNpbmcgY2xhc3NfZXhpc3RzKCkpCi0gbWFrZSB1c2FnZSBvZiBGb3JlaWduIEtleXMKCVBST0JMRU06IHdlIG5lZWQgZm9yZWlnbiBrZXlzIHdpdGggbm8gY2hlY2ssIGJlY2F1c2UK'));
	@fwrite($fp, base64_decode('CWEpIHdlIHdhbnQgdG8ga2VlcCBsb2cgZW50cmllcyBldmVuIGlmIGFuIG9iamVjdC91c2VyIGlzIGRlbGV0ZWQKCWIpIGxvZ191c2VyLnVzZXJuYW1lIGNhbiBhbHNvIGJlICdhZG1pbicgKGFuZCB0aGVyZWZvcmUgbm90IGJlIGEgZm9yZWlnbiBrZXkgdG8gdGFi'));
	@fwrite($fp, base64_decode('bGUgJ3JhJykKCWMpIG5vdCBldmVyeSBvYmplY3Qgc2hvdWxkIGhhdmUgYSByZWdpc3RlcmVkIFJBLiBUaGVyZSBzaG91bGQgYmUgInVua25vd24iIFJBcyB3aGVyZSBvbmx5IHRoZSBlbWFpbCBhZGRyZXNzIGlzIGtub3duCi0gPGFiYnI+IGluIDxjb2RlPiB3aXJk'));
	@fwrite($fp, base64_decode('IGRvcHBlbHQgdW50ZXJzdHJpY2hlbgotIHdlbm4gbWFuIGVpbmUgd2VsbC1rbm93biBPSUQgYW5sZWdlbiBt9mNodGUsIGRhbm4ga29tbXQgZmVobGVyIHdlZ2VuIHJlcGxhY2VBc24xL3JlcGxhY2VJcmksIGFiZXIgZGllIE9JRCBpc3QgZXJzdGVsbHQuIERpZSBB'));
	@fwrite($fp, base64_decode('UEkgaXN0IGFiZXIgbmljaHQgcmVsb2FkZWQuIE1hbiBzaWVodCBhbHNvIG5pY2h0LCBkYXNzIGRpZSBPSUQgZXJzdGVsbHQgd3VyZGUsIHVuZCBlaW4gZXJuZXV0ZXIga2xpY2sgYXVmIEluc2VydCBm/GhydCB6dW0gUHJpbWFyeS1LZXkgZmVobGVyCi0gcHJvYmxl'));
	@fwrite($fp, base64_decode('bTogd2VubiBlaW5lIFJBIGVpbmdlbGFkZW4gd2VyZGVuIG32Y2h0ZSwgbXVzcyBtYW4gInVwZGF0ZSIgZHL8Y2tlbiB1bmQgZGllIE9JRCB3aXJkIGFscyB1cGRhdGVkIG1hcmtpZXJ0Ci0gYmVpIG1laHJlcmVuIGlkZW50aWZpZXJuIGthbm4gbWFuIG5pY2h0IGJl'));
	@fwrite($fp, base64_decode('c3RpbW1lbiwgd2VsY2hlciBpZGVudGlmaWVyIGRlciBiZXZvcnp1Z3RlIHNlaW4gc29sbCEhCi0gc2hvdyB3aG9pcyBsaW5rcyBvbmx5IGlmIGZvbGRlciAid2hvaXMvIiBleGlzdHMKLSBkaXNhYmxlIGF1dG9jb21wbGV0ZSBvbiBzb21lIGZvcm1zCi0gZ3JhcGhp'));
	@fwrite($fp, base64_decode('Y2FsIGltcG9ydmVtZW50cyBvZiBmb3JtcyAoaW5wdXQgZWRpdHMgYWxpZ25lZCkKLSAiRG9jdW1lbnRzIiBzZWN0aW9uOiBNYWtlIGRvY3VtZW50YXRpb24gZm9yIHVzYWdlIG9mIE9JRHBsdXMgKGZvciBtZW1iZXJzIG9ubHkpCi0gYWRtaW4gY29uZmlnIG1laHIg'));
	@fwrite($fp, base64_decode('dXNlciBmcmllbmRseSwgZS5nLiBoYXZpbmcgdGhlIGVuYWJsZS9kaXNhYmxlIG9iamVjdCB0eXBlIHN0dWZmIChsaWtlIGluIHJlZ2lzdHJhdGlvbiB3aXphcmQpIGFsc28gaW4gdGhlIGFkbWluIGNvbnRyb2wgcGFuZWwKLSBpdCB3b3VsZCBiZSBjb29sIGlmIGFm'));
	@fwrite($fp, base64_decode('dGVyIHRoZSBsb2dpbiwgdGhlIG9wZW5lZCBub2RlcyBpbiB0aGUgdHJlZSB3b3VsZCBzdGF5IG9wZW4KLSBzaG91bGQgd2UgbG9nIHNvbWV3aGVyZSwgd2hlbiB0aGUgYWRtaW4gYWNjb3VudCB3YXMgbG9nZ2VkIGluPwotIGh0bWwgY2hlY2tib3g6ICJsYWJlbCBm'));
	@fwrite($fp, base64_decode('b3IiIHZlcndlbmRlbgotIHdoZW4gamF2YXNjcmlwdCBmYWlscywgdGhlIGZvcm0gd2lsbCBiZSBzdWJtaXR0ZWQgdG8gJy4vJyAsIHRoYXQgaXMgbm90IGdvb2QhIGZhaWxlZCBqYXZhc2NyaXB0IG11c3QgcmV0dXJuIGZhbHNlLCBzbyB0aGF0IHRoZSBmb3JtIGRv'));
	@fwrite($fp, base64_decode('ZXMgbm90IGdldCBzdWJtaXR0ZWQKLSBhZG1pbjogc2hvdyBwcml2YWN5IGVudHJpZXMgZnJvbSBSQXMgKGJ1dCBncmV5LCBzbyB5b3Uga25vdyB0aGF0IGl0IGlzIHByaXZhdGUpCi0gYWRtaW4gc29sbCBjb250YWN0IGRhdGEgZWluZXIgZnJlbWRlbiBSQSDkbmRl'));
	@fwrite($fp, base64_decode('cm4gZPxyZmVuCi0gZnJlZW9pZDogYXNuLjEgdW5kIGlyaSBzcGFsdGVuIGF1c2JsZW5kZW4sIGRhIGRpZXNlciBhcmMga2VpbmUgSURzIHZlcmdpYnQ/Ci0gUHJpdmFjeTogTWVociBzdHVmZW4sIHouYi4gZGFzcyBtYW4gZGVuIHBlcnNvbmFsIG5hbWUgZXZ0bCBn'));
	@fwrite($fp, base64_decode('YXIgbmljaHQgemVpZ2VuIG32Y2h0ZQotIE1hbiBzb2xsdGUgImNyZWF0ZWQiIGFi5G5kZXJuIGT8cmZlbiEgb2RlciBldnRsIGdhbnogdmVyc3RlY2tlbiwgd2VubiBtYW4gZXMgbmljaHQgd2Vp3wotIGluIGRlciBjcnVkIGxpc3RlIGRlbiB0aXRlbCBkZXMgb2Jq'));
	@fwrite($fp, base64_decode('ZWt0cyB6ZWlnZW4KLSBuYXRPcmRlcigpIGlzdCBudXIgZvxyIE9JRCBn/Gx0aWchISEgYW5kZXJlIHNvcnQtbWVjaGFuaXNtZW4gZvxyIGFuZGVyZSBvYmpla3R0eXBlbiBlcmZvcmRlcmxpY2gKLSB0aW55bWNlCgltY2UgZGlydHkgZmxhZzoKCQktIHdlbm4gbWFu'));
	@fwrite($fp, base64_decode('IHdlY2hzZWwgKGpzIHRyZWUgc2VsZWN0KSwgZGFubiBzb2xsIGFiZ2VmcmFndCB3ZXJkZW4sIG9iIHRpbnltY2UgZGlydHkgaXN0LCB1bmQgZWluZSB3YXJudW5nIGJyaW5nZW4sIGFsc28gc28sIHdpZSB3ZW5uIG1hbiBkaWUgc2VpdGUgbmV1IGxhZGVuIHf8cmRl'));
	@fwrite($fp, base64_decode('CgkJLSBrcml0aXNjaGVyIGJ1Zzogc2VpdGUg9mZmbmVuLCB0aW55IG1jZSBlZGl0aWVyZW4sIHNwZWljaGVybiBrbGlja2VuLiBkYW5uIGY1IG5ldSBsYWRlbiAobmljaHQgc3RyZytmNSk6IGRhbm4gaXN0IGRlciBhbHRlIGNvbnRlbnQgd2llZGVyIGRhLiBhdd9l'));
	@fwrite($fp, base64_decode('ciBtYW4gZHL8Y2t0IHN0cmcrZjUKLSBqc3RyZWUgc2VsZWN0OiBhdXRvbWF0aWNhbGx5IHNjcm9sbCBkb3duCi0gb3B0aXNjaCBhdWZo/GJzY2hlbi4gZGluZ2Ugd2llIFJBOiBtZWhyIGRpbmdlIHplaWdlbiwgYWRyZXNzZSwgZW1haWwgZXRjCgpEQVRBQkFTRQot'));
	@fwrite($fp, base64_decode('IGNoZWNrIGlmIHRoZSBOVUxMIGFuZCBOT1QgTlVMTCBkZWZpbml0aW9ucyBhcmUgbWVhbmluZ2Z1bC4gSXQgaXMgbm90IGdvb2QgYXQgaW4gKl9yYSBldmVyeXRoaW5nIGlzIE5PVCBOVUxMCi0gU1FMaXRlMzogSW1wbGVtZW50IE5hdHVyYWwgT0lEIHNvcnRpbmcg'));
	@fwrite($fp, base64_decode('KG5hdFNvcnQpCgpGVVRVUkUKLSBtdWx0aWxhbmcKLSBtYWtlIHVzZSBvZiBDb21wb3Nlci4gUHJvYmxlbXM6CiAgKiBXaGF0IGlmIGNvbXBvc2VyIGluc3RhbGxzIGEgdmVyc2lvbiBvZiBhIGNvbXBvbmVudCwgd2hpY2ggaXMgaW5jb21wYXRpYmxlPwogICogV2Ug'));
	@fwrite($fp, base64_decode('bmVlZCBhIG5ldyBwdWJsaXNoaW5nIHNjcmlwdCwgYmVjYXVzZSBzaW1wbHkgY2hlY2tpbmcgb3V0IFNWTiBpcyBub3QgZW5vdWdoIGFueW1vcmUuIFRoZSB1c2VyIG5lZWRzIHRvIGV4ZWN1dGUgY29tcG9zZXIuIEJ1dCB3aGF0IGlzIGlmIHRoZSB1c2VyIGRvbid0'));
	@fwrite($fp, base64_decode('IGhhdmUgY29tcG9zZXIgKG9yIGRvbnQgaGF2ZSBzaGVsbCBhY2Nlc3MgYXQgYWxsPykKLSBpbXBsZW1lbnQgc2l0ZW1hcHMgeG1sCi0gYWRtaW4gc2hvdWxkIGJlIGFibGUgdG8gY2hhbmdlIHdlbGxrbm93biBvaWRzPwotIG1vdmUgb2lkIHRvIGRpZmZlcmVudCBh'));
	@fwrite($fp, base64_decode('cmMKLSBiZWkgc2VociBncm/fZW4gYXJjcyAoei5CLiBQRU4pIHNvbGxlbiBuaWNodCBhbGxlIGFuZ2V6ZWlndCB3ZXJkZW4KLSB1bnRlcnN0/HR6dW5nIGb8ciBPUlM/Ci0gTWVociAiQ3V0dGluZyBFZGdlIFRlY2hub2xvZ2llIiBzb2xsIGluIGRpZXNlbSBQcm9q'));
	@fwrite($fp, base64_decode('ZWt0IHp1bSBUcmFnZW4ga29tbWVuOiBBSkFYLCBKU09OLCB2b2xsc3TkbmRpZyBVVEY4LCBDUlVEIGZyYW1ld29ya3MsIFBETywgSFRNTDUsIE1vYmlsZXMgRGVzaWduLCBQdXJlIENTUywgQXV0b2xvYWRpbmcsIE9iamVrdG9yaWVudGllcnVuZyAoYWJlciBuaWNo'));
	@fwrite($fp, base64_decode('dCB1bmJlZGluZ3QgTVZDKSwgVGVzdGluZywgLi4uPGJyPgotICJTZWFyY2giIHBsdWdpbjogRmVhdHVyZSB0byBzZWFyY2ggaW5zaWRlIGRvY3VtZW50YXRpb24gKGRvYy8gZGlyZWN0b3J5KQotICJTZWFyY2giIHBsdWdpbjogSSB3YW50IHRvIHNlYXJjaCBpbiBh'));
	@fwrite($fp, base64_decode('bGwgb2JqZWN0IHR5cGVzIGFuZCBSQXMuIE5vdCBmaXJzdCBzZWxlY3QgdGhlIHR5cGUuCi0gSG93IGNhbiB3ZSBtYWtlIHN1cmUgdGhhdCBleGFtcGxlIG9iamVjdHMgYXJlIG5vdCBleHBvcnRlZCB1c2luZyBvaWQtaW5mby5jb20gZXhwb3J0PwotIEFkbWluaXN0'));
	@fwrite($fp, base64_decode('cmF0b3ItSW50ZXJmYWNlOiBlbmFibGUgYW5kIGRpc2FibGUgb2JqZWN0IHR5cGVzCi0gZGV0YWlsbGVkIGNoYW5nZS1oaXN0b3J5IG9mIGVhY2ggb2lkCgpCVUdTPwotIE9JRHBsdXMgZG9lcyBub3Qgd29yayBpbiBTYWZhcmkgTW9iaWxlIQoJMS4gWW91IGNhbm5v'));
	@fwrite($fp, base64_decode('dCBzY3JvbGwgdGhlIE9JRCBncmlkLCBhcyB0aGUgc2Nyb2xsaW5nIGFmZmVjdHMgdGhlIHdob2xlIHBhZ2UsIG5vdCB0aGUgZ3JpZC4KCTIuIEpRdWVyeVVJIHNsaWRlcnMgY2Fubm90IGJlIGRyYWdnZWQKClJFSkVDVEVEIElERUFTCi0gc29sbHRlIGVzIG1laGVy'));
	@fwrite($fp, base64_decode('ZSBhZG1pbnMgZ2ViZW4/Ci0gcmVjb3JkIGZpcnN0IFJBIGFuZCBjdXJyZW50IFJBID0+IFguNjYwIGRvZXMgbm90IGhhdmUgdGhpcyByZXF1aXJlbWVudAotIG1hcmtlcnMgRFJBRlQsIExFQUYgYW5kIEZST1pFTiBldGMuID0+IHVzZSAiUHJvdGVjdGVkIiBpZiB5'));
	@fwrite($fp, base64_decode('b3Ugd2FudCB0byBtYWtlIGl0IGludmlzaWJsZQoKSURFQVMKLSB3aGVuIGEgbmV3IG9pZCBpcyBjcmVhdGVkLCBzaG91bGQgd2UgcmVkaXJlY3QgdG8gdGhlIG5ld2x5IGNyZWF0ZWQgT0lELCBzbyB0aGF0IHRoZSB1c2VyIGNhbiBiZWdpbiBlbnRlcmluZyB0aGUg'));
	@fwrite($fp, base64_decode('ZGVzY3JpcHRpb24gZXRjPwotIHdoZW4gYW4gb2JqZWN0IHdhcyBub3QgZm91bmQsIHRoZSBlcnJvciBtZXNzYWdlIGNvdWxkIHNob3cgdGhlIG5leHQgcG9zc2libGUga25vd24gb2JqZWN0IChsaWtlIFdlYldIT0lTIGRvZXMpCi0gdGhlICJnb3RvIiBxdWlja2Jh'));
	@fwrite($fp, base64_decode('ciAoYXQgdGhlIHRvcCByaWdodCkgY291bGQgYWxzbyBiZSB1c2VkIHRvIHNlYXJjaCBzb21ldGhpbmcgLi4uCi0gLi4uIGFsdGVybmF0aXZlbHksIHRoZSAib2JqZWN0IG5vdCBmb3VuZCIgZXJyb3IgcGFnZSBjb3VsZCBsaW5rIHRvIHRoZSBzZWFyY2ggcGx1Z2lu'));
	@fwrite($fp, base64_decode('Ci0gbWFrZSBjb2xvciBwbHVnaW4gYXZhaWxhYmxlIGZvciBldmVyeW9uZS4gQWRtaW4gbWF5IHBlcm1hbmVudGx5IHNhdmUgdGhlIGNvbG9ycywgYnV0IHVzZXJzIHNob3VsZCBiZSBhYmxlIHRvIHNldCB0aGVpciBvd24gdGhlbWUsIHNhdmVkIHZpYSBjb29raWVz'));
	@fwrite($fp, base64_decode('Ci0gdGhlcmUgc2hvdWxkIGJlIGEgZm9ybSB3aGVyZSBhbiBSQSBjYW4gcmVxdWVzdCBhbiBpbnZpdGF0aW9uLCBldmVuIGlmIHRoZSBzdXBlcmlvciBSQSBkaWQgbm90IGludml0ZSB0aGVtLgogIHRoZSBmYWN0IHRoYXQgYSBSQSBleGlzdHMgaW4gdGhlIE9iamVj'));
	@fwrite($fp, base64_decode('dCBUYWJsZSBzaG91bGQgcGVybWl0IHRoZSBSQSB0byBpbnZpdGUgdGhlaXJzZWxmLgotIGJlaW0gdmVybGFzc2VuIGRlciBzZWl0ZSwgei5iLiB3ZW5uIG1hbiBsaW5rcyBhdWYgZWluZW4gbmV1ZW4gbWVu/HB1bmt0IGtsaWNrdCwgc29sbCBlaW5lIGFiZnJhZ2Ug'));
	@fwrite($fp, base64_decode('a29tbWVuLCBvYiBtYW4gc3BlaWNoZXJuIG32Y2h0ZQotIG1ha2UgYSBsaXN0IG9mIE9JRHMgdGhhdCBkbyBub3QgYXNzaWduIEFTTjEvSVJJIGlkZW50aWZpZXJzIChlLmcuIElBTkEgUEVOIG9yIFZpYVRoaW5rU29mdCBGcmVlT0lEKSwgdGhlbiByZWplY3QgYW55'));
	@fwrite($fp, base64_decode('IGlkZW50aWZpZXIgdGhlIHVzZXIgcHJvdmlkZXMKLSBzYW5pdGl6ZSBJUHY0LCBJUHY2LCBHVUlEIGR1cmluZyBjcmVhdGlvbgoJYmVpIElQdjQgdW5kIElQdjY6IC0gaWYgaXQgaXMgYSBzaW5nbGUgaG9zdCBhZGRyZXNzLCBkb24ndCBwdXQgLzMyIG9yIC8xMjgg'));
	@fwrite($fp, base64_decode('c3VmZml4CgkgICAgICAgICAgICAgICAgICAgLSBzdHJpa2UgdW5uZWNlc3NhcnkgYml0cyB0aGF0IGFyZSBub3QgZGVmaW5lZCBpbiB0aGUgbmV0bWFzayAoYWxzbyBhdCB0aGUgd2hvaXMgb3V0cHV0KQotIGxldCB0aGUgc3lzYWRtaW4gZGVjaWRlIGlmIHRoZXkg'));
	@fwrite($fp, base64_decode('d2FudCB0aGUgdGl0bGUgYmUgInN5c3RlbXRpdGxlIC0gb2JqZWN0IHRpdGxlIiBvciAib2JqZWN0IHRpdGxlIC0gc3lzdGVtdGl0bGUiCi0gc2hvdWxkIGEgUkEgYmUgYWJsZSB0byBtYXJrIHRoZWlyIG93biBvaWQgYXMgY29uZmlkZW50aWFsLCBpbnN0ZWFkIG9m'));
	@fwrite($fp, base64_decode('IGFza2luZyB0aGUgc3VwZXJpb3IgUkE/Ci0gc29sbHRlIGVzIGVpbmUgb2lkcGx1cyBwcm9qZWt0c2VpdGUgZ2ViZW4gYW5zdGVsbGUgbnVyIGRhcyBuYWNrdGUgc3lzdGVtPwotIHZlbmRvciBzaWduYXR1cmUgdG8gcGx1Z2lucyArIHZpYXRoaW5rc29mdCBzaWdu'));
	@fwrite($fp, base64_decode('YXR1cmVzICsgImNoZWNrIiBwcm9ncmFtIGlmIGFsbCBzaWduYXR1cmVzIG1hdGNoCi0gaGF2ZSBhIG1lbnUgaXRlbSAocGx1Z2luKSAibGF0ZXN0IHVwZGF0ZXMiIHdoaWNoIGxpc3RzIE9JRHMgdGhhdCBoYXZlIGJlZW4gY2hhbmdlZCBvciBhZGRlZCByZWNlbnRs'));
	@fwrite($fp, base64_decode('eT8KLSAodW5zdXJlOikgd291bGQgaXQgYmUgZ29vZCBpZiB0aGUgc3VwZXJpb3IgUkEgY29tbWVudCBpcyBzaG93biBpbiB0aGUgb2JqZWN0IHBhZ2UgaXRzZWxmPwotIER1cmluZyBhbiBvYmplY3QgaW5zZXJ0aW9uOiBJZiBldmVyeXRoaW5nIGlzIGVtcHR5IChB'));
	@fwrite($fp, base64_decode('U04xLCBJUkksIGNvbW1lbnQpLCBzaG91bGQgdGhlbiB0aGVyZSBiZSBhIHdhcm5pbmc/Ci0gVGhlIHN5c3RlbSBzaG91bGQgd2FybiBpZiB0aGVyZSBhcmUgdHdvIE9JRHMgd2l0aCB0aGUgc2FtZSBBU04uMSBpZGVudGlmaWVyIChpdCBpcyBhbGxvd2VkLCBidXQg'));
	@fwrite($fp, base64_decode('bm90IHJlY29tbWVuZGVkISkKClFVRVNUSU9OUwotIHNob3VsZCB0aGUgY29sbGF0aW9uIGJlIGNhc2Ugc2Vuc2l0aXZlIG9yIGNhc2UgaW5zZW5zaXRpdmU/IEZvciBKYXZhIHBhY2thZ2UgbmFtZXMsIGl0IHNob3VsZCBiZSBjYXNlIHNlbnN0aXZpZQotIHdvcnQg'));
	@fwrite($fp, base64_decode('Imd1aWQiIG9kZXIgInV1aWQiIHZlcndlbmRlbj8KLSBzaG91bGQgIk9JRCB1cGRhdGVkIiBiZSBzcGxpdCBpbnRvIHR3byBjYXRlZ29yaWVzICJ1cGRhdGVkIGJ5IHN1cGVyaW9yIiAoZS5nLiBpZGVudGlmaWVycykgYW5kICJ1cGRhdGVkIGJ5IG93bmVyIiAoZGVz'));
	@fwrite($fp, base64_decode('Y3JpcHRpb24gZXRjKT8KLSAidXBkYXRlZCIgbmljaHQgYWt0dWFsaXNpZXJlbiwgd2VubiBtYW4gbnVyIGF1ZiAidXBkYXRlIiBrbGlja3QgYWJlciBuaXggZ2XkbmRlcnQgaGF0Ci0gIkRvY3VtZW50cyIgc2VjdGlvbjogQ2FuIGJhc2Ugb2YgVVJMcy9pbWFnZXMg'));
	@fwrite($fp, base64_decode('aW5zaWRlIHRoZSBIVE1MIGJlIGNoYW5nZWQgYXV0b21hdGljYWxseT8KClBSSVZBQ1k6Ci0gYnJpbmcgYmFjayAiM3AvY29va2llY29udGVudCI/IERNIDI4IE1heSAyMDE5OiBSZW1vdmVkIENvb2tpZUNvbnNlbnQgdGVtcG9yYXJpbHksIGJlY2F1c2UgaXQgaXMg'));
	@fwrite($fp, base64_decode('cGxhY2VkIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIHBhZ2UgYW5kIHRoZXJlZm9yZSBydWlucyB0aGUgR29vZ2xlIGluZGV4IC4uLgoJPT4gV2UgbWlnaHQgbm90IG5lZWQgaXQsIGJlY2F1c2UgY29va2llcyBhcmUgb25seSBzZXQgZHVyaW5nIGxvZ2luLCBhbmQg'));
	@fwrite($fp, base64_decode('YXQgdGhlIGxvZ2luIHBhZ2UgaXRzZWxmLCB3ZSBhbHJlYWR5IHdhcm4gYWJvdXQgY29va2llcywgaW4gYWRkaXRpb24gdG8gdGhlIFByaXZhY3kgZG9jdW1lbnRhdGlvbgoKR1VJRCBNYW5hZ2VtZW50Ci0gTGVhZiBub2RlcyAoR1VJRHMpIHNob3VsZCBzaG93L2Vk'));
	@fwrite($fp, base64_decode('aXQgdGhlIFRpdGxlIGluIHRoZSBDUlVELCBzbyB5b3UgZG9udCBoYXZlIHRvIGNsaWNrIHRoZSBHVUlEIHRvIHNlZSB0aGUgdGl0bGUKLSBzZWx0c2FtZXIgYnVnOiB3ZW5uIGljaCBndWlkOm9pZHBsdXMgZWRpdGllcmUsIGRhbm4g9mZmbmV0IHNpY2ggbGlua3Mg'));
	@fwrite($fp, base64_decode('Z3VpZDphY3RpdmVkaXJlY3RvcnkgYmVpbSBuZXVsYWRlbiBkZXMgYmF1bXMgbmFjaCBkZW0gdXBkYXRlLiBpcmdlbmR3aWUg9mZmbmV0IGVyIGRlbiB6dWxldHp0IGdl9mZmbmV0ZW4gbm9kZSBiZWltIHJlbG9hZCBub2NobWFsCgpSZXBybzoKLSBDYW4gYSBwcmV2'));
	@fwrite($fp, base64_decode('aW91c2x5IGRlbGV0ZWQgMi45OTkgbm90IGJlIGNyZWF0ZWQgYW55bW9yZT8gKGR1cmluZyBJTlNFUlQ6ICJpZGVudGlmaWVycyBjYW5ub3QgYmUgY2hhbmdlZCIpCg=='));
	@fclose($fp);
}
if (!is_file('TODO')) {
	warn('File has vanished! Will re-create it: TODO');
	writefile_2();
	if (!is_file('TODO')) {
		warn('File cannot be created (not existing): TODO');
	} else if (sha1_file('TODO') != '6a993c713b239febac2f2636570e4d223b238a31') {
		warn('File cannot be created (checksum mismatch): TODO');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('TODO', 0644)) {
		warn('Could not change file permissions of TODO');
	}
} else {
	if (@sha1_file('TODO') !== '6a993c713b239febac2f2636570e4d223b238a31') {
		if (@sha1_file('TODO') !== '2a68c81ee621970777536474767268e7872bb3b2') {
			warn('File was modified. Will overwrite the changes now: TODO');
			$tmp = pathinfo('TODO');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('TODO')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('TODO', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_2();
		if (@sha1_file('TODO') !== '6a993c713b239febac2f2636570e4d223b238a31') {
			warn('File cannot be written (checksum mismatch): TODO');
		}
	}
}

// Files different: dev/delete_apple_turds
function writefile_3() {
	@$fp = fopen('dev/delete_apple_turds', 'w');
	@fwrite($fp, base64_decode('Iy9iaW4vYmFzaAoKRElSPSQoIGRpcm5hbWUgIiQwIiApCgpjZCAiJERJUi8uLiIKCmZpbmQgLiAtdHlwZSBmIC1uYW1lICcuRFNfU3RvcmUnIC1kZWxldGUKZmluZCAuIC10eXBlIGYgLW5hbWUgJy5fKicgLWRlbGV0ZQo='));
	@fclose($fp);
}
if (!is_file('dev/delete_apple_turds')) {
	warn('File has vanished! Will re-create it: dev/delete_apple_turds');
	writefile_3();
	if (!is_file('dev/delete_apple_turds')) {
		warn('File cannot be created (not existing): dev/delete_apple_turds');
	} else if (sha1_file('dev/delete_apple_turds') != '481087c5c78cbd6d00b84c78be23a45a6bf42e02') {
		warn('File cannot be created (checksum mismatch): dev/delete_apple_turds');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('dev/delete_apple_turds', 0755)) {
		warn('Could not change file permissions of dev/delete_apple_turds');
	}
} else {
	if (@sha1_file('dev/delete_apple_turds') !== '481087c5c78cbd6d00b84c78be23a45a6bf42e02') {
		if (@sha1_file('dev/delete_apple_turds') !== 'f3be0f9020205874e5a865c296cc39c4aa39bcf8') {
			warn('File was modified. Will overwrite the changes now: dev/delete_apple_turds');
			$tmp = pathinfo('dev/delete_apple_turds');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('dev/delete_apple_turds')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('dev/delete_apple_turds', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_3();
		if (@sha1_file('dev/delete_apple_turds') !== '481087c5c78cbd6d00b84c78be23a45a6bf42e02') {
			warn('File cannot be written (checksum mismatch): dev/delete_apple_turds');
		}
	}
}

// Files different: index.php
function writefile_4() {
	@$fp = fopen('index.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmhlYWRlcignQ29udGVudC1UeXBlOnRleHQvaHRtbDsgY2hhcnNldD1VVEYtOCcpOwoKcmVxdWlyZV9vbmNlIF9fRElSX18gLiAnL2luY2x1ZGVzL29pZHBsdXMuaW5jLnBocCc7CgpzZXRfZXhjZXB0'));
	@fwrite($fp, base64_decode('aW9uX2hhbmRsZXIoJ2h0bWxfZXhjZXB0aW9uX2hhbmRsZXInKTsKZnVuY3Rpb24gaHRtbF9leGNlcHRpb25faGFuZGxlcigkZXhjZXB0aW9uKSB7CglpZiAoJGV4Y2VwdGlvbiBpbnN0YW5jZW9mIE9JRHBsdXNDb25maWdJbml0aWFsaXphdGlvbkV4Y2VwdGlvbikg'));
	@fwrite($fp, base64_decode('ewoJCWVjaG8gIjxoMT5PSURwbHVzIGluaXRpYWxpemF0aW9uIGVycm9yPC9oMT4iOwoJCWVjaG8gJzxwPicuaHRtbGVudGl0aWVzKCRleGNlcHRpb24tPmdldE1lc3NhZ2UoKSkuJzwvcD4nOwoJCWVjaG8gJzxwPlBsZWFzZSBjaGVjayA8Yj51c2VyZGF0YS9iYXNl'));
	@fwrite($fp, base64_decode('Y29uZmlnL2NvbmZpZy5pbmMucGhwPC9iPic7CgkJaWYgKGlzX2RpcihfX0RJUl9fIC4gJy9zZXR1cCcpKSB7CgkJCWVjaG8gJyBvciBydW4gPGEgaHJlZj0iJy5PSURwbHVzOjpnZXRTeXN0ZW1VcmwoKS4nc2V0dXAvIj5zZXR1cDwvYT4gYWdhaW4nOwoJCX0KCQll'));
	@fwrite($fp, base64_decode('Y2hvICc8L3A+JzsKCX0gZWxzZSB7CgkJZWNobyAiPGgxPk9JRHBsdXMgZXJyb3I8L2gxPiI7CgkJLy8gRU5UX1NVQlNUSVRVVEUgYmVjYXVzZSBPREJDIGRyaXZlcnMgbWlnaHQgcmV0dXJuIEFOU0kgaW5zdGVhZCBvZiBVVEYtOCBzdHVmZgoJCWVjaG8gJzxwPicu'));
	@fwrite($fp, base64_decode('aHRtbGVudGl0aWVzKCRleGNlcHRpb24tPmdldE1lc3NhZ2UoKSwgRU5UX1NVQlNUSVRVVEUpLic8L3A+JzsKCQllY2hvICc8cD48Yj5UZWNobmljYWwgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHByb2JsZW06PC9iPjwvcD4nOwoJCWVjaG8gJzxwcmU+JzsKCQllY2hv'));
	@fwrite($fp, base64_decode('IGdldF9jbGFzcygkZXhjZXB0aW9uKS4iXG4iOwoJCWVjaG8gJ2F0ICcuJGV4Y2VwdGlvbi0+Z2V0RmlsZSgpLicoJy4kZXhjZXB0aW9uLT5nZXRMaW5lKCkuIilcbiI7CgkJZWNobyAiU3RhY2t0cmFjZTpcbiI7CgkJZWNobyAkZXhjZXB0aW9uLT5nZXRUcmFjZUFz'));
	@fwrite($fp, base64_decode('U3RyaW5nKCk7CgkJZWNobyAnPC9wcmU+JzsKCX0KfQoKb2Jfc3RhcnQoKTsgLy8gYWxsb3cgY29va2llIGhlYWRlcnMgdG8gYmUgc2VudAoKT0lEcGx1czo6aW5pdCh0cnVlKTsKCiRzdGF0aWNfbm9kZV9pZCA9IGlzc2V0KCRfUkVRVUVTVFsnZ290byddKSA/ICRf'));
	@fwrite($fp, base64_decode('UkVRVUVTVFsnZ290byddIDogJ29pZHBsdXM6c3lzdGVtJzsKJHN0YXRpYyA9IE9JRHBsdXM6Omd1aSgpOjpnZW5lcmF0ZUNvbnRlbnRQYWdlKCRzdGF0aWNfbm9kZV9pZCk7CiRzdGF0aWNfdGl0bGUgPSAkc3RhdGljWyd0aXRsZSddOwokc3RhdGljX2ljb24gPSAk'));
	@fwrite($fp, base64_decode('c3RhdGljWydpY29uJ107CiRzdGF0aWNfY29udGVudCA9ICRzdGF0aWNbJ3RleHQnXTsKCmZ1bmN0aW9uIGNvbWJpbmVfc3lzdGVtdGl0bGVfYW5kX3BhZ2V0aXRsZSgkc3lzdGVtdGl0bGUsICRwYWdldGl0bGUpIHsKCS8vIFBsZWFzZSBhbHNvIGNoYW5nZSB0aGUg'));
	@fwrite($fp, base64_decode('ZnVuY3Rpb24gaW4gb2lkcGx1c19iYXNlLmpzCglpZiAoJHN5c3RlbXRpdGxlID09ICRwYWdldGl0bGUpIHsKCQlyZXR1cm4gJHN5c3RlbXRpdGxlOwoJfSBlbHNlIHsKCQlyZXR1cm4gJHBhZ2V0aXRsZSAuICcgLSAnIC4gJHN5c3RlbXRpdGxlOwoJfQp9Cgokc3lz'));
	@fwrite($fp, base64_decode('aWRfb2lkID0gT0lEcGx1czo6Z2V0U3lzdGVtSWQodHJ1ZSk7CmlmICghJHN5c2lkX29pZCkgJHN5c2lkX29pZCA9ICd1bmtub3duJzsKaGVhZGVyKCdYLU9JRHBsdXMtU3lzdGVtSUQ6Jy4kc3lzaWRfb2lkKTsKCiRzeXNfdXJsID0gT0lEcGx1czo6Z2V0U3lzdGVt'));
	@fwrite($fp, base64_decode('VXJsKCk7CmhlYWRlcignWC1PSURwbHVzLVN5c3RlbVVSTDonLiRzeXNfdXJsKTsKCiRzeXNfdmVyID0gT0lEcGx1czo6Z2V0VmVyc2lvbigpOwppZiAoISRzeXNfdmVyKSAkc3lzX3ZlciA9ICd1bmtub3duJzsKaGVhZGVyKCdYLU9JRHBsdXMtU3lzdGVtVmVyc2lv'));
	@fwrite($fp, base64_decode('bjonLiRzeXNfdmVyKTsKCiRzeXNfaW5zdGFsbF90eXBlID0gT0lEcGx1czo6Z2V0SW5zdGFsbFR5cGUoKTsKaGVhZGVyKCdYLU9JRHBsdXMtU3lzdGVtSW5zdGFsbFR5cGU6Jy4kc3lzX2luc3RhbGxfdHlwZSk7Cgokc3lzX3RpdGxlID0gT0lEcGx1czo6Y29uZmln'));
	@fwrite($fp, base64_decode('KCktPmdldFZhbHVlKCdzeXN0ZW1fdGl0bGUnKTsKaGVhZGVyKCdYLU9JRHBsdXMtU3lzdGVtVGl0bGU6Jy4kc3lzX3RpdGxlKTsKCmlmIChjbGFzc19leGlzdHMoJ09JRHBsdXNQYWdlQWRtaW5Db2xvcnMnKSkgewoJJGNzcyA9ICdvaWRwbHVzLm1pbi5jc3MucGhw'));
	@fwrite($fp, base64_decode('P2ludmVydD0nLihPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ2NvbG9yX2ludmVydCcpKS4nJmhfc2hpZnQ9Jy4oT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdjb2xvcl9odWVfc2hpZnQnKS8zNjApLicmc19zaGlmdD0nLihPSURwbHVzOjpjb25maWco'));
	@fwrite($fp, base64_decode('KS0+Z2V0VmFsdWUoJ2NvbG9yX3NhdF9zaGlmdCcpLzEwMCkuJyZ2X3NoaWZ0PScuKE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgnY29sb3JfdmFsX3NoaWZ0JykvMTAwKTsKfSBlbHNlIHsKCSRjc3MgPSAnb2lkcGx1cy5taW4uY3NzLnBocCc7Cn0KCiRqcyA9'));
	@fwrite($fp, base64_decode('ICdvaWRwbHVzLm1pbi5qcy5waHAnOwoKPz48IURPQ1RZUEUgaHRtbD4KPGh0bWwgbGFuZz0iZW4iPgoKPGhlYWQ+Cgk8bWV0YSBodHRwLWVxdWl2PSJDb250ZW50LVR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD11dGYtOCI+Cgk8bWV0YSBuYW1lPSJP'));
	@fwrite($fp, base64_decode('SURwbHVzLVN5c3RlbUlEIiBjb250ZW50PSI8P3BocCBlY2hvIGh0bWxlbnRpdGllcygkc3lzaWRfb2lkKTsgPz4iPgoJPG1ldGEgbmFtZT0iT0lEcGx1cy1TeXN0ZW1VUkwiIGNvbnRlbnQ9Ijw/cGhwIGVjaG8gaHRtbGVudGl0aWVzKCRzeXNfdXJsKTsgPz4iPgoJ'));
	@fwrite($fp, base64_decode('PG1ldGEgbmFtZT0iT0lEcGx1cy1TeXN0ZW1WZXJzaW9uIiBjb250ZW50PSI8P3BocCBlY2hvIGh0bWxlbnRpdGllcygkc3lzX3Zlcik7ID8+Ij4KCTxtZXRhIG5hbWU9Ik9JRHBsdXMtU3lzdGVtSW5zdGFsbFR5cGUiIGNvbnRlbnQ9Ijw/cGhwIGVjaG8gaHRtbGVu'));
	@fwrite($fp, base64_decode('dGl0aWVzKCRzeXNfaW5zdGFsbF90eXBlKTsgPz4iPgoJPG1ldGEgbmFtZT0iT0lEcGx1cy1TeXN0ZW1UaXRsZSIgY29udGVudD0iPD9waHAgZWNobyBodG1sZW50aXRpZXMoJHN5c190aXRsZSk7IC8qIERvIG5vdCByZW1vdmUuIFRoaXMgbWV0YSB0YWcgaXMgYWNl'));
	@fwrite($fp, base64_decode('c3NlZCBieSBvaWRwbHVzX2Jhc2UuanMgKi8gPz4iPgoJPG1ldGEgbmFtZT0idGhlbWUtY29sb3IiIGNvbnRlbnQ9IiNBOURDRjAiPgoJPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiPgoK'));
	@fwrite($fp, base64_decode('CTx0aXRsZT48P3BocCBlY2hvIGNvbWJpbmVfc3lzdGVtdGl0bGVfYW5kX3BhZ2V0aXRsZShPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ3N5c3RlbV90aXRsZScpLCAkc3RhdGljX3RpdGxlKTsgPz48L3RpdGxlPgoKCTxzY3JpcHQgc3JjPSI8P3BocCBlY2hv'));
	@fwrite($fp, base64_decode('IGh0bWxlbnRpdGllcygkanMpOyA/PiI+PC9zY3JpcHQ+CgoJPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSI8P3BocCBlY2hvIGh0bWxlbnRpdGllcygkY3NzKTsgPz4iPgoJPGxpbmsgcmVsPSJzaG9ydGN1dCBpY29uIiB0eXBlPSJpbWFnZS94LWljb24iIGhy'));
	@fwrite($fp, base64_decode('ZWY9ImZhdmljb24uaWNvLnBocCI+CjwvaGVhZD4KCjxib2R5PgoKPGRpdiBpZD0iZnJhbWVzIj4KCTxkaXYgaWQ9ImNvbnRlbnRfd2luZG93IiBjbGFzcz0iYm9yZGVyYm94Ij4KCQk8P3BocAoJCSRzdGF0aWNfY29udGVudCA9IHByZWdfcmVwbGFjZV9jYWxsYmFj'));
	@fwrite($fp, base64_decode('aygKCQkJJ3w8YVxzKFtePl0qKWhyZWY9Im1haWx0bzooW14iXSspIihbXj5dKik+KFtePF0qKTwvYT58aXNtVScsCgkJCWZ1bmN0aW9uICgkdHJlZmZlcikgewoJCQkJJGVtYWlsID0gJHRyZWZmZXJbMl07CgkJCQkkdGV4dCA9ICR0cmVmZmVyWzRdOwoJCQkJcmV0'));
	@fwrite($fp, base64_decode('dXJuIE9JRHBsdXM6Om1haWxVdGlscygpLT5zZWN1cmVFbWFpbEFkZHJlc3MoJGVtYWlsLCAkdGV4dCwgMSk7IC8vIEFudGlTcGFtCgkJCX0sICRzdGF0aWNfY29udGVudCk7CgoJCWVjaG8gJzxoMSBpZD0icmVhbF90aXRsZSI+JzsKCQlpZiAoJHN0YXRpY19pY29u'));
	@fwrite($fp, base64_decode('ICE9ICcnKSBlY2hvICc8aW1nIHNyYz0iJy5odG1sZW50aXRpZXMoJHN0YXRpY19pY29uKS4nIiB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIGFsdD0iIj4gJzsKCQllY2hvIGh0bWxlbnRpdGllcygkc3RhdGljX3RpdGxlKS4nPC9oMT4nOwoJCWVjaG8gJzxkaXYgaWQ9'));
	@fwrite($fp, base64_decode('InJlYWxfY29udGVudCI+Jy4kc3RhdGljX2NvbnRlbnQuJzwvZGl2Pic7CgkJaWYgKCRfU0VSVkVSWydSRVFVRVNUX01FVEhPRCddID09ICdHRVQnKSB7CgkJCWVjaG8gJzxicj48cD48aW1nIHNyYz0iaW1nL3NoYXJlLnBuZyIgd2lkdGg9IjE1IiBoZWlnaHQ9IjE1'));
	@fwrite($fp, base64_decode('IiBhbHQ9IlNoYXJlIj4gPGEgaHJlZj0iP2dvdG89Jy5odG1sZW50aXRpZXMoJHN0YXRpY19ub2RlX2lkKS4nIiBpZD0ic3RhdGljX2xpbmsiIGNsYXNzPSJncmF5X2Zvb3Rlcl9mb250Ij5TdGF0aWMgbGluayB0byB0aGlzIHBhZ2U8L2E+JzsKCQkJZWNobyAnPC9w'));
	@fwrite($fp, base64_decode('Pic7CgkJfQoJCWVjaG8gJzxicj4nOwoJCT8+Cgk8L2Rpdj4KCgk8ZGl2IGlkPSJzeXN0ZW1fdGl0bGVfYmFyIj4KCQk8ZGl2IGlkPSJzeXN0ZW1fdGl0bGVfbWVudSIgb25jbGljaz0ibW9iaWxlTmF2QnV0dG9uQ2xpY2sodGhpcykiIG9ubW91c2VlbnRlcj0ibW9i'));
	@fwrite($fp, base64_decode('aWxlTmF2QnV0dG9uSG92ZXIodGhpcykiIG9ubW91c2VsZWF2ZT0ibW9iaWxlTmF2QnV0dG9uSG92ZXIodGhpcykiPgoJCQk8ZGl2IGlkPSJiYXIxIj48L2Rpdj4KCQkJPGRpdiBpZD0iYmFyMiI+PC9kaXY+CgkJCTxkaXYgaWQ9ImJhcjMiPjwvZGl2PgoJCTwvZGl2'));
	@fwrite($fp, base64_decode('PgoKCQk8ZGl2IGlkPSJzeXN0ZW1fdGl0bGVfdGV4dCI+CgkJCTxhIDw/cGhwIGVjaG8gT0lEcGx1czo6Z3VpKCktPmxpbmsoJ29pZHBsdXM6c3lzdGVtJyk7ID8+PgoJCQkJPHNwYW4gaWQ9InN5c3RlbV90aXRsZV8xIj5WaWFUaGlua1NvZnQgT0lEcGx1cyAyLjA8'));
	@fwrite($fp, base64_decode('L3NwYW4+PGJyPgoJCQkJPHNwYW4gaWQ9InN5c3RlbV90aXRsZV8yIj48P3BocCBlY2hvIGh0bWxlbnRpdGllcyhPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ3N5c3RlbV90aXRsZScpKTsgPz48L3NwYW4+CgkJCTwvYT4KCQk8L2Rpdj4KCTwvZGl2PgoKCTxk'));
	@fwrite($fp, base64_decode('aXYgaWQ9ImdvdG9ib3giPgoJCTxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJnb3RvIiBpZD0iZ290b2VkaXQiIHZhbHVlPSI8P3BocCBlY2hvIGh0bWxlbnRpdGllcygkc3RhdGljX25vZGVfaWQpOyA/PiI+CgkJPGlucHV0IHR5cGU9ImJ1dHRvbiIgdmFsdWU9Ikdv'));
	@fwrite($fp, base64_decode('IiBvbmNsaWNrPSJnb3RvQnV0dG9uQ2xpY2tlZCgpIiBpZD0iZ290b2J1dHRvbiI+Cgk8L2Rpdj4KCgk8ZGl2IGlkPSJvaWR0cmVlIiBjbGFzcz0iYm9yZGVyYm94Ij4KCQk8IS0tIDxub3NjcmlwdD4KCQkJPHA+PGI+UGxlYXNlIGVuYWJsZSBKYXZhU2NyaXB0IHRv'));
	@fwrite($fp, base64_decode('IHVzZSBhbGwgZmVhdHVyZXM8L2I+PC9wPgoJCTwvbm9zY3JpcHQ+IC0tPgoJCTw/cGhwIE9JRHBsdXM6Om1lbnVVdGlscygpLT5ub25qc19tZW51KCk7ID8+Cgk8L2Rpdj4KPC9kaXY+Cgo8L2JvZHk+CjwvaHRtbD4KPD9waHAKCiRjb250ID0gb2JfZ2V0X2NvbnRl'));
	@fwrite($fp, base64_decode('bnRzKCk7Cm9iX2VuZF9jbGVhbigpOwoKZWNobyAkY29udDsK'));
	@fclose($fp);
}
if (!is_file('index.php')) {
	warn('File has vanished! Will re-create it: index.php');
	writefile_4();
	if (!is_file('index.php')) {
		warn('File cannot be created (not existing): index.php');
	} else if (sha1_file('index.php') != '3c0ed0db2bd62efb02bc41ee113cf3aac86343d4') {
		warn('File cannot be created (checksum mismatch): index.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('index.php', 0644)) {
		warn('Could not change file permissions of index.php');
	}
} else {
	if (@sha1_file('index.php') !== '3c0ed0db2bd62efb02bc41ee113cf3aac86343d4') {
		if (@sha1_file('index.php') !== '1cafd5fdcd60ef6e8e476e66a3445510b80401a2') {
			warn('File was modified. Will overwrite the changes now: index.php');
			$tmp = pathinfo('index.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('index.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('index.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_4();
		if (@sha1_file('index.php') !== '3c0ed0db2bd62efb02bc41ee113cf3aac86343d4') {
			warn('File cannot be written (checksum mismatch): index.php');
		}
	}
}

// Files different: plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php
function writefile_5() {
	@$fp = fopen('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmNsYXNzIE9JRHBsdXNQYWdlUHVibGljQXR0YWNobWVudHMgZXh0ZW5kcyBPSURwbHVzUGFnZVBsdWdpblB1YmxpYyB7CgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRVcGxvYWREaXIoJGlkKSB7'));
	@fwrite($fp, base64_decode('CgkJJHBhdGggPSByZWFscGF0aChfX0RJUl9fLicvLi4vLi4vLi4vJykuJy91c2VyZGF0YS9hdHRhY2htZW50cy8nOwoKCQkkb2JqID0gT0lEcGx1c09iamVjdDo6cGFyc2UoJGlkKTsKCQlpZiAoJG9iaiA9PT0gbnVsbCkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRp'));
	@fwrite($fp, base64_decode('b24oIkludmFsaWQgb2JqZWN0ICckaWQnIik7CgkJaWYgKCRvYmo6Om5zKCkgPT0gJ29pZCcpIHsKCQkJJG9pZCA9ICRvYmotPm5vZGVJZChmYWxzZSk7CgkJfSBlbHNlIHsKCQkJJG9pZCA9IG51bGw7CgkJCSRhbHRfaWRzID0gJG9iai0+Z2V0QWx0SWRzKCk7CgkJ'));
	@fwrite($fp, base64_decode('CWZvcmVhY2ggKCRhbHRfaWRzIGFzICRhbHRfaWQpIHsKCQkJCWlmICgkYWx0X2lkLT5nZXROYW1lc3BhY2UoKSA9PSAnb2lkJykgewoJCQkJCSRvaWQgPSAkYWx0X2lkLT5nZXRJZCgpOwoJCQkJCWJyZWFrOyAvLyB3ZSBwcmVmZXIgdGhlIGZpcnN0IE9JRCAoZm9y'));
	@fwrite($fp, base64_decode('IEdVSURzLCB0aGUgZmlyc3QgT0lEIGlzIHRoZSBPSURwbHVzLU9JRCwgYW5kIHRoZSBzZWNvbmQgT0lEIGlzIHRoZSBVVUlEIE9JRCkKCQkJCX0KCQkJfQoJCX0KCgkJaWYgKCFpc19udWxsKCRvaWQpKSB7CgkJCS8vIEZvciBPSURzLCBpdCBpcyB0aGUgT0lELCBm'));
	@fwrite($fp, base64_decode('b3Igb3RoZXIgaWRlbnRpZmllcnMKCQkJLy8gaXQgaXQgdGhlIE9JRCBhbHQgSUQgKGdlbmVyYXRlZCB1c2luZyB0aGUgU3lzdGVtSUQpCgkJCSRwYXRoIC49IHN0cl9yZXBsYWNlKCcuJywgJ18nLCAkb2lkKTsKCgkJfSBlbHNlIHsKCQkJLy8gQ2FuIGhhcHBlbiBp'));
	@fwrite($fp, base64_decode('ZiB5b3UgZG9uJ3QgaGF2ZSBhIHN5c3RlbSBJRCAoZHVlIHRvIG1pc3NpbmcgT3BlblNTTCBwbHVnaW4pCgkJCSRwYXRoIC49IG1kNSgkb2JqLT5ub2RlSWQodHJ1ZSkpOyAvLyB3ZSBkb24ndCB1c2UgJGlkLCBiZWNhdXNlICRvYmotPm5vZGVJZCh0cnVlKSBpcyBw'));
	@fwrite($fp, base64_decode('b3NzaWJseSBtb3JlIGNhbm9uaWNhbCB0aGFuICRpZAoJCX0KCgkJcmV0dXJuICRwYXRoOwoJfQoKCXByaXZhdGUgZnVuY3Rpb24gcmFNYXlEZWxldGUoKSB7CgkJcmV0dXJuIE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgnYXR0YWNobWVudHNfYWxsb3dfcmFf'));
	@fwrite($fp, base64_decode('ZGVsZXRlJywgMCk7Cgl9CgoJcHJpdmF0ZSBmdW5jdGlvbiByYU1heVVwbG9hZCgpIHsKCQlyZXR1cm4gT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdhdHRhY2htZW50c19hbGxvd19yYV91cGxvYWQnLCAwKTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gYWN0aW9u'));
	@fwrite($fp, base64_decode('KCYkaGFuZGxlZCkgewoKCQlpZiAoJF9SRVFVRVNUWydhY3Rpb24nXSA9PSAnZGVsZXRlQXR0YWNobWVudCcpIHsKCQkJJGhhbmRsZWQgPSB0cnVlOwoKCQkJJGlkID0gJF9QT1NUWydpZCddOwoJCQkkb2JqID0gT0lEcGx1c09iamVjdDo6cGFyc2UoJGlkKTsKCQkJ'));
	@fwrite($fp, base64_decode('aWYgKCRvYmogPT09IG51bGwpIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKCJJbnZhbGlkIG9iamVjdCAnJGlkJyIpOwoJCQlpZiAoISRvYmotPnVzZXJIYXNXcml0ZVJpZ2h0cygpKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigiQXV0aGVudGljYXRpb24g'));
	@fwrite($fp, base64_decode('ZXJyb3IuIFBsZWFzZSBsb2cgaW4gYXMgdGhlIFJBIG9mICckaWQnIHRvIHVwbG9hZCBhbiBhdHRhY2htZW50LiIpOwoKCQkJaWYgKCFPSURwbHVzOjphdXRoVXRpbHMoKTo6aXNBZG1pbkxvZ2dlZEluKCkgJiYgISR0aGlzLT5yYU1heURlbGV0ZSgpKSB7CgkJCQl0'));
	@fwrite($fp, base64_decode('aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigiVGhlIGFkbWluaXN0cmF0b3IgaGFzIGRpc2FibGVkIGRlbGV0aW5nIGF0dGFjaG1lbnRzIGJ5IFJBcy4iKTsKCQkJfQoKCQkJJHJlcV9maWxlbmFtZSA9ICRfUkVRVUVTVFsnZmlsZW5hbWUnXTsKCQkJaWYgKHN0cnBv'));
	@fwrite($fp, base64_decode('cygkcmVxX2ZpbGVuYW1lLCAnLycpICE9PSBmYWxzZSkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oIklsbGVnYWwgZmlsZSBuYW1lIik7CgkJCWlmIChzdHJwb3MoJHJlcV9maWxlbmFtZSwgJ1xcJykgIT09IGZhbHNlKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2Vw'));
	@fwrite($fp, base64_decode('dGlvbigiSWxsZWdhbCBmaWxlIG5hbWUiKTsKCQkJaWYgKHN0cnBvcygkcmVxX2ZpbGVuYW1lLCAnLi4nKSAhPT0gZmFsc2UpIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKCJJbGxlZ2FsIGZpbGUgbmFtZSIpOwoJCQlpZiAoc3RycG9zKCRyZXFfZmlsZW5hbWUs'));
	@fwrite($fp, base64_decode('IGNocigwKSkgIT09IGZhbHNlKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigiSWxsZWdhbCBmaWxlIG5hbWUiKTsKCgkJCSR1cGxvYWRkaXIgPSBzZWxmOjpnZXRVcGxvYWREaXIoJGlkKTsKCQkJJHVwbG9hZGZpbGUgPSAkdXBsb2FkZGlyIC4gJy8nIC4gYmFz'));
	@fwrite($fp, base64_decode('ZW5hbWUoJHJlcV9maWxlbmFtZSk7CgoJCQlpZiAoIWZpbGVfZXhpc3RzKCR1cGxvYWRmaWxlKSkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oIkZpbGUgZG9lcyBub3QgZXhpc3QiKTsKCQkJQHVubGluaygkdXBsb2FkZmlsZSk7CgkJCWlmIChmaWxlX2V4aXN0'));
	@fwrite($fp, base64_decode('cygkdXBsb2FkZmlsZSkpIHsKCQkJCSRtc2cgPSAiQXR0YWNobWVudCBmaWxlICciLmJhc2VuYW1lKCR1cGxvYWRmaWxlKS4iJyBjb3VsZCBub3QgYmUgZGVsZXRlZCBmcm9tIG9iamVjdCAnJG9pZCcgKHByb2JsZW0gd2l0aCBwZXJtaXNzaW9ucz8pIjsKCQkJCU9J'));
	@fwrite($fp, base64_decode('RHBsdXM6OmxvZ2dlcigpLT5sb2coIltFUlJdT0lEKCRpZCkrW0VSUl1BISIsICRtc2cpOwoJCQkJaWYgKE9JRHBsdXM6OmF1dGhVdGlscygpOjppc0FkbWluTG9nZ2VkSW4oKSkgewoJCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKCRtc2cpOwoJCQkJfSBl'));
	@fwrite($fp, base64_decode('bHNlIHsKCQkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigiJG1zZy4gUGxlYXNlIGNvbnRhY3QgdGhlIHN5c3RlbSBhZG1pbmlzdHJhdG9yLiIpOwoJCQkJfQoJCQl9CgoJCQlPSURwbHVzOjpsb2dnZXIoKS0+bG9nKCJbT0tdT0lEKCRpZCkrWz9JTkZPLyFP'));
	@fwrite($fp, base64_decode('S11PSURSQSgkaWQpPy9bP0lORk8vIU9LXUE/IiwgIkRlbGV0ZWQgYXR0YWNobWVudCAnIi5iYXNlbmFtZSgkdXBsb2FkZmlsZSkuIicgZnJvbSBvYmplY3QgJyRpZCciKTsKCgkJCWVjaG8ganNvbl9lbmNvZGUoYXJyYXkoInN0YXR1cyIgPT4gMCkpOwoJCX0KCgkJ'));
	@fwrite($fp, base64_decode('aWYgKCRfUkVRVUVTVFsnYWN0aW9uJ10gPT0gJ3VwbG9hZEF0dGFjaG1lbnQnKSB7CgkJCSRoYW5kbGVkID0gdHJ1ZTsKCgkJCSRpZCA9ICRfUE9TVFsnaWQnXTsKCQkJJG9iaiA9IE9JRHBsdXNPYmplY3Q6OnBhcnNlKCRpZCk7CgkJCWlmICgkb2JqID09PSBudWxs'));
	@fwrite($fp, base64_decode('KSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigiSW52YWxpZCBvYmplY3QgJyRpZCciKTsKCQkJaWYgKCEkb2JqLT51c2VySGFzV3JpdGVSaWdodHMoKSkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oIkF1dGhlbnRpY2F0aW9uIGVycm9yLiBQbGVhc2UgbG9n'));
	@fwrite($fp, base64_decode('IGluIGFzIHRoZSBSQSBvZiAnJGlkJyB0byB1cGxvYWQgYW4gYXR0YWNobWVudC4iKTsKCgkJCWlmICghT0lEcGx1czo6YXV0aFV0aWxzKCk6OmlzQWRtaW5Mb2dnZWRJbigpICYmICEkdGhpcy0+cmFNYXlVcGxvYWQoKSkgewoJCQkJdGhyb3cgbmV3IE9JRHBsdXNF'));
	@fwrite($fp, base64_decode('eGNlcHRpb24oIlRoZSBhZG1pbmlzdHJhdG9yIGhhcyBkaXNhYmxlZCB1cGxvYWRpbmcgYXR0YWNobWVudHMgYnkgUkFzLiIpOwoJCQl9CgoJCQlpZiAoIU9JRHBsdXM6OmF1dGhVdGlscygpOjppc0FkbWluTG9nZ2VkSW4oKSkgewoJCQkJJGJhbm5lZCA9IGV4cGxv'));
	@fwrite($fp, base64_decode('ZGUoJywnLCBPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ2F0dGFjaG1lbnRzX2Jsb2NrX2V4dGVuc2lvbnMnLCAnJykpOwoJCQkJZm9yZWFjaCAoJGJhbm5lZCBhcyAkZXh0KSB7CgkJCQkJJGV4dCA9IHRyaW0oJGV4dCk7CgkJCQkJaWYgKCRleHQgPT0gJycp'));
	@fwrite($fp, base64_decode('IGNvbnRpbnVlOwoJCQkJCWlmIChzdHJ0b2xvd2VyKHN1YnN0cihiYXNlbmFtZSgkX0ZJTEVTWyd1c2VyZmlsZSddWyduYW1lJ10pLCAtc3RybGVuKCRleHQpLTEpKSA9PSBzdHJ0b2xvd2VyKCcuJy4kZXh0KSkgewoJCQkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2Vw'));
	@fwrite($fp, base64_decode('dGlvbigiVGhlIGZpbGUgZXh0ZW5zaW9uICcuJGV4dCcgaXMgYmFubmVkIGJ5IHRoZSBhZG1pbmlzdHJhdG9yIChpdCBjYW4gYmUgdXBsb2FkZWQgYnkgdGhlIGFkbWluaXN0cmF0b3IgdGhvdWdoKSIpOwoJCQkJCX0KCQkJCX0KCQkJfQoKCQkJJHJlcV9maWxlbmFt'));
	@fwrite($fp, base64_decode('ZSA9ICRfRklMRVNbJ3VzZXJmaWxlJ11bJ25hbWUnXTsKCQkJaWYgKHN0cnBvcygkcmVxX2ZpbGVuYW1lLCAnLycpICE9PSBmYWxzZSkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oIklsbGVnYWwgZmlsZSBuYW1lIik7CgkJCWlmIChzdHJwb3MoJHJlcV9maWxl'));
	@fwrite($fp, base64_decode('bmFtZSwgJ1xcJykgIT09IGZhbHNlKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigiSWxsZWdhbCBmaWxlIG5hbWUiKTsKCQkJaWYgKHN0cnBvcygkcmVxX2ZpbGVuYW1lLCAnLi4nKSAhPT0gZmFsc2UpIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKCJJbGxl'));
	@fwrite($fp, base64_decode('Z2FsIGZpbGUgbmFtZSIpOwoJCQlpZiAoc3RycG9zKCRyZXFfZmlsZW5hbWUsIGNocigwKSkgIT09IGZhbHNlKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigiSWxsZWdhbCBmaWxlIG5hbWUiKTsKCgkJCSR1cGxvYWRkaXIgPSBzZWxmOjpnZXRVcGxvYWREaXIo'));
	@fwrite($fp, base64_decode('JGlkKTsKCQkJJHVwbG9hZGZpbGUgPSAkdXBsb2FkZGlyIC4gJy8nIC4gYmFzZW5hbWUoJHJlcV9maWxlbmFtZSk7CgoJCQlpZiAoIWlzX2RpcigkdXBsb2FkZGlyKSkgewoJCQkJQG1rZGlyKCR1cGxvYWRkaXIsIDA3NzcsIHRydWUpOwoJCQkJaWYgKCFpc19kaXIo'));
	@fwrite($fp, base64_decode('JHVwbG9hZGRpcikpIHsKCQkJCQkkbXNnID0gIlVwbG9hZCBhdHRhY2htZW50ICciLmJhc2VuYW1lKCR1cGxvYWRmaWxlKS4iJyB0byBvYmplY3QgJyRpZCcgZmFpbGVkOiBDYW5ub3QgY3JlYXRlIGRpcmVjdG9yeSAnIi5iYXNlbmFtZSgkdXBsb2FkZGlyKS4iJyAo'));
	@fwrite($fp, base64_decode('cHJvYmxlbSB3aXRoIHBlcm1pc3Npb25zPykiOwoJCQkJCU9JRHBsdXM6OmxvZ2dlcigpLT5sb2coIltFUlJdT0lEKCRpZCkrW0VSUl1BISIsICRtc2cpOwoJCQkJCWlmIChPSURwbHVzOjphdXRoVXRpbHMoKTo6aXNBZG1pbkxvZ2dlZEluKCkpIHsKCQkJCQkJdGhy'));
	@fwrite($fp, base64_decode('b3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oJG1zZyk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oIiRtc2cuIFBsZWFzZSBjb250YWN0IHRoZSBzeXN0ZW0gYWRtaW5pc3RyYXRvci4iKTsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJ'));
	@fwrite($fp, base64_decode('CWlmICghQG1vdmVfdXBsb2FkZWRfZmlsZSgkX0ZJTEVTWyd1c2VyZmlsZSddWyd0bXBfbmFtZSddLCAkdXBsb2FkZmlsZSkpIHsKCQkJCSRtc2cgPSAiVXBsb2FkIGF0dGFjaG1lbnQgJyIuYmFzZW5hbWUoJHVwbG9hZGZpbGUpLiInIHRvIG9iamVjdCAnJGlkJyBm'));
	@fwrite($fp, base64_decode('YWlsZWQ6IENhbm5vdCBtb3ZlIHVwbG9hZGVkIGZpbGUgaW50byBkaXJlY3RvcnkgKHByb2JsZW0gd2l0aCBwZXJtaXNzaW9ucz8pIjsKCQkJCU9JRHBsdXM6OmxvZ2dlcigpLT5sb2coIltFUlJdT0lEKCRpZCkrW0VSUl1BISIsICRtc2cpOwoJCQkJaWYgKE9JRHBs'));
	@fwrite($fp, base64_decode('dXM6OmF1dGhVdGlscygpOjppc0FkbWluTG9nZ2VkSW4oKSkgewoJCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKCRtc2cpOwoJCQkJfSBlbHNlIHsKCQkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigiJG1zZy4gUGxlYXNlIGNvbnRhY3QgdGhlIHN5'));
	@fwrite($fp, base64_decode('c3RlbSBhZG1pbmlzdHJhdG9yLiIpOwoJCQkJfQoJCQl9CgoJCQlPSURwbHVzOjpsb2dnZXIoKS0+bG9nKCJbT0tdT0lEKCRpZCkrWz9JTkZPLyFPS11PSURSQSgkaWQpPy9bP0lORk8vIU9LXUE/IiwgIlVwbG9hZGVkIGF0dGFjaG1lbnQgJyIuYmFzZW5hbWUoJHVw'));
	@fwrite($fp, base64_decode('bG9hZGZpbGUpLiInIHRvIG9iamVjdCAnJGlkJyIpOwoKCQkJZWNobyBqc29uX2VuY29kZShhcnJheSgic3RhdHVzIiA9PiAwKSk7CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBpbml0KCRodG1sPXRydWUpIHsKCQlPSURwbHVzOjpjb25maWcoKS0+cHJlcGFyZUNv'));
	@fwrite($fp, base64_decode('bmZpZ0tleSgnYXR0YWNobWVudHNfYmxvY2tfZXh0ZW5zaW9ucycsICdCbG9jayBmaWxlIG5hbWUgZXh0ZW5zaW9ucyBiZWluZyB1c2VkIGluIGZpbGUgYXR0YWNobWVudHMgKGNvbW1hIHNlcGFyYXRlZCknLCAnZXhlLHNjcixwaWYsYmF0LGNvbSx2YnMsY21kJywg'));
	@fwrite($fp, base64_decode('T0lEcGx1c0NvbmZpZzo6UFJPVEVDVElPTl9FRElUQUJMRSwgZnVuY3Rpb24oJHZhbHVlKSB7CgkJfSk7CgkJT0lEcGx1czo6Y29uZmlnKCktPnByZXBhcmVDb25maWdLZXkoJ2F0dGFjaG1lbnRzX2FsbG93X3JhX2RlbGV0ZScsICdBbGxvdyB0aGF0IFJBcyBkZWxl'));
	@fwrite($fp, base64_decode('dGUgZmlsZSBhdHRhY2htZW50cz8gKDA9bm8sIDE9eWVzKScsICcwJywgT0lEcGx1c0NvbmZpZzo6UFJPVEVDVElPTl9FRElUQUJMRSwgZnVuY3Rpb24oJHZhbHVlKSB7CgkJCWlmICghaXNfbnVtZXJpYygkdmFsdWUpIHx8ICgkdmFsdWUgPCAwKSB8fCAoJHZhbHVl'));
	@fwrite($fp, base64_decode('ID4gMSkpIHsKCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKCJQbGVhc2UgZW50ZXIgYSB2YWxpZCB2YWx1ZSAoMCBvciAxKS4iKTsKCQkJfQoJCX0pOwoJCU9JRHBsdXM6OmNvbmZpZygpLT5wcmVwYXJlQ29uZmlnS2V5KCdhdHRhY2htZW50c19hbGxvd19y'));
	@fwrite($fp, base64_decode('YV91cGxvYWQnLCAnQWxsb3cgdGhhdCBSQXMgdXBsb2FkIGZpbGUgYXR0YWNobWVudHM/ICgwPW5vLCAxPXllcyknLCAnMCcsIE9JRHBsdXNDb25maWc6OlBST1RFQ1RJT05fRURJVEFCTEUsIGZ1bmN0aW9uKCR2YWx1ZSkgewoJCQlpZiAoIWlzX251bWVyaWMoJHZh'));
	@fwrite($fp, base64_decode('bHVlKSB8fCAoJHZhbHVlIDwgMCkgfHwgKCR2YWx1ZSA+IDEpKSB7CgkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigiUGxlYXNlIGVudGVyIGEgdmFsaWQgdmFsdWUgKDAgb3IgMSkuIik7CgkJCX0KCQl9KTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZ3VpKCRp'));
	@fwrite($fp, base64_decode('ZCwgJiRvdXQsICYkaGFuZGxlZCkgewoJCS8vIE5vdGhpbmcKCX0KCglwdWJsaWMgZnVuY3Rpb24gcHVibGljU2l0ZW1hcCgmJG91dCkgewoJCS8vIE5vdGhpbmcKCX0KCglwdWJsaWMgZnVuY3Rpb24gdHJlZSgmJGpzb24sICRyYV9lbWFpbD1udWxsLCAkbm9uanM9'));
	@fwrite($fp, base64_decode('ZmFsc2UsICRyZXFfZ290bz0nJykgewoJCXJldHVybiBmYWxzZTsKCX0KCglwcml2YXRlIHN0YXRpYyBmdW5jdGlvbiBjb252ZXJ0X2ZpbGVzaXplKCRieXRlcywgJGRlY2ltYWxzID0gMil7CgkJJHNpemUgPSBhcnJheSgnQnl0ZXMnLCdLaUInLCdNaUInLCdHaUIn'));
	@fwrite($fp, base64_decode('LCdUaUInLCdQaUInLCdFaUInLCdaaUInLCdZaUInKTsKCQkkZmFjdG9yID0gZmxvb3IoKHN0cmxlbigkYnl0ZXMpIC0gMSkgLyAzKTsKCQlyZXR1cm4gc3ByaW50ZigiJS57JGRlY2ltYWxzfWYiLCAkYnl0ZXMgLyBwb3coMTAyNCwgJGZhY3RvcikpIC4gJyAnIC4g'));
	@fwrite($fp, base64_decode('QCRzaXplWyRmYWN0b3JdOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBpbXBsZW1lbnRzRmVhdHVyZSgkaWQpIHsKCQlpZiAoc3RydG9sb3dlcigkaWQpID09ICcxLjMuNi4xLjQuMS4zNzQ3Ni4yLjUuMi4zLjInKSByZXR1cm4gdHJ1ZTsgLy8gbW9kaWZ5Q29udGVudAoJ'));
	@fwrite($fp, base64_decode('CXJldHVybiBmYWxzZTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gbW9kaWZ5Q29udGVudCgkaWQsICYkdGl0bGUsICYkaWNvbiwgJiR0ZXh0KSB7CgkJLy8gSW50ZXJmYWNlIDEuMy42LjEuNC4xLjM3NDc2LjIuNS4yLjMuMgoKCQkkZmlsZXMgPSBnbG9iKHNlbGY6Omdl'));
	@fwrite($fp, base64_decode('dFVwbG9hZERpcigkaWQpLicvJy4nKicpOwoJCSRkb3Nob3cgPSBmYWxzZTsKCQkkb3V0cHV0ID0gJyc7CgkJJGZvdW5kX2ZpbGVzID0gZmFsc2U7CgoJCSRvYmogPSBPSURwbHVzT2JqZWN0OjpwYXJzZSgkaWQpOwoJCWlmICgkb2JqID09PSBudWxsKSB0aHJvdyBu'));
	@fwrite($fp, base64_decode('ZXcgT0lEcGx1c0V4Y2VwdGlvbigiSW52YWxpZCBvYmplY3QgJyRpZCciKTsKCQkkY2FuX3VwbG9hZCA9IE9JRHBsdXM6OmF1dGhVdGlscygpOjppc0FkbWluTG9nZ2VkSW4oKSB8fCAoJHRoaXMtPnJhTWF5VXBsb2FkKCkgJiYgJG9iai0+dXNlckhhc1dyaXRlUmln'));
	@fwrite($fp, base64_decode('aHRzKCkpOwoJCSRjYW5fZGVsZXRlID0gT0lEcGx1czo6YXV0aFV0aWxzKCk6OmlzQWRtaW5Mb2dnZWRJbigpIHx8ICgkdGhpcy0+cmFNYXlEZWxldGUoKSAmJiAkb2JqLT51c2VySGFzV3JpdGVSaWdodHMoKSk7CgoJCSRvdXRwdXQgLj0gJzxoMj5GaWxlIGF0dGFj'));
	@fwrite($fp, base64_decode('aG1lbnRzPC9oMj4nOwoJCSRvdXRwdXQgLj0gJzxkaXYgY2xhc3M9ImNvbnRhaW5lciBib3giPic7CgoJCWlmIChPSURwbHVzOjphdXRoVXRpbHMoKTo6aXNBZG1pbkxvZ2dlZEluKCkpIHsKCQkJJG91dHB1dCAuPSAnPHA+QWRtaW4gaW5mbzogVGhlIGRpcmVjdG9y'));
	@fwrite($fp, base64_decode('eSBpcyA8Yj4nLmh0bWxlbnRpdGllcyhzZWxmOjpnZXRVcGxvYWREaXIoJGlkKSkuJzwvYj48L3A+JzsKCQkJJGRvc2hvdyA9IHRydWU7CgkJfQoKCQkkb3V0cHV0IC49ICc8ZGl2IGlkPSJmaWxlYXR0YWNobWVudHNfdGFibGUiIGNsYXNzPSJ0YWJsZS1yZXNwb25z'));
	@fwrite($fp, base64_decode('aXZlIj4nOwoJCSRvdXRwdXQgLj0gJzx0YWJsZSBjbGFzcz0idGFibGUgdGFibGUtYm9yZGVyZWQgdGFibGUtc3RyaXBlZCI+JzsKCQkkb3V0cHV0IC49ICc8dHI+JzsKCQkkb3V0cHV0IC49ICc8dGg+RmlsZW5hbWU8L3RoPic7CgkJJG91dHB1dCAuPSAnPHRoPlNp'));
	@fwrite($fp, base64_decode('emU8L3RoPic7CgkJJG91dHB1dCAuPSAnPHRoPkZpbGUgdHlwZTwvdGg+JzsKCQkkb3V0cHV0IC49ICc8dGg+RG93bmxvYWQ8L3RoPic7CgkJaWYgKCRjYW5fZGVsZXRlKSAkb3V0cHV0IC49ICc8dGg+RGVsZXRlPC90aD4nOwoJCSRvdXRwdXQgLj0gJzwvdHI+JzsK'));
	@fwrite($fp, base64_decode('CQlmb3JlYWNoICgkZmlsZXMgYXMgJGZpbGUpIHsKCQkJaWYgKGlzX2RpcigkZmlsZSkpIGNvbnRpbnVlOwoKCQkJJG91dHB1dCAuPSAnPHRyPic7CgkJCSRvdXRwdXQgLj0gJzx0ZD4nLmh0bWxlbnRpdGllcyhiYXNlbmFtZSgkZmlsZSkpLic8L3RkPic7CgkJCSRv'));
	@fwrite($fp, base64_decode('dXRwdXQgLj0gJzx0ZD4nLmh0bWxlbnRpdGllcyhzZWxmOjpjb252ZXJ0X2ZpbGVzaXplKGZpbGVzaXplKCRmaWxlKSwgMCkpLic8L3RkPic7CgkJCSRsb29rdXBfZmlsZXMgPSBhcnJheShfX0RJUl9fLicvLi4vLi4vLi4vdXNlcmRhdGEvYXR0YWNobWVudHMvZmls'));
	@fwrite($fp, base64_decode('ZXR5cGVzLmNvbmYnLCBfX0RJUl9fLicvLi4vLi4vLi4vM3AvdnRzX2ZpbGVmb3JtYXRzL2ZpbGV0eXBlcy5sb2NhbCcsIF9fRElSX18uJy8uLi8uLi8uLi8zcC92dHNfZmlsZWZvcm1hdHMvZmlsZXR5cGVzLmNvbmYnKTsKCQkJJG91dHB1dCAuPSAnPHRkPicuaHRt'));
	@fwrite($fp, base64_decode('bGVudGl0aWVzKFZ0c0ZpbGVUeXBlRGV0ZWN0OjpnZXREZXNjcmlwdGlvbigkZmlsZSwgJGxvb2t1cF9maWxlcykpLic8L3RkPic7CgoJCQkkb3V0cHV0IC49ICcgICAgIDx0ZD48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgbmFtZT0iZG93bmxvYWRfJy5tZDUoJGZpbGUp'));
	@fwrite($fp, base64_decode('LiciIGlkPSJkb3dubG9hZF8nLm1kNSgkZmlsZSkuJyIgY2xhc3M9ImJ0biBidG4tc3VjY2VzcyBidG4teHMgZG93bmxvYWQiIG9uY2xpY2s9ImRvd25sb2FkQXR0YWNobWVudCgnLmpzX2VzY2FwZShPSURwbHVzOjp3ZWJwYXRoKF9fRElSX18pKS4nLCBjdXJyZW50'));
	@fwrite($fp, base64_decode('X25vZGUsJy5qc19lc2NhcGUoYmFzZW5hbWUoJGZpbGUpKS4nKSI+RG93bmxvYWQ8L2J1dHRvbj48L3RkPic7CgkJCWlmICgkY2FuX2RlbGV0ZSkgewoJCQkJJG91dHB1dCAuPSAnICAgICA8dGQ+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG5hbWU9ImRlbGV0ZV8nLm1k'));
	@fwrite($fp, base64_decode('NSgkZmlsZSkuJyIgaWQ9ImRlbGV0ZV8nLm1kNSgkZmlsZSkuJyIgY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi14cyBkZWxldGUiIG9uY2xpY2s9ImRlbGV0ZUF0dGFjaG1lbnQoY3VycmVudF9ub2RlLCcuanNfZXNjYXBlKGJhc2VuYW1lKCRmaWxlKSkuJykiPkRl'));
	@fwrite($fp, base64_decode('bGV0ZTwvYnV0dG9uPjwvdGQ+JzsKCQkJfQoKCQkJJG91dHB1dCAuPSAnPC90cj4nOwoJCQkkZG9zaG93ID0gdHJ1ZTsKCQkJJGZvdW5kX2ZpbGVzID0gdHJ1ZTsKCQl9CgoJCWlmICghJGZvdW5kX2ZpbGVzKSAkb3V0cHV0IC49ICc8dHI+PHRkIGNvbHNwYW49Iicu'));
	@fwrite($fp, base64_decode('KCRjYW5fZGVsZXRlID8gNSA6IDQpLiciPjxpPk5vIGF0dGFjaG1lbnRzPC9pPjwvdGQ+PC90cj4nOwoKCQkkb3V0cHV0IC49ICc8L3RhYmxlPjwvZGl2Pic7CgoJCWlmICgkY2FuX3VwbG9hZCkgewoJCQkkb3V0cHV0IC49ICc8Zm9ybSBvbnN1Ym1pdD0icmV0dXJu'));
	@fwrite($fp, base64_decode('IHVwbG9hZEF0dGFjaG1lbnRPblN1Ym1pdCh0aGlzKTsiIGVuY3R5cGU9Im11bHRpcGFydC9mb3JtLWRhdGEiIGlkPSJ1cGxvYWRBdHRhY2htZW50Rm9ybSI+JzsKCQkJJG91dHB1dCAuPSAnPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iaWQiIHZhbHVlPSInLmh0'));
	@fwrite($fp, base64_decode('bWxlbnRpdGllcygkaWQpLiciPic7CgkJCSRvdXRwdXQgLj0gJzxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9ImFjdGlvbiIgdmFsdWU9InVwbG9hZEF0dGFjaG1lbnQiPic7CgkJCSRvdXRwdXQgLj0gJzxkaXY+QWRkIGEgZmlsZSBhdHRhY2htZW50OjxpbnB1dCB0'));
	@fwrite($fp, base64_decode('eXBlPSJmaWxlIiBuYW1lPSJ1c2VyZmlsZSIgdmFsdWU9IiIgaWQ9ImZpbGVBdHRhY2htZW50Ij4nOwoJCQkkb3V0cHV0IC49ICc8YnI+PGlucHV0IHR5cGU9InN1Ym1pdCIgdmFsdWU9IlVwbG9hZCI+PC9kaXY+JzsKCQkJJG91dHB1dCAuPSAnPC9mb3JtPic7CgkJ'));
	@fwrite($fp, base64_decode('CSRkb3Nob3cgPSB0cnVlOwoJCX0KCgkJJG91dHB1dCAuPSAnPC9kaXY+JzsKCgkJaWYgKCRkb3Nob3cpICR0ZXh0IC49ICRvdXRwdXQ7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHRyZWVfc2VhcmNoKCRyZXF1ZXN0KSB7CgkJcmV0dXJuIGZhbHNlOwoJfQp9Cg=='));
	@fclose($fp);
}
if (!is_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php')) {
	warn('File has vanished! Will re-create it: plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
	writefile_5();
	if (!is_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php')) {
		warn('File cannot be created (not existing): plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
	} else if (sha1_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php') != '1256848f682897f9ae0533a19fa0bd58214fedea') {
		warn('File cannot be created (checksum mismatch): plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php', 0644)) {
		warn('Could not change file permissions of plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
	}
} else {
	if (@sha1_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php') !== '1256848f682897f9ae0533a19fa0bd58214fedea') {
		if (@sha1_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php') !== '00e82cf2121f6164f3425339b254461fad5736c3') {
			warn('File was modified. Will overwrite the changes now: plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
			$tmp = pathinfo('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_5();
		if (@sha1_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php') !== '1256848f682897f9ae0533a19fa0bd58214fedea') {
			warn('File cannot be written (checksum mismatch): plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
		}
	}
}

// Files different: userdata/info.txt
function writefile_6() {
	@$fp = fopen('userdata/info.txt', 'w');
	@fwrite($fp, base64_decode('ClRoZSBmb2xkZXIgInVzZXJkYXRhIiBjb250YWlucyB2YXJpb3VzIGZpbGVzIHRoYXQgYXJlIHVuaXF1ZQpmb3IgeW91ciBPSURwbHVzIGluc3RhbGxhdGlvbi4gV2l0aCBhIGZldyBleGNlcHRpb25zIChsaWtlIHRoaXMgZmlsZSksCnRoZSBmb2xkZXIgY29udGVu'));
	@fwrite($fp, base64_decode('dHMgYXJlIHNhZmUgZnJvbSBiZWluZyBhY2NpZGVudGFsbHkgY2hhbmdlZCBvcgpkZWxldGVkIGJ5IFNWTiB1cGRhdGVzLgoKU2luY2UgdGhpcyBmb2xkZXIgY2FuIGFsc28gY29udGFpbiBzZW5zaXRpdmUgaW5mb3JtYXRpb24KbGlrZSBsb2cgZmlsZXMgb3IgYSBT'));
	@fwrite($fp, base64_decode('UUxpdGUgZGF0YWJhc2UsIHRoZSBhY2Nlc3MgdG8gdGhpcwpkaXJlY3RvcnkgbXVzdCBiZSByZXN0cmljdGVkLiBUaGVyZWZvcmUsIHBsZWFzZSBtYWtlIHN1cmUKdGhhdCB5b3VyIHdlYnNlcnZlciAoZS5nLiBBcGFjaGUpIGRvZXMgbm90IGFsbG93IGFjY2Vzcwp0'));
	@fwrite($fp, base64_decode('byB0aGlzIGRpcmVjdG9yeS4KSWYgdGhlIGFjY2VzcyBpcyBub3QgZGVuaWVkLCBwbGVhc2UgY2hlY2sgLmh0YWNjZXNzIChmb3IgQXBhY2hlKSwKbmdpbnguY29uZiAoZm9yIE5naW54KSBvciB3ZWIuY29uZmlnIChmb3IgTWljcm9zb2Z0IElJUykuCgpWYXJpb3Vz'));
	@fwrite($fp, base64_decode('IHBsdWdpbnMgY2FuIHB1dCB0aGVpciBkYXRhIGluIHRoaXMgZGlyZWN0b3J5LgpIZXJlIGlzIGEgbGlzdCBvZiB0eXBpY2FsIHN1Yi1mb2xkZXJzOgoKCkZvbGRlciAiYXR0YWNobWVudHMiCi0tLS0tLS0tLS0tLS0tLS0tLS0tCgpVc2VkIGJ5IHRoZSBwbHVnaW4g'));
	@fwrite($fp, base64_decode('InB1YmxpY1BhZ2VzLzA5NV9hdHRhY2htZW50cyIuCgpDb250ZW50czoKLSB1c2VyZGF0YS9hdHRhY2htZW50cy9maWxldHlwZXMuY29uZiAob3B0aW9uYWwpIHRvIGRlZmluZS9vdmVyd3JpdGUgZmlsZWZvcm1hdCBkZXNjcmlwdGlvbnMgcGxhY2VkIGluIDNwL3Z0'));
	@fwrite($fp, base64_decode('c19maWxlZm9ybWF0cy9maWxldHlwZXMuY29uZgotIEZvbGRlcnMgd2l0aCBhdHRhY2htZW50cyB1c2VycyBoYXZlIHVwbG9hZGVkLgoKCUV4YW1wbGUgZm9yIGZvbGRlciBuYW1lczoKCQlvaWRfMl85OTk6IGZvciBhIG5vcm1hbCBPSUQKCQlvaWRfMV8zXzZfMV80'));
	@fwrite($fp, base64_decode('XzFfMzc0NzZfMzBfOV88c3lzaWQ+XzxzbWFsbGhhc2g+OiBmb3IgYSBub24tT0lEIG9iamVjdAoJSWYgeW91ciBzeXN0ZW0gZG9lcyBub3QgaGF2ZSBhIHB1YmxpYyBrZXkgLyBzeXN0ZW0gSUQgKGUuZy4gYmVjYXVzZSBvZiBtaXNzaW5nIE9wZW5TU0wsIHRoZSBu'));
	@fwrite($fp, base64_decode('YW1lcyBhcmUKCQlvaWRfMl85OTk6IGZvciBhIG5vcm1hbCBPSUQKCQlvaWRfMl8yNV88Li4uPjogZm9yIGEgR1VJRAoJCTxtZDVoYXNoPjogZm9yIG90aGVyIG5vbi1PSUQgb2JqZWN0cwoKSW4gb3JkZXIgZm9yIHRoZSBmaWxlIGF0dGFjaG1lbnQgdXBsb2FkIHRv'));
	@fwrite($fp, base64_decode('IHdvcmssCnlvdSBuZWVkIHRvIGFkanVzdCB0aGUgZm9sZGVyIHBlcm1pc3Npb25zLgpGb3IgZXhhbXBsZSwgb24gTGludXggImNob3duIiB0byB0aGUgdXNlciAid3d3LWRhdGEiIG9yICJjaG1vZCIgdG8gIjA3NzciLgoKCkZvbGRlciAiYmFzZWNvbmZpZyIKLS0t'));
	@fwrite($fp, base64_decode('LS0tLS0tLS0tLS0tLS0tLQoKVGhlIGZvbGRlciAiYmFzZWNvbmZpZyIgY29udGFpbnMgdGhlIGZpbGUgImNvbmZpZy5pbmMucGhwIiB3aGljaCBkZWZpbmVzCmltcG9ydGFudCBzdGF0aWMgc2V0dGluZ3MgbGlrZSB0aGUgZGF0YWJhc2UgY29ubmVjdGlvbiBjcmVk'));
	@fwrite($fp, base64_decode('ZW50aWFscyBvcgpzZWN1cml0eSBrZXlzIChSZUNhcHRjaGEpIGV0Yy4KU2V0dXAgKC9zZXR1cC8pIHdpbGwgc2hvdyBhc3Npc3QgeW91IGluIGNyZWF0aW5nIHRoaXMgY29uZmlnLmluYy5waHAgZmlsZS4KCgpGb2xkZXIgImRhdGFiYXNlIgotLS0tLS0tLS0tLS0t'));
	@fwrite($fp, base64_decode('LS0tLQoKVGhpcyBmb2xkZXIgY2FuIGJlIHVzZWQgdG8gc3RvcmUgYSBTUUxpdGUgZGF0YWJhc2UuClRoZSBkZWZhdWx0IGRhdGFiYXNlIG5hbWUgaXMiIG9pZHBsdXMuZGIiCgoKRm9sZGVyICJmYXZpY29uIgotLS0tLS0tLS0tLS0tLS0tCgpJZiB0aGUgZmlsZSBm'));
	@fwrite($fp, base64_decode('YXZpY29uLmljbyBpcyBleGlzdGluZywgaXQgd2lsbCBiZSBjaG9zZW4gaW5zdGVhZCBvZiBpbWcvZmF2aWNvbi5pY28KCgpGb2xkZXIgImxvZ3MiCi0tLS0tLS0tLS0tLS0KCkNvbnRhaW5zIHRoZSBmaWxlIG9pZHBsdXMubG9nIGNyZWF0ZWQgYnkgcGx1Z2luICJs'));
	@fwrite($fp, base64_decode('b2dnZXIvMzAwX3VzZXJkYXRhX2xvZ2ZpbGUiLgpIYXZpbmcgbG9nIG1lc3NhZ2VzIHN0b3JlZCBpbiB0aGUgbG9nIGZpbGVzIG1ha2VzCnByb2Nlc3Npbmcgb2YgZGF0YSBlYXNpZXIuIEZvciBleGFtcGxlIHlvdSBjYW4gdXNlICJmYWlsMmJhbiIgdG8KYW5hbHl6'));
	@fwrite($fp, base64_decode('ZSB0aGUgbG9nIGZpbGUgYW5kIGF1dG9tYXRpY2FsbHkgYmFuIElQIGFkZHJlc3NlcyBvZiBuZXR3b3Jrcwp0aGF0IHRyeSB0byBicnV0ZSBmb3JjZSBhbiB1c2VyIGFjY291bnQgcGFzc3dvcmQuCgpOb3RlOgotIE1ha2Ugc3VyZSB0aGF0IG9pZHBsdXMubG9nIGNh'));
	@fwrite($fp, base64_decode('biBiZSB3cml0dGVuIGJ5IHlvdXIgd2Vic2VydmVyIChlLmcuIEFwYWNoZSkuCi0gWW91IGNhbiBzaHJpbmsgdGhlIHNpemUgb2Ygb2lkcGx1cy5sb2cgYnkgdXNpbmcgbG9ncm90YXRlIChvbmx5IExpbnV4KQoKCkZvbGRlciAicmVzb3VyY2VzIgotLS0tLS0tLS0t'));
	@fwrite($fp, base64_decode('LS0tLS0tLS0KClRoaXMgZm9sZGVyIGlzIHVzZWQgYnkgdGhlIHBsdWdpbiAicHVibGljUGFnZXMvNTAwX3Jlc291cmNlcyIKKFNlY3Rpb24gIkRvY3VtZW50cyBhbmQgcmVzb3VyY2VzIikKCkl0cyBjb250ZW50cyB3aWxsIGJlIG1lcmdlZCB3aXRoICJyZXMvIiBm'));
	@fwrite($fp, base64_decode('cm9tIHRoZSByb290IGRpcmVjdG9yeS4KInJlcy8iIGNvbnRhaW5zIHRoZSBkZWZhdWx0IHJlc291cmNlcyB3aGljaCBhcmUgcGFydCBvZiB0aGUgT0lEcGx1cwptYWluIGluc3RhbGxhdGlvbiAoeW91IHNoYWxsIG5vdCBjaGFuZ2Ugb3IgYWRkIGFueXRoaW5nIHRv'));
	@fwrite($fp, base64_decode('IHRoYXQgZm9sZGVyKSwKd2hpbGUgInVzZXJkYXRhL3Jlc291cmNlcyIgY29udGFpbnMgcmVzb3VyY2VzIHRoYXQgeW91IGFkZCB5b3Vyc2VsZgooZS5nLiB5b3VyIGltcHJlc3MsIHByaXZhY3kgc3RhdGVtZW50LCBhZGRpdGlvbmFsIHJlc291cmNlcywKaHlwZXJs'));
	@fwrite($fp, base64_decode('aW5rcyB0byB5b3VyIHdlYnNpdGVzIGFuZCBwcm9kdWN0cywgZXRjLikKClZhbGlkIGNvbnRlbnRzOgotIFN1YiBmb2xkZXJzCi0gKi51cmwgZmlsZXMgKHdpbGwgYmUgY29udmVydGVkIHRvIGEgaHlwZXJsaW5rIGluIHRoZSBtZW51IG9uIHRoZSBsZWZ0KQotICou'));
	@fwrite($fp, base64_decode('aHRtbCBmaWxlcyAodGhlIEhUTUwgaGVhZGxpbmUgd2lsbCBkZWZpbmUgdGhlIHRpdGxlIG9mIHRoZSBtZW51IGVudHJ5KQotIFlvdSBjYW4gZGVmaW5lIGN1c3RvbSBpY29ucyBmb3IgYW55IHJlc291cmNlIGJ5IHBsYWNpbmcgdGhlIGZpbGVzIC4uLl9iaWcucG5n'));
	@fwrite($fp, base64_decode('IGFuZCAuLi5fdHJlZS5wbmcKCgpGb2xkZXIgIndlbGNvbWUiCi0tLS0tLS0tLS0tLS0tLS0KClRoZSBmb2xkZXIgIndlbGNvbWUiIGNvbnRhaW5zIHRoZSBmaWxlICJ3ZWxjb21lLmh0bWwiLAp3aGljaCBpcyB0aGUgZnJvbnQgcGFnZSBzaG93biBieSB0aGUgcGx1'));
	@fwrite($fp, base64_decode('Z2luICJwdWJsaWNQYWdlcy8wMDBfb2JqZWN0cyIuCllvdSBtYXkgZWRpdCB0aGlzIGZpbGUgdG8gb3ZlcndyaXRlIHRoZSBkZWZhdWx0IHdlbGNvbWUgcGFnZS4KUGxlYXNlIG5vdGU6Ci0gU2luY2UgdXNlcmRhdGEvIGlzIGEgcHJvdGVjdGVkIGRpcmVjdG9yeSwK'));
	@fwrite($fp, base64_decode('ICB5b3UgY2Fubm90IHBsYWNlIHJlc291cmNlcyAoaW1hZ2VzLCBjc3MgZXRjLikgdGhlcmUuCi0gQWx0aG91Z2ggdGhlIGZpbGUgZXh0ZW5zaW9uIGlzICIuaHRtbCIsIGl0IG1heSBvbmx5IGNvbnRhaW4gcGxhaW4KICBIVE1MIGRhdGEgKHdpdGhvdXQgaGVhZCBv'));
	@fwrite($fp, base64_decode('ciBib2R5KS4K'));
	@fclose($fp);
}
if (!is_file('userdata/info.txt')) {
	warn('File has vanished! Will re-create it: userdata/info.txt');
	writefile_6();
	if (!is_file('userdata/info.txt')) {
		warn('File cannot be created (not existing): userdata/info.txt');
	} else if (sha1_file('userdata/info.txt') != '764cd68bdb5366fd34f2a92ba9fbf2c11d015a28') {
		warn('File cannot be created (checksum mismatch): userdata/info.txt');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('userdata/info.txt', 0644)) {
		warn('Could not change file permissions of userdata/info.txt');
	}
} else {
	if (@sha1_file('userdata/info.txt') !== '764cd68bdb5366fd34f2a92ba9fbf2c11d015a28') {
		if (@sha1_file('userdata/info.txt') !== '16468da54f44fb7bbe0f102015a3632a0561fef7') {
			warn('File was modified. Will overwrite the changes now: userdata/info.txt');
			$tmp = pathinfo('userdata/info.txt');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('userdata/info.txt')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('userdata/info.txt', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_6();
		if (@sha1_file('userdata/info.txt') !== '764cd68bdb5366fd34f2a92ba9fbf2c11d015a28') {
			warn('File cannot be written (checksum mismatch): userdata/info.txt');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 314\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 314') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

