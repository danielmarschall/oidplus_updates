<?php /* <ViaThinkSoftSignature>
ZI62e2bZQ7r2h506kPR0Sp688lc+Oku12rskcYpVRLxggfavrwbXrEhE3Mic42e7K
7luW4vY2jYkZmpQ/sDSnQjJiaZNzec2vaSnIgLSGLRd+43Zz8qeKR6Re2yrp2zYdL
gNw39L/O6hifD1I23gaOObYfF3VNDJc+iDGoCYYOUakQ/FZ6kXKcrB9rRByMA/frG
/MU0rUZjqEk8SV/0mKh5/pUxsqh7vMXtGVo0wqbWLT+8vYMjs+hg6mchn0f9G8lS5
uH90oeZEPmnZoBbtpSM/9XVnWe8LQ7GZRkTjA7h0Ulw5ZkUxpIgJNw3gNEZ9hMu51
MrjDaUfANYiB0wuPRTwwhEMfdan0TecTNGOKWzl/NHKIwYSMNWUrzahSDqfyyULsP
xOWmQ4LNrB4Z1FfpkrflZM0OR0sivmz/ckBtWXF9BYHbbck9xb51bWpad/kMfijpT
z/931lJLsWsVaJW2Qq6rETFKpxzvjqo+UwfDUBAnBh7ejNTuJHv/eaaQArFDk2a5K
TR6h/3PX/RpATeqYSrvFNtBDH0P5UXGpAY59EicNCqPstuB3Zw+7N4Av2MvlU50tL
PVbsYdWJhxRbkHTPda49HJHDbcXEqzsENeAkw9UaaW+180LQE4hFpnAx9cFwj4OM2
gDBbFw1KSLSqW2nQ/Fe2VuCJj3rtvvisS0dXjgkxKBzgNQSuZWmu8e5EfVvl97TfW
XiLcP+aMao/MpACIfzfbdiuaM10PC0XdcpYEmCBvo6W7alM4tPAcBCRWorVmiC5na
c+fWPUtymFlBH6gg6q6o83GaiI4JUx0CYa6DnACg+30lYKFrW63Q7SVP333gFaZ3z
MQmz6gtEV21n+q2/pSrHNimmEI9eet19BBPonN4Oz52oY62Iwsbyq+UvQurth9Lle
VufXVqNpXcJa6CpmcIzzKb86FDljR/nDQ57Dk78uUTvTnJzoS5OU/NrTz4FhFBZ8X
SpNMC+nIUDCwUrlHaQrBSBgjap3xQsGorrGI1mkSn+aB7fqJFgQB7QIeW3fwKqjcr
7/c9wSJOgmqEHxfcOg/VF8Qalv4icNsLznSotHyUNXnBzde6J/3UXklUiCadrSVa1
7YG1NMzPRi3fT34MZPUbADAnfrXSGhTKn3b2i4arl84FfcYCsu0Eboz2WoymX2d25
AN0T1ycPWNCxZETbgLNd7FCKDl/hSsSqtiqvNlD/NU03J9KOhHp6ZEHLDvoCMifib
w2LMs3B6oTuK9OXsUuXWZVldf7ZUT2kcnqr8zdburPSRq99Pe3IyADzQ0QfxbJREw
/2ezWBwkgFXHtlM+t0PgrEkkEIFeX/EdsK47ZNLvIOhi1MJKtsh4qV9ODydwb8C0P
g==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 120') {
	err('This update can only be applied to OIDplus version 2.0.0.120!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: includes/functions.inc.php
function writefile_1() {
	@$fp = fopen('includes/functions.inc.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmZ1bmN0aW9uIG9pZHBsdXNfdmFsaWRfZW1haWwoJGVtYWlsKSB7CglyZXR1cm4gIWVtcHR5KGZpbHRlcl92YXIoJGVtYWlsLCBGSUxURVJfVkFMSURBVEVfRU1BSUwpKTsKfQoKZnVuY3Rpb24gb2lk'));
	@fwrite($fp, base64_decode('cGx1c19saW5rKCRnb3RvKSB7CglyZXR1cm4gJ2hyZWY9Ij9nb3RvPScudXJsZW5jb2RlKCRnb3RvKS4nIiBvbmNsaWNrPSJvcGVuT2lkSW5QYW5lbCgnLmpzX2VzY2FwZSgkZ290bykuJywgdHJ1ZSk7IHJldHVybiBmYWxzZTsiJzsKfQoKZnVuY3Rpb24gc2VjdXJl'));
	@fwrite($fp, base64_decode('X2VtYWlsKCRlbWFpbCwgJGxpbmt0ZXh0LCAkbGV2ZWw9MSkgewoKCS8vIHNlZSBodHRwOi8vd3d3LnNwYW1zcGFuLmRlLwoKCS8qIExldmVsIDEgKi8KCS8qCgk8c3BhbiBjbGFzcz0ic3BhbXNwYW4iPgoJPHNwYW4gY2xhc3M9InUiPnVzZXI8L3NwYW4+CglACgk8'));
	@fwrite($fp, base64_decode('c3BhbiBjbGFzcz0iZCI+YmVpc3BpZWwuZGU8L3NwYW4+CgkoPHNwYW4gY2xhc3M9InQiPlNwYW0gSGFzc2VyPC9zcGFuPikKCTwvc3Bhbj4KCSovCgoJaWYgKCRsZXZlbCA9PSAxKSB7CgkJQGxpc3QoJHVzZXIsICRkb21haW4pID0gZXhwbG9kZSgnQCcsICRlbWFp'));
	@fwrite($fp, base64_decode('bCk7CgkJaWYgKCgkbGlua3RleHQgPT0gJGVtYWlsKSB8fCBlbXB0eSgkbGlua3RleHQpKSB7CgkJCXJldHVybiAnPHNwYW4gY2xhc3M9InNwYW1zcGFuIj48c3BhbiBjbGFzcz0idSI+Jy5odG1sZW50aXRpZXMoJHVzZXIpLic8L3NwYW4+JiM2NDs8c3BhbiBjbGFz'));
	@fwrite($fp, base64_decode('cz0iZCI+Jy5odG1sZW50aXRpZXMoJGRvbWFpbikuJzwvc3Bhbj48L3NwYW4+JzsKCQl9IGVsc2UgewoJCQlyZXR1cm4gJzxzcGFuIGNsYXNzPSJzcGFtc3BhbiI+PHNwYW4gY2xhc3M9InUiPicuaHRtbGVudGl0aWVzKCR1c2VyKS4nPC9zcGFuPiYjNjQ7PHNwYW4g'));
	@fwrite($fp, base64_decode('Y2xhc3M9ImQiPicuaHRtbGVudGl0aWVzKCRkb21haW4pLic8L3NwYW4+KDxzcGFuIGNsYXNzPSJ0Ij4nLmh0bWxlbnRpdGllcygkbGlua3RleHQpLic8L3NwYW4+KTwvc3Bhbj4nOwoJCX0KCX0KCgkvKiBMZXZlbCAyICovCgkvKgoJPHNwYW4gY2xhc3M9InNwYW1z'));
	@fwrite($fp, base64_decode('cGFuIj4KCQk8c3BhbiBjbGFzcz0idSI+dXNlcjwvc3Bhbj4KCQk8aW1nIGFsdD0iYXQiIHdpZHRoPSIxMCIgc3JjPSJALnBuZyI+CgkJPHNwYW4gY2xhc3M9ImQiPmJlaXNwaWVsLmRlPC9zcGFuPgoJPC9zcGFuPgoJKi8KCglpZiAoJGxldmVsID09IDIpIHsKCQls'));
	@fwrite($fp, base64_decode('aXN0KCR1c2VyLCAkZG9tYWluKSA9IGV4cGxvZGUoJ0AnLCAkZW1haWwpOwoJCXJldHVybiAnPHNwYW4gY2xhc3M9InNwYW1zcGFuIj48c3BhbiBjbGFzcz0idSI+Jy5odG1sZW50aXRpZXMoJHVzZXIpLic8L3NwYW4+PGltZyBhbHQ9ImF0IiB3aWR0aD0iMTAiIHNy'));
	@fwrite($fp, base64_decode('Yz0iQC5wbmciPjxzcGFuIGNsYXNzPSJkIj4nLmh0bWxlbnRpdGllcygkZG9tYWluKS4nPC9zcGFuPjwvc3Bhbj4nOwoJfQoKCS8qIExldmVsIDMgKi8KCS8qCgk8c3BhbiBjbGFzcz0ic3BhbXNwYW4iPgoJCTxzcGFuIGNsYXNzPSJ1Ij51c2VyPC9zcGFuPgoJCVth'));
	@fwrite($fp, base64_decode('dF0KCQk8c3BhbiBjbGFzcz0iZCI+YmVpc3BpZWwgW2RvdF0gZGU8L3NwYW4+Cgk8L3NwYW4+CgkqLwoKCWlmICgkbGV2ZWwgPT0gMykgewoJCWxpc3QoJHVzZXIsICRkb21haW4pID0gZXhwbG9kZSgnQCcsICRlbWFpbCk7CgkJJGRvbWFpbiA9IHN0cl9yZXBsYWNl'));
	@fwrite($fp, base64_decode('KCcuJywgJyBbZG90XSAnLCAkZG9tYWluKTsKCQlyZXR1cm4gJzxzcGFuIGNsYXNzPSJzcGFtc3BhbiI+PHNwYW4gY2xhc3M9InUiPicuaHRtbGVudGl0aWVzKCR1c2VyKS4nPC9zcGFuPiBbYXRdIDxzcGFuIGNsYXNzPSJkIj4nLmh0bWxlbnRpdGllcygkZG9tYWlu'));
	@fwrite($fp, base64_decode('KS4nPC9zcGFuPjwvc3Bhbj4nOwoJfQoKCXJldHVybiBudWxsOwoKCgkvLyAtLS0gT2xkIGNvZGUgLS0tCgoJLy8gQXR0ZW50aW9uOiBkb2N1bWVudC53cml0ZSgpIEphdmFTY3JpcHQgd2lsbCBkYW1hZ2UgdGhlIGJyb3dzZXIgY2FjaGUsIHdoaWNoIGxlYWRzIHRv'));
	@fwrite($fp, base64_decode('IGJ1Z3MgaWYgeW91IG5hdmlnYXRlIGJhY2smZm9ydGggd2l0aCB0aGUgYnJvd3NlciBuYXZpZ2F0aW9uCgoJLy8gTm8gbmV3IGxpbmVzIHRvIGF2b2lkIGEgSmF2YVNjcmlwdCBlcnJvciEKCSRsaW5rdGV4dCA9IHN0cl9yZXBsYWNlKCJcciIsICcgJywgJGxpbmt0'));
	@fwrite($fp, base64_decode('ZXh0KTsKCSRsaW5rdGV4dCA9IHN0cl9yZXBsYWNlKCJcbiIsICcgJywgJGxpbmt0ZXh0KTsKCglpZiAoIWZ1bmN0aW9uX2V4aXN0cygnYWxhc19qc19jcnlwdCcpKQoJewoJCWZ1bmN0aW9uIGFsYXNfanNfY3J5cHQoJHRleHQpCgkJewoJCQkkdG1wID0gJyc7CgkJ'));
	@fwrite($fp, base64_decode('CWZvciAoJGk9MDsgJGk8c3RybGVuKCR0ZXh0KTsgJGkrKykKCQkJewoJCQkJJHRtcCAuPSAnZG9jdW1lbnQud3JpdGUoIiYjJy5vcmQoc3Vic3RyKCR0ZXh0LCAkaSwgMSkpLic7Iik7JzsKCQkJfQoJCQlyZXR1cm4gJHRtcDsKCQl9Cgl9CgoJaWYgKCFmdW5jdGlv'));
	@fwrite($fp, base64_decode('bl9leGlzdHMoJ2FsYXNfanNfd3JpdGUnKSkKCXsKCQlmdW5jdGlvbiBhbGFzX2pzX3dyaXRlKCR0ZXh0KQoJCXsKCQkJJHRleHQgPSBzdHJfcmVwbGFjZSgnXFwnLCAnXFxcXCcsICR0ZXh0KTsKCQkJJHRleHQgPSBzdHJfcmVwbGFjZSgnIicsICdcIicsICR0ZXh0'));
	@fwrite($fp, base64_decode('KTsKCQkJJHRleHQgPSBzdHJfcmVwbGFjZSgnLycsICdcLycsICR0ZXh0KTsgLy8gVzNDIFZhbGlkYXRpb24gPC9hPiAtPiA8XC9hPgoJCQlyZXR1cm4gJ2RvY3VtZW50LndyaXRlKCInLiR0ZXh0LiciKTsnOwoJCX0KCX0KCgkkYXVzID0gJyc7CglpZiAoJGVtYWls'));
	@fwrite($fp, base64_decode('ICE9ICcnKQoJewoJCSRhdXMgLj0gJzxzY3JpcHQ+PCEtLScuIlxuIjsgLy8gdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBpcyBub3QgbmVjZXNzYXJ5IGluIEhUTUw1CgkJJGF1cyAuPSBhbGFzX2pzX3dyaXRlKCc8YSBocmVmPSInKTsKCQkkYXVzIC49IGFsYXNfanNf'));
	@fwrite($fp, base64_decode('Y3J5cHQoJ21haWx0bzonLiRlbWFpbCk7CgkJJGF1cyAuPSBhbGFzX2pzX3dyaXRlKCciPicpOwoJCSRhdXMgLj0gJGNyeXB0X2xpbmt0ZXh0ID8gYWxhc19qc19jcnlwdCgkbGlua3RleHQpIDogYWxhc19qc193cml0ZSgkbGlua3RleHQpOwoJCSRhdXMgLj0gYWxh'));
	@fwrite($fp, base64_decode('c19qc193cml0ZSgnPC9hPicpLicvLyAtLT48L3NjcmlwdD4nOwoJfQoKCWlmICgkY3J5cHRfbGlua3RleHQpICRsaW5rdGV4dCA9IHN0cl9yZXBsYWNlKCdAJywgJyYnLCAkbGlua3RleHQpOwoJJGVtYWlsID0gc3RyX3JlcGxhY2UoJ0AnLCAnJicsICRlbWFpbCk7'));
	@fwrite($fp, base64_decode('CglyZXR1cm4gJGF1cy4nPG5vc2NyaXB0PicuaHRtbGVudGl0aWVzKCRsaW5rdGV4dCkuJyAoJy5odG1sZW50aXRpZXMoJGVtYWlsKS4nKTwvbm9zY3JpcHQ+JzsKfQoKZnVuY3Rpb24gaW5zZXJ0V2hpdGVzcGFjZSgkc3RyLCAkaW5kZXgpIHsKCXJldHVybiBzdWJz'));
	@fwrite($fp, base64_decode('dHIoJHN0ciwgMCwgJGluZGV4KSAuICcgJyAuIHN1YnN0cigkc3RyLCAkaW5kZXgpOwp9CgpmdW5jdGlvbiBqc19lc2NhcGUoJGRhdGEpIHsKCS8vIFRPRE8uLi4uIGpzb25fZW5jb2RlPz8KCXJldHVybiAiJyIgLiBzdHJfcmVwbGFjZSgnXFwnLCAnXFxcXCcsICRk'));
	@fwrite($fp, base64_decode('YXRhKSAuICInIjsKfQoKZnVuY3Rpb24gb2lkcGx1c19mb3JtYXRkYXRlKCRkYXRlKSB7CgkkZGF0ZSA9IGV4cGxvZGUoJyAnLCAkZGF0ZSlbMF07CglpZiAoJGRhdGUgPT0gJzAwMDAtMDAtMDAnKSAkZGF0ZSA9ICcnOwoJcmV0dXJuICRkYXRlOwp9CgoKY2xhc3Mg'));
	@fwrite($fp, base64_decode('TWFpbEV4Y2VwdGlvbiBleHRlbmRzIEV4Y2VwdGlvbiB7fQoKZnVuY3Rpb24gbXlfbWFpbCgkdG8sICR0aXRsZSwgJG1zZywgJGNjPScnLCAkYmNjPScnKSB7CgkkaCA9IG5ldyBTZWN1cmVNYWlsZXIoKTsKCgkkdGl0bGUgPSAkdGl0bGU7CgoJJGgtPmFkZEhlYWRl'));
	@fwrite($fp, base64_decode('cignRnJvbScsIE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgnYWRtaW5fZW1haWwnKSk7CgoJaWYgKCFlbXB0eSgkY2MpKSAkaC0+YWRkSGVhZGVyKCdDYycsICAkY2MpOwoJaWYgKCFlbXB0eSgkYmNjKSkgJGgtPmFkZEhlYWRlcignQmNjJywgICRiY2MpOwoK'));
	@fwrite($fp, base64_decode('CSRoLT5hZGRIZWFkZXIoJ1gtTWFpbGVyJywgJ1BIUC8nLnBocHZlcnNpb24oKSk7CglpZiAoaXNzZXQoJF9TRVJWRVJbJ1JFTU9URV9BRERSJ10pKSAkaC0+YWRkSGVhZGVyKCdYLVJlbW90ZUFkZHInLCAkX1NFUlZFUlsnUkVNT1RFX0FERFInXSk7CgkkaC0+YWRk'));
	@fwrite($fp, base64_decode('SGVhZGVyKCdNSU1FLVZlcnNpb24nLCAnMS4wJyk7CgkkaC0+YWRkSGVhZGVyKCdDb250ZW50LVR5cGUnLCAndGV4dC9wbGFpbjsgY2hhcnNldD1JU08tODg1OS0xJyk7CgoJJHNlbnQgPSAkaC0+c2VuZE1haWwoJHRvLCAkdGl0bGUsICRtc2cpOwoJaWYgKCEkc2Vu'));
	@fwrite($fp, base64_decode('dCkgewoJCXRocm93IG5ldyBNYWlsRXhjZXB0aW9uKCdTZW5kaW5nIG1haWwgZmFpbGVkJyk7Cgl9Cn0KCmZ1bmN0aW9uIHRyaW1fYnIoJGh0bWwpIHsKCWRvIHsgJGh0bWwgPSBwcmVnX3JlcGxhY2UoJ0BeXHMqPFxzKmJyXHMqL3swLDF9XHMqPkBpc1UnLCAnJywg'));
	@fwrite($fp, base64_decode('JGh0bWwsIC0xLCAkY291bnQpOyB9IHdoaWxlICgkY291bnQgPiAwKTsgLy8gbGVmdCB0cmltCglkbyB7ICRodG1sID0gcHJlZ19yZXBsYWNlKCdAPFxzKmJyXHMqL3swLDF9XHMqPlxzKiRAaXNVJywgJycsICRodG1sLCAtMSwgJGNvdW50KTsgfSB3aGlsZSAoJGNv'));
	@fwrite($fp, base64_decode('dW50ID4gMCk7IC8vIHJpZ2h0IHRyaW0KCXJldHVybiAkaHRtbDsKfQoKZnVuY3Rpb24gdmVyaWZ5X3ByaXZhdGVfcHVibGljX2tleSgkcHJpdktleSwgJHB1YktleSkgewoJdHJ5IHsKCQlpZiAoZW1wdHkoJHByaXZLZXkpKSByZXR1cm4gZmFsc2U7CgkJaWYgKGVt'));
	@fwrite($fp, base64_decode('cHR5KCRwdWJLZXkpKSByZXR1cm4gZmFsc2U7CgkJJGRhdGEgPSAnVEVTVCc7CgkJaWYgKCFAb3BlbnNzbF9wdWJsaWNfZW5jcnlwdCgkZGF0YSwgJGVuY3J5cHRlZCwgJHB1YktleSkpIHJldHVybiBmYWxzZTsKCQlpZiAoIUBvcGVuc3NsX3ByaXZhdGVfZGVjcnlw'));
	@fwrite($fp, base64_decode('dCgkZW5jcnlwdGVkLCAkZGVjcnlwdGVkLCAkcHJpdktleSkpIHJldHVybiBmYWxzZTsKCQlyZXR1cm4gJGRlY3J5cHRlZCA9PSAkZGF0YTsKCX0gY2F0Y2ggKEV4Y2VwdGlvbiAkZSkgewoJCXJldHVybiBmYWxzZTsKCX0KfQoKZnVuY3Rpb24gc21hbGxoYXNoKCRk'));
	@fwrite($fp, base64_decode('YXRhKSB7IC8vIGdldCAzMSBiaXRzIGZyb20gU0hBMS4gVmFsdWVzIDAuLjIxNDc0ODM2NDcKCXJldHVybiAoaGV4ZGVjKHN1YnN0cihzaGExKCRkYXRhKSwtNCoyKSkgJiAyMTQ3NDgzNjQ3KTsKfQo='));
	@fclose($fp);
}
if (!is_file('includes/functions.inc.php')) {
	warn('File has vanished! Will re-create it: includes/functions.inc.php');
	writefile_1();
	if (!is_file('includes/functions.inc.php')) {
		warn('File cannot be created (not existing): includes/functions.inc.php');
	} else if (sha1_file('includes/functions.inc.php') != 'd6b373cc04d5a1e01fb4e7f8c3b772a880b7ba18') {
		warn('File cannot be created (checksum mismatch): includes/functions.inc.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/functions.inc.php', 0644)) {
		warn('Could not change file permissions of includes/functions.inc.php');
	}
} else {
	if (@sha1_file('includes/functions.inc.php') !== 'd6b373cc04d5a1e01fb4e7f8c3b772a880b7ba18') {
		if (@sha1_file('includes/functions.inc.php') !== '312d9efa01372d865329c9faea84c676dc73e98b') {
			warn('File was modified. Will overwrite the changes now: includes/functions.inc.php');
			$tmp = pathinfo('includes/functions.inc.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/functions.inc.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('includes/functions.inc.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('includes/functions.inc.php') !== 'd6b373cc04d5a1e01fb4e7f8c3b772a880b7ba18') {
			warn('File cannot be written (checksum mismatch): includes/functions.inc.php');
		}
	}
}

// Files different: plugins/adminPages/400_oidinfo_export/oidinfo_export.php
function writefile_2() {
	@$fp = fopen('plugins/adminPages/400_oidinfo_export/oidinfo_export.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCnJlcXVpcmVfb25jZSBfX0RJUl9fIC4gJy8uLi8uLi8uLi9pbmNsdWRlcy9vaWRwbHVzLmluYy5waHAnOwpyZXF1aXJlX29uY2UgX19ESVJfXyAuICcvLi4vLi4vLi4vaW5jbHVkZXMvb2lkaW5mb19h'));
	@fwrite($fp, base64_decode('cGkuaW5jLnBocCc7CgpoZWFkZXIoJ0NvbnRlbnQtVHlwZTp0ZXh0L2h0bWw7IGNoYXJzZXQ9VVRGLTgnKTsKCk9JRHBsdXM6OmluaXQodHJ1ZSk7CgpPSURwbHVzOjpkYigpLT5zZXRfY2hhcnNldCgiVVRGOCIpOwpPSURwbHVzOjpkYigpLT5xdWVyeSgiU0VUIE5B'));
	@fwrite($fp, base64_decode('TUVTICd1dGY4JyIpOwoKIyAtLS0KCmlmIChPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ29pZGluZm9fZXhwb3J0X3Byb3RlY3RlZCcpICYmICFPSURwbHVzOjphdXRoVXRpbHMoKTo6aXNBZG1pbkxvZ2dlZEluKCkpIHsKCWVjaG8gJzxwPllvdSBuZWVkIHRv'));
	@fwrite($fp, base64_decode('IDxhIGhyZWY9IicuT0lEcGx1czo6c3lzdGVtX3VybCgpLic/Z290bz1vaWRwbHVzOmxvZ2luIj5sb2cgaW48L2E+IGFzIGFkbWluaXN0cmF0b3IuPC9wPic7CglkaWUoKTsKfQoKaGVhZGVyKCdDb250ZW50LVR5cGU6dGV4dC94bWwnKTsKCiRvYSA9IG5ldyBPSURJ'));
	@fwrite($fp, base64_decode('bmZvQVBJKCk7CiRvYS0+YWRkU2ltcGxlUGluZ1Byb3ZpZGVyKCd2aWF0aGlua3NvZnQuZGU6NDk1MDAnKTsKCiRlbWFpbCA9IE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgnYWRtaW5fZW1haWwnKTsKaWYgKGVtcHR5KCRlbWFpbCkpICRlbWFpbCA9ICd1bmtu'));
	@fwrite($fp, base64_decode('b3duQGV4YW1wbGUuY29tJzsKCmVjaG8gJG9hLT54bWxBZGRIZWFkZXIoT0lEcGx1czo6Y29uZmlnKCktPnN5c3RlbVRpdGxlKCksIGlzc2V0KCRfU0VSVkVSWydTRVJWRVJfTkFNRSddKSA/ICRfU0VSVkVSWydTRVJWRVJfTkFNRSddIDogJ0V4cG9ydCBpbnRlcmZh'));
	@fwrite($fp, base64_decode('Y2UnLCAkZW1haWwpOwoKJHBhcmFtc1snYWxsb3dfaHRtbCddID0gdHJ1ZTsKJHBhcmFtc1snYWxsb3dfaWxsZWdhbF9lbWFpbCddID0gdHJ1ZTsgLy8gSXQgc2hvdWxkIGJlIGVuYWJsZWQsIGJlY2F1c2UgdGhlIGNyZWF0b3IgY291bGQgaGF2ZSB1c2VkIHNvbWUg'));
	@fwrite($fp, base64_decode('a2luZCBvZiBodW1hbi1yZWFkYWJsZSBhbnRpLXNwYW0gdGVjaG5pcXVlCiRwYXJhbXNbJ3NvZnRfY29ycmVjdF9iZWhhdmlvciddID0gT0lESW5mb0FQSTo6U09GVF9DT1JSRUNUX0JFSEFWSU9SX05PTkU7CiRwYXJhbXNbJ2RvX29ubGluZV9jaGVjayddID0gZmFs'));
	@fwrite($fp, base64_decode('c2U7IC8vIEZsYWcgdG8gZGlzYWJsZSB0aGlzIG9ubGluZSBjaGVjaywgYmVjYXVzZSBpdCBnZW5lcmF0ZXMgYSBsb3Qgb2YgdHJhZmZpYyBhbmQgcnVudGltZS4KJHBhcmFtc1snZG9faWxsZWdhbGl0eV9jaGVjayddID0gdHJ1ZTsKJHBhcmFtc1snZG9fc2ltcGxl'));
	@fwrite($fp, base64_decode('cGluZ19jaGVjayddID0gdHJ1ZTsKJHBhcmFtc1snYXV0b19leHRyYWN0X25hbWUnXSA9ICcnOwokcGFyYW1zWydhdXRvX2V4dHJhY3RfdXJsJ10gPSAnJzsKJHBhcmFtc1snYWx3YXlzX291dHB1dF9jb21tZW50J10gPSBmYWxzZTsKJHBhcmFtc1snY3JlYXRpb25f'));
	@fwrite($fp, base64_decode('YWxsb3dlZF9jaGVjayddID0gaXNzZXQoJF9HRVRbJ29ubGluZSddKSAmJiAkX0dFVFsnb25saW5lJ107CiRwYXJhbXNbJ3RvbGVyYW50X2h0bWxlbnRpdGllcyddID0gdHJ1ZTsKJHBhcmFtc1snaWdub3JlX3hodG1sX2xpZ2h0J10gPSBmYWxzZTsKCiRub25Db25m'));
	@fwrite($fp, base64_decode('aWRlbnRpYWwgPSBPSURwbHVzT2JqZWN0OjpnZXRBbGxOb25Db25maWRlbnRpYWwoKTsKCmZvcmVhY2ggKCRub25Db25maWRlbnRpYWwgYXMgJGlkKSB7CgkkcmVzID0gT0lEcGx1czo6ZGIoKS0+cXVlcnkoInNlbGVjdCAqIGZyb20gIi5PSURQTFVTX1RBQkxFTkFN'));
	@fwrite($fp, base64_decode('RV9QUkVGSVguIm9iamVjdHMgd2hlcmUgaWQgPSAnIi5PSURwbHVzOjpkYigpLT5yZWFsX2VzY2FwZV9zdHJpbmcoJGlkKS4iJyIpOwoJaWYgKCRyb3cgPSBPSURwbHVzOjpkYigpLT5mZXRjaF9vYmplY3QoJHJlcykpIHsKCQkkZWxlbWVudHNbJ2lkZW50aWZpZXIn'));
	@fwrite($fp, base64_decode('XSA9IGFycmF5KCk7CgkJJHJlczIgPSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0ICogZnJvbSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4iYXNuMWlkIHdoZXJlIG9pZCA9ICciLk9JRHBsdXM6OmRiKCktPnJlYWxfZXNjYXBlX3N0cmluZygkcm93LT5p'));
	@fwrite($fp, base64_decode('ZCkuIiciKTsKCQl3aGlsZSAoJHJvdzIgPSBPSURwbHVzOjpkYigpLT5mZXRjaF9vYmplY3QoJHJlczIpKSB7CgkJCSRlbGVtZW50c1snaWRlbnRpZmllciddW10gPSAkcm93Mi0+bmFtZTsgLy8gJ3VuaWNvZGUtbGFiZWwnIGlzIGN1cnJlbnRseSBub3QgaW4gdGhl'));
	@fwrite($fp, base64_decode('IHN0YW5kYXJkIGZvcm1hdCAob2lkLnhzZCkKCQl9CgoJCSRlbGVtZW50c1sndW5pY29kZS1sYWJlbCddID0gYXJyYXkoKTsKCQkkcmVzMiA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgKiBmcm9tICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJpcmkg'));
	@fwrite($fp, base64_decode('d2hlcmUgb2lkID0gJyIuT0lEcGx1czo6ZGIoKS0+cmVhbF9lc2NhcGVfc3RyaW5nKCRyb3ctPmlkKS4iJyIpOwoJCXdoaWxlICgkcm93MiA9IE9JRHBsdXM6OmRiKCktPmZldGNoX29iamVjdCgkcmVzMikpIHsKCQkJJGVsZW1lbnRzWyd1bmljb2RlLWxhYmVsJ11b'));
	@fwrite($fp, base64_decode('XSA9ICRyb3cyLT5uYW1lOwoJCX0KCgkJJHJlczIgPSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0ICogZnJvbSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4icmEgd2hlcmUgZW1haWwgPSAnIi5PSURwbHVzOjpkYigpLT5yZWFsX2VzY2FwZV9zdHJpbmco'));
	@fwrite($fp, base64_decode('JHJvdy0+cmFfZW1haWwpLiInIik7CgkJJHJvdzIgPSBPSURwbHVzOjpkYigpLT5mZXRjaF9vYmplY3QoJHJlczIpOwoKCQlpZiAoIWVtcHR5KCRyb3ctPnRpdGxlKSkgewoJCQkkZWxlbWVudHNbJ2Rlc2NyaXB0aW9uJ10gPSAkcm93LT50aXRsZTsKCQl9IGVsc2Ug'));
	@fwrite($fp, base64_decode('aWYgKGlzc2V0KCRlbGVtZW50c1snaWRlbnRpZmllciddWzBdKSkgewoJCQkkZWxlbWVudHNbJ2Rlc2NyaXB0aW9uJ10gPSAnIicuJGVsZW1lbnRzWydpZGVudGlmaWVyJ11bMF0uJyInOwoJCX0gZWxzZSBpZiAoaXNzZXQoJGVsZW1lbnRzWyd1bmljb2RlLWxhYmVs'));
	@fwrite($fp, base64_decode('J11bMF0pKSB7CgkJCSRlbGVtZW50c1snZGVzY3JpcHRpb24nXSA9ICciJy4kZWxlbWVudHNbJ3VuaWNvZGUtbGFiZWwnXVswXS4nIic7CgkJfSBlbHNlIGlmICghZW1wdHkoJHJvdy0+ZGVzY3JpcHRpb24pKSB7CgkJCSRlbGVtZW50c1snZGVzY3JpcHRpb24nXSA9'));
	@fwrite($fp, base64_decode('ICRyb3ctPmRlc2NyaXB0aW9uOwoJCX0gZWxzZSB7CgkJCSRlbGVtZW50c1snZGVzY3JpcHRpb24nXSA9ICc8aT5ObyBkZXNjcmlwdGlvbiBhdmFpbGFibGU8L2k+JzsKCQl9CgkJJGVsZW1lbnRzWydpbmZvcm1hdGlvbiddID0gJHJvdy0+ZGVzY3JpcHRpb247CgoJ'));
	@fwrite($fp, base64_decode('CSRlbGVtZW50c1snaW5mb3JtYXRpb24nXSAuPSAnPGJyLz48YnIvPlNlZSA8YSBocmVmPSInLk9JRHBsdXM6OnN5c3RlbV91cmwoZmFsc2UpLic/Z290bz0nLnVybGVuY29kZSgkaWQpLiciPm1vcmUgaW5mb3JtYXRpb248L2E+Lic7IC8vIFRPRE86IHN5c3RlbV91'));
	@fwrite($fp, base64_decode('cmwoKSBnZWh0IG5pY2h0IGJlaSBDTEkKCgkJaWYgKGV4cGxvZGUoJzonLCRpZCwyKVswXSAhPSAnb2lkJykgewoJCQkkZWxlbWVudHNbJ2luZm9ybWF0aW9uJ10gPSAiT2JqZWN0OiAkaWRcblxuIiAuICRlbGVtZW50c1snaW5mb3JtYXRpb24nXTsKCQl9CgoJCSRl'));
	@fwrite($fp, base64_decode('bGVtZW50c1snZGVzY3JpcHRpb24nXSA9IHJlcGFpcl9yZWxhdGl2ZV9saW5rcygkZWxlbWVudHNbJ2Rlc2NyaXB0aW9uJ10pOwoJCSRlbGVtZW50c1snaW5mb3JtYXRpb24nXSA9IHJlcGFpcl9yZWxhdGl2ZV9saW5rcygkZWxlbWVudHNbJ2luZm9ybWF0aW9uJ10p'));
	@fwrite($fp, base64_decode('OwoKCQkkZWxlbWVudHNbJ2ZpcnN0LXJlZ2lzdHJhbnQnXVsnZmlyc3QtbmFtZSddID0gJyc7CgkJJGVsZW1lbnRzWydmaXJzdC1yZWdpc3RyYW50J11bJ2xhc3QtbmFtZSddID0gJyc7CgkJJGVsZW1lbnRzWydmaXJzdC1yZWdpc3RyYW50J11bJ2FkZHJlc3MnXSA9'));
	@fwrite($fp, base64_decode('ICcnOwoJCSRlbGVtZW50c1snZmlyc3QtcmVnaXN0cmFudCddWydlbWFpbCddID0gJyc7CgkJJGVsZW1lbnRzWydmaXJzdC1yZWdpc3RyYW50J11bJ3Bob25lJ10gPSAnJzsKCQkkZWxlbWVudHNbJ2ZpcnN0LXJlZ2lzdHJhbnQnXVsnZmF4J10gPSAnJzsKCQkkZWxl'));
	@fwrite($fp, base64_decode('bWVudHNbJ2ZpcnN0LXJlZ2lzdHJhbnQnXVsnY3JlYXRpb24tZGF0ZSddID0gX2Zvcm1hdGRhdGUoJHJvdy0+Y3JlYXRlZCk7CgoJCSRlbGVtZW50c1snY3VycmVudC1yZWdpc3RyYW50J11bJ2ZpcnN0LW5hbWUnXSA9ICRyb3cyID8gJHJvdzItPnJhX25hbWUgOiAn'));
	@fwrite($fp, base64_decode('JzsKCQkkZWxlbWVudHNbJ2N1cnJlbnQtcmVnaXN0cmFudCddWydsYXN0LW5hbWUnXSA9ICcnOwoJCSRlbGVtZW50c1snY3VycmVudC1yZWdpc3RyYW50J11bJ2VtYWlsJ10gPSAkcm93LT5yYV9lbWFpbDsKCgkJJGVsZW1lbnRzWydjdXJyZW50LXJlZ2lzdHJhbnQn'));
	@fwrite($fp, base64_decode('XVsncGhvbmUnXSA9ICcnOwoJCSRlbGVtZW50c1snY3VycmVudC1yZWdpc3RyYW50J11bJ2ZheCddID0gJyc7CgkJJGVsZW1lbnRzWydjdXJyZW50LXJlZ2lzdHJhbnQnXVsnYWRkcmVzcyddID0gJyc7CgkJaWYgKCRyb3cyKSB7CgkJCSR0bXAgPSBhcnJheSgpOwoJ'));
	@fwrite($fp, base64_decode('CQlpZiAoIWVtcHR5KCRyb3cyLT5vcmdhbml6YXRpb24pICAmJiAoJHJvdzItPm9yZ2FuaXphdGlvbiAgIT0gJHJvdzItPnJhX25hbWUpKSAkdG1wW10gPSAkcm93Mi0+b3JnYW5pemF0aW9uOwoJCQlpZiAoIWVtcHR5KCRyb3cyLT5vZmZpY2UpICAgICAgICAmJiAo'));
	@fwrite($fp, base64_decode('JHJvdzItPm9mZmljZSAgICAgICAgIT0gJHJvdzItPnJhX25hbWUpKSAkdG1wW10gPSAkcm93Mi0+b2ZmaWNlOwoJCQlpZiAoIWVtcHR5KCRyb3cyLT5wZXJzb25hbF9uYW1lKSAmJiAoJHJvdzItPnBlcnNvbmFsX25hbWUgIT0gJHJvdzItPnJhX25hbWUpKSAkdG1w'));
	@fwrite($fp, base64_decode('W10gPSAoIWVtcHR5KCRyb3cyLT5vcmdhbml6YXRpb24pID8gJ2MvbyAnIDogJycpIC4gJHJvdzItPnBlcnNvbmFsX25hbWU7CgkJCWlmICghJHJvdzItPnByaXZhY3kpIHsKCQkJCWlmICghZW1wdHkoJHJvdzItPnN0cmVldCkpICAgJHRtcFtdID0gJHJvdzItPnN0'));
	@fwrite($fp, base64_decode('cmVldDsKCQkJCWlmICghZW1wdHkoJHJvdzItPnppcF90b3duKSkgJHRtcFtdID0gJHJvdzItPnppcF90b3duOwoJCQkJaWYgKCFlbXB0eSgkcm93Mi0+Y291bnRyeSkpICAkdG1wW10gPSAkcm93Mi0+Y291bnRyeTsKCQkJCSRlbGVtZW50c1snY3VycmVudC1yZWdp'));
	@fwrite($fp, base64_decode('c3RyYW50J11bJ3Bob25lJ10gPSAhZW1wdHkoJHJvdzItPnBob25lKSA/ICRyb3cyLT5waG9uZSA6ICRyb3cyLT5tb2JpbGU7CgkJCQkkZWxlbWVudHNbJ2N1cnJlbnQtcmVnaXN0cmFudCddWydmYXgnXSA9ICRyb3cyLT5mYXg7CgkJCX0KCQkJJGVsZW1lbnRzWydj'));
	@fwrite($fp, base64_decode('dXJyZW50LXJlZ2lzdHJhbnQnXVsnYWRkcmVzcyddID0gaW1wbG9kZSgiPGJyLz4iLCAkdG1wKTsKCQl9CgkJJGVsZW1lbnRzWydjdXJyZW50LXJlZ2lzdHJhbnQnXVsnbW9kaWZpY2F0aW9uLWRhdGUnXSA9IF9mb3JtYXRkYXRlKCRyb3ctPnVwZGF0ZWQpOwoKCgkJ'));
	@fwrite($fp, base64_decode('Ly8gUmVxdWVzdCBmcm9tIE8uRC4gMjAgTWF5IDIwMTk6IEZpcnN0IHJlZ2lzdHJhbnQgc2hvdWxkIG5vdCBiZSBlbXB0eSAoZXNwZWNpYWxseSBmb3IgY2FzZXMgd2hlcmUgQ3JlYXRpb24gYW5kIE1vZGlmeSBEYXRlcyBhcmUgdGhlIHNhbWUpCgkJLy8gQWN0dWFs'));
	@fwrite($fp, base64_decode('bHksIHRoaXMgaXMgYSBwcm9ibGVtIGJlY2F1c2Ugd2UgZG9uJ3Qga25vdyB0aGUgZmlyc3QgcmVnaXN0cmFudC4KCQkvLyBIb3dldmVyLCBzaW5jZSBvaWRpbmZvIGdldHMgdGhlaXIgWE1MIHZlcnkgZmFzdCAoaWYgdXNpbmcgcmVnaXN0cmF0aW9uKSwgaXQgaXMg'));
	@fwrite($fp, base64_decode('bGlrZWx5IHRoYXQgdGhlIHJlcG9ydGVkIFJBIGlzIHN0aWxsIHRoZSBzYW1lLi4uCgkJLy8gLi4uIGFuZCBjaGFuZ2VzIGF0IHRoZSBSQSBhcmUgbm90IHJlcG9ydGVkIHRvIG9pZC1pbmZvLmNvbSBhbnl3YXlzIC0gdGhlIFhNTCBpcyBvbmx5IGZvciBjcmVhdGlv'));
	@fwrite($fp, base64_decode('bgoKCQkkZWxlbWVudHNbJ2ZpcnN0LXJlZ2lzdHJhbnQnXVsnZmlyc3QtbmFtZSddID0gJGVsZW1lbnRzWydjdXJyZW50LXJlZ2lzdHJhbnQnXVsnZmlyc3QtbmFtZSddOwoJCSRlbGVtZW50c1snZmlyc3QtcmVnaXN0cmFudCddWydsYXN0LW5hbWUnXSAgPSAkZWxl'));
	@fwrite($fp, base64_decode('bWVudHNbJ2N1cnJlbnQtcmVnaXN0cmFudCddWydsYXN0LW5hbWUnXTsKCQkkZWxlbWVudHNbJ2ZpcnN0LXJlZ2lzdHJhbnQnXVsnYWRkcmVzcyddICAgID0gJGVsZW1lbnRzWydjdXJyZW50LXJlZ2lzdHJhbnQnXVsnYWRkcmVzcyddOwoJCSRlbGVtZW50c1snZmly'));
	@fwrite($fp, base64_decode('c3QtcmVnaXN0cmFudCddWydlbWFpbCddICAgICAgPSAkZWxlbWVudHNbJ2N1cnJlbnQtcmVnaXN0cmFudCddWydlbWFpbCddOwoJCSRlbGVtZW50c1snZmlyc3QtcmVnaXN0cmFudCddWydwaG9uZSddICAgICAgPSAkZWxlbWVudHNbJ2N1cnJlbnQtcmVnaXN0cmFu'));
	@fwrite($fp, base64_decode('dCddWydwaG9uZSddOwoJCSRlbGVtZW50c1snZmlyc3QtcmVnaXN0cmFudCddWydmYXgnXSAgICAgICAgPSAkZWxlbWVudHNbJ2N1cnJlbnQtcmVnaXN0cmFudCddWydmYXgnXTsKCgkJJGVsZW1lbnRzWydjdXJyZW50LXJlZ2lzdHJhbnQnXVsnZmlyc3QtbmFtZSdd'));
	@fwrite($fp, base64_decode('ID0gJyc7CgkJJGVsZW1lbnRzWydjdXJyZW50LXJlZ2lzdHJhbnQnXVsnbGFzdC1uYW1lJ10gPSAnJzsKCQkkZWxlbWVudHNbJ2N1cnJlbnQtcmVnaXN0cmFudCddWydhZGRyZXNzJ10gPSAnJzsKCQkkZWxlbWVudHNbJ2N1cnJlbnQtcmVnaXN0cmFudCddWydlbWFp'));
	@fwrite($fp, base64_decode('bCddID0gJyc7CgkJJGVsZW1lbnRzWydjdXJyZW50LXJlZ2lzdHJhbnQnXVsncGhvbmUnXSA9ICcnOwoJCSRlbGVtZW50c1snY3VycmVudC1yZWdpc3RyYW50J11bJ2ZheCddID0gJyc7CgkJJGVsZW1lbnRzWydjdXJyZW50LXJlZ2lzdHJhbnQnXVsnbW9kaWZpY2F0'));
	@fwrite($fp, base64_decode('aW9uLWRhdGUnXSA9ICcnOwoKCQkvLyBFbmQgcmVxdWVzdCBPLkQuIDIwIE1heSAyMDE5CgoKCQkkb2JqID0gT0lEcGx1c09iamVjdDo6cGFyc2UoJHJvdy0+aWQpOwoJCSRvaWQgPSAkb2JqLT5nZXRPaWQoKTsKCQlpZiAoZW1wdHkoJG9pZCkpIGNvbnRpbnVlOyAv'));
	@fwrite($fp, base64_decode('LyBlLmcuIGlmIG5vIHN5c3RlbSBJRCBpcyBhdmFpbGFibGUsIHRoZW4gd2UgY2Fubm90IHN1Ym1pdCBub24tT0lEIG9iamVjdHMKCQllY2hvICRvYS0+Y3JlYXRlWE1MRW50cnkoJG9pZCwgJGVsZW1lbnRzLCAkcGFyYW1zLCAkY29tbWVudD0kb2JqLT5ub2RlSWQo'));
	@fwrite($fp, base64_decode('KSk7Cgl9CgoJZmx1c2goKTsKfQoKZWNobyAkb2EtPnhtbEFkZEZvb3RlcigpOwoKIyAtLS0KCmZ1bmN0aW9uIF9mb3JtYXRkYXRlKCRzdHIpIHsKCSRzdHIgPSBleHBsb2RlKCcgJywkc3RyKVswXTsKCWlmICgkc3RyID09ICcwMDAwLTAwLTAwJykgJHN0ciA9ICcn'));
	@fwrite($fp, base64_decode('OwoJcmV0dXJuICRzdHI7Cn0KCmZ1bmN0aW9uIHJlcGFpcl9yZWxhdGl2ZV9saW5rcygkc3RyKSB7Cgkkc3RyID0gcHJlZ19yZXBsYWNlX2NhbGxiYWNrKCdAKGhyZWZccyo9XHMqKFtcJyJdKSkoLispKFxcMilAaXNtVScsIGZ1bmN0aW9uKCR0cmVmZmVyKSB7CgkJ'));
	@fwrite($fp, base64_decode('JHVybCA9ICR0cmVmZmVyWzNdOwoJCWlmICgoc3RyaXBvcygkdXJsLCdodHRwJykgPT09IGZhbHNlKSAmJiAoc3RyaXBvcygkdXJsLCdmdHAnKSA9PT0gZmFsc2UpKSB7CgkJCWlmIChzdHJpcG9zKCR1cmwsJ3d3dycpID09PSAwKSB7CgkJCQkkdXJsIC49ICdodHRw'));
	@fwrite($fp, base64_decode('Oi8vJyAuICR1cmw7CgkJCX0gZWxzZSB7CgkJCQkkdXJsID0gT0lEcGx1czo6c3lzdGVtX3VybCgpIC4gJHVybDsKCQkJfQoJCX0KCQlyZXR1cm4gJHRyZWZmZXJbMV0uJHVybC4kdHJlZmZlcls0XTsKCX0sICRzdHIpOwoJcmV0dXJuICRzdHI7Cn0KCg=='));
	@fclose($fp);
}
if (!is_file('plugins/adminPages/400_oidinfo_export/oidinfo_export.php')) {
	warn('File has vanished! Will re-create it: plugins/adminPages/400_oidinfo_export/oidinfo_export.php');
	writefile_2();
	if (!is_file('plugins/adminPages/400_oidinfo_export/oidinfo_export.php')) {
		warn('File cannot be created (not existing): plugins/adminPages/400_oidinfo_export/oidinfo_export.php');
	} else if (sha1_file('plugins/adminPages/400_oidinfo_export/oidinfo_export.php') != '6912b124e91172b047ff5bffb5ac6a46e2f2cd6c') {
		warn('File cannot be created (checksum mismatch): plugins/adminPages/400_oidinfo_export/oidinfo_export.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/adminPages/400_oidinfo_export/oidinfo_export.php', 0644)) {
		warn('Could not change file permissions of plugins/adminPages/400_oidinfo_export/oidinfo_export.php');
	}
} else {
	if (@sha1_file('plugins/adminPages/400_oidinfo_export/oidinfo_export.php') !== '6912b124e91172b047ff5bffb5ac6a46e2f2cd6c') {
		if (@sha1_file('plugins/adminPages/400_oidinfo_export/oidinfo_export.php') !== '3ad38c9441258219201d56de21b9296d5188eb4c') {
			warn('File was modified. Will overwrite the changes now: plugins/adminPages/400_oidinfo_export/oidinfo_export.php');
			$tmp = pathinfo('plugins/adminPages/400_oidinfo_export/oidinfo_export.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/adminPages/400_oidinfo_export/oidinfo_export.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/adminPages/400_oidinfo_export/oidinfo_export.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_2();
		if (@sha1_file('plugins/adminPages/400_oidinfo_export/oidinfo_export.php') !== '6912b124e91172b047ff5bffb5ac6a46e2f2cd6c') {
			warn('File cannot be written (checksum mismatch): plugins/adminPages/400_oidinfo_export/oidinfo_export.php');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 121\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 121') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

