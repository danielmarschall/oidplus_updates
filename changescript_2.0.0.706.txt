<?php /* <ViaThinkSoftSignature>
ooh3WFIEBufrpo+B34vO/3Rp462uRPZxSHLHkJwOm/2FqXICjbrqWx3hZglb2Stk1
uAecXaBkkW6VxDs1o10E4/vjxeGJLev2K8JODheFSjd/iXMwfyut3gJUSFAXKJ7Bw
Ncf1GZnP3RyRwJta/1y2uE94gP7P/P5WDDRdwqXcCUaOgNQkeMxVJ4SIMW3MoqEzI
yjVZn7F6RDtehQdXcQ2acwg8ZWN21+JV0P/GY94T87Ymyi8grw7T41KQg1tdJbHwS
k9JGhhG/8rKW3thnwJ7vIdsx6MFD/DbuWd/RvnUnDbxtTdbckpYoMEOaGPIqH19bu
RgWfL5P7YHqwBa1eM8QYi/oDvd9dgI+VWCDiH9RHAH42NQqpVoNM9xSiPL93TUmRo
ZMqSDX60gsinhyKIBli2EdmHM9kjmJKUB6kSOT01tMJ3Bx3u5sGIDQ8mIJqWSxRtT
D6/DqByT5cjraZT0s4b29r+DS+ZsRUL20l5N5+isibXKK8NAHYduTEPtHal1mdWxL
q2p9XoH4UMyOR2jKDIssLJReYbGG795lkdnfsdz4SZuS8mpA6Vx69XCO1ONv2IJoQ
321z6+1mGYcVtwyBb2W9kTVEZ76o+pN+AdA9bQx67/zEijkS9e6CC+a2zvUCA2olV
mfcKwaMRxlXLjsUJoP8lhftuGPVJpHpwdnzhs+nijXP9uVUlPTd7BcfZ1bCVeIT5T
XcQVQ0mmAYStMgDMpTgOQ5JvyYcKE1KJXUeuX4Ou+VTlzlyGzWCs/HC+Gf396fAhJ
OBFN61hMACs1t+dTRXEyTIktHNHvMIviSHZYmtO9izqgbtD+Xp8tATQnrMzo41V8j
vHnsGC9AWBiUgjzgdGahnQwdLBR6V1nubs818jlHnxY1+V7Vvyfd8r6TSrZ3mGSW5
1rzp6ChtGruTPV3+ua/FUVuLmjXNYRKeH4WyRvTSWW+l+TtR/H6Dq2IB9kEfShQzZ
WbeLV+aZYCHzorU7nfCd+CtEFNxjHuMtUVnYZAJ1EypqgYAyv50pYWKkOiMBiKcDp
a2dd6xTGuTORCoWto+Z4h0EUMDVc5bjxvBnPSty/oIPmzsFE072QgU9QK/GYTGT4K
LfyuFU8YcuEgEJpJPN8MyyNCDkrZp11iQ32gn1r3OiVfTY0L+9db8GRpfWn0HDqr+
JoH4riFv0aDYyoVXkfTFHYC6Zx9rykyaCuV66gJJesH8VsiUkssVZfLrci4a0X/tF
T/W0WwlyfdcjJehZb4ogxMutxUG9bvYNXoJPTXs5spTWNKcUexagst38NcoRoLcMG
NcZkyyMKEAPwrkG3ipXv9bPNo6hMBO/MdbI5GkG/24mX3ITNJfYOr3ODQ24XHHj/O
A==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('.version.php')) !== '<?php // Revision 705') {
	err('This update can only be applied to OIDplus version 2.0.0.705!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: setup/includes/setup_base.js
function writefile_1() {
	@$fp = fopen('setup/includes/setup_base.js', 'w');
	@fwrite($fp, base64_decode('LyoKICogT0lEcGx1cyAyLjAKICogQ29weXJpZ2h0IDIwMTkgLSAyMDIxIERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCi8vIERFRkFVTFRfTEFOR1VBR0Ugd2lsbCBiZSBzZXQgYnkgc2V0dXAuanMucGhwCi8vIGxhbmd1YWdlX21lc3NhZ2VzIHdpbGwgYmUgc2V0IGJ5IHNldHVwLmpzLnBocAovLyBsYW5ndWFnZV90Ymxw'));
	@fwrite($fp, base64_decode('cmVmaXggd2lsbCBiZSBzZXQgYnkgc2V0dXAuanMucGhwCgovLyBUT0RPOiBQdXQgdGhlc2Ugc2V0dGluZ3MgaW4gYSAic2V0dXAgY29uZmlndXJhdGlvbiBmaWxlIiAoaGFyZGNvZGVkKQptaW5fcGFzc3dvcmRfbGVuZ3RoID0gMTA7IC8vIHNlZSBhbHNvIHBsdWdp'));
	@fwrite($fp, base64_decode('bnMvdmlhdGhpbmtzb2Z0L3B1YmxpY1BhZ2VzLzA5Ml9mb3Jnb3RfcGFzc3dvcmRfYWRtaW4vc2NyaXB0LmpzCnBhc3N3b3JkX3NhbHRfbGVuZ3RoID0gMTA7CmJjcnlwdF9yb3VuZHMgPSAxMDsKCmZ1bmN0aW9uIGJ0b2EoYmluKSB7Cgl2YXIgdGFibGVTdHIgPSAi'));
	@fwrite($fp, base64_decode('QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7Cgl2YXIgdGFibGUgPSB0YWJsZVN0ci5zcGxpdCgiIik7Cglmb3IgKHZhciBpID0gMCwgaiA9IDAsIGxlbiA9IGJpbi5sZW5ndGggLyAzLCBiYXNl'));
	@fwrite($fp, base64_decode('NjQgPSBbXTsgaSA8IGxlbjsgKytpKSB7CgkJdmFyIGEgPSBiaW4uY2hhckNvZGVBdChqKyspLCBiID0gYmluLmNoYXJDb2RlQXQoaisrKSwgYyA9IGJpbi5jaGFyQ29kZUF0KGorKyk7CgkJaWYgKChhIHwgYiB8IGMpID4gMjU1KSB0aHJvdyBuZXcgRXJyb3IoX0wo'));
	@fwrite($fp, base64_decode('J1N0cmluZyBjb250YWlucyBhbiBpbnZhbGlkIGNoYXJhY3RlcicpKTsKCQliYXNlNjRbYmFzZTY0Lmxlbmd0aF0gPSB0YWJsZVthID4+IDJdICsgdGFibGVbKChhIDw8IDQpICYgNjMpIHwgKGIgPj4gNCldICsKCQkgICAgICAgICAgICAgICAgICAgICAgIChpc05h'));
	@fwrite($fp, base64_decode('TihiKSA/ICI9IiA6IHRhYmxlWygoYiA8PCAyKSAmIDYzKSB8IChjID4+IDYpXSkgKwoJCSAgICAgICAgICAgICAgICAgICAgICAgKGlzTmFOKGIgKyBjKSA/ICI9IiA6IHRhYmxlW2MgJiA2M10pOwoJfQoJcmV0dXJuIGJhc2U2NC5qb2luKCIiKTsKfTsKCmZ1bmN0'));
	@fwrite($fp, base64_decode('aW9uIGhleFRvQmFzZTY0KHN0cikgewoJcmV0dXJuIGJ0b2EoU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLAoJICAgICAgICAgICAgc3RyLnJlcGxhY2UoL1xyfFxuL2csICIiKS5yZXBsYWNlKC8oW1xkYS1mQS1GXXsyfSkgPy9nLCAiMHgkMSAiKS5yZXBs'));
	@fwrite($fp, base64_decode('YWNlKC8gKyQvLCAiIikuc3BsaXQoIiAiKSkpOwp9CgpmdW5jdGlvbiBiNjRFbmNvZGVVbmljb2RlKHN0cikgewoJLy8gZmlyc3Qgd2UgdXNlIGVuY29kZVVSSUNvbXBvbmVudCB0byBnZXQgcGVyY2VudC1lbmNvZGVkIFVURi04LAoJLy8gdGhlbiB3ZSBjb252ZXJ0'));
	@fwrite($fp, base64_decode('IHRoZSBwZXJjZW50IGVuY29kaW5ncyBpbnRvIHJhdyBieXRlcyB3aGljaAoJLy8gY2FuIGJlIGZlZCBpbnRvIGJ0b2EuCglyZXR1cm4gYnRvYShlbmNvZGVVUklDb21wb25lbnQoc3RyKS5yZXBsYWNlKC8lKFswLTlBLUZdezJ9KS9nLAoJZnVuY3Rpb24gdG9Tb2xp'));
	@fwrite($fp, base64_decode('ZEJ5dGVzKG1hdGNoLCBwMSkgewoJCXJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKCcweCcgKyBwMSk7Cgl9KSk7Cn0KCmZ1bmN0aW9uIGdlbmVyYXRlUmFuZG9tU3RyaW5nKGxlbmd0aCkgewoJdmFyIGNoYXJzZXQgPSAiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4'));
	@fwrite($fp, base64_decode('eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWjAxMjM0NTY3ODkiLAoJcmV0VmFsID0gIiI7Cglmb3IgKHZhciBpID0gMCwgbiA9IGNoYXJzZXQubGVuZ3RoOyBpIDwgbGVuZ3RoOyArK2kpIHsKCQlyZXRWYWwgKz0gY2hhcnNldC5jaGFyQXQoTWF0aC5mbG9vcihN'));
	@fwrite($fp, base64_decode('YXRoLnJhbmRvbSgpICogbikpOwoJfQoJcmV0dXJuIHJldFZhbDsKfQoKU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlQWxsID0gZnVuY3Rpb24oc2VhcmNoLCByZXBsYWNlbWVudCkgewoJdmFyIHRhcmdldCA9IHRoaXM7CglyZXR1cm4gdGFyZ2V0LnJlcGxhY2UobmV3'));
	@fwrite($fp, base64_decode('IFJlZ0V4cChzZWFyY2gsICdnJyksIHJlcGxhY2VtZW50KTsKfTsKCmZ1bmN0aW9uIGFkbWluR2VuZXJhdGVQYXNzd29yZChwYXNzd29yZCkgewoJdmFyIHNhbHQgPSBnZW5lcmF0ZVJhbmRvbVN0cmluZyhwYXNzd29yZF9zYWx0X2xlbmd0aCk7CglyZXR1cm4gc2Fs'));
	@fwrite($fp, base64_decode('dCsnJCcraGV4VG9CYXNlNjQoc2hhM181MTIoc2FsdCtwYXNzd29yZCkpOwp9Cgp2YXIgYkNyeXB0V29ya2VyID0gbnVsbDsKdmFyIGdfcHJldkJjcnlwdFB3ID0gbnVsbDsKdmFyIGdfbGFzdF9hZG1Qd2RIYXNoID0gbnVsbDsKdmFyIGdfbGFzdF9wd0NvbW1lbnQg'));
	@fwrite($fp, base64_decode('PSBudWxsOwoKZnVuY3Rpb24gcmVidWlsZCgpIHsKCXZhciBwdyA9ICQoIiNhZG1pbl9wYXNzd29yZCIpWzBdLnZhbHVlOwoKCWlmIChwdyAhPSBnX3ByZXZCY3J5cHRQdykgewoJCS8vIHN5bmMgY2FsbCB0byBjYWxjdWxhdGUgU0hBMwoJCXZhciBhZG1Qd2RIYXNo'));
	@fwrite($fp, base64_decode('ID0gYWRtaW5HZW5lcmF0ZVBhc3N3b3JkKHB3KTsKCQl2YXIgcHdDb21tZW50ID0gJ3NhbHRlZCwgYmFzZTY0IGVuY29kZWQgU0hBMy01MTIgaGFzaCc7CgkJZG9SZWJ1aWxkKGFkbVB3ZEhhc2gsIHB3Q29tbWVudCk7CgoJCS8vICJhc3luYyIgY2FsbCB0byBjYWxj'));
	@fwrite($fp, base64_decode('dWxhdGUgYmNyeXB0ICh2aWEgd2ViLXdvcmtlcikKCQlpZiAoYkNyeXB0V29ya2VyICE9IG51bGwpIHsKCQkJZ19wcmV2QmNyeXB0UHcgPSBudWxsOwoJCQliQ3J5cHRXb3JrZXIudGVybWluYXRlKCk7CgkJfQoJCWJDcnlwdFdvcmtlciA9IG5ldyBXb3JrZXIoJy4u'));
	@fwrite($fp, base64_decode('L2JjcnlwdF93b3JrZXIuanMnKTsKCQliQ3J5cHRXb3JrZXIucG9zdE1lc3NhZ2UoW3B3LCBiY3J5cHRfcm91bmRzXSk7CgkJYkNyeXB0V29ya2VyLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChldmVudCkgewoJCQl2YXIgYWRtUHdkSGFzaCA9IGV2ZW50LmRhdGE7CgkJ'));
	@fwrite($fp, base64_decode('CXZhciBwd0NvbW1lbnQgPSAnYmNyeXB0IGVuY29kZWQgaGFzaCc7CgkJCWRvUmVidWlsZChhZG1Qd2RIYXNoLCBwd0NvbW1lbnQpOwoJCQlnX3ByZXZCY3J5cHRQdyA9IHB3OwoJCX07Cgl9IGVsc2UgewoJCWRvUmVidWlsZChnX2xhc3RfYWRtUHdkSGFzaCwgZ19s'));
	@fwrite($fp, base64_decode('YXN0X3B3Q29tbWVudCk7Cgl9Cn0KCmZ1bmN0aW9uIGRvUmVidWlsZChhZG1Qd2RIYXNoLCBwd0NvbW1lbnQpIHsKCWdfbGFzdF9hZG1Qd2RIYXNoID0gYWRtUHdkSGFzaDsKCWdfbGFzdF9wd0NvbW1lbnQgPSBwd0NvbW1lbnQ7CgoJdmFyIGVycm9yID0gZmFsc2U7'));
	@fwrite($fp, base64_decode('CgoJaWYgKCQoIiNjb25maWciKVswXSA9PSBudWxsKSByZXR1cm47CgoJLy8gQ2hlY2sgMTogSGFzIHRoZSBwYXNzd29yZCB0aGUgY29ycmVjdCBsZW5ndGg/CglpZiAoJCgiI2FkbWluX3Bhc3N3b3JkIilbMF0udmFsdWUubGVuZ3RoIDwgbWluX3Bhc3N3b3JkX2xl'));
	@fwrite($fp, base64_decode('bmd0aCkKCXsKCQkkKCIjcGFzc3dvcmRfd2FybiIpWzBdLmlubmVySFRNTCA9ICc8Zm9udCBjb2xvcj0icmVkIj4nK19MKCdQYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0ICUxIGNoYXJhY3RlcnMgbG9uZycsbWluX3Bhc3N3b3JkX2xlbmd0aCkrJzwvZm9udD4nOwoJ'));
	@fwrite($fp, base64_decode('CSQoIiNjb25maWciKVswXS5pbm5lckhUTUwgPSAnPGI+Jmx0P3BocDwvYj48YnI+PGJyPjxpPi8vIEVSUk9SOiBQYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0ICcrbWluX3Bhc3N3b3JkX2xlbmd0aCsnIGNoYXJhY3RlcnMgbG9uZzwvaT4nOyAvLyBkbyBub3QgdHJh'));
	@fwrite($fp, base64_decode('bnNsYXRlCgkJZXJyb3IgPSB0cnVlOwoJfSBlbHNlIHsKCQkkKCIjcGFzc3dvcmRfd2FybiIpWzBdLmlubmVySFRNTCA9ICcnOwoJfQoKCS8vIENoZWNrIDI6IERvIHRoZSBwYXNzd29yZHMgbWF0Y2g/CglpZiAoJCgiI2FkbWluX3Bhc3N3b3JkIilbMF0udmFsdWUg'));
	@fwrite($fp, base64_decode('IT0gJCgiI2FkbWluX3Bhc3N3b3JkMiIpWzBdLnZhbHVlKSB7CgkJJCgiI3Bhc3N3b3JkX3dhcm4yIilbMF0uaW5uZXJIVE1MID0gJzxmb250IGNvbG9yPSJyZWQiPicrX0woJ1RoZSBwYXNzd29yZHMgZG8gbm90IG1hdGNoIScpKyc8L2ZvbnQ+JzsKCQllcnJvciA9'));
	@fwrite($fp, base64_decode('IHRydWU7Cgl9IGVsc2UgewoJCSQoIiNwYXNzd29yZF93YXJuMiIpWzBdLmlubmVySFRNTCA9ICcnOwoJfQoKCS8vIENoZWNrIDM6IEFzayB0aGUgZGF0YWJhc2Ugb3IgY2FwdGNoYSBwbHVnaW5zIGZvciB2ZXJpZmljYXRpb24gb2YgdGhlaXIgZGF0YQoJZm9yICh2'));
	@fwrite($fp, base64_decode('YXIgaSA9IDA7IGkgPCByZWJ1aWxkX2NhbGxiYWNrcy5sZW5ndGg7IGkrKykgewoJCXZhciBmID0gcmVidWlsZF9jYWxsYmFja3NbaV07CgkJaWYgKCFmKCkpIHsKCQkJZXJyb3IgPSB0cnVlOwoJCX0KCX0KCgkvLyBDb250aW51ZQoJaWYgKCFlcnJvcikKCXsKCQl2'));
	@fwrite($fp, base64_decode('YXIgZSA9ICQoIiNkYl9wbHVnaW4iKVswXTsKCQl2YXIgc3RyRGF0YWJhc2VQbHVnaW4gPSBlLm9wdGlvbnNbZS5zZWxlY3RlZEluZGV4XS52YWx1ZTsKCQl2YXIgZSA9ICQoIiNjYXB0Y2hhX3BsdWdpbiIpWzBdOwoJCXZhciBzdHJDYXB0Y2hhUGx1Z2luID0gZS5v'));
	@fwrite($fp, base64_decode('cHRpb25zW2Uuc2VsZWN0ZWRJbmRleF0udmFsdWU7CgoJCSQoIiNjb25maWciKVswXS5pbm5lckhUTUwgPSAnPGI+Jmx0P3BocDwvYj48YnI+PGJyPicgKwoJCQknPGk+Ly8gVG8gcmVuZXcgdGhpcyBmaWxlLCBwbGVhc2UgcnVuIHNldHVwLyBpbiB5b3VyIGJyb3dz'));
	@fwrite($fp, base64_decode('ZXIuPC9pPjxicj4nICsgLy8gZG8gbm90IHRyYW5zbGF0ZQoJCQknPGk+Ly8gSWYgeW91IGRvblwndCB3YW50IHRvIHJ1biBzZXR1cCBhZ2FpbiwgeW91IGNhbiBhbHNvIGNoYW5nZSBtb3N0IG9mIHRoZSBzZXR0aW5ncyBkaXJlY3RseSBpbiB0aGlzIGZpbGUuPC9p'));
	@fwrite($fp, base64_decode('Pjxicj4nICsgLy8gZG8gbm90IHRyYW5zbGF0ZQoJCQknPGJyPicgKwoJCQknT0lEcGx1czo6YmFzZUNvbmZpZygpLT5zZXRWYWx1ZShcJ0NPTkZJR19WRVJTSU9OXCcsICAgIDIuMSk7PGJyPicgKwoJCQknPGJyPicgKwoJCQkvLyBQYXNzd29yZHMgYXJlIEJhc2U2'));
	@fwrite($fp, base64_decode('NCBlbmNvZGVkIHRvIGF2b2lkIHRoYXQgcGFzc3dvcmRzIGNhbiBiZSByZWFkIHVwb24gZmlyc3Qgc2lnaHQsCgkJCS8vIGUuZy4gaWYgY29sbGVndWVzIGFyZSBsb29raW5nIG92ZXIgeW91ciBzaG91bGRlciB3aGlsZSB5b3UgYWNjaWRlbnRseSBvcGVuIChhbmQg'));
	@fwrite($fp, base64_decode('cXVpY2tseSBjbG9zZSkgdXNlcmRhdGEvYmFzZWNvbmZpZy9jb25maWcuaW5jLnBocAoJCQknT0lEcGx1czo6YmFzZUNvbmZpZygpLT5zZXRWYWx1ZShcJ0FETUlOX1BBU1NXT1JEXCcsICAgIFwnJyArIGFkbVB3ZEhhc2ggKyAnXCcpOyAvLyAnK3B3Q29tbWVudCsn'));
	@fwrite($fp, base64_decode('PGJyPicgKwoJCQknPGJyPicgKwoJCQknT0lEcGx1czo6YmFzZUNvbmZpZygpLT5zZXRWYWx1ZShcJ0RBVEFCQVNFX1BMVUdJTlwnLCAgIFwnJytzdHJEYXRhYmFzZVBsdWdpbisnXCcpOzxicj4nOwoJCWZvciAodmFyIGkgPSAwOyBpIDwgcmVidWlsZF9jb25maWdf'));
	@fwrite($fp, base64_decode('Y2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7CgkJCXZhciBmID0gcmVidWlsZF9jb25maWdfY2FsbGJhY2tzW2ldOwoJCQl2YXIgY29udCA9IGYoKTsKCQkJaWYgKGNvbnQpIHsKCQkJCSQoIiNjb25maWciKVswXS5pbm5lckhUTUwgPSAkKCIjY29uZmlnIilbMF0uaW5u'));
	@fwrite($fp, base64_decode('ZXJIVE1MICsgY29udDsKCQkJfQoJCX0KCQkkKCIjY29uZmlnIilbMF0uaW5uZXJIVE1MID0gJCgiI2NvbmZpZyIpWzBdLmlubmVySFRNTCArCgkJCSc8YnI+JyArCgkJCSdPSURwbHVzOjpiYXNlQ29uZmlnKCktPnNldFZhbHVlKFwnVEFCTEVOQU1FX1BSRUZJWFwn'));
	@fwrite($fp, base64_decode('LCAgXCcnKyQoIiN0YWJsZW5hbWVfcHJlZml4IilbMF0udmFsdWUrJ1wnKTs8YnI+JyArCgkJCSc8YnI+JyArCgkJCSdPSURwbHVzOjpiYXNlQ29uZmlnKCktPnNldFZhbHVlKFwnU0VSVkVSX1NFQ1JFVFwnLCAgICAgXCcnK2dlbmVyYXRlUmFuZG9tU3RyaW5nKDMy'));
	@fwrite($fp, base64_decode('KSsnXCcpOzxicj4nICsKCQkJJzxicj4nICsKCQkJJ09JRHBsdXM6OmJhc2VDb25maWcoKS0+c2V0VmFsdWUoXCdDQVBUQ0hBX1BMVUdJTlwnLCAgICBcJycrc3RyQ2FwdGNoYVBsdWdpbisnXCcpOzxicj4nOwoJCWZvciAodmFyIGkgPSAwOyBpIDwgY2FwdGNoYV9y'));
	@fwrite($fp, base64_decode('ZWJ1aWxkX2NvbmZpZ19jYWxsYmFja3MubGVuZ3RoOyBpKyspIHsKCQkJdmFyIGYgPSBjYXB0Y2hhX3JlYnVpbGRfY29uZmlnX2NhbGxiYWNrc1tpXTsKCQkJdmFyIGNvbnQgPSBmKCk7CgkJCWlmIChjb250KSB7CgkJCQkkKCIjY29uZmlnIilbMF0uaW5uZXJIVE1M'));
	@fwrite($fp, base64_decode('ID0gJCgiI2NvbmZpZyIpWzBdLmlubmVySFRNTCArIGNvbnQ7CgkJCX0KCQl9CgoJCSQoIiNjb25maWciKVswXS5pbm5lckhUTUwgPSAkKCIjY29uZmlnIilbMF0uaW5uZXJIVE1MICsKCQkJJzxicj4nICsKCQkJJ09JRHBsdXM6OmJhc2VDb25maWcoKS0+c2V0VmFs'));
	@fwrite($fp, base64_decode('dWUoXCdFTkZPUkNFX1NTTFwnLCAgICAgICAnKyQoIiNlbmZvcmNlX3NzbCIpWzBdLnZhbHVlKycpOzxicj4nOwoKCQkkKCIjY29uZmlnIilbMF0uaW5uZXJIVE1MID0gJCgiI2NvbmZpZyIpWzBdLmlubmVySFRNTC5yZXBsYWNlQWxsKCcgJywgJyZuYnNwOycpOwoJ'));
	@fwrite($fp, base64_decode('fQoKCS8vIEluIGNhc2Ugc29tZXRoaW5nIGlzIG5vdCBnb29kLCBkbyBub3QgYWxsb3cgdGhlIHVzZXIgdG8gY29udGludWUgd2l0aCB0aGUgb3RoZXIgY29uZmlndXJhdGlvbiBzdGVwczoKCWlmIChlcnJvcikgewoJCSQoIiNzdGVwMiIpWzBdLnN0eWxlLmRpc3Bs'));
	@fwrite($fp, base64_decode('YXkgPSAiTm9uZSI7CgkJJCgiI3N0ZXAzIilbMF0uc3R5bGUuZGlzcGxheSA9ICJOb25lIjsKCQkkKCIjc3RlcDQiKVswXS5zdHlsZS5kaXNwbGF5ID0gIk5vbmUiOwoJfSBlbHNlIHsKCQkkKCIjc3RlcDIiKVswXS5zdHlsZS5kaXNwbGF5ID0gIkJsb2NrIjsKCQkk'));
	@fwrite($fp, base64_decode('KCIjc3RlcDMiKVswXS5zdHlsZS5kaXNwbGF5ID0gIkJsb2NrIjsKCQkkKCIjc3RlcDQiKVswXS5zdHlsZS5kaXNwbGF5ID0gIkJsb2NrIjsKCX0KfQoKZnVuY3Rpb24gUmVtb3ZlTGFzdERpcmVjdG9yeVBhcnRPZih0aGVfdXJsKSB7Cgl2YXIgdGhlX2FyciA9IHRo'));
	@fwrite($fp, base64_decode('ZV91cmwuc3BsaXQoJy8nKTsKCWlmICh0aGVfYXJyLnBvcCgpID09ICcnKSB0aGVfYXJyLnBvcCgpOwoJcmV0dXJuKCB0aGVfYXJyLmpvaW4oJy8nKSApOwp9CgpmdW5jdGlvbiBjaGVja0FjY2VzcyhkaXIpIHsKCWlmICghZGlyLnRvTG93ZXJDYXNlKCkuc3RhcnRz'));
	@fwrite($fp, base64_decode('V2l0aCgnaHR0cHM6JykgJiYgIWRpci50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoJ2h0dHA6JykpIHsKCQl2YXIgdXJsID0gJy4uLycgKyBkaXI7CgkJdmFyIHZpc2libGVVcmwgPSBSZW1vdmVMYXN0RGlyZWN0b3J5UGFydE9mKHdpbmRvdy5sb2NhdGlvbi5ocmVm'));
	@fwrite($fp, base64_decode('KSArICcvJyArIGRpcjsgLy8geGhyLnJlc3BvbnNlVVJMIG5vdCBhdmFpbGFibGUgaW4gSUUKCX0gZWxzZSB7CgkJdmFyIHVybCA9IGRpcjsKCQl2YXIgdmlzaWJsZVVybCA9IGRpcjsgLy8geGhyLnJlc3BvbnNlVVJMIG5vdCBhdmFpbGFibGUgaW4gSUUKCX0KCgl2'));
	@fwrite($fp, base64_decode('YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7Cgl4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7CgkJaWYgKHhoci5yZWFkeVN0YXRlID09PSA0KSB7CgkJCWlmICh4aHIuc3RhdHVzID09PSAyMDApIHsKCQkJCSQoIiNzeXN0ZW1DaGVja0Nh'));
	@fwrite($fp, base64_decode('cHRpb24iKVswXS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKCQkJCSQoIiNkaXJBY2Nlc3NXYXJuaW5nIilbMF0uaW5uZXJIVE1MID0gJCgiI2RpckFjY2Vzc1dhcm5pbmciKVswXS5pbm5lckhUTUwgKyBfTCgnQXR0ZW50aW9uOiBUaGUgZm9sbG93aW5nIGRpcmVj'));
	@fwrite($fp, base64_decode('dG9yeSBpcyB3b3JsZC1yZWFkYWJsZTogJTEgISBZb3UgbmVlZCB0byBjb25maWd1cmUgeW91ciB3ZWIgc2VydmVyIHRvIHJlc3RyaWN0IGFjY2VzcyB0byB0aGlzIGRpcmVjdG9yeSEgKEZvciBBcGFjaGUgc2VlIDxpPi5odGFjY2VzczwvaT4sIGZvciBNaWNyb3Nv'));
	@fwrite($fp, base64_decode('ZnQgSUlTIHNlZSA8aT53ZWIuY29uZmlnPC9pPiwgZm9yIE5naW54IHNlZSA8aT5uZ2lueC5jb25mPC9pPikuJywnPGEgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9IicrdXJsKyciPicrdmlzaWJsZVVybCsnPC9hPicpICsgJzxicj4nOwoJCQl9CgkJfQoJfTsKCgl4aHIu'));
	@fwrite($fp, base64_decode('b3BlbignR0VUJywgdXJsKTsKCXhoci5zZW5kKCk7Cn0KCmZ1bmN0aW9uIGRicGx1Z2luX2NoYW5nZWQoKSB7Cgl2YXIgZSA9ICQoIiNkYl9wbHVnaW4iKVswXTsKCXZhciBzdHJEYXRhYmFzZVBsdWdpbiA9IGUub3B0aW9uc1tlLnNlbGVjdGVkSW5kZXhdLnZhbHVl'));
	@fwrite($fp, base64_decode('OwoKCWZvciAodmFyIGkgPSAwOyBpIDwgcGx1Z2luX2NvbWJvYm94X2NoYW5nZV9jYWxsYmFja3MubGVuZ3RoOyBpKyspIHsKCQl2YXIgZiA9IHBsdWdpbl9jb21ib2JveF9jaGFuZ2VfY2FsbGJhY2tzW2ldOwoJCWYoc3RyRGF0YWJhc2VQbHVnaW4pOwoJfQoKCXJl'));
	@fwrite($fp, base64_decode('YnVpbGQoKTsKfQoKZnVuY3Rpb24gY2FwdGNoYXBsdWdpbl9jaGFuZ2VkKCkgewoJdmFyIGUgPSAkKCIjY2FwdGNoYV9wbHVnaW4iKVswXTsKCXZhciBzdHJDYXB0Y2hhUGx1Z2luID0gZS5vcHRpb25zW2Uuc2VsZWN0ZWRJbmRleF0udmFsdWU7CgoJZm9yICh2YXIg'));
	@fwrite($fp, base64_decode('aSA9IDA7IGkgPCBjYXB0Y2hhX3BsdWdpbl9jb21ib2JveF9jaGFuZ2VfY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7CgkJdmFyIGYgPSBjYXB0Y2hhX3BsdWdpbl9jb21ib2JveF9jaGFuZ2VfY2FsbGJhY2tzW2ldOwoJCWYoc3RyQ2FwdGNoYVBsdWdpbik7Cgl9CgoJ'));
	@fwrite($fp, base64_decode('cmVidWlsZCgpOwp9CgpmdW5jdGlvbiBwZXJmb3JtQWNjZXNzQ2hlY2soKSB7CgkkKCIjZGlyQWNjZXNzV2FybmluZyIpWzBdLmlubmVySFRNTCA9ICIiOwoJY2hlY2tBY2Nlc3MoInVzZXJkYXRhL2luZGV4Lmh0bWwiKTsKCWNoZWNrQWNjZXNzKCJyZXMvQVRURU5U'));
	@fwrite($fp, base64_decode('SU9OLlRYVCIpOwoJY2hlY2tBY2Nlc3MoImRldi9pbmRleC5odG1sIik7CgljaGVja0FjY2VzcygiaW5jbHVkZXMvaW5kZXguaHRtbCIpOwoJY2hlY2tBY2Nlc3MoInNldHVwL2luY2x1ZGVzL2luZGV4Lmh0bWwiKTsKCS8vY2hlY2tBY2Nlc3MoInBsdWdpbnMvdmlh'));
	@fwrite($fp, base64_decode('dGhpbmtzb2Z0L3B1YmxpY1BhZ2VzLzEwMF93aG9pcy93aG9pcy9jbGkvaW5kZXguaHRtbCIpOwoJCglpZiAod2luZG93LmxvY2F0aW9uLmhyZWYudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKCdodHRwczovLycpKSB7CgkJJCgiI2VuZm9yY2Vfc3NsIikudmFsKDEp'));
	@fwrite($fp, base64_decode('OyAvLyBlbmZvcmNlIFNTTCAoYmVjYXVzZSB3ZSBhcmUgYWxyZWFkeSBTU0wpCgl9IGVsc2UgewoJCS8vIERvIGEgU1NMIGRldGVjdGlvbiBub3cuCgkJLy8gVGhpcyBpcyBpbXBvcnRhbnQgYmVjYXVzZSBvbiBYQU1QUCB0aGUgU1NMIGNlcnQgaXMgaW52YWxpZCAo'));
	@fwrite($fp, base64_decode('c2VsZiBzaWduZWQpIGFuZCB0aGUgdXNlciBtaWdodAoJCS8vIGJlIHZlcnkgY29uZnVzZWQgaWYgdGhlIFBIUCBkZXRlY3Rpb24gbm90aWNlZCB0aGUgb3BlbiA0NDMgcG9ydCBhbmQgcmVkaXJlY3RzIHRoZSB1c2VyIHRvIGEKCQkvLyBiaWcgd2FybmluZyBwYWdl'));
	@fwrite($fp, base64_decode('IG9mIHRoZSBicm93c2VyIQoJCXZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKCQl4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7CgkJCWlmICh4aHIucmVhZHlTdGF0ZSA9PT0gNCkgewoJCQkJaWYgKHhoci5zdGF0dXMgPT09IDIwMCkg'));
	@fwrite($fp, base64_decode('ewoJCQkJCSQoIiNlbmZvcmNlX3NzbCIpLnZhbCgxKTsgLy8gZW5mb3JjZSBTU0wgKHdlIGNoZWNrZWQgdGhhdCBpdCBsb2FkcyBjb3JyZWN0bHkpCgkJCQl9IGVsc2UgewoJCQkJCWNvbnNvbGUubG9nKCJKUyBTU0wgZGV0ZWN0aW9uIHJlc3VsdDogIit4aHIuc3Rh'));
	@fwrite($fp, base64_decode('dHVzKTsKCQkJCQkkKCIjZW5mb3JjZV9zc2wiKS52YWwoMCk7IC8vIGRpc2FibGUgU1NMIChiZWNhdXNlIGl0IGZhaWxlZCwgZS5nLiBiZWNhdXNlIG9mIGludmFsaWQgY2VydCBvciBjbG9zZWQgcG9ydCkKCQkJCX0KCQkJfQoJCX07CgkJdmFyIGh0dHBzX3VybCA9'));
	@fwrite($fp, base64_decode('IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoL15odHRwOi9pLCAiaHR0cHM6Iik7CgkJeGhyLm9wZW4oJ0dFVCcsIGh0dHBzX3VybCk7CgkJeGhyLnNlbmQoKTsKCX0KfQoKZnVuY3Rpb24gc2V0dXBPbkxvYWQoKSB7CglyZWJ1aWxkKCk7CglkYnBsdWdpbl9j'));
	@fwrite($fp, base64_decode('aGFuZ2VkKCk7CgljYXB0Y2hhcGx1Z2luX2NoYW5nZWQoKTsKCXBlcmZvcm1BY2Nlc3NDaGVjaygpOwp9CgpmdW5jdGlvbiBnZXRDb29raWUoY25hbWUpIHsKCS8vIFNvdXJjZTogaHR0cHM6Ly93d3cudzNzY2hvb2xzLmNvbS9qcy9qc19jb29raWVzLmFzcAoJdmFy'));
	@fwrite($fp, base64_decode('IG5hbWUgPSBjbmFtZSArICI9IjsKCXZhciBkZWNvZGVkQ29va2llID0gZGVjb2RlVVJJQ29tcG9uZW50KGRvY3VtZW50LmNvb2tpZSk7Cgl2YXIgY2EgPSBkZWNvZGVkQ29va2llLnNwbGl0KCc7Jyk7Cglmb3IodmFyIGkgPSAwOyBpIDxjYS5sZW5ndGg7IGkrKykg'));
	@fwrite($fp, base64_decode('ewoJCXZhciBjID0gY2FbaV07CgkJd2hpbGUgKGMuY2hhckF0KDApID09ICcgJykgewoJCQljID0gYy5zdWJzdHJpbmcoMSk7CgkJfQoJCWlmIChjLmluZGV4T2YobmFtZSkgPT0gMCkgewoJCQlyZXR1cm4gYy5zdWJzdHJpbmcobmFtZS5sZW5ndGgsIGMubGVuZ3Ro'));
	@fwrite($fp, base64_decode('KTsKCQl9Cgl9CglyZXR1cm4gdW5kZWZpbmVkOwp9CgpmdW5jdGlvbiBnZXRDdXJyZW50TGFuZygpIHsKCS8vIE5vdGU6IElmIHRoZSBhcmd1bWVudCAiP2xhbmc9IiBpcyB1c2VkLCBQSFAgd2lsbCBhdXRvbWF0aWNhbGx5IHNldCBhIENvb2tpZSwgc28gaXQgaXMg'));
	@fwrite($fp, base64_decode('T0sgd2hlbiB3ZSBvbmx5IGNoZWNrIGZvciB0aGUgY29va2llCgl2YXIgbGFuZyA9IGdldENvb2tpZSgnTEFOR1VBR0UnKTsKCXJldHVybiAodHlwZW9mIGxhbmcgIT0gInVuZGVmaW5lZCIpID8gbGFuZyA6IERFRkFVTFRfTEFOR1VBR0U7Cn0KCmZ1bmN0aW9uIF9M'));
	@fwrite($fp, base64_decode('KCkgewoJdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpOwoJdmFyIHN0ciA9IGFyZ3Muc2hpZnQoKS50cmltKCk7CgoJdmFyIHRtcCA9ICIiOwoJaWYgKHR5cGVvZiBsYW5ndWFnZV9tZXNzYWdlc1tnZXRDdXJyZW50TGFuZygp'));
	@fwrite($fp, base64_decode('XSA9PSAidW5kZWZpbmVkIikgewoJCXRtcCA9IHN0cjsKCX0gZWxzZSB7CgkJdmFyIG1zZyA9IGxhbmd1YWdlX21lc3NhZ2VzW2dldEN1cnJlbnRMYW5nKCldW3N0cl07CgkJaWYgKHR5cGVvZiBtc2cgIT0gInVuZGVmaW5lZCIpIHsKCQkJdG1wID0gbXNnOwoJCX0g'));
	@fwrite($fp, base64_decode('ZWxzZSB7CgkJCXRtcCA9IHN0cjsKCQl9Cgl9CgoJdG1wID0gdG1wLnJlcGxhY2UoJyMjIycsIGxhbmd1YWdlX3RibHByZWZpeCk7CgoJdmFyIG4gPSAxOwoJd2hpbGUgKGFyZ3MubGVuZ3RoID4gMCkgewoJCXZhciB2YWwgPSBhcmdzLnNoaWZ0KCk7CgkJdG1wID0g'));
	@fwrite($fp, base64_decode('dG1wLnJlcGxhY2UoIiUiK24sIHZhbCk7CgkJbisrOwoJfQoKCXRtcCA9IHRtcC5yZXBsYWNlKCIlJSIsICIlIik7CgoJcmV0dXJuIHRtcDsKfQoKd2luZG93Lm9ubG9hZCA9IHNldHVwT25Mb2FkOwo='));
	@fclose($fp);
}
if (!is_file('setup/includes/setup_base.js')) {
	warn('File has vanished! Will re-create it: setup/includes/setup_base.js');
	writefile_1();
	if (!is_file('setup/includes/setup_base.js')) {
		warn('File cannot be created (not existing): setup/includes/setup_base.js');
	} else if (sha1_file('setup/includes/setup_base.js') != '0900b9ee0a0567b2fff863e244cd83f2269f500b') {
		warn('File cannot be created (checksum mismatch): setup/includes/setup_base.js');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('setup/includes/setup_base.js', 0644)) {
		warn('Could not change file permissions of setup/includes/setup_base.js');
	}
} else {
	if (@sha1_file('setup/includes/setup_base.js') !== '0900b9ee0a0567b2fff863e244cd83f2269f500b') {
		if (@sha1_file('setup/includes/setup_base.js') !== '7d4a9a59d38ee7dd100e15be87cd987c0cfeefc3') {
			warn('File was modified. Will overwrite the changes now: setup/includes/setup_base.js');
			$tmp = pathinfo('setup/includes/setup_base.js');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('setup/includes/setup_base.js')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('setup/includes/setup_base.js', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('setup/includes/setup_base.js') !== '0900b9ee0a0567b2fff863e244cd83f2269f500b') {
			warn('File cannot be written (checksum mismatch): setup/includes/setup_base.js');
		}
	}
}


file_put_contents('.version.php', "<?php // Revision 706\n");
if (trim(@file_get_contents('.version.php')) !== '<?php // Revision 706') err('Could not write to .version.php!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

