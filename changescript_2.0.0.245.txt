<?php /* <ViaThinkSoftSignature>
RKclywK6XBz2uKjfKjQD462LtcEj1v18f7swDbo7XkIZgNwzg8PxLi9ofsV6/ntSc
Xoe4yGVt8Ql2ANOesAnIcGwcfJiMUlMWYKJoWXDwSzIxwgko2wGPoKlOEnFk6Evds
xvg1MMKYWGA7683hOm8/X3NaV3ar3hjIxOWc+hz0DAQSleNRpTORcIM8KiF2o6Wry
lumBZRVIH7warh7L6EkNf6kAmhWTs0zJ9z17CQvzY2uT0zgqzNAZKsLB9apF+wtMI
9dJNK6t+mxnjHtTpN1DAuXWLLxPe96bidEv7I9B8iDmnW7bdVdieP14fYls+e635k
DLJaT1ZG+/1rgXKmJ6fkYnANw6nm2lfy3oP1QhaY++iVqqadaDnotDN7vWeodsUhK
0KZw49JiK4SxBPKZyvMTvnvWbYpj0ibSr5ABXysmQTkx6JIFR1Iyhx0Oiigm18F84
HXl8LgIag4Pbs7aWgmPFha3cxhXiNQRYVRRRwqSHxc3WJV5B1PJiurKcyiPx4d7sF
M/VPGbf5edamexnsuTfjesJJNH94wlMqoMe39/BXqYcbkrbLWgvJlLQdh7hWMJ/3y
O00wIE2qs5IzT1O0HgGFsyay1fXjUOGmU55i20WMmmW2YyDFwu9T0+Xjb+oRK2Bp4
UIHXAixuQdqikbDDM0bZS2hsxZiDxVwDkUxW9sZCuJBLgBSJhp11/bMWtROOwQ9cQ
0eGa2Z6/95pGb0FWZabvQK9JmPWj92CJCXkZeBGVMEKkI/xyOixFKwwvKF+wiGR+9
h8E8YZsHfK7NaAGGCciZgdQ9pKUYJc9NDoBny+3yEBYUKLAs54erHh2z7cVmmti8j
pgrpYEsRSMy3i5smnH4Pa95QBaCgKrc0ezhM7yfbhBixWCxwtPDvW2p6/Nlp8SxeN
duBi6A2mO+TMdMah+ZKdKCAvlsGdmM8iFHKSyCFEzT2si+e1J4PE9HcN7Tuj0Et/B
R9+NSQSIcdoPeQWrz5wonBmQ6Ex7xbS4a9QFrnFWzStCZpUYYzt+g1/m6Z1hTKvMW
5uQqPr1MG57daRaU3N9oyznJe9QIxnYel0nfP6mCaaVbIamNviLErHmOKmWyF8M7h
QwJE5bxv5FMjW7IYo0jQJGLDb/tzjzQ0MPFKvzwWmTVaTjh23p5UDbM8+shK7Afx0
CM55BbWwWqTlknhkwg2POSZR1HlPemObSu6EN5/lo3Pa9J+xJ8pW65zEltLl/ZOHH
XiQoAzJTyw3mAYqo/tt+ECFP44yheL5BSPr3S3YJBHY4wsBm0xG/z1IKIv7wNur2U
mGSfRFAxpl9M3gYHtJlIW0GSIUgR9JDAVtBTUQLQGG8Ewi+0fI6o98a6YTByrOBHW
Q==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 244') {
	err('This update can only be applied to OIDplus version 2.0.0.244!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Dir added: includes/db_updates
@mkdir('includes/db_updates');
if (!is_dir('includes/db_updates')) {
	warn('Directory could not be created: includes/db_updates');
} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/db_updates', 0755)) {
	warn('Could not change directory permissions of includes/db_updates');
}

// File added: includes/db_updates/update200.inc.php
function writefile_1() {
	@$fp = fopen('includes/db_updates/update200.inc.php', 'w');
	@fwrite($fp, base64_decode('PD9waHANCg0KLyoNCiAqIE9JRHBsdXMgMi4wDQogKiBDb3B5cmlnaHQgMjAyMCBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQNCiAqDQogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsN'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4NCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KICoNCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGlj'));
	@fwrite($fp, base64_decode('ZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlDQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAi'));
	@fwrite($fp, base64_decode('QVMgSVMiIEJBU0lTLA0KICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuDQogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVy'));
	@fwrite($fp, base64_decode('bWlzc2lvbnMgYW5kDQogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCiAqLw0KDQovLyBEQVRBQkFTRSBVUERBVEUgMjAwIC0+IDIwMQ0KLy8gVGhpcyBzY3JpcHQgd2lsbCBiZSBpbmNsdWRlZCBieSBPSURwbHVzRGF0YUJhc2VQbHVnaW4uY2xhc3Mu'));
	@fwrite($fp, base64_decode('cGhwIGluc2lkZSBmdW5jdGlvbiBhZnRlckNvbm5lY3QoKS4NCi8vIFBhcmFtZXRlcnM6ICR0aGlzIGlzIHRoZSBPSURwbHVzRGF0YUJhc2VQbHVnaW4gY2xhc3MNCi8vICAgICAgICAgICAgICR2ZXJzaW9uIGlzIHRoZSBjdXJyZW50IHZlcnNpb24gKHRoaXMgc2Ny'));
	@fwrite($fp, base64_decode('aXB0IE1VU1QgaW5jcmVhc2UgdGhlIG51bWJlciBieSAxIHdoZW4gaXQgaXMgZG9uZSkNCg0KaWYgKCFkZWZpbmVkKCdJTl9PSURQTFVTJykpIGRpZSgpOw0KDQppZiAoIWlzc2V0KCR2ZXJzaW9uKSkgdGhyb3cgbmV3IEV4Y2VwdGlvbigiQXJndW1lbnQgJ3ZlcnNp'));
	@fwrite($fp, base64_decode('b24nIGlzIG1pc3Npbmc7IHdhcyB0aGUgZmlsZSBpbmNsdWRlZCBpbiBhIHdyb25nIHdheT8iKTsNCmlmICghaXNzZXQoJHRoaXMpKSAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCJBcmd1bWVudCAndGhpcycgaXMgbWlzc2luZzsgd2FzIHRoZSBmaWxlIGluY2x1ZGVk'));
	@fwrite($fp, base64_decode('IGluIGEgd3Jvbmcgd2F5PyIpOw0KDQokdGhpcy0+dHJhbnNhY3Rpb25fYmVnaW4oKTsNCg0KJHRoaXMtPnF1ZXJ5KCJBTFRFUiBUQUJMRSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4ib2JqZWN0cyBBREQgY29tbWVudCB2YXJjaGFyKDI1NSkgTlVMTCIpOw0K'));
	@fwrite($fp, base64_decode('DQokdmVyc2lvbiA9IDIwMTsNCiR0aGlzLT5xdWVyeSgiVVBEQVRFICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJjb25maWcgU0VUIHZhbHVlID0gPyBXSEVSRSBuYW1lID0gJ2RhdGFiYXNlX3ZlcnNpb24nIiwgYXJyYXkoJHZlcnNpb24pKTsNCg0KJHRoaXMt'));
	@fwrite($fp, base64_decode('PnRyYW5zYWN0aW9uX2NvbW1pdCgpOw0K'));
	@fclose($fp);
}
if (is_file('includes/db_updates/update200.inc.php') && (sha1_file('includes/db_updates/update200.inc.php') != 'bde1e1d66bbd7e9141e8ca08798a547f343ceefe')) {
	warn('File was created by someone else. Will overwrite the changes now: includes/db_updates/update200.inc.php');
	$tmp = pathinfo('includes/db_updates/update200.inc.php');
	$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/db_updates/update200.inc.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
	warn('Creating a backup as '.$backup_name);
	if (!@copy('includes/db_updates/update200.inc.php', $backup_name)) {
		warn('Creation of backup failed');
	}
}
writefile_1();
if (!is_file('includes/db_updates/update200.inc.php')) {
	warn('File cannot be created (not existing): includes/db_updates/update200.inc.php');
} else if (sha1_file('includes/db_updates/update200.inc.php') != 'bde1e1d66bbd7e9141e8ca08798a547f343ceefe') {
	warn('File cannot be created (checksum mismatch): includes/db_updates/update200.inc.php');
} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/db_updates/update200.inc.php', 0644)) {
	warn('Could not change file permissions of includes/db_updates/update200.inc.php');
}

// File added: includes/db_updates/update201.inc.php
function writefile_2() {
	@$fp = fopen('includes/db_updates/update201.inc.php', 'w');
	@fwrite($fp, base64_decode('PD9waHANCg0KLyoNCiAqIE9JRHBsdXMgMi4wDQogKiBDb3B5cmlnaHQgMjAyMCBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQNCiAqDQogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsN'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4NCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KICoNCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGlj'));
	@fwrite($fp, base64_decode('ZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlDQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAi'));
	@fwrite($fp, base64_decode('QVMgSVMiIEJBU0lTLA0KICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuDQogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVy'));
	@fwrite($fp, base64_decode('bWlzc2lvbnMgYW5kDQogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCiAqLw0KDQovLyBEQVRBQkFTRSBVUERBVEUgMjAxIC0+IDIwMg0KLy8gVGhpcyBzY3JpcHQgd2lsbCBiZSBpbmNsdWRlZCBieSBPSURwbHVzRGF0YUJhc2VQbHVnaW4uY2xhc3Mu'));
	@fwrite($fp, base64_decode('cGhwIGluc2lkZSBmdW5jdGlvbiBhZnRlckNvbm5lY3QoKS4NCi8vIFBhcmFtZXRlcnM6ICR0aGlzIGlzIHRoZSBPSURwbHVzRGF0YUJhc2VQbHVnaW4gY2xhc3MNCi8vICAgICAgICAgICAgICR2ZXJzaW9uIGlzIHRoZSBjdXJyZW50IHZlcnNpb24gKHRoaXMgc2Ny'));
	@fwrite($fp, base64_decode('aXB0IE1VU1QgaW5jcmVhc2UgdGhlIG51bWJlciBieSAxIHdoZW4gaXQgaXMgZG9uZSkNCg0KJHRoaXMtPnRyYW5zYWN0aW9uX2JlZ2luKCk7DQoNCmlmICghaXNzZXQoJHZlcnNpb24pKSB0aHJvdyBuZXcgRXhjZXB0aW9uKCJBcmd1bWVudCAndmVyc2lvbicgaXMg'));
	@fwrite($fp, base64_decode('bWlzc2luZzsgd2FzIHRoZSBmaWxlIGluY2x1ZGVkIGluIGEgd3Jvbmcgd2F5PyIpOw0KaWYgKCFpc3NldCgkdGhpcykpICAgIHRocm93IG5ldyBFeGNlcHRpb24oIkFyZ3VtZW50ICd0aGlzJyBpcyBtaXNzaW5nOyB3YXMgdGhlIGZpbGUgaW5jbHVkZWQgaW4gYSB3'));
	@fwrite($fp, base64_decode('cm9uZyB3YXk/Iik7DQoNCi8vIENoYW5nZSBiaXQoMSkgdHlwZXMgdG8gYm9vbGVhbi90aW55aW50KDEpDQppZiAoJHRoaXMtPnNsYW5nKCkgPT0gJ3Bnc3FsJykgew0KCSR0aGlzLT5xdWVyeSgiYWx0ZXIgdGFibGUgIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVgu'));
	@fwrite($fp, base64_decode('ImNvbmZpZyAgYWx0ZXIgcHJvdGVjdGVkICAgIGRyb3AgZGVmYXVsdCIpOw0KCSR0aGlzLT5xdWVyeSgiYWx0ZXIgdGFibGUgIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguImNvbmZpZyAgYWx0ZXIgcHJvdGVjdGVkICAgIHR5cGUgYm9vbGVhbiB1c2luZyBnZXRf'));
	@fwrite($fp, base64_decode('Yml0KHByb3RlY3RlZCAgICwwKTo6Ym9vbGVhbiIpOw0KCSR0aGlzLT5xdWVyeSgiYWx0ZXIgdGFibGUgIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguImNvbmZpZyAgYWx0ZXIgcHJvdGVjdGVkICAgIHNldCBkZWZhdWx0IGZhbHNlIik7DQoNCgkkdGhpcy0+cXVl'));
	@fwrite($fp, base64_decode('cnkoImFsdGVyIHRhYmxlICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJjb25maWcgIGFsdGVyIHZpc2libGUgICAgICBkcm9wIGRlZmF1bHQiKTsNCgkkdGhpcy0+cXVlcnkoImFsdGVyIHRhYmxlICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJjb25maWcg'));
	@fwrite($fp, base64_decode('IGFsdGVyIHZpc2libGUgICAgICB0eXBlIGJvb2xlYW4gdXNpbmcgZ2V0X2JpdCh2aXNpYmxlICAgICAsMCk6OmJvb2xlYW4iKTsNCgkkdGhpcy0+cXVlcnkoImFsdGVyIHRhYmxlICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJjb25maWcgIGFsdGVyIHZpc2li'));
	@fwrite($fp, base64_decode('bGUgICAgICBzZXQgZGVmYXVsdCBmYWxzZSIpOw0KDQoJJHRoaXMtPnF1ZXJ5KCJhbHRlciB0YWJsZSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4iYXNuMWlkICBhbHRlciBzdGFuZGFyZGl6ZWQgZHJvcCBkZWZhdWx0Iik7DQoJJHRoaXMtPnF1ZXJ5KCJhbHRl'));
	@fwrite($fp, base64_decode('ciB0YWJsZSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4iYXNuMWlkICBhbHRlciBzdGFuZGFyZGl6ZWQgdHlwZSBib29sZWFuIHVzaW5nIGdldF9iaXQoc3RhbmRhcmRpemVkLDApOjpib29sZWFuIik7DQoJJHRoaXMtPnF1ZXJ5KCJhbHRlciB0YWJsZSAiLk9J'));
	@fwrite($fp, base64_decode('RFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4iYXNuMWlkICBhbHRlciBzdGFuZGFyZGl6ZWQgc2V0IGRlZmF1bHQgZmFsc2UiKTsNCg0KCSR0aGlzLT5xdWVyeSgiYWx0ZXIgdGFibGUgIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguImFzbjFpZCAgYWx0ZXIgd2VsbF9r'));
	@fwrite($fp, base64_decode('bm93biAgIGRyb3AgZGVmYXVsdCIpOw0KCSR0aGlzLT5xdWVyeSgiYWx0ZXIgdGFibGUgIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguImFzbjFpZCAgYWx0ZXIgd2VsbF9rbm93biAgIHR5cGUgYm9vbGVhbiB1c2luZyBnZXRfYml0KHdlbGxfa25vd24gICwwKTo6'));
	@fwrite($fp, base64_decode('Ym9vbGVhbiIpOw0KCSR0aGlzLT5xdWVyeSgiYWx0ZXIgdGFibGUgIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguImFzbjFpZCAgYWx0ZXIgd2VsbF9rbm93biAgIHNldCBkZWZhdWx0IGZhbHNlIik7DQoNCgkkdGhpcy0+cXVlcnkoImFsdGVyIHRhYmxlICIuT0lE'));
	@fwrite($fp, base64_decode('UExVU19UQUJMRU5BTUVfUFJFRklYLiJpcmkgICAgIGFsdGVyIGxvbmdhcmMgICAgICBkcm9wIGRlZmF1bHQiKTsNCgkkdGhpcy0+cXVlcnkoImFsdGVyIHRhYmxlICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJpcmkgICAgIGFsdGVyIGxvbmdhcmMgICAgICB0'));
	@fwrite($fp, base64_decode('eXBlIGJvb2xlYW4gdXNpbmcgZ2V0X2JpdChsb25nYXJjICAgICAsMCk6OmJvb2xlYW4iKTsNCgkkdGhpcy0+cXVlcnkoImFsdGVyIHRhYmxlICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJpcmkgICAgIGFsdGVyIGxvbmdhcmMgICAgICBzZXQgZGVmYXVsdCBm'));
	@fwrite($fp, base64_decode('YWxzZSIpOw0KDQoJJHRoaXMtPnF1ZXJ5KCJhbHRlciB0YWJsZSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4iaXJpICAgICBhbHRlciB3ZWxsX2tub3duICAgZHJvcCBkZWZhdWx0Iik7DQoJJHRoaXMtPnF1ZXJ5KCJhbHRlciB0YWJsZSAiLk9JRFBMVVNfVEFC'));
	@fwrite($fp, base64_decode('TEVOQU1FX1BSRUZJWC4iaXJpICAgICBhbHRlciB3ZWxsX2tub3duICAgdHlwZSBib29sZWFuIHVzaW5nIGdldF9iaXQod2VsbF9rbm93biAgLDApOjpib29sZWFuIik7DQoJJHRoaXMtPnF1ZXJ5KCJhbHRlciB0YWJsZSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJ'));
	@fwrite($fp, base64_decode('WC4iaXJpICAgICBhbHRlciB3ZWxsX2tub3duICAgc2V0IGRlZmF1bHQgZmFsc2UiKTsNCg0KCSR0aGlzLT5xdWVyeSgiYWx0ZXIgdGFibGUgIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguIm9iamVjdHMgYWx0ZXIgY29uZmlkZW50aWFsIHR5cGUgYm9vbGVhbiB1'));
	@fwrite($fp, base64_decode('c2luZyBnZXRfYml0KGNvbmZpZGVudGlhbCwwKTo6Ym9vbGVhbiIpOw0KDQoJJHRoaXMtPnF1ZXJ5KCJhbHRlciB0YWJsZSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4icmEgICAgICBhbHRlciBwcml2YWN5ICAgICAgZHJvcCBkZWZhdWx0Iik7DQoJJHRoaXMt'));
	@fwrite($fp, base64_decode('PnF1ZXJ5KCJhbHRlciB0YWJsZSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4icmEgICAgICBhbHRlciBwcml2YWN5ICAgICAgdHlwZSBib29sZWFuIHVzaW5nIGdldF9iaXQocHJpdmFjeSAgICAgLDApOjpib29sZWFuIik7DQoJJHRoaXMtPnF1ZXJ5KCJhbHRl'));
	@fwrite($fp, base64_decode('ciB0YWJsZSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4icmEgICAgICBhbHRlciBwcml2YWN5ICAgICAgc2V0IGRlZmF1bHQgZmFsc2UiKTsNCn0gZWxzZSBpZiAoJHRoaXMtPnNsYW5nKCkgPT0gJ215c3FsJykgew0KCSR0aGlzLT5xdWVyeSgiYWx0ZXIgdGFi'));
	@fwrite($fp, base64_decode('bGUgIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguImNvbmZpZyAgbW9kaWZ5IHByb3RlY3RlZCAgICBib29sZWFuIik7DQoJJHRoaXMtPnF1ZXJ5KCJhbHRlciB0YWJsZSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4iY29uZmlnICBtb2RpZnkgdmlzaWJsZSAg'));
	@fwrite($fp, base64_decode('ICAgIGJvb2xlYW4iKTsNCgkkdGhpcy0+cXVlcnkoImFsdGVyIHRhYmxlICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJhc24xaWQgIG1vZGlmeSBzdGFuZGFyZGl6ZWQgYm9vbGVhbiIpOw0KCSR0aGlzLT5xdWVyeSgiYWx0ZXIgdGFibGUgIi5PSURQTFVTX1RB'));
	@fwrite($fp, base64_decode('QkxFTkFNRV9QUkVGSVguImFzbjFpZCAgbW9kaWZ5IHdlbGxfa25vd24gICBib29sZWFuIik7DQoJJHRoaXMtPnF1ZXJ5KCJhbHRlciB0YWJsZSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4iaXJpICAgICBtb2RpZnkgbG9uZ2FyYyAgICAgIGJvb2xlYW4iKTsN'));
	@fwrite($fp, base64_decode('CgkkdGhpcy0+cXVlcnkoImFsdGVyIHRhYmxlICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJpcmkgICAgIG1vZGlmeSB3ZWxsX2tub3duICAgYm9vbGVhbiIpOw0KCSR0aGlzLT5xdWVyeSgiYWx0ZXIgdGFibGUgIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVgu'));
	@fwrite($fp, base64_decode('Im9iamVjdHMgbW9kaWZ5IGNvbmZpZGVudGlhbCBib29sZWFuIik7DQoJJHRoaXMtPnF1ZXJ5KCJhbHRlciB0YWJsZSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4icmEgICAgICBtb2RpZnkgcHJpdmFjeSAgICAgIGJvb2xlYW4iKTsNCn0NCg0KLy8gUmVuYW1l'));
	@fwrite($fp, base64_decode('IGxvZ191c2VyLnVzZXIgdG8gbG9nX3VzZXIudXNlcm5hbWUsIHNpbmNlIHVzZXIgaXMgYSBrZXl3b3JkIGluIFBvc3RncmVTUUwgYW5kIE1TU1FMDQppZiAoJHRoaXMtPnNsYW5nKCkgPT0gJ3Bnc3FsJykgew0KCSR0aGlzLT5xdWVyeSgiYWx0ZXIgdGFibGUgIi5P'));
	@fwrite($fp, base64_decode('SURQTFVTX1RBQkxFTkFNRV9QUkVGSVguImxvZ191c2VyIHJlbmFtZSBjb2x1bW4gXCJ1c2VyXCIgdG8gXCJ1c2VybmFtZVwiIik7DQp9IGVsc2UgaWYgKCR0aGlzLT5zbGFuZygpID09ICdteXNxbCcpIHsNCgkkdGhpcy0+cXVlcnkoImFsdGVyIHRhYmxlICIuT0lE'));
	@fwrite($fp, base64_decode('UExVU19UQUJMRU5BTUVfUFJFRklYLiJsb2dfdXNlciBjaGFuZ2UgYHVzZXJgIGB1c2VybmFtZWAgdmFyY2hhcigyNTUpIE5PVCBOVUxMIik7DQp9DQoNCiR2ZXJzaW9uID0gMjAyOw0KJHRoaXMtPnF1ZXJ5KCJVUERBVEUgIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVG'));
	@fwrite($fp, base64_decode('SVguImNvbmZpZyBTRVQgdmFsdWUgPSA/IFdIRVJFIG5hbWUgPSAnZGF0YWJhc2VfdmVyc2lvbiciLCBhcnJheSgkdmVyc2lvbikpOw0KDQokdGhpcy0+dHJhbnNhY3Rpb25fY29tbWl0KCk7DQo='));
	@fclose($fp);
}
if (is_file('includes/db_updates/update201.inc.php') && (sha1_file('includes/db_updates/update201.inc.php') != 'dcce07764560a07e5cf7d5357d6ba3212175c5f6')) {
	warn('File was created by someone else. Will overwrite the changes now: includes/db_updates/update201.inc.php');
	$tmp = pathinfo('includes/db_updates/update201.inc.php');
	$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/db_updates/update201.inc.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
	warn('Creating a backup as '.$backup_name);
	if (!@copy('includes/db_updates/update201.inc.php', $backup_name)) {
		warn('Creation of backup failed');
	}
}
writefile_2();
if (!is_file('includes/db_updates/update201.inc.php')) {
	warn('File cannot be created (not existing): includes/db_updates/update201.inc.php');
} else if (sha1_file('includes/db_updates/update201.inc.php') != 'dcce07764560a07e5cf7d5357d6ba3212175c5f6') {
	warn('File cannot be created (checksum mismatch): includes/db_updates/update201.inc.php');
} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/db_updates/update201.inc.php', 0644)) {
	warn('Could not change file permissions of includes/db_updates/update201.inc.php');
}

// File added: includes/db_updates/update202.inc.php
function writefile_3() {
	@$fp = fopen('includes/db_updates/update202.inc.php', 'w');
	@fwrite($fp, base64_decode('PD9waHANCg0KLyoNCiAqIE9JRHBsdXMgMi4wDQogKiBDb3B5cmlnaHQgMjAyMCBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQNCiAqDQogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsN'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4NCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KICoNCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGlj'));
	@fwrite($fp, base64_decode('ZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlDQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAi'));
	@fwrite($fp, base64_decode('QVMgSVMiIEJBU0lTLA0KICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuDQogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVy'));
	@fwrite($fp, base64_decode('bWlzc2lvbnMgYW5kDQogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCiAqLw0KDQovLyBEQVRBQkFTRSBVUERBVEUgMjAyIC0+IDIwMw0KLy8gVGhpcyBzY3JpcHQgd2lsbCBiZSBpbmNsdWRlZCBieSBPSURwbHVzRGF0YUJhc2VQbHVnaW4uY2xhc3Mu'));
	@fwrite($fp, base64_decode('cGhwIGluc2lkZSBmdW5jdGlvbiBhZnRlckNvbm5lY3QoKS4NCi8vIFBhcmFtZXRlcnM6ICR0aGlzIGlzIHRoZSBPSURwbHVzRGF0YUJhc2VQbHVnaW4gY2xhc3MNCi8vICAgICAgICAgICAgICR2ZXJzaW9uIGlzIHRoZSBjdXJyZW50IHZlcnNpb24gKHRoaXMgc2Ny'));
	@fwrite($fp, base64_decode('aXB0IE1VU1QgaW5jcmVhc2UgdGhlIG51bWJlciBieSAxIHdoZW4gaXQgaXMgZG9uZSkNCg0KaWYgKCFpc3NldCgkdmVyc2lvbikpIHRocm93IG5ldyBFeGNlcHRpb24oIkFyZ3VtZW50ICd2ZXJzaW9uJyBpcyBtaXNzaW5nOyB3YXMgdGhlIGZpbGUgaW5jbHVkZWQg'));
	@fwrite($fp, base64_decode('aW4gYSB3cm9uZyB3YXk/Iik7DQppZiAoIWlzc2V0KCR0aGlzKSkgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbigiQXJndW1lbnQgJ3RoaXMnIGlzIG1pc3Npbmc7IHdhcyB0aGUgZmlsZSBpbmNsdWRlZCBpbiBhIHdyb25nIHdheT8iKTsNCg0KJHRoaXMtPnRyYW5zYWN0'));
	@fwrite($fp, base64_decode('aW9uX2JlZ2luKCk7DQoNCmlmICgkdGhpcy0+c2xhbmcoKSA9PSAnbXNzcWwnKSB7DQoJJHNxbCA9ICJDUkVBVEUgRlVOQ1RJT04gW2Rib10uW2dldE9pZEFyY10gKEBzdHJMaXN0IHZhcmNoYXIoNTEyKSwgQG1heEFyY0xlbiBpbnQsIEBvY2N1cmVuY2UgaW50KQ0K'));
	@fwrite($fp, base64_decode('CVJFVFVSTlMgdmFyY2hhcig1MTIpIEFTDQoJQkVHSU4gDQoJCURFQ0xBUkUgQGludFBvcyBpbnQNCg0KCQlERUNMQVJFIEBjbnQgaW50DQoJCVNFVCBAY250ID0gMA0KDQoJCWlmIFNVQlNUUklORyhAc3RyTGlzdCwgMSwgNCkgPD4gJ29pZDonDQoJCWJlZ2luDQoJ'));
	@fwrite($fp, base64_decode('CQlSRVRVUk4gJycNCgkJZW5kDQoNCgkJU0VUIEBzdHJMaXN0ID0gUklHSFQoQHN0ckxpc3QsIExFTihAc3RyTGlzdCktNCkNCg0KCQlXSElMRSBDSEFSSU5ERVgoJy4nLEBzdHJMaXN0KSA+IDANCgkJQkVHSU4NCgkJCVNFVCBAaW50UG9zPUNIQVJJTkRFWCgnLics'));
	@fwrite($fp, base64_decode('QHN0ckxpc3QpIA0KCQkJU0VUIEBjbnQgPSBAY250ICsgMQ0KCQkJSUYgQGNudCA9IEBvY2N1cmVuY2UNCgkJCUJFR0lODQoJCQkJU0VUIEBzdHJMaXN0ID0gTEVGVChAc3RyTGlzdCxAaW50UG9zLTEpDQoJCQkJUkVUVVJOIFJFUExJQ0FURSgnMCcsIEBtYXhBcmNM'));
	@fwrite($fp, base64_decode('ZW4tbGVuKEBzdHJMaXN0KSkgKyBAc3RyTGlzdA0KCQkJRU5EDQoJCQlTRVQgQHN0ckxpc3QgPSBSSUdIVChAc3RyTGlzdCwgTEVOKEBzdHJMaXN0KS1AaW50UG9zKQ0KCQlFTkQNCgkJSUYgTEVOKEBzdHJMaXN0KSA+IDANCgkJQkVHSU4NCgkJCVNFVCBAY250ID0g'));
	@fwrite($fp, base64_decode('QGNudCArIDENCgkJCUlGIEBjbnQgPSBAb2NjdXJlbmNlDQoJCQlCRUdJTg0KCQkJCVJFVFVSTiBSRVBMSUNBVEUoJzAnLCBAbWF4QXJjTGVuLWxlbihAc3RyTGlzdCkpICsgQHN0ckxpc3QNCgkJCUVORA0KCQlFTkQNCg0KCQlSRVRVUk4gUkVQTElDQVRFKCcwJywg'));
	@fwrite($fp, base64_decode('QG1heEFyY0xlbikNCglFTkQiOw0KCSR0aGlzLT5xdWVyeSgkc3FsKTsNCn0NCg0KJHZlcnNpb24gPSAyMDM7DQokdGhpcy0+cXVlcnkoIlVQREFURSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4iY29uZmlnIFNFVCB2YWx1ZSA9ID8gV0hFUkUgbmFtZSA9ICdk'));
	@fwrite($fp, base64_decode('YXRhYmFzZV92ZXJzaW9uJyIsIGFycmF5KCR2ZXJzaW9uKSk7DQoNCiR0aGlzLT50cmFuc2FjdGlvbl9jb21taXQoKTsNCg=='));
	@fclose($fp);
}
if (is_file('includes/db_updates/update202.inc.php') && (sha1_file('includes/db_updates/update202.inc.php') != 'bbb2d5b74c483cff421d43a597013e0731323579')) {
	warn('File was created by someone else. Will overwrite the changes now: includes/db_updates/update202.inc.php');
	$tmp = pathinfo('includes/db_updates/update202.inc.php');
	$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/db_updates/update202.inc.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
	warn('Creating a backup as '.$backup_name);
	if (!@copy('includes/db_updates/update202.inc.php', $backup_name)) {
		warn('Creation of backup failed');
	}
}
writefile_3();
if (!is_file('includes/db_updates/update202.inc.php')) {
	warn('File cannot be created (not existing): includes/db_updates/update202.inc.php');
} else if (sha1_file('includes/db_updates/update202.inc.php') != 'bbb2d5b74c483cff421d43a597013e0731323579') {
	warn('File cannot be created (checksum mismatch): includes/db_updates/update202.inc.php');
} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/db_updates/update202.inc.php', 0644)) {
	warn('Could not change file permissions of includes/db_updates/update202.inc.php');
}

// Files different: includes/classes/OIDplusDataBasePlugin.class.php
function writefile_4() {
	@$fp = fopen('includes/classes/OIDplusDataBasePlugin.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmlmICghZGVmaW5lZCgnSU5fT0lEUExVUycpKSBkaWUoKTsKCmFic3RyYWN0IGNsYXNzIE9JRHBsdXNEYXRhQmFzZVBsdWdpbiBleHRlbmRzIE9JRHBsdXNQbHVnaW4gewoJcHJvdGVjdGVkICRjb25u'));
	@fwrite($fp, base64_decode('ZWN0ZWQgPSBmYWxzZTsKCXByb3RlY3RlZCAkaHRtbCA9IG51bGw7CgoJcHVibGljIGFic3RyYWN0IHN0YXRpYyBmdW5jdGlvbiBuYW1lKCk6IHN0cmluZzsgLy8gdGhpcyBpcyB0aGUgbmFtZSB0aGF0IGlzIHNldCB0byB0aGUgY29uZmlndXJhdGlvbiB2YWx1ZSBP'));
	@fwrite($fp, base64_decode('SURQTFVTX0RBVEFCQVNFX1BMVUdJTiB0byBpZGVudGlmeSB0aGUgZGF0YWJhc2UgcGx1Z2luCglwdWJsaWMgYWJzdHJhY3QgZnVuY3Rpb24gcXVlcnkoc3RyaW5nICRzcWwsIC8qP2FycmF5Ki8gJHByZXBhcmVkX2FyZ3M9bnVsbCk6IE9JRHBsdXNRdWVyeVJlc3Vs'));
	@fwrite($fp, base64_decode('dDsKCXB1YmxpYyBhYnN0cmFjdCBmdW5jdGlvbiBpbnNlcnRfaWQoKTogaW50OwoJcHVibGljIGFic3RyYWN0IGZ1bmN0aW9uIGVycm9yKCk6IHN0cmluZzsKCXB1YmxpYyBhYnN0cmFjdCBmdW5jdGlvbiB0cmFuc2FjdGlvbl9iZWdpbigpOiB2b2lkOwoJcHVibGlj'));
	@fwrite($fp, base64_decode('IGFic3RyYWN0IGZ1bmN0aW9uIHRyYW5zYWN0aW9uX2NvbW1pdCgpOiB2b2lkOwoJcHVibGljIGFic3RyYWN0IGZ1bmN0aW9uIHRyYW5zYWN0aW9uX3JvbGxiYWNrKCk6IHZvaWQ7Cglwcm90ZWN0ZWQgYWJzdHJhY3QgZnVuY3Rpb24gZG9Db25uZWN0KCk6IHZvaWQ7'));
	@fwrite($fp, base64_decode('Cglwcm90ZWN0ZWQgYWJzdHJhY3QgZnVuY3Rpb24gZG9EaXNjb25uZWN0KCk6IHZvaWQ7CgkKCXB1YmxpYyBmaW5hbCBmdW5jdGlvbiBjb25uZWN0KCk6IHZvaWQgewoJCWlmICgkdGhpcy0+Y29ubmVjdGVkKSByZXR1cm47CgkJJHRoaXMtPmJlZm9yZUNvbm5lY3Qo'));
	@fwrite($fp, base64_decode('KTsKCQkkdGhpcy0+ZG9Db25uZWN0KCk7CgkJJHRoaXMtPmNvbm5lY3RlZCA9IHRydWU7CgkJcmVnaXN0ZXJfc2h1dGRvd25fZnVuY3Rpb24oYXJyYXkoJHRoaXMsICdkaXNjb25uZWN0JykpOwoJCSR0aGlzLT5hZnRlckNvbm5lY3QoKTsKCX0KCQoJcHVibGljIGZp'));
	@fwrite($fp, base64_decode('bmFsIGZ1bmN0aW9uIGRpc2Nvbm5lY3QoKTogdm9pZCB7CgkJaWYgKCEkdGhpcy0+Y29ubmVjdGVkKSByZXR1cm47CgkJJHRoaXMtPmJlZm9yZURpc2Nvbm5lY3QoKTsKCQkkdGhpcy0+ZG9EaXNjb25uZWN0KCk7CgkJJHRoaXMtPmNvbm5lY3RlZCA9IGZhbHNlOwoJ'));
	@fwrite($fp, base64_decode('CSR0aGlzLT5hZnRlckRpc2Nvbm5lY3QoKTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gbmF0T3JkZXIoJGZpZWxkbmFtZSwgJG9yZGVyPSdhc2MnKTogc3RyaW5nIHsKCQoJCSRvcmRlciA9IHN0cnRvbG93ZXIoJG9yZGVyKTsKCQlpZiAoKCRvcmRlciAhPSAnYXNjJykg'));
	@fwrite($fp, base64_decode('JiYgKCRvcmRlciAhPSAnZGVzYycpKSB7CgkJCXRocm93IG5ldyBFeGNlcHRpb24oIkludmFsaWQgb3JkZXIgJyRvcmRlcicgKG5lZWRzIHRvIGJlICdhc2MnIG9yICdkZXNjJykiKTsKCQl9CgoJCSRtYXhkZXB0aCA9IDEwMDsgLy8gYWRqdXN0IHRoaXMgaWYgeW91'));
	@fwrite($fp, base64_decode('IGhhdmUgcGVyZm9ybWFuY2UgaXNzdWVzCgkJJG1heF9hcmNfbGVuID0gNTA7CgkJCgkJJG91dCA9IGFycmF5KCk7CgkJCgkJaWYgKCR0aGlzLT5zbGFuZygpID09ICdwZ3NxbCcpIHsKCQkJaWYgKCRtYXhfYXJjX2xlbiA+IDEzMTA3MikgJG1heF9hcmNfbGVuID0g'));
	@fwrite($fp, base64_decode('MTMxMDcyOyAvLyBMaW1pdCBvZiB0aGUgIm51bWVyaWMoKSIgdHlwZQoJCQkKCQkJLy8gMS4gU29ydCBieSBuYW1lc3BhY2UgKG9pZCwgZ3VpZCwgLi4uKQoJCQkkb3V0W10gPSAiU1BMSVRfUEFSVCgkZmllbGRuYW1lLCAnOicsIDEpICRvcmRlciI7CgkJCQoJCQkv'));
	@fwrite($fp, base64_decode('LyAyLiBPbmx5IGlmIG5hbWVzcGFjZSBpcyAnb2lkOic6IFNvcnQgT0lEIGFzIGludGVnZXIgYXJyYXkKCQkJJG91dFtdID0gIlNUUklOR19UT19BUlJBWShTUExJVF9QQVJUKCRmaWVsZG5hbWUsICdvaWQ6JywgMiksICcuJyk6Om51bWVyaWMoJG1heF9hcmNfbGVu'));
	@fwrite($fp, base64_decode('KVtdICRvcmRlciI7CgkJCQoJCQkvLyAzLiBPdGhlcndpc2Ugb3JkZXIgYnkgSUQKCQkJJG91dFtdID0gIiRmaWVsZG5hbWUgJG9yZGVyIjsKCQkJCgkJfSBlbHNlIGlmICgkdGhpcy0+c2xhbmcoKSA9PSAnbXlzcWwnKSB7CgkJCWlmICgkbWF4X2FyY19sZW4gPiA2'));
	@fwrite($fp, base64_decode('NSkgJG1heF9hcmNfbGVuID0gNjU7IC8vIExpbWl0IG9mICJkZWNpbWFsKCkiIHR5cGUKCQkJCgkJCS8vIDEuIHNvcnQgYnkgbmFtZXNwYWNlIChvaWQsIGd1aWQsIC4uLikKCQkJJG91dFtdID0gIlNVQlNUUklOR19JTkRFWCgkZmllbGRuYW1lLCc6JywxKSAkb3Jk'));
	@fwrite($fp, base64_decode('ZXIiOwoJCQkKCQkJLy8gMi4gc29ydCBieSBmaXJzdCBhcmMgKDAsMSwyKQoJCQkkb3V0W10gPSAiU1VCU1RSSU5HKFNVQlNUUklOR19JTkRFWCgkZmllbGRuYW1lLCcuJywxKSwgTEVOR1RIKFNVQlNUUklOR19JTkRFWCgkZmllbGRuYW1lLCc6JywxKSkrMiwgJG1h'));
	@fwrite($fp, base64_decode('eF9hcmNfbGVuKSAkb3JkZXIiOwoJCQkKCQkJZm9yICgkaT0yOyAkaTw9JG1heGRlcHRoOyAkaSsrKSB7CgkJCQkvLyAzLiBTb3J0IGJ5IHRoZSByZXN0IGFyY3Mgb25lIGJ5IG9uZSwgbm90IHRoYXQgTXlTUUwgY2FuIG9ubHkgaGFuZGxlIGRlY2ltYWwoNjUpLCBu'));
	@fwrite($fp, base64_decode('b3QgZGVjaW1hbCgkbWF4X2FyY19sZW4pCgkJCQkkb3V0W10gPSAiY2FzdChTVUJTVFJJTkcoU1VCU1RSSU5HX0lOREVYKCRmaWVsZG5hbWUsJy4nLCRpKSwgTEVOR1RIKFNVQlNUUklOR19JTkRFWCgkZmllbGRuYW1lLCcuJywiLigkaS0xKS4iKSkrMiwgJG1heF9h'));
	@fwrite($fp, base64_decode('cmNfbGVuKSBhcyBkZWNpbWFsKCRtYXhfYXJjX2xlbikpICRvcmRlciI7CgkJCX0KCgkJCS8vIDQuIGFzIGxhc3QgcmVzb3J0LCBzb3J0IGJ5IHRoZSBpZGVudGlmaWVyIGl0c2VsZiwgZS5nLiBpZiB0aGUgY2FzdHMgYWJvdmUgZGlkIGZhaWwgKGhhcHBlbnMgaWYg'));
	@fwrite($fp, base64_decode('aXQgaXMgbm90IGFuIE9JRCkJCQkKCQkJJG91dFtdID0gIiRmaWVsZG5hbWUgJG9yZGVyIjsKCQkJCgkJfSBlbHNlIGlmICgkdGhpcy0+c2xhbmcoKSA9PSAnbXNzcWwnKSB7CgkJCgkJCS8vIDEuIHNvcnQgYnkgbmFtZXNwYWNlIChvaWQsIGd1aWQsIC4uLikKCQkJ'));
	@fwrite($fp, base64_decode('JG91dFtdID0gIlNVQlNUUklORygkZmllbGRuYW1lLDEsQ0hBUklOREVYKCc6JywkZmllbGRuYW1lKS0xKSAkb3JkZXIiOwoJCQkKCQkJZm9yICgkaT0xOyAkaTw9JG1heGRlcHRoOyAkaSsrKSB7CgkJCQkvLyAyLiBTb3J0IGJ5IHRoZSByZXN0IGFyY3Mgb25lIGJ5'));
	@fwrite($fp, base64_decode('IG9uZSwgbm90IHRoYXQgTXlTUUwgY2FuIG9ubHkgaGFuZGxlIGRlY2ltYWwoNjUpLCBub3QgZGVjaW1hbCgkbWF4X2FyY19sZW4pCgkJCQkkb3V0W10gPSAiZGJvLmdldE9pZEFyYygkZmllbGRuYW1lLCAkbWF4X2FyY19sZW4sICRpKSAkb3JkZXIiOwoJCQl9CgoJ'));
	@fwrite($fp, base64_decode('CQkvLyAzLiBhcyBsYXN0IHJlc29ydCwgc29ydCBieSB0aGUgaWRlbnRpZmllciBpdHNlbGYsIGUuZy4gaWYgdGhlIGZ1bmN0aW9uIGdldE9pZEFyYyBhbHdheXMgcmV0dXJuIDAgKGhhcHBlbnMgaWYgaXQgaXMgbm90IGFuIE9JRCkJCQkKCQkJJG91dFtdID0gIiRm'));
	@fwrite($fp, base64_decode('aWVsZG5hbWUgJG9yZGVyIjsKCQl9IGVsc2UgewoJCQoJCQkvLyBGb3IgKHlldCkgdW5zdXBwb3J0ZWQgREJNUywgd2UgZG8gbm90IG9mZmVyIG5hdHVyYWwgc29ydAoJCQkkb3V0W10gPSAiJGZpZWxkbmFtZSAkb3JkZXIiOwoKCQl9CgoJCXJldHVybiBpbXBsb2Rl'));
	@fwrite($fp, base64_decode('KCcsICcsICRvdXQpOyAKCX0KCglwcm90ZWN0ZWQgZnVuY3Rpb24gYmVmb3JlRGlzY29ubmVjdCgpOiB2b2lkIHt9CgoJcHJvdGVjdGVkIGZ1bmN0aW9uIGFmdGVyRGlzY29ubmVjdCgpOiB2b2lkIHt9CgoJcHJvdGVjdGVkIGZ1bmN0aW9uIGJlZm9yZUNvbm5lY3Qo'));
	@fwrite($fp, base64_decode('KTogdm9pZCB7fQoKCXByb3RlY3RlZCBmdW5jdGlvbiBhZnRlckNvbm5lY3QoKTogdm9pZCB7CgkJLy8gQ2hlY2sgaWYgdGhlIGNvbmZpZyB0YWJsZSBleGlzdHMuIFRoaXMgaXMgaW1wb3J0YW50IGJlY2F1c2UgdGhlIGRhdGFiYXNlIHZlcnNpb24gaXMgc3RvcmVk'));
	@fwrite($fp, base64_decode('IGluIGl0CgkJJHRoaXMtPmluaXRSZXF1aXJlVGFibGVzKGFycmF5KCdjb25maWcnKSk7CgoJCS8vIERvIHRoZSBkYXRhYmFzZSB0YWJsZXMgbmVlZCBhbiB1cGRhdGU/CgkJLy8gSXQgaXMgaW1wb3J0YW50IHRoYXQgd2UgZG8gaXQgaW1tZWRpYXRlbHkgYWZ0ZXIg'));
	@fwrite($fp, base64_decode('Y29ubmVjdGluZywKCQkvLyBiZWNhdXNlIHRoZSBkYXRhYmFzZSBzdHJ1Y3R1cmUgbWlnaHQgY2hhbmdlIGFuZCB0aGVyZWZvcmUgdmFyaW91cyB0aGluZ3MgbWlnaHQgZmFpbC4KCQkvLyBOb3RlOiBUaGUgY29uZmlnIHNldHRpbmcgImRhdGFiYXNlX3ZlcnNpb24i'));
	@fwrite($fp, base64_decode('IGlzIGluc2VydGVkIGluIHNldHVwL3NxbC8uLi5zcWwsIG5vdCBpbiB0aGUgT0lEcGx1cyBjb3JlIGluaXQKCgkJJHJlcyA9ICR0aGlzLT5xdWVyeSgiU0VMRUNUIHZhbHVlIEZST00gIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguImNvbmZpZyBXSEVSRSBuYW1l'));
	@fwrite($fp, base64_decode('ID0gJ2RhdGFiYXNlX3ZlcnNpb24nIik7CgkJJHJvdyA9ICRyZXMtPmZldGNoX2FycmF5KCk7CQkKCQlpZiAoJHJvdyA9PSBudWxsKSB7CgkJCXRocm93IG5ldyBPSURwbHVzQ29uZmlnSW5pdGlhbGl6YXRpb25FeGNlcHRpb24oJ0Nhbm5vdCBkZXRlcm1pbmUgZGF0'));
	@fwrite($fp, base64_decode('YWJhc2UgdmVyc2lvbiAodGhlIGVudHJ5ICJkYXRhYmFzZV92ZXJzaW9uIiBpbnNpZGUgdGhlIHRhYmxlICInLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4nY29uZmlnIiBpcyBwcm9iYWJseSBtaXNzaW5nKScpOwoJCX0JCQoJCSR2ZXJzaW9uID0gJHJvd1sndmFs'));
	@fwrite($fp, base64_decode('dWUnXTsKCQlpZiAoIWlzX251bWVyaWMoJHZlcnNpb24pIHx8ICgkdmVyc2lvbiA8IDIwMCkgfHwgKCR2ZXJzaW9uID4gOTk5KSkgewoJCQl0aHJvdyBuZXcgT0lEcGx1c0NvbmZpZ0luaXRpYWxpemF0aW9uRXhjZXB0aW9uKCdFbnRyeSAiZGF0YWJhc2VfdmVyc2lv'));
	@fwrite($fp, base64_decode('biIgaW5zaWRlIHRoZSB0YWJsZSAiJy5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguJ2NvbmZpZyIgc2VlbXMgdG8gYmUgd3JvbmcgKGV4cGVjdCBudW1iZXIgYmV0d2VlbiAyMDAgYW5kIDk5OSknKTsKCQl9CQkKCQl3aGlsZSAoZmlsZV9leGlzdHMoJGZpbGUgPSBf'));
	@fwrite($fp, base64_decode('X0RJUl9fLiIvLi4vZGJfdXBkYXRlcy91cGRhdGUkdmVyc2lvbi5pbmMucGhwIikpIHsKCQkJJHByZXZfdmVyc2lvbiA9ICR2ZXJzaW9uOwoJCQlpbmNsdWRlICRmaWxlOyAvLyBydW4gdXBkYXRlLXNjcmlwdAoJCQlpZiAoJHZlcnNpb24gIT0gJHByZXZfdmVyc2lv'));
	@fwrite($fp, base64_decode('bisxKSB7CgkJCQkvLyBUaGlzIHNob3VsZCB1c3VhbGx5IG5vdCBoYXBwZW4sIHNpbmNlIHRoZSB1cGRhdGUtZmlsZSBzaG91bGQgaW5jcmVhc2UgdGhlIHZlcnNpb24KCQkJCS8vIG9yIHRocm93IGFuIEV4Y2VwdGlvbiBieSBpdHNlbGYKCQkJCXRocm93IG5ldyBF'));
	@fwrite($fp, base64_decode('eGNlcHRpb24oIkRhdGFiYXNlIHVwZGF0ZSAkcHJldl92ZXJzaW9uIC0+ICIuKCRwcmV2X3ZlcnNpb24rMSkuIiBmYWlsZWQgKHNjcmlwdCByZXBvcnRzIG5ldyB2ZXJzaW9uIHRvIGJlICR2ZXJzaW9uKSIpOwoJCQl9CgkJfQoKCQkvLyBOb3cgdGhhdCBvdXIgZGF0'));
	@fwrite($fp, base64_decode('YWJhc2UgaXMgdXAtdG8tZGF0ZSwgd2UgY2hlY2sgaWYgZGF0YWJhc2UgdGFibGVzIGFyZSBleGlzdGluZwoJCS8vIHdpdGhvdXQgY29uZmlnIHRhYmxlLCBiZWNhdXNlIGl0IHdhcyBjaGVja2VkIGFib3ZlCgkJJHRoaXMtPmluaXRSZXF1aXJlVGFibGVzKGFycmF5'));
	@fwrite($fp, base64_decode('KCdvYmplY3RzJywgJ2FzbjFpZCcsICdpcmknLCAncmEnLyosICdjb25maWcnKi8pKTsKCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiBpbml0UmVxdWlyZVRhYmxlcygkdGFibGVOYW1lcykgewoJCSRtc2dzID0gYXJyYXkoKTsKCQlmb3JlYWNoICgkdGFibGVOYW1lcyBh'));
	@fwrite($fp, base64_decode('cyAkdGFibGVOYW1lKSB7CgkJCWlmICghJHRoaXMtPnRhYmxlRXhpc3RzKE9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4kdGFibGVOYW1lKSkgewoJCQkJJG1zZ3NbXSA9ICdUYWJsZSAnLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4kdGFibGVOYW1lLicgaXMgbWlz'));
	@fwrite($fp, base64_decode('c2luZyEnOwoJCQl9CgkJfQoJCWlmIChjb3VudCgkbXNncykgPiAwKSB7CgkJCXRocm93IG5ldyBPSURwbHVzQ29uZmlnSW5pdGlhbGl6YXRpb25FeGNlcHRpb24oaW1wbG9kZSgiXG5cbiIsJG1zZ3MpKTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiB0YWJsZUV4'));
	@fwrite($fp, base64_decode('aXN0cygkdGFibGVOYW1lKSB7CgkJdHJ5IHsKCQkJJHRoaXMtPnF1ZXJ5KCJzZWxlY3QgMCBmcm9tICIuJHRhYmxlTmFtZS4iIHdoZXJlIDE9MCIpOwoJCQlyZXR1cm4gdHJ1ZTsKCQl9IGNhdGNoIChFeGNlcHRpb24gJGUpIHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0K'));
	@fwrite($fp, base64_decode('CX0KCglwdWJsaWMgZnVuY3Rpb24gaXNDb25uZWN0ZWQoKTogYm9vbCB7CgkJcmV0dXJuICR0aGlzLT5jb25uZWN0ZWQ7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGluaXQoJGh0bWwgPSB0cnVlKTogdm9pZCB7CgkJJHRoaXMtPmh0bWwgPSAkaHRtbDsKCX0KCglwdWJs'));
	@fwrite($fp, base64_decode('aWMgZnVuY3Rpb24gc2xhbmcoKTogc3RyaW5nIHsKCQkvLyBUaGUgY29uc3RhbnQgT0lEUExVU19EQk1TX1NMQU5HIGlzIHVzZWQgYXMgY2FjaGUuCgkJLy8gWW91IGNhbiBhbHNvIHB1dCBpdCBpbiB5b3VyIGNvbmZpZy5pbmMucGhwIGlmIHlvdSB3YW50IHRvIGVu'));
	@fwrite($fp, base64_decode('Zm9yY2UgYSBzbGFuZyB0byBiZSB1c2VkCgoJCWlmIChkZWZpbmVkKCdPSURQTFVTX0RCTVNfU0xBTkcnKSkgewoJCQlyZXR1cm4gT0lEUExVU19EQk1TX1NMQU5HOwoJCX0gZWxzZSB7CgkJCXRyeSB7CgkJCQkvLyBNeVNRTCwgTWFyaWFEQiBhbmQgUG9zdGdyZVNR'));
	@fwrite($fp, base64_decode('TAoJCQkJJHZlcnMgPSAkdGhpcy0+cXVlcnkoInNlbGVjdCB2ZXJzaW9uKCkgYXMgZGJtc192ZXJzaW9uIiktPmZldGNoX29iamVjdCgpLT5kYm1zX3ZlcnNpb247CgkJCQkkdmVycyA9IHN0cnRvbG93ZXIoJHZlcnMpOwoJCQl9IGNhdGNoIChFeGNlcHRpb24gJGUp'));
	@fwrite($fp, base64_decode('IHsKCQkJCXRyeSB7CgkJCQkJLy8gTWljcm9zb2Z0IFNRTCBTZXJ2ZXIKCQkJCQkkdmVycyA9ICR0aGlzLT5xdWVyeSgic2VsZWN0IEBAdmVyc2lvbiBhcyBkYm1zX3ZlcnNpb24iKS0+ZmV0Y2hfb2JqZWN0KCktPmRibXNfdmVyc2lvbjsKCQkJCQkkdmVycyA9IHN0'));
	@fwrite($fp, base64_decode('cnRvbG93ZXIoJHZlcnMpOwoJCQkJfSBjYXRjaCAoRXhjZXB0aW9uICRlKSB7CgkJCQkJdGhyb3cgbmV3IEV4Y2VwdGlvbigiQ2Fubm90IGRldGVybWluZSB0aGUgc2xhbmcgb2YgeW91ciBEQk1TIChmdW5jdGlvbiAndmVyc2lvbigpJyBjb3VsZCBub3QgYmUgY2Fs'));
	@fwrite($fp, base64_decode('bGVkKS4gWW91ciBEQk1TIGlzIHByb2JhYmx5IG5vdCBzdXBwb3J0ZWQuIik7CgkJCQl9CgkJCX0KCgkJCSRzbGFuZyA9IG51bGw7CgkJCWlmIChzdHJwb3MoJHZlcnMsICdwb3N0Z3Jlc3FsJykgICAgICAgICAgICE9PSBmYWxzZSkgJHNsYW5nID0gJ3Bnc3FsJzsK'));
	@fwrite($fp, base64_decode('CQkJaWYgKHN0cnBvcygkdmVycywgJ215c3FsJykgICAgICAgICAgICAgICAgIT09IGZhbHNlKSAkc2xhbmcgPSAnbXlzcWwnOwoJCQlpZiAoc3RycG9zKCR2ZXJzLCAnbWFyaWFkYicpICAgICAgICAgICAgICAhPT0gZmFsc2UpICRzbGFuZyA9ICdteXNxbCc7CgkJ'));
	@fwrite($fp, base64_decode('CWlmIChzdHJwb3MoJHZlcnMsICdtaWNyb3NvZnQgc3FsIHNlcnZlcicpICE9PSBmYWxzZSkgJHNsYW5nID0gJ21zc3FsJzsKCQkJaWYgKCFpc19udWxsKCRzbGFuZykpIHsKCQkJCWRlZmluZSgnT0lEUExVU19EQk1TX1NMQU5HJywgJHNsYW5nKTsKCQkJCXJldHVy'));
	@fwrite($fp, base64_decode('biAkc2xhbmc7CgkJCX0gZWxzZSB7CgkJCQl0aHJvdyBuZXcgRXhjZXB0aW9uKCJDYW5ub3QgZGV0ZXJtaW5lIHRoZSBzbGFuZyBvZiB5b3VyIERCTVMgKHdlIGRvbid0IGtub3cgd2hhdCB0byBkbyB3aXRoIHRoZSBEQk1TICckdmVycycpLiBZb3VyIERCTVMgaXMg'));
	@fwrite($fp, base64_decode('cHJvYmFibHkgbm90IHN1cHBvcnRlZC4iKTsKCQkJfQoJCX0KCX0KfQoK'));
	@fclose($fp);
}
if (!is_file('includes/classes/OIDplusDataBasePlugin.class.php')) {
	warn('File has vanished! Will re-create it: includes/classes/OIDplusDataBasePlugin.class.php');
	writefile_4();
	if (!is_file('includes/classes/OIDplusDataBasePlugin.class.php')) {
		warn('File cannot be created (not existing): includes/classes/OIDplusDataBasePlugin.class.php');
	} else if (sha1_file('includes/classes/OIDplusDataBasePlugin.class.php') != 'bebdb8cf4c67308b2941691410d886bd77e4b1e5') {
		warn('File cannot be created (checksum mismatch): includes/classes/OIDplusDataBasePlugin.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/classes/OIDplusDataBasePlugin.class.php', 0644)) {
		warn('Could not change file permissions of includes/classes/OIDplusDataBasePlugin.class.php');
	}
} else {
	if (@sha1_file('includes/classes/OIDplusDataBasePlugin.class.php') !== 'bebdb8cf4c67308b2941691410d886bd77e4b1e5') {
		if (@sha1_file('includes/classes/OIDplusDataBasePlugin.class.php') !== '890848ebf8c33d6f1887d09a8ff9b3f4a4bdb470') {
			warn('File was modified. Will overwrite the changes now: includes/classes/OIDplusDataBasePlugin.class.php');
			$tmp = pathinfo('includes/classes/OIDplusDataBasePlugin.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/classes/OIDplusDataBasePlugin.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('includes/classes/OIDplusDataBasePlugin.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_4();
		if (@sha1_file('includes/classes/OIDplusDataBasePlugin.class.php') !== 'bebdb8cf4c67308b2941691410d886bd77e4b1e5') {
			warn('File cannot be written (checksum mismatch): includes/classes/OIDplusDataBasePlugin.class.php');
		}
	}
}

// Files different: plugins/database/mysqli/plugin.inc.php
function writefile_5() {
	@$fp = fopen('plugins/database/mysqli/plugin.inc.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmlmICghZGVmaW5lZCgnSU5fT0lEUExVUycpKSBkaWUoKTsKCmRlZmluZSgnT0lEUExVU19NWVNRTF9RVUVSWUxPRycsIGZhbHNlKTsKCmNsYXNzIE9JRHBsdXNEYXRhQmFzZVBsdWdpbk15U1FMaSBl'));
	@fwrite($fp, base64_decode('eHRlbmRzIE9JRHBsdXNEYXRhQmFzZVBsdWdpbiB7Cglwcml2YXRlICRteXNxbGk7Cglwcml2YXRlICRsYXN0X3F1ZXJ5OwoJcHJpdmF0ZSAkcHJlcGFyZV9jYWNoZSA9IGFycmF5KCk7CgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRQbHVnaW5JbmZvcm1hdGlv'));
	@fwrite($fp, base64_decode('bigpOiBhcnJheSB7CgkJJG91dCA9IGFycmF5KCk7CgkJJG91dFsnbmFtZSddID0gJ015U1FMaSc7CgkJJG91dFsnYXV0aG9yJ10gPSAnVmlhVGhpbmtTb2Z0JzsKCQkkb3V0Wyd2ZXJzaW9uJ10gPSBudWxsOwoJCSRvdXRbJ2Rlc2NyaXB0aW9uSFRNTCddID0gbnVs'));
	@fwrite($fp, base64_decode('bDsKCQlyZXR1cm4gJG91dDsKCX0KCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIG5hbWUoKTogc3RyaW5nIHsKCQlyZXR1cm4gIk15U1FMIjsKCX0KCglwdWJsaWMgZnVuY3Rpb24gcXVlcnkoc3RyaW5nICRzcWwsIC8qP2FycmF5Ki8gJHByZXBhcmVkX2FyZ3M9bnVs'));
	@fwrite($fp, base64_decode('bCk6IE9JRHBsdXNRdWVyeVJlc3VsdCB7CgkJJHRoaXMtPmxhc3RfcXVlcnkgPSAkc3FsOwoJCWlmIChPSURQTFVTX01ZU1FMX1FVRVJZTE9HKSBmaWxlX3B1dF9jb250ZW50cyhfX0RJUl9fLiIvcXVlcnkubG9nIiwgIiRzcWwgPD09ICIuZ2V0X2NhbGxpbmdfZnVu'));
	@fwrite($fp, base64_decode('Y3Rpb24oKS4iXG4iLCBGSUxFX0FQUEVORCk7CgkJaWYgKGlzX251bGwoJHByZXBhcmVkX2FyZ3MpKSB7CgkJCSRyZXMgPSAkdGhpcy0+bXlzcWxpLT5xdWVyeSgkc3FsLCBNWVNRTElfU1RPUkVfUkVTVUxUKTsKCgkJCWlmICgkcmVzID09PSBmYWxzZSkgewoJCQkJ'));
	@fwrite($fp, base64_decode('dGhyb3cgbmV3IE9JRHBsdXNTUUxFeGNlcHRpb24oJHNxbCwgJHRoaXMtPmVycm9yKCkpOwoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIG5ldyBPSURwbHVzUXVlcnlSZXN1bHRNeVNRTCgkcmVzKTsKCQkJfQoJCX0gZWxzZSB7CgkJCWlmICghaXNfYXJyYXkoJHByZXBh'));
	@fwrite($fp, base64_decode('cmVkX2FyZ3MpKSB7CgkJCQl0aHJvdyBuZXcgRXhjZXB0aW9uKCIncHJlcGFyZWRfYXJncycgbXVzdCBiZSBlaXRoZXIgTlVMTCBvciBhbiBBUlJBWS4iKTsKCQkJfQoJCQkKCQkJZm9yZWFjaCAoJHByZXBhcmVkX2FyZ3MgYXMgJiR2YWx1ZSkgewoJCQkJLy8gTXlT'));
	@fwrite($fp, base64_decode('UUxpIGhhcyBwcm9ibGVtcyBjb252ZXJ0aW5nICJ0cnVlL2ZhbHNlIiB0byB0aGUgZGF0YSB0eXBlICJ0aW55aW50KDEpIgoJCQkJLy8gSXQgc2VlbXMgdG8gYmUgdGhlIHNhbWUgaXNzdWUgbGlrZSBpbiBQRE8gcmVwb3J0ZWQgMTQgeWVhcnMgYWdvIGF0IGh0dHBz'));
	@fwrite($fp, base64_decode('Oi8vYnVncy5waHAubmV0L2J1Zy5waHA/aWQ9NTcxNTcKCQkJCWlmIChpc19ib29sKCR2YWx1ZSkpICR2YWx1ZSA9ICR2YWx1ZSA/ICcxJyA6ICcwJzsKCQkJfQoJCQkKCQkJaWYgKGlzc2V0KCR0aGlzLT5wcmVwYXJlX2NhY2hlWyRzcWxdKSkgewoJCQkJJHBzID0g'));
	@fwrite($fp, base64_decode('JHRoaXMtPnByZXBhcmVfY2FjaGVbJHNxbF07CgkJCX0gZWxzZSB7CgkJCQkkcHMgPSAkdGhpcy0+bXlzcWxpLT5wcmVwYXJlKCRzcWwpOwoJCQkJaWYgKCEkcHMpIHsKCQkJCQl0aHJvdyBuZXcgT0lEcGx1c1NRTEV4Y2VwdGlvbigkc3FsLCAnQ2Fubm90IHByZXBh'));
	@fwrite($fp, base64_decode('cmUgc3RhdGVtZW50Jyk7CgkJCQl9CgkJCQkKCQkJCS8vIENhY2hpbmcgdGhlIHByZXBhcmVkIGlzIHZlcnkgcmlza3kKCQkJCS8vIEluIFBETyBhbmQgT0RCQyB3ZSBtYXkgbm90IGRvIGl0LCBiZWNhdXNlIGV4ZWN1dGUoKSB3aWxsCgkJCQkvLyBkZXN0cm95IHRo'));
	@fwrite($fp, base64_decode('ZSBleGlzdGluZyBjdXJzb3JzLgoJCQkJLy8gKHRlc3QgdGhpcyB3aXRoIC4vP2dvdG89b2lkJTNBMS4zLjYuMS40LjEuMzc1NTMuOC4zMjQ4ODE5MjI3NAoJCQkJLy8geW91IHdpbGwgc2VlIHRoYXQgMi45OTkgaXMgbWlzc2luZyBpbiB0aGUgdHJlZSkKCQkJCS8v'));
	@fwrite($fp, base64_decode('IEJ1dCAkcHMtPmdldF9yZXN1bHQoKSBzZWVtcyB0byAiY2xvbmUiIHRoZSBjdXJzb3IsCgkJCQkvLyBzbyB0aGF0ICRwcy0+ZXhlY3V0ZSBtYXkgYmUgY2FsbGVkIGEgc2Vjb25kIHRpbWU/IQoJCQkJLy8gSG93ZXZlciwgaXQgb25seSB3b3JrcyB3aXRoIG15c3Fs'));
	@fwrite($fp, base64_decode('bmQncyBnZXRfcmVzdWx0LAoJCQkJLy8gbm90IHdpdGggT0lEcGx1c1F1ZXJ5UmVzdWx0TXlTUUxOb05hdGl2ZURyaXZlcgoJCQkJaWYgKHNlbGY6Om5hdGl2ZURyaXZlckF2YWlsYWJsZSgpKSB7CgkJCQkJJHRoaXMtPnByZXBhcmVfY2FjaGVbJHNxbF0gPSAkcHM7'));
	@fwrite($fp, base64_decode('CgkJCQl9CgkJCX0KCgkJCXNlbGY6OmJpbmRfcGxhY2Vob2xkZXJfdmFycygkcHMsJHByZXBhcmVkX2FyZ3MpOwoJCQlpZiAoISRwcy0+ZXhlY3V0ZSgpKSB7CgkJCQl0aHJvdyBuZXcgT0lEcGx1c1NRTEV4Y2VwdGlvbigkc3FsLCAkdGhpcy0+ZXJyb3IoKSk7CgkJ'));
	@fwrite($fp, base64_decode('CX0KCgkJCWlmIChzZWxmOjpuYXRpdmVEcml2ZXJBdmFpbGFibGUoKSkgewoJCQkJcmV0dXJuIG5ldyBPSURwbHVzUXVlcnlSZXN1bHRNeVNRTCgkcHMtPmdldF9yZXN1bHQoKSk7CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gbmV3IE9JRHBsdXNRdWVyeVJlc3VsdE15'));
	@fwrite($fp, base64_decode('U1FMTm9OYXRpdmVEcml2ZXIoJHBzKTsKCQkJfQoJCX0KCX0KCglwdWJsaWMgZnVuY3Rpb24gaW5zZXJ0X2lkKCk6IGludCB7CgkJcmV0dXJuICR0aGlzLT5teXNxbGktPmluc2VydF9pZDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZXJyb3IoKTogc3RyaW5nIHsKCQly'));
	@fwrite($fp, base64_decode('ZXR1cm4gIWVtcHR5KCR0aGlzLT5teXNxbGktPmNvbm5lY3RfZXJyb3IpID8gJHRoaXMtPm15c3FsaS0+Y29ubmVjdF9lcnJvciA6ICR0aGlzLT5teXNxbGktPmVycm9yOwoJfQoKCXByb3RlY3RlZCBmdW5jdGlvbiBkb0Nvbm5lY3QoKTogdm9pZCB7CgkJaWYgKE9J'));
	@fwrite($fp, base64_decode('RFBMVVNfTVlTUUxfUVVFUllMT0cpIGZpbGVfcHV0X2NvbnRlbnRzKCJxdWVyeS5sb2ciLCAnJyk7CgoJCS8vIFRyeSBjb25uZWN0aW5nIHRvIHRoZSBkYXRhYmFzZQoJCWxpc3QoJGhvc3RuYW1lLCRwb3J0KSA9IGV4cGxvZGUoJzonLCBPSURQTFVTX01ZU1FMX0hP'));
	@fwrite($fp, base64_decode('U1QuJzonLmluaV9nZXQoIm15c3FsaS5kZWZhdWx0X3BvcnQiKSk7CgkJJHRoaXMtPm15c3FsaSA9IEBuZXcgbXlzcWxpKCRob3N0bmFtZSwgT0lEUExVU19NWVNRTF9VU0VSTkFNRSwgYmFzZTY0X2RlY29kZShPSURQTFVTX01ZU1FMX1BBU1NXT1JEKSwgT0lEUExV'));
	@fwrite($fp, base64_decode('U19NWVNRTF9EQVRBQkFTRSwgJHBvcnQpOwoJCWlmICghZW1wdHkoJHRoaXMtPm15c3FsaS0+Y29ubmVjdF9lcnJvcikgfHwgKCR0aGlzLT5teXNxbGktPmNvbm5lY3RfZXJybm8gIT0gMCkpIHsKCQkJJG1lc3NhZ2UgPSAkdGhpcy0+ZXJyb3IoKTsKCQkJdGhyb3cg'));
	@fwrite($fp, base64_decode('bmV3IE9JRHBsdXNDb25maWdJbml0aWFsaXphdGlvbkV4Y2VwdGlvbignQ29ubmVjdGlvbiB0byB0aGUgZGF0YWJhc2UgZmFpbGVkISAnLiRtZXNzYWdlKTsKCQl9CgoJCSR0aGlzLT5xdWVyeSgiU0VUIE5BTUVTICd1dGY4JyIpOwoJfQoKCXByb3RlY3RlZCBmdW5j'));
	@fwrite($fp, base64_decode('dGlvbiBkb0Rpc2Nvbm5lY3QoKTogdm9pZCB7CgkJJHRoaXMtPm15c3FsaS0+Y2xvc2UoKTsKCQkkdGhpcy0+bXlzcWxpID0gbnVsbDsKCX0KCglwcml2YXRlICRpbnRyYW5zYWN0aW9uID0gZmFsc2U7CgoJcHVibGljIGZ1bmN0aW9uIHRyYW5zYWN0aW9uX2JlZ2lu'));
	@fwrite($fp, base64_decode('KCk6IHZvaWQgewoJCWlmICgkdGhpcy0+aW50cmFuc2FjdGlvbikgdGhyb3cgbmV3IEV4Y2VwdGlvbigiTmVzdGVkIHRyYW5zYWN0aW9ucyBhcmUgbm90IHN1cHBvcnRlZCBieSB0aGlzIGRhdGFiYXNlIHBsdWdpbi4iKTsKCQkkdGhpcy0+bXlzcWxpLT5hdXRvY29t'));
	@fwrite($fp, base64_decode('bWl0KHRydWUpOwoJCSR0aGlzLT5pbnRyYW5zYWN0aW9uID0gdHJ1ZTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gdHJhbnNhY3Rpb25fY29tbWl0KCk6IHZvaWQgewoJCSR0aGlzLT5teXNxbGktPmNvbW1pdCgpOwoJCSR0aGlzLT5teXNxbGktPmF1dG9jb21taXQoZmFs'));
	@fwrite($fp, base64_decode('c2UpOwoJCSR0aGlzLT5pbnRyYW5zYWN0aW9uID0gZmFsc2U7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHRyYW5zYWN0aW9uX3JvbGxiYWNrKCk6IHZvaWQgewoJCSR0aGlzLT5teXNxbGktPnJvbGxiYWNrKCk7CgkJJHRoaXMtPm15c3FsaS0+YXV0b2NvbW1pdChmYWxz'));
	@fwrite($fp, base64_decode('ZSk7CgkJJHRoaXMtPmludHJhbnNhY3Rpb24gPSBmYWxzZTsKCX0KCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIG5hdGl2ZURyaXZlckF2YWlsYWJsZSgpOiBib29sIHsKCQlyZXR1cm4gZnVuY3Rpb25fZXhpc3RzKCdteXNxbGlfZmV0Y2hfYWxsJyk7Cgl9CgoJcHJp'));
	@fwrite($fp, base64_decode('dmF0ZSBzdGF0aWMgZnVuY3Rpb24gYmluZF9wbGFjZWhvbGRlcl92YXJzKCYkc3RtdCwkcGFyYW1zKTogYm9vbCB7CgkJLy8gQ3JlZGl0IHRvOiBEYXZlIE1vcmdhbgoJCS8vIENvZGUgdGFrZW4gZnJvbTogaHR0cDovL3d3dy5kZXZtb3JnYW4uY29tL2Jsb2cvMjAw'));
	@fwrite($fp, base64_decode('OS8wMy8yNy9keWRsLXBhcnQtMy1keW5hbWljLWJpbmRpbmctd2l0aC1teXNxbGktcGhwLwoJCS8vICAgICAgICAgICAgICAgICAgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTcyMTkyMTQvaG93LXRvLWJpbmQtaW4tbXlzcWxpLWR5bmFtaWNh'));
	@fwrite($fp, base64_decode('bGx5CgkJaWYgKCRwYXJhbXMgIT0gbnVsbCkgewoJCQkkdHlwZXMgPSAnJzsgICAgICAgICAgICAgICAgICAgICAgICAvL2luaXRpYWwgc3Rpbmcgd2l0aCB0eXBlcwoJCQlmb3JlYWNoICgkcGFyYW1zIGFzICRwYXJhbSkgeyAgICAgICAgLy9mb3IgZWFjaCBlbGVt'));
	@fwrite($fp, base64_decode('ZW50LCBkZXRlcm1pbmUgdHlwZSBhbmQgYWRkCgkJCQlpZiAoaXNfaW50KCRwYXJhbSkpIHsKCQkJCQkkdHlwZXMgLj0gJ2knOyAgICAgICAgICAgICAgLy9pbnRlZ2VyCgkJCQl9IGVsc2VpZiAoaXNfZmxvYXQoJHBhcmFtKSkgewoJCQkJCSR0eXBlcyAuPSAnZCc7'));
	@fwrite($fp, base64_decode('ICAgICAgICAgICAgICAvL2RvdWJsZQoJCQkJfSBlbHNlaWYgKGlzX3N0cmluZygkcGFyYW0pKSB7CgkJCQkJJHR5cGVzIC49ICdzJzsgICAgICAgICAgICAgIC8vc3RyaW5nCgkJCQl9IGVsc2UgewoJCQkJCSR0eXBlcyAuPSAnYic7ICAgICAgICAgICAgICAvL2Js'));
	@fwrite($fp, base64_decode('b2IgYW5kIHVua25vd24KCQkJCX0KCQkJfQoKCQkJJGJpbmRfbmFtZXMgPSBhcnJheSgpOwoJCQkkYmluZF9uYW1lc1tdID0gJHR5cGVzOyAgICAgICAgICAgICAvL2ZpcnN0IHBhcmFtIG5lZWRlZCBpcyB0aGUgdHlwZSBzdHJpbmcsIGUuZy46ICdpc3NzcycKCgkJ'));
	@fwrite($fp, base64_decode('CWZvciAoJGk9MDsgJGk8Y291bnQoJHBhcmFtcyk7JGkrKykgeyAgICAvL2dvIHRocm91Z2ggaW5jb21pbmcgcGFyYW1zIGFuZCBhZGRlZCBlbSB0byBhcnJheQoJCQkJJGJpbmRfbmFtZSA9ICdiaW5kJyAuICRpOyAgICAgICAvL2dpdmUgdGhlbSBhbiBhcmJpdHJh'));
	@fwrite($fp, base64_decode('cnkgbmFtZQoJCQkJJCRiaW5kX25hbWUgPSAkcGFyYW1zWyRpXTsgICAgICAvL2FkZCB0aGUgcGFyYW1ldGVyIHRvIHRoZSB2YXJpYWJsZSB2YXJpYWJsZQoJCQkJJGJpbmRfbmFtZXNbXSA9ICYkJGJpbmRfbmFtZTsgICAvL25vdyBhc3NvY2lhdGUgdGhlIHZhcmlh'));
	@fwrite($fp, base64_decode('YmxlIGFzIGFuIGVsZW1lbnQgaW4gYW4gYXJyYXkKCQkJfQoKCQkJLy9lcnJvcl9sb2coImJldHRlcl9teXNxbGkgaGFzIHBhcmFtcyAiLnByaW50X3IoJGJpbmRfbmFtZXMsIDEpKTsKCQkJLy9jYWxsIHRoZSBmdW5jdGlvbiBiaW5kX3BhcmFtIHdpdGggZHluYW1p'));
	@fwrite($fp, base64_decode('YyBwYXJhbXMKCQkJY2FsbF91c2VyX2Z1bmNfYXJyYXkoYXJyYXkoJHN0bXQsJ2JpbmRfcGFyYW0nKSwkYmluZF9uYW1lcyk7CgkJCXJldHVybiB0cnVlOwoJCX0gZWxzZSB7CgkJCXJldHVybiBmYWxzZTsKCQl9Cgl9Cn0KCmNsYXNzIE9JRHBsdXNRdWVyeVJlc3Vs'));
	@fwrite($fp, base64_decode('dE15U1FMIGV4dGVuZHMgT0lEcGx1c1F1ZXJ5UmVzdWx0IHsKCXByb3RlY3RlZCAkbm9fcmVzdWx0c2V0OwoJcHJvdGVjdGVkICRyZXM7CgoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRyZXMpIHsKCQkkdGhpcy0+bm9fcmVzdWx0c2V0ID0gaXNfYm9vbCgk'));
	@fwrite($fp, base64_decode('cmVzKTsKCQkKCQlpZiAoISR0aGlzLT5ub19yZXN1bHRzZXQpIHsKCQkJJHRoaXMtPnJlcyA9ICRyZXM7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gX19kZXN0cnVjdCgpIHsKCQlpZiAoJHRoaXMtPnJlcykgJHRoaXMtPnJlcy0+Y2xvc2UoKTsKCX0KCglwdWJs'));
	@fwrite($fp, base64_decode('aWMgZnVuY3Rpb24gY29udGFpbnNSZXN1bHRTZXQoKTogYm9vbCB7CgkJcmV0dXJuICEkdGhpcy0+bm9fcmVzdWx0c2V0OwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBudW1fcm93cygpOiBpbnQgewoJCWlmICgkdGhpcy0+bm9fcmVzdWx0c2V0KSB0aHJvdyBuZXcgRXhj'));
	@fwrite($fp, base64_decode('ZXB0aW9uKCJUaGUgcXVlcnkgaGFzIHJldHVybmVkIG5vIHJlc3VsdCBzZXQgKGkuZS4gaXQgd2FzIG5vdCBhIFNFTEVDVCBxdWVyeSkiKTsKCQlyZXR1cm4gJHRoaXMtPnJlcy0+bnVtX3Jvd3M7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGZldGNoX2FycmF5KCkvKjog'));
	@fwrite($fp, base64_decode('P2FycmF5Ki8gewoJCWlmICgkdGhpcy0+bm9fcmVzdWx0c2V0KSB0aHJvdyBuZXcgRXhjZXB0aW9uKCJUaGUgcXVlcnkgaGFzIHJldHVybmVkIG5vIHJlc3VsdCBzZXQgKGkuZS4gaXQgd2FzIG5vdCBhIFNFTEVDVCBxdWVyeSkiKTsKCQlyZXR1cm4gJHRoaXMtPnJl'));
	@fwrite($fp, base64_decode('cy0+ZmV0Y2hfYXJyYXkoTVlTUUxJX0FTU09DKTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZmV0Y2hfb2JqZWN0KCkvKjogP29iamVjdCovIHsKCQlpZiAoJHRoaXMtPm5vX3Jlc3VsdHNldCkgdGhyb3cgbmV3IEV4Y2VwdGlvbigiVGhlIHF1ZXJ5IGhhcyByZXR1cm5l'));
	@fwrite($fp, base64_decode('ZCBubyByZXN1bHQgc2V0IChpLmUuIGl0IHdhcyBub3QgYSBTRUxFQ1QgcXVlcnkpIik7CgkJcmV0dXJuICR0aGlzLT5yZXMtPmZldGNoX29iamVjdCgic3RkQ2xhc3MiKTsKCX0KfQoKY2xhc3MgT0lEcGx1c1F1ZXJ5UmVzdWx0TXlTUUxOb05hdGl2ZURyaXZlciBl'));
	@fwrite($fp, base64_decode('eHRlbmRzIE9JRHBsdXNRdWVyeVJlc3VsdCB7CgkvLyBCYXNlZCBvbiBodHRwczovL3d3dy5waHAubmV0L21hbnVhbC9kZS9teXNxbGktc3RtdC5nZXQtcmVzdWx0LnBocCMxMTMzOTgKCglwcm90ZWN0ZWQgJHN0bXQ7Cglwcm90ZWN0ZWQgJG5Db2xzOwoJcHJvdGVj'));
	@fwrite($fp, base64_decode('dGVkICRub19yZXN1bHRzZXQ7CgoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRzdG10KSB7CgkJJG1ldGFkYXRhID0gbXlzcWxpX3N0bXRfcmVzdWx0X21ldGFkYXRhKCRzdG10KTsKCgkJJHRoaXMtPm5vX3Jlc3VsdHNldCA9IGlzX2Jvb2woJG1ldGFkYXRh'));
	@fwrite($fp, base64_decode('KTsKCgkJaWYgKCEkdGhpcy0+bm9fcmVzdWx0c2V0KSB7CgkJCSR0aGlzLT5uQ29scyA9IG15c3FsaV9udW1fZmllbGRzKCRtZXRhZGF0YSk7CgkJCSR0aGlzLT5zdG10ID0gJHN0bXQ7CgoJCQlteXNxbGlfZnJlZV9yZXN1bHQoJG1ldGFkYXRhKTsKCQl9Cgl9CgoJ'));
	@fwrite($fp, base64_decode('cHVibGljIGZ1bmN0aW9uIGNvbnRhaW5zUmVzdWx0U2V0KCk6IGJvb2wgewoJCXJldHVybiAhJHRoaXMtPm5vX3Jlc3VsdHNldDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gbnVtX3Jvd3MoKTogaW50IHsKCQlpZiAoJHRoaXMtPm5vX3Jlc3VsdHNldCkgdGhyb3cgbmV3'));
	@fwrite($fp, base64_decode('IEV4Y2VwdGlvbigiVGhlIHF1ZXJ5IGhhcyByZXR1cm5lZCBubyByZXN1bHQgc2V0IChpLmUuIGl0IHdhcyBub3QgYSBTRUxFQ1QgcXVlcnkpIik7CgoJCSR0aGlzLT5zdG10LT5zdG9yZV9yZXN1bHQoKTsKCQlyZXR1cm4gJHRoaXMtPnN0bXQtPm51bV9yb3dzOwoJ'));
	@fwrite($fp, base64_decode('fQoKCXB1YmxpYyBmdW5jdGlvbiBmZXRjaF9hcnJheSgpLyo6ID9hcnJheSovIHsKCQlpZiAoJHRoaXMtPm5vX3Jlc3VsdHNldCkgdGhyb3cgbmV3IEV4Y2VwdGlvbigiVGhlIHF1ZXJ5IGhhcyByZXR1cm5lZCBubyByZXN1bHQgc2V0IChpLmUuIGl0IHdhcyBub3Qg'));
	@fwrite($fp, base64_decode('YSBTRUxFQ1QgcXVlcnkpIik7CgoJCS8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwNzUyODE1L215c3FsaS1nZXQtcmVzdWx0LWFsdGVybmF0aXZlICwgbW9kaWZpZWQKCQkkc3RtdCA9ICR0aGlzLT5zdG10OwoJCSRzdG10LT5zdG9yZV9y'));
	@fwrite($fp, base64_decode('ZXN1bHQoKTsKCQkkcmVzdWx0a2V5cyA9IGFycmF5KCk7CgkJJHRoaXNOYW1lID0gIiI7CgoJCWlmICgkc3RtdC0+bnVtX3Jvd3M9PTApIHJldHVybiBudWxsOwoKCQlmb3IgKCRpID0gMDsgJGkgPCAkc3RtdC0+bnVtX3Jvd3M7ICRpKyspIHsKCQkJJG1ldGFkYXRh'));
	@fwrite($fp, base64_decode('ID0gJHN0bXQtPnJlc3VsdF9tZXRhZGF0YSgpOwoJCQl3aGlsZSAoJGZpZWxkID0gJG1ldGFkYXRhLT5mZXRjaF9maWVsZCgpKSB7CgkJCQkkdGhpc05hbWUgPSAkZmllbGQtPm5hbWU7CgkJCQkkcmVzdWx0a2V5c1tdID0gJHRoaXNOYW1lOwoJCQl9CgkJfQoKCQkk'));
	@fwrite($fp, base64_decode('cmV0ID0gYXJyYXkoKTsKCQkkYXJncyA9IGFycmF5KCk7CgkJZm9yICgkaT0wOyAkaTwkdGhpcy0+bkNvbHM7ICRpKyspIHsKCQkJJHJldFskaV0gPSBOVUxMOwoJCQkkdGhlVmFsdWUgPSAkcmVzdWx0a2V5c1skaV07CgkJCSRyZXRbJHRoZVZhbHVlXSA9IE5VTEw7'));
	@fwrite($fp, base64_decode('IC8vIHdpbGwgYmUgb3ZlcndyaXR0ZW4gYnkgbXlzcWxpX3N0bXRfYmluZF9yZXN1bHQKCQkJJGFyZ3NbXSA9ICYkcmV0WyR0aGVWYWx1ZV07CgkJfQoJCWlmICghbXlzcWxpX3N0bXRfYmluZF9yZXN1bHQoJHRoaXMtPnN0bXQsIC4uLiRhcmdzKSkgewoJCQlyZXR1'));
	@fwrite($fp, base64_decode('cm4gbnVsbDsKCQl9CgoJCS8vIFRoaXMgc2hvdWxkIGFkdmFuY2UgdGhlICIkc3RtdCIgY3Vyc29yLgoJCWlmICghbXlzcWxpX3N0bXRfZmV0Y2goJHRoaXMtPnN0bXQpKSB7CgkJCXJldHVybiBudWxsOwoJCX0KCgkJLy8gUmV0dXJuIHRoZSBhcnJheSB3ZSBidWls'));
	@fwrite($fp, base64_decode('dC4KCQlyZXR1cm4gJHJldDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZmV0Y2hfb2JqZWN0KCkvKjogP29iamVjdCovIHsKCQlpZiAoJHRoaXMtPm5vX3Jlc3VsdHNldCkgdGhyb3cgbmV3IEV4Y2VwdGlvbigiVGhlIHF1ZXJ5IGhhcyByZXR1cm5lZCBubyByZXN1bHQg'));
	@fwrite($fp, base64_decode('c2V0IChpLmUuIGl0IHdhcyBub3QgYSBTRUxFQ1QgcXVlcnkpIik7CgoJCSRhcnkgPSAkdGhpcy0+ZmV0Y2hfYXJyYXkoKTsKCQlpZiAoISRhcnkpIHJldHVybiBudWxsOwoKCQkkb2JqID0gbmV3IHN0ZENsYXNzOwoJCWZvcmVhY2ggKCRhcnkgYXMgJG5hbWUgPT4g'));
	@fwrite($fp, base64_decode('JHZhbCkgewoJCQkkb2JqLT4kbmFtZSA9ICR2YWw7CgkJfQoJCXJldHVybiAkb2JqOwoJfQp9Cg=='));
	@fclose($fp);
}
if (!is_file('plugins/database/mysqli/plugin.inc.php')) {
	warn('File has vanished! Will re-create it: plugins/database/mysqli/plugin.inc.php');
	writefile_5();
	if (!is_file('plugins/database/mysqli/plugin.inc.php')) {
		warn('File cannot be created (not existing): plugins/database/mysqli/plugin.inc.php');
	} else if (sha1_file('plugins/database/mysqli/plugin.inc.php') != '4ce597ec35bc89919f455fcb23fd3b7155470afc') {
		warn('File cannot be created (checksum mismatch): plugins/database/mysqli/plugin.inc.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/database/mysqli/plugin.inc.php', 0644)) {
		warn('Could not change file permissions of plugins/database/mysqli/plugin.inc.php');
	}
} else {
	if (@sha1_file('plugins/database/mysqli/plugin.inc.php') !== '4ce597ec35bc89919f455fcb23fd3b7155470afc') {
		if (@sha1_file('plugins/database/mysqli/plugin.inc.php') !== '7d1e483634b852bc7b6707364c909e88ab5986d1') {
			warn('File was modified. Will overwrite the changes now: plugins/database/mysqli/plugin.inc.php');
			$tmp = pathinfo('plugins/database/mysqli/plugin.inc.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/database/mysqli/plugin.inc.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/database/mysqli/plugin.inc.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_5();
		if (@sha1_file('plugins/database/mysqli/plugin.inc.php') !== '4ce597ec35bc89919f455fcb23fd3b7155470afc') {
			warn('File cannot be written (checksum mismatch): plugins/database/mysqli/plugin.inc.php');
		}
	}
}

// Files different: plugins/database/odbc/plugin.inc.php
function writefile_6() {
	@$fp = fopen('plugins/database/odbc/plugin.inc.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmlmICghZGVmaW5lZCgnSU5fT0lEUExVUycpKSBkaWUoKTsKCmNsYXNzIE9JRHBsdXNEYXRhQmFzZVBsdWdpbk9EQkMgZXh0ZW5kcyBPSURwbHVzRGF0YUJhc2VQbHVnaW4gewoJcHJpdmF0ZSAkb2Ri'));
	@fwrite($fp, base64_decode('YzsKCXByaXZhdGUgJGxhc3RfcXVlcnk7CgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRQbHVnaW5JbmZvcm1hdGlvbigpOiBhcnJheSB7CgkJJG91dCA9IGFycmF5KCk7CgkJJG91dFsnbmFtZSddID0gJ09EQkMnOwoJCSRvdXRbJ2F1dGhvciddID0gJ1ZpYVRo'));
	@fwrite($fp, base64_decode('aW5rU29mdCc7CgkJJG91dFsndmVyc2lvbiddID0gbnVsbDsKCQkkb3V0WydkZXNjcmlwdGlvbkhUTUwnXSA9IG51bGw7CgkJcmV0dXJuICRvdXQ7Cgl9CgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBuYW1lKCk6IHN0cmluZyB7CgkJcmV0dXJuICJPREJDIjsKCX0K'));
	@fwrite($fp, base64_decode('CglwdWJsaWMgZnVuY3Rpb24gcXVlcnkoc3RyaW5nICRzcWwsIC8qP2FycmF5Ki8gJHByZXBhcmVkX2FyZ3M9bnVsbCk6IE9JRHBsdXNRdWVyeVJlc3VsdCB7CgkJJHRoaXMtPmxhc3RfcXVlcnkgPSAkc3FsOwoJCWlmIChpc19udWxsKCRwcmVwYXJlZF9hcmdzKSkg'));
	@fwrite($fp, base64_decode('ewoJCQkkcmVzID0gQG9kYmNfZXhlYygkdGhpcy0+b2RiYywgJHNxbCk7CgoJCQlpZiAoJHJlcyA9PT0gZmFsc2UpIHsKCQkJCXRocm93IG5ldyBPSURwbHVzU1FMRXhjZXB0aW9uKCRzcWwsICR0aGlzLT5lcnJvcigpKTsKCQkJfSBlbHNlIHsKCQkJCXJldHVybiBu'));
	@fwrite($fp, base64_decode('ZXcgT0lEcGx1c1F1ZXJ5UmVzdWx0T0RCQygkcmVzKTsKCQkJfQoJCX0gZWxzZSB7CgkJCS8vIFRFU1Q6IEVtdWxhdGUgdGhlIHByZXBhcmVkIHN0YXRlbWVudAoJCQkvKgoJCQlmb3JlYWNoICgkcHJlcGFyZWRfYXJncyBhcyAkYXJnKSB7CgkJCQkkbmVlZGxlID0g'));
	@fwrite($fp, base64_decode('Jz8nOwoJCQkJJHJlcGxhY2UgPSAiJyRhcmcnIjsgLy8gVE9ETzogdHlwZXMKCQkJCSRwb3MgPSBzdHJwb3MoJHNxbCwgJG5lZWRsZSk7CgkJCQlpZiAoJHBvcyAhPT0gZmFsc2UpIHsKCQkJCQkkc3FsID0gc3Vic3RyX3JlcGxhY2UoJHNxbCwgJHJlcGxhY2UsICRw'));
	@fwrite($fp, base64_decode('b3MsIHN0cmxlbigkbmVlZGxlKSk7CgkJCQl9CgkJCX0KCQkJcmV0dXJuIE9JRHBsdXNRdWVyeVJlc3VsdE9EQkMoQG9kYmNfZXhlYygkdGhpcy0+b2RiYywgJHNxbCkpOwoJCQkqLwoJCQlpZiAoIWlzX2FycmF5KCRwcmVwYXJlZF9hcmdzKSkgewoJCQkJdGhyb3cg'));
	@fwrite($fp, base64_decode('bmV3IEV4Y2VwdGlvbigiJ3ByZXBhcmVkX2FyZ3MnIG11c3QgYmUgZWl0aGVyIE5VTEwgb3IgYW4gQVJSQVkuIik7CgkJCX0KCQkJCgkJCWZvcmVhY2ggKCRwcmVwYXJlZF9hcmdzIGFzICYkdmFsdWUpIHsKCQkJCS8vIE9EQkMvU1FMU2VydmVyIGhhcyBwcm9ibGVt'));
	@fwrite($fp, base64_decode('cyBjb252ZXJ0aW5nICJ0cnVlIiB0byB0aGUgZGF0YSB0eXBlICJiaXQiCgkJCQkvLyBFcnJvciAiSW52YWxpZCBjaGFyYWN0ZXIgdmFsdWUgZm9yIGNhc3Qgc3BlY2lmaWNhdGlvbiIKCQkJCWlmIChpc19ib29sKCR2YWx1ZSkpICR2YWx1ZSA9ICR2YWx1ZSA/ICcx'));
	@fwrite($fp, base64_decode('JyA6ICcwJzsKCQkJfQoJCQkKCQkJJHBzID0gQG9kYmNfcHJlcGFyZSgkdGhpcy0+b2RiYywgJHNxbCk7CgkJCWlmICghJHBzKSB7CgkJCQl0aHJvdyBuZXcgT0lEcGx1c1NRTEV4Y2VwdGlvbigkc3FsLCAnQ2Fubm90IHByZXBhcmUgc3RhdGVtZW50Jyk7CgkJCX0K'));
	@fwrite($fp, base64_decode('CgkJCWlmICghQG9kYmNfZXhlY3V0ZSgkcHMsICRwcmVwYXJlZF9hcmdzKSkgewoJCQkJdGhyb3cgbmV3IE9JRHBsdXNTUUxFeGNlcHRpb24oJHNxbCwgJHRoaXMtPmVycm9yKCkpOwoJCQl9CgkJCXJldHVybiBuZXcgT0lEcGx1c1F1ZXJ5UmVzdWx0T0RCQygkcHMp'));
	@fwrite($fp, base64_decode('OwoJCX0KCX0KCglwdWJsaWMgZnVuY3Rpb24gaW5zZXJ0X2lkKCk6IGludCB7CgkJc3dpdGNoICgkdGhpcy0+c2xhbmcoKSkgewoJCQljYXNlICdteXNxbCc6CgkJCQkkcmVzID0gJHRoaXMtPnF1ZXJ5KCJTRUxFQ1QgTEFTVF9JTlNFUlRfSUQoKSBBUyBJRCIpOwoJ'));
	@fwrite($fp, base64_decode('CQkJJHJvdyA9ICRyZXMtPmZldGNoX2FycmF5KCk7CgkJCQlyZXR1cm4gKGludCkkcm93WydJRCddOwoJCQljYXNlICdwZ3NxbCc6CgkJCQkkcmVzID0gJHRoaXMtPnF1ZXJ5KCJTRUxFQ1QgTEFTVFZBTCgpIEFTIElEIik7CgkJCQkkcm93ID0gJHJlcy0+ZmV0Y2hf'));
	@fwrite($fp, base64_decode('YXJyYXkoKTsKCQkJCXJldHVybiAoaW50KSRyb3dbJ0lEJ107CgkJCWNhc2UgJ21zc3FsJzoKCQkJCSRyZXMgPSAkdGhpcy0+cXVlcnkoIlNFTEVDVCBTQ09QRV9JREVOVElUWSgpIEFTIElEIik7CgkJCQkkcm93ID0gJHJlcy0+ZmV0Y2hfYXJyYXkoKTsKCQkJCXJl'));
	@fwrite($fp, base64_decode('dHVybiAoaW50KSRyb3dbJ0lEJ107CgkJCWRlZmF1bHQ6CgkJCQl0aHJvdyBuZXcgRXhjZXB0aW9uKCJDYW5ub3QgZGV0ZXJtaW5lIHRoZSBsYXN0IGluc2VydGVkIElEIGZvciB5b3VyIERCTVMuIFRoZSBEQk1TIGlzIHByb2JhYmx5IG5vdCBzdXBwb3J0ZWQuIik7'));
	@fwrite($fp, base64_decode('CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBlcnJvcigpOiBzdHJpbmcgewoJCXJldHVybiBvZGJjX2Vycm9ybXNnKCR0aGlzLT5vZGJjKTsKCX0KCglwcm90ZWN0ZWQgZnVuY3Rpb24gZG9Db25uZWN0KCk6IHZvaWQgewoJCS8vIFRyeSBjb25uZWN0aW5nIHRvIHRo'));
	@fwrite($fp, base64_decode('ZSBkYXRhYmFzZQoJCSR0aGlzLT5vZGJjID0gQG9kYmNfY29ubmVjdChPSURQTFVTX09EQkNfRFNOLCBPSURQTFVTX09EQkNfVVNFUk5BTUUsIGJhc2U2NF9kZWNvZGUoT0lEUExVU19PREJDX1BBU1NXT1JEKSk7CgoJCWlmICghJHRoaXMtPm9kYmMpIHsKCQkJJG1l'));
	@fwrite($fp, base64_decode('c3NhZ2UgPSBvZGJjX2Vycm9ybXNnKCk7CgkJCXRocm93IG5ldyBPSURwbHVzQ29uZmlnSW5pdGlhbGl6YXRpb25FeGNlcHRpb24oJ0Nvbm5lY3Rpb24gdG8gdGhlIGRhdGFiYXNlIGZhaWxlZCEgJy4kbWVzc2FnZSk7CgkJfQoKCQl0cnkgewoJCQkkdGhpcy0+cXVl'));
	@fwrite($fp, base64_decode('cnkoIlNFVCBOQU1FUyAndXRmOCciKTsgLy8gRG9lcyBtb3N0IGxpa2VseSBOT1Qgd29yayB3aXRoIE9EQkMuIFRyeSBhZGRpbmcgIjtDSEFSU0VUPVVURjgiIChvciBzaW1pbGFyKSB0byB0aGUgRFNOCgkJfSBjYXRjaCAoRXhjZXB0aW9uICRlKSB7CgkJfQoJfQoJ'));
	@fwrite($fp, base64_decode('Cglwcm90ZWN0ZWQgZnVuY3Rpb24gZG9EaXNjb25uZWN0KCk6IHZvaWQgewoJCUBvZGJjX2Nsb3NlKCR0aGlzLT5vZGJjKTsKCQkkdGhpcy0+b2RiYyA9IG51bGw7Cgl9CgoJcHJpdmF0ZSAkaW50cmFuc2FjdGlvbiA9IGZhbHNlOwoKCXB1YmxpYyBmdW5jdGlvbiB0'));
	@fwrite($fp, base64_decode('cmFuc2FjdGlvbl9iZWdpbigpOiB2b2lkIHsKCQlpZiAoJHRoaXMtPmludHJhbnNhY3Rpb24pIHRocm93IG5ldyBFeGNlcHRpb24oIk5lc3RlZCB0cmFuc2FjdGlvbnMgYXJlIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBkYXRhYmFzZSBwbHVnaW4uIik7CgkJb2RiY19h'));
	@fwrite($fp, base64_decode('dXRvY29tbWl0KCR0aGlzLT5vZGJjLCB0cnVlKTsKCQkkdGhpcy0+aW50cmFuc2FjdGlvbiA9IHRydWU7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHRyYW5zYWN0aW9uX2NvbW1pdCgpOiB2b2lkIHsKCQlvZGJjX2NvbW1pdCgkdGhpcy0+b2RiYyk7CgkJb2RiY19hdXRv'));
	@fwrite($fp, base64_decode('Y29tbWl0KCR0aGlzLT5vZGJjLCBmYWxzZSk7CgkJJHRoaXMtPmludHJhbnNhY3Rpb24gPSBmYWxzZTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gdHJhbnNhY3Rpb25fcm9sbGJhY2soKTogdm9pZCB7CgkJb2RiY19yb2xsYmFjaygkdGhpcy0+b2RiYyk7CgkJb2RiY19h'));
	@fwrite($fp, base64_decode('dXRvY29tbWl0KCR0aGlzLT5vZGJjLCBmYWxzZSk7CgkJJHRoaXMtPmludHJhbnNhY3Rpb24gPSBmYWxzZTsKCX0KfQoKY2xhc3MgT0lEcGx1c1F1ZXJ5UmVzdWx0T0RCQyBleHRlbmRzIE9JRHBsdXNRdWVyeVJlc3VsdCB7Cglwcm90ZWN0ZWQgJG5vX3Jlc3VsdHNl'));
	@fwrite($fp, base64_decode('dDsKCXByb3RlY3RlZCAkcmVzOwoKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkcmVzKSB7CgkJJHRoaXMtPm5vX3Jlc3VsdHNldCA9IGlzX2Jvb2woJHJlcyk7CgkJCgkJaWYgKCEkdGhpcy0+bm9fcmVzdWx0c2V0KSB7CgkJCSR0aGlzLT5yZXMgPSAkcmVz'));
	@fwrite($fp, base64_decode('OwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIF9fZGVzdHJ1Y3QoKSB7CgkJLy8gb2RiY19jbG9zZV9jdXJzb3IoJHRoaXMtPnJlcyk7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGNvbnRhaW5zUmVzdWx0U2V0KCk6IGJvb2wgewoJCXJldHVybiAhJHRoaXMtPm5vX3Jl'));
	@fwrite($fp, base64_decode('c3VsdHNldDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gbnVtX3Jvd3MoKTogaW50IHsKCQlpZiAoJHRoaXMtPm5vX3Jlc3VsdHNldCkgdGhyb3cgbmV3IEV4Y2VwdGlvbigiVGhlIHF1ZXJ5IGhhcyByZXR1cm5lZCBubyByZXN1bHQgc2V0IChpLmUuIGl0IHdhcyBub3Qg'));
	@fwrite($fp, base64_decode('YSBTRUxFQ1QgcXVlcnkpIik7CgkJcmV0dXJuIG9kYmNfbnVtX3Jvd3MoJHRoaXMtPnJlcyk7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGZldGNoX2FycmF5KCkvKjogP2FycmF5Ki8gewoJCWlmICgkdGhpcy0+bm9fcmVzdWx0c2V0KSB0aHJvdyBuZXcgRXhjZXB0aW9u'));
	@fwrite($fp, base64_decode('KCJUaGUgcXVlcnkgaGFzIHJldHVybmVkIG5vIHJlc3VsdCBzZXQgKGkuZS4gaXQgd2FzIG5vdCBhIFNFTEVDVCBxdWVyeSkiKTsKCQkkcmV0ID0gb2RiY19mZXRjaF9hcnJheSgkdGhpcy0+cmVzKTsKCQlpZiAoJHJldCA9PT0gZmFsc2UpICRyZXQgPSBudWxsOwoJ'));
	@fwrite($fp, base64_decode('CWlmICghaXNfbnVsbCgkcmV0KSkgewoJCQkvLyBPREJDIGdpdmVzIGJpdCgxKSBhcyBiaW5hcnksIE15U1FMIGFzIGludGVnZXIgYW5kIFBETyBhcyBzdHJpbmcuCgkJCS8vIFdlJ2xsIGRvIGl0IGxpa2UgTXlTUUwgZG9lcywgZXZlbiBpZiBPREJDIGlzIGFjdHVh'));
	@fwrite($fp, base64_decode('bGx5IG1vcmUgY29ycmVjdC4KCQkJZm9yZWFjaCAoJHJldCBhcyAmJHZhbHVlKSB7CgkJCQlpZiAoJHZhbHVlID09PSBjaHIoMCkpICR2YWx1ZSA9IDA7CgkJCQlpZiAoJHZhbHVlID09PSBjaHIoMSkpICR2YWx1ZSA9IDE7CgkJCX0KCQl9CgkJcmV0dXJuICRyZXQ7'));
	@fwrite($fp, base64_decode('Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGZldGNoX29iamVjdCgpLyo6ID9vYmplY3QqLyB7CgkJaWYgKCR0aGlzLT5ub19yZXN1bHRzZXQpIHRocm93IG5ldyBFeGNlcHRpb24oIlRoZSBxdWVyeSBoYXMgcmV0dXJuZWQgbm8gcmVzdWx0IHNldCAoaS5lLiBpdCB3YXMg'));
	@fwrite($fp, base64_decode('bm90IGEgU0VMRUNUIHF1ZXJ5KSIpOwoJCSRyZXQgPSBvZGJjX2ZldGNoX29iamVjdCgkdGhpcy0+cmVzKTsKCQlpZiAoJHJldCA9PT0gZmFsc2UpICRyZXQgPSBudWxsOwoJCWlmICghaXNfbnVsbCgkcmV0KSkgewoJCQkvLyBPREJDIGdpdmVzIGJpdCgxKSBhcyBi'));
	@fwrite($fp, base64_decode('aW5hcnksIE15U1FMIGFzIGludGVnZXIgYW5kIFBETyBhcyBzdHJpbmcuCgkJCS8vIFdlJ2xsIGRvIGl0IGxpa2UgTXlTUUwgZG9lcywgZXZlbiBpZiBPREJDIGlzIGFjdHVhbGx5IG1vcmUgY29ycmVjdC4KCQkJZm9yZWFjaCAoJHJldCBhcyAmJHZhbHVlKSB7CgkJ'));
	@fwrite($fp, base64_decode('CQlpZiAoJHZhbHVlID09PSBjaHIoMCkpICR2YWx1ZSA9IDA7CgkJCQlpZiAoJHZhbHVlID09PSBjaHIoMSkpICR2YWx1ZSA9IDE7CgkJCX0KCQl9CgkJcmV0dXJuICRyZXQ7Cgl9Cn0K'));
	@fclose($fp);
}
if (!is_file('plugins/database/odbc/plugin.inc.php')) {
	warn('File has vanished! Will re-create it: plugins/database/odbc/plugin.inc.php');
	writefile_6();
	if (!is_file('plugins/database/odbc/plugin.inc.php')) {
		warn('File cannot be created (not existing): plugins/database/odbc/plugin.inc.php');
	} else if (sha1_file('plugins/database/odbc/plugin.inc.php') != '7a7733c4ef9698099f2223b9c93bb5d24dbf0b5a') {
		warn('File cannot be created (checksum mismatch): plugins/database/odbc/plugin.inc.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/database/odbc/plugin.inc.php', 0644)) {
		warn('Could not change file permissions of plugins/database/odbc/plugin.inc.php');
	}
} else {
	if (@sha1_file('plugins/database/odbc/plugin.inc.php') !== '7a7733c4ef9698099f2223b9c93bb5d24dbf0b5a') {
		if (@sha1_file('plugins/database/odbc/plugin.inc.php') !== '7e4d8cc90beca6a651df8a5f5d35e51bd2ba6875') {
			warn('File was modified. Will overwrite the changes now: plugins/database/odbc/plugin.inc.php');
			$tmp = pathinfo('plugins/database/odbc/plugin.inc.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/database/odbc/plugin.inc.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/database/odbc/plugin.inc.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_6();
		if (@sha1_file('plugins/database/odbc/plugin.inc.php') !== '7a7733c4ef9698099f2223b9c93bb5d24dbf0b5a') {
			warn('File cannot be written (checksum mismatch): plugins/database/odbc/plugin.inc.php');
		}
	}
}

// Files different: plugins/database/pdo/plugin.inc.php
function writefile_7() {
	@$fp = fopen('plugins/database/pdo/plugin.inc.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmlmICghZGVmaW5lZCgnSU5fT0lEUExVUycpKSBkaWUoKTsKCmNsYXNzIE9JRHBsdXNEYXRhQmFzZVBsdWdpblBETyBleHRlbmRzIE9JRHBsdXNEYXRhQmFzZVBsdWdpbiB7Cglwcml2YXRlICRwZG87'));
	@fwrite($fp, base64_decode('Cglwcml2YXRlICRsYXN0X3F1ZXJ5OwoKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0UGx1Z2luSW5mb3JtYXRpb24oKTogYXJyYXkgewoJCSRvdXQgPSBhcnJheSgpOwoJCSRvdXRbJ25hbWUnXSA9ICdQRE8nOwoJCSRvdXRbJ2F1dGhvciddID0gJ1ZpYVRoaW5r'));
	@fwrite($fp, base64_decode('U29mdCc7CgkJJG91dFsndmVyc2lvbiddID0gbnVsbDsKCQkkb3V0WydkZXNjcmlwdGlvbkhUTUwnXSA9IG51bGw7CgkJcmV0dXJuICRvdXQ7Cgl9CgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBuYW1lKCk6IHN0cmluZyB7CgkJcmV0dXJuICJQRE8iOwoJfQoJCglw'));
	@fwrite($fp, base64_decode('cml2YXRlICRsYXN0X2Vycm9yID0gbnVsbDsKCglwdWJsaWMgZnVuY3Rpb24gcXVlcnkoc3RyaW5nICRzcWwsIC8qP2FycmF5Ki8gJHByZXBhcmVkX2FyZ3M9bnVsbCk6IE9JRHBsdXNRdWVyeVJlc3VsdCB7CgkJJHRoaXMtPmxhc3RfcXVlcnkgPSAkc3FsOwoJCSR0'));
	@fwrite($fp, base64_decode('aGlzLT5sYXN0X2Vycm9yID0gbnVsbDsKCQlpZiAoaXNfbnVsbCgkcHJlcGFyZWRfYXJncykpIHsKCQkJJHJlcyA9ICR0aGlzLT5wZG8tPnF1ZXJ5KCRzcWwpOwoKCQkJaWYgKCRyZXMgPT09IGZhbHNlKSB7CgkJCQkkdGhpcy0+bGFzdF9lcnJvciA9ICR0aGlzLT5w'));
	@fwrite($fp, base64_decode('ZG8tPmVycm9ySW5mbygpWzJdOwoJCQkJdGhyb3cgbmV3IE9JRHBsdXNTUUxFeGNlcHRpb24oJHNxbCwgJHRoaXMtPmVycm9yKCkpOwoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIG5ldyBPSURwbHVzUXVlcnlSZXN1bHRQRE8oJHJlcyk7CgkJCX0KCQl9IGVsc2UgewoJ'));
	@fwrite($fp, base64_decode('CQkvLyBURVNUOiBFbXVsYXRlIHRoZSBwcmVwYXJlZCBzdGF0ZW1lbnQKCQkJLyoKCQkJZm9yZWFjaCAoJHByZXBhcmVkX2FyZ3MgYXMgJGFyZykgewoJCQkJJG5lZWRsZSA9ICc/JzsKCQkJCSRyZXBsYWNlID0gIickYXJnJyI7IC8vIFRPRE86IHR5cGVzCgkJCQkk'));
	@fwrite($fp, base64_decode('cG9zID0gc3RycG9zKCRzcWwsICRuZWVkbGUpOwoJCQkJaWYgKCRwb3MgIT09IGZhbHNlKSB7CgkJCQkJJHNxbCA9IHN1YnN0cl9yZXBsYWNlKCRzcWwsICRyZXBsYWNlLCAkcG9zLCBzdHJsZW4oJG5lZWRsZSkpOwoJCQkJfQoJCQl9CgkJCXJldHVybiBPSURwbHVz'));
	@fwrite($fp, base64_decode('UXVlcnlSZXN1bHRQRE8oJHRoaXMtPnBkby0+cXVlcnkoJHNxbCkpOwoJCQkqLwoKCQkJaWYgKCFpc19hcnJheSgkcHJlcGFyZWRfYXJncykpIHsKCQkJCXRocm93IG5ldyBFeGNlcHRpb24oIidwcmVwYXJlZF9hcmdzJyBtdXN0IGJlIGVpdGhlciBOVUxMIG9yIGFu'));
	@fwrite($fp, base64_decode('IEFSUkFZLiIpOwoJCQl9CgkJCQoJCQlmb3JlYWNoICgkcHJlcGFyZWRfYXJncyBhcyAmJHZhbHVlKSB7CgkJCQkvLyBXZSBuZWVkIHRvIG1hbnVhbGx5IGNvbnZlcnQgYm9vbGVhbnMgaW50byBzdHJpbmdzLCBiZWNhdXNlIHRoZXJlIGlzIGEgCgkJCQkvLyAxNCB5'));
	@fwrite($fp, base64_decode('ZWFyIG9sZCBidWcgdGhhdCBoYXNuJ3QgYmVlbiBhZHJlc3NlZCBieSB0aGUgUERPIGRldmVsb3BlcnM6CgkJCQkvLyBodHRwczovL2J1Z3MucGhwLm5ldC9idWcucGhwP2lkPTU3MTU3IAoJCQkJLy8gTm90ZTogV2UgYXJlIHVzaW5nICcxJyBhbmQgJzAnIGluc3Rl'));
	@fwrite($fp, base64_decode('YWQgb2YgJ3RydWUnIGFuZCAnZmFsc2UnIGJlY2F1c2UgTXlTUUwgY29udmVydHMgYm9vbGVhbiB0byB0aW55aW50KDEpCgkJCQlpZiAoaXNfYm9vbCgkdmFsdWUpKSAkdmFsdWUgPSAkdmFsdWUgPyAnMScgOiAnMCc7CgkJCX0gCgkJCQoJCQkkcHMgPSAkdGhpcy0+'));
	@fwrite($fp, base64_decode('cGRvLT5wcmVwYXJlKCRzcWwpOwoJCQlpZiAoISRwcykgewoJCQkJdGhyb3cgbmV3IE9JRHBsdXNTUUxFeGNlcHRpb24oJHNxbCwgJ0Nhbm5vdCBwcmVwYXJlIHN0YXRlbWVudCcpOwoJCQl9CgkJCSR0aGlzLT5wcmVwYXJlX2NhY2hlWyRzcWxdID0gJHBzOwoKCQkJ'));
	@fwrite($fp, base64_decode('aWYgKCEkcHMtPmV4ZWN1dGUoJHByZXBhcmVkX2FyZ3MpKSB7CgkJCQkkdGhpcy0+bGFzdF9lcnJvciA9ICRwcy0+ZXJyb3JJbmZvKClbMl07CgkJCQl0aHJvdyBuZXcgT0lEcGx1c1NRTEV4Y2VwdGlvbigkc3FsLCAkdGhpcy0+ZXJyb3IoKSk7CgkJCX0KCQkJcmV0'));
	@fwrite($fp, base64_decode('dXJuIG5ldyBPSURwbHVzUXVlcnlSZXN1bHRQRE8oJHBzKTsKCQl9Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGluc2VydF9pZCgpOiBpbnQgewoJCXJldHVybiAkdGhpcy0+cGRvLT5sYXN0SW5zZXJ0SWQoKTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZXJyb3IoKTogc3Ry'));
	@fwrite($fp, base64_decode('aW5nIHsKCQkkZXJyID0gJHRoaXMtPmxhc3RfZXJyb3I7CgkJaWYgKCRlcnIgPT0gbnVsbCkgJGVyciA9ICcnOwoJCXJldHVybiAkZXJyOwoJfQoKCXByb3RlY3RlZCBmdW5jdGlvbiBkb0Nvbm5lY3QoKTogdm9pZCB7CgkJdHJ5IHsKCQkJJG9wdGlvbnMgPSBbCgkJ'));
	@fwrite($fp, base64_decode('CSMgICAgUERPOjpBVFRSX0VSUk1PREUgICAgICAgICAgICA9PiBQRE86OkVSUk1PREVfRVhDRVBUSU9OLAoJCQkgICAgUERPOjpBVFRSX0RFRkFVTFRfRkVUQ0hfTU9ERSA9PiBQRE86OkZFVENIX0FTU09DLAoJCQkgICAgUERPOjpBVFRSX0VNVUxBVEVfUFJFUEFS'));
	@fwrite($fp, base64_decode('RVMgICA9PiB0cnVlLAoJCQldOwoKCQkJLy8gVHJ5IGNvbm5lY3RpbmcgdG8gdGhlIGRhdGFiYXNlCgkJCSR0aGlzLT5wZG8gPSBuZXcgUERPKE9JRFBMVVNfUERPX0RTTiwgT0lEUExVU19QRE9fVVNFUk5BTUUsIGJhc2U2NF9kZWNvZGUoT0lEUExVU19QRE9fUEFT'));
	@fwrite($fp, base64_decode('U1dPUkQpLCAkb3B0aW9ucyk7CgkJfSBjYXRjaCAoUERPRXhjZXB0aW9uICRlKSB7CgkJCSRtZXNzYWdlID0gJGUtPmdldE1lc3NhZ2UoKTsKCQkJdGhyb3cgbmV3IE9JRHBsdXNDb25maWdJbml0aWFsaXphdGlvbkV4Y2VwdGlvbignQ29ubmVjdGlvbiB0byB0aGUg'));
	@fwrite($fp, base64_decode('ZGF0YWJhc2UgZmFpbGVkISAnLiRtZXNzYWdlKTsKCQl9CgoJCSR0aGlzLT5xdWVyeSgiU0VUIE5BTUVTICd1dGY4JyIpOwoJfQoKCXByb3RlY3RlZCBmdW5jdGlvbiBkb0Rpc2Nvbm5lY3QoKTogdm9pZCB7CgkJJHRoaXMtPnBkbyA9IG51bGw7IC8vIHRoZSBjb25u'));
	@fwrite($fp, base64_decode('ZWN0aW9uIHdpbGwgYmUgY2xvc2VkIGJ5IHJlbW92aW5nIHRoZSByZWZlcmVuY2UKCX0KCglwcml2YXRlICRpbnRyYW5zYWN0aW9uID0gZmFsc2U7CgoJcHVibGljIGZ1bmN0aW9uIHRyYW5zYWN0aW9uX2JlZ2luKCk6IHZvaWQgewoJCWlmICgkdGhpcy0+aW50cmFu'));
	@fwrite($fp, base64_decode('c2FjdGlvbikgdGhyb3cgbmV3IEV4Y2VwdGlvbigiTmVzdGVkIHRyYW5zYWN0aW9ucyBhcmUgbm90IHN1cHBvcnRlZCBieSB0aGlzIGRhdGFiYXNlIHBsdWdpbi4iKTsKCQkkdGhpcy0+cGRvLT5iZWdpblRyYW5zYWN0aW9uKCk7CgkJJHRoaXMtPmludHJhbnNhY3Rp'));
	@fwrite($fp, base64_decode('b24gPSB0cnVlOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiB0cmFuc2FjdGlvbl9jb21taXQoKTogdm9pZCB7CgkJJHRoaXMtPnBkby0+Y29tbWl0KCk7CgkJJHRoaXMtPmludHJhbnNhY3Rpb24gPSBmYWxzZTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gdHJhbnNhY3Rpb25f'));
	@fwrite($fp, base64_decode('cm9sbGJhY2soKTogdm9pZCB7CgkJJHRoaXMtPnBkby0+cm9sbEJhY2soKTsKCQkkdGhpcy0+aW50cmFuc2FjdGlvbiA9IGZhbHNlOwoJfQp9CgpjbGFzcyBPSURwbHVzUXVlcnlSZXN1bHRQRE8gZXh0ZW5kcyBPSURwbHVzUXVlcnlSZXN1bHQgewoJcHJvdGVjdGVk'));
	@fwrite($fp, base64_decode('ICRub19yZXN1bHRzZXQ7Cglwcm90ZWN0ZWQgJHJlczsKCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJHJlcykgewoJCSR0aGlzLT5ub19yZXN1bHRzZXQgPSBpc19ib29sKCRyZXMpOwoJCQoJCWlmICghJHRoaXMtPm5vX3Jlc3VsdHNldCkgewoJCQkkdGhp'));
	@fwrite($fp, base64_decode('cy0+cmVzID0gJHJlczsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBfX2Rlc3RydWN0KCkgewoJCWlmICgkdGhpcy0+cmVzKSAkdGhpcy0+cmVzLT5jbG9zZUN1cnNvcigpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gY29udGFpbnNSZXN1bHRTZXQoKTogYm9vbCB7'));
	@fwrite($fp, base64_decode('CgkJcmV0dXJuICEkdGhpcy0+bm9fcmVzdWx0c2V0OwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBudW1fcm93cygpOiBpbnQgewoJCWlmICgkdGhpcy0+bm9fcmVzdWx0c2V0KSB0aHJvdyBuZXcgRXhjZXB0aW9uKCJUaGUgcXVlcnkgaGFzIHJldHVybmVkIG5vIHJlc3Vs'));
	@fwrite($fp, base64_decode('dCBzZXQgKGkuZS4gaXQgd2FzIG5vdCBhIFNFTEVDVCBxdWVyeSkiKTsKCQlyZXR1cm4gJHRoaXMtPnJlcy0+cm93Q291bnQoKTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZmV0Y2hfYXJyYXkoKS8qOiA/YXJyYXkqLyB7CgkJaWYgKCR0aGlzLT5ub19yZXN1bHRzZXQp'));
	@fwrite($fp, base64_decode('IHRocm93IG5ldyBFeGNlcHRpb24oIlRoZSBxdWVyeSBoYXMgcmV0dXJuZWQgbm8gcmVzdWx0IHNldCAoaS5lLiBpdCB3YXMgbm90IGEgU0VMRUNUIHF1ZXJ5KSIpOwoJCSRyZXQgPSAkdGhpcy0+cmVzLT5mZXRjaChQRE86OkZFVENIX0FTU09DKTsKCQlpZiAoJHJl'));
	@fwrite($fp, base64_decode('dCA9PT0gZmFsc2UpICRyZXQgPSBudWxsOwoJCXJldHVybiAkcmV0OwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBmZXRjaF9vYmplY3QoKS8qOiA/b2JqZWN0Ki8gewoJCWlmICgkdGhpcy0+bm9fcmVzdWx0c2V0KSB0aHJvdyBuZXcgRXhjZXB0aW9uKCJUaGUgcXVlcnkg'));
	@fwrite($fp, base64_decode('aGFzIHJldHVybmVkIG5vIHJlc3VsdCBzZXQgKGkuZS4gaXQgd2FzIG5vdCBhIFNFTEVDVCBxdWVyeSkiKTsKCQkkcmV0ID0gJHRoaXMtPnJlcy0+ZmV0Y2goUERPOjpGRVRDSF9PQkopOwoJCWlmICgkcmV0ID09PSBmYWxzZSkgJHJldCA9IG51bGw7CgkJcmV0dXJu'));
	@fwrite($fp, base64_decode('ICRyZXQ7Cgl9Cn0K'));
	@fclose($fp);
}
if (!is_file('plugins/database/pdo/plugin.inc.php')) {
	warn('File has vanished! Will re-create it: plugins/database/pdo/plugin.inc.php');
	writefile_7();
	if (!is_file('plugins/database/pdo/plugin.inc.php')) {
		warn('File cannot be created (not existing): plugins/database/pdo/plugin.inc.php');
	} else if (sha1_file('plugins/database/pdo/plugin.inc.php') != 'd48dc872c44ebb9852f3911c1fb2a99d62e4b3aa') {
		warn('File cannot be created (checksum mismatch): plugins/database/pdo/plugin.inc.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/database/pdo/plugin.inc.php', 0644)) {
		warn('Could not change file permissions of plugins/database/pdo/plugin.inc.php');
	}
} else {
	if (@sha1_file('plugins/database/pdo/plugin.inc.php') !== 'd48dc872c44ebb9852f3911c1fb2a99d62e4b3aa') {
		if (@sha1_file('plugins/database/pdo/plugin.inc.php') !== '0dfdea4fa534458f429ed0cf374b8ac3855cb87f') {
			warn('File was modified. Will overwrite the changes now: plugins/database/pdo/plugin.inc.php');
			$tmp = pathinfo('plugins/database/pdo/plugin.inc.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/database/pdo/plugin.inc.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/database/pdo/plugin.inc.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_7();
		if (@sha1_file('plugins/database/pdo/plugin.inc.php') !== 'd48dc872c44ebb9852f3911c1fb2a99d62e4b3aa') {
			warn('File cannot be written (checksum mismatch): plugins/database/pdo/plugin.inc.php');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 245\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 245') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

