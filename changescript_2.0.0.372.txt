<?php /* <ViaThinkSoftSignature>
RPFYwE6cGSQztv+GNKVS+DVwFW+wC2NM9nYVWR1GvrqaVmh1dXDzXl+AgjEv4ujgs
T18cJOwooQyCrds7myZqKOQWmu9wWEGdoBsa36AmDlZuq0nWhqCpUKJfRtu9naxE8
cHhKPkUheMK0sLY8mGBpyNPULjP9CBcK4RmQcxbbo2+wJb1ToHSuUtmDrp95SdrOn
JKIc8pQ3D9s5u6cw/3DMyC/k9saaM6l65zF4dpoAFQN7yB3kML9JFfUACpcbimkHu
x7jAomiW6fIhkIsffWn14SMPyfU5oYx6JZSSPLEDwnmZZB6PtSo11YwxZN9+xoN9B
xb2AD2u1M0sc/fL7+YUtoHATm6pXTZXmk8Epf/0a1RPwzpfUkPW80hacxcZoGqoSs
yTAW38P+7O+H+1EmoGyyHeY3Yb+ED1j6FaMspqu12JqoFLMDpiMvHWuVNDGV/q0W2
shnpbHU1/+F80JMI1jF2vCPZ4GTkJoenPkYN46mPf6CBkFMt3T5EBWHqXjeFxjsB9
dDE6D60mCNLe7Er6i9DZbcg/g95UBlMnk+HnW33AVlwU8MU/rsMfTQH201RDtNva5
X68GRFP6OEQfytoYElEhR4BOAlpheXeXWHJ8Y5c01/yCIeuPTMrIiFs0xIzqgIDSy
QACJfoYpsgmblrm87gbJXFzCeBc5Pxyu3nsP31aGW9mF1BbjhOIAFNoaK52btZZ15
9vHtByr+h9524C/QvSxPXFARHQJ1T4tb3kkH9Srhrr2oc1UDlnIlv890hmWBOOQsX
HjQMax/ip/IjsBPGNiutKzDoVnfWz4iADvJNTTatHb424DIHP0ObB5Ej2oosdS11T
TR0LEVGVirzvj5yna32/WnggIoUkb1wWBAANwhGLuQfiw/v9+LrqLwgSGWg6A9vVp
95B7hUoIWZFKHcQeZobVVcCGAxjK8Imwk8zsOZABGaPf/wmDKggvPPOLtzXVd9fkg
YxPvbmWJ7zZdffmfEqV+zsmUNoJiBkXIvZ+KCDVYvMKEgLfl2P18UBo753bCb6Yz9
t74vSOCFpyv4f40D4z/W2duI0FmGyckmi8PO1VoVzBlIftXkNrI9Xfn7UhKZ+f7Zd
PCXfZUAkCMLJ6RwSxnLDqYvfXHPieief496A6Nf7Zo6cNLVGmMT+yiMzvM0mnlWUa
OsekHNiVaGYHwv8EzXppZMvE/uZ/FMpdo3jLsi4hhXMsamJiM2keC+rSdCAKf+DI8
J1D65hSm9Z1PXKlDgYe0ZTkcNHrktqOYOlHK/pTQ7ULHEeq2Gs7HCmMTy3tPp/63q
B7X9XPdPvHVvp51TR7yL/l0ZfF/be9ShARFp4+gWieeagliNJ45ixnfZbypGmVG3d
g==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 371') {
	err('This update can only be applied to OIDplus version 2.0.0.371!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: includes/classes/VtsBrowserDownload.class.php
function writefile_1() {
	@$fp = fopen('includes/classes/VtsBrowserDownload.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIFZ0c0Jyb3dzZXJEb3dubG9hZC5jbGFzcy5waHAKICogQ29weXJpZ2h0IDIwMjAgRGFuaWVsIE1hcnNjaGFsbCwgVmlhVGhpbmtTb2Z0CiAqCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAi'));
	@fwrite($fp, base64_decode('TGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgaHR0cDovL3d3dy5hcGFjaGUu'));
	@fwrite($fp, base64_decode('b3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24g'));
	@fwrite($fp, base64_decode('YW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBw'));
	@fwrite($fp, base64_decode('ZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwoKY2xhc3MgVnRzQnJvd3NlckRvd25sb2FkIHsKCglwcml2YXRlIHN0YXRpYyBmdW5jdGlvbiB3ZWxsS25vd25JbmxpbmVGaWxlKCRmaWxlX2V4dGVuc2lvbikgewoJCS8v'));
	@fwrite($fp, base64_decode('IFdpbmRvd3MgRmlyZWZveDogQnJvd3NlciBkZWNpZGVkIHdoZWF0ZXIgdG8gZGlzcGxheSBvciBkb3dubG9hZCBieSBsb29raW5nIGF0IHRoZSBtaW1lIHR5cGUgKGlubGluZSBkaXNwb3NpdGlvbiB3aXRoIGV4cGxpY2l0IGZpbGVuYW1lIHdvcmtzKQoJCS8vIFdp'));
	@fwrite($fp, base64_decode('bmRvd3MgQ2hyb21lOiAgQnJvd3NlciBkZWNpZGVkIHdoZWF0ZXIgdG8gZGlzcGxheSBvciBkb3dubG9hZCBieSBsb29raW5nIGF0IHRoZSBtaW1lIHR5cGUgKGlubGluZSBkaXNwb3NpdGlvbiB3aXRoIGV4cGxpY2l0IGZpbGVuYW1lIERPRVMgTk9UIFdPUkspCgoJ'));
	@fwrite($fp, base64_decode('CS8vJGZpbGVfZXh0ZW5zaW9uID0gc3RydG9sb3dlcigkZmlsZV9leHRlbnNpb24pOwoJCS8vJGFycmF5X2xpc3RlbiA9IGFycmF5KCd0eHQnLCAnbXAzJywgJ3dhdicsICdtaWQnLCAnb2dnJywgJ3BkZicsICdhdmknLCAnbW92JywgJ21wNCcsICdtcGVnJywgJ21w'));
	@fwrite($fp, base64_decode('ZycsICdzd2YnLCAnZ2lmJywgJ2pwZycsICdqcGVnJywgJ3BuZycpOwoJCS8vcmV0dXJuIGluX2FycmF5KCRmaWxlX2V4dGVuc2lvbiwgJGFycmF5X2xpc3Rlbik7CgoJCXJldHVybiB0cnVlOwoJfQoKCXByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIGdldE1pbWVUeXBl'));
	@fwrite($fp, base64_decode('KCRmaWxlX2V4dGVuc2lvbikgewoJCSRmaWxlX2V4dGVuc2lvbiA9IHN0cnRvbG93ZXIoJGZpbGVfZXh0ZW5zaW9uKTsKCQlyZXR1cm4gVnRzRmlsZVR5cGVEZXRlY3Q6OmdldE1pbWVUeXBlKCdkdW1teS4nLiRmaWxlX2V4dGVuc2lvbik7Cgl9CgoJcHVibGljIHN0'));
	@fwrite($fp, base64_decode('YXRpYyBmdW5jdGlvbiBvdXRwdXRfZmlsZSgkZmlsZSwgJG1pbWVfdHlwZT0nJywgJGlubGluZV9tb2RlPTIvKjI9YXV0byovKSB7CgkJLy8gUGFydGl0YWxseSB0YWtlbiBmcm9tOgoJCS8vIC0gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzEzODIxOTkyLzQ4'));
	@fwrite($fp, base64_decode('ODUzOQoJCS8vIC0gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzMyODg1NzA2LzQ4ODUzOQoKCQlpZiAoY29ubmVjdGlvbl9zdGF0dXMoKSAhPSAwKSByZXR1cm4gZmFsc2U7CgoJCSRmaWxlX2V4dGVuc2lvbiA9IHBhdGhpbmZvKCRmaWxlLCBQQVRISU5GT19F'));
	@fwrite($fp, base64_decode('WFRFTlNJT04pOwoKCQlpZighaXNfcmVhZGFibGUoJGZpbGUpKSB0aHJvdyBuZXcgRXhjZXB0aW9uKCdGaWxlIG5vdCBmb3VuZCBvciBpbmFjY2Vzc2libGUhJyk7CgkJJHNpemUgPSBmaWxlc2l6ZSgkZmlsZSk7CgkJJG5hbWUgPSByYXd1cmxkZWNvZGUoYmFzZW5h'));
	@fwrite($fp, base64_decode('bWUoJGZpbGUpKTsKCgkJaWYgKCRtaW1lX3R5cGUgPT0gJycpIHsKCQkJJG1pbWVfdHlwZSA9IHNlbGY6OmdldE1pbWVUeXBlKCRmaWxlX2V4dGVuc2lvbik7CgkJCWlmICghJG1pbWVfdHlwZSkgJG1pbWVfdHlwZT0nYXBwbGljYXRpb24vZm9yY2UtZG93bmxvYWQn'));
	@fwrite($fp, base64_decode('OwoJCX0KCgoKCQl3aGlsZSAob2JfZ2V0X2xldmVsKCkgPiAwKSBAb2JfZW5kX2NsZWFuKCk7CgoJCXN3aXRjaCAoJGlubGluZV9tb2RlKSB7CgoJCQljYXNlIDA6CgkJCQkkZGlzcG9zaXRpb24gPSAnYXR0YWNobWVudCc7CgkJCQlicmVhazsKCgkJCWNhc2UgMToK'));
	@fwrite($fp, base64_decode('CQkJCSRkaXNwb3NpdGlvbiA9ICdpbmxpbmUnOwoJCQkJYnJlYWs7CgoJCQljYXNlIDI6CgkJCQkkZGlzcG9zaXRpb24gPSBzZWxmOjp3ZWxsS25vd25JbmxpbmVGaWxlKCRmaWxlX2V4dGVuc2lvbikgPyAnaW5saW5lJyA6ICdhdHRhY2htZW50JzsKCQkJCWJyZWFr'));
	@fwrite($fp, base64_decode('OwoKCQkJZGVmYXVsdDoKCQkJCXRocm93IG5ldyBFeGNlcHRpb24oJ0ludmFsaWQgdmFsdWUgZm9yIGlubGluZV9tb2RlJyk7CgkJCQlicmVhazsKCQl9CgoJCWlmKGluaV9nZXQoJ3psaWIub3V0cHV0X2NvbXByZXNzaW9uJykpewoJCQlpbmlfc2V0KCd6bGliLm91'));
	@fwrite($fp, base64_decode('dHB1dF9jb21wcmVzc2lvbicsICdPZmYnKTsKCQl9CgkJaGVhZGVyKCdDb250ZW50LVR5cGU6ICcgLiAkbWltZV90eXBlKTsKCgkJJHVhID0gaXNzZXQoJF9TRVJWRVJbJ0hUVFBfVVNFUl9BR0VOVCddKSA/IHN0cnRvdXBwZXIoJF9TRVJWRVJbJ0hUVFBfVVNFUl9B'));
	@fwrite($fp, base64_decode('R0VOVCddKSA6ICcnOwoJCWlmIChzdHJzdHIoJHVhLCAnTVNJRScpKSB7CgkJCSRuYW1lX21zaWUgPSBwcmVnX3JlcGxhY2UoJy9cLi8nLCAnJTJlJywgJG5hbWUsIHN1YnN0cl9jb3VudCgkbmFtZSwgJy4nKSAtIDEpOwoJCQloZWFkZXIoJ0NvbnRlbnQtRGlzcG9z'));
	@fwrite($fp, base64_decode('aXRpb246ICcuJGRpc3Bvc2l0aW9uLic7ZmlsZW5hbWU9IicuJG5hbWVfbXNpZS4nIicpOwoJCX0gZWxzZSBpZiAoc3Ryc3RyKCR1YSwgJ0ZJUkVGT1gnKSkgewoJCQkvLyBUT0RPOiBJbXBsZW1lbnQgImVuY29kZVJGQzU5ODdWYWx1ZUNoYXJzIiBkZXNjcmliZWQg'));
	@fwrite($fp, base64_decode('YXQgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZGUvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvZW5jb2RlVVJJQ29tcG9uZW50ID8KCQkJaGVhZGVyKCdDb250ZW50LURpc3Bvc2l0aW9uOiAnLiRkaXNwb3NpdGlvbi4n'));
	@fwrite($fp, base64_decode('O2ZpbGVuYW1lKj0iVVRGLThcJ1wnJy51dGY4X2VuY29kZSgkbmFtZSkuJyInKTsKCQl9IGVsc2UgewoJCQkvLyBOb3RlOiBUaGVyZSBpcyBwb3NzaWJseSBhIGJ1ZyBpbiBHb29nbGUgQ2hyb21lOiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy82'));
	@fwrite($fp, base64_decode('MTg2NjUwOC9jaHJvbWUtaWdub3Jlcy1jb250ZW50LWRpc3Bvc2l0aW9uLWZpbGVuYW1lCgkJCWhlYWRlcignQ29udGVudC1EaXNwb3NpdGlvbjogJy4kZGlzcG9zaXRpb24uJztmaWxlbmFtZT0iJy4kbmFtZS4nIicpOwoJCX0KCgkJaGVhZGVyKCdDb250ZW50LVRy'));
	@fwrite($fp, base64_decode('YW5zZmVyLUVuY29kaW5nOiBiaW5hcnknKTsKCQloZWFkZXIoJ0FjY2VwdC1SYW5nZXM6IGJ5dGVzJyk7CgkJaGVhZGVyKCdDYWNoZS1Db250cm9sOiBwdWJsaWMnKTsKCgkJaWYgKGlzc2V0KCRfU0VSVkVSWydIVFRQX1JBTkdFJ10pKSB7CgkJCWxpc3QoJGEsICRy'));
	@fwrite($fp, base64_decode('YW5nZSkgPSBleHBsb2RlKCI9IiwkX1NFUlZFUlsnSFRUUF9SQU5HRSddLDIpOwoJCQlsaXN0KCRyYW5nZSkgPSBleHBsb2RlKCIsIiwkcmFuZ2UsMik7CgkJCWxpc3QoJHJhbmdlLCAkcmFuZ2VfZW5kKSA9IGV4cGxvZGUoIi0iLCAkcmFuZ2UpOwoJCQkkcmFuZ2U9'));
	@fwrite($fp, base64_decode('aW50dmFsKCRyYW5nZSk7CgkJCWlmKCEkcmFuZ2VfZW5kKSB7CgkJCQkkcmFuZ2VfZW5kPSRzaXplLTE7CgkJCX0gZWxzZSB7CgkJCQkkcmFuZ2VfZW5kPWludHZhbCgkcmFuZ2VfZW5kKTsKCQkJfQoKCQkJJG5ld19sZW5ndGggPSAkcmFuZ2VfZW5kLSRyYW5nZSsx'));
	@fwrite($fp, base64_decode('OwoJCQloZWFkZXIoIkhUVFAvMS4xIDIwNiBQYXJ0aWFsIENvbnRlbnQiKTsKCQkJaGVhZGVyKCJDb250ZW50LUxlbmd0aDogJG5ld19sZW5ndGgiKTsKCQkJaGVhZGVyKCJDb250ZW50LVJhbmdlOiBieXRlcyAkcmFuZ2UtJHJhbmdlX2VuZC8kc2l6ZSIpOwoJCX0g'));
	@fwrite($fp, base64_decode('ZWxzZSB7CgkJCSRldGFnID0gbWQ1X2ZpbGUoJGZpbGUpOwoJCQloZWFkZXIoIkV0YWc6ICRldGFnIik7CgkJCWlmIChpc3NldCgkX1NFUlZFUlsnSFRUUF9JRl9OT05FX01BVENIJ10pICYmICh0cmltKCRfU0VSVkVSWydIVFRQX0lGX05PTkVfTUFUQ0gnXSkgPT0g'));
	@fwrite($fp, base64_decode('JGV0YWcpKSB7CgkJCQloZWFkZXIoIkhUVFAvMS4xIDMwNCBOb3QgTW9kaWZpZWQiKTsKCQkJCXJldHVybiB0cnVlOwoJCQl9CgoJCQkkbmV3X2xlbmd0aD0kc2l6ZTsKCQkJaGVhZGVyKCJDb250ZW50LUxlbmd0aDogIi4kc2l6ZSk7CgkJCWhlYWRlcignQ29udGVu'));
	@fwrite($fp, base64_decode('dC1NRDU6ICcuJGV0YWcpOyAvLyBSRkMgMjYxNiBjbGF1c2UgMTQuMTUKCQl9CgoJCXNldF90aW1lX2xpbWl0KDApOwoKCQkkY2h1bmtzaXplID0gMSooMTAyNCoxMDI0KTsKCQkkYnl0ZXNfc2VuZCA9IDA7CgkJaWYgKCRmaWxlID0gZm9wZW4oJGZpbGUsICdyJykp'));
	@fwrite($fp, base64_decode('IHsKCQkJaWYoaXNzZXQoJF9TRVJWRVJbJ0hUVFBfUkFOR0UnXSkpCgkJCWZzZWVrKCRmaWxlLCAkcmFuZ2UpOwoKCQkJd2hpbGUoIWZlb2YoJGZpbGUpICYmCgkJCSAgICAgICghY29ubmVjdGlvbl9hYm9ydGVkKCkpICYmICAvLyBjb25uZWN0aW9uX3N0YXR1cygp'));
	@fwrite($fp, base64_decode('ID09IDAKCQkJICAgICAgKCRieXRlc19zZW5kPCRuZXdfbGVuZ3RoKSkKCQkJewoJCQkJJGJ1ZmZlciA9IGZyZWFkKCRmaWxlLCAkY2h1bmtzaXplKTsKCQkJCWVjaG8oJGJ1ZmZlcik7CgkJCQlmbHVzaCgpOwoJCQkJJGJ5dGVzX3NlbmQgKz0gc3RybGVuKCRidWZm'));
	@fwrite($fp, base64_decode('ZXIpOwoJCQl9CgkJCWZjbG9zZSgkZmlsZSk7CgkJfSBlbHNlIHsKCQkJdGhyb3cgbmV3IEV4Y2VwdGlvbigiQ2Fubm90IG9wZW4gZmlsZSAkZmlsZSIpOwoJCX0KCQlyZXR1cm4oKGNvbm5lY3Rpb25fc3RhdHVzKCkgPT0gMCkgYW5kICFjb25uZWN0aW9uX2Fib3J0'));
	@fwrite($fp, base64_decode('ZWQoKSk7Cgl9Cgp9Cg=='));
	@fclose($fp);
}
if (!is_file('includes/classes/VtsBrowserDownload.class.php')) {
	warn('File has vanished! Will re-create it: includes/classes/VtsBrowserDownload.class.php');
	writefile_1();
	if (!is_file('includes/classes/VtsBrowserDownload.class.php')) {
		warn('File cannot be created (not existing): includes/classes/VtsBrowserDownload.class.php');
	} else if (sha1_file('includes/classes/VtsBrowserDownload.class.php') != 'c8810a1fff99d4ff9b3796e205c379147c678c5d') {
		warn('File cannot be created (checksum mismatch): includes/classes/VtsBrowserDownload.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/classes/VtsBrowserDownload.class.php', 0644)) {
		warn('Could not change file permissions of includes/classes/VtsBrowserDownload.class.php');
	}
} else {
	if (@sha1_file('includes/classes/VtsBrowserDownload.class.php') !== 'c8810a1fff99d4ff9b3796e205c379147c678c5d') {
		if (@sha1_file('includes/classes/VtsBrowserDownload.class.php') !== 'a808a3f86ef74b17f88cf984ca552abd98589131') {
			warn('File was modified. Will overwrite the changes now: includes/classes/VtsBrowserDownload.class.php');
			$tmp = pathinfo('includes/classes/VtsBrowserDownload.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/classes/VtsBrowserDownload.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('includes/classes/VtsBrowserDownload.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('includes/classes/VtsBrowserDownload.class.php') !== 'c8810a1fff99d4ff9b3796e205c379147c678c5d') {
			warn('File cannot be written (checksum mismatch): includes/classes/VtsBrowserDownload.class.php');
		}
	}
}

// Files different: plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php
function writefile_2() {
	@$fp = fopen('plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmNsYXNzIE9JRHBsdXNQYWdlQWRtaW5SZWdpc3RyYXRpb24gZXh0ZW5kcyBPSURwbHVzUGFnZVBsdWdpbkFkbWluIHsKCgkvKnByaXZhdGUqLyBjb25zdCBRVUVSWV9SRUdJU1RFUl9WMSA9ICAgICAg'));
	@fwrite($fp, base64_decode('ICAgJzEuMy42LjEuNC4xLjM3NDc2LjIuNS4yLjEuMS4xJzsKCS8qcHJpdmF0ZSovIGNvbnN0IFFVRVJZX1VOUkVHSVNURVJfVjEgPSAgICAgICAnMS4zLjYuMS40LjEuMzc0NzYuMi41LjIuMS4yLjEnOwoJLypwcml2YXRlKi8gY29uc3QgUVVFUllfTElTVEFMTFNZ'));
	@fwrite($fp, base64_decode('U1RFTUlEU19WMSA9ICcxLjMuNi4xLjQuMS4zNzQ3Ni4yLjUuMi4xLjMuMSc7CgkvKnByaXZhdGUqLyBjb25zdCBRVUVSWV9MSVZFU1RBVFVTX1YxID0gICAgICAgJzEuMy42LjEuNC4xLjM3NDc2LjIuNS4yLjEuNC4xJzsKCglwdWJsaWMgZnVuY3Rpb24gZ3VpKCRp'));
	@fwrite($fp, base64_decode('ZCwgJiRvdXQsICYkaGFuZGxlZCkgewoJCWlmICgkaWQgPT09ICdvaWRwbHVzOnNydl9yZWdpc3RyYXRpb24nKSB7CgkJCSRoYW5kbGVkID0gdHJ1ZTsKCQkJJG91dFsndGl0bGUnXSA9IF9MKCdTeXN0ZW0gcmVnaXN0cmF0aW9uIHNldHRpbmdzJyk7CgkJCSRvdXRb'));
	@fwrite($fp, base64_decode('J2ljb24nXSA9IGZpbGVfZXhpc3RzKF9fRElSX18uJy9pY29uX2JpZy5wbmcnKSA/IE9JRHBsdXM6OndlYnBhdGgoX19ESVJfXykuJ2ljb25fYmlnLnBuZycgOiAnJzsKCgkJCWlmICghT0lEcGx1czo6YXV0aFV0aWxzKCk6OmlzQWRtaW5Mb2dnZWRJbigpKSB7CgkJ'));
	@fwrite($fp, base64_decode('CQkkb3V0WydpY29uJ10gPSAnaW1nL2Vycm9yX2JpZy5wbmcnOwoJCQkJJG91dFsndGV4dCddID0gJzxwPicuX0woJ1lvdSBuZWVkIHRvIDxhICUxPmxvZyBpbjwvYT4gYXMgYWRtaW5pc3RyYXRvci4nLE9JRHBsdXM6Omd1aSgpLT5saW5rKCdvaWRwbHVzOmxvZ2lu'));
	@fwrite($fp, base64_decode('JykpLic8L3A+JzsKCQkJCXJldHVybjsKCQkJfQoKCQkJaWYgKGZpbGVfZXhpc3RzKF9fRElSX18gLiAnL2luZm8kJy5PSURwbHVzOjpnZXRDdXJyZW50TGFuZygpLicuaHRtbCcpKSB7CgkJCQkkaW5mbyA9IGZpbGVfZ2V0X2NvbnRlbnRzKF9fRElSX18gLiAnL2lu'));
	@fwrite($fp, base64_decode('Zm8kJy5PSURwbHVzOjpnZXRDdXJyZW50TGFuZygpLicuaHRtbCcpOwoJCQl9IGVsc2UgewoJCQkJJGluZm8gPSBmaWxlX2dldF9jb250ZW50cyhfX0RJUl9fIC4gJy9pbmZvLmh0bWwnKTsKCQkJfQoKCQkJLy8gbWFrZSBzdXJlIHRoZSBwcm9ncmFtIHdvcmtzIGV2'));
	@fwrite($fp, base64_decode('ZW4gaWYgdGhlIHVzZXIgcHJvdmlkZWQgSFRNTCBpcyBub3QgVVRGLTgKCQkJJGluZm8gPSBpY29udihtYl9kZXRlY3RfZW5jb2RpbmcoJGluZm8sIG1iX2RldGVjdF9vcmRlcigpLCB0cnVlKSwgJ1VURi04Ly9JR05PUkUnLCAkaW5mbyk7CgkJCSRib20gPSBwYWNr'));
	@fwrite($fp, base64_decode('KCdIKicsJ0VGQkJCRicpOwoJCQkkaW5mbyA9IHByZWdfcmVwbGFjZSgiL14kYm9tLyIsICcnLCAkaW5mbyk7CgoJCQkkb3V0Wyd0ZXh0J10gPSAkaW5mbzsKCgkJCWlmICghT0lEcGx1czo6Z2V0UGtpU3RhdHVzKCkpIHsKCQkJCSRvdXRbJ3RleHQnXSAuPSAnPHA+'));
	@fwrite($fp, base64_decode('PGZvbnQgY29sb3I9InJlZCI+Jy5fTCgnRXJyb3I6IFlvdXIgc3lzdGVtIGNvdWxkIG5vdCBnZW5lcmF0ZSBhIHByaXZhdGUvcHVibGljIGtleSBwYWlyLiAoT3BlblNTTCBpcyBwcm9iYWJseSBtaXNzaW5nIG9uIHlvdXIgc3lzdGVtKS4gVGhlcmVmb3JlLCB5b3Ug'));
	@fwrite($fp, base64_decode('Y2Fubm90IHJlZ2lzdGVyL3VucmVnaXN0ZXIgeW91ciBPSURwbHVzIGluc3RhbmNlLicpLic8L2ZvbnQ+PC9wPic7CgkJCX0gZWxzZSB7CgkJCQkkb3V0Wyd0ZXh0J10gLj0gJzxwPjxpbnB1dCB0eXBlPSJidXR0b24iIG9uY2xpY2s9Im9wZW5PaWRJblBhbmVsKFwn'));
	@fwrite($fp, base64_decode('b2lkcGx1czpzcnZyZWdfc3RhdHVzXCcpOyIgdmFsdWU9IicuX0woJ0NoZWNrIHN0YXR1cyBvZiB0aGUgcmVnaXN0cmF0aW9uIGFuZCBjb2xsZWN0ZWQgZGF0YScpLiciPjwvcD4nOwoKCQkJCWlmIChPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdSRUdJ'));
	@fwrite($fp, base64_decode('U1RSQVRJT05fSElERV9TWVNURU0nLCBmYWxzZSkpIHsKCQkJCQkkb3V0Wyd0ZXh0J10gLj0gJzxwPjxmb250IGNvbG9yPSJyZWQiPjxiPicuX0woJ0F0dGVudGlvbiEnKS4nPC9iPiAnLl9MKCc8Y29kZT5SRUdJU1RSQVRJT05fSElERV9TWVNURU08L2NvZGU+IGlz'));
	@fwrite($fp, base64_decode('IHNldCBpbiB0aGUgbG9jYWwgY29uZmlndXJhdGlvbiBmaWxlISBUaGVyZWZvcmUsIHRoaXMgc3lzdGVtIHdpbGwgbm90IHJlZ2lzdGVyIGl0c2VsZiwgZGVzcGl0ZSBvZiB0aGUgc2V0dGluZ3MgYmVsb3cuJykuJzwvZm9udD48L3A+JzsKCQkJCX0KCgkJCQkkb3V0'));
	@fwrite($fp, base64_decode('Wyd0ZXh0J10gLj0gJzxwPicuX0woJ1lvdSBjYW4gYWRqdXN0IHlvdXIgcHJpdmFjeSBsZXZlbCBoZXJlJykuJzo8L3A+PHA+PHNlbGVjdCBuYW1lPSJyZWdfcHJpdmFjeSIgaWQ9InJlZ19wcml2YWN5Ij4nOwoKCQkJCSMgLS0tCgoJCQkJJG91dFsndGV4dCddIC49'));
	@fwrite($fp, base64_decode('ICc8b3B0aW9uIHZhbHVlPSIwIic7CgkJCQlpZiAoT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdyZWdfcHJpdmFjeScpID09IDApIHsKCQkJCQkkb3V0Wyd0ZXh0J10gLj0gJyBzZWxlY3RlZCc7CgkJCQl9IGVsc2UgewoJCQkJCSRvdXRbJ3RleHQnXSAuPSAn'));
	@fwrite($fp, base64_decode('JzsKCQkJCX0KCQkJCSRvdXRbJ3RleHQnXSAuPSAnPicuX0woJzAgPSBSZWdpc3RlciB0byBkaXJlY3Rvcnkgc2VydmljZSBhbmQgYXV0b21hdGljYWxseSBwdWJsaXNoIFJBL09JRCBkYXRhIGF0IG9pZC1pbmZvLmNvbScpLic8L29wdGlvbj4nOwoKCQkJCSMgLS0t'));
	@fwrite($fp, base64_decode('CgoJCQkJJG91dFsndGV4dCddIC49ICc8b3B0aW9uIHZhbHVlPSIxIic7CgkJCQlpZiAoT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdyZWdfcHJpdmFjeScpID09IDEpIHsKCQkJCQkkb3V0Wyd0ZXh0J10gLj0gJyBzZWxlY3RlZCc7CgkJCQl9IGVsc2UgewoJ'));
	@fwrite($fp, base64_decode('CQkJCSRvdXRbJ3RleHQnXSAuPSAnJzsKCQkJCX0KCQkJCSRvdXRbJ3RleHQnXSAuPSAnPicuX0woJzEgPSBPbmx5IHJlZ2lzdGVyIHRvIGRpcmVjdG9yeSBzZXJ2aWNlJykuJzwvb3B0aW9uPic7CgoJCQkJIyAtLS0KCgkJCQkkb3V0Wyd0ZXh0J10gLj0gJzxvcHRp'));
	@fwrite($fp, base64_decode('b24gdmFsdWU9IjIiJzsKCQkJCWlmIChPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ3JlZ19wcml2YWN5JykgPT0gMikgewoJCQkJCSRvdXRbJ3RleHQnXSAuPSAnIHNlbGVjdGVkJzsKCQkJCX0gZWxzZSB7CgkJCQkJJG91dFsndGV4dCddIC49ICcnOwoJCQkJ'));
	@fwrite($fp, base64_decode('fQoJCQkJJG91dFsndGV4dCddIC49ICc+Jy5fTCgnMiA9IEhpZGUgc3lzdGVtJykuJzwvb3B0aW9uPic7CgoJCQkJIyAtLS0KCgkJCQkkb3V0Wyd0ZXh0J10gLj0gJzwvc2VsZWN0PiA8aW5wdXQgdHlwZT0iYnV0dG9uIiB2YWx1ZT0iJy5fTCgnQ2hhbmdlJykuJyIg'));
	@fwrite($fp, base64_decode('b25jbGljaz0iY3J1ZEFjdGlvblJlZ1ByaXZhY3lVcGRhdGUoKSI+PC9wPic7CgoJCQkJJG91dFsndGV4dCddIC49ICc8cD4nLl9MKCdBZnRlciBjbGlja2luZyAiY2hhbmdlIiwgeW91ciBPSURwbHVzIHN5c3RlbSB3aWxsIGNvbnRhY3QgdGhlIFZpYVRoaW5rU29m'));
	@fwrite($fp, base64_decode('dCBzZXJ2ZXIgdG8gYWRqdXN0IChhZGQgb3IgcmVtb3ZlIGluZm9ybWF0aW9uKSB5b3VyIHByaXZhY3kgc2V0dGluZy4gVGhpcyBtYXkgdGFrZSBhIGZldyBtaW51dGVzLicpLic8L3A+JzsKCgkJCQkkb3V0Wyd0ZXh0J10gLj0gJzxwPicuX0woJzxpPlByaXZhY3kg'));
	@fwrite($fp, base64_decode('aW5mb3JtYXRpb246PC9pPiBQbGVhc2Ugbm90ZSB0aGF0IHJlbW92aW5nIHlvdXIgc3lzdGVtIGZyb20gdGhlIGRpcmVjdG9yeSBkb2VzIG5vdCBhdXRvbWF0aWNhbGx5IGRlbGV0ZSBpbmZvcm1hdGlvbiBhYm91dCBPSURzIHdoaWNoIGFyZSBhbHJlYWR5IHB1Ymxp'));
	@fwrite($fp, base64_decode('c2hlZCBhdCBvaWQtaW5mby5jb20uIFRvIHJlbW92ZSBhbHJlYWR5IHN1Ym1pdHRlZCBPSURzIGF0IG9pZC1pbmZvLmNvbSwgcGxlYXNlIGNvbnRhY3QgdGhlIDxhIGhyZWY9Im1haWx0bzphZG1pbkBvaWQtaW5mby5jb20iPk9JRCBSZXBvc2l0b3J5IFdlYm1hc3Rl'));
	@fwrite($fp, base64_decode('cjwvYT4uJykuJzwvcD4nOwoJCQl9CgkJfQoJCWlmICgkaWQgPT09ICdvaWRwbHVzOnNydnJlZ19zdGF0dXMnKSB7CgkJCSRoYW5kbGVkID0gdHJ1ZTsKCgkJCSRxdWVyeSA9IHNlbGY6OlFVRVJZX0xJVkVTVEFUVVNfVjE7CgoJCQkkcGF5bG9hZCA9IGFycmF5KAoJ'));
	@fwrite($fp, base64_decode('CQkJInF1ZXJ5IiA9PiAkcXVlcnksIC8vIHdlIG11c3QgcmVwZWF0IHRoZSBxdWVyeSBiZWNhdXNlIHdlIHdhbnQgdG8gc2lnbiBpdAoJCQkJInN5c3RlbV9pZCIgPT4gT0lEcGx1czo6Z2V0U3lzdGVtSWQoZmFsc2UpCgkJCSk7CgoJCQkkc2lnbmF0dXJlID0gJyc7'));
	@fwrite($fp, base64_decode('CgkJCWlmICghQG9wZW5zc2xfc2lnbihqc29uX2VuY29kZSgkcGF5bG9hZCksICRzaWduYXR1cmUsIE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgnb2lkcGx1c19wcml2YXRlX2tleScpKSkgewoJCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ1Np'));
	@fwrite($fp, base64_decode('Z25hdHVyZSBmYWlsZWQnKSk7CgkJCX0KCgkJCSRkYXRhID0gYXJyYXkoCgkJCQkicGF5bG9hZCIgPT4gJHBheWxvYWQsCgkJCQkic2lnbmF0dXJlIiA9PiBiYXNlNjRfZW5jb2RlKCRzaWduYXR1cmUpCgkJCSk7CgoJCQkkY2ggPSBjdXJsX2luaXQoKTsKCQkJY3Vy'));
	@fwrite($fp, base64_decode('bF9zZXRvcHQoJGNoLCBDVVJMT1BUX1VSTCwgJ2h0dHBzOi8vb2lkcGx1cy52aWF0aGlua3NvZnQuY29tL3JlZzIvcXVlcnkucGhwJyk7CgkJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9QT1NULCAxKTsKCQkJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1BPU1RG'));
	@fwrite($fp, base64_decode('SUVMRFMsICJxdWVyeT0kcXVlcnkmZGF0YT0iLmJhc2U2NF9lbmNvZGUoanNvbl9lbmNvZGUoJGRhdGEpKSk7CgkJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9SRVRVUk5UUkFOU0ZFUiwgdHJ1ZSk7CgkJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9GT0xMT1dM'));
	@fwrite($fp, base64_decode('T0NBVElPTiwgdHJ1ZSk7CgkJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9BVVRPUkVGRVJFUiwgdHJ1ZSk7CgkJCWlmICghKCRyZXMgPSBAY3VybF9leGVjKCRjaCkpKSB7CgkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnQ29tbXVuaWNhdGlvbiB3'));
	@fwrite($fp, base64_decode('aXRoIFZpYVRoaW5rU29mdCBzZXJ2ZXIgZmFpbGVkOiAlMScsY3VybF9lcnJvcigkY2gpKSk7CgkJCX0KCQkJY3VybF9jbG9zZSgkY2gpOwoKCQkJJGpzb24gPSBAanNvbl9kZWNvZGUoJHJlcywgdHJ1ZSk7CgoJCQlpZiAoISRqc29uKSB7CgkJCQkkb3V0WydpY29u'));
	@fwrite($fp, base64_decode('J10gPSAnaW1nL2Vycm9yX2JpZy5wbmcnOwoJCQkJJG91dFsndGV4dCddID0gX0woJ0pTT04gcmVwbHkgZnJvbSBWaWFUaGlua1NvZnQgZGVjb2RpbmcgZXJyb3I6ICUxJywkcmVzKTsKCQkJCXJldHVybjsKCQkJfQoKCQkJaWYgKGlzc2V0KCRqc29uWydlcnJvcidd'));
	@fwrite($fp, base64_decode('KSB8fCAoJGpzb25bJ3N0YXR1cyddICE9IDApKSB7CgkJCQkkb3V0WydpY29uJ10gPSAnaW1nL2Vycm9yX2JpZy5wbmcnOwoJCQkJaWYgKGlzc2V0KCRqc29uWydlcnJvciddKSkgewoJCQkJCSRvdXRbJ3RleHQnXSA9IF9MKCdSZWNlaXZlZCBlcnJvciBzdGF0dXMg'));
	@fwrite($fp, base64_decode('Y29kZTogJTEnLCRqc29uWydlcnJvciddKTsKCQkJCX0gZWxzZSB7CgkJCQkJJG91dFsndGV4dCddID0gX0woJ1JlY2VpdmVkIGVycm9yIHN0YXR1cyBjb2RlOiAlMScsJGpzb25bJ3N0YXR1cyddKTsKCQkJCX0KCQkJCXJldHVybjsKCQkJfQoKCQkJJG91dFsndGl0'));
	@fwrite($fp, base64_decode('bGUnXSA9IF9MKCdSZWdpc3RyYXRpb24gbGl2ZSBzdGF0dXMnKTsKCQkJJG91dFsndGV4dCddICA9ICc8cD48YSAnLk9JRHBsdXM6Omd1aSgpLT5saW5rKCdvaWRwbHVzOnNydl9yZWdpc3RyYXRpb24nKS4nPjxpbWcgc3JjPSJpbWcvYXJyb3dfYmFjay5wbmciIHdp'));
	@fwrite($fp, base64_decode('ZHRoPSIxNiIgYWx0PSInLl9MKCdHbyBiYWNrJykuJyI+ICcuX0woJ0dvIGJhY2sgdG8gcmVnaXN0cmF0aW9uIHNldHRpbmdzJykuJzwvYT48L3A+JyAuCgkJCSAgICAgICAgICAgICAgICAkanNvblsnY29udGVudCddOwoJCX0KCX0KCglwcm90ZWN0ZWQgZnVuY3Rp'));
	@fwrite($fp, base64_decode('b24gYXJlV2VSZWdpc3RlcmVkKCkgewoJCS8vIFRvIGNoZWNrIGlmIHdlIGFyZSByZWdpc3RlcmVkLiBDaGVjayBpdCAiYW5vbnltb3VzbHkiIChpLmUuIHdpdGhvdXQgcmV2ZWFsaW5nIG91ciBzeXN0ZW0gSUQpCgkJJHJlcyA9IGZpbGVfZ2V0X2NvbnRlbnRzKCdo'));
	@fwrite($fp, base64_decode('dHRwczovL29pZHBsdXMudmlhdGhpbmtzb2Z0LmNvbS9yZWcyL3F1ZXJ5LnBocD9xdWVyeT0nLnNlbGY6OlFVRVJZX0xJU1RBTExTWVNURU1JRFNfVjEpOwoKCQkkanNvbiA9IEBqc29uX2RlY29kZSgkcmVzLCB0cnVlKTsKCgkJaWYgKCEkanNvbikgewoJCQlyZXR1'));
	@fwrite($fp, base64_decode('cm4gZmFsc2U7IC8vIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdKU09OIHJlcGx5IGZyb20gVmlhVGhpbmtTb2Z0IGRlY29kaW5nIGVycm9yOiAlMScsJHJlcykpOwoJCX0KCgkJaWYgKGlzc2V0KCRqc29uWydlcnJvciddKSB8fCAoJGpzb25bJ3N0YXR1'));
	@fwrite($fp, base64_decode('cyddICE9IDApKSB7CgkJCWlmIChpc3NldCgkanNvblsnZXJyb3InXSkpIHsKCQkJCXJldHVybiBmYWxzZTsgLy8gdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ1JlY2VpdmVkIGVycm9yIHN0YXR1cyBjb2RlOiAlMScsJGpzb25bJ2Vycm9yJ10pKTsKCQkJ'));
	@fwrite($fp, base64_decode('fSBlbHNlIHsKCQkJCXJldHVybiBmYWxzZTsgLy8gdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ1JlY2VpdmVkIGVycm9yIHN0YXR1cyBjb2RlOiAlMScsJGpzb25bJ3N0YXR1cyddKSk7CgkJCX0KCQl9CgoJCSRsaXN0ID0gJGpzb25bJ2xpc3QnXTsKCgkJ'));
	@fwrite($fp, base64_decode('cmV0dXJuIGluX2FycmF5KE9JRHBsdXM6OmdldFN5c3RlbUlkKGZhbHNlKSwgJGxpc3QpOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZW5kUmVnaXN0cmF0aW9uUXVlcnkoJHByaXZhY3lfbGV2ZWw9bnVsbCkgewoJCWlmIChpc19udWxsKCRwcml2YWN5X2xldmVsKSkg'));
	@fwrite($fp, base64_decode('ewoJCQkkcHJpdmFjeV9sZXZlbCA9IE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgncmVnX3ByaXZhY3knKTsKCQl9CgoJCSRzeXN0ZW1fdXJsID0gT0lEcGx1czo6Z2V0U3lzdGVtVXJsKCk7CgoJCS8vIEl0IGlzIHZlcnkgaW1wb3J0YW50IHRoYXQgd2Ugc2V0'));
	@fwrite($fp, base64_decode('IHRoZSBwaW5nIHRpbWUgTk9XLCBiZWNhdXNlIFZpYVRoaW5rU29mdCBtaWdodCBjb250YWN0IHVzIGR1cmluZyB0aGUgcGluZywKCQkvLyBhbmQgdGhpcyB3b3VsZCBjYXVzZSBhbiBlbmRsZXNzIGxvb3AhCgkJT0lEcGx1czo6Y29uZmlnKCktPnNldFZhbHVlKCdy'));
	@fwrite($fp, base64_decode('ZWdfbGFzdF9waW5nJywgdGltZSgpKTsKCgkJaWYgKCFPSURwbHVzOjpnZXRQa2lTdGF0dXMoKSkgcmV0dXJuIGZhbHNlOwoKCQlpZiAoJHByaXZhY3lfbGV2ZWwgPT0gMikgewoJCQkvLyBUaGUgdXNlciB3YW50cyB0byB1bnJlZ2lzdGVyLCAgYnV0IHdlIG9ubHkg'));
	@fwrite($fp, base64_decode('dW5yZWdpc3RlciBpZiB3ZSBhcmUgcmVnaXN0ZXJlZAoJCQlpZiAoJHRoaXMtPmFyZVdlUmVnaXN0ZXJlZCgpKSB7CgkJCQkkcXVlcnkgPSBzZWxmOjpRVUVSWV9VTlJFR0lTVEVSX1YxOwoKCQkJCSRwYXlsb2FkID0gYXJyYXkoCgkJCQkJInF1ZXJ5IiA9PiAkcXVl'));
	@fwrite($fp, base64_decode('cnksIC8vIHdlIG11c3QgcmVwZWF0IHRoZSBxdWVyeSBiZWNhdXNlIHdlIHdhbnQgdG8gc2lnbiBpdAoJCQkJCSJzeXN0ZW1faWQiID0+IE9JRHBsdXM6OmdldFN5c3RlbUlkKGZhbHNlKQoJCQkJKTsKCgkJCQkkc2lnbmF0dXJlID0gJyc7CgkJCQlpZiAoIUBvcGVu'));
	@fwrite($fp, base64_decode('c3NsX3NpZ24oanNvbl9lbmNvZGUoJHBheWxvYWQpLCAkc2lnbmF0dXJlLCBPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ29pZHBsdXNfcHJpdmF0ZV9rZXknKSkpIHsKCQkJCQlyZXR1cm4gZmFsc2U7IC8vIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9M'));
	@fwrite($fp, base64_decode('KCdTaWduYXR1cmUgZmFpbGVkJykpOwoJCQkJfQoKCQkJCSRkYXRhID0gYXJyYXkoCgkJCQkJInBheWxvYWQiID0+ICRwYXlsb2FkLAoJCQkJCSJzaWduYXR1cmUiID0+IGJhc2U2NF9lbmNvZGUoJHNpZ25hdHVyZSkKCQkJCSk7CgoJCQkJJGNoID0gY3VybF9pbml0'));
	@fwrite($fp, base64_decode('KCk7CgkJCQljdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfVVJMLCAnaHR0cHM6Ly9vaWRwbHVzLnZpYXRoaW5rc29mdC5jb20vcmVnMi9xdWVyeS5waHAnKTsKCQkJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9QT1NULCAxKTsKCQkJCWN1cmxfc2V0b3B0KCRjaCwg'));
	@fwrite($fp, base64_decode('Q1VSTE9QVF9QT1NURklFTERTLCAicXVlcnk9JHF1ZXJ5JmRhdGE9Ii5iYXNlNjRfZW5jb2RlKGpzb25fZW5jb2RlKCRkYXRhKSkpOwoJCQkJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1JFVFVSTlRSQU5TRkVSLCB0cnVlKTsKCQkJCWN1cmxfc2V0b3B0KCRjaCwg'));
	@fwrite($fp, base64_decode('Q1VSTE9QVF9GT0xMT1dMT0NBVElPTiwgdHJ1ZSk7CgkJCQljdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfQVVUT1JFRkVSRVIsIHRydWUpOwoJCQkJaWYgKCEoJHJlcyA9IEBjdXJsX2V4ZWMoJGNoKSkpIHsKCQkJCQlyZXR1cm4gZmFsc2U7IC8vIHRocm93IG5ldyBP'));
	@fwrite($fp, base64_decode('SURwbHVzRXhjZXB0aW9uKF9MKCdDb21tdW5pY2F0aW9uIHdpdGggVmlhVGhpbmtTb2Z0IHNlcnZlciBmYWlsZWQ6ICUxJyxjdXJsX2Vycm9yKCRjaCkpKTsKCQkJCX0KCQkJCWN1cmxfY2xvc2UoJGNoKTsKCgkJCQkkanNvbiA9IEBqc29uX2RlY29kZSgkcmVzLCB0'));
	@fwrite($fp, base64_decode('cnVlKTsKCgkJCQlpZiAoISRqc29uKSB7CgkJCQkJcmV0dXJuIGZhbHNlOyAvLyB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnSlNPTiByZXBseSBmcm9tIFZpYVRoaW5rU29mdCBkZWNvZGluZyBlcnJvcjogJTEnLCRyZXMpKTsKCQkJCX0KCgkJCQlpZiAo'));
	@fwrite($fp, base64_decode('aXNzZXQoJGpzb25bJ2Vycm9yJ10pIHx8ICgkanNvblsnc3RhdHVzJ10gIT0gMCkpIHsKCQkJCQlpZiAoaXNzZXQoJGpzb25bJ2Vycm9yJ10pKSB7CgkJCQkJCXJldHVybiBmYWxzZTsgLy8gdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ1JlY2VpdmVkIGVy'));
	@fwrite($fp, base64_decode('cm9yIHN0YXR1cyBjb2RlOiAlMScsJGpzb25bJ2Vycm9yJ10pKTsKCQkJCQl9IGVsc2UgewoJCQkJCQlyZXR1cm4gZmFsc2U7IC8vIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdSZWNlaXZlZCBlcnJvciBzdGF0dXMgY29kZTogJTEnLCRqc29uWydzdGF0'));
	@fwrite($fp, base64_decode('dXMnXSkpOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0gZWxzZSB7CgkJCWlmICgkcHJpdmFjeV9sZXZlbCA9PSAwKSB7CgkJCQlpZiAoY2xhc3NfZXhpc3RzKCdPSURwbHVzUGFnZUFkbWluT0lESW5mb0V4cG9ydCcpKSB7CgkJCQkJb2Jfc3RhcnQoKTsKCQkJCQlPSURw'));
	@fwrite($fp, base64_decode('bHVzUGFnZUFkbWluT0lESW5mb0V4cG9ydDo6b3V0cHV0WE1MKGZhbHNlKTsgLy8gbm8gb25saW5lIGNoZWNrLCBiZWNhdXNlIHRoZSBxdWVyeSBzaG91bGQgYmUgc2hvcnQgKHNpbmNlIHRoZSBxdWVyeSBpcyBkb25lIHdoaWxlIGEgdmlzaXRvciB3YWl0cyBmb3Ig'));
	@fwrite($fp, base64_decode('dGhlIHJlc3BvbnNlKQoJCQkJCSRvaWRpbmZvX3htbCA9IG9iX2dldF9jb250ZW50cygpOwoJCQkJCW9iX2VuZF9jbGVhbigpOwoJCQkJfSBlbHNlIHsKCQkJCQkkb2lkaW5mb194bWwgPSBmYWxzZTsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCSRvaWRpbmZvX3htbCA9'));
	@fwrite($fp, base64_decode('IGZhbHNlOwoJCQl9CgoJCQkkcXVlcnkgPSBzZWxmOjpRVUVSWV9SRUdJU1RFUl9WMTsKCgkJCSRyb290X29pZHMgPSBhcnJheSgpOwoJCQlmb3JlYWNoIChPSURwbHVzOjpnZXRFbmFibGVkT2JqZWN0VHlwZXMoKSBhcyAkb3QpIHsKCQkJCWlmICgkb3Q6Om5zKCkg'));
	@fwrite($fp, base64_decode('PT0gJ29pZCcpIHsKCQkJCQkkcmVzID0gT0lEcGx1czo6ZGIoKS0+cXVlcnkoInNlbGVjdCBpZCBmcm9tICMjI29iamVjdHMgd2hlcmUgIiAuCgkJCQkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICJwYXJlbnQgPSAnb2lkOicgIiAuCgkJCQkJICAgICAgICAg'));
	@fwrite($fp, base64_decode('ICAgICAgICAgICAgICAgICAgICJvcmRlciBieSAiLk9JRHBsdXM6OmRiKCktPm5hdE9yZGVyKCdpZCcpKTsKCQkJCQl3aGlsZSAoJHJvdyA9ICRyZXMtPmZldGNoX2FycmF5KCkpIHsKCQkJCQkJJHJvb3Rfb2lkc1tdID0gc3Vic3RyKCRyb3dbJ2lkJ10sc3RybGVu'));
	@fwrite($fp, base64_decode('KCdvaWQ6JykpOwoJCQkJCX0KCQkJCX0KCQkJfQoJCQkkcGF5bG9hZCA9IGFycmF5KAoJCQkJInF1ZXJ5IiA9PiAkcXVlcnksIC8vIHdlIG11c3QgcmVwZWF0IHRoZSBxdWVyeSBiZWNhdXNlIHdlIHdhbnQgdG8gc2lnbiBpdAoJCQkJInByaXZhY3lfbGV2ZWwiID0+'));
	@fwrite($fp, base64_decode('ICRwcml2YWN5X2xldmVsLAoJCQkJInN5c3RlbV9pZCIgPT4gT0lEcGx1czo6Z2V0U3lzdGVtSWQoZmFsc2UpLAoJCQkJInB1YmxpY19rZXkiID0+IE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgnb2lkcGx1c19wdWJsaWNfa2V5JyksCgkJCQkic3lzdGVtX3Vy'));
	@fwrite($fp, base64_decode('bCIgPT4gJHN5c3RlbV91cmwsCgkJCQkiaGlkZV9zeXN0ZW1fdXJsIiA9PiAwLAoJCQkJImhpZGVfcHVibGljX2tleSIgPT4gMCwKCQkJCSJhZG1pbl9lbWFpbCIgPT4gT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdhZG1pbl9lbWFpbCcpLAoJCQkJInN5c3Rl'));
	@fwrite($fp, base64_decode('bV90aXRsZSIgPT4gT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdzeXN0ZW1fdGl0bGUnKSwKCQkJCSJvaWRpbmZvX3htbCIgPT4gQGJhc2U2NF9lbmNvZGUoJG9pZGluZm9feG1sKSwKCQkJCSJyb290X29pZHMiID0+ICRyb290X29pZHMsCgkJCQkic3lzdGVt'));
	@fwrite($fp, base64_decode('X3ZlcnNpb24iID0+IE9JRHBsdXM6OmdldFZlcnNpb24oKSwKCQkJCSJzeXN0ZW1faW5zdGFsbF90eXBlIiA9PiBPSURwbHVzOjpnZXRJbnN0YWxsVHlwZSgpCgkJCSk7CgoJCQkkc2lnbmF0dXJlID0gJyc7CgkJCWlmICghQG9wZW5zc2xfc2lnbihqc29uX2VuY29k'));
	@fwrite($fp, base64_decode('ZSgkcGF5bG9hZCksICRzaWduYXR1cmUsIE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgnb2lkcGx1c19wcml2YXRlX2tleScpKSkgewoJCQkJCXJldHVybiBmYWxzZTsgLy8gdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ1NpZ25hdHVyZSBmYWlsZWQn'));
	@fwrite($fp, base64_decode('KSk7CgkJCX0KCgkJCSRkYXRhID0gYXJyYXkoCgkJCQkicGF5bG9hZCIgPT4gJHBheWxvYWQsCgkJCQkic2lnbmF0dXJlIiA9PiBiYXNlNjRfZW5jb2RlKCRzaWduYXR1cmUpCgkJCSk7CgoJCQkkY2ggPSBjdXJsX2luaXQoKTsKCQkJY3VybF9zZXRvcHQoJGNoLCBD'));
	@fwrite($fp, base64_decode('VVJMT1BUX1VSTCwgJ2h0dHBzOi8vb2lkcGx1cy52aWF0aGlua3NvZnQuY29tL3JlZzIvcXVlcnkucGhwJyk7CgkJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9QT1NULCAxKTsKCQkJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1BPU1RGSUVMRFMsICJxdWVyeT0k'));
	@fwrite($fp, base64_decode('cXVlcnkmZGF0YT0iLmJhc2U2NF9lbmNvZGUoanNvbl9lbmNvZGUoJGRhdGEpKSk7CgkJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9SRVRVUk5UUkFOU0ZFUiwgdHJ1ZSk7CgkJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9GT0xMT1dMT0NBVElPTiwgdHJ1ZSk7'));
	@fwrite($fp, base64_decode('CgkJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9BVVRPUkVGRVJFUiwgdHJ1ZSk7CgkJCWlmICghKCRyZXMgPSBAY3VybF9leGVjKCRjaCkpKSB7CgkJCQlyZXR1cm4gZmFsc2U7IC8vIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdDb21tdW5pY2F0aW9u'));
	@fwrite($fp, base64_decode('IHdpdGggVmlhVGhpbmtTb2Z0IHNlcnZlciBmYWlsZWQ6ICUxJyxjdXJsX2Vycm9yKCRjaCkpKTsKCQkJfQoJCQljdXJsX2Nsb3NlKCRjaCk7CgoJCQkkanNvbiA9IEBqc29uX2RlY29kZSgkcmVzLCB0cnVlKTsKCgkJCWlmICghJGpzb24pIHsKCQkJCXJldHVybiBm'));
	@fwrite($fp, base64_decode('YWxzZTsgLy8gdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0pTT04gcmVwbHkgZnJvbSBWaWFUaGlua1NvZnQgZGVjb2RpbmcgZXJyb3I6ICUxJywkcmVzKSk7CgkJCX0KCgkJCWlmICgkanNvblsnc3RhdHVzJ10gPT0gOTkvKkhhc2ggY29uZmxpY3QqLykg'));
	@fwrite($fp, base64_decode('ewoJCQkJT0lEcGx1czo6bG9nZ2VyKCktPmxvZygiW1dBUk5dQSEiLCAiUmVtb3ZpbmcgU3lzdGVtSUQgYW5kIGtleSBwYWlyIGJlY2F1c2UgdGhlcmUgaXMgYSBoYXNoIGNvbmZsaWN0IHdpdGggYW5vdGhlciBPSURwbHVzIHN5c3RlbSEiKTsKCgkJCQkvLyBEZWxl'));
	@fwrite($fp, base64_decode('dGUgdGhlIHN5c3RlbSBJRCBzaW5jZSB3ZSBoYXZlIGEgY29uZmxpY3Qgd2l0aCB0aGUgMzEtYml0IGhhc2ghCgkJCQlPSURwbHVzOjpjb25maWcoKS0+c2V0VmFsdWUoJ29pZHBsdXNfcHJpdmF0ZV9rZXknLCAnJyk7CgkJCQlPSURwbHVzOjpjb25maWcoKS0+c2V0'));
	@fwrite($fp, base64_decode('VmFsdWUoJ29pZHBsdXNfcHVibGljX2tleScsICcnKTsKCgkJCQkvLyBUcnkgdG8gZ2VuZXJhdGUgYSBuZXcgc3lzdGVtIElECgkJCQlPSURwbHVzOjpnZXRQa2lTdGF0dXModHJ1ZSk7CgoJCQkJLy8gRW5mb3JjZSBhIG5ldyByZWdpc3RyYXRpb24gYXR0ZW1wdCBh'));
	@fwrite($fp, base64_decode('dCB0aGUgbmV4dCBwYWdlIHZpc2l0CgkJCQkvLyBXZSB3aWxsIG5vdCB0cnkgYWdhaW4gaGVyZSwgYmVjYXVzZSB0aGF0IG1pZ2h0IGxlYWQgdG8gYW4gZW5kbGVzcyBsb29wIGlmIHRoZSBWVFMgc2VydmVyIHdvdWxkIGFsd2F5cyByZXR1cm4gJ0hBU0hfQ09ORkxD'));
	@fwrite($fp, base64_decode('SVQnCgkJCQlPSURwbHVzOjpjb25maWcoKS0+c2V0VmFsdWUoJ3JlZ19sYXN0X3BpbmcnLCAwKTsKCQkJfSBlbHNlaWYgKGlzc2V0KCRqc29uWydlcnJvciddKSB8fCAoJGpzb25bJ3N0YXR1cyddICE9IDApKSB7CgkJCQlpZiAoaXNzZXQoJGpzb25bJ2Vycm9yJ10p'));
	@fwrite($fp, base64_decode('KSB7CgkJCQkJcmV0dXJuIGZhbHNlOyAvLyB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnUmVjZWl2ZWQgZXJyb3Igc3RhdHVzIGNvZGU6ICUxJywkanNvblsnZXJyb3InXSkpOwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gZmFsc2U7IC8vIHRocm93IG5l'));
	@fwrite($fp, base64_decode('dyBPSURwbHVzRXhjZXB0aW9uKF9MKCdSZWNlaXZlZCBlcnJvciBzdGF0dXMgY29kZTogJTEnLCRqc29uWydzdGF0dXMnXSkpOwoJCQkJfQoJCQl9CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBpbml0KCRodG1sPXRydWUpIHsKCQlPSURwbHVzOjpjb25maWcoKS0+'));
	@fwrite($fp, base64_decode('cHJlcGFyZUNvbmZpZ0tleSgncmVnX3ByaXZhY3knLCAnMj1IaWRlIHlvdXIgc3lzdGVtLCAxPVJlZ2lzdGVyIHlvdXIgc3lzdGVtIHRvIHRoZSBWaWFUaGlua1NvZnQgZGlyZWN0b3J5IGFuZCBvaWQtaW5mby5jb20sIDA9UHVibGlzaCB5b3VyIHN5c3RlbSB0byBW'));
	@fwrite($fp, base64_decode('aWFUaGlua1NvZnQgZGlyZWN0b3J5IGFuZCBhbGwgcHVibGljIGNvbnRlbnRzIChSQS9PSUQpIHRvIG9pZC1pbmZvLmNvbScsICcwJywgT0lEcGx1c0NvbmZpZzo6UFJPVEVDVElPTl9FRElUQUJMRSwgZnVuY3Rpb24oJHZhbHVlKSB7CgkJCWlmICgoJHZhbHVlICE9'));
	@fwrite($fp, base64_decode('ICcwJykgJiYgKCR2YWx1ZSAhPSAnMScpICYmICgkdmFsdWUgIT0gJzInKSkgewoJCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ1BsZWFzZSBlbnRlciBlaXRoZXIgMCwgMSBvciAyLicpKTsKCQkJfQoJCQkvLyBOb3cgZG8gYSByZWNoZWNrIGFuZCBu'));
	@fwrite($fp, base64_decode('b3RpZnkgdGhlIFZpYVRoaW5rU29mdCBzZXJ2ZXIKCQkJaWYgKCgkdmFsdWUgPT0gMikgfHwgIU9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ1JFR0lTVFJBVElPTl9ISURFX1NZU1RFTScsIGZhbHNlKSkgewoJCQkJT0lEcGx1czo6Y29uZmlnKCktPnNl'));
	@fwrite($fp, base64_decode('dFZhbHVlKCdyZWdfbGFzdF9waW5nJywgMCk7CgkJCQkkdGhpcy0+c2VuZFJlZ2lzdHJhdGlvblF1ZXJ5KCR2YWx1ZSk7CgkJCX0KCQl9KTsKCQlPSURwbHVzOjpjb25maWcoKS0+cHJlcGFyZUNvbmZpZ0tleSgncmVnX3BpbmdfaW50ZXJ2YWwnLCAnUmVnaXN0cmF0'));
	@fwrite($fp, base64_decode('aW9uIHBpbmcgaW50ZXJ2YWwgKGluIHNlY29uZHMpJywgJzM2MDAnLCBPSURwbHVzQ29uZmlnOjpQUk9URUNUSU9OX0hJRERFTiwgZnVuY3Rpb24oJHZhbHVlKSB7CgoJCX0pOwoJCU9JRHBsdXM6OmNvbmZpZygpLT5wcmVwYXJlQ29uZmlnS2V5KCdyZWdfbGFzdF9w'));
	@fwrite($fp, base64_decode('aW5nJywgJ0xhc3QgcGluZyB0byBWaWFUaGlua1NvZnQgZGlyZWN0b3J5IHNlcnZpY2VzJywgJzAnLCBPSURwbHVzQ29uZmlnOjpQUk9URUNUSU9OX0hJRERFTiwgZnVuY3Rpb24oJHZhbHVlKSB7CgoJCX0pOwoJCU9JRHBsdXM6OmNvbmZpZygpLT5wcmVwYXJlQ29u'));
	@fwrite($fp, base64_decode('ZmlnS2V5KCdvb2JlX3JlZ2lzdHJhdGlvbl9kb25lJywgJyJPdXQgT2YgQm94IEV4cGVyaWVuY2UiIHdpemFyZCBmb3IgT0lEcGx1c1BhZ2VBZG1pblJlZ2lzdHJhdGlvbiBkb25lIG9uY2U/JywgJzAnLCBPSURwbHVzQ29uZmlnOjpQUk9URUNUSU9OX0hJRERFTiwg'));
	@fwrite($fp, base64_decode('ZnVuY3Rpb24oJHZhbHVlKSB7fSk7CgoJCS8vIElzIGl0IHRpbWUgdG8gcmVnaXN0ZXIgLyByZW5ldyB0aGUgZGlyZWN0b3J5IGVudHJ5PwoJCS8vIE5vdGU6IFJFR0lTVFJBVElPTl9ISURFX1NZU1RFTSBpcyBhbiB1bmRvY3VtZW50ZWQgY29uc3RhbnQgdGhhdCBj'));
	@fwrite($fp, base64_decode('YW4gYmUgcHV0IGluIHRoZSB1c2VyZGF0YS9iYXNlY29uZmlnL2NvbmZpZy5pbmMucGhwIGZpbGVzIG9mIGEgdGVzdCBzeXN0ZW0gYWNjZXNzaW5nIHRoZSBzYW1lIGRhdGFiYXNlIGFzIHRoZSBwcm9kdWN0aXZlIHN5c3RlbSB0aGF0IGlzIHJlZ2lzdGVyZWQuCgkJ'));
	@fwrite($fp, base64_decode('Ly8gVGhpcyBhdm9pZHMgdGhhdCB0aGUgVVJMIG9mIGEgcHJvZHVjdGl2ZSBzeXN0ZW0gaXMgb3ZlcnJpZGRlbiB3aXRoIHRoZSBVUkwgb2YgYSBjbG9uZWQgdGVzdCBzeXN0ZW0gKHNpbmNlIHRoZXkgdXNlIHRoZSBzYW1lIGRhdGFiYXNlLCB0aGV5IGFsc28gaGF2'));
	@fwrite($fp, base64_decode('ZSB0aGUgc2FtZSBzeXN0ZW0gSUQpCgoJCWlmICghT0lEcGx1czo6YmFzZUNvbmZpZygpLT5nZXRWYWx1ZSgnUkVHSVNUUkFUSU9OX0hJREVfU1lTVEVNJywgZmFsc2UpKSB7CgkJCSRwcml2YWN5X2xldmVsID0gT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdy'));
	@fwrite($fp, base64_decode('ZWdfcHJpdmFjeScpOwoKCQkJaWYgKHBocF9zYXBpX25hbWUoKSAhPT0gJ2NsaScpIHsgLy8gZG9uJ3QgcmVnaXN0ZXIgd2hlbiBjYWxsZWQgZnJvbSBDTEksIG90aGVyd2lzZSB0aGUgb2lkaW5mbyBYTUwgY2FuJ3QgY29udmVydCByZWxhdGl2ZSBsaW5rcyBpbnRv'));
	@fwrite($fp, base64_decode('IGFic29sdXRlIGxpbmtzCgkJCQlpZiAoKHRpbWUoKS1PSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ3JlZ19sYXN0X3BpbmcnKSA+PSBPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ3JlZ19waW5nX2ludGVydmFsJykpKSB7CgkJCQkJJHRoaXMtPnNlbmRS'));
	@fwrite($fp, base64_decode('ZWdpc3RyYXRpb25RdWVyeSgpOwoJCQkJfQoJCQl9CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiB0cmVlKCYkanNvbiwgJHJhX2VtYWlsPW51bGwsICRub25qcz1mYWxzZSwgJHJlcV9nb3RvPScnKSB7CgkJaWYgKCFPSURwbHVzOjphdXRoVXRpbHMoKTo6aXNBZG1p'));
	@fwrite($fp, base64_decode('bkxvZ2dlZEluKCkpIHJldHVybiBmYWxzZTsKCgkJaWYgKGZpbGVfZXhpc3RzKF9fRElSX18uJy90cmVlaWNvbi5wbmcnKSkgewoJCQkkdHJlZV9pY29uID0gT0lEcGx1czo6d2VicGF0aChfX0RJUl9fKS4ndHJlZWljb24ucG5nJzsKCQl9IGVsc2UgewoJCQkkdHJl'));
	@fwrite($fp, base64_decode('ZV9pY29uID0gbnVsbDsgLy8gZGVmYXVsdCBpY29uIChmb2xkZXIpCgkJfQoKCQkkanNvbltdID0gYXJyYXkoCgkJCSdpZCcgPT4gJ29pZHBsdXM6c3J2X3JlZ2lzdHJhdGlvbicsCgkJCSdpY29uJyA9PiAkdHJlZV9pY29uLAoJCQkndGV4dCcgPT4gX0woJ1N5c3Rl'));
	@fwrite($fp, base64_decode('bSByZWdpc3RyYXRpb24nKQoJCSk7CgoJCXJldHVybiB0cnVlOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiB0cmVlX3NlYXJjaCgkcmVxdWVzdCkgewoJCXJldHVybiBmYWxzZTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gaW1wbGVtZW50c0ZlYXR1cmUoJGlkKSB7CgkJaWYg'));
	@fwrite($fp, base64_decode('KHN0cnRvbG93ZXIoJGlkKSA9PSAnMS4zLjYuMS40LjEuMzc0NzYuMi41LjIuMy4xJykgcmV0dXJuIHRydWU7IC8vIG9vYmVFbnRyeSwgb29iZVJlcXVlc3RlZAoJCXJldHVybiBmYWxzZTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gb29iZVJlcXVlc3RlZCgpOiBib29s'));
	@fwrite($fp, base64_decode('IHsKCQkvLyBJbnRlcmZhY2UgMS4zLjYuMS40LjEuMzc0NzYuMi41LjIuMy4xCgoJCXJldHVybiBPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ29vYmVfcmVnaXN0cmF0aW9uX2RvbmUnKSA9PSAnMCc7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIG9vYmVFbnRyeSgk'));
	@fwrite($fp, base64_decode('c3RlcCwgJGRvX2VkaXRzLCAmJGVycm9yc19oYXBwZW5lZCkvKjogdm9pZCovIHsKCQkvLyBJbnRlcmZhY2UgMS4zLjYuMS40LjEuMzc0NzYuMi41LjIuMy4xCgoJCWVjaG8gJzxwPjx1PicuX0woJ1N0ZXAgJTE6IFN5c3RlbSByZWdpc3RyYXRpb24gYW5kIGF1dG9t'));
	@fwrite($fp, base64_decode('YXRpYyBwdWJsaXNoaW5nIChvcHRpb25hbCknLCRzdGVwKS4nPC91PjwvcD4nOwoKCQlpZiAoZmlsZV9leGlzdHMoX19ESVJfXyAuICcvaW5mbyQnLk9JRHBsdXM6OmdldEN1cnJlbnRMYW5nKCkuJy5odG1sJykpIHsKCQkJJGluZm8gPSBmaWxlX2dldF9jb250ZW50'));
	@fwrite($fp, base64_decode('cyhfX0RJUl9fIC4gJy9pbmZvJCcuT0lEcGx1czo6Z2V0Q3VycmVudExhbmcoKS4nLmh0bWwnKTsKCQl9IGVsc2UgewoJCQkkaW5mbyA9IGZpbGVfZ2V0X2NvbnRlbnRzKF9fRElSX18gLiAnL2luZm8uaHRtbCcpOwoJCX0KCgkJLy8gbWFrZSBzdXJlIHRoZSBwcm9n'));
	@fwrite($fp, base64_decode('cmFtIHdvcmtzIGV2ZW4gaWYgdGhlIHVzZXIgcHJvdmlkZWQgSFRNTCBpcyBub3QgVVRGLTgKCQkkaW5mbyA9IGljb252KG1iX2RldGVjdF9lbmNvZGluZygkaW5mbywgbWJfZGV0ZWN0X29yZGVyKCksIHRydWUpLCAnVVRGLTgvL0lHTk9SRScsICRpbmZvKTsKCQkk'));
	@fwrite($fp, base64_decode('Ym9tID0gcGFjaygnSConLCdFRkJCQkYnKTsKCQkkaW5mbyA9IHByZWdfcmVwbGFjZSgiL14kYm9tLyIsICcnLCAkaW5mbyk7CgoJCWVjaG8gJGluZm87CgoJCWlmICghZnVuY3Rpb25fZXhpc3RzKCdjdXJsX2V4ZWMnKSkgewoJCQllY2hvICc8cD48Zm9udCBjb2xv'));
	@fwrite($fp, base64_decode('cj0icmVkIj4nOwoJCQllY2hvIF9MKCdOb3RlOiBUaGUgIkNVUkwiIFBIUCBleHRlbnNpb24gaXMgbm90IGluc3RhbGxlZCBhdCB5b3VyIHN5c3RlbS4gUGxlYXNlIGVuYWJsZSB0aGUgUEhQIGV4dGVuc2lvbiA8Y29kZT5waHBfY3VybDwvY29kZT4uJykuJyAnOwoJ'));
	@fwrite($fp, base64_decode('CQllY2hvIF9MKCdUaGVyZWZvcmUsIHlvdSA8Yj5jYW5ub3Q8L2I+IHJlZ2lzdGVyIHlvdXIgT0lEcGx1cyBpbnN0YW5jZSBub3cuJyk7CgkJCWVjaG8gJzwvZm9udD48L3A+JzsKCQkJaWYgKCRkb19lZGl0cykgewoJCQkJT0lEcGx1czo6Y29uZmlnKCktPnNldFZh'));
	@fwrite($fp, base64_decode('bHVlKCdvb2JlX3JlZ2lzdHJhdGlvbl9kb25lJywgJzEnKTsKCQkJfQoJCQlyZXR1cm47CgkJfQoKCQkkdGVzdHVybCA9ICdodHRwczovL3d3dy5nb29nbGUuY29tLyc7CgkJJGNoID0gY3VybF9pbml0KCk7CgkJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1VSTCwg'));
	@fwrite($fp, base64_decode('JHRlc3R1cmwpOwoJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9IRUFERVIsIFRSVUUpOwoJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9OT0JPRFksIFRSVUUpOwoJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9SRVRVUk5UUkFOU0ZFUiwgVFJVRSk7CgkJY3Vy'));
	@fwrite($fp, base64_decode('bF9leGVjKCRjaCk7CgkJJGh0dHBDb2RlID0gY3VybF9nZXRpbmZvKCRjaCwgQ1VSTElORk9fSFRUUF9DT0RFKTsKCQljdXJsX2Nsb3NlKCRjaCk7CgkJaWYgKCEkaHR0cENvZGUpIHsKCQkJZWNobyAnPHA+PGZvbnQgY29sb3I9InJlZCI+JzsKCQkJZWNobyBfTCgn'));
	@fwrite($fp, base64_decode('Tm90ZTogVGhlICJDVVJMIiBQSFAgZXh0ZW5zaW9uIGNhbm5vdCBhY2Nlc3MgSFRUUFMgd2VicGFnZXMuIFRoZXJlZm9yZSwgeW91IGNhbm5vdCB1c2UgdGhpcyBmZWF0dXJlLiBQbGVhc2UgZG93bmxvYWQgPGEgaHJlZj0iaHR0cHM6Ly9jdXJsLmhheHguc2UvY2Ev'));
	@fwrite($fp, base64_decode('Y2FjZXJ0LnBlbSI+Y2FjZXJ0LnBlbTwvYT4sIHBsYWNlIGl0IHNvbWV3aGVyZSBhbmQgdGhlbiBhZGp1c3QgdGhlIHNldHRpbmcgPGNvZGU+Y3VybC5jYWluZm88L2NvZGU+IGluIFBIUC5pbmkuJykuJyAnOwoJCQllY2hvIF9MKCdUaGVyZWZvcmUsIHlvdSA8Yj5j'));
	@fwrite($fp, base64_decode('YW5ub3Q8L2I+IHJlZ2lzdGVyIHlvdXIgT0lEcGx1cyBpbnN0YW5jZSBub3cuJyk7CgkJCWVjaG8gJzwvZm9udD48L3A+JzsKCQkJaWYgKCRkb19lZGl0cykgewoJCQkJT0lEcGx1czo6Y29uZmlnKCktPnNldFZhbHVlKCdvb2JlX3JlZ2lzdHJhdGlvbl9kb25lJywg'));
	@fwrite($fp, base64_decode('JzEnKTsKCQkJfQoJCQlyZXR1cm47CgkJfQoKCQkkcGtpX3N0YXR1cyA9IE9JRHBsdXM6OmdldFBraVN0YXR1cygpOwoKCQlpZiAoISRwa2lfc3RhdHVzKSB7CgkJCWVjaG8gJzxwPjxmb250IGNvbG9yPSJyZWQiPic7CgkJCWVjaG8gX0woJ05vdGU6IFlvdXIgc3lz'));
	@fwrite($fp, base64_decode('dGVtIGNvdWxkIG5vdCBnZW5lcmF0ZSBhIHByaXZhdGUvcHVibGljIGtleSBwYWlyLiAoT3BlblNTTCBpcyBwcm9iYWJseSBtaXNzaW5nIG9uIHlvdXIgc3lzdGVtKS4nKS4nICc7CgkJCWVjaG8gX0woJ1RoZXJlZm9yZSwgeW91IDxiPmNhbm5vdDwvYj4gcmVnaXN0'));
	@fwrite($fp, base64_decode('ZXIgeW91ciBPSURwbHVzIGluc3RhbmNlIG5vdy4nKTsKCQkJZWNobyAnPC9mb250PjwvcD4nOwoJCQlpZiAoJGRvX2VkaXRzKSB7CgkJCQlPSURwbHVzOjpjb25maWcoKS0+c2V0VmFsdWUoJ29vYmVfcmVnaXN0cmF0aW9uX2RvbmUnLCAnMScpOwoJCQl9CgkJCXJl'));
	@fwrite($fp, base64_decode('dHVybjsKCQl9CgoJCWVjaG8gJzxwPicuX0woJ1ByaXZhY3kgbGV2ZWwnKS4nOjwvcD48c2VsZWN0IG5hbWU9InJlZ19wcml2YWN5IiBpZD0icmVnX3ByaXZhY3kiPic7CgoJCSMgLS0tCgoJCWVjaG8gJzxvcHRpb24gdmFsdWU9IjAiJzsKCQlpZiAoaXNzZXQoJF9S'));
	@fwrite($fp, base64_decode('RVFVRVNUWydzZW50J10pKSB7CgkJCWlmIChpc3NldCgkX1JFUVVFU1RbJ3JlZ19wcml2YWN5J10pICYmICgkX1JFUVVFU1RbJ3JlZ19wcml2YWN5J10gPT0gMCkpIGVjaG8gJyBzZWxlY3RlZCc7CgkJfSBlbHNlIHsKCQkJaWYgKChPSURwbHVzOjpjb25maWcoKS0+'));
	@fwrite($fp, base64_decode('Z2V0VmFsdWUoJ3JlZ19wcml2YWN5JykgPT0gMCkgfHwgIU9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgnb29iZV9yZWdpc3RyYXRpb25fZG9uZScpKSB7CgkJCQllY2hvICcgc2VsZWN0ZWQnOwoJCQl9IGVsc2UgewoJCQkJZWNobyAnJzsKCQkJfQoJCX0KCQll'));
	@fwrite($fp, base64_decode('Y2hvICc+Jy5fTCgnMCA9IFJlZ2lzdGVyIHRvIGRpcmVjdG9yeSBzZXJ2aWNlIGFuZCBhdXRvbWF0aWNhbGx5IHB1Ymxpc2ggUkEvT0lEIGRhdGEgYXQgb2lkLWluZm8uY29tJykuJzwvb3B0aW9uPic7CgoJCSMgLS0tCgoJCWVjaG8gJzxvcHRpb24gdmFsdWU9IjEi'));
	@fwrite($fp, base64_decode('JzsKCQlpZiAoaXNzZXQoJF9SRVFVRVNUWydzZW50J10pKSB7CgkJCWlmIChpc3NldCgkX1JFUVVFU1RbJ3JlZ19wcml2YWN5J10pICYmICgkX1JFUVVFU1RbJ3JlZ19wcml2YWN5J10gPT0gMSkpIGVjaG8gJyBzZWxlY3RlZCc7CgkJfSBlbHNlIHsKCQkJaWYgKChP'));
	@fwrite($fp, base64_decode('SURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ3JlZ19wcml2YWN5JykgPT0gMSkpIHsKCQkJCWVjaG8gJyBzZWxlY3RlZCc7CgkJCX0gZWxzZSB7CgkJCQllY2hvICcnOwoJCQl9CgkJfQoJCWVjaG8gJz4nLl9MKCcxID0gT25seSByZWdpc3RlciB0byBkaXJlY3Rv'));
	@fwrite($fp, base64_decode('cnkgc2VydmljZScpLic8L29wdGlvbj4nOwoKCQkjIC0tLQoKCQllY2hvICc8b3B0aW9uIHZhbHVlPSIyIic7CgkJaWYgKGlzc2V0KCRfUkVRVUVTVFsnc2VudCddKSkgewoJCQlpZiAoaXNzZXQoJF9SRVFVRVNUWydyZWdfcHJpdmFjeSddKSAmJiAoJF9SRVFVRVNU'));
	@fwrite($fp, base64_decode('WydyZWdfcHJpdmFjeSddID09IDIpKSBlY2hvICcgc2VsZWN0ZWQnOwoJCX0gZWxzZSB7CgkJCWlmICgoT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdyZWdfcHJpdmFjeScpID09IDIpKSB7CgkJCQllY2hvICcgc2VsZWN0ZWQnOwoJCQl9IGVsc2UgewoJCQkJ'));
	@fwrite($fp, base64_decode('ZWNobyAnJzsKCQkJfQoJCX0KCQllY2hvICc+Jy5fTCgnMiA9IEhpZGUgc3lzdGVtJykuJzwvb3B0aW9uPic7CgoJCSMgLS0tCgoJCWVjaG8gJzwvc2VsZWN0Pic7CgoJCSRtc2cgPSAnJzsKCQlpZiAoJGRvX2VkaXRzKSB7CgkJCXRyeSB7CgkJCQlPSURwbHVzOjpj'));
	@fwrite($fp, base64_decode('b25maWcoKS0+c2V0VmFsdWUoJ3JlZ19wcml2YWN5JywgJF9SRVFVRVNUWydyZWdfcHJpdmFjeSddKTsKCQkJCU9JRHBsdXM6OmNvbmZpZygpLT5zZXRWYWx1ZSgnb29iZV9yZWdpc3RyYXRpb25fZG9uZScsICcxJyk7CgkJCX0gY2F0Y2ggKEV4Y2VwdGlvbiAkZSkg'));
	@fwrite($fp, base64_decode('ewoJCQkJJG1zZyA9ICRlLT5nZXRNZXNzYWdlKCk7CgkJCQkkZXJyb3JzX2hhcHBlbmVkID0gdHJ1ZTsKCQkJfQoJCX0KCQllY2hvICcgPGZvbnQgY29sb3I9InJlZCI+PGI+Jy4kbXNnLic8L2I+PC9mb250Pic7CgoJCWVjaG8gJzxwPicuX0woJzxpPlByaXZhY3kg'));
	@fwrite($fp, base64_decode('aW5mb3JtYXRpb246PC9pPiBUaGlzIHNldHRpbmcgY2FuIGFsd2F5cyBiZSBjaGFuZ2VkIGluIHRoZSBhZG1pbmlzdHJhdG9yIGxvZ2luIC8gY29udHJvbCBwYW5lbC4nKS4nPGJyPic7CgkJZWNobyBfTCgnPGEgJTE+Q2xpY2sgaGVyZTwvYT4gZm9yIG1vcmUgaW5m'));
	@fwrite($fp, base64_decode('b3JtYXRpb24gYWJvdXQgcHJpdmFjeSByZWxhdGVkIHRvcGljcy4nLCdocmVmPSIuLi8uLi8uLi9yZXMvT0lEcGx1cy9wcml2YWN5X2RvY3VtZW50YXRpb24uaHRtbCIgdGFyZ2V0PSJfYmxhbmsiJyk7CgkJZWNobyAnPC9wPic7Cgl9Cgp9Cg=='));
	@fclose($fp);
}
if (!is_file('plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php')) {
	warn('File has vanished! Will re-create it: plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php');
	writefile_2();
	if (!is_file('plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php')) {
		warn('File cannot be created (not existing): plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php');
	} else if (sha1_file('plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php') != 'b9c06d7976becdf0cce841511b04c3199233e62d') {
		warn('File cannot be created (checksum mismatch): plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php', 0644)) {
		warn('Could not change file permissions of plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php');
	}
} else {
	if (@sha1_file('plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php') !== 'b9c06d7976becdf0cce841511b04c3199233e62d') {
		if (@sha1_file('plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php') !== '6a3ce9dd5142b56b063b28bf6e07bf061b861052') {
			warn('File was modified. Will overwrite the changes now: plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php');
			$tmp = pathinfo('plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_2();
		if (@sha1_file('plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php') !== 'b9c06d7976becdf0cce841511b04c3199233e62d') {
			warn('File cannot be written (checksum mismatch): plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 372\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 372') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

