<?php /* <ViaThinkSoftSignature>
Jq6KVt1zaeJL4WzuhTKTvoe+8fQMAeEx5376nyx2Ek6AaDntaL63WWP/98KOy8sKC
/zPGlcP+rtmklG+aGJtc6MIxz19/59lQRaBcKEiOYouTs+i0jkrY8S0nZNculknD0
ha5X9LZQ3CLIWsJObcMmA7nFbswaheu61xi4Ly8BoTif4UEqX3XKO4zJrtGf5a6i5
oYbJIirCPg5p5+44dm8iL+vE1unIpHtQZZmDC9swcL1KHBrUxVNPZP7RbwdMkysml
TdUYcnVLTRnWqkZ43p7KatoShsBIx7QTJAqyiNb2aqJudZkErD9Oex+wpkXvNDJYU
5+nNR3DDwM2VBlxszAvnpJnQZqHkODl/FAfS7I9uWkEy8yvttazjHKhrrc5EZv+Io
GfIydYE9bWfdqmWiHOvDztgVW0KjZfmfMpmWHP5ChEOWa5QZE7C2CZPOmb/o9C38t
hJHV3anAGu6vq3fYiMC9fGTamgZvx3F5rdU2pMfUiMAXERm9cLD0lyKWXQSqY8zhI
oJV/vADigSBjTqy03h0Y+zpLfOEOSI5hvCNd0R4LEOzF8E8pGhY/UOXnqjmnECxPt
pVXfsg61dTVQS9kLPgej7mJ7dYyl/ie0/KeXTOJEuRDWkLv1NmUBvI/H7x7FOfgQk
9BhML4YujJ4aRKqnT7gvttnwQewMyQ17oWzo8LGeFVarl+9d5HiJQSRUOmX0JzLbS
m4CDy343Cgkib9GBHaSPS+wLGbALhVXNNGPe/UetUHaEdCgQ+pplrcL/7O2hWE7jk
M8kTEShGsomH+AxqVyZ8zSU8iXS02dSEr1fEPRre4mdPw1tzZtZExqEZqhLvxNVrC
nyIz7ZtXNaxPACRUfZvjcojMMYWPBB2Zy5yhGBR2qx3W9BO0Xg9DeYCLuGS2/2D1L
lgybXNK2aerhT2UWUttLC0cCjSOU8Lh4emMsJWNOrmZLQMwDuVmRww9YZ065Jc763
mPmWy4mD6qyhPY/0lMSN9NSQS4C2Hqr2zdL3HXCH36YwZvBtr5F3BOtMS1kpewnAC
XztD51BZSr5F3Nw/im7ojzIaoaRTI3uWD9BaRHCZieG3dlIzlLLMOl0r3HAY+98lY
YZV6HfIvkvxWvddDLdQKIgqonBa/KeMYPXKClyMa1XIWWhj52csTpuO9fXB0rbOXD
C/uAMJoC+vWDzNxLMYE1dHO7nSLjqlUqot7CA44tIaLIY4WzDuLJBjXwRVyFUpKM+
M7u4cBD8yH1pbRgIJCFEpk0fefqS57JyH4/XGBJ6xzDrCJQ2FbwNbxq0g69wzFt9Z
7FQYQ1gzVEN3Qavw+P6oEYI7Fiq+tTrUMZaImGMbsweMEA6dUVKOgmQXbGTfHyxeE
w==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 275') {
	err('This update can only be applied to OIDplus version 2.0.0.275!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: TODO
function writefile_1() {
	@$fp = fopen('TODO', 'w');
	@fwrite($fp, base64_decode('ClJFQ0VOVCBTVFVGRgotIENvb2tpZSBsYXc6CglEb3dubG9hZCBDb29raWVDb25zZW50IGNvZGUgaW50byBfM3AgZm9sZGVyLCBkbyBub3QgaG90bGluayBpdAoJd2UgbmVlZCB0byBsb2cgYWxsIGNvbnNlbnRzCglkbyB3ZSBuZWVkIGFuIGV4cGxpY2l0IGNvbnNl'));
	@fwrite($fp, base64_decode('bnQgYXQgdGhlIGxvZ2luIGZvcm0/CglkbyB3ZSBuZWVkIGEgY29uc2VudCBmb3IgdGhlIGNvb2tpZSBTU0xfQ0hFQ0s/Ci0gVmVyaWZ5IHRoYXQgbG9nZ2VyIHdvcmtzIGNvcnJlY3RseSwgY2hlY2sgaWYgYWxsIGxvZ21hc2tzIGFyZSBjb3JyZWN0Ci0gdGhlIGlu'));
	@fwrite($fp, base64_decode('YWN0aXZpdHkgdGltZXIgaXMgbXVjaCB0b28gZmFzdCEKLSBEb2VzIHRoZSBhZG1pbiBmZWF0dXJlICI2MDBfbG9nIiBhbHNvIHNob3cgYWxsIGxvZyBldmVudHMgZnJvbSBhbGwgT2JqZWN0cyBhbmQgYWxsIFJBcz8KLSBhdCBhIGxvdCBvZiBmb3JtcywgaWYgeW91'));
	@fwrite($fp, base64_decode('IHByZXNzICJlbnRlciIsIHRoZSAiZm9ybSIgd2lsbCBub3QgYmUgc3VibWl0dGVkIChlLmcuICJjcmVhdGUgcmEiIHBsdWdpbiksIGNhbm5vdCByZXByb2R1Y2U/Ci0gVGVzdCBldmVyeSBmdW5jdGlvbiBvZiBPSURwbHVzIHRvIGVuc3VyZSBldmVyeXRoaW5nIHdv'));
	@fwrite($fp, base64_decode('cmtzIGFmdGVyIHRoZSByZWNlbnQgY2hhbmdlcyBpbiBPT1AKCldIT0lTCi0gd2Vid2hvaXM6IGJlc2lkZSBUWFQvWE1ML0pTT04gbW9yZSBvdXRwdXQgbW9kaT8gIENTViwgUy9NSU1FICAoYW5kIGFkZCB0aGUgUy9NSU1FIGtleXB1cnBvc2UgdG8gdGhlIFguNTA5'));
	@fwrite($fp, base64_decode('IGNlcnRpZmljYXRlcykKLSB3aG9pcyBxdWVyeSAnb2lkOicgc2hvdWxkIHNob3cgYWxsIHJvb3QgZW50cmllcyAoc3Vib3JkaW5hdGUgZW50cmllcyksIGJ1dCB0aGVyZSBpcyBvbmx5IHRoZSBtZXNzYWdlICJub3QgZm91bmQiCgpSRkMKLSBwcm9vZiByZWFkCi0g'));
	@fwrite($fp, base64_decode('c2hvdWxkIHRoZSB3aG9sZSBXSE9JUyBvdXRwdXQgYmUgY2FzZSBpbnNlbnNpdGl2ZT8KLSBzaG91bGQgImRpc3RhbmNlIiBiZSBtYW5kYXRvcnk/Ci0gdHJ5IHRvIHVzZSBNVVNULCBNVVNUIE5PVCwgU0hBTEwgZXRjLiBhY2NvcmRpbmcgdG8gUkZDIDIxMTkKLSBm'));
	@fwrite($fp, base64_decode('ZWxkZXIgZGllIG5pY2h0IG9wdGlvbmFsIHNpbmQgPT4gbWFuZGF0b3J5IGtlbm56ZWljaG5lbgoKT09CRS9TRVRVUAotIFRoZXJlIHNob3VsZCBiZSBhICJ0ZXN0IGRhdGFiYXNlIGNvbm5lY3Rpb24iIGJ1dHRvbgoKU01BTEwgVEhJTkdTCi0gRGFyayB0aGVtZQot'));
	@fwrite($fp, base64_decode('IFJBIGFkZHJlc3MgZGF0YTogQ291bnRyeSBzZWxlY3Rpb24gYm94IGxpa2UgaW4gT0lESW5mbwotIFdlIHNob3VsZCByZW1vdmUgImRpZSgpIiB3aGVuZXZlciBwb3NzaWJsZSwgYmVjYXVzZSBpdCBpcyB2ZXJ5IHVuZmxleGlibGUKLSBvZmZlciBzaWduYXR1cmUg'));
	@fwrite($fp, base64_decode('Y2hlY2tlciB0b29sIHRvIHZlcmlmeSBXSE9JUyByZXNwb25zZXMKLSB3ZWIgc3ZuIHVwZGF0ZXI6ICJibGFjayBsaXN0IiAoZG8gbm90IG92ZXJ3cml0ZSBzcGVjaWZpYyBmaWxlcyBsaWtlIGZhdmljb24uaWNvKQotIG1pbmltdW0tYXVma2xhcHBzdHVmZW4gZnVl'));
	@fwrite($fp, base64_decode('ciBhbGxlIG9iamVrdGUgdW5kIHBsdWdpbnMgZWluc3RlbGxiYXIgbWFjaGVuLCBzb2Rhc3Mgei5iLiBhbGxlIE9JRHMgaW1tZXIgYmlzIHp1ciBzdHVmZSAyIGF1Zmdla2xhcHB0IHNpbmQsIHdlbm4gbWFuIE9JRHBsdXMgZnJpc2NoIMO2ZmZuZXQKLSBtYWtlIHVz'));
	@fwrite($fp, base64_decode('ZSBvZiBhdXRvbG9hZGluZyBvZiBQSFAgY2xhc3NlcwotIFJldml2ZSB0aGUgaWRlYSBvZiAiaW5mb3JtYXRpb24gb2JqZWN0cyIgPSBPSURzIHRoYXQgY29udGFpbiBjb250ZW50Ci0gVGhpbmdzIGxpa2UgImNvbmZpZygpLT5taW5SYVBhc3N3b3JkTGVuZ3RoIiBz'));
	@fwrite($fp, base64_decode('aG91bGQgbm90IGJlIGhhcmRjb2RlZCBmdW5jdGlvbnMsIGJ1dCByYXRoZXIgcXVlcmllZCB3aXRoIG5vcm1hbCBnZXRWYWx1ZSgpIGV0Yy4KLSBBUEkgOiBNYWtlIGEgZnVuY3Rpb24gdGhhdCBjaGVja3MgaWYgYSBSQSBleGlzdHMsIGFuZCB1c2UgaXQgZXZlcnl3'));
	@fwrite($fp, base64_decode('aGVyZSB3aGVyZSBuZWVkZWQKLSBTaG91bGQgd2Ugc2VsZi1ob3N0IHBvbHlmaWxsIGR1ZSB0byBHRFBSIHN0dWZmPwotIE9iamVjdCB0eXBlIHBsdWdpbnMgOiB0YWtlIGNhcmUgdGhhdCAidHJlZWljb24ucG5nIiBhbmQgImljb25fYmlnLnBuZyIgZXhpc3QgZXZl'));
	@fwrite($fp, base64_decode('cnl3aGVyZSAoYmVjb21lIHN0YW5kYXJkKQotIHdoZW4gYWpheC5waHAgZ2VuZXJhdGVzIGEgUEhQIGVycm9yLCB0aGUgY2xpZW50IGdpdmVzIGEgInN5bnRheCBlcnJvciIgbWVzc2FnZS4uLiBpdCB3b3VsZCBiZSBiZXR0ZXIgaWYgdGhlIGNsaWVudCBzaG93cyB0'));
	@fwrite($fp, base64_decode('aGUgZnVsbCBwaHAgZXJyb3I/IG9yIHNvbWV0aGluZyBtb3JlIHVzZXItZnJpZW5kbHk/Ci0gZnJlZW9pZDogZ21haWwgYXBwIGRvZXMgbm90IGh5cGVybGluayB0aGUgYWN0aXZhdGlvbiBVUkwuIHdoeT8KLSBob3cgdG8gYXZvaWQgaW52aXRlIHNwYW1taW5nPwot'));
	@fwrite($fp, base64_decode('IHdoZW4gYSBQSFAgZXJyb3IgaGFwcGVucyAoaS5lLiB0aGUgQUpBWCBzY3JpcHQgZGlkIG5vdCBtYW5hZ2UgdG8gb3V0cHV0IGEgSlNPTiksIHRoZSBBSkFYIHNjcmlwdCBvdXRwdXRzICJFcnJvcjogU3ludGF4RXJyb3I6IFVuZXhwZWN0ZWQgdG9rZW4gPCBpbiBK'));
	@fwrite($fp, base64_decode('U09OIGF0IHBvc2l0aW9uIDAiIC4uLiBiZXR0ZXIgc2hvdyB0aGUgdXNlciB0aGUgYWN0dWFsIG1lc3NhZ2UKLSB3aGVuIGxvZ2luIGV4cGlyZWQsIHJlbW92ZSBlbnRyaWVzIGluIHRoZSB0cmVldmlldwotIGRpc2FibGUgc3BlY2lmaWMgZnVuY3Rpb25zIChlLmcu'));
	@fwrite($fp, base64_decode('IGludml0ZSwgbG9naW4sIHJhaW5mbywgZm9yZ290IHBhc3N3b3JkKSBpZiB0aGUgcGx1Z2lucyBhcmUgbm90IGluc3RhbGxlZCAoY2hlY2sgaWYgY2xhc3MgdHlwZSBpcyByZWdpc3RlcmVkIHVzaW5nIGNsYXNzX2V4aXN0cygpKQotIG1ha2UgdXNhZ2Ugb2YgRm9y'));
	@fwrite($fp, base64_decode('ZWlnbiBLZXlzCglQUk9CTEVNOiB3ZSBuZWVkIGZvcmVpZ24ga2V5cyB3aXRoIG5vIGNoZWNrLCBiZWNhdXNlCglhKSB3ZSB3YW50IHRvIGtlZXAgbG9nIGVudHJpZXMgZXZlbiBpZiBhbiBvYmplY3QvdXNlciBpcyBkZWxldGVkCgliKSBsb2dfdXNlci51c2VybmFt'));
	@fwrite($fp, base64_decode('ZSBjYW4gYWxzbyBiZSAnYWRtaW4nIChhbmQgdGhlcmVmb3JlIG5vdCBiZSBhIGZvcmVpZ24ga2V5IHRvIHRhYmxlICdyYScpCgljKSBub3QgZXZlcnkgb2JqZWN0IHNob3VsZCBoYXZlIGEgcmVnaXN0ZXJlZCBSQS4gVGhlcmUgc2hvdWxkIGJlICJ1bmtub3duIiBS'));
	@fwrite($fp, base64_decode('QXMgd2hlcmUgb25seSB0aGUgZW1haWwgYWRkcmVzcyBpcyBrbm93bgotIDxhYmJyPiBpbiA8Y29kZT4gd2lyZCBkb3BwZWx0IHVudGVyc3RyaWNoZW4KLSB3ZW5uIG1hbiBlaW5lIHdlbGwta25vd24gT0lEIGFubGVnZW4gbfZjaHRlLCBkYW5uIGtvbW10IGZlaGxl'));
	@fwrite($fp, base64_decode('ciB3ZWdlbiByZXBsYWNlQXNuMS9yZXBsYWNlSXJpLCBhYmVyIGRpZSBPSUQgaXN0IGVyc3RlbGx0LiBEaWUgQVBJIGlzdCBhYmVyIG5pY2h0IHJlbG9hZGVkLiBNYW4gc2llaHQgYWxzbyBuaWNodCwgZGFzcyBkaWUgT0lEIGVyc3RlbGx0IHd1cmRlLCB1bmQgZWlu'));
	@fwrite($fp, base64_decode('IGVybmV1dGVyIGtsaWNrIGF1ZiBJbnNlcnQgZvxocnQgenVtIFByaW1hcnktS2V5IGZlaGxlcgotIHByb2JsZW06IHdlbm4gZWluZSBSQSBlaW5nZWxhZGVuIHdlcmRlbiBt9mNodGUsIG11c3MgbWFuICJ1cGRhdGUiIGRy/GNrZW4gdW5kIGRpZSBPSUQgd2lyZCBh'));
	@fwrite($fp, base64_decode('bHMgdXBkYXRlZCBtYXJraWVydAotIGJlaSBtZWhyZXJlbiBpZGVudGlmaWVybiBrYW5uIG1hbiBuaWNodCBiZXN0aW1tZW4sIHdlbGNoZXIgaWRlbnRpZmllciBkZXIgYmV2b3J6dWd0ZSBzZWluIHNvbGwhIQotIHNob3cgd2hvaXMgbGlua3Mgb25seSBpZiBmb2xk'));
	@fwrite($fp, base64_decode('ZXIgIndob2lzLyIgZXhpc3RzCi0gZGlzYWJsZSBhdXRvY29tcGxldGUgb24gc29tZSBmb3JtcwotIGdyYXBoaWNhbCBpbXBvcnZlbWVudHMgb2YgZm9ybXMgKGlucHV0IGVkaXRzIGFsaWduZWQpCi0gIkRvY3VtZW50cyIgc2VjdGlvbjogTWFrZSBkb2N1bWVudGF0'));
	@fwrite($fp, base64_decode('aW9uIGZvciB1c2FnZSBvZiBPSURwbHVzIChmb3IgbWVtYmVycyBvbmx5KQotIGFkbWluIGNvbmZpZyBtZWhyIHVzZXIgZnJpZW5kbHksIGUuZy4gaGF2aW5nIHRoZSBlbmFibGUvZGlzYWJsZSBvYmplY3QgdHlwZSBzdHVmZiAobGlrZSBpbiByZWdpc3RyYXRpb24g'));
	@fwrite($fp, base64_decode('d2l6YXJkKSBhbHNvIGluIHRoZSBhZG1pbiBjb250cm9sIHBhbmVsCi0gaXQgd291bGQgYmUgY29vbCBpZiBhZnRlciB0aGUgbG9naW4sIHRoZSBvcGVuZWQgbm9kZXMgaW4gdGhlIHRyZWUgd291bGQgc3RheSBvcGVuCi0gc2hvdWxkIHdlIGxvZyBzb21ld2hlcmUs'));
	@fwrite($fp, base64_decode('IHdoZW4gdGhlIGFkbWluIGFjY291bnQgd2FzIGxvZ2dlZCBpbj8KLSBodG1sIGNoZWNrYm94OiAibGFiZWwgZm9yIiB2ZXJ3ZW5kZW4KLSB3aGVuIGphdmFzY3JpcHQgZmFpbHMsIHRoZSBmb3JtIHdpbGwgYmUgc3VibWl0dGVkIHRvICcuLycgLCB0aGF0IGlzIG5v'));
	@fwrite($fp, base64_decode('dCBnb29kISBmYWlsZWQgamF2YXNjcmlwdCBtdXN0IHJldHVybiBmYWxzZSwgc28gdGhhdCB0aGUgZm9ybSBkb2VzIG5vdCBnZXQgc3VibWl0dGVkCi0gYWRtaW46IHNob3cgcHJpdmFjeSBlbnRyaWVzIGZyb20gUkFzIChidXQgZ3JleSwgc28geW91IGtub3cgdGhh'));
	@fwrite($fp, base64_decode('dCBpdCBpcyBwcml2YXRlKQotIGFkbWluIHNvbGwgY29udGFjdCBkYXRhIGVpbmVyIGZyZW1kZW4gUkEg5G5kZXJuIGT8cmZlbgotIGZyZWVvaWQ6IGFzbi4xIHVuZCBpcmkgc3BhbHRlbiBhdXNibGVuZGVuLCBkYSBkaWVzZXIgYXJjIGtlaW5lIElEcyB2ZXJnaWJ0'));
	@fwrite($fp, base64_decode('PwotIFByaXZhY3k6IE1laHIgc3R1ZmVuLCB6LmIuIGRhc3MgbWFuIGRlbiBwZXJzb25hbCBuYW1lIGV2dGwgZ2FyIG5pY2h0IHplaWdlbiBt9mNodGUKLSBNYW4gc29sbHRlICJjcmVhdGVkIiBhYuRuZGVybiBk/HJmZW4hIG9kZXIgZXZ0bCBnYW56IHZlcnN0ZWNr'));
	@fwrite($fp, base64_decode('ZW4sIHdlbm4gbWFuIGVzIG5pY2h0IHdlad8KLSBpbiBkZXIgY3J1ZCBsaXN0ZSBkZW4gdGl0ZWwgZGVzIG9iamVrdHMgemVpZ2VuCi0gbmF0T3JkZXIoKSBpc3QgbnVyIGb8ciBPSUQgZ/xsdGlnISEhIGFuZGVyZSBzb3J0LW1lY2hhbmlzbWVuIGb8ciBhbmRlcmUg'));
	@fwrite($fp, base64_decode('b2JqZWt0dHlwZW4gZXJmb3JkZXJsaWNoCi0gdGlueW1jZQoJbWNlIGRpcnR5IGZsYWc6CgkJLSB3ZW5uIG1hbiB3ZWNoc2VsIChqcyB0cmVlIHNlbGVjdCksIGRhbm4gc29sbCBhYmdlZnJhZ3Qgd2VyZGVuLCBvYiB0aW55bWNlIGRpcnR5IGlzdCwgdW5kIGVpbmUg'));
	@fwrite($fp, base64_decode('d2FybnVuZyBicmluZ2VuLCBhbHNvIHNvLCB3aWUgd2VubiBtYW4gZGllIHNlaXRlIG5ldSBsYWRlbiB3/HJkZQoJCS0ga3JpdGlzY2hlciBidWc6IHNlaXRlIPZmZm5lbiwgdGlueSBtY2UgZWRpdGllcmVuLCBzcGVpY2hlcm4ga2xpY2tlbi4gZGFubiBmNSBuZXUg'));
	@fwrite($fp, base64_decode('bGFkZW4gKG5pY2h0IHN0cmcrZjUpOiBkYW5uIGlzdCBkZXIgYWx0ZSBjb250ZW50IHdpZWRlciBkYS4gYXXfZXIgbWFuIGRy/GNrdCBzdHJnK2Y1Ci0ganN0cmVlIHNlbGVjdDogYXV0b21hdGljYWxseSBzY3JvbGwgZG93bgotIG9wdGlzY2ggYXVmaPxic2NoZW4u'));
	@fwrite($fp, base64_decode('IGRpbmdlIHdpZSBSQTogbWVociBkaW5nZSB6ZWlnZW4sIGFkcmVzc2UsIGVtYWlsIGV0YwoKREFUQUJBU0UKLSBjaGVjayBpZiB0aGUgTlVMTCBhbmQgTk9UIE5VTEwgZGVmaW5pdGlvbnMgYXJlIG1lYW5pbmdmdWwuIEl0IGlzIG5vdCBnb29kIGF0IGluICpfcmEg'));
	@fwrite($fp, base64_decode('ZXZlcnl0aGluZyBpcyBOT1QgTlVMTAotIFNRTGl0ZTM6IEltcGxlbWVudCBOYXR1cmFsIE9JRCBzb3J0aW5nIChuYXRTb3J0KQoKRlVUVVJFCi0gbXVsdGlsYW5nCi0gbWFrZSB1c2Ugb2YgQ29tcG9zZXIuIFByb2JsZW1zOgogICogV2hhdCBpZiBjb21wb3NlciBp'));
	@fwrite($fp, base64_decode('bnN0YWxscyBhIHZlcnNpb24gb2YgYSBjb21wb25lbnQsIHdoaWNoIGlzIGluY29tcGF0aWJsZT8KICAqIFdlIG5lZWQgYSBuZXcgcHVibGlzaGluZyBzY3JpcHQsIGJlY2F1c2Ugc2ltcGx5IGNoZWNraW5nIG91dCBTVk4gaXMgbm90IGVub3VnaCBhbnltb3JlLiBU'));
	@fwrite($fp, base64_decode('aGUgdXNlciBuZWVkcyB0byBleGVjdXRlIGNvbXBvc2VyLiBCdXQgd2hhdCBpcyBpZiB0aGUgdXNlciBkb24ndCBoYXZlIGNvbXBvc2VyIChvciBkb250IGhhdmUgc2hlbGwgYWNjZXNzIGF0IGFsbD8pCi0gaW1wbGVtZW50IHNpdGVtYXBzIHhtbAotIGFkbWluIHNo'));
	@fwrite($fp, base64_decode('b3VsZCBiZSBhYmxlIHRvIGNoYW5nZSB3ZWxsa25vd24gb2lkcz8KLSBtb3ZlIG9pZCB0byBkaWZmZXJlbnQgYXJjCi0gYmVpIHNlaHIgZ3Jv32VuIGFyY3MgKHouQi4gUEVOKSBzb2xsZW4gbmljaHQgYWxsZSBhbmdlemVpZ3Qgd2VyZGVuCi0gdW50ZXJzdPx0enVu'));
	@fwrite($fp, base64_decode('ZyBm/HIgT1JTPwotIE1laHIgIkN1dHRpbmcgRWRnZSBUZWNobm9sb2dpZSIgc29sbCBpbiBkaWVzZW0gUHJvamVrdCB6dW0gVHJhZ2VuIGtvbW1lbjogQUpBWCwgSlNPTiwgdm9sbHN05G5kaWcgVVRGOCwgQ1JVRCBmcmFtZXdvcmtzLCBQRE8sIEhUTUw1LCBNb2Jp'));
	@fwrite($fp, base64_decode('bGVzIERlc2lnbiwgUHVyZSBDU1MsIEF1dG9sb2FkaW5nLCBPYmpla3RvcmllbnRpZXJ1bmcgKGFiZXIgbmljaHQgdW5iZWRpbmd0IE1WQyksIFRlc3RpbmcsIC4uLjxicj4KLSAiU2VhcmNoIiBwbHVnaW46IEZlYXR1cmUgdG8gc2VhcmNoIGluc2lkZSBkb2N1bWVu'));
	@fwrite($fp, base64_decode('dGF0aW9uIChkb2MvIGRpcmVjdG9yeSkKLSAiU2VhcmNoIiBwbHVnaW46IEkgd2FudCB0byBzZWFyY2ggaW4gYWxsIG9iamVjdCB0eXBlcyBhbmQgUkFzLiBOb3QgZmlyc3Qgc2VsZWN0IHRoZSB0eXBlLgotIEhvdyBjYW4gd2UgbWFrZSBzdXJlIHRoYXQgZXhhbXBs'));
	@fwrite($fp, base64_decode('ZSBvYmplY3RzIGFyZSBub3QgZXhwb3J0ZWQgdXNpbmcgb2lkLWluZm8uY29tIGV4cG9ydD8KLSBBZG1pbmlzdHJhdG9yLUludGVyZmFjZTogZW5hYmxlIGFuZCBkaXNhYmxlIG9iamVjdCB0eXBlcwotIGRldGFpbGxlZCBjaGFuZ2UtaGlzdG9yeSBvZiBlYWNoIG9p'));
	@fwrite($fp, base64_decode('ZAoKQlVHUz8KLSBPSURwbHVzIGRvZXMgbm90IHdvcmsgaW4gU2FmYXJpIE1vYmlsZSEKCTEuIFlvdSBjYW5ub3Qgc2Nyb2xsIHRoZSBPSUQgZ3JpZCwgYXMgdGhlIHNjcm9sbGluZyBhZmZlY3RzIHRoZSB3aG9sZSBwYWdlLCBub3QgdGhlIGdyaWQuCgkyLiBKUXVl'));
	@fwrite($fp, base64_decode('cnlVSSBzbGlkZXJzIGNhbm5vdCBiZSBkcmFnZ2VkCgpSRUpFQ1RFRCBJREVBUwotIHNvbGx0ZSBlcyBtZWhlcmUgYWRtaW5zIGdlYmVuPwotIHJlY29yZCBmaXJzdCBSQSBhbmQgY3VycmVudCBSQSA9PiBYLjY2MCBkb2VzIG5vdCBoYXZlIHRoaXMgcmVxdWlyZW1l'));
	@fwrite($fp, base64_decode('bnQKLSBtYXJrZXJzIERSQUZULCBMRUFGIGFuZCBGUk9aRU4gZXRjLiA9PiB1c2UgIlByb3RlY3RlZCIgaWYgeW91IHdhbnQgdG8gbWFrZSBpdCBpbnZpc2libGUKCklERUFTCi0gd2hlbiBhIG5ldyBvaWQgaXMgY3JlYXRlZCwgc2hvdWxkIHdlIHJlZGlyZWN0IHRv'));
	@fwrite($fp, base64_decode('IHRoZSBuZXdseSBjcmVhdGVkIE9JRCwgc28gdGhhdCB0aGUgdXNlciBjYW4gYmVnaW4gZW50ZXJpbmcgdGhlIGRlc2NyaXB0aW9uIGV0Yz8KLSB3aGVuIGFuIG9iamVjdCB3YXMgbm90IGZvdW5kLCB0aGUgZXJyb3IgbWVzc2FnZSBjb3VsZCBzaG93IHRoZSBuZXh0'));
	@fwrite($fp, base64_decode('IHBvc3NpYmxlIGtub3duIG9iamVjdCAobGlrZSBXZWJXSE9JUyBkb2VzKQotIHRoZSAiZ290byIgcXVpY2tiYXIgKGF0IHRoZSB0b3AgcmlnaHQpIGNvdWxkIGFsc28gYmUgdXNlZCB0byBzZWFyY2ggc29tZXRoaW5nIC4uLgotIC4uLiBhbHRlcm5hdGl2ZWx5LCB0'));
	@fwrite($fp, base64_decode('aGUgIm9iamVjdCBub3QgZm91bmQiIGVycm9yIHBhZ2UgY291bGQgbGluayB0byB0aGUgc2VhcmNoIHBsdWdpbgotIG1ha2UgY29sb3IgcGx1Z2luIGF2YWlsYWJsZSBmb3IgZXZlcnlvbmUuIEFkbWluIG1heSBwZXJtYW5lbnRseSBzYXZlIHRoZSBjb2xvcnMsIGJ1'));
	@fwrite($fp, base64_decode('dCB1c2VycyBzaG91bGQgYmUgYWJsZSB0byBzZXQgdGhlaXIgb3duIHRoZW1lLCBzYXZlZCB2aWEgY29va2llcwotIHRoZXJlIHNob3VsZCBiZSBhIGZvcm0gd2hlcmUgYW4gUkEgY2FuIHJlcXVlc3QgYW4gaW52aXRhdGlvbiwgZXZlbiBpZiB0aGUgc3VwZXJpb3Ig'));
	@fwrite($fp, base64_decode('UkEgZGlkIG5vdCBpbnZpdGUgdGhlbS4KICB0aGUgZmFjdCB0aGF0IGEgUkEgZXhpc3RzIGluIHRoZSBPYmplY3QgVGFibGUgc2hvdWxkIHBlcm1pdCB0aGUgUkEgdG8gaW52aXRlIHRoZWlyc2VsZi4KLSBiZWltIHZlcmxhc3NlbiBkZXIgc2VpdGUsIHouYi4gd2Vu'));
	@fwrite($fp, base64_decode('biBtYW4gbGlua3MgYXVmIGVpbmVuIG5ldWVuIG1lbvxwdW5rdCBrbGlja3QsIHNvbGwgZWluZSBhYmZyYWdlIGtvbW1lbiwgb2IgbWFuIHNwZWljaGVybiBt9mNodGUKLSBtYWtlIGEgbGlzdCBvZiBPSURzIHRoYXQgZG8gbm90IGFzc2lnbiBBU04xL0lSSSBpZGVu'));
	@fwrite($fp, base64_decode('dGlmaWVycyAoZS5nLiBJQU5BIFBFTiBvciBWaWFUaGlua1NvZnQgRnJlZU9JRCksIHRoZW4gcmVqZWN0IGFueSBpZGVudGlmaWVyIHRoZSB1c2VyIHByb3ZpZGVzCi0gc2FuaXRpemUgSVB2NCwgSVB2NiwgR1VJRCBkdXJpbmcgY3JlYXRpb24KCWJlaSBJUHY0IHVu'));
	@fwrite($fp, base64_decode('ZCBJUHY2OiAtIGlmIGl0IGlzIGEgc2luZ2xlIGhvc3QgYWRkcmVzcywgZG9uJ3QgcHV0IC8zMiBvciAvMTI4IHN1ZmZpeAoJICAgICAgICAgICAgICAgICAgIC0gc3RyaWtlIHVubmVjZXNzYXJ5IGJpdHMgdGhhdCBhcmUgbm90IGRlZmluZWQgaW4gdGhlIG5ldG1h'));
	@fwrite($fp, base64_decode('c2sgKGFsc28gYXQgdGhlIHdob2lzIG91dHB1dCkKLSBsZXQgdGhlIHN5c2FkbWluIGRlY2lkZSBpZiB0aGV5IHdhbnQgdGhlIHRpdGxlIGJlICJzeXN0ZW10aXRsZSAtIG9iamVjdCB0aXRsZSIgb3IgIm9iamVjdCB0aXRsZSAtIHN5c3RlbXRpdGxlIgotIHNob3Vs'));
	@fwrite($fp, base64_decode('ZCBhIFJBIGJlIGFibGUgdG8gbWFyayB0aGVpciBvd24gb2lkIGFzIGNvbmZpZGVudGlhbCwgaW5zdGVhZCBvZiBhc2tpbmcgdGhlIHN1cGVyaW9yIFJBPwotIHNvbGx0ZSBlcyBlaW5lIG9pZHBsdXMgcHJvamVrdHNlaXRlIGdlYmVuIGFuc3RlbGxlIG51ciBkYXMg'));
	@fwrite($fp, base64_decode('bmFja3RlIHN5c3RlbT8KLSB2ZW5kb3Igc2lnbmF0dXJlIHRvIHBsdWdpbnMgKyB2aWF0aGlua3NvZnQgc2lnbmF0dXJlcyArICJjaGVjayIgcHJvZ3JhbSBpZiBhbGwgc2lnbmF0dXJlcyBtYXRjaAotIGhhdmUgYSBtZW51IGl0ZW0gKHBsdWdpbikgImxhdGVzdCB1'));
	@fwrite($fp, base64_decode('cGRhdGVzIiB3aGljaCBsaXN0cyBPSURzIHRoYXQgaGF2ZSBiZWVuIGNoYW5nZWQgb3IgYWRkZWQgcmVjZW50bHk/Ci0gKHVuc3VyZTopIHdvdWxkIGl0IGJlIGdvb2QgaWYgdGhlIHN1cGVyaW9yIFJBIGNvbW1lbnQgaXMgc2hvd24gaW4gdGhlIG9iamVjdCBwYWdl'));
	@fwrite($fp, base64_decode('IGl0c2VsZj8KLSBEdXJpbmcgYW4gb2JqZWN0IGluc2VydGlvbjogSWYgZXZlcnl0aGluZyBpcyBlbXB0eSAoQVNOMSwgSVJJLCBjb21tZW50KSwgc2hvdWxkIHRoZW4gdGhlcmUgYmUgYSB3YXJuaW5nPwotIFRoZSBzeXN0ZW0gc2hvdWxkIHdhcm4gaWYgdGhlcmUg'));
	@fwrite($fp, base64_decode('YXJlIHR3byBPSURzIHdpdGggdGhlIHNhbWUgQVNOLjEgaWRlbnRpZmllciAoaXQgaXMgYWxsb3dlZCwgYnV0IG5vdCByZWNvbW1lbmRlZCEpCgpRVUVTVElPTlMKLSBzaG91bGQgdGhlIGNvbGxhdGlvbiBiZSBjYXNlIHNlbnNpdGl2ZSBvciBjYXNlIGluc2Vuc2l0'));
	@fwrite($fp, base64_decode('aXZlPyBGb3IgSmF2YSBwYWNrYWdlIG5hbWVzLCBpdCBzaG91bGQgYmUgY2FzZSBzZW5zdGl2aWUKLSB3b3J0ICJndWlkIiBvZGVyICJ1dWlkIiB2ZXJ3ZW5kZW4/Ci0gc2hvdWxkICJPSUQgdXBkYXRlZCIgYmUgc3BsaXQgaW50byB0d28gY2F0ZWdvcmllcyAidXBk'));
	@fwrite($fp, base64_decode('YXRlZCBieSBzdXBlcmlvciIgKGUuZy4gaWRlbnRpZmllcnMpIGFuZCAidXBkYXRlZCBieSBvd25lciIgKGRlc2NyaXB0aW9uIGV0Yyk/Ci0gInVwZGF0ZWQiIG5pY2h0IGFrdHVhbGlzaWVyZW4sIHdlbm4gbWFuIG51ciBhdWYgInVwZGF0ZSIga2xpY2t0IGFiZXIg'));
	@fwrite($fp, base64_decode('bml4IGdl5G5kZXJ0IGhhdAotICJEb2N1bWVudHMiIHNlY3Rpb246IENhbiBiYXNlIG9mIFVSTHMvaW1hZ2VzIGluc2lkZSB0aGUgSFRNTCBiZSBjaGFuZ2VkIGF1dG9tYXRpY2FsbHk/CgpQUklWQUNZOgotIGJyaW5nIGJhY2sgIjNwL2Nvb2tpZWNvbnRlbnQiPyBE'));
	@fwrite($fp, base64_decode('TSAyOCBNYXkgMjAxOTogUmVtb3ZlZCBDb29raWVDb25zZW50IHRlbXBvcmFyaWx5LCBiZWNhdXNlIGl0IGlzIHBsYWNlZCBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBwYWdlIGFuZCB0aGVyZWZvcmUgcnVpbnMgdGhlIEdvb2dsZSBpbmRleCAuLi4KCT0+IFdlIG1p'));
	@fwrite($fp, base64_decode('Z2h0IG5vdCBuZWVkIGl0LCBiZWNhdXNlIGNvb2tpZXMgYXJlIG9ubHkgc2V0IGR1cmluZyBsb2dpbiwgYW5kIGF0IHRoZSBsb2dpbiBwYWdlIGl0c2VsZiwgd2UgYWxyZWFkeSB3YXJuIGFib3V0IGNvb2tpZXMsIGluIGFkZGl0aW9uIHRvIHRoZSBQcml2YWN5IGRv'));
	@fwrite($fp, base64_decode('Y3VtZW50YXRpb24KCkdVSUQgTWFuYWdlbWVudAotIExlYWYgbm9kZXMgKEdVSURzKSBzaG91bGQgc2hvdy9lZGl0IHRoZSBUaXRsZSBpbiB0aGUgQ1JVRCwgc28geW91IGRvbnQgaGF2ZSB0byBjbGljayB0aGUgR1VJRCB0byBzZWUgdGhlIHRpdGxlCi0gc2VsdHNh'));
	@fwrite($fp, base64_decode('bWVyIGJ1Zzogd2VubiBpY2ggZ3VpZDpvaWRwbHVzIGVkaXRpZXJlLCBkYW5uIPZmZm5ldCBzaWNoIGxpbmtzIGd1aWQ6YWN0aXZlZGlyZWN0b3J5IGJlaW0gbmV1bGFkZW4gZGVzIGJhdW1zIG5hY2ggZGVtIHVwZGF0ZS4gaXJnZW5kd2llIPZmZm5ldCBlciBkZW4g'));
	@fwrite($fp, base64_decode('enVsZXR6dCBnZfZmZm5ldGVuIG5vZGUgYmVpbSByZWxvYWQgbm9jaG1hbAoKUmVwcm86Ci0gQ2FuIGEgcHJldmlvdXNseSBkZWxldGVkIDIuOTk5IG5vdCBiZSBjcmVhdGVkIGFueW1vcmU/IChkdXJpbmcgSU5TRVJUOiAiaWRlbnRpZmllcnMgY2Fubm90IGJlIGNo'));
	@fwrite($fp, base64_decode('YW5nZWQiKQo='));
	@fclose($fp);
}
if (!is_file('TODO')) {
	warn('File has vanished! Will re-create it: TODO');
	writefile_1();
	if (!is_file('TODO')) {
		warn('File cannot be created (not existing): TODO');
	} else if (sha1_file('TODO') != '4def045f3bad97ddf2763b3607cd40e3a85bf2da') {
		warn('File cannot be created (checksum mismatch): TODO');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('TODO', 0644)) {
		warn('Could not change file permissions of TODO');
	}
} else {
	if (@sha1_file('TODO') !== '4def045f3bad97ddf2763b3607cd40e3a85bf2da') {
		if (@sha1_file('TODO') !== '945f0a7f510e108971afc705aa23fec2a387d9bf') {
			warn('File was modified. Will overwrite the changes now: TODO');
			$tmp = pathinfo('TODO');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('TODO')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('TODO', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('TODO') !== '4def045f3bad97ddf2763b3607cd40e3a85bf2da') {
			warn('File cannot be written (checksum mismatch): TODO');
		}
	}
}

// Files different: includes/classes/OIDplusSqlSlangPlugin.class.php
function writefile_2() {
	@$fp = fopen('includes/classes/OIDplusSqlSlangPlugin.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHANCg0KLyoNCiAqIE9JRHBsdXMgMi4wDQogKiBDb3B5cmlnaHQgMjAxOSBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQNCiAqDQogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsN'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4NCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KICoNCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGlj'));
	@fwrite($fp, base64_decode('ZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlDQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAi'));
	@fwrite($fp, base64_decode('QVMgSVMiIEJBU0lTLA0KICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuDQogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVy'));
	@fwrite($fp, base64_decode('bWlzc2lvbnMgYW5kDQogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCiAqLw0KDQppZiAoIWRlZmluZWQoJ0lOX09JRFBMVVMnKSkgZGllKCk7DQoNCmFic3RyYWN0IGNsYXNzIE9JRHBsdXNTcWxTbGFuZ1BsdWdpbiBleHRlbmRzIE9JRHBsdXNQbHVn'));
	@fwrite($fp, base64_decode('aW4gew0KDQoJcHVibGljIGFic3RyYWN0IHN0YXRpYyBmdW5jdGlvbiBpZCgpOiBzdHJpbmc7DQoNCglwdWJsaWMgYWJzdHJhY3QgZnVuY3Rpb24gbmF0T3JkZXIoJGZpZWxkbmFtZSwgJG9yZGVyPSdhc2MnKTogc3RyaW5nOw0KDQoJcHVibGljIGFic3RyYWN0IGZ1'));
	@fwrite($fp, base64_decode('bmN0aW9uIHNxbERhdGUoKTogc3RyaW5nOw0KDQoJcHVibGljIGFic3RyYWN0IGZ1bmN0aW9uIGRldGVjdCgpOiBib29sOw0KDQoJLy8gUGxlYXNlIG5vdGU6IFRoaXMgaW5zZXJ0X2lkKCkgZnVuY3Rpb24gc2hvdWxkIHVzZSBTUUwgdG8gcmVjZWl2ZQ0KCS8vIHRo'));
	@fwrite($fp, base64_decode('ZSBsYXN0IGluc2VydGVkIElELiBJZiB0aGUgZGF0YWJhc2UgY29ubmVjdGlvbiBwcm92aWRlciAoZS5nLiBQRE8pDQoJLy8gb2ZmZXJzIGEgd2F5IHRvIGZldGNoIHRoZSBsYXN0IGluc2VydGVkIElELCBwbGVhc2UgdXNlIHRoaXMgaW5zdGVhZCENCgkvLyBTbywg'));
	@fwrite($fp, base64_decode('cGxlYXNlIGRvIE5PVCB1c2UgIE9JRHBsdXM6OmRiKCktPmdldFNsYW5nKCktPmluc2VydF9pZCgpDQoJLy8gYnV0IGluc3RlYWQgdXNlICAgICAgICBPSURwbHVzOjpkYigpLT5pbnNlcnRfaWQoKQ0KCS8vIFRoaXMgd2F5LCB0aGUgZGF0YWJhc2UgY29ubmVjdGlv'));
	@fwrite($fp, base64_decode('biBwcm92aWRlciBjYW4gb3ZlcnJpZGUgdGhhdCBmdW5jdGlvbg0KCS8vIHdpdGggdGhlaXIgb3duIG1ldGhvZCBvZiBmZXRjaGluZyB0aGUgbGFzdCBpbnNlcnRlZCBJRC4NCglwdWJsaWMgYWJzdHJhY3QgZnVuY3Rpb24gaW5zZXJ0X2lkKCk6IGludDsNCg0KCXB1'));
	@fwrite($fp, base64_decode('YmxpYyBhYnN0cmFjdCBmdW5jdGlvbiBzZXR1cFNldFRhYmxlUHJlZml4KCRjb250LCAkdGFibGUsICRwcmVmaXgpOiBzdHJpbmc7DQoNCglwdWJsaWMgYWJzdHJhY3QgZnVuY3Rpb24gc2V0dXBDcmVhdGVEYklmTm90RXhpc3RzKCRkYXRhYmFzZSk6IHN0cmluZzsN'));
	@fwrite($fp, base64_decode('Cg0KCXB1YmxpYyBhYnN0cmFjdCBmdW5jdGlvbiBzZXR1cFVzZURhdGFiYXNlKCRkYXRhYmFzZSk6IHN0cmluZzsNCg0KfQ0K'));
	@fclose($fp);
}
if (!is_file('includes/classes/OIDplusSqlSlangPlugin.class.php')) {
	warn('File has vanished! Will re-create it: includes/classes/OIDplusSqlSlangPlugin.class.php');
	writefile_2();
	if (!is_file('includes/classes/OIDplusSqlSlangPlugin.class.php')) {
		warn('File cannot be created (not existing): includes/classes/OIDplusSqlSlangPlugin.class.php');
	} else if (sha1_file('includes/classes/OIDplusSqlSlangPlugin.class.php') != '26598b670dc9d93dc37bd163026ed91bdbe21375') {
		warn('File cannot be created (checksum mismatch): includes/classes/OIDplusSqlSlangPlugin.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/classes/OIDplusSqlSlangPlugin.class.php', 0644)) {
		warn('Could not change file permissions of includes/classes/OIDplusSqlSlangPlugin.class.php');
	}
} else {
	if (@sha1_file('includes/classes/OIDplusSqlSlangPlugin.class.php') !== '26598b670dc9d93dc37bd163026ed91bdbe21375') {
		if (@sha1_file('includes/classes/OIDplusSqlSlangPlugin.class.php') !== '6f7e06430d50b695a1c7891e599981ef2e1554e3') {
			warn('File was modified. Will overwrite the changes now: includes/classes/OIDplusSqlSlangPlugin.class.php');
			$tmp = pathinfo('includes/classes/OIDplusSqlSlangPlugin.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/classes/OIDplusSqlSlangPlugin.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('includes/classes/OIDplusSqlSlangPlugin.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_2();
		if (@sha1_file('includes/classes/OIDplusSqlSlangPlugin.class.php') !== '26598b670dc9d93dc37bd163026ed91bdbe21375') {
			warn('File cannot be written (checksum mismatch): includes/classes/OIDplusSqlSlangPlugin.class.php');
		}
	}
}

// Files different: nginx.conf
function writefile_3() {
	@$fp = fopen('nginx.conf', 'w');
	@fwrite($fp, base64_decode('CiMgVG8gZW5hYmxlIHRoaXMgY29uZmlndXJhdGlvbiBmaWxlIGluIE5HSU5YLCB5b3UKIyBuZWVkIHRvIGluY2x1ZGUgdGhpcyBmaWxlIGluIHlvdXIgbWFzdGVyIGNvbmZpZ3VyYXRpb24gZmlsZQojIHVzaW5nIHRoZSAiaW5jbHVkZSIgY29tbWFuZC4gWW91IHBy'));
	@fwrite($fp, base64_decode('b2JhYmx5IG5lZWQKIyB0byBjaGFuZ2UgInJvb3QiIGxpbmVzLgoKIyBXaGVuIHlvdSBhcmUgZG9uZSwgcGxlYXNlIHZlcmlmeSB0aGF0IHRoZSBmaWxlCiMgaHR0cDovLy4uLi4uL2luY2x1ZGVzL2NvbmZpZ192YWx1ZXMudHh0IGNhbid0IGJlCiMgcmVhZCB1c2lu'));
	@fwrite($fp, base64_decode('ZyB5b3VyIHdlYiBicm93c2VyLgojIFlvdSBzaG91bGQgc2VlIHRoZSBIVFRQIDQwMyBlcnJvciBtZXNzYWdlLgoKIyAtLS0KCiMgSWYgeW91IGdldCBIVFRQIGVycm9yICI1MDIgQmFkIEdhdGV3YXkiIHdpdGggTkdJTlgsIG9yIHRoZSBlcnJvciBsb2cgbWVzc2Fn'));
	@fwrite($fp, base64_decode('ZQojICJ1cHN0cmVhbSBzZW50IHRvbyBiaWcgaGVhZGVyIHdoaWxlIHJlYWRpbmcgcmVzcG9uc2UgaGVhZGVyIGZyb20gdXBzdHJlYW0iLAojIHRoZW4gdGhlIGZvbGxvd2luZyBzZXR0aW5ncyBtaWdodCBzb2x2ZSB0aGUgcHJvYmxlbToKCnByb3h5X2ludGVyY2Vw'));
	@fwrite($fp, base64_decode('dF9lcnJvcnMgb247CmZhc3RjZ2lfYnVmZmVycyAgICAgICAgMTYgIDE2azsKZmFzdGNnaV9idWZmZXJfc2l6ZSAgICAgICAgMzJrOwpwcm94eV9idWZmZXJfc2l6ZSAgICAgICAgIDEyOGs7CnByb3h5X2J1ZmZlcnMgICAgICAgICAgIDQgMjU2azsKcHJveHlfYnVz'));
	@fwrite($fp, base64_decode('eV9idWZmZXJzX3NpemUgICAyNTZrOwoKIyBGb2xkZXIgcmVzdHJpY3Rpb25zCgpsb2NhdGlvbiAvZGV2LyB7Cglyb290IGh0bWw7ICAjIDwtLSBZb3UgcHJvYmFibHkgbmVlZCB0byBhZGp1c3QgdGhpcwoJZGVueSBhbGw7Cn0KCmxvY2F0aW9uIC9pbmNsdWRlcy8g'));
	@fwrite($fp, base64_decode('ewoJcm9vdCBodG1sOyAgIyA8LS0gWW91IHByb2JhYmx5IG5lZWQgdG8gYWRqdXN0IHRoaXMKCWRlbnkgYWxsOwp9Cgpsb2NhdGlvbiAvcGx1Z2lucy9wdWJsaWNQYWdlcy8xMDBfd2hvaXMvd2hvaXMvY2xpLyB7Cglyb290IGh0bWw7ICAjIDwtLSBZb3UgcHJvYmFi'));
	@fwrite($fp, base64_decode('bHkgbmVlZCB0byBhZGp1c3QgdGhpcwoJZGVueSBhbGw7Cn0K'));
	@fclose($fp);
}
if (!is_file('nginx.conf')) {
	warn('File has vanished! Will re-create it: nginx.conf');
	writefile_3();
	if (!is_file('nginx.conf')) {
		warn('File cannot be created (not existing): nginx.conf');
	} else if (sha1_file('nginx.conf') != 'f05b666c452fbd71082dea3b838d9ba9f11b56f9') {
		warn('File cannot be created (checksum mismatch): nginx.conf');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('nginx.conf', 0644)) {
		warn('Could not change file permissions of nginx.conf');
	}
} else {
	if (@sha1_file('nginx.conf') !== 'f05b666c452fbd71082dea3b838d9ba9f11b56f9') {
		if (@sha1_file('nginx.conf') !== 'd7382be17a6c00e8b795dabecee1e8e322e225c8') {
			warn('File was modified. Will overwrite the changes now: nginx.conf');
			$tmp = pathinfo('nginx.conf');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('nginx.conf')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('nginx.conf', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_3();
		if (@sha1_file('nginx.conf') !== 'f05b666c452fbd71082dea3b838d9ba9f11b56f9') {
			warn('File cannot be written (checksum mismatch): nginx.conf');
		}
	}
}

// Files different: setup/sql/struct_mssql.sql
function writefile_4() {
	@$fp = fopen('setup/sql/struct_mssql.sql', 'w');
	@fwrite($fp, base64_decode('U0VUIEFOU0lfTlVMTFMgT04NCkdPDQoNClNFVCBRVU9URURfSURFTlRJRklFUiBPTg0KR08NCg0KU0VUIEFOU0lfUEFERElORyBPTg0KR08NCg0KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQoNCklGIE9CSkVDVF9JRCgn'));
	@fwrite($fp, base64_decode('ZGJvLmdldE9pZEFyYycsICdGTicpIElTIE5PVCBOVUxMIC8qQmFja3dhcmRzIGNvbXBhdGliaWxpdHkqLw0KCURST1AgRlVOQ1RJT04gLypJRiBFWElTVFMqLyBbZGJvXS5bZ2V0T2lkQXJjXTsNCkdPDQpDUkVBVEUgRlVOQ1RJT04gW2Rib10uW2dldE9pZEFyY10g'));
	@fwrite($fp, base64_decode('KEBzdHJMaXN0IHZhcmNoYXIoNTEyKSwgQG1heEFyY0xlbiBpbnQsIEBvY2N1cmVuY2UgaW50KQ0KUkVUVVJOUyB2YXJjaGFyKDUxMikgQVMNCkJFR0lOIA0KCURFQ0xBUkUgQGludFBvcyBpbnQNCg0KCURFQ0xBUkUgQGNudCBpbnQNCglTRVQgQGNudCA9IDANCg0K'));
	@fwrite($fp, base64_decode('CWlmIFNVQlNUUklORyhAc3RyTGlzdCwgMSwgNCkgPD4gJ29pZDonDQoJYmVnaW4NCgkJUkVUVVJOICcnDQoJZW5kDQoNCglTRVQgQHN0ckxpc3QgPSBSSUdIVChAc3RyTGlzdCwgTEVOKEBzdHJMaXN0KS00KQ0KDQoJV0hJTEUgQ0hBUklOREVYKCcuJyxAc3RyTGlz'));
	@fwrite($fp, base64_decode('dCkgPiAwDQoJQkVHSU4NCgkJU0VUIEBpbnRQb3M9Q0hBUklOREVYKCcuJyxAc3RyTGlzdCkgDQoJCVNFVCBAY250ID0gQGNudCArIDENCgkJSUYgQGNudCA9IEBvY2N1cmVuY2UNCgkJQkVHSU4NCgkJCVNFVCBAc3RyTGlzdCA9IExFRlQoQHN0ckxpc3QsQGludFBv'));
	@fwrite($fp, base64_decode('cy0xKQ0KCQkJUkVUVVJOIFJFUExJQ0FURSgnMCcsIEBtYXhBcmNMZW4tbGVuKEBzdHJMaXN0KSkgKyBAc3RyTGlzdA0KCQlFTkQNCgkJU0VUIEBzdHJMaXN0ID0gUklHSFQoQHN0ckxpc3QsIExFTihAc3RyTGlzdCktQGludFBvcykNCglFTkQNCglJRiBMRU4oQHN0'));
	@fwrite($fp, base64_decode('ckxpc3QpID4gMA0KCUJFR0lODQoJCVNFVCBAY250ID0gQGNudCArIDENCgkJSUYgQGNudCA9IEBvY2N1cmVuY2UNCgkJQkVHSU4NCgkJCVJFVFVSTiBSRVBMSUNBVEUoJzAnLCBAbWF4QXJjTGVuLWxlbihAc3RyTGlzdCkpICsgQHN0ckxpc3QNCgkJRU5EDQoJRU5E'));
	@fwrite($fp, base64_decode('DQoNCglSRVRVUk4gUkVQTElDQVRFKCcwJywgQG1heEFyY0xlbikNCkVORA0KR08NCg0KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQoNCklGIE9CSkVDVF9JRCgnZGJvLmNvbmZpZycsICdVJykgSVMgTk9UIE5VTEwgLypC'));
	@fwrite($fp, base64_decode('YWNrd2FyZHMgY29tcGF0aWJpbGl0eSovDQoJRFJPUCBUQUJMRSAvKklGIEVYSVNUUyovIFtkYm9dLltjb25maWddOw0KQ1JFQVRFIFRBQkxFIFtkYm9dLltjb25maWddKA0KCVtuYW1lXSBbdmFyY2hhcl0oNTApIE5PVCBOVUxMLA0KCVt2YWx1ZV0gW3RleHRdIE5P'));
	@fwrite($fp, base64_decode('VCBOVUxMLA0KCVtkZXNjcmlwdGlvbl0gW3ZhcmNoYXJdKDI1NSkgTlVMTCwNCglbcHJvdGVjdGVkXSBbYml0XSBOT1QgTlVMTCBERUZBVUxUICgnMCcpLA0KCVt2aXNpYmxlXSBbYml0XSBOT1QgTlVMTCBERUZBVUxUICgnMCcpLA0KCUNPTlNUUkFJTlQgW1BLX2Nv'));
	@fwrite($fp, base64_decode('bmZpZ10gUFJJTUFSWSBLRVkgQ0xVU1RFUkVEIA0KCSgNCgkJW25hbWVdIEFTQw0KCSkNCikNCkdPDQoNCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLw0KDQpJRiBPQkpFQ1RfSUQoJ2Riby5hc24xaWQnLCAnVScpIElTIE5P'));
	@fwrite($fp, base64_decode('VCBOVUxMIC8qQmFja3dhcmRzIGNvbXBhdGliaWxpdHkqLw0KCURST1AgVEFCTEUgLypJRiBFWElTVFMqLyBbZGJvXS5bYXNuMWlkXTsNCkNSRUFURSBUQUJMRSBbZGJvXS5bYXNuMWlkXSgNCglbbGZkXSBbaW50XSBJREVOVElUWSgxLDEpIE5PVCBOVUxMLA0KCVtv'));
	@fwrite($fp, base64_decode('aWRdIFt2YXJjaGFyXSgyNTUpIE5PVCBOVUxMLA0KCVtuYW1lXSBbdmFyY2hhcl0oMjU1KSBOT1QgTlVMTCwNCglbc3RhbmRhcmRpemVkXSBbYml0XSBOT1QgTlVMTCBDT05TVFJBSU5UIFtERl9fYXNuMWlkX19zdGFuZGFyZGl6ZWRdICBERUZBVUxUICgnMCcpLA0K'));
	@fwrite($fp, base64_decode('CVt3ZWxsX2tub3duXSBbYml0XSBOT1QgTlVMTCBDT05TVFJBSU5UIFtERl9fYXNuMWlkX193ZWxsX2tub3duXSAgREVGQVVMVCAoJzAnKSwNCiAJQ09OU1RSQUlOVCBbUEtfYXNuMWlkXSBQUklNQVJZIEtFWSBDTFVTVEVSRUQgDQoJKA0KCQlbbGZkXSBBU0MNCgkp'));
	@fwrite($fp, base64_decode('LA0KCUlOREVYIFtJWF9hc24xaWRfb2lkX25hbWVdIE5PTkNMVVNURVJFRA0KCSgNCgkJW29pZF0gQVNDLA0KCQlbbmFtZV0gQVNDDQoJKQ0KKQ0KR08NCg0KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQoNCklGIE9CSkVD'));
	@fwrite($fp, base64_decode('VF9JRCgnZGJvLmlyaScsICdVJykgSVMgTk9UIE5VTEwgLypCYWNrd2FyZHMgY29tcGF0aWJpbGl0eSovDQoJRFJPUCBUQUJMRSAvKklGIEVYSVNUUyovIFtkYm9dLltpcmldOw0KQ1JFQVRFIFRBQkxFIFtkYm9dLltpcmldKA0KCVtsZmRdIFtpbnRdIElERU5USVRZ'));
	@fwrite($fp, base64_decode('KDEsMSkgTk9UIE5VTEwsDQoJW29pZF0gW3ZhcmNoYXJdKDI1NSkgTk9UIE5VTEwsDQoJW25hbWVdIFt2YXJjaGFyXSgyNTUpIE5PVCBOVUxMLA0KCVtsb25nYXJjXSBbYml0XSBOT1QgTlVMTCBDT05TVFJBSU5UIFtERl9faXJpX19sb25nYXJjXSAgREVGQVVMVCAo'));
	@fwrite($fp, base64_decode('JzAnKSwNCglbd2VsbF9rbm93bl0gW2JpdF0gTk9UIE5VTEwgQ09OU1RSQUlOVCBbREZfX2lyaV9fd2VsbF9rbm93bl0gIERFRkFVTFQgKCcwJyksDQoJQ09OU1RSQUlOVCBbUEtfaXJpXSBQUklNQVJZIEtFWSBDTFVTVEVSRUQgDQoJKA0KCQlbbGZkXSBBU0MNCgkp'));
	@fwrite($fp, base64_decode('LA0KCUlOREVYIFtJWF9pcmlfb2lkX25hbWVdIE5PTkNMVVNURVJFRA0KCSgNCgkJW29pZF0gQVNDLA0KCQlbbmFtZV0gQVNDDQoJKQ0KKQ0KR08NCg0KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQoNCklGIE9CSkVDVF9J'));
	@fwrite($fp, base64_decode('RCgnZGJvLm9iamVjdHMnLCAnVScpIElTIE5PVCBOVUxMIC8qQmFja3dhcmRzIGNvbXBhdGliaWxpdHkqLw0KCURST1AgVEFCTEUgLypJRiBFWElTVFMqLyBbZGJvXS5bb2JqZWN0c107DQpDUkVBVEUgVEFCTEUgW2Rib10uW29iamVjdHNdKA0KCVtpZF0gW3ZhcmNo'));
	@fwrite($fp, base64_decode('YXJdKDI1NSkgTk9UIE5VTEwsDQoJW3BhcmVudF0gW3ZhcmNoYXJdKDI1NSkgTlVMTCwNCglbdGl0bGVdIFt2YXJjaGFyXSgyNTUpIE5PVCBOVUxMLA0KCVtkZXNjcmlwdGlvbl0gW3RleHRdIE5PVCBOVUxMLA0KCVtyYV9lbWFpbF0gW3ZhcmNoYXJdKDEwMCkgTlVM'));
	@fwrite($fp, base64_decode('TCwNCglbY29uZmlkZW50aWFsXSBbYml0XSBOT1QgTlVMTCwNCglbY3JlYXRlZF0gW2RhdGV0aW1lXSBOVUxMLA0KCVt1cGRhdGVkXSBbZGF0ZXRpbWVdIE5VTEwsDQoJW2NvbW1lbnRdIFt2YXJjaGFyXSgyNTUpIE5VTEwsDQoJQ09OU1RSQUlOVCBbUEtfb2JqZWN0'));
	@fwrite($fp, base64_decode('c10gUFJJTUFSWSBLRVkgQ0xVU1RFUkVEIA0KCSgNCgkJW2lkXSBBU0MNCgkpLA0KCUlOREVYIFtJWF9vYmplY3RzX3BhcmVudF0gTk9OQ0xVU1RFUkVEIA0KCSgNCgkJW3BhcmVudF0gQVNDDQoJKSwNCglJTkRFWCBbSVhfb2JqZWN0c19yYV9lbWFpbF0gTk9OQ0xV'));
	@fwrite($fp, base64_decode('U1RFUkVEDQoJKA0KCQlbcmFfZW1haWxdIEFTQw0KCSkNCikNCkdPDQoNCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLw0KDQpJRiBPQkpFQ1RfSUQoJ2Riby5yYScsICdVJykgSVMgTk9UIE5VTEwgLypCYWNrd2FyZHMgY29t'));
	@fwrite($fp, base64_decode('cGF0aWJpbGl0eSovDQoJRFJPUCBUQUJMRSAvKklGIEVYSVNUUyovIFtkYm9dLltyYV07DQpDUkVBVEUgVEFCTEUgW2Rib10uW3JhXSgNCglbcmFfaWRdIFtpbnRdIElERU5USVRZKDEsMSkgTk9UIE5VTEwsDQoJW2VtYWlsXSBbdmFyY2hhcl0oMTAwKSBOT1QgTlVM'));
	@fwrite($fp, base64_decode('TCwNCglbcmFfbmFtZV0gW3ZhcmNoYXJdKDEwMCkgTk9UIE5VTEwsDQoJW3BlcnNvbmFsX25hbWVdIFt2YXJjaGFyXSgxMDApIE5PVCBOVUxMLA0KCVtvcmdhbml6YXRpb25dIFt2YXJjaGFyXSgxMDApIE5PVCBOVUxMLA0KCVtvZmZpY2VdIFt2YXJjaGFyXSgxMDAp'));
	@fwrite($fp, base64_decode('IE5PVCBOVUxMLA0KCVtzdHJlZXRdIFt2YXJjaGFyXSgxMDApIE5PVCBOVUxMLA0KCVt6aXBfdG93bl0gW3ZhcmNoYXJdKDEwMCkgTk9UIE5VTEwsDQoJW2NvdW50cnldIFt2YXJjaGFyXSgxMDApIE5PVCBOVUxMLA0KCVtwaG9uZV0gW3ZhcmNoYXJdKDEwMCkgTk9U'));
	@fwrite($fp, base64_decode('IE5VTEwsDQoJW21vYmlsZV0gW3ZhcmNoYXJdKDEwMCkgTk9UIE5VTEwsDQoJW2ZheF0gW3ZhcmNoYXJdKDEwMCkgTk9UIE5VTEwsDQoJW3ByaXZhY3ldIFtiaXRdIE5PVCBOVUxMIENPTlNUUkFJTlQgW0RGX19yYV9fcHJpdmFjeV0gIERFRkFVTFQgKCcwJyksDQoJ'));
	@fwrite($fp, base64_decode('W3NhbHRdIFt2YXJjaGFyXSgxMDApIE5PVCBOVUxMLA0KCVthdXRoa2V5XSBbdmFyY2hhcl0oMTAwKSBOT1QgTlVMTCwNCglbcmVnaXN0ZXJlZF0gW2RhdGV0aW1lXSBOVUxMLA0KCVt1cGRhdGVkXSBbZGF0ZXRpbWVdIE5VTEwsDQoJW2xhc3RfbG9naW5dIFtkYXRl'));
	@fwrite($fp, base64_decode('dGltZV0gTlVMTCwNCglDT05TVFJBSU5UIFtQS19yYV0gUFJJTUFSWSBLRVkgQ0xVU1RFUkVEIA0KCSgNCgkJW3JhX2lkXSBBU0MNCgkpLA0KCUNPTlNUUkFJTlQgW0lYX3JhX2VtYWlsXSBVTklRVUUgKA0KCQlbZW1haWxdIEFTQw0KCSkNCikNCkdPDQoNCi8qKioq'));
	@fwrite($fp, base64_decode('KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLw0KDQpJRiBPQkpFQ1RfSUQoJ2Riby5sb2cnLCAnVScpIElTIE5PVCBOVUxMIC8qQmFja3dhcmRzIGNvbXBhdGliaWxpdHkqLw0KCURST1AgVEFCTEUgLypJRiBFWElTVFMqLyBbZGJvXS5b'));
	@fwrite($fp, base64_decode('bG9nXTsNCkNSRUFURSBUQUJMRSBbZGJvXS5bbG9nXSgNCglbaWRdIFtpbnRdIElERU5USVRZKDEsMSkgTk9UIE5VTEwsDQoJW3VuaXhfdHNdIFtiaWdpbnRdIE5PVCBOVUxMLA0KCVthZGRyXSBbdmFyY2hhcl0oNDUpIE5PVCBOVUxMLA0KCVtldmVudF0gW3RleHRd'));
	@fwrite($fp, base64_decode('IE5PVCBOVUxMLA0KCUNPTlNUUkFJTlQgW1BLX2xvZ10gUFJJTUFSWSBLRVkgQ0xVU1RFUkVEIA0KCSgNCgkJW2lkXSBBU0MNCgkpDQopDQpHTw0KDQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8NCg0KSUYgT0JKRUNUX0lE'));
	@fwrite($fp, base64_decode('KCdkYm8ubG9nX3VzZXInLCAnVScpIElTIE5PVCBOVUxMIC8qQmFja3dhcmRzIGNvbXBhdGliaWxpdHkqLw0KCURST1AgVEFCTEUgLypJRiBFWElTVFMqLyBbZGJvXS5bbG9nX3VzZXJdOw0KQ1JFQVRFIFRBQkxFIFtkYm9dLltsb2dfdXNlcl0oDQoJW2lkXSBbaW50'));
	@fwrite($fp, base64_decode('XSBJREVOVElUWSgxLDEpIE5PVCBOVUxMLA0KCVtsb2dfaWRdIFtpbnRdIE5PVCBOVUxMLA0KCVt1c2VybmFtZV0gW3ZhcmNoYXJdKDI1NSkgTk9UIE5VTEwsDQoJQ09OU1RSQUlOVCBbUEtfbG9nX3VzZXJdIFBSSU1BUlkgS0VZIENMVVNURVJFRCANCgkoDQoJCVtp'));
	@fwrite($fp, base64_decode('ZF0gQVNDDQoJKSwNCglJTkRFWCBbSVhfbG9nX3VzZXJfbG9nX2lkXSBOT05DTFVTVEVSRUQNCgkoDQoJCVtsb2dfaWRdIEFTQw0KCSksDQoJSU5ERVggW0lYX2xvZ191c2VyX3VzZXJuYW1lXSBOT05DTFVTVEVSRUQNCgkoDQoJCVt1c2VybmFtZV0gQVNDDQoJKSwN'));
	@fwrite($fp, base64_decode('CglDT05TVFJBSU5UIFtJWF9sb2dfb2JqZWN0X2xvZ19pZF91c2VybmFtZV0gVU5JUVVFDQoJKA0KCQlbbG9nX2lkXSwNCgkJW3VzZXJuYW1lXQ0KCSkNCikNCkdPDQoNCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLw0KDQpJ'));
	@fwrite($fp, base64_decode('RiBPQkpFQ1RfSUQoJ2Riby5sb2dfb2JqZWN0JywgJ1UnKSBJUyBOT1QgTlVMTCAvKkJhY2t3YXJkcyBjb21wYXRpYmlsaXR5Ki8NCglEUk9QIFRBQkxFIC8qSUYgRVhJU1RTKi8gW2Rib10uW2xvZ19vYmplY3RdOw0KQ1JFQVRFIFRBQkxFIFtkYm9dLltsb2dfb2Jq'));
	@fwrite($fp, base64_decode('ZWN0XSgNCglbaWRdIFtpbnRdIElERU5USVRZKDEsMSkgTk9UIE5VTEwsDQoJW2xvZ19pZF0gW2ludF0gTk9UIE5VTEwsDQoJW29iamVjdF0gW3ZhcmNoYXJdKDI1NSkgTk9UIE5VTEwsDQoJQ09OU1RSQUlOVCBbUEtfbG9nX29iamVjdF0gUFJJTUFSWSBLRVkgQ0xV'));
	@fwrite($fp, base64_decode('U1RFUkVEIA0KCSgNCgkJW2lkXSBBU0MNCgkpLA0KCUlOREVYIFtJWF9sb2dfb2JqZWN0X2xvZ19pZF0gTk9OQ0xVU1RFUkVEDQoJKA0KCQlbbG9nX2lkXSBBU0MNCgkpLA0KCUlOREVYIFtJWF9sb2dfb2JqZWN0X29iamVjdF0gTk9OQ0xVU1RFUkVEDQoJKA0KCQlb'));
	@fwrite($fp, base64_decode('b2JqZWN0XSBBU0MNCgkpLA0KCUNPTlNUUkFJTlQgW0lYX2xvZ19vYmplY3RfbG9nX2lkX29iamVjdF0gVU5JUVVFDQoJKA0KCQlbbG9nX2lkXSwNCgkJW29iamVjdF0NCgkpDQopDQpHTw0KDQoNCi8qKioqKiogU2V0IGRhdGFiYXNlIHZlcnNpb24gKioqKioqLw0K'));
	@fwrite($fp, base64_decode('DQpJTlNFUlQgSU5UTyBbY29uZmlnXSAobmFtZSwgZGVzY3JpcHRpb24sIHZhbHVlLCBwcm90ZWN0ZWQsIHZpc2libGUpIFZBTFVFUyAoJ2RhdGFiYXNlX3ZlcnNpb24nLCAnVmVyc2lvbiBvZiB0aGUgZGF0YWJhc2UgdGFibGVzJywgJzIwMycsICcxJywgJzAnKTsN'));
	@fwrite($fp, base64_decode('Cg0KU0VUIEFOU0lfUEFERElORyBPRkYNCkdPDQo='));
	@fclose($fp);
}
if (!is_file('setup/sql/struct_mssql.sql')) {
	warn('File has vanished! Will re-create it: setup/sql/struct_mssql.sql');
	writefile_4();
	if (!is_file('setup/sql/struct_mssql.sql')) {
		warn('File cannot be created (not existing): setup/sql/struct_mssql.sql');
	} else if (sha1_file('setup/sql/struct_mssql.sql') != 'b220f50a2c0fb2f424f49e4fc92d9251d67429e3') {
		warn('File cannot be created (checksum mismatch): setup/sql/struct_mssql.sql');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('setup/sql/struct_mssql.sql', 0644)) {
		warn('Could not change file permissions of setup/sql/struct_mssql.sql');
	}
} else {
	if (@sha1_file('setup/sql/struct_mssql.sql') !== 'b220f50a2c0fb2f424f49e4fc92d9251d67429e3') {
		if (@sha1_file('setup/sql/struct_mssql.sql') !== 'd40e83ef4424c158671cd35c53f183927275ead9') {
			warn('File was modified. Will overwrite the changes now: setup/sql/struct_mssql.sql');
			$tmp = pathinfo('setup/sql/struct_mssql.sql');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('setup/sql/struct_mssql.sql')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('setup/sql/struct_mssql.sql', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_4();
		if (@sha1_file('setup/sql/struct_mssql.sql') !== 'b220f50a2c0fb2f424f49e4fc92d9251d67429e3') {
			warn('File cannot be written (checksum mismatch): setup/sql/struct_mssql.sql');
		}
	}
}

// File deleted: NGINX_TROUBLESHOOTING
@unlink('NGINX_TROUBLESHOOTING');
if (is_file('NGINX_TROUBLESHOOTING')) {
	warn('File could not be deleted: NGINX_TROUBLESHOOTING');
}


file_put_contents('oidplus_version.txt', "Revision 276\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 276') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

