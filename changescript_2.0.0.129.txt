<?php /* <ViaThinkSoftSignature>
qzidWEE+j+VzO7kIqGspUbtb842rSBzqeq4ogUJoQN3vsC8KK4XX+W/TwhFTMnS1L
39xBKoWNiq7uyrRD8eZnZZhnfLEmAcLxbbRDHwifvBnEzkgFLlPei11tB/NeYYxb8
1H2Op6MHwaRaNlJi/w64G0x+jSZQtVwRPOI+HRt8iSc3kqHep8Nzob7IjedMYiOZs
fiVMQ2ffRBFg0lvzDivZG9fPewZ1+FgQQbHh8ZKumdpRD+bD5a6L+IjKSmP/I2/Ys
SVvk/Ad6C8/xIXGjGfCuABfr1u8UElgvjPQ3HWUPgXJ3Wn4cNsUmFOZCuSFH/qIur
ub1dMHoaOmf8rZxvMGN6BC6nYP8iZ7krD7vuRGggFKkekikYvQY47SLOere0S62a4
FnWHTTQqrDUrcDk4yYTEEaNjTyiPBYw3Isk0IvQS9UFaoum0aYmtlS8o70nQvo6X5
ZQFIUSq4hIwd2B/86a15b/hfYmFtx2N5h/o3Si2BaVgbx/BWNmSPGwi3mipYUvscu
SDOUAgLc/aFc9kEgb2vnv1pdPXRai3TkgK6pMJvfwPONTV06wyeZbshftSDhyj4yQ
EZOs0C0v5YIYyLk4nej4f/+IkaEEoGgwh+Tjygm/s9/aCheUxZcaULu8gDXmodbPa
zbNTkuYAiZhWg50N39Y7CuPLpqUoaIU0IE379MAkdYdBFrfjUs2e6iqWprv1emSCL
zlRhlG/gvnTqZ5F/on/dOt426EEqkGvvuntjZyG9uMuw68bxxEAFCyomyMK55ag9u
xMCITmgv50M17iEuE+xN38g12cyBTSlHFr8D3LhFrwGb773dFQwIiW5afBNFh2sA3
Ux7mZ5h3DQto33HW0d34ZnernfqgPBQ6X2NgUxUZ1ODE/GKi7D/EKLHr7c8XNFj2O
020rZo3iR62i6z7jgxx8xffAH8nAej8iaFCQvYiv+Z4VHn6nTKJXqBrNWT2/husqz
ZyY7SjARUInMuQwOUfwT5XQWcVgbYbFQ3As43ilmhUCYzPkkAXnGqLmmnIrFZZ5N0
ef6jB/SFgRWGRVhJRAPPDk2K/tonnrH/1kWcqJdwNbX75vboTzjRmQJRmCDvKyi2A
ktnMknZE7a28Wsx6aEvy1aK/2DHUSXHWzBraiIvT48gBRvCiLEdjvRRVLVEvatDEV
6O9JArMbK5Suip2sOdutMatJviOtiLrQSi93bELZGe9XNWgT1IVRML/IvDG+g3FKh
8i+swcgATeyTT3AgAsnRgQZ3t5rKmOBpi3jcJQ6oWr8mleGbTiKjh9f9V9P7JydOq
Mjhng6PSBd0ZAZgdbOeAA2KGWscCYdGb5g+9Hh2udLLubM0rjNfTqm4OjyHEE+Zk+
g==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 128') {
	err('This update can only be applied to OIDplus version 2.0.0.128!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: includes/classes/OIDplusGui.class.php
function writefile_1() {
	@$fp = fopen('includes/classes/OIDplusGui.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmlmICghZGVmaW5lZCgnSU5fT0lEUExVUycpKSBkaWUoKTsKCmNsYXNzIE9JRHBsdXNHdWkgewoKCXByaXZhdGUgc3RhdGljICRjcnVkQ291bnRlciA9IDA7CgoJcHJvdGVjdGVkIHN0YXRpYyBmdW5j'));
	@fwrite($fp, base64_decode('dGlvbiBvYmpEZXNjcmlwdGlvbigkaHRtbCkgewoJCS8vIFdlIGFsbG93IEhUTUwsIGJ1dCBubyBoYWNraW5nCgkJJGh0bWwgPSBhbnRpX3hzcygkaHRtbCk7CgoJCXJldHVybiB0cmltX2JyKCRodG1sKTsKCX0KCglwcm90ZWN0ZWQgc3RhdGljIGZ1bmN0aW9uIHNo'));
	@fwrite($fp, base64_decode('b3dDcnVkKCRwYXJlbnQ9J29pZDonKSB7CgkJJGl0ZW1zX3RvdGFsID0gMDsKCQkkaXRlbXNfaGlkZGVuID0gMDsKCgkJJG9ialBhcmVudCA9IE9JRHBsdXNPYmplY3Q6OnBhcnNlKCRwYXJlbnQpOwoKCQkkb3V0cHV0ID0gJyc7CgkJJG91dHB1dCAuPSAnPGRpdiBj'));
	@fwrite($fp, base64_decode('bGFzcz0iY29udGFpbmVyIGJveCI+PGRpdiBpZD0ic3Vib2lkX3RhYmxlIiBjbGFzcz0idGFibGUtcmVzcG9uc2l2ZSI+JzsKCQkkb3V0cHV0IC49ICc8dGFibGUgY2xhc3M9InRhYmxlIHRhYmxlLWJvcmRlcmVkIHRhYmxlLXN0cmlwZWQiPic7CgkJJG91dHB1dCAu'));
	@fwrite($fp, base64_decode('PSAnCTx0cj4nOwoJCSRvdXRwdXQgLj0gJwkgICAgIDx0aD5JRCcuKCgkb2JqUGFyZW50OjpucygpID09ICdnczEnKSA/ICcgKHdpdGhvdXQgY2hlY2sgZGlnaXQpJyA6ICcnKS4nPC90aD4nOwoJCWlmICgkb2JqUGFyZW50OjpucygpID09ICdvaWQnKSAkb3V0cHV0'));
	@fwrite($fp, base64_decode('IC49ICcJICAgICA8dGg+QVNOLjEgSURzIChjb21tYSBzZXAuKTwvdGg+JzsKCQlpZiAoJG9ialBhcmVudDo6bnMoKSA9PSAnb2lkJykgJG91dHB1dCAuPSAnCSAgICAgPHRoPklSSSBJRHMgKGNvbW1hIHNlcC4pPC90aD4nOwoJCSRvdXRwdXQgLj0gJwkgICAgIDx0'));
	@fwrite($fp, base64_decode('aD5SQTwvdGg+JzsKCQlpZiAoJG9ialBhcmVudC0+dXNlckhhc1dyaXRlUmlnaHRzKCkpIHsKCQkJJG91dHB1dCAuPSAnCSAgICAgPHRoPkhpZGU8L3RoPic7CgkJCSRvdXRwdXQgLj0gJwkgICAgIDx0aD5VcGRhdGU8L3RoPic7CgkJCSRvdXRwdXQgLj0gJwkgICAg'));
	@fwrite($fp, base64_decode('IDx0aD5EZWxldGU8L3RoPic7CgkJfQoJCSRvdXRwdXQgLj0gJwkgICAgIDx0aD5DcmVhdGVkPC90aD4nOwoJCSRvdXRwdXQgLj0gJwkgICAgIDx0aD5VcGRhdGVkPC90aD4nOwoJCSRvdXRwdXQgLj0gJwk8L3RyPic7CgoJCSRyZXN1bHQgPSBPSURwbHVzOjpkYigp'));
	@fwrite($fp, base64_decode('LT5xdWVyeSgic2VsZWN0IG8uKiwgci5yYV9uYW1lIGZyb20gIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguIm9iamVjdHMgbyBsZWZ0IGpvaW4gIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguInJhIHIgb24gci5lbWFpbCA9IG8ucmFfZW1haWwgd2hlcmUgcGFy'));
	@fwrite($fp, base64_decode('ZW50ID0gJyIuT0lEcGx1czo6ZGIoKS0+cmVhbF9lc2NhcGVfc3RyaW5nKCRwYXJlbnQpLiInIG9yZGVyIGJ5ICIuT0lEcGx1czo6ZGIoKS0+bmF0T3JkZXIoJ2lkJykpOwoJCXdoaWxlICgkcm93ID0gT0lEcGx1czo6ZGIoKS0+ZmV0Y2hfb2JqZWN0KCRyZXN1bHQp'));
	@fwrite($fp, base64_decode('KSB7CgkJCSRvYmogPSBPSURwbHVzT2JqZWN0OjpwYXJzZSgkcm93LT5pZCk7CgoJCQkkaXRlbXNfdG90YWwrKzsKCQkJaWYgKCEkb2JqLT51c2VySGFzUmVhZFJpZ2h0cygpKSB7CgkJCQkkaXRlbXNfaGlkZGVuKys7CgkJCQljb250aW51ZTsKCQkJfQoKCQkJJHNo'));
	@fwrite($fp, base64_decode('b3dfaWQgPSAkb2JqLT5jcnVkU2hvd0lkKCRvYmpQYXJlbnQpOwoKCQkJJGFzbjFpZHMgPSBhcnJheSgpOwoJCQkkcmVzMiA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgbmFtZSBmcm9tICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJhc24xaWQgd2hl'));
	@fwrite($fp, base64_decode('cmUgb2lkID0gJyIuT0lEcGx1czo6ZGIoKS0+cmVhbF9lc2NhcGVfc3RyaW5nKCRyb3ctPmlkKS4iJyBvcmRlciBieSBsZmQiKTsKCQkJd2hpbGUgKCRyb3cyID0gT0lEcGx1czo6ZGIoKS0+ZmV0Y2hfYXJyYXkoJHJlczIpKSB7CgkJCQkkYXNuMWlkc1tdID0gJHJv'));
	@fwrite($fp, base64_decode('dzJbJ25hbWUnXTsKCQkJfQoKCQkJJGlyaXMgPSBhcnJheSgpOwoJCQkkcmVzMiA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgbmFtZSBmcm9tICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJpcmkgd2hlcmUgb2lkID0gJyIuT0lEcGx1czo6ZGIoKS0+'));
	@fwrite($fp, base64_decode('cmVhbF9lc2NhcGVfc3RyaW5nKCRyb3ctPmlkKS4iJyBvcmRlciBieSBsZmQiKTsKCQkJd2hpbGUgKCRyb3cyID0gT0lEcGx1czo6ZGIoKS0+ZmV0Y2hfYXJyYXkoJHJlczIpKSB7CgkJCQkkaXJpc1tdID0gJHJvdzJbJ25hbWUnXTsKCQkJfQoKCQkJJG91dHB1dCAu'));
	@fwrite($fp, base64_decode('PSAnPHRyPic7CgkJCSRvdXRwdXQgLj0gJyAgICAgPHRkPjxhIGhyZWY9Ij9nb3RvPScudXJsZW5jb2RlKCRyb3ctPmlkKS4nIiBvbmNsaWNrPSJvcGVuQW5kU2VsZWN0Tm9kZSgnLmpzX2VzY2FwZSgkcm93LT5pZCkuJywgJy5qc19lc2NhcGUoJHBhcmVudCkuJyk7'));
	@fwrite($fp, base64_decode('IHJldHVybiBmYWxzZTsiPicuaHRtbGVudGl0aWVzKCRzaG93X2lkKS4nPC9hPjwvdGQ+JzsKCQkJaWYgKCRvYmpQYXJlbnQtPnVzZXJIYXNXcml0ZVJpZ2h0cygpKSB7CgkJCQlpZiAoJG9iajo6bnMoKSA9PSAnb2lkJykgewoJCQkJCSRvdXRwdXQgLj0gJyAgICAg'));
	@fwrite($fp, base64_decode('PHRkPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iYXNuMWlkc18nLiRyb3ctPmlkLiciIHZhbHVlPSInLmltcGxvZGUoJywgJywgJGFzbjFpZHMpLiciPjwvdGQ+JzsKCQkJCQkkb3V0cHV0IC49ICcgICAgIDx0ZD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImlyaXNfJy4k'));
	@fwrite($fp, base64_decode('cm93LT5pZC4nIiB2YWx1ZT0iJy5pbXBsb2RlKCcsICcsICRpcmlzKS4nIj48L3RkPic7CgkJCQl9CgkJCQkkb3V0cHV0IC49ICcgICAgIDx0ZD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9InJhX2VtYWlsXycuJHJvdy0+aWQuJyIgdmFsdWU9IicuJHJvdy0+cmFfZW1h'));
	@fwrite($fp, base64_decode('aWwuJyI+PC90ZD4nOwoJCQkJJG91dHB1dCAuPSAnICAgICA8dGQ+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iaGlkZV8nLiRyb3ctPmlkLiciICcuKCRyb3ctPmNvbmZpZGVudGlhbCA/ICdjaGVja2VkJyA6ICcnKS4nPjwvdGQ+JzsKCQkJCSRvdXRwdXQgLj0g'));
	@fwrite($fp, base64_decode('JyAgICAgPHRkPjxidXR0b24gdHlwZT0iYnV0dG9uIiBuYW1lPSJ1cGRhdGVfJy4kcm93LT5pZC4nIiBpZD0idXBkYXRlXycuJHJvdy0+aWQuJyIgY2xhc3M9ImJ0biBidG4tc3VjY2VzcyBidG4teHMgdXBkYXRlIiBvbmNsaWNrPSJjcnVkQWN0aW9uVXBkYXRlKCcu'));
	@fwrite($fp, base64_decode('anNfZXNjYXBlKCRyb3ctPmlkKS4nLCAnLmpzX2VzY2FwZSgkcGFyZW50KS4nKSI+VXBkYXRlPC9idXR0b24+PC90ZD4nOwoJCQkJJG91dHB1dCAuPSAnICAgICA8dGQ+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG5hbWU9ImRlbGV0ZV8nLiRyb3ctPmlkLiciIGlkPSJk'));
	@fwrite($fp, base64_decode('ZWxldGVfJy4kcm93LT5pZC4nIiBjbGFzcz0iYnRuIGJ0bi1kYW5nZXIgYnRuLXhzIGRlbGV0ZSIgb25jbGljaz0iY3J1ZEFjdGlvbkRlbGV0ZSgnLmpzX2VzY2FwZSgkcm93LT5pZCkuJywgJy5qc19lc2NhcGUoJHBhcmVudCkuJykiPkRlbGV0ZTwvYnV0dG9uPjwv'));
	@fwrite($fp, base64_decode('dGQ+JzsKCQkJCSRvdXRwdXQgLj0gJyAgICAgPHRkPicub2lkcGx1c19mb3JtYXRkYXRlKCRyb3ctPmNyZWF0ZWQpLic8L3RkPic7CgkJCQkkb3V0cHV0IC49ICcgICAgIDx0ZD4nLm9pZHBsdXNfZm9ybWF0ZGF0ZSgkcm93LT51cGRhdGVkKS4nPC90ZD4nOwoJCQl9'));
	@fwrite($fp, base64_decode('IGVsc2UgewoJCQkJaWYgKCRhc24xaWRzID09ICcnKSAkYXNuMWlkcyA9ICc8aT4obm9uZSk8L2k+JzsKCQkJCWlmICgkaXJpcyA9PSAnJykgJGlyaXMgPSAnPGk+KG5vbmUpPC9pPic7CgkJCQlpZiAoJG9iajo6bnMoKSA9PSAnb2lkJykgewoJCQkJCSRhc24xaWRz'));
	@fwrite($fp, base64_decode('X2V4dCA9IGFycmF5KCk7CgkJCQkJZm9yZWFjaCAoJGFzbjFpZHMgYXMgJGFzbjFpZCkgewoJCQkJCQkkYXNuMWlkc19leHRbXSA9ICc8YSBocmVmPSI/Z290bz0nLnVybGVuY29kZSgkcm93LT5pZCkuJyIgb25jbGljaz0ib3BlbkFuZFNlbGVjdE5vZGUoJy5qc19l'));
	@fwrite($fp, base64_decode('c2NhcGUoJHJvdy0+aWQpLicsICcuanNfZXNjYXBlKCRwYXJlbnQpLicpOyByZXR1cm4gZmFsc2U7Ij4nLiRhc24xaWQuJzwvYT4nOwoJCQkJCX0KCQkJCQkkb3V0cHV0IC49ICcgICAgIDx0ZD4nLmltcGxvZGUoJywgJywgJGFzbjFpZHNfZXh0KS4nPC90ZD4nOwoJ'));
	@fwrite($fp, base64_decode('CQkJCSRvdXRwdXQgLj0gJyAgICAgPHRkPicuaW1wbG9kZSgnLCAnLCAkaXJpcykuJzwvdGQ+JzsKCQkJCX0KCQkJCSRvdXRwdXQgLj0gJyAgICAgPHRkPjxhICcub2lkcGx1c19saW5rKCdvaWRwbHVzOnJhaW5mbyQnLnN0cl9yZXBsYWNlKCdAJywnJicsJHJvdy0+'));
	@fwrite($fp, base64_decode('cmFfZW1haWwpKS4nPicuaHRtbGVudGl0aWVzKGVtcHR5KCRyb3ctPnJhX25hbWUpID8gc3RyX3JlcGxhY2UoJ0AnLCcmJywkcm93LT5yYV9lbWFpbCkgOiAkcm93LT5yYV9uYW1lKS4nPC9hPjwvdGQ+JzsKCQkJCSRvdXRwdXQgLj0gJyAgICAgPHRkPicub2lkcGx1'));
	@fwrite($fp, base64_decode('c19mb3JtYXRkYXRlKCRyb3ctPmNyZWF0ZWQpLic8L3RkPic7CgkJCQkkb3V0cHV0IC49ICcgICAgIDx0ZD4nLm9pZHBsdXNfZm9ybWF0ZGF0ZSgkcm93LT51cGRhdGVkKS4nPC90ZD4nOwoJCQl9CgkJCSRvdXRwdXQgLj0gJzwvdHI+JzsKCQl9CgoJCSRyZXN1bHQg'));
	@fwrite($fp, base64_decode('PSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0ICogZnJvbSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4ib2JqZWN0cyB3aGVyZSBpZCA9ICciLk9JRHBsdXM6OmRiKCktPnJlYWxfZXNjYXBlX3N0cmluZygkcGFyZW50KS4iJyIpOwoJCSRwYXJlbnRfcmFf'));
	@fwrite($fp, base64_decode('ZW1haWwgPSBPSURwbHVzOjpkYigpLT5udW1fcm93cygkcmVzdWx0KSA+IDAgPyBPSURwbHVzOjpkYigpLT5mZXRjaF9vYmplY3QoJHJlc3VsdCktPnJhX2VtYWlsIDogJyc7CgoJCWlmICgkb2JqUGFyZW50LT51c2VySGFzV3JpdGVSaWdodHMoKSkgewoJCQkkb3V0'));
	@fwrite($fp, base64_decode('cHV0IC49ICc8dHI+JzsKCQkJJHByZWZpeCA9IGlzX251bGwoJG9ialBhcmVudCkgPyAnJyA6ICRvYmpQYXJlbnQtPmNydWRJbnNlcnRQcmVmaXgoKTsKCQkJaWYgKCRvYmpQYXJlbnQ6Om5zKCkgPT0gJ29pZCcpIHsKCQkJCSRvdXRwdXQgLj0gJyAgICAgPHRkPicu'));
	@fwrite($fp, base64_decode('JHByZWZpeC4nIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iaWQiIHZhbHVlPSIiIHN0eWxlPSJ3aWR0aDoxMDAlO21pbi13aWR0aDo1MHB4Ij48L3RkPic7IC8vIFRPRE86IGlkZWUgY2xhc3NuYW1lIHZlcmdlYmVuLCB6LkIuICJPSUQiIHVuZCBkYW5uIG1pdCBlaW5l'));
	@fwrite($fp, base64_decode('bSBvaWQtc3BlemlmaXNjaGVuIGNzcyBkaWUgYnJlaXRlIGVpbnN0ZWxsYmFyIG1hY2hlbiwgc29taXQgaGF0IGRhcyBwbHVnaW4gbWVociBrb250cm9sbGUg/GJlciBkYXMgYXVzc2VoZW4gdW5kIGRpZSBtaW5kZXN0YnJlaXRlbgoJCQl9IGVsc2UgewoJCQkJJG91'));
	@fwrite($fp, base64_decode('dHB1dCAuPSAnICAgICA8dGQ+Jy4kcHJlZml4LicgPGlucHV0IHR5cGU9InRleHQiIGlkPSJpZCIgdmFsdWU9IiI+PC90ZD4nOwoJCQl9CgkJCWlmICgkb2JqUGFyZW50OjpucygpID09ICdvaWQnKSAkb3V0cHV0IC49ICcgICAgIDx0ZD48aW5wdXQgdHlwZT0idGV4'));
	@fwrite($fp, base64_decode('dCIgaWQ9ImFzbjFpZHMiIHZhbHVlPSIiPjwvdGQ+JzsKCQkJaWYgKCRvYmpQYXJlbnQ6Om5zKCkgPT0gJ29pZCcpICRvdXRwdXQgLj0gJyAgICAgPHRkPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iaXJpcyIgdmFsdWU9IiI+PC90ZD4nOwoJCQkkb3V0cHV0IC49ICcg'));
	@fwrite($fp, base64_decode('ICAgIDx0ZD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9InJhX2VtYWlsIiB2YWx1ZT0iJy5odG1sZW50aXRpZXMoJHBhcmVudF9yYV9lbWFpbCkuJyI+PC90ZD4nOwoJCQkkb3V0cHV0IC49ICcgICAgIDx0ZD48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJoaWRlIj48'));
	@fwrite($fp, base64_decode('L3RkPic7CgkJCSRvdXRwdXQgLj0gJyAgICAgPHRkPjxidXR0b24gdHlwZT0iYnV0dG9uIiBuYW1lPSJpbnNlcnQiIGlkPSJpbnNlcnQiIGNsYXNzPSJidG4gYnRuLXN1Y2Nlc3MgYnRuLXhzIHVwZGF0ZSIgb25jbGljaz0iY3J1ZEFjdGlvbkluc2VydCgnLmpzX2Vz'));
	@fwrite($fp, base64_decode('Y2FwZSgkcGFyZW50KS4nKSI+SW5zZXJ0PC9idXR0b24+PC90ZD4nOwoJCQkkb3V0cHV0IC49ICcgICAgIDx0ZD48L3RkPic7CgkJCSRvdXRwdXQgLj0gJyAgICAgPHRkPjwvdGQ+JzsKCQkJJG91dHB1dCAuPSAnICAgICA8dGQ+PC90ZD4nOwoJCQkkb3V0cHV0IC49'));
	@fwrite($fp, base64_decode('ICc8L3RyPic7CgkJfSBlbHNlIHsKCQkJaWYgKCRpdGVtc190b3RhbC0kaXRlbXNfaGlkZGVuID09IDApIHsKCQkJCSRjb2xzID0gKCRvYmpQYXJlbnQ6Om5zKCkgPT0gJ29pZCcpID8gNyA6IDU7CgkJCQkkb3V0cHV0IC49ICc8dHI+PHRkIGNvbHNwYW49IicuJGNv'));
	@fwrite($fp, base64_decode('bHMuJyI+Tm8gaXRlbXMgYXZhaWxhYmxlPC90ZD48L3RyPic7CgkJCX0KCQl9CgoJCSRvdXRwdXQgLj0gJzwvdGFibGU+JzsKCQkkb3V0cHV0IC49ICc8L2Rpdj48L2Rpdj4nOwoKCQlpZiAoJGl0ZW1zX2hpZGRlbiA9PSAxKSB7CgkJCSRvdXRwdXQgLj0gJzxwPicu'));
	@fwrite($fp, base64_decode('JGl0ZW1zX2hpZGRlbi4nIGl0ZW0gaXMgaGlkZGVuLiBQbGVhc2UgPGEgJy5vaWRwbHVzX2xpbmsoJ29pZHBsdXM6bG9naW4nKS4nPmxvZyBpbjwvYT4gdG8gc2VlIGl0LjwvcD4nOwoJCX0gZWxzZSBpZiAoJGl0ZW1zX2hpZGRlbiA+IDEpIHsKCQkJJG91dHB1dCAu'));
	@fwrite($fp, base64_decode('PSAnPHA+Jy4kaXRlbXNfaGlkZGVuLicgaXRlbXMgYXJlIGhpZGRlbi4gUGxlYXNlIDxhICcub2lkcGx1c19saW5rKCdvaWRwbHVzOmxvZ2luJykuJz5sb2cgaW48L2E+IHRvIHNlZSB0aGVtLjwvcD4nOwoJCX0KCgkJcmV0dXJuICRvdXRwdXQ7Cgl9CgoJcHVibGlj'));
	@fwrite($fp, base64_decode('IHN0YXRpYyAkZXhjbHVkZV90aW55bWNlX3BsdWdpbnMgPSBhcnJheSgnZnVsbHBhZ2UnLCAnYmJjb2RlJyk7CgoJcHJvdGVjdGVkIHN0YXRpYyBmdW5jdGlvbiBzaG93TUNFKCRuYW1lLCAkY29udGVudCkgewoJCSRtY2VfcGx1Z2lucyA9IGFycmF5KCk7CgkJZm9y'));
	@fwrite($fp, base64_decode('ZWFjaCAoZ2xvYihfX0RJUl9fIC4gJy8uLi8uLi8zcC90aW55bWNlL3BsdWdpbnMvKicpIGFzICRtKSB7IC8vICovCgkJCSRtY2VfcGx1Z2luc1tdID0gYmFzZW5hbWUoJG0pOwoJCX0KCgkJZm9yZWFjaCAoc2VsZjo6JGV4Y2x1ZGVfdGlueW1jZV9wbHVnaW5zIGFz'));
	@fwrite($fp, base64_decode('ICRleGNsdWRlKSB7CgkJCSRpbmRleCA9IGFycmF5X3NlYXJjaCgkZXhjbHVkZSwgJG1jZV9wbHVnaW5zKTsKCQkJaWYgKCRpbmRleCAhPT0gZmFsc2UpIHVuc2V0KCRtY2VfcGx1Z2luc1skaW5kZXhdKTsKCQl9CgoJCSRvdXQgPSAnPHNjcmlwdD4KCQkJCXRpbnlt'));
	@fwrite($fp, base64_decode('Y2UucmVtb3ZlKCIjJy4kbmFtZS4nIik7CgkJCQl0aW55bWNlLmluaXQoewoJCQkJCXNlbGVjdG9yOiAiIycuJG5hbWUuJyIsCgkJCQkJaGVpZ2h0OiAyMDAsCgkJCQkJc3RhdHVzYmFyOiBmYWxzZSwKLy8JCQkJCW1lbnViYXI6ZmFsc2UsCi8vCQkJCQl0b29sYmFy'));
	@fwrite($fp, base64_decode('OiAidW5kbyByZWRvIHwgc3R5bGVzZWxlY3QgfCBib2xkIGl0YWxpYyB8IGFsaWdubGVmdCBhbGlnbmNlbnRlciBhbGlnbnJpZ2h0IGFsaWduanVzdGlmeSB8IGJ1bGxpc3QgbnVtbGlzdCBvdXRkZW50IGluZGVudCB8IHRhYmxlIHwgZm9udHNpemVzZWxlY3QiLAoJ'));
	@fwrite($fp, base64_decode('CQkJCXRvb2xiYXI6ICJ1bmRvIHJlZG8gfCBzdHlsZXNlbGVjdCB8IGJvbGQgaXRhbGljIHVuZGVybGluZSBmb3JlY29sb3IgfCBidWxsaXN0IG51bWxpc3QgfCBvdXRkZW50IGluZGVudCB8IHRhYmxlIHwgZm9udHNpemVzZWxlY3QiLAoJCQkJCXBsdWdpbnM6ICIn'));
	@fwrite($fp, base64_decode('LmltcGxvZGUoJyAnLCAkbWNlX3BsdWdpbnMpLiciLAoJCQkJCW1vYmlsZTogewoJCQkJCQl0aGVtZTogIm1vYmlsZSIsCgkJCQkJCXRvb2xiYXI6ICJ1bmRvIHJlZG8gfCBzdHlsZXNlbGVjdCB8IGJvbGQgaXRhbGljIHVuZGVybGluZSBmb3JlY29sb3IgfCBidWxs'));
	@fwrite($fp, base64_decode('aXN0IG51bWxpc3QgfCBvdXRkZW50IGluZGVudCB8IHRhYmxlIHwgZm9udHNpemVzZWxlY3QiLAoJCQkJCQlwbHVnaW5zOiAiJy5pbXBsb2RlKCcgJywgJG1jZV9wbHVnaW5zKS4nIgoJCQkJCX0KCgkJCQl9KTsKCQkJPC9zY3JpcHQ+JzsKCgkJJGNvbnRlbnQgPSBo'));
	@fwrite($fp, base64_decode('dG1sZW50aXRpZXMoJGNvbnRlbnQpOyAvLyBGb3Igc29tZSByZWFzb24sIGlmIHdlIHdhbnQgdG8gZGlzcGxheSB0aGUgdGV4dCAiPHh5ej4iIGluIFRpbnlNQ0UsIHdlIG5lZWQgdG8gZG91YmxlLWVuY29kZSB0aGluZ3MhICZsdDsgd2lsbCBub3QgYmUgYWNjZXB0'));
	@fwrite($fp, base64_decode('ZWQsIHdlIG5lZWQgJmFtcDtsdDsgLi4uIHdoeT8KCgkJJG91dCAuPSAnPHRleHRhcmVhIG5hbWU9IicuaHRtbGVudGl0aWVzKCRuYW1lKS4nIiBpZD0iJy5odG1sZW50aXRpZXMoJG5hbWUpLiciPicudHJpbSgkY29udGVudCkuJzwvdGV4dGFyZWE+PGJyPic7CgoJ'));
	@fwrite($fp, base64_decode('CXJldHVybiAkb3V0OwoJfQoKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2VuZXJhdGVDb250ZW50UGFnZSgkaWQpIHsKCQkkb3V0ID0gYXJyYXkoKTsKCgkJJGhhbmRsZWQgPSBmYWxzZTsKCQkkb3V0Wyd0aXRsZSddID0gJyc7CgkJJG91dFsnaWNvbiddID0gJyc7'));
	@fwrite($fp, base64_decode('CgkJJG91dFsndGV4dCddID0gJyc7CgoJCS8vID09PSBQbHVnaW5zID09PQoKCQlmb3JlYWNoIChPSURwbHVzOjpnZXRQYWdlUGx1Z2lucygnKicpIGFzICRwbHVnaW4pIHsKCQkJJHBsdWdpbi0+Z3VpKCRpZCwgJG91dCwgJGhhbmRsZWQpOwoJCX0KCgkJLy8gPT09'));
	@fwrite($fp, base64_decode('IEV2ZXJ5dGhpbmcgZWxzZSAob2JqZWN0cykgPT09CgoJCWlmICghJGhhbmRsZWQpIHsKCQkJdHJ5IHsKCQkJCSRvYmogPSBPSURwbHVzT2JqZWN0OjpwYXJzZSgkaWQpOwoJCQl9IGNhdGNoIChFeGNlcHRpb24gJGUpIHsKCQkJCSRvdXRbJ3RpdGxlJ10gPSAnRXJy'));
	@fwrite($fp, base64_decode('b3InOwoJCQkJJG91dFsnaWNvbiddID0gJ2ltZy9lcnJvcl9iaWcucG5nJzsKCQkJCSRvdXRbJ3RleHQnXSA9IGh0bWxlbnRpdGllcygkZS0+Z2V0TWVzc2FnZSgpKTsKCQkJCXJldHVybiAkb3V0OwoJCQl9CgoJCQlpZiAoKCFpc19udWxsKCRvYmopKSAmJiAoISRv'));
	@fwrite($fp, base64_decode('YmotPnVzZXJIYXNSZWFkUmlnaHRzKCkpKSB7CgkJCQkkb3V0Wyd0aXRsZSddID0gJ0FjY2VzcyBkZW5pZWQnOwoJCQkJJG91dFsnaWNvbiddID0gJ2ltZy9lcnJvcl9iaWcucG5nJzsKCQkJCSRvdXRbJ3RleHQnXSA9ICc8cD5QbGVhc2UgPGEgJy5vaWRwbHVzX2xp'));
	@fwrite($fp, base64_decode('bmsoJ29pZHBsdXM6bG9naW4nKS4nPmxvZyBpbjwvYT4gdG8gcmVjZWl2ZSBpbmZvcm1hdGlvbiBhYm91dCB0aGlzIG9iamVjdC48L3A+JzsKCQkJCXJldHVybiAkb3V0OwoJCQl9CgoJCQkkcmVzID0gT0lEcGx1czo6ZGIoKS0+cXVlcnkoInNlbGVjdCAqIGZyb20g'));
	@fwrite($fp, base64_decode('Ii5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguIm9iamVjdHMgd2hlcmUgaWQgPSAnIi5PSURwbHVzOjpkYigpLT5yZWFsX2VzY2FwZV9zdHJpbmcoJGlkKS4iJyIpOwoJCQkkcm93ID0gT0lEcGx1czo6ZGIoKS0+ZmV0Y2hfYXJyYXkoJHJlcyk7CgoJCQlpZiAoZW1w'));
	@fwrite($fp, base64_decode('dHkoJHJvd1sndGl0bGUnXSkpIHsKCQkJCSRvdXRbJ3RpdGxlJ10gPSBpc19udWxsKCRvYmopID8gJGlkIDogJG9iai0+ZGVmYXVsdFRpdGxlKCk7CgkJCX0gZWxzZSB7CgkJCQkkb3V0Wyd0aXRsZSddID0gJHJvd1sndGl0bGUnXTsKCQkJfQoJCQkkb3V0WydpY29u'));
	@fwrite($fp, base64_decode('J10gPSAnaW1nL29iamVjdF9iaWcucG5nJzsKCgkJCWlmIChpc3NldCgkcm93WydkZXNjcmlwdGlvbiddKSkgewoJCQkJaWYgKGVtcHR5KCRyb3dbJ2Rlc2NyaXB0aW9uJ10pKSB7CgkJCQkJaWYgKGVtcHR5KCRyb3dbJ3RpdGxlJ10pKSB7CgkJCQkJCSRkZXNjID0g'));
	@fwrite($fp, base64_decode('JzxwPjxpPk5vIGRlc2NyaXB0aW9uIGZvciB0aGlzIG9iamVjdCBhdmFpbGFibGU8L2k+PC9wPic7CgkJCQkJfSBlbHNlIHsKCQkJCQkJJGRlc2MgPSAkcm93Wyd0aXRsZSddOwoJCQkJCX0KCQkJCX0gZWxzZSB7CgkJCQkJJGRlc2MgPSBPSURwbHVzR3VpOjpvYmpE'));
	@fwrite($fp, base64_decode('ZXNjcmlwdGlvbigkcm93WydkZXNjcmlwdGlvbiddKTsKCQkJCX0KCgkJCQlpZiAoJG9iai0+dXNlckhhc1dyaXRlUmlnaHRzKCkpIHsKCQkJCQkkcmFuZCA9ICsrc2VsZjo6JGNydWRDb3VudGVyOwoJCQkJCSRkZXNjID0gJzxub3NjcmlwdD48cD48Yj5Zb3UgbmVl'));
	@fwrite($fp, base64_decode('ZCB0byBlbmFibGUgSmF2YVNjcmlwdCB0byBlZGl0IHRpdGxlIG9yIGRlc2NyaXB0aW9uIG9mIHRoaXMgb2JqZWN0LjwvYj48L3A+Jy4kZGVzYy4nPC9ub3NjcmlwdD4nOwoJCQkJCSRkZXNjIC49ICc8ZGl2IGNsYXNzPSJjb250YWluZXIgYm94IiBzdHlsZT0iZGlz'));
	@fwrite($fp, base64_decode('cGxheTpub25lIiBpZD0iZGVzY2JveF8nLiRyYW5kLiciPic7CgkJCQkJJGRlc2MgLj0gJ1RpdGxlOiA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0idGl0bGUiIGlkPSJ0aXRsZWVkaXQiIHZhbHVlPSInLmh0bWxlbnRpdGllcygkcm93Wyd0aXRsZSddKS4nIj48YnI+'));
	@fwrite($fp, base64_decode('PGJyPkRlc2NyaXB0aW9uOjxicj4nOwoJCQkJCSRkZXNjIC49IHNlbGY6OnNob3dNQ0UoJ2Rlc2NyaXB0aW9uJywgJHJvd1snZGVzY3JpcHRpb24nXSk7CgkJCQkJJGRlc2MgLj0gJzxidXR0b24gdHlwZT0iYnV0dG9uIiBuYW1lPSJ1cGRhdGVfZGVzYyIgaWQ9InVw'));
	@fwrite($fp, base64_decode('ZGF0ZV9kZXNjIiBjbGFzcz0iYnRuIGJ0bi1zdWNjZXNzIGJ0bi14cyB1cGRhdGUiIG9uY2xpY2s9InVwZGF0ZURlc2MoKSI+VXBkYXRlIGRlc2NyaXB0aW9uPC9idXR0b24+JzsKCQkJCQkkZGVzYyAuPSAnPC9kaXY+JzsKCQkJCQkkZGVzYyAuPSAnPHNjcmlwdD5k'));
	@fwrite($fp, base64_decode('b2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZGVzY2JveF8nLiRyYW5kLiciKS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjs8L3NjcmlwdD4nOwoJCQkJfQoJCQl9IGVsc2UgewoJCQkJJGRlc2MgPSAnJzsKCQkJfQoKCQkJJHBhcmVudCA9IG51bGw7CgoJCQkkbWF0Y2hl'));
	@fwrite($fp, base64_decode('c19hbnlfcmVnaXN0ZXJlZF90eXBlID0gZmFsc2U7CgkJCWZvcmVhY2ggKE9JRHBsdXM6OmdldFJlZ2lzdGVyZWRPYmplY3RUeXBlcygpIGFzICRvdCkgewoJCQkJaWYgKCRvYmogPSAkb3Q6OnBhcnNlKCRpZCkpIHsKCQkJCQkkbWF0Y2hlc19hbnlfcmVnaXN0ZXJl'));
	@fwrite($fp, base64_decode('ZF90eXBlID0gdHJ1ZTsKCQkJCQlpZiAoKE9JRHBsdXM6OmRiKCktPm51bV9yb3dzKCRyZXMpID09IDApICYmICEkb2JqLT5pc1Jvb3QoKSl7CgkJCQkJCWh0dHBfcmVzcG9uc2VfY29kZSg0MDQpOwoJCQkJCQkkb3V0Wyd0aXRsZSddID0gJ09iamVjdCBub3QgZm91'));
	@fwrite($fp, base64_decode('bmQnOwoJCQkJCQkkb3V0WydpY29uJ10gPSAnaW1nL2Vycm9yX2JpZy5wbmcnOwoJCQkJCQkkb3V0Wyd0ZXh0J10gPSAnVGhlIG9iamVjdCA8Y29kZT4nLmh0bWxlbnRpdGllcygkaWQpLic8L2NvZGU+IHdhcyBub3QgZm91bmQgaW4gdGhpcyBkYXRhYmFzZS4nOwoJ'));
	@fwrite($fp, base64_decode('CQkJCQlyZXR1cm4gJG91dDsKCQkJCQl9IGVsc2UgewoJCQkJCQkkb2JqLT5nZXRDb250ZW50UGFnZSgkb3V0Wyd0aXRsZSddLCAkb3V0Wyd0ZXh0J10sICRvdXRbJ2ljb24nXSk7CgkJCQkJCSRwYXJlbnQgPSAkb2JqLT5nZXRQYXJlbnQoKTsKCQkJCQkJYnJlYWs7'));
	@fwrite($fp, base64_decode('CgkJCQkJfQoJCQkJfQoJCQl9CgkJCWlmICghJG1hdGNoZXNfYW55X3JlZ2lzdGVyZWRfdHlwZSkgewoJCQkJaHR0cF9yZXNwb25zZV9jb2RlKDQwNCk7CgkJCQkkb3V0Wyd0aXRsZSddID0gJ09iamVjdCBub3QgZm91bmQnOwoJCQkJJG91dFsnaWNvbiddID0gJ2lt'));
	@fwrite($fp, base64_decode('Zy9lcnJvcl9iaWcucG5nJzsKCQkJCSRvdXRbJ3RleHQnXSA9ICdUaGUgb2JqZWN0IDxjb2RlPicuaHRtbGVudGl0aWVzKCRpZCkuJzwvY29kZT4gd2FzIG5vdCBmb3VuZCBpbiB0aGlzIGRhdGFiYXNlLic7CgkJCQlyZXR1cm4gJG91dDsKCQkJfQoKCQkJaWYgKCRw'));
	@fwrite($fp, base64_decode('YXJlbnQpIHsKCQkJCWlmICgkcGFyZW50LT5pc1Jvb3QoKSkgewoKCQkJCQkkcGFyZW50X2xpbmtfdGV4dCA9ICRwYXJlbnQtPm9iamVjdFR5cGVUaXRsZSgpOwoJCQkJCSRvdXRbJ3RleHQnXSA9ICc8cD48YSAnLm9pZHBsdXNfbGluaygkcGFyZW50LT5yb290KCkp'));
	@fwrite($fp, base64_decode('Lic+PGltZyBzcmM9ImltZy9hcnJvd19iYWNrLnBuZyIgd2lkdGg9IjE2Ij4gUGFyZW50IG5vZGU6ICcuaHRtbGVudGl0aWVzKCRwYXJlbnRfbGlua190ZXh0KS4nPC9hPjwvcD4nIC4gJG91dFsndGV4dCddOwoKCQkJCX0gZWxzZSB7CgkJCQkJJHJlc18gPSBPSURw'));
	@fwrite($fp, base64_decode('bHVzOjpkYigpLT5xdWVyeSgic2VsZWN0ICogZnJvbSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4ib2JqZWN0cyB3aGVyZSBpZCA9ICciLk9JRHBsdXM6OmRiKCktPnJlYWxfZXNjYXBlX3N0cmluZygkcGFyZW50LT5ub2RlSWQoKSkuIiciKTsKCQkJCQkkcm93'));
	@fwrite($fp, base64_decode('XyA9IE9JRHBsdXM6OmRiKCktPmZldGNoX2FycmF5KCRyZXNfKTsKCgkJCQkJJHBhcmVudF90aXRsZSA9ICRyb3dfWyd0aXRsZSddOwoJCQkJCWlmIChlbXB0eSgkcGFyZW50X3RpdGxlKSAmJiAoJHBhcmVudC0+bnMoKSA9PSAnb2lkJykpIHsKCQkJCQkJJHJlc18g'));
	@fwrite($fp, base64_decode('PSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0IG5hbWUgZnJvbSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4iYXNuMWlkIHdoZXJlIG9pZCA9ICciLk9JRHBsdXM6OmRiKCktPnJlYWxfZXNjYXBlX3N0cmluZygkcGFyZW50LT5ub2RlSWQoKSkuIiciKTsK'));
	@fwrite($fp, base64_decode('CQkJCQkJJHJvd18gPSBPSURwbHVzOjpkYigpLT5mZXRjaF9hcnJheSgkcmVzXyk7CgkJCQkJCSRwYXJlbnRfdGl0bGUgPSAkcm93X1snbmFtZSddOyAvLyBUT0RPOiBtdWx0aXBsZSBBU04xIGlkcz8KCQkJCQl9CgoJCQkJCSRwYXJlbnRfbGlua190ZXh0ID0gZW1w'));
	@fwrite($fp, base64_decode('dHkoJHBhcmVudF90aXRsZSkgPyBleHBsb2RlKCc6JywkcGFyZW50LT5ub2RlSWQoKSlbMV0gOiAkcGFyZW50X3RpdGxlLicgKCcuZXhwbG9kZSgnOicsJHBhcmVudC0+bm9kZUlkKCkpWzFdLicpJzsKCgkJCQkJJG91dFsndGV4dCddID0gJzxwPjxhICcub2lkcGx1'));
	@fwrite($fp, base64_decode('c19saW5rKCRwYXJlbnQtPm5vZGVJZCgpKS4nPjxpbWcgc3JjPSJpbWcvYXJyb3dfYmFjay5wbmciIHdpZHRoPSIxNiI+IFBhcmVudCBub2RlOiAnLmh0bWxlbnRpdGllcygkcGFyZW50X2xpbmtfdGV4dCkuJzwvYT48L3A+JyAuICRvdXRbJ3RleHQnXTsKCQkJCX0K'));
	@fwrite($fp, base64_decode('CQkJfSBlbHNlIHsKCQkJCSRwYXJlbnRfbGlua190ZXh0ID0gJ0dvIGJhY2sgdG8gZnJvbnQgcGFnZSc7CgkJCQkkb3V0Wyd0ZXh0J10gPSAnPHA+PGEgJy5vaWRwbHVzX2xpbmsoJ29pZHBsdXM6c3lzdGVtJykuJz48aW1nIHNyYz0iaW1nL2Fycm93X2JhY2sucG5n'));
	@fwrite($fp, base64_decode('IiB3aWR0aD0iMTYiPiAnLmh0bWxlbnRpdGllcygkcGFyZW50X2xpbmtfdGV4dCkuJzwvYT48L3A+JyAuICRvdXRbJ3RleHQnXTsKCQkJfQoKCQkJaWYgKHN0cnBvcygkb3V0Wyd0ZXh0J10sICclJURFU0MlJScpICE9PSBmYWxzZSkKCQkJCSRvdXRbJ3RleHQnXSA9'));
	@fwrite($fp, base64_decode('IHN0cl9yZXBsYWNlKCclJURFU0MlJScsICAgICRkZXNjLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRvdXRbJ3RleHQnXSk7CgkJCWlmIChzdHJwb3MoJG91dFsndGV4dCddLCAnJSVDUlVEJSUnKSAhPT0gZmFsc2UpCgkJCQkkb3V0Wyd0ZXh0J10gPSBz'));
	@fwrite($fp, base64_decode('dHJfcmVwbGFjZSgnJSVDUlVEJSUnLCAgICBzZWxmOjpzaG93Q3J1ZCgkaWQpLCAgICAgICAgICAgICAgICAkb3V0Wyd0ZXh0J10pOwoJCQlpZiAoc3RycG9zKCRvdXRbJ3RleHQnXSwgJyUlUkFfSU5GTyUlJykgIT09IGZhbHNlKQoJCQkJJG91dFsndGV4dCddID0g'));
	@fwrite($fp, base64_decode('c3RyX3JlcGxhY2UoJyUlUkFfSU5GTyUlJywgT0lEcGx1c1BhZ2VQdWJsaWNSYUluZm86OnNob3dSYUluZm8oJHJvd1sncmFfZW1haWwnXSksICRvdXRbJ3RleHQnXSk7CgoJCQlmb3JlYWNoIChPSURwbHVzOjpnZXRQYWdlUGx1Z2lucygncHVibGljJykgYXMgJHBs'));
	@fwrite($fp, base64_decode('dWdpbikgJHBsdWdpbi0+bW9kaWZ5Q29udGVudCgkaWQsICRvdXRbJ3RpdGxlJ10sICRvdXRbJ2ljb24nXSwgJG91dFsndGV4dCddKTsKCQkJZm9yZWFjaCAoT0lEcGx1czo6Z2V0UGFnZVBsdWdpbnMoJ3JhJykgICAgIGFzICRwbHVnaW4pICRwbHVnaW4tPm1vZGlm'));
	@fwrite($fp, base64_decode('eUNvbnRlbnQoJGlkLCAkb3V0Wyd0aXRsZSddLCAkb3V0WydpY29uJ10sICRvdXRbJ3RleHQnXSk7CgkJCWZvcmVhY2ggKE9JRHBsdXM6OmdldFBhZ2VQbHVnaW5zKCdhZG1pbicpICBhcyAkcGx1Z2luKSAkcGx1Z2luLT5tb2RpZnlDb250ZW50KCRpZCwgJG91dFsn'));
	@fwrite($fp, base64_decode('dGl0bGUnXSwgJG91dFsnaWNvbiddLCAkb3V0Wyd0ZXh0J10pOwoJCX0gZWxzZSB7CgkJCS8vIE90aGVyIHBhZ2VzIChzZWFyY2gsIHdob2lzLCBldGMuKQoJCQkvKgoJCQlpZiAoJGlkICE9ICdvaWRwbHVzOnN5c3RlbScpIHsKCQkJCSRwYXJlbnRfbGlua190ZXh0'));
	@fwrite($fp, base64_decode('ID0gJ0dvIGJhY2sgdG8gZnJvbnQgcGFnZSc7CgkJCQkkb3V0Wyd0ZXh0J10gPSAnPHA+PGEgJy5vaWRwbHVzX2xpbmsoJ29pZHBsdXM6c3lzdGVtJykuJz48aW1nIHNyYz0iaW1nL2Fycm93X2JhY2sucG5nIiB3aWR0aD0iMTYiPiAnLmh0bWxlbnRpdGllcygkcGFy'));
	@fwrite($fp, base64_decode('ZW50X2xpbmtfdGV4dCkuJzwvYT48L3A+JyAuICRvdXRbJ3RleHQnXTsKCQkJfQoJCQkqLwoJCX0KCgkJcmV0dXJuICRvdXQ7Cgl9Cn0K'));
	@fclose($fp);
}
if (!is_file('includes/classes/OIDplusGui.class.php')) {
	warn('File has vanished! Will re-create it: includes/classes/OIDplusGui.class.php');
	writefile_1();
	if (!is_file('includes/classes/OIDplusGui.class.php')) {
		warn('File cannot be created (not existing): includes/classes/OIDplusGui.class.php');
	} else if (sha1_file('includes/classes/OIDplusGui.class.php') != '722574e539860e31af084fab4157ee467d5ab600') {
		warn('File cannot be created (checksum mismatch): includes/classes/OIDplusGui.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/classes/OIDplusGui.class.php', 0644)) {
		warn('Could not change file permissions of includes/classes/OIDplusGui.class.php');
	}
} else {
	if (@sha1_file('includes/classes/OIDplusGui.class.php') !== '722574e539860e31af084fab4157ee467d5ab600') {
		if (@sha1_file('includes/classes/OIDplusGui.class.php') !== '1ed8d86e33fc6e5d639bcdbf8a333f0368819571') {
			warn('File was modified. Will overwrite the changes now: includes/classes/OIDplusGui.class.php');
			$tmp = pathinfo('includes/classes/OIDplusGui.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/classes/OIDplusGui.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('includes/classes/OIDplusGui.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('includes/classes/OIDplusGui.class.php') !== '722574e539860e31af084fab4157ee467d5ab600') {
			warn('File cannot be written (checksum mismatch): includes/classes/OIDplusGui.class.php');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 129\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 129') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

