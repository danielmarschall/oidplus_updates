<?php /* <ViaThinkSoftSignature>
IbCeuZreBpDk04l5TwvbD0aISrCw9QsFpd9I3KBeJUmw4g+DKqW8kddGC70zQVAvk
ct2P+xyK/x47DUNUlPFwhqNypw4/hC5+9OtZs9zvPdhBA+JbLskemoPjUwRQZCsr+
HMrGpJQrc+ipAfeLtLlJp7fD0XbgjUyaylKjE6WQonSU1MMLfkvMXrh4tOLxTL8ZR
i2zRZidET62guPrKS7nbTtguJlWMEZ7gBaPDJfIneXMz2dOOpUt4e2578zkWyZ/ib
knkKt9amocS/3l8F5Q/6YjQfjnq5O5WEw+C4BNvvYlXAtWKkFjf2HSTFQulY4ZRRy
nn9X7XeBtEp4zETMryZ9tJjqPDp0LD5RjoULPoFURWfb6HdCezZ/EZrdHPJ9Q87C7
MRCdjDAyoEijo4XbbRbAyFuBkqpHt0+zq2WeMl76ZUl2aIKmLbMQSadWqevBUr0XQ
wGX43DO65BZCvVO7KDOPvVP3bkMX5B6LXNp2pUpYoGZHi5iU84VXw+QArPD19Qy+q
RCQ3A6JfM9s4Ml2OEwxhCGdb+1FWamp9jBbBZgRXhwSERwJ63kcKJnV27e/+s8xXg
LsgXQfbbSwT1v+kuUyHK3jUre7dVIvXrfM8dLOfIYAJRROgXz78fI+ynSBA7+lPjF
OuqDJfemYCipOUqK3hmwuAu8hrsP4RL5JghqCqoa5Q6xV0LPTnz7XRvGJyY3vfb7+
ch2dsHwiTc3w3cQ81SEyu6iAdI1bvYYyGFlnPzKACkTGMorjC4+KHkBsudF3UIsK0
hR03sDH1fh6OF6UifS/U8ZDTHojhd2us5l9SB/DlUC+27tCyxSQEIyeqF6VeozbvX
3eAybZIu0/nwUCnlS9hgG0/vl5RNNMgmZXFMo1NExOA+1UmVwcVDFg2VXgKc6yLml
A4zpMrXlaIuGcOK99ibXg8/o0Sx7DqFSnRc50whzAVaVJsZgQuWXLefIfEyh15wbr
ckmCBnvTP+nql6HGmX8xGnq70WRg/C+kj7RlPtoDPkHVrS0BlhP5t4t3BXeU4khFl
O+mhpByGcktx+bSWvVYpQHtpH8QfuFotge+w5ttlSTsAlhEI37oDjTAKEOS37Y5mR
e9yo8X1bZVCvR2k/fnoVymUa6QXODKVf0GT+A7yZQeNNXb0SyLyZlo5SkjLg6bmvB
uMU7Ff2AxUxuQ1fcireSuZh4vs6T4+hKW+gFvEsusjb9O6vVWT6W4BdICKJ4O7ZL9
d/sffH/8qJQFGpNAVYqICGzYzLSfSU661k/rKpsulIOyQHRA97Mbx6kksMS0xIWrq
xCXC837pAtUmt3yGckswAcMBvrwDPDnDyRkYsCraktz4WZrS3YqVuG583kgo8UqrJ
g==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 109') {
	err('This update can only be applied to OIDplus version 2.0.0.109!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: TODO
function writefile_1() {
	@$fp = fopen('TODO', 'w');
	@fwrite($fp, base64_decode('CklNUE9SVEFOVAotIFZlcmlmeTogZXNjYXBlIGV2ZXJ5dGhpbmcKLSBDb29raWUgbGF3OgoJRG93bmxvYWQgQ29va2llQ29uc2VudCBjb2RlIGludG8gXzNwIGZvbGRlciwgZG8gbm90IGhvdGxpbmsgaXQKCXdlIG5lZWQgdG8gbG9nIGFsbCBjb25zZW50cwoJZG8g'));
	@fwrite($fp, base64_decode('d2UgbmVlZCBhbiBleHBsaWNpdCBjb25zZW50IGF0IHRoZSBsb2dpbiBmb3JtPwoJZG8gd2UgbmVlZCBhIGNvbnNlbnQgZm9yIHRoZSBjb29raWUgU1NMX0NIRUNLPwotIGRzZ3ZvIGRhdGVuc2NodXR6ZXJrbORydW5nLCBhZ2JzIGV0Yy4KClNNQUxMIFRISU5HUwot'));
	@fwrite($fp, base64_decode('IHdoZW4gbG9naW4gZXhwaXJlZCwgcmVtb3ZlIGVudHJpZXMgaW4gdGhlIHRyZWV2aWV3Ci0gY2FuIHdlIHB1dCBldmVuIG1vcmUgY29kZSAoZS5nLiBvYmplY3QgQ1JVRCkgaW50byB0aGUgcGx1Z2luIGRpcmVjdG9yeT8KLSBkaXNhYmxlIHNwZWNpZmljIGZ1bmN0'));
	@fwrite($fp, base64_decode('aW9ucyAoZS5nLiBpbnZpdGUsIGxvZ2luLCByYWluZm8sIGZvcmdvdCBwYXNzd29yZCkgaWYgdGhlIHBsdWdpbnMgYXJlIG5vdCBpbnN0YWxsZWQgKGNoZWNrIGlmIGNsYXNzIHR5cGUgaXMgcmVnaXN0ZXJlZCkKLSBtb2JpbGUgZGVzaWduOiBpZiB0aXRsZSBpcyB0'));
	@fwrite($fp, base64_decode('b28gbG9uZyA9PiBtYWtlIHN5c3RlbSB0aXRsZSBiYXIgbXVsdGkgbGluZT8KLSBtYWtlIHVzYWdlIG9mIEZvcmVpZ24gS2V5cwotIDxhYmJyPiBpbiA8Y29kZT4gd2lyZCBkb3BwZWx0IHVudGVyc3RyaWNoZW4KLSB3ZW5uIG1hbiBlaW5lIHdlbGwta25vd24gT0lE'));
	@fwrite($fp, base64_decode('IGFubGVnZW4gbfZjaHRlLCBkYW5uIGtvbW10IGZlaGxlciB3ZWdlbiByZXBsYWNlQXNuMS9yZXBsYWNlSXJpLCBhYmVyIGRpZSBPSUQgaXN0IGVyc3RlbGx0LiBEaWUgQVBJIGlzdCBhYmVyIG5pY2h0IHJlbG9hZGVkLiBNYW4gc2llaHQgYWxzbyBuaWNodCwgZGFz'));
	@fwrite($fp, base64_decode('cyBkaWUgT0lEIGVyc3RlbGx0IHd1cmRlLCB1bmQgZWluIGVybmV1dGVyIGtsaWNrIGF1ZiBJbnNlcnQgZvxocnQgenVtIFByaW1hcnktS2V5IGZlaGxlcgotIHByb2JsZW06IHdlbm4gZWluZSBSQSBlaW5nZWxhZGVuIHdlcmRlbiBt9mNodGUsIG11c3MgbWFuICJ1'));
	@fwrite($fp, base64_decode('cGRhdGUiIGRy/GNrZW4gdW5kIGRpZSBPSUQgd2lyZCBhbHMgdXBkYXRlZCBtYXJraWVydAotIGJlaSBtZWhyZXJlbiBpZGVudGlmaWVybiBrYW5uIG1hbiBuaWNodCBiZXN0aW1tZW4sIHdlbGNoZXIgaWRlbnRpZmllciBkZXIgYmV2b3J6dWd0ZSBzZWluIHNvbGwh'));
	@fwrite($fp, base64_decode('IQotIHNob3cgd2hvaXMgbGlua3Mgb25seSBpZiBmb2xkZXIgIndob2lzLyIgZXhpc3RzCi0gZGlzYWJsZSBhdXRvY29tcGxldGUgb24gc29tZSBmb3JtcwotIGdyYXBoaWNhbCBpbXBvcnZlbWVudHMgb2YgZm9ybXMgKGlucHV0IGVkaXRzIGFsaWduZWQpCi0gIkRv'));
	@fwrite($fp, base64_decode('Y3VtZW50cyIgc2VjdGlvbjogTWFrZSBkb2N1bWVudGF0aW9uIGZvciB1c2FnZSBvZiBPSURwbHVzIChmb3IgbWVtYmVycyBvbmx5KQotIGFkbWluIGNvbmZpZyBtZWhyIHVzZXIgZnJpZW5kbHksIGUuZy4gaGF2aW5nIHRoZSBlbmFibGUvZGlzYWJsZSBvYmplY3Qg'));
	@fwrite($fp, base64_decode('dHlwZSBzdHVmZiAobGlrZSBpbiByZWdpc3RyYXRpb24gd2l6YXJkKSBhbHNvIGluIHRoZSBhZG1pbiBjb250cm9sIHBhbmVsCi0gaXQgd291bGQgYmUgY29vbCBpZiBhZnRlciB0aGUgbG9naW4sIHRoZSBvcGVuZWQgbm9kZXMgaW4gdGhlIHRyZWUgd291bGQgc3Rh'));
	@fwrite($fp, base64_decode('eSBvcGVuCi0gc2hvdWxkIHdlIGxvZyBzb21ld2hlcmUsIHdoZW4gdGhlIGFkbWluIGFjY291bnQgd2FzIGxvZ2dlZCBpbj8KLSBtdWx0aWxhbmcKLSBodG1sIGNoZWNrYm94OiAibGFiZWwgZm9yIiB2ZXJ3ZW5kZW4KLSB3aGVuIGphdmFzY3JpcHQgZmFpbHMsIHRo'));
	@fwrite($fp, base64_decode('ZSBmb3JtIHdpbGwgYmUgc3VibWl0dGVkIHRvICcuLycgLCB0aGF0IGlzIG5vdCBnb29kISBmYWlsZWQgamF2YXNjcmlwdCBtdXN0IHJldHVybiBmYWxzZSwgc28gdGhhdCB0aGUgZm9ybSBkb2VzIG5vdCBnZXQgc3VibWl0dGVkCi0gYWRtaW46IHNob3cgcHJpdmFj'));
	@fwrite($fp, base64_decode('eSBlbnRyaWVzIGZyb20gUkFzIChidXQgZ3JleSwgc28geW91IGtub3cgdGhhdCBpdCBpcyBwcml2YXRlKQotIGFkbWluIHNvbGwgY29udGFjdCBkYXRhIGVpbmVyIGZyZW1kZW4gUkEg5G5kZXJuIGT8cmZlbgotIGZyZWVvaWQ6IGFzbi4xIHVuZCBpcmkgc3BhbHRl'));
	@fwrite($fp, base64_decode('biBhdXNibGVuZGVuLCBkYSBkaWVzZXIgYXJjIGtlaW5lIElEcyB2ZXJnaWJ0PwotIFByaXZhY3k6IE1laHIgc3R1ZmVuLCB6LmIuIGRhc3MgbWFuIGRlbiBwZXJzb25hbCBuYW1lIGV2dGwgZ2FyIG5pY2h0IHplaWdlbiBt9mNodGUKLSBNYW4gc29sbHRlICJjcmVh'));
	@fwrite($fp, base64_decode('dGVkIiBhYuRuZGVybiBk/HJmZW4hIG9kZXIgZXZ0bCBnYW56IHZlcnN0ZWNrZW4sIHdlbm4gbWFuIGVzIG5pY2h0IHdlad8KLSBpbiBkZXIgY3J1ZCBsaXN0ZSBkZW4gdGl0ZWwgZGVzIG9iamVrdHMgemVpZ2VuCi0gbmF0T3JkZXIoKSBpc3QgbnVyIGb8ciBPSUQg'));
	@fwrite($fp, base64_decode('Z/xsdGlnISEhIGFuZGVyZSBzb3J0LW1lY2hhbmlzbWVuIGb8ciBhbmRlcmUgb2JqZWt0dHlwZW4gZXJmb3JkZXJsaWNoCi0gdGlueW1jZQoJbWNlIGRpcnR5IGZsYWc6CgkJLSB3ZW5uIG1hbiB3ZWNoc2VsIChqcyB0cmVlIHNlbGVjdCksIGRhbm4gc29sbCBhYmdl'));
	@fwrite($fp, base64_decode('ZnJhZ3Qgd2VyZGVuLCBvYiB0aW55bWNlIGRpcnR5IGlzdCwgdW5kIGVpbmUgd2FybnVuZyBicmluZ2VuLCBhbHNvIHNvLCB3aWUgd2VubiBtYW4gZGllIHNlaXRlIG5ldSBsYWRlbiB3/HJkZQoJCS0ga3JpdGlzY2hlciBidWc6IHNlaXRlIPZmZm5lbiwgdGlueSBt'));
	@fwrite($fp, base64_decode('Y2UgZWRpdGllcmVuLCBzcGVpY2hlcm4ga2xpY2tlbi4gZGFubiBmNSBuZXUgbGFkZW4gKG5pY2h0IHN0cmcrZjUpOiBkYW5uIGlzdCBkZXIgYWx0ZSBjb250ZW50IHdpZWRlciBkYS4gYXXfZXIgbWFuIGRy/GNrdCBzdHJnK2Y1CglidWc6IG92ZXJsYXkgImJpbGQi'));
	@fwrite($fp, base64_decode('IHVuZCAidGFiZWxsZSIgYmxlaWJ0IGF1ZiBkZW0gYmlsZHNjaGlybSwgc2VsYnN0IHdlbm4gbWFuIGRpZSBzZWl0ZSB3ZWNoc2VsdCD8YmVyIGRhcyBtZW78Ci0ganN0cmVlIHNlbGVjdDogYXV0b21hdGljYWxseSBzY3JvbGwgZG93bgotIG9wdGlzY2ggYXVmaPxi'));
	@fwrite($fp, base64_decode('c2NoZW4uIGRpbmdlIHdpZSBSQTogbWVociBkaW5nZSB6ZWlnZW4sIGFkcmVzc2UsIGVtYWlsIGV0YwoKRlVUVVJFCi0gaW1wbGVtZW50IHNpdGVtYXBzIHhtbAotIHJlY29yZCBoaXN0b3J5IG9mIGFuIE9JRD8KLSBhZG1pbiBzaG91bGQgYmUgYWJsZSB0byBjaGFu'));
	@fwrite($fp, base64_decode('Z2Ugd2VsbGtub3duIG9pZHM/Ci0gbW92ZSBvaWQgdG8gZGlmZmVyZW50IGFyYwotIGJlaSBzZWhyIGdyb99lbiBhcmNzICh6LkIuIFBFTikgc29sbGVuIG5pY2h0IGFsbGUgYW5nZXplaWd0IHdlcmRlbgotIHVudGVyc3T8dHp1bmcgZvxyIE9SUz8KLSBNZWhyICJD'));
	@fwrite($fp, base64_decode('dXR0aW5nIEVkZ2UgVGVjaG5vbG9naWUiIHNvbGwgaW4gZGllc2VtIFByb2pla3QgenVtIFRyYWdlbiBrb21tZW46IEFKQVgsIEpTT04sIHZvbGxzdORuZGlnIFVURjgsIENSVUQgZnJhbWV3b3JrcywgUERPLCBIVE1MNSwgTW9iaWxlcyBEZXNpZ24sIFB1cmUgQ1NT'));
	@fwrite($fp, base64_decode('LCBBdXRvbG9hZGluZywgT2JqZWt0b3JpZW50aWVydW5nIChhYmVyIG5pY2h0IHVuYmVkaW5ndCBNVkMpLCAuLi48YnI+Ci0gIlNlYXJjaCIgcGx1Z2luOiBGZWF0dXJlIHRvIHNlYXJjaCBpbnNpZGUgZG9jdW1lbnRhdGlvbiAoZG9jLyBkaXJlY3RvcnkpCi0gIlNl'));
	@fwrite($fp, base64_decode('YXJjaCIgcGx1Z2luOiBJIHdhbnQgdG8gc2VhcmNoIGluIGFsbCBvYmplY3QgdHlwZXMgYW5kIFJBcy4gTm90IGZpcnN0IHNlbGVjdCB0aGUgdHlwZS4KLSBIb3cgY2FuIHdlIG1ha2Ugc3VyZSB0aGF0IGV4YW1wbGUgb2JqZWN0cyBhcmUgbm90IGV4cG9ydGVkIHVz'));
	@fwrite($fp, base64_decode('aW5nIG9pZC1pbmZvLmNvbSBleHBvcnQ/Ci0gQWRtaW5pc3RyYXRvci1JbnRlcmZhY2U6IGVuYWJsZSBhbmQgZGlzYWJsZSBvYmplY3QgdHlwZXMKClJFSkVDVEVEIElERUFTCi0gc29sbHRlIGVzIG1laGVyZSBhZG1pbnMgZ2ViZW4/Ci0gY2hhbmdlIGhpc3Rvcnkg'));
	@fwrite($fp, base64_decode('b2YgZWFjaCBvaWQKLSByZWNvcmQgZmlyc3QgUkEgYW5kIGN1cnJlbnQgUkEgPT4gWC42NjAgZG9lcyBub3QgaGF2ZSB0aGlzIHJlcXVpcmVtZW50Ci0gbWFya2VycyBEUkFGVCwgTEVBRiBhbmQgRlJPWkVOIGV0Yy4gPT4gdXNlICJQcm90ZWN0ZWQiIGlmIHlvdSB3'));
	@fwrite($fp, base64_decode('YW50IHRvIG1ha2UgaXQgaW52aXNpYmxlCgpJREVBUwotIHRoZXJlIHNob3VsZCBiZSBhIGZvcm0gd2hlcmUgYW4gUkEgY2FuIHJlcXVlc3QgYW4gaW52aXRhdGlvbiwgZXZlbiBpZiB0aGUgc3VwZXJpb3IgUkEgZGlkIG5vdCBpbnZpdGUgdGhlbS4KICB0aGUgZmFj'));
	@fwrite($fp, base64_decode('dCB0aGF0IGEgUkEgZXhpc3RzIGluIHRoZSBPYmplY3QgVGFibGUgc2hvdWxkIHBlcm1pdCB0aGUgUkEgdG8gaW52aXRlIHRoZWlyc2VsZi4KLSBiZWltIHZlcmxhc3NlbiBkZXIgc2VpdGUsIHouYi4gd2VubiBtYW4gbGlua3MgYXVmIGVpbmVuIG5ldWVuIG1lbvxw'));
	@fwrite($fp, base64_decode('dW5rdCBrbGlja3QsIHNvbGwgZWluZSBhYmZyYWdlIGtvbW1lbiwgb2IgbWFuIHNwZWljaGVybiBt9mNodGUKLSBtYWtlIGEgbGlzdCBvZiBPSURzIHRoYXQgZG8gbm90IGFzc2lnbiBBU04xL0lSSSBpZGVudGlmaWVycyAoZS5nLiBJQU5BIFBFTiBvciBWaWFUaGlu'));
	@fwrite($fp, base64_decode('a1NvZnQgRnJlZU9JRCksIHRoZW4gcmVqZWN0IGFueSBpZGVudGlmaWVyIHRoZSB1c2VyIHByb3ZpZGVzCi0gc2FuaXRpemUgSVB2NCwgSVB2NiwgR1VJRCBkdXJpbmcgY3JlYXRpb24KCWJlaSBJUHY0IHVuZCBJUHY2OiAtIGlmIGl0IGlzIGEgc2luZ2xlIGhvc3Qg'));
	@fwrite($fp, base64_decode('YWRkcmVzcywgZG9uJ3QgcHV0IC8zMiBvciAvMTI4IHN1ZmZpeAoJICAgICAgICAgICAgICAgICAgIC0gc3RyaWtlIHVubmVjZXNzYXJ5IGJpdHMgdGhhdCBhcmUgbm90IGRlZmluZWQgaW4gdGhlIG5ldG1hc2sgKGFsc28gYXQgdGhlIHdob2lzIG91dHB1dCkKClFV'));
	@fwrite($fp, base64_decode('RVNUSU9OUwotIHNob3VsZCB0aGUgY29sbGF0aW9uIGJlIGNhc2Ugc2Vuc2l0aXZlIG9yIGNhc2UgaW5zZW5zaXRpdmU/IEZvciBKYXZhIHBhY2thZ2UgbmFtZXMsIGl0IHNob3VsZCBiZSBjYXNlIHNlbnN0aXZpZQotIHdvcnQgImd1aWQiIG9kZXIgInV1aWQiIHZl'));
	@fwrite($fp, base64_decode('cndlbmRlbj8KLSBiaXQgb3IgdGlueWludCgxKSA/Ci0gc2hvdWxkICJPSUQgdXBkYXRlZCIgYmUgc3BsaXQgaW50byB0d28gY2F0ZWdvcmllcyAidXBkYXRlZCBieSBzdXBlcmlvciIgKGUuZy4gaWRlbnRpZmllcnMpIGFuZCAidXBkYXRlZCBieSBvd25lciIgKGRl'));
	@fwrite($fp, base64_decode('c2NyaXB0aW9uIGV0Yyk/Ci0gInVwZGF0ZWQiIG5pY2h0IGFrdHVhbGlzaWVyZW4sIHdlbm4gbWFuIG51ciBhdWYgInVwZGF0ZSIga2xpY2t0IGFiZXIgbml4IGdl5G5kZXJ0IGhhdAotICJEb2N1bWVudHMiIHNlY3Rpb246IENhbiBiYXNlIG9mIFVSTHMvaW1hZ2Vz'));
	@fwrite($fp, base64_decode('IGluc2lkZSB0aGUgSFRNTCBiZSBjaGFuZ2VkIGF1dG9tYXRpY2FsbHk/CgpHVUlEIE1hbmFnZW1lbnQKLSBMZWFmIG5vZGVzIChHVUlEcykgc2hvdWxkIHNob3cvZWRpdCB0aGUgVGl0bGUgaW4gdGhlIENSVUQsIHNvIHlvdSBkb250IGhhdmUgdG8gY2xpY2sgdGhl'));
	@fwrite($fp, base64_decode('IEdVSUQgdG8gc2VlIHRoZSB0aXRsZQotIHNlbHRzYW1lciBidWc6IHdlbm4gaWNoIGd1aWQ6b2lkcGx1cyBlZGl0aWVyZSwgZGFubiD2ZmZuZXQgc2ljaCBsaW5rcyBndWlkOmFjdGl2ZWRpcmVjdG9yeSBiZWltIG5ldWxhZGVuIGRlcyBiYXVtcyBuYWNoIGRlbSB1'));
	@fwrite($fp, base64_decode('cGRhdGUuIGlyZ2VuZHdpZSD2ZmZuZXQgZXIgZGVuIHp1bGV0enQgZ2X2ZmZuZXRlbiBub2RlIGJlaW0gcmVsb2FkIG5vY2htYWwK'));
	@fclose($fp);
}
if (!is_file('TODO')) {
	warn('File has vanished! Will re-create it: TODO');
	writefile_1();
	if (!is_file('TODO')) {
		warn('File cannot be created (not existing): TODO');
	} else if (sha1_file('TODO') != '75896381d384b3debf902b983bd5466a92b956f7') {
		warn('File cannot be created (checksum mismatch): TODO');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('TODO', 0644)) {
		warn('Could not change file permissions of TODO');
	}
} else {
	if (@sha1_file('TODO') !== '75896381d384b3debf902b983bd5466a92b956f7') {
		if (@sha1_file('TODO') !== '0be23db0af1745e380b2f5b2a97b6dc333b7dd51') {
			warn('File was modified. Will overwrite the changes now: TODO');
			$tmp = pathinfo('TODO');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('TODO')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('TODO', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('TODO') !== '75896381d384b3debf902b983bd5466a92b956f7') {
			warn('File cannot be written (checksum mismatch): TODO');
		}
	}
}

// Files different: plugins/publicPages/090_login/plugin.inc.php
function writefile_2() {
	@$fp = fopen('plugins/publicPages/090_login/plugin.inc.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmNsYXNzIE9JRHBsdXNQYWdlUHVibGljTG9naW4gZXh0ZW5kcyBPSURwbHVzUGFnZVBsdWdpbiB7CglwdWJsaWMgZnVuY3Rpb24gdHlwZSgpIHsKCQlyZXR1cm4gJ3B1YmxpYyc7Cgl9CgoJcHVibGlj'));
	@fwrite($fp, base64_decode('IGZ1bmN0aW9uIHByaW9yaXR5KCkgewoJCXJldHVybiA5MDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gYWN0aW9uKCYkaGFuZGxlZCkgewoJCS8vID09PSBSQSBMT0dJTi9MT0dPVVQgPT09CgoJCWlmIChpc3NldCgkX1BPU1RbImFjdGlvbiJdKSAmJiAoJF9QT1NUWyJh'));
	@fwrite($fp, base64_decode('Y3Rpb24iXSA9PSAicmFfbG9naW4iKSkgewoJCQkkaGFuZGxlZCA9IHRydWU7CgoJCQkkcmEgPSBuZXcgT0lEcGx1c1JBKCRfUE9TVFsnZW1haWwnXSk7CgoJCQlpZiAoUkVDQVBUQ0hBX0VOQUJMRUQpIHsKCQkJCSRzZWNyZXQ9UkVDQVBUQ0hBX1BSSVZBVEU7CgkJ'));
	@fwrite($fp, base64_decode('CQkkcmVzcG9uc2U9JF9QT1NUWyJjYXB0Y2hhIl07CgkJCQkkdmVyaWZ5PWZpbGVfZ2V0X2NvbnRlbnRzKCJodHRwczovL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS9hcGkvc2l0ZXZlcmlmeT9zZWNyZXQ9eyRzZWNyZXR9JnJlc3BvbnNlPXskcmVzcG9uc2V9Iik7'));
	@fwrite($fp, base64_decode('CgkJCQkkY2FwdGNoYV9zdWNjZXNzPWpzb25fZGVjb2RlKCR2ZXJpZnkpOwoJCQkJaWYgKCRjYXB0Y2hhX3N1Y2Nlc3MtPnN1Y2Nlc3M9PWZhbHNlKSB7CgkJCQkJZGllKGpzb25fZW5jb2RlKGFycmF5KCJlcnJvciIgPT4gJ0NhcHRjaGEgd3JvbmcnKSkpOwoJCQkJ'));
	@fwrite($fp, base64_decode('fQoJCQl9CgoJCQlpZiAoJHJhLT5jaGVja1Bhc3N3b3JkKCRfUE9TVFsncGFzc3dvcmQnXSkpIHsKCQkJCU9JRHBsdXM6OmF1dGhVdGlscygpOjpyYUxvZ2luKCRfUE9TVFsnZW1haWwnXSk7CgoJCQkJaWYgKCFPSURwbHVzOjpkYigpLT5xdWVyeSgiVVBEQVRFICIu'));
	@fwrite($fp, base64_decode('T0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJyYSBzZXQgbGFzdF9sb2dpbiA9IG5vdygpIHdoZXJlIGVtYWlsID0gJyIuT0lEcGx1czo6ZGIoKS0+cmVhbF9lc2NhcGVfc3RyaW5nKCRfUE9TVFsnZW1haWwnXSkuIiciKSkgewoJCQkJCWRpZShqc29uX2VuY29kZShh'));
	@fwrite($fp, base64_decode('cnJheSgiZXJyb3IiID0+IE9JRHBsdXM6OmRiKCktPmVycm9yKCkpKSk7CgkJCQl9CgoJCQkJZWNobyBqc29uX2VuY29kZShhcnJheSgic3RhdHVzIiA9PiAwKSk7CgkJCX0gZWxzZSB7CgkJCQlkaWUoanNvbl9lbmNvZGUoYXJyYXkoImVycm9yIiA9PiAiV3Jvbmcg'));
	@fwrite($fp, base64_decode('cGFzc3dvcmQiKSkpOwoJCQl9CgkJfQoJCWlmIChpc3NldCgkX1BPU1RbImFjdGlvbiJdKSAmJiAoJF9QT1NUWyJhY3Rpb24iXSA9PSAicmFfbG9nb3V0IikpIHsKCQkJJGhhbmRsZWQgPSB0cnVlOwoJCQlPSURwbHVzOjphdXRoVXRpbHMoKTo6cmFMb2dvdXQoJF9Q'));
	@fwrite($fp, base64_decode('T1NUWydlbWFpbCddKTsKCQkJZWNobyBqc29uX2VuY29kZShhcnJheSgic3RhdHVzIiA9PiAwKSk7CgkJfQoKCQkvLyA9PT0gQURNSU4gTE9HSU4vTE9HT1VUID09PQoKCQlpZiAoaXNzZXQoJF9QT1NUWyJhY3Rpb24iXSkgJiYgKCRfUE9TVFsiYWN0aW9uIl0gPT0g'));
	@fwrite($fp, base64_decode('ImFkbWluX2xvZ2luIikpIHsKCQkJJGhhbmRsZWQgPSB0cnVlOwoKCQkJaWYgKFJFQ0FQVENIQV9FTkFCTEVEKSB7CgkJCQkkc2VjcmV0PVJFQ0FQVENIQV9QUklWQVRFOwoJCQkJJHJlc3BvbnNlPSRfUE9TVFsiY2FwdGNoYSJdOwoJCQkJJHZlcmlmeT1maWxlX2dl'));
	@fwrite($fp, base64_decode('dF9jb250ZW50cygiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9yZWNhcHRjaGEvYXBpL3NpdGV2ZXJpZnk/c2VjcmV0PXskc2VjcmV0fSZyZXNwb25zZT17JHJlc3BvbnNlfSIpOwoJCQkJJGNhcHRjaGFfc3VjY2Vzcz1qc29uX2RlY29kZSgkdmVyaWZ5KTsKCQkJCWlm'));
	@fwrite($fp, base64_decode('ICgkY2FwdGNoYV9zdWNjZXNzLT5zdWNjZXNzPT1mYWxzZSkgewoJCQkJCWRpZShqc29uX2VuY29kZShhcnJheSgiZXJyb3IiID0+ICdDYXB0Y2hhIHdyb25nJykpKTsKCQkJCX0KCQkJfQoKCQkJaWYgKE9JRHBsdXM6OmF1dGhVdGlscygpOjphZG1pbkNoZWNrUGFz'));
	@fwrite($fp, base64_decode('c3dvcmQoJF9QT1NUWydwYXNzd29yZCddKSkgewoJCQkJT0lEcGx1czo6YXV0aFV0aWxzKCk6OmFkbWluTG9naW4oKTsKCQkJCWVjaG8ganNvbl9lbmNvZGUoYXJyYXkoInN0YXR1cyIgPT4gMCkpOwoJCQl9IGVsc2UgewoJCQkJZGllKGpzb25fZW5jb2RlKGFycmF5'));
	@fwrite($fp, base64_decode('KCJlcnJvciIgPT4gIldyb25nIHBhc3N3b3JkIikpKTsKCQkJfQoJCX0KCQlpZiAoaXNzZXQoJF9QT1NUWyJhY3Rpb24iXSkgJiYgKCRfUE9TVFsiYWN0aW9uIl0gPT0gImFkbWluX2xvZ291dCIpKSB7CgkJCSRoYW5kbGVkID0gdHJ1ZTsKCQkJT0lEcGx1czo6YXV0'));
	@fwrite($fp, base64_decode('aFV0aWxzKCk6OmFkbWluTG9nb3V0KCk7CgkJCWVjaG8ganNvbl9lbmNvZGUoYXJyYXkoInN0YXR1cyIgPT4gMCkpOwoJCX0KCX0KCglwdWJsaWMgZnVuY3Rpb24gaW5pdCgkaHRtbD10cnVlKSB7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGNmZ1NldFZhbHVlKCRuYW1l'));
	@fwrite($fp, base64_decode('LCAkdmFsdWUpIHsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZ3VpKCRpZCwgJiRvdXQsICYkaGFuZGxlZCkgewoJCWlmICgkaWQgPT09ICdvaWRwbHVzOmxvZ2luJykgewoJCQkkaGFuZGxlZCA9IHRydWU7CgkJCSRvdXRbJ3RpdGxlJ10gPSAnTG9naW4nOwoJCQkkb3V0'));
	@fwrite($fp, base64_decode('WydpY29uJ10gID0gJ3BsdWdpbnMvcHVibGljUGFnZXMvJy5iYXNlbmFtZShfX0RJUl9fKS4nL2xvZ2luX2JpZy5wbmcnOwoKCQkJJG91dFsndGV4dCddIC49ICc8bm9zY3JpcHQ+JzsKCQkJJG91dFsndGV4dCddIC49ICc8cD5Zb3UgbmVlZCB0byBlbmFibGUgSmF2'));
	@fwrite($fp, base64_decode('YVNjcmlwdCB0byB1c2UgdGhlIGxvZ2luIGFyZWEuPC9wPic7CgkJCSRvdXRbJ3RleHQnXSAuPSAnPC9ub3NjcmlwdD4nOwoKCQkJJG91dFsndGV4dCddIC49IChSRUNBUFRDSEFfRU5BQkxFRCA/ICc8c2NyaXB0PiBncmVjYXB0Y2hhLnJlbmRlcihkb2N1bWVudC5n'));
	@fwrite($fp, base64_decode('ZXRFbGVtZW50QnlJZCgiZy1yZWNhcHRjaGEiKSwgeyAic2l0ZWtleSIgOiAiJy5SRUNBUFRDSEFfUFVCTElDLiciIH0pOyA8L3NjcmlwdD4nLgoJCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxwPkJlZm9yZSBsb2dnaW5nIGluLCBwbGVhc2Ug'));
	@fwrite($fp, base64_decode('c29sdmUgdGhlIGZvbGxvd2luZyBDQVBUQ0hBPC9wPjxkaXYgaWQ9ImctcmVjYXB0Y2hhIiBjbGFzcz0iZy1yZWNhcHRjaGEiIGRhdGEtc2l0ZWtleT0iJy5SRUNBUFRDSEFfUFVCTElDLiciPjwvZGl2PicgOiAnJyk7CgoKCQkJJG91dFsndGV4dCddIC49ICc8YnI+'));
	@fwrite($fp, base64_decode('JzsKCgkJCSRvdXRbJ3RleHQnXSAuPSAnPGRpdiBpZD0ibG9naW5BcmVhIiBzdHlsZT0idmlzaWJpbGl0eTogaGlkZGVuIj48ZGl2IGlkPSJsb2dpblRhYiIgY2xhc3M9ImNvbnRhaW5lciIgc3R5bGU9IndpZHRoOjEwMCU7Ij4nOwoJCQkkb3V0Wyd0ZXh0J10gLj0g'));
	@fwrite($fp, base64_decode('Jzx1bCAgY2xhc3M9Im5hdiBuYXYtcGlsbHMiPic7CgkJCSRvdXRbJ3RleHQnXSAuPSAnCQkJPGxpIGNsYXNzPSJhY3RpdmUiPic7CgkJCSRvdXRbJ3RleHQnXSAuPSAnICAgICAgICA8YSAgaHJlZj0iIzFhIiBkYXRhLXRvZ2dsZT0idGFiIj5Mb2dpbiBhcyBSQTwv'));
	@fwrite($fp, base64_decode('YT4nOwoJCQkkb3V0Wyd0ZXh0J10gLj0gJwkJCTwvbGk+JzsKCQkJJG91dFsndGV4dCddIC49ICcJCQk8bGk+PGEgaHJlZj0iIzJhIiBkYXRhLXRvZ2dsZT0idGFiIj5Mb2dpbiBhcyBhZG1pbmlzdHJhdG9yPC9hPic7CgkJCSRvdXRbJ3RleHQnXSAuPSAnCQkJPC9s'));
	@fwrite($fp, base64_decode('aT4nOwoJCQkkb3V0Wyd0ZXh0J10gLj0gJwkJPC91bD4nOwoJCQkkb3V0Wyd0ZXh0J10gLj0gJwkJCTxkaXYgY2xhc3M9InRhYi1jb250ZW50IGNsZWFyZml4Ij4nOwoJCQkkb3V0Wyd0ZXh0J10gLj0gJwkJCSAgPGRpdiBjbGFzcz0idGFiLXBhbmUgYWN0aXZlIiBp'));
	@fwrite($fp, base64_decode('ZD0iMWEiPic7CgoJCQkkb3V0Wyd0ZXh0J10gLj0gJzxoMj5Mb2dpbiBhcyBSQTwvaDI+JzsKCgkJCSRsb2dpbl9saXN0ID0gT0lEcGx1czo6YXV0aFV0aWxzKCktPmxvZ2dlZEluUmFMaXN0KCk7CgkJCWlmIChjb3VudCgkbG9naW5fbGlzdCkgPiAwKSB7CgkJCQlm'));
	@fwrite($fp, base64_decode('b3JlYWNoIChPSURwbHVzOjphdXRoVXRpbHMoKS0+bG9nZ2VkSW5SYUxpc3QoKSBhcyAkeCkgewoJCQkJCSRvdXRbJ3RleHQnXSAuPSAnPHA+WW91IGFyZSBsb2dnZWQgaW4gYXMgPGI+Jy4keC4nPC9iPiAoPGEgaHJlZj0iIyIgb25jbGljaz0icmV0dXJuIHJhTG9n'));
	@fwrite($fp, base64_decode('b3V0KCcuanNfZXNjYXBlKCR4KS4nKTsiPkxvZ291dDwvYT4pPC9wPic7CgkJCQl9CgkJCQkkb3V0Wyd0ZXh0J10gLj0gJzxwPklmIHlvdSBoYXZlIG1vcmUgYWNjb3VudHMsIHlvdSBjYW4gbG9nIGluIHdpdGggYSBuZXcgYWNjb3VudDo8L3A+JzsKCQkJfSBlbHNl'));
	@fwrite($fp, base64_decode('IHsKCQkJCSRvdXRbJ3RleHQnXSAuPSAnPHA+RW50ZXIgeW91ciBlbWFpbCBhZGRyZXNzIGFuZCB5b3VyIHBhc3N3b3JkIHRvIGxvZyBpbiBhcyBSZWdpc3RyYXRpb24gQXV0aG9yaXR5LjwvcD4nOwoJCQl9CgkJCSRvdXRbJ3RleHQnXSAuPSAnPGZvcm0gb25zdWJt'));
	@fwrite($fp, base64_decode('aXQ9InJldHVybiByYUxvZ2luT25TdWJtaXQodGhpcyk7Ij4nOwoJCQkkb3V0Wyd0ZXh0J10gLj0gJzxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9ImFjdGlvbiIgdmFsdWU9InJhX2xvZ2luIj4nOwoJCQkkb3V0Wyd0ZXh0J10gLj0gJzxsYWJlbCBjbGFzcz0icGFk'));
	@fwrite($fp, base64_decode('ZGluZ19sYWJlbCI+RS1NYWlsOjwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIG5hbWU9ImVtYWlsIiB2YWx1ZT0iIiBpZD0icmFMb2dpbkVNYWlsIj48YnI+JzsKCQkJJG91dFsndGV4dCddIC49ICc8bGFiZWwgY2xhc3M9InBhZGRpbmdfbGFiZWwiPlBhc3N3b3Jk'));
	@fwrite($fp, base64_decode('OjwvbGFiZWw+PGlucHV0IHR5cGU9InBhc3N3b3JkIiBuYW1lPSJwYXNzd29yZCIgdmFsdWU9IiIgaWQ9InJhTG9naW5QYXNzd29yZCI+PGJyPjxicj4nOwoJCQkkb3V0Wyd0ZXh0J10gLj0gJzxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJMb2dpbiI+PGJyPjxi'));
	@fwrite($fp, base64_decode('cj4nOwoJCQkkb3V0Wyd0ZXh0J10gLj0gJzwvZm9ybT4nOwoJCQkkb3V0Wyd0ZXh0J10gLj0gJzxwPjxhICcub2lkcGx1c19saW5rKCdvaWRwbHVzOmZvcmdvdF9wYXNzd29yZCcpLic+Rm9yZ290IHBhc3N3b3JkPzwvYT48YnI+JzsKCQkJJG91dFsndGV4dCddIC49'));
	@fwrite($fp, base64_decode('ICc8YWJiciB0aXRsZT0iVG8gcmVjZWl2ZSBsb2dpbiBkYXRhLCB0aGUgc3VwZXJpb3IgUkEgbmVlZHMgdG8gc2VuZCB5b3UgYW4gaW52aXRhdGlvbi4gQWZ0ZXIgY3JlYXRpbmcgb3IgdXBkYXRpbmcgeW91ciBPSUQsIHRoZSBzeXN0ZW0gd2lsbCBhc2sgdGhlbSBp'));
	@fwrite($fp, base64_decode('ZiB0aGV5IHdhbnQgdG8gc2VuZCB5b3UgYW4gaW52aXRhdGlvbi4gSWYgdGhleSBhY2NlcHQsIHlvdSB3aWxsIHJlY2VpdmUgYW4gZW1haWwgd2l0aCBhbiBhY3RpdmF0aW9uIGxpbmsuIj5Ib3cgdG8gcmVnaXN0ZXI/PC9hYmJyPjwvcD4nOwoKCQkJJG91dFsndGV4'));
	@fwrite($fp, base64_decode('dCddIC49ICcJCQkJPC9kaXY+JzsKCQkJJG91dFsndGV4dCddIC49ICcJCQkJPGRpdiBjbGFzcz0idGFiLXBhbmUiIGlkPSIyYSI+JzsKCgkJCWlmIChPSURwbHVzOjphdXRoVXRpbHMoKTo6aXNBZG1pbkxvZ2dlZEluKCkpIHsKCQkJCSRvdXRbJ3RleHQnXSAuPSAn'));
	@fwrite($fp, base64_decode('PGgyPkFkbWluIGxvZ2luPC9oMj4nOwoJCQkJJG91dFsndGV4dCddIC49ICc8cD5Zb3UgYXJlIGxvZ2dlZCBpbiBhcyBhZG1pbmlzdHJhdG9yLjwvcD4nOwoJCQkJJG91dFsndGV4dCddIC49ICc8YSBocmVmPSIjIiBvbmNsaWNrPSJyZXR1cm4gYWRtaW5Mb2dvdXQo'));
	@fwrite($fp, base64_decode('KTsiPkxvZ291dDwvYT4nOwoJCQl9IGVsc2UgewoJCQkJJG91dFsndGV4dCddIC49ICc8aDI+TG9naW4gYXMgYWRtaW5pc3RyYXRvcjwvaDI+JzsKCQkJCSRvdXRbJ3RleHQnXSAuPSAnPGZvcm0gb25zdWJtaXQ9InJldHVybiBhZG1pbkxvZ2luT25TdWJtaXQodGhp'));
	@fwrite($fp, base64_decode('cyk7Ij4nOwoJCQkJJG91dFsndGV4dCddIC49ICc8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJhY3Rpb24iIHZhbHVlPSJhZG1pbl9sb2dpbiI+JzsKCQkJCSRvdXRbJ3RleHQnXSAuPSAnPGxhYmVsIGNsYXNzPSJwYWRkaW5nX2xhYmVsIj5QYXNzd29yZDo8L2xh'));
	@fwrite($fp, base64_decode('YmVsPjxpbnB1dCB0eXBlPSJwYXNzd29yZCIgbmFtZT0icGFzc3dvcmQiIHZhbHVlPSIiIGlkPSJhZG1pbkxvZ2luUGFzc3dvcmQiPjxicj48YnI+JzsKCQkJCSRvdXRbJ3RleHQnXSAuPSAnPGlucHV0IHR5cGU9InN1Ym1pdCIgdmFsdWU9IkxvZ2luIj48YnI+PGJy'));
	@fwrite($fp, base64_decode('Pic7CgkJCQkkb3V0Wyd0ZXh0J10gLj0gJzwvZm9ybT4nOwoJCQkJJG91dFsndGV4dCddIC49ICc8cD48YWJiciB0aXRsZT0iRGVsZXRlIHRoZSBmaWxlIGluY2x1ZGVzL2NvbmZpZy5pbmMucGhwIGFuZCByZWxvYWQgdGhlIHBhZ2UgdG8gc3RhcnQgU2V0dXAgYWdh'));
	@fwrite($fp, base64_decode('aW4iPkZvcmdvdCBwYXNzd29yZD88L2FiYnI+PC9wPic7CgkJCX0KCgkJCSRvdXRbJ3RleHQnXSAuPSAnCQkJCTwvZGl2Pic7CgkJCSRvdXRbJ3RleHQnXSAuPSAnCQkJPC9kaXY+JzsKCQkJJG91dFsndGV4dCddIC49ICcgIDwvZGl2Pjxicj4nOwoJCQkkb3V0Wyd0'));
	@fwrite($fp, base64_decode('ZXh0J10gLj0gJzxwPjxmb250IHNpemU9Ii0xIj48aT5Qcml2YWN5IGluZm9ybWF0aW9uPC9pPjogQnkgdXNpbmcgdGhlIGxvZ2luIGZ1bmN0aW9uYWxpdHksIHlvdSBhcmUgYWNjZXB0aW5nIHRoYXQgYSAic2Vzc2lvbiBjb29raWUiIGlzIHRlbXBvcmFyaWx5IHN0'));
	@fwrite($fp, base64_decode('b3JlZCBpbiB5b3VyIGJyb3dzZXIuICcuCgkJCSAgICAgICAgICAgICAgICAnVGhlIHNlc3Npb24gY29va2llIGlzIGEgc21hbGwgdGV4dCBmaWxlIHRoYXQgaXMgc2VudCB0byB0aGlzIHdlYnNpdGUgZXZlcnkgdGltZSB5b3UgdmlzaXQgaXQsIHRvIGlkZW50aWZ5'));
	@fwrite($fp, base64_decode('IHlvdSBhcyBhbiBhbHJlYWR5IGxvZ2dlZCBpbiB1c2VyLiAnLgoJCQkgICAgICAgICAgICAgICAgJ0l0IGRvZXMgbm90IHRyYWNrIGFueSBvZiB5b3VyIG9ubGluZSBhY3Rpdml0aWVzIG91dHNpZGUgT0lEcGx1cy4gVGhlIGNvb2tpZSB3aWxsIGJlIGRlc3Ryb3ll'));
	@fwrite($fp, base64_decode('ZCB3aGVuIHlvdSBsb2cgb3V0IG9yIGFmdGVyIGFuIGluYWN0aXZpdHkgb2YgJy5jZWlsKFNFU1NJT05fTElGRVRJTUUvNjApLicgbWludXRlcy48L2ZvbnQ+PC9wPjwvZGl2Pic7CgoJCQkkb3V0Wyd0ZXh0J10gLj0gJzxzY3JpcHQ+ZG9jdW1lbnQuZ2V0RWxlbWVu'));
	@fwrite($fp, base64_decode('dEJ5SWQoImxvZ2luQXJlYSIpLnN0eWxlLnZpc2liaWxpdHkgPSAidmlzaWJsZSI7PC9zY3JpcHQ+JzsKCQl9Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHRyZWUoJiRqc29uLCAkcmFfZW1haWw9bnVsbCwgJG5vbmpzPWZhbHNlLCAkcmVxX2dvdG89JycpIHsKCQkkbG9n'));
	@fwrite($fp, base64_decode('aW5DaGlsZHJlbiA9IGFycmF5KCk7CgoJCWlmIChPSURwbHVzOjphdXRoVXRpbHMoKTo6aXNBZG1pbkxvZ2dlZEluKCkpIHsKCQkJJHJhX3Jvb3RzID0gYXJyYXkoKTsKCgkJCWZvcmVhY2ggKE9JRHBsdXM6OmdldFBhZ2VQbHVnaW5zKCdhZG1pbicpIGFzICRwbHVn'));
	@fwrite($fp, base64_decode('aW4pIHsKCQkJCSRwbHVnaW4tPnRyZWUoJHJhX3Jvb3RzKTsKCQkJfQoKCQkJJHJhX3Jvb3RzW10gPSBhcnJheSgKCQkJCSdpZCcgICAgICAgPT4gJ29pZHBsdXM6bG9nb3V0JGFkbWluJywKCQkJCSdpY29uJyAgICAgPT4gJ3BsdWdpbnMvcHVibGljUGFnZXMvJy5i'));
	@fwrite($fp, base64_decode('YXNlbmFtZShfX0RJUl9fKS4nL3RyZWVpY29uX2xvZ291dC5wbmcnLAoJCQkJJ2NvbmRpdGlvbmFsc2VsZWN0JyA9PiAnYWRtaW5Mb2dvdXQoKScsIC8vIGRlZmluZWQgaW4gb2lkcGx1cy5qcwoJCQkJJ3RleHQnICAgICA9PiAnTG9nIG91dCcKCQkJKTsKCQkJJGxv'));
	@fwrite($fp, base64_decode('Z2luQ2hpbGRyZW5bXSA9IGFycmF5KAoJCQkJJ2lkJyAgICAgICA9PiAnb2lkcGx1czpkdW1teSQnLm1kNShyYW5kKCkpLAoJCQkJJ3RleHQnICAgICA9PiAiTG9nZ2VkIGluIGFzIGFkbWluIiwKCQkJCSdpY29uJyAgICAgPT4gJ3BsdWdpbnMvcHVibGljUGFnZXMv'));
	@fwrite($fp, base64_decode('Jy5iYXNlbmFtZShfX0RJUl9fKS4nL3RyZWVpY29uX2FkbWluLnBuZycsCgkJCQknY29uZGl0aW9uYWxzZWxlY3QnID0+ICdmYWxzZScsIC8vIGR1bW15IG5vZGUgdGhhdCBjYW4ndCBiZSBzZWxlY3RlZAoJCQkJJ3N0YXRlJyAgICA9PiBhcnJheSgib3BlbmVkIiA9'));
	@fwrite($fp, base64_decode('PiB0cnVlKSwKCQkJCSdjaGlsZHJlbicgPT4gJHJhX3Jvb3RzCgkJCSk7CgkJfQoKCQkkcmFfZW1haWxzID0gT0lEcGx1czo6YXV0aFV0aWxzKCk6OmxvZ2dlZEluUmFMaXN0KCk7CgoJCWZvcmVhY2ggKCRyYV9lbWFpbHMgYXMgJHJhX2VtYWlsKSB7CgkJCSRyYV9y'));
	@fwrite($fp, base64_decode('b290cyA9IGFycmF5KCk7CgoJCQlmb3JlYWNoIChPSURwbHVzOjpnZXRQYWdlUGx1Z2lucygncmEnKSBhcyAkcGx1Z2luKSB7CgkJCQkkcGx1Z2luLT50cmVlKCRyYV9yb290cywgJHJhX2VtYWlsKTsKCQkJfQoKCQkJJHJhX3Jvb3RzW10gPSBhcnJheSgKCQkJCSdp'));
	@fwrite($fp, base64_decode('ZCcgICAgICAgPT4gJ29pZHBsdXM6bG9nb3V0JCcuJHJhX2VtYWlsLAoJCQkJJ2NvbmRpdGlvbmFsc2VsZWN0JyA9PiAncmFMb2dvdXQoIicuanNfZXNjYXBlKCRyYV9lbWFpbCkuJyIpJywgLy8gZGVmaW5lZCBpbiBvaWRwbHVzLmpzCgkJCQknaWNvbicgICAgID0+'));
	@fwrite($fp, base64_decode('ICdwbHVnaW5zL3B1YmxpY1BhZ2VzLycuYmFzZW5hbWUoX19ESVJfXykuJy90cmVlaWNvbl9sb2dvdXQucG5nJywKCQkJCSd0ZXh0JyAgICAgPT4gJ0xvZyBvdXQnCgkJCSk7CgkJCWZvcmVhY2ggKE9JRHBsdXNPYmplY3Q6OmdldFJhUm9vdHMoJHJhX2VtYWlsKSBh'));
	@fwrite($fp, base64_decode('cyAkbG9jX3Jvb3QpIHsKCQkJCSRpY28gPSAkbG9jX3Jvb3QtPmdldEljb24oKTsKCQkJCSRyYV9yb290c1tdID0gYXJyYXkoCgkJCQkJJ2lkJyA9PiAnb2lkcGx1czpyYXJvb3QkJy4kbG9jX3Jvb3QtPm5vZGVJZCgpLAoJCQkJCSd0ZXh0JyA9PiAnSnVtcCB0byBS'));
	@fwrite($fp, base64_decode('QSByb290ICcuJGxvY19yb290LT5vYmplY3RUeXBlVGl0bGVTaG9ydCgpLicgJy4kbG9jX3Jvb3QtPmNydWRTaG93SWQoT0lEcGx1c09iamVjdDo6cGFyc2UoJGxvY19yb290Ojpyb290KCkpKSwKCQkJCQknY29uZGl0aW9uYWxzZWxlY3QnID0+ICdvcGVuT2lkSW5Q'));
	@fwrite($fp, base64_decode('YW5lbCgnLmpzX2VzY2FwZSgkbG9jX3Jvb3QtPm5vZGVJZCgpKS4nLCB0cnVlKTsnLAoJCQkJCSdpY29uJyA9PiAhaXNfbnVsbCgkaWNvKSA/ICRpY28gOiAncGx1Z2lucy9wdWJsaWNQYWdlcy8nLmJhc2VuYW1lKF9fRElSX18pLicvdHJlZWljb25fbGluay5wbmcn'));
	@fwrite($fp, base64_decode('CgkJCQkpOwoJCQl9CgkJCSRyYV9lbWFpbF9vcl9uYW1lID0gKG5ldyBPSURwbHVzUkEoJHJhX2VtYWlsKSktPnJhTmFtZSgpOwoJCQlpZiAoJHJhX2VtYWlsX29yX25hbWUgPT0gJycpICRyYV9lbWFpbF9vcl9uYW1lID0gJHJhX2VtYWlsOwoJCQkkbG9naW5DaGls'));
	@fwrite($fp, base64_decode('ZHJlbltdID0gYXJyYXkoCgkJCQknaWQnICAgICAgID0+ICdvaWRwbHVzOmR1bW15JCcubWQ1KHJhbmQoKSksCgkJCQkndGV4dCcgICAgID0+ICJMb2dnZWQgaW4gYXMgIi5odG1sZW50aXRpZXMoJHJhX2VtYWlsX29yX25hbWUpLAoJCQkJJ2ljb24nICAgICA9PiAn'));
	@fwrite($fp, base64_decode('cGx1Z2lucy9wdWJsaWNQYWdlcy8nLmJhc2VuYW1lKF9fRElSX18pLicvdHJlZWljb25fcmEucG5nJywKCQkJCSdjb25kaXRpb25hbHNlbGVjdCcgPT4gJ2ZhbHNlJywgLy8gZHVtbXkgbm9kZSB0aGF0IGNhbid0IGJlIHNlbGVjdGVkCgkJCQknc3RhdGUnICAgID0+'));
	@fwrite($fp, base64_decode('IGFycmF5KCJvcGVuZWQiID0+IHRydWUpLAoJCQkJJ2NoaWxkcmVuJyA9PiAkcmFfcm9vdHMKCQkJKTsKCQl9CgoJCSRqc29uW10gPSBhcnJheSgKCQkJJ2lkJyAgICAgICA9PiAnb2lkcGx1czpsb2dpbicsCgkJCSdpY29uJyAgICAgPT4gJ3BsdWdpbnMvcHVibGlj'));
	@fwrite($fp, base64_decode('UGFnZXMvJy5iYXNlbmFtZShfX0RJUl9fKS4nL3RyZWVpY29uX2xvZ2luLnBuZycsCgkJCSd0ZXh0JyAgICAgPT4gJ0xvZ2luJywKCQkJJ3N0YXRlJyAgICA9PiBhcnJheSgib3BlbmVkIiA9PiBjb3VudCgkbG9naW5DaGlsZHJlbik+MCksCgkJCSdjaGlsZHJlbicg'));
	@fwrite($fp, base64_decode('PT4gJGxvZ2luQ2hpbGRyZW4KCQkpOwoKCQlyZXR1cm4gdHJ1ZTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gdHJlZV9zZWFyY2goJHJlcXVlc3QpIHsKCQlyZXR1cm4gZmFsc2U7Cgl9Cn0KCk9JRHBsdXM6OnJlZ2lzdGVyUGFnZVBsdWdpbihuZXcgT0lEcGx1c1BhZ2VQ'));
	@fwrite($fp, base64_decode('dWJsaWNMb2dpbigpKTsK'));
	@fclose($fp);
}
if (!is_file('plugins/publicPages/090_login/plugin.inc.php')) {
	warn('File has vanished! Will re-create it: plugins/publicPages/090_login/plugin.inc.php');
	writefile_2();
	if (!is_file('plugins/publicPages/090_login/plugin.inc.php')) {
		warn('File cannot be created (not existing): plugins/publicPages/090_login/plugin.inc.php');
	} else if (sha1_file('plugins/publicPages/090_login/plugin.inc.php') != 'f3619031b8a29f6642c6506dfa835db707b5461c') {
		warn('File cannot be created (checksum mismatch): plugins/publicPages/090_login/plugin.inc.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/publicPages/090_login/plugin.inc.php', 0644)) {
		warn('Could not change file permissions of plugins/publicPages/090_login/plugin.inc.php');
	}
} else {
	if (@sha1_file('plugins/publicPages/090_login/plugin.inc.php') !== 'f3619031b8a29f6642c6506dfa835db707b5461c') {
		if (@sha1_file('plugins/publicPages/090_login/plugin.inc.php') !== '4340c5f6b9e499b60629a4457bc6c3e2f6f61d7a') {
			warn('File was modified. Will overwrite the changes now: plugins/publicPages/090_login/plugin.inc.php');
			$tmp = pathinfo('plugins/publicPages/090_login/plugin.inc.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/publicPages/090_login/plugin.inc.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/publicPages/090_login/plugin.inc.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_2();
		if (@sha1_file('plugins/publicPages/090_login/plugin.inc.php') !== 'f3619031b8a29f6642c6506dfa835db707b5461c') {
			warn('File cannot be written (checksum mismatch): plugins/publicPages/090_login/plugin.inc.php');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 110\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 110') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

