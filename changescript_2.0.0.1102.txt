<?php /* <ViaThinkSoftSignature>
eDx73VCXs6QQ87KuIzVAkUSHO/9utOHzkxZQjpUYyvHdzfkhK3d7aLRwVQ8xBNeAO
NUKqVcsHTKmdz3HyYr4Mi+CTUzvgspTxmTimJFL8CEY1lqRd9UJG4t+lKQyKxdDVa
YuFXpfJ5Cxa62v1e1LngPV/kpX+r5t0wMqCGYMSACpInn6arw8VNwGXbsXFAeWLr2
G51x1ztJf4WI+VgEbJipxMLBcoGZXmXentu5cd2KsG6ZHk4kvc17vcLXnwCOx8XLw
3gZYtcubcPpBMTPaCMoLcSYWgQQ40P05FEmH2msVlyYLymiDcnRRwSUiFqZnGl+7r
tUafmNpr37s/qOOAjNG+Cw5Zo1OiX7XeEEmuE6iaLekU9UWV9VSUVj/5jJlbBHFHg
I173lujhlabgF9PqeDG/8Ru7BL89OS4dXS54lwuNOSqV+9zqLFOb7gwCHRHH0WIAc
CjsNglyBzwrMP8UCHvmuewz869DqhLqu/Pcxr6w7aPey3Oq4tqtYbCxIQr3kvD4bP
3ebXqhGb2LKW+wGA4AWfaQeqSfjCXqAr3z31A9xrnFcycz+RSQi8jOipdS1E8jQrJ
Svo6vYmigqaJ0O4fxxMzFndRgFPJ6khQocnMJ9iCVwE2mX0f9swB/v31rUiNr/6c1
sb+xweJgoWiCTVquOnbuB/DkMPGp2KjOfCwZCHhl9lnRb0/9u85tHXrzSnFXBRuhF
eBaT3oueMOLgD8ULxjwEIzqoZEDT1Ifj7sQ8MB7HeaY/yPhrYU170mTNOjCtIcw5c
aOAi8+58LH015x5NPIe/6RRjZmrzfcqu4xMzRdm9M3fjloINaiFmEnlLPaeVLPXj4
FEd0/1qTdR/3YSIkqPm3l3xmtsQv0Npvzu8cTCANrmKYUuIUO4IR3gwsFygO/rMzP
FlsUxj/80lEqe55bUEBp+x+hGXwB0UzotOBgsVoPrELGaeZxt2MU86fyn7awDTf8b
r77MCh+zUj+xGWkg6Cbr4NmCHzSYo4WbYk9SsUSbwnaE1NfCiTgOw1Ge1U1d+25Dz
jD4z0W4CpRtSSnPZIhrAOVRnYSizi950W8qR5oRLd5pbjMWeZshwxgX4nNM0+P/qx
dEZAtzP+grs7JUuAXed85FyawfldMlboRRFOZilk89AY7eP7xN0wq1XQr3oKNFRQK
LIZOTdbIai1pihtU6U7WRAgPJGBsWNre9sTZhVZKF+IK03IwZZ4MYehpoz84XWE/+
mjq0kWK8GX46xbE37RyxL2e+swXAM8g7q3PRh+YrrdbK2irBoVwhgDfXiRr4QAItX
tIIkEjtwQl6lA7kMQw9Bq6yqF5NQM1OIsG2FnI7hna2ZpGFT6pAtiXTEpRVnyqT4z
g==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('.version.php')) !== '<?php // Revision 1101') {
	err('This update can only be applied to OIDplus version 2.0.0.1101!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: includes/db_updates/update1002.inc.php
function writefile_1() {
	@$fp = fopen('includes/db_updates/update1002.inc.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMiBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgp1c2UgVmlhVGhpbmtTb2Z0XE9JRHBsdXNcT0lEcGx1c0RhdGFiYXNlQ29ubmVjdGlvbjsKCi8qKgogKiBUaGlzIGZ1bmN0aW9uIGlzIGludGVybmFsbHkgY2FsbGVkIGJ5IG9pZHBsdXNf'));
	@fwrite($fp, base64_decode('ZGJ1cGRhdGVfMTAwMigpLgogKiBJdCBjaGFuZ2VzIHRoZSBhdXRoIGtleXMgQTEqIyBhbmQgQTIjIHRvIFZUUy1NQ0YgYW5kIEEzIyB0byBCQ3J5cHQtTUNGLgogKiBAcGFyYW0gT0lEcGx1c0RhdGFiYXNlQ29ubmVjdGlvbiAkZGIgaXMgdGhlIE9JRHBsdXNEYXRh'));
	@fwrite($fp, base64_decode('YmFzZUNvbm5lY3Rpb24gY2xhc3MKICovCmZ1bmN0aW9uIG9pZHBsdXNfZGJ1cGRhdGVfMTAwMl9taWdyYXRlX3JhX3Bhc3N3b3JkcyhPSURwbHVzRGF0YWJhc2VDb25uZWN0aW9uICRkYikgewoJJHJlcyA9ICRkYi0+cXVlcnkoInNlbGVjdCAqIGZyb20gIyMjcmEg'));
	@fwrite($fp, base64_decode('Iik7Cgl3aGlsZSAoJHJvdyA9ICRyZXMtPmZldGNoX2FycmF5KCkpIHsKCQkkc2FsdCA9IGlzc2V0KCRyb3dbJ3NhbHQnXSkgPyAkcm93WydzYWx0J10gOiAnJzsKCQkkbmV3X2F1dGhfa2V5ID0gdnRzX2NyeXB0X2NvbnZlcnRfZnJvbV9vbGRfb2lkcGx1cygkcm93'));
	@fwrite($fp, base64_decode('WydhdXRoa2V5J10sICRzYWx0KTsKCQkkZW1haWwgPSAkcm93WydlbWFpbCddOwoJCWlmICgkbmV3X2F1dGhfa2V5ICE9PSAkcm93WydhdXRoa2V5J10pIHsKCQkJLy9lY2hvICdNaWdyYXRlIGF1dGhrZXkgJy4kcm93WydhdXRoa2V5J10uJyB0byAnLiRuZXdfYXV0'));
	@fwrite($fp, base64_decode('aF9rZXkuJyBmb3IgJy4kZW1haWwuJzxicj48YnI+JzsKCQkJJGRiLT5xdWVyeSgidXBkYXRlICMjI3JhIHNldCBhdXRoa2V5ID0gPywgc2FsdCA9ID8gd2hlcmUgZW1haWwgPSA/IiwgYXJyYXkoJG5ld19hdXRoX2tleSwgJycsICRlbWFpbCkpOwoJCX0KCX0KfQoK'));
	@fwrite($fp, base64_decode('LyoqCiAqIFRoaXMgZnVuY3Rpb24gY29udmVydHMgQTEqIywgQTIjLCBBMyMgaGFzaGVzIHRvIENyeXB0IGNvbXBhdGlibGUgaGFzaGVzLgogKiBAcGFyYW0gc3RyaW5nICRhdXRoa2V5IGlzIG9sZCBkYXRhYmFzZSBmaWVsZCB2YWx1ZSAiYXV0aGtleSIKICogQHBh'));
	@fwrite($fp, base64_decode('cmFtIHN0cmluZyAkc2FsdCBpcyBvbGQgZGF0YWJhc2UgZmllbGQgdmFsdWUgInNhbHQiCiAqIEByZXR1cm5zIE5ldyBhdXRoa2V5IGZpZWxkIChDcnlwdCBjb21wYXRpYmxlIGhhc2gpCiAqLwpmdW5jdGlvbiB2dHNfY3J5cHRfY29udmVydF9mcm9tX29sZF9vaWRw'));
	@fwrite($fp, base64_decode('bHVzKCRhdXRoa2V5LCAkc2FsdCkgewoJaWYgKHByZWdfbWF0Y2goJ0BeQTEoW2FiY2RdKSMoLispOiguKykkQCcsICRhdXRoa2V5LCAkbSkpIHsKCQkvLyBBMWEjaGFzaGFsZ286WCB3aXRoIFggYmVpbmcgSChzYWx0K3Bhc3N3b3JkKSBpbiBoZXgtIG9yIHJmYzQ2'));
	@fwrite($fp, base64_decode('NDgtYmFzZTY0LW5vdGF0aW9uCgkJLy8gQTFiI2hhc2hhbGdvOlggd2l0aCBYIGJlaW5nIEgocGFzc3dvcmQrc2FsdCkgaW4gaGV4LSBvciByZmM0NjQ4LWJhc2U2NC1ub3RhdGlvbgoJCS8vIEExYyNoYXNoYWxnbzpYIHdpdGggWCBiZWluZyBIKHNhbHQrcGFzc3dv'));
	@fwrite($fp, base64_decode('cmQrc2FsdCkgaW4gaGV4LSBvciByZmM0NjQ4LWJhc2U2NC1ub3RhdGlvbgoJCS8vIEExZCNoYXNoYWxnbzpYIHdpdGggWCBiZWluZyBIX0hNQUMocGFzc3dvcmQsc2FsdCkgaW4gaGV4LSBvciByZmM0NjQ4LWJhc2U2NC1ub3RhdGlvbgoJCSRtb2RlID0gJyc7IC8v'));
	@fwrite($fp, base64_decode('IGF2b2lkIFBIUHN0YW4gd2FybmluZwoJCWlmICgkbVsxXSA9PSAnYScpICRtb2RlID0gJ3NwJzsKCQllbHNlIGlmICgkbVsxXSA9PSAnYicpICRtb2RlID0gJ3BzJzsKCQllbHNlIGlmICgkbVsxXSA9PSAnYycpICRtb2RlID0gJ3Nwcyc7CgkJZWxzZSBpZiAoJG1b'));
	@fwrite($fp, base64_decode('MV0gPT0gJ2QnKSAkbW9kZSA9ICdobWFjJzsKCQllbHNlIGFzc2VydChmYWxzZSk7CgkJJGFsZ28gPSAkbVsyXTsKCQkkYmluX3NhbHQgPSAkc2FsdDsKCQlpZiAoKCRhbGdvID09ICdzaGEzLTUxMicpIHx8ICgkYWxnbyA9PSAnc2hhMy0zODQnKSB8fCAoJGFsZ28g'));
	@fwrite($fp, base64_decode('PT0gJ3NoYTUxMicpIHx8ICgkYWxnbyA9PSAnc2hhMzg0JykpIHsKCQkJJGJpbl9oYXNoID0gYmFzZTY0X2RlY29kZSgkbVszXSk7CgkJfSBlbHNlIHsKCQkJJGJpbl9oYXNoID0gaGV4MmJpbigkbVszXSk7CgkJfQoJCXJldHVybiBjcnlwdF9tb2R1bGFyX2Zvcm1h'));
	@fwrite($fp, base64_decode('dF9lbmNvZGUoT0lEX01DRl9WVFNfVjEsICRiaW5fc2FsdCwgJGJpbl9oYXNoLCBhcnJheSgnYSc9PiRhbGdvLCdtJz0+JG1vZGUpKTsKCX0gZWxzZSBpZiAocHJlZ19tYXRjaCgnQF5BMiMoLispJEAnLCAkYXV0aGtleSwgJG0pKSB7CgkJLy8gQTIjWCB3aXRoIFgg'));
	@fwrite($fp, base64_decode('YmVpbmcgc2hhMyhzYWx0K3Bhc3N3b3JkKSBpbiByZmM0NjQ4LWJhc2U2NC1ub3RhdGlvbgoJCSRtb2RlID0gJ3NwJzsKCQkkYWxnbyA9ICdzaGEzLTUxMic7CgkJJGJpbl9zYWx0ID0gJHNhbHQ7CgkJJGJpbl9oYXNoID0gYmFzZTY0X2RlY29kZSgkbVsxXSk7CgkJ'));
	@fwrite($fp, base64_decode('cmV0dXJuIGNyeXB0X21vZHVsYXJfZm9ybWF0X2VuY29kZShPSURfTUNGX1ZUU19WMSwgJGJpbl9zYWx0LCAkYmluX2hhc2gsIGFycmF5KCdhJz0+JGFsZ28sJ20nPT4kbW9kZSkpOwoJfSBlbHNlIGlmIChwcmVnX21hdGNoKCdAXkEzIyguKykkQCcsICRhdXRoa2V5'));
	@fwrite($fp, base64_decode('LCAkbSkpIHsKCQkvLyBBMyNYIHdpdGggWCBiZWluZyBiY3J5cHQgIFtub3QgVlRTIGhhc2ghXQoJCXJldHVybiAkbVsxXTsKCX0gZWxzZSB7CgkJLy8gTm90aGluZyB0byBjb252ZXJ0CgkJcmV0dXJuICRhdXRoa2V5OwoJfQp9CgovKioKICogVGhpcyBmdW5jdGlv'));
	@fwrite($fp, base64_decode('biB3aWxsIGJlIGNhbGxlZCBieSBPSURwbHVzRGF0YWJhc2VDb25uZWN0aW9uLmNsYXNzLnBocCBhdCBtZXRob2QgYWZ0ZXJDb25uZWN0KCkuCiAqIEBwYXJhbSBPSURwbHVzRGF0YWJhc2VDb25uZWN0aW9uICRkYiBpcyB0aGUgT0lEcGx1c0RhdGFiYXNlQ29ubmVj'));
	@fwrite($fp, base64_decode('dGlvbiBjbGFzcwogKiBAcmV0dXJuIGludCBuZXcgdmVyc2lvbiBzZXQKICogQHRocm93cyBcVmlhVGhpbmtTb2Z0XE9JRHBsdXNcT0lEcGx1c0V4Y2VwdGlvbgogKi8KZnVuY3Rpb24gb2lkcGx1c19kYnVwZGF0ZV8xMDAyKE9JRHBsdXNEYXRhYmFzZUNvbm5lY3Rp'));
	@fwrite($fp, base64_decode('b24gJGRiKSB7CglpZiAoJGRiLT50cmFuc2FjdGlvbl9zdXBwb3J0ZWQoKSkgJGRiLT50cmFuc2FjdGlvbl9iZWdpbigpOwoKCWlmICgkZGItPmdldFNsYW5nKCktPmlkKCkgPT0gJ21zc3FsJykgewoJCSRkYi0+cXVlcnkoImFsdGVyIHRhYmxlICMjI3JhIGFsdGVy'));
	@fwrite($fp, base64_decode('IGNvbHVtbiBbYXV0aGtleV0gW3ZhcmNoYXJdKDI1MCkgTlVMTDsiKTsKCQlvaWRwbHVzX2RidXBkYXRlXzEwMDJfbWlncmF0ZV9yYV9wYXNzd29yZHMoJGRiKTsKCQl0cnkgewoJCQkkZGItPnF1ZXJ5KCJhbHRlciB0YWJsZSAjIyNyYSBkcm9wIGNvbHVtbiBbc2Fs'));
	@fwrite($fp, base64_decode('dF07Iik7CgkJfSBjYXRjaChFeGNlcHRpb24gJGUpIHt9Cgl9CgllbHNlIGlmICgkZGItPmdldFNsYW5nKCktPmlkKCkgPT0gJ215c3FsJykgewoJCSRkYi0+cXVlcnkoImFsdGVyIHRhYmxlICMjI3JhIG1vZGlmeSBhdXRoa2V5IHZhcmNoYXIoMjUwKSBOVUxMOyIp'));
	@fwrite($fp, base64_decode('OwoJCW9pZHBsdXNfZGJ1cGRhdGVfMTAwMl9taWdyYXRlX3JhX3Bhc3N3b3JkcygkZGIpOwoJCXRyeSB7CgkJCSRkYi0+cXVlcnkoImFsdGVyIHRhYmxlICMjI3JhIGRyb3AgY29sdW1uIHNhbHQ7Iik7CgkJfSBjYXRjaChFeGNlcHRpb24gJGUpIHt9Cgl9CgllbHNl'));
	@fwrite($fp, base64_decode('IGlmICgkZGItPmdldFNsYW5nKCktPmlkKCkgPT0gJ3Bnc3FsJykgewoJCSRkYi0+cXVlcnkoImFsdGVyIHRhYmxlICMjI3JhIGFsdGVyIGNvbHVtbiBhdXRoa2V5IHR5cGUgdmFyY2hhcigyNTApIik7CgkJb2lkcGx1c19kYnVwZGF0ZV8xMDAyX21pZ3JhdGVfcmFf'));
	@fwrite($fp, base64_decode('cGFzc3dvcmRzKCRkYik7CgkJdHJ5IHsKCQkJJGRiLT5xdWVyeSgiYWx0ZXIgdGFibGUgIyMjcmEgZHJvcCBjb2x1bW4gc2FsdCIpOwoJCX0gY2F0Y2goRXhjZXB0aW9uICRlKSB7fQoJfQoJZWxzZSBpZiAoJGRiLT5nZXRTbGFuZygpLT5pZCgpID09ICdvcmFjbGUn'));
	@fwrite($fp, base64_decode('KSB7CgkJJGRiLT5xdWVyeSgiYWx0ZXIgdGFibGUgIyMjcmEgbW9kaWZ5IGF1dGhrZXkgdmFyY2hhcjIoMjUwKSIpOwoJCW9pZHBsdXNfZGJ1cGRhdGVfMTAwMl9taWdyYXRlX3JhX3Bhc3N3b3JkcygkZGIpOwoJCXRyeSB7CgkJCSRkYi0+cXVlcnkoImFsdGVyIHRh'));
	@fwrite($fp, base64_decode('YmxlICMjI3JhIHNldCB1bnVzZWQgY29sdW1uIHNhbHQiKTsKCQkJJGRiLT5xdWVyeSgiYWx0ZXIgdGFibGUgIyMjcmEgc2V0IGRyb3AgdW51c2VkIGNvbHVtbnMiKTsKCQl9IGNhdGNoKEV4Y2VwdGlvbiAkZSkge30KCX0KCWVsc2UgaWYgKCRkYi0+Z2V0U2xhbmco'));
	@fwrite($fp, base64_decode('KS0+aWQoKSA9PSAnc3FsaXRlJykgewoJCW9pZHBsdXNfZGJ1cGRhdGVfMTAwMl9taWdyYXRlX3JhX3Bhc3N3b3JkcygkZGIpOwoJCXRyeSB7CgkJCSRkYi0+cXVlcnkoImFsdGVyIHRhYmxlICMjI3JhIGRyb3AgY29sdW1uIHNhbHQiKTsKCQl9IGNhdGNoKEV4Y2Vw'));
	@fwrite($fp, base64_decode('dGlvbiAkZSkge30KCX0KCWVsc2UgaWYgKCRkYi0+Z2V0U2xhbmcoKS0+aWQoKSA9PSAnYWNjZXNzJykgewoJCW9pZHBsdXNfZGJ1cGRhdGVfMTAwMl9taWdyYXRlX3JhX3Bhc3N3b3JkcygkZGIpOwoJCXRyeSB7CgkJCSRkYi0+cXVlcnkoImFsdGVyIHRhYmxlICMj'));
	@fwrite($fp, base64_decode('I3JhIGRyb3AgY29sdW1uIHNhbHQiKTsKCQl9IGNhdGNoKEV4Y2VwdGlvbiAkZSkge30KCX0KCgkvLyBBdXRoIHBsdWdpbnMgQTEgYW5kIEEyIGhhdmUgYmVlbiByZXBsYWNlZCB3aXRoIEE1CgkvLyBOb3RlIHRoYXQgeW91IGNhbm5vdCB1c2UgYHZhbHVlYCBpbiB0'));
	@fwrite($fp, base64_decode('aGUgd2hlcmUgY2xhdXNlIG9uIE1TU1FMLCBiZWNhdXNlICJ0ZXh0IGFuZCB2YXJjaGFyIiBhcmUgaW5jb21wYXRpYmxlLi4uCgkkcmVzID0gJGRiLT5xdWVyeSgiU0VMRUNUIHZhbHVlIGZyb20gIyMjY29uZmlnIHdoZXJlIG5hbWUgPSAnZGVmYXVsdF9yYV9hdXRo'));
	@fwrite($fp, base64_decode('X21ldGhvZCciKTsKCWlmICgkcm93ID0gJHJlcy0+ZmV0Y2hfYXJyYXkoKSkgewoJCWlmICgoJHJvd1sndmFsdWUnXSA9PSAnQTFfcGhwZ2VuZXJpY19zYWx0ZWRfaGV4JykgfHwgKCRyb3dbJ3ZhbHVlJ10gPT0gJ0EyX3NoYTNfc2FsdGVkX2Jhc2U2NCcpKSB7CgkJ'));
	@fwrite($fp, base64_decode('CSRkYi0+cXVlcnkoIlVQREFURSAjIyNjb25maWcgU0VUIHZhbHVlID0gJ0E1X3Z0c19tY2YnIFdIRVJFIG5hbWUgPSAnZGVmYXVsdF9yYV9hdXRoX21ldGhvZCciKTsKCQl9Cgl9CgoJJHZlcnNpb24gPSAxMDAyOwoJJGRiLT5xdWVyeSgiVVBEQVRFICMjI2NvbmZp'));
	@fwrite($fp, base64_decode('ZyBTRVQgdmFsdWUgPSA/IFdIRVJFIG5hbWUgPSAnZGF0YWJhc2VfdmVyc2lvbiciLCBhcnJheSgkdmVyc2lvbikpOwoKCWlmICgkZGItPnRyYW5zYWN0aW9uX3N1cHBvcnRlZCgpKSAkZGItPnRyYW5zYWN0aW9uX2NvbW1pdCgpOwoKCXJldHVybiAkdmVyc2lvbjsK'));
	@fwrite($fp, base64_decode('fQo='));
	@fclose($fp);
}
if (!is_file('includes/db_updates/update1002.inc.php')) {
	warn('File has vanished! Will re-create it: includes/db_updates/update1002.inc.php');
	writefile_1();
	if (!is_file('includes/db_updates/update1002.inc.php')) {
		warn('File cannot be created (not existing): includes/db_updates/update1002.inc.php');
	} else if (sha1_file('includes/db_updates/update1002.inc.php') != '0812eb99c4182ed1fde7b526b2a5e031e222e24c') {
		warn('File cannot be created (checksum mismatch): includes/db_updates/update1002.inc.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/db_updates/update1002.inc.php', 0644)) {
		warn('Could not change file permissions of includes/db_updates/update1002.inc.php');
	}
} else {
	if (@sha1_file('includes/db_updates/update1002.inc.php') !== '0812eb99c4182ed1fde7b526b2a5e031e222e24c') {
		if (@sha1_file('includes/db_updates/update1002.inc.php') !== 'afbc5c7e7b2b16fb69fdca4eefc626ef486c7328') {
			warn('File was modified. Will overwrite the changes now: includes/db_updates/update1002.inc.php');
			$tmp = pathinfo('includes/db_updates/update1002.inc.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/db_updates/update1002.inc.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('includes/db_updates/update1002.inc.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('includes/db_updates/update1002.inc.php') !== '0812eb99c4182ed1fde7b526b2a5e031e222e24c') {
			warn('File cannot be written (checksum mismatch): includes/db_updates/update1002.inc.php');
		}
	}
}

// Files different: plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php
function writefile_2() {
	@$fp = fopen('plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDIzIERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCm5hbWVzcGFjZSBWaWFUaGlua1NvZnRcT0lEcGx1czsKCi8vIHBocGNzOmRpc2FibGUgUFNSMS5GaWxlcy5TaWRlRWZmZWN0cwpcZGVmaW5lZCgnSU5TSURFX09JRFBMVVMnKSBvciBkaWU7Ci8vIHBo'));
	@fwrite($fp, base64_decode('cGNzOmVuYWJsZSBQU1IxLkZpbGVzLlNpZGVFZmZlY3RzCgpjbGFzcyBPSURwbHVzQXV0aFBsdWdpblZ0c01jZiBleHRlbmRzIE9JRHBsdXNBdXRoUGx1Z2luIHsKCglwdWJsaWMgZnVuY3Rpb24gdmVyaWZ5KE9JRHBsdXNSQUF1dGhJbmZvICRhdXRoSW5mbywgJGNo'));
	@fwrite($fp, base64_decode('ZWNrX3Bhc3N3b3JkKSB7CgkJJGF1dGhLZXkgPSAkYXV0aEluZm8tPmdldEF1dGhLZXkoKTsKCgkJaWYgKHZ0c19jcnlwdF92ZXJzaW9uKCRhdXRoS2V5KSAhPSAnMCcpIHsKCQkJcmV0dXJuIHZ0c19wYXNzd29yZF92ZXJpZnkoJGNoZWNrX3Bhc3N3b3JkLCAkYXV0'));
	@fwrite($fp, base64_decode('aEtleSk7CgkJfSBlbHNlIHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCX0KCglwdWJsaWMgZnVuY3Rpb24gZ2VuZXJhdGUoJHBhc3N3b3JkKTogT0lEcGx1c1JBQXV0aEluZm8gewoJCSRoYXNoYWxnbyA9ICdzaGEzLTUxMic7IC8vIHdlIGNhbiBzYWZlbHkgdXNlIGl0'));
	@fwrite($fp, base64_decode('LCBiZWNhdXNlIHdlIGhhdmUgYSBwdXJlLVBIUCBpbXBsZW1lbnRhdGlvbiBzaGlwcGVkIHdpdGggT0lEcGx1cwoKCQkkc2FsdCA9IHJhbmRvbV9ieXRlc19leCg1MCwgdHJ1ZSwgdHJ1ZSk7CgoJCWlmIChmdW5jdGlvbl9leGlzdHMoJ3NoYTNfNTEyX2htYWMnKSkg'));
	@fwrite($fp, base64_decode('ewoJCQkkY2FsY19hdXRoa2V5ID0gdnRzX3Bhc3N3b3JkX2hhc2goJHBhc3N3b3JkLCBQQVNTV09SRF9WVFNfTUNGMSwgYXJyYXkoCgkJCQknYWxnbycgPT4gJGhhc2hhbGdvLAoJCQkJJ21vZGUnID0+ICdobWFjJwoJCQkpKTsKCQl9IGVsc2UgaWYgKGZ1bmN0aW9u'));
	@fwrite($fp, base64_decode('X2V4aXN0cygnc2hhM181MTInKSkgewoJCQkkY2FsY19hdXRoa2V5ID0gdnRzX3Bhc3N3b3JkX2hhc2goJHBhc3N3b3JkLCBQQVNTV09SRF9WVFNfTUNGMSwgYXJyYXkoCgkJCQknYWxnbycgPT4gJGhhc2hhbGdvLAoJCQkJJ21vZGUnID0+ICdwcycgLy8gJ3BzJyBt'));
	@fwrite($fp, base64_decode('ZWFucyBQYXNzd29yZCtTYWx0IGNvbmNhdGVuYXRlZAoJCQkpKTsKCQl9IGVsc2UgewoJCQkkY2FsY19hdXRoa2V5ID0gJyc7IC8vIGF2b2lkIFBIUHN0YW4gd2FybmluZwoJCQlhc3NlcnQoZmFsc2UpOwoJCX0KCgkJcmV0dXJuIG5ldyBPSURwbHVzUkFBdXRoSW5m'));
	@fwrite($fp, base64_decode('bygkY2FsY19hdXRoa2V5KTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gYXZhaWxhYmxlRm9ySGFzaCgmJHJlYXNvbik6IGJvb2wgewoJCXJldHVybiBmdW5jdGlvbl9leGlzdHMoJ3Z0c19wYXNzd29yZF9oYXNoJykgJiYgKGZ1bmN0aW9uX2V4aXN0cygnc2hhM181MTJf'));
	@fwrite($fp, base64_decode('aG1hYycpIHx8IGZ1bmN0aW9uX2V4aXN0cygnc2hhM181MTInKSk7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGF2YWlsYWJsZUZvclZlcmlmeSgmJHJlYXNvbik6IGJvb2wgewoJCXJldHVybiBmdW5jdGlvbl9leGlzdHMoJ3Z0c19wYXNzd29yZF92ZXJpZnknKTsKCX0K'));
	@fwrite($fp, base64_decode('Cn0K'));
	@fclose($fp);
}
if (!is_file('plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php')) {
	warn('File has vanished! Will re-create it: plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php');
	writefile_2();
	if (!is_file('plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php')) {
		warn('File cannot be created (not existing): plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php');
	} else if (sha1_file('plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php') != '15e01f2b67c168aab16e2d0e90ba50764b758a81') {
		warn('File cannot be created (checksum mismatch): plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php', 0644)) {
		warn('Could not change file permissions of plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php');
	}
} else {
	if (@sha1_file('plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php') !== '15e01f2b67c168aab16e2d0e90ba50764b758a81') {
		if (@sha1_file('plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php') !== 'f196f322e2c75ba70abcab93bf68b1de98ac40da') {
			warn('File was modified. Will overwrite the changes now: plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php');
			$tmp = pathinfo('plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_2();
		if (@sha1_file('plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php') !== '15e01f2b67c168aab16e2d0e90ba50764b758a81') {
			warn('File cannot be written (checksum mismatch): plugins/viathinksoft/auth/A5_vts_mcf/OIDplusAuthPluginVtsMcf.class.php');
		}
	}
}

// Files different: vendor/danielmarschall/php_utils/vts_crypt.inc.php
function writefile_3() {
	@$fp = fopen('vendor/danielmarschall/php_utils/vts_crypt.inc.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIFZpYVRoaW5rU29mdCBNb2R1bGFyIENyeXB0IEZvcm1hdCAxLjAgLyB2dHNfcGFzc3dvcmRfaGFzaCgpIC8gdnRzX3Bhc3N3b3JkX3ZlcmlmeSgpCiAqIENvcHlyaWdodCAyMDIzIERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKiBS'));
	@fwrite($fp, base64_decode('ZXZpc2lvbiAyMDIzLTAyLTI3CiAqCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExp'));
	@fwrite($fp, base64_decode('Y2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3Jl'));
	@fwrite($fp, base64_decode('ZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhl'));
	@fwrite($fp, base64_decode('ciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwoKLyoKClRoZSBmdW5jdGlvbiB2'));
	@fwrite($fp, base64_decode('dHNfcGFzc3dvcmRfaGFzaCgpIHJlcGxhY2VzIHBhc3N3b3JkX2hhc2goKQphbmQgYWRkcyB0aGUgVmlhVGhpbmtTb2Z0IE1vZHVsYXIgQ3J5cHQgRm9ybWF0IDEuMCBoYXNoIGFzIHdlbGwgYXMKYWxsIGhhc2hlcyBmcm9tIHBhc3N3b3JkX2hhc2goKSBhbmQgY3J5'));
	@fwrite($fp, base64_decode('cHQoKS4KClRoZSBmdW5jdGlvbiB2dHNfcGFzc3dvcmRfdmVyaWZ5KCkgcmVwbGFjZXMgcGFzc3dvcmRfdmVyaWZ5KCkuCgpWaWFUaGlua1NvZnQgTW9kdWxhciBDcnlwdCBGb3JtYXQgMS4wIHBlcmZvcm1zIGEgc2ltcGxlIGhhc2ggb3IgSE1BQyBvcGVyYXRpb24u'));
	@fwrite($fp, base64_decode('Ck5vIGtleSBkZXJpdmF0aW9uIGZ1bmN0aW9uIG9yIGl0ZXJhdGlvbnMgYXJlIHBlcmZvcm1lZC4KRm9ybWF0OgoJJDEuMy42LjEuNC4xLjM3NDc2LjMuMC4xLjEkYT08YWxnbz4sbT08bW9kZT4kPHNhbHQ+JDxoYXNoPgp3aGVyZSA8YWxnbz4gaXMgYW55IHZhbGlk'));
	@fwrite($fp, base64_decode('IGhhc2ggYWxnb3JpdGhtIChuYW1lIHNjaGVtZSBvZiBQSFAgaGFzaF9hbGdvcygpIHByZWZlcnJlZCksIGUuZy4KCXNoYTMtNTEyCglzaGEzLTM4NAoJc2hhMy0yNTYKCXNoYTMtMjI0CglzaGE1MTIKCXNoYTUxMi8yNTYKCXNoYTUxMi8yMjQKCXNoYTM4NAoJc2hh'));
	@fwrite($fp, base64_decode('MjU2CglzaGEyMjQKCXNoYTEKCW1kNQpWYWxpZCA8bW9kZT4gOgoJc3AgPSBzYWx0ICsgcGFzc3dvcmQKCXBzID0gcGFzc3dvcmQgKyBzYWx0CglzcHMgPSBzYWx0ICsgcGFzc3dvcmQgKyBzYWx0CglobWFjID0gSE1BQyAoc2FsdCBpcyB0aGUga2V5KQpMaWtlIG1v'));
	@fwrite($fp, base64_decode('c3QgQ3J5cHQtaGFzaGVzLCA8c2FsdD4gYW5kIDxoYXNoPiBhcmUgUmFkaXg2NCBjb2RlZAp3aXRoIGFscGhhYmV0ICcuLzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6JyBhbmQgbm8gcGFkZGluZy4K'));
	@fwrite($fp, base64_decode('TGluayB0byB0aGUgb25saW5lIHNwZWNpZmljYXRpb246CglodHRwczovL29pZHBsdXMudmlhdGhpbmtzb2Z0LmNvbS9vaWRwbHVzLz9nb3RvPW9pZCUzQTEuMy42LjEuNC4xLjM3NDc2LjMuMC4xLjEKUmVmZXJlbmNlIGltcGxlbWVudGF0aW9uIGluIFBIUDoKCWh0'));
	@fwrite($fp, base64_decode('dHBzOi8vZ2l0aHViLmNvbS9kYW5pZWxtYXJzY2hhbGwvcGhwX3V0aWxzL2Jsb2IvbWFzdGVyL3Z0c19jcnlwdC5pbmMucGhwCgoqLwoKcmVxdWlyZV9vbmNlIF9fRElSX18gLiAnL21pc2NfZnVuY3Rpb25zLmluYy5waHAnOwoKZGVmaW5lKCdPSURfTUNGX1ZUU19W'));
	@fwrite($fp, base64_decode('MScsICAgICAnMS4zLjYuMS40LjEuMzc0NzYuMy4wLjEuMScpOyAvLyB7IGlzbygxKSBpZGVudGlmaWVkLW9yZ2FuaXphdGlvbigzKSBkb2QoNikgaW50ZXJuZXQoMSkgcHJpdmF0ZSg0KSBlbnRlcnByaXNlKDEpIDM3NDc2IHNwZWNpZmljYXRpb25zKDMpIG1pc2Mo'));
	@fwrite($fp, base64_decode('MCkgbW9kdWxhci1jcnlwdC1mb3JtYXQoMSkgdnRzLWNyeXB0LXYxKDEpIH0KCi8vIFZhbGlkIGFsZ29yaXRobXMgZm9yIHZ0c19wYXNzd29yZF9oYXNoKCk6CmRlZmluZSgnUEFTU1dPUkRfU1REX0RFUycsICAgJ3N0ZF9kZXMnKTsgICAgICAgLy8gQWxnb3JpdGht'));
	@fwrite($fp, base64_decode('IGZyb20gY3J5cHQoKQpkZWZpbmUoJ1BBU1NXT1JEX0VYVF9ERVMnLCAgICdleHRfZGVzJyk7ICAgICAgIC8vIEFsZ29yaXRobSBmcm9tIGNyeXB0KCkKZGVmaW5lKCdQQVNTV09SRF9NRDUnLCAgICAgICAnbWQ1Jyk7ICAgICAgICAgICAvLyBBbGdvcml0aG0gZnJv'));
	@fwrite($fp, base64_decode('bSBjcnlwdCgpCmRlZmluZSgnUEFTU1dPUkRfQkxPV0ZJU0gnLCAgJ2Jsb3dmaXNoJyk7ICAgICAgLy8gQWxnb3JpdGhtIGZyb20gY3J5cHQoKQpkZWZpbmUoJ1BBU1NXT1JEX1NIQTI1NicsICAgICdzaGEyNTYnKTsgICAgICAgIC8vIEFsZ29yaXRobSBmcm9tIGNy'));
	@fwrite($fp, base64_decode('eXB0KCkKZGVmaW5lKCdQQVNTV09SRF9TSEE1MTInLCAgICAnc2hhNTEyJyk7ICAgICAgICAvLyBBbGdvcml0aG0gZnJvbSBjcnlwdCgpCmRlZmluZSgnUEFTU1dPUkRfVlRTX01DRjEnLCAgT0lEX01DRl9WVFNfVjEpOyAgLy8gQWxnb3JpdGhtIGZyb20gVmlhVGhp'));
	@fwrite($fp, base64_decode('bmtTb2Z0Ci8vIE90aGVyIHZhbGlkIHZhbHVlcyAoYWxyZWFkeSBkZWZpbmVkIGluIFBIUCk6Ci8vIC0gUEFTU1dPUkRfREVGQVVMVAovLyAtIFBBU1NXT1JEX0JDUllQVAovLyAtIFBBU1NXT1JEX0FSR09OMkkKLy8gLSBQQVNTV09SRF9BUkdPTjJJRAoKLy8gLS0t'));
	@fwrite($fp, base64_decode('IFBhcnQgMTogTW9kdWxhciBDcnlwdCBGb3JtYXQgZW5jb2RlL2RlY29kZQoKZnVuY3Rpb24gY3J5cHRfbW9kdWxhcl9mb3JtYXRfZW5jb2RlKCRpZCwgJGJpbl9zYWx0LCAkYmluX2hhc2gsICRwYXJhbXM9bnVsbCkgewoJLy8gJDxpZD5bJDxwYXJhbT49PHZhbHVl'));
	@fwrite($fp, base64_decode('PigsPHBhcmFtPj08dmFsdWU+KSpdWyQ8c2FsdD5bJDxoYXNoPl1dCgkkb3V0ID0gJyQnLiRpZDsKCWlmICghaXNfbnVsbCgkcGFyYW1zKSkgewoJCSRhcnlfcGFyYW1zID0gYXJyYXkoKTsKCQlmb3JlYWNoICgkcGFyYW1zIGFzICRuYW1lID0+ICR2YWx1ZSkgewoJ'));
	@fwrite($fp, base64_decode('CQkkYXJ5X3BhcmFtc1tdID0gIiRuYW1lPSR2YWx1ZSI7CgkJfQoJCSRvdXQgLj0gJyQnLmltcGxvZGUoJywnLCRhcnlfcGFyYW1zKTsKCX0KCSRvdXQgLj0gJyQnLmNyeXB0X3JhZGl4NjRfZW5jb2RlKCRiaW5fc2FsdCk7Cgkkb3V0IC49ICckJy5jcnlwdF9yYWRp'));
	@fwrite($fp, base64_decode('eDY0X2VuY29kZSgkYmluX2hhc2gpOwoJcmV0dXJuICRvdXQ7Cn0KCmZ1bmN0aW9uIGNyeXB0X21vZHVsYXJfZm9ybWF0X2RlY29kZSgkbWNmKSB7CgkkYXJ5ID0gZXhwbG9kZSgnJCcsICRtY2YpOwoKCSRkdW1teSA9IGFycmF5X3NoaWZ0KCRhcnkpOwoJaWYgKCRk'));
	@fwrite($fp, base64_decode('dW1teSAhPT0gJycpIHJldHVybiBmYWxzZTsKCgkkZHVtbXkgPSBhcnJheV9zaGlmdCgkYXJ5KTsKCSRpZCA9ICRkdW1teTsKCgkkcGFyYW1zID0gYXJyYXkoKTsKCSRkdW1teSA9IGFycmF5X3NoaWZ0KCRhcnkpOwoJaWYgKHN0cnBvcygkZHVtbXksICc9JykgIT09'));
	@fwrite($fp, base64_decode('IGZhbHNlKSB7CgkJJHBhcmFtc19hcnkgPSBleHBsb2RlKCcsJywkZHVtbXkpOwoJCWZvcmVhY2ggKCRwYXJhbXNfYXJ5IGFzICRwYXJhbSkgewoJCQkkYnJ5ID0gZXhwbG9kZSgnPScsICRwYXJhbSwgMik7CgkJCWlmIChjb3VudCgkYnJ5KSA+IDEpIHsKCQkJCSRw'));
	@fwrite($fp, base64_decode('YXJhbXNbJGJyeVswXV0gPSAkYnJ5WzFdOwoJCQl9CgkJfQoJfSBlbHNlIHsKCQlhcnJheV91bnNoaWZ0KCRhcnksICRkdW1teSk7Cgl9CgoJaWYgKGNvdW50KCRhcnkpID4gMSkgewoJCSRkdW1teSA9IGFycmF5X3NoaWZ0KCRhcnkpOwoJCSRiaW5fc2FsdCA9IGNy'));
	@fwrite($fp, base64_decode('eXB0X3JhZGl4NjRfZGVjb2RlKCRkdW1teSk7Cgl9IGVsc2UgewoJCSRiaW5fc2FsdCA9ICcnOwoJfQoKCSRkdW1teSA9IGFycmF5X3NoaWZ0KCRhcnkpOwoJJGJpbl9oYXNoID0gY3J5cHRfcmFkaXg2NF9kZWNvZGUoJGR1bW15KTsKCglyZXR1cm4gYXJyYXkoJ2lk'));
	@fwrite($fp, base64_decode('JyA9PiAkaWQsICdzYWx0JyA9PiAkYmluX3NhbHQsICdoYXNoJyA9PiAkYmluX2hhc2gsICdwYXJhbXMnID0+ICRwYXJhbXMpOwp9CgovLyAtLS0gUGFydCAyOiBWaWFUaGlua1NvZnQgTW9kdWxhciBDcnlwdCBGb3JtYXQgMS4wCgpmdW5jdGlvbiB2dHNfY3J5cHRf'));
	@fwrite($fp, base64_decode('dmVyc2lvbigkaGFzaCkgewoJaWYgKHN0cl9zdGFydHNfd2l0aCgkaGFzaCwgJyQnLk9JRF9NQ0ZfVlRTX1YxLickJykpIHsKCQlyZXR1cm4gJzEnOwoJfSBlbHNlIHsKCQlyZXR1cm4gJzAnOwoJfQp9CgpmdW5jdGlvbiB2dHNfY3J5cHRfaGFzaCgkYWxnbywgJHN0'));
	@fwrite($fp, base64_decode('cl9wYXNzd29yZCwgJHN0cl9zYWx0LCAkdmVyPScxJywgJG1vZGU9J3BzJykgewoJaWYgKCR2ZXIgPT0gJzEnKSB7CgkJaWYgKCRtb2RlID09ICdzcCcpIHsKCQkJJHBheWxvYWQgPSAkc3RyX3NhbHQuJHN0cl9wYXNzd29yZDsKCQkJaWYgKCgkYWxnbyA9PT0gJ3No'));
	@fwrite($fp, base64_decode('YTMtNTEyJykgJiYgIWluX2FycmF5KCRhbGdvLCBoYXNoX2FsZ29zKCkpICYmIGZ1bmN0aW9uX2V4aXN0cygnc2hhM181MTInKSkgewoJCQkJJGJpbl9oYXNoID0gc2hhM181MTIoJHBheWxvYWQsIHRydWUpOwoJCQl9IGVsc2UgewoJCQkJJGJpbl9oYXNoID0gaGFz'));
	@fwrite($fp, base64_decode('aCgkYWxnbywgJHBheWxvYWQsIHRydWUpOwoJCQl9CgkJfSBlbHNlIGlmICgkbW9kZSA9PSAncHMnKSB7CgkJCSRwYXlsb2FkID0gJHN0cl9wYXNzd29yZC4kc3RyX3NhbHQ7CgkJCWlmICgoJGFsZ28gPT09ICdzaGEzLTUxMicpICYmICFpbl9hcnJheSgkYWxnbywg'));
	@fwrite($fp, base64_decode('aGFzaF9hbGdvcygpKSAmJiBmdW5jdGlvbl9leGlzdHMoJ3NoYTNfNTEyJykpIHsKCQkJCSRiaW5faGFzaCA9IHNoYTNfNTEyKCRwYXlsb2FkLCB0cnVlKTsKCQkJfSBlbHNlIHsKCQkJCSRiaW5faGFzaCA9IGhhc2goJGFsZ28sICRwYXlsb2FkLCB0cnVlKTsKCQkJ'));
	@fwrite($fp, base64_decode('fQoJCX0gZWxzZSBpZiAoJG1vZGUgPT0gJ3NwcycpIHsKCQkJJHBheWxvYWQgPSAkc3RyX3NhbHQuJHN0cl9wYXNzd29yZC4kc3RyX3NhbHQ7CgkJCWlmICgoJGFsZ28gPT09ICdzaGEzLTUxMicpICYmICFpbl9hcnJheSgkYWxnbywgaGFzaF9hbGdvcygpKSAmJiBm'));
	@fwrite($fp, base64_decode('dW5jdGlvbl9leGlzdHMoJ3NoYTNfNTEyJykpIHsKCQkJCSRiaW5faGFzaCA9IHNoYTNfNTEyKCRwYXlsb2FkLCB0cnVlKTsKCQkJfSBlbHNlIHsKCQkJCSRiaW5faGFzaCA9IGhhc2goJGFsZ28sICRwYXlsb2FkLCB0cnVlKTsKCQkJfQoJCX0gZWxzZSBpZiAoJG1v'));
	@fwrite($fp, base64_decode('ZGUgPT0gJ2htYWMnKSB7CgkJCS8vIE5vdGU6IEFjdHVhbGx5LCB3ZSBzaG91bGQgdXNlIGhhc2hfaG1hY19hbGdvcygpLCBidXQgdGhpcyByZXF1aXJlcyBQSFAgNy4yLCBhbmQgd2Ugd291bGQgbGlrZSB0byBzdGF5IGNvbXBhdGlibGUgd2l0aCBQSFAgNy4wIGZv'));
	@fwrite($fp, base64_decode('ciBub3cKCQkJaWYgKCgkYWxnbyA9PT0gJ3NoYTMtNTEyJykgJiYgIWluX2FycmF5KCRhbGdvLCBoYXNoX2FsZ29zKCkpICYmIGZ1bmN0aW9uX2V4aXN0cygnc2hhM181MTJfaG1hYycpKSB7CgkJCQkkYmluX2hhc2ggPSBzaGEzXzUxMl9obWFjKCRzdHJfcGFzc3dv'));
	@fwrite($fp, base64_decode('cmQsICRzdHJfc2FsdCwgdHJ1ZSk7CgkJCX0gZWxzZSB7CgkJCQkkYmluX2hhc2ggPSBoYXNoX2htYWMoJGFsZ28sICRzdHJfcGFzc3dvcmQsICRzdHJfc2FsdCwgdHJ1ZSk7CgkJCX0KCQl9IGVsc2UgewoJCQl0aHJvdyBuZXcgRXhjZXB0aW9uKCJJbnZhbGlkIFZU'));
	@fwrite($fp, base64_decode('UyBjcnlwdCB2ZXJzaW9uIDEgbW9kZS4gRXhwZWN0IHNwLCBwcywgc3BzLCBvciBobWFjLiIpOwoJCX0KCQkkYmluX3NhbHQgPSAkc3RyX3NhbHQ7CgkJcmV0dXJuIGNyeXB0X21vZHVsYXJfZm9ybWF0X2VuY29kZShPSURfTUNGX1ZUU19WMSwgJGJpbl9zYWx0LCAk'));
	@fwrite($fp, base64_decode('YmluX2hhc2gsIGFycmF5KCdhJz0+JGFsZ28sJ20nPT4kbW9kZSkpOwoJfSBlbHNlIHsKCQl0aHJvdyBuZXcgRXhjZXB0aW9uKCJJbnZhbGlkIFZUUyBjcnlwdCB2ZXJzaW9uLCBleHBlY3QgMS4iKTsKCX0KfQoKZnVuY3Rpb24gdnRzX2NyeXB0X3ZlcmlmeSgkcGFz'));
	@fwrite($fp, base64_decode('c3dvcmQsICRoYXNoKTogYm9vbCB7CgkkdmVyID0gdnRzX2NyeXB0X3ZlcnNpb24oJGhhc2gpOwoJaWYgKCR2ZXIgPT0gJzEnKSB7CgkJLy8gRGVjb2RlIHRoZSBNQ0YgaGFzaCBwYXJhbWV0ZXJzCgkJJGRhdGEgPSBjcnlwdF9tb2R1bGFyX2Zvcm1hdF9kZWNvZGUo'));
	@fwrite($fp, base64_decode('JGhhc2gpOwoJCWlmICgkZGF0YSA9PT0gZmFsc2UpIHRocm93IG5ldyBFeGNlcHRpb24oJ0ludmFsaWQgYXV0aCBrZXknKTsKCQkkaWQgPSAkZGF0YVsnaWQnXTsKCQkkYmluX3NhbHQgPSAkZGF0YVsnc2FsdCddOwoJCSRiaW5faGFzaCA9ICRkYXRhWydoYXNoJ107'));
	@fwrite($fp, base64_decode('CgkJJHBhcmFtcyA9ICRkYXRhWydwYXJhbXMnXTsKCQkkYWxnbyA9ICRwYXJhbXNbJ2EnXTsKCQkkbW9kZSA9ICRwYXJhbXNbJ20nXTsKCgkJLy8gQ3JlYXRlIGEgVlRTIE1DRiAxLjAgaGFzaCBiYXNlZCBvbiB0aGUgcGFyYW1ldGVycyBvZiAkaGFzaCBhbmQgdGhl'));
	@fwrite($fp, base64_decode('IHBhc3N3b3JkICRwYXNzd29yZAoJCSRjYWxjX2F1dGhrZXlfMSA9IHZ0c19jcnlwdF9oYXNoKCRhbGdvLCAkcGFzc3dvcmQsICRiaW5fc2FsdCwgJHZlciwgJG1vZGUpOwoKCQkvLyBXZSByZXdyaXRlIHRoZSBNQ0YgdG8gbWFrZSBzdXJlIHRoYXQgdGhleSBtYXRj'));
	@fwrite($fp, base64_decode('aCAoaWYgcGFyYW1zIGhhdmUgdGhlIHdyb25nIG9yZGVyKQoJCSRjYWxjX2F1dGhrZXlfMiA9IGNyeXB0X21vZHVsYXJfZm9ybWF0X2VuY29kZSgkaWQsICRiaW5fc2FsdCwgJGJpbl9oYXNoLCAkcGFyYW1zKTsKCgkJcmV0dXJuIGhhc2hfZXF1YWxzKCRjYWxjX2F1'));
	@fwrite($fp, base64_decode('dGhrZXlfMSwgJGNhbGNfYXV0aGtleV8yKTsKCX0gZWxzZSB7CgkJdGhyb3cgbmV3IEV4Y2VwdGlvbigiSW52YWxpZCBWVFMgY3J5cHQgdmVyc2lvbiwgZXhwZWN0IDEuIik7Cgl9Cn0KCi8vIC0tLSBQYXJ0IDM6IHZ0c19wYXNzd29yZF9oYXNoKCkgYW5kIHZ0c19w'));
	@fwrite($fp, base64_decode('YXNzd29yZF92ZXJpZnkoKQoKLyoqIFRoaXMgZnVuY3Rpb24gZXh0ZW5kcyBwYXNzd29yZF92ZXJpZnkoKSBieSBhZGRpbmcgVmlhVGhpbmtTb2Z0IE1vZHVsYXIgQ3J5cHQgRm9ybWF0IDEuMC4KICogQHBhcmFtIHN0cmluZyAkcGFzc3dvcmQgdG8gYmUgY2hlY2tl'));
	@fwrite($fp, base64_decode('ZAogKiBAcGFyYW0gc3RyaW5nICRoYXNoIEhhc2ggY3JlYXRlZCBieSBjcnlwdCgpLCBwYXNzd29yZF9oYXNoKCksIG9yIHZ0c19wYXNzd29yZF9oYXNoKCkuCiAqIEByZXR1cm4gYm9vbCB0cnVlIGlmIHBhc3N3b3JkIGlzIHZhbGlkCiAqLwpmdW5jdGlvbiB2dHNf'));
	@fwrite($fp, base64_decode('cGFzc3dvcmRfdmVyaWZ5KCRwYXNzd29yZCwgJGhhc2gpOiBib29sIHsKCWlmICh2dHNfY3J5cHRfdmVyc2lvbigkaGFzaCkgIT0gJzAnKSB7CgkJLy8gSGFzaCBjcmVhdGVkIGJ5IHZ0c19wYXNzd29yZF9oYXNoKCksIG9yIHZ0c19jcnlwdF9oYXNoKCkKCQlyZXR1'));
	@fwrite($fp, base64_decode('cm4gdnRzX2NyeXB0X3ZlcmlmeSgkcGFzc3dvcmQsICRoYXNoKTsKCX0gZWxzZSB7CgkJLy8gSGFzaCBjcmVhdGVkIGJ5IHZ0c19wYXNzd29yZF9oYXNoKCksIHBhc3N3b3JkX2hhc2goKSwgb3IgY3J5cHQoKQoJCXJldHVybiBwYXNzd29yZF92ZXJpZnkoJHBhc3N3'));
	@fwrite($fp, base64_decode('b3JkLCAkaGFzaCk7Cgl9Cn0KCi8qKiBUaGlzIGZ1bmN0aW9uIGV4dGVuZHMgcGFzc3dvcmRfaGFzaCgpIHdpdGggdGhlIGFsZ29yaXRobXMgc3VwcG9ydGVkIGJ5IGNyeXB0KCkuCiAqIEl0IGFsc28gYWRkcyB2dHNfY3J5cHRfaGFzaCgpIHdoaWNoIGltcGxlbWVu'));
	@fwrite($fp, base64_decode('dHMgdGhlIFZpYVRoaW5rU29mdCBNb2R1bGFyIENyeXB0IEZvcm1hdCAxLjAuCiAqIFRoZSByZXN1bHQgY2FuIGJlIHZlcmlmaWVkIHVzaW5nIHZ0c19wYXNzd29yZF92ZXJpZnkoKS4KICogQHBhcmFtIHN0cmluZyAkcGFzc3dvcmQgdG8gYmUgaGFzaGVkCiAqIEBw'));
	@fwrite($fp, base64_decode('YXJhbSBtaXhlZCAkYWxnbyBhbGdvcml0aG0KICogQHBhcmFtIGFycmF5ICRvcHRpb25zIG9wdGlvbnMgZm9yIHRoZSBoYXNoaW5nIGFsZ29yaXRobQogKiBAcmV0dXJuIHN0cmluZyBDcnlwdCBzdHlsZSBwYXNzd29yZCBoYXNoCiAqLwpmdW5jdGlvbiB2dHNfcGFz'));
	@fwrite($fp, base64_decode('c3dvcmRfaGFzaCgkcGFzc3dvcmQsICRhbGdvLCAkb3B0aW9ucz1hcnJheSgpKTogc3RyaW5nIHsKCSRjcnlwdF9zYWx0ID0gbnVsbDsKCWlmICgoJGFsZ28gPT09IFBBU1NXT1JEX1NURF9ERVMpICYmIGRlZmluZWQoJ0NSWVBUX1NURF9ERVMnKSkgewoJCS8vIFN0'));
	@fwrite($fp, base64_decode('YW5kYXJkIERFUy1iYXNlZCBoYXNoIHdpdGggYSB0d28gY2hhcmFjdGVyIHNhbHQgZnJvbSB0aGUgYWxwaGFiZXQgIi4vMC05QS1aYS16Ii4gVXNpbmcgaW52YWxpZCBjaGFyYWN0ZXJzIGluIHRoZSBzYWx0IHdpbGwgY2F1c2UgY3J5cHQoKSB0byBmYWlsLgoJCSRj'));
	@fwrite($fp, base64_decode('cnlwdF9zYWx0ID0gZGVzX2NvbXBhdF9zYWx0KDIpOwoJfSBlbHNlIGlmICgoJGFsZ28gPT09IFBBU1NXT1JEX0VYVF9ERVMpICYmIGRlZmluZWQoJ0NSWVBUX0VYVF9ERVMnKSkgewoJCS8vIEV4dGVuZGVkIERFUy1iYXNlZCBoYXNoLiBUaGUgInNhbHQiIGlzIGEg'));
	@fwrite($fp, base64_decode('OS1jaGFyYWN0ZXIgc3RyaW5nIGNvbnNpc3Rpbmcgb2YgYW4gdW5kZXJzY29yZSBmb2xsb3dlZCBieSA0IGNoYXJhY3RlcnMgb2YgaXRlcmF0aW9uIGNvdW50IGFuZCA0IGNoYXJhY3RlcnMgb2Ygc2FsdC4gRWFjaCBvZiB0aGVzZSA0LWNoYXJhY3RlciBzdHJpbmdz'));
	@fwrite($fp, base64_decode('IGVuY29kZSAyNCBiaXRzLCBsZWFzdCBzaWduaWZpY2FudCBjaGFyYWN0ZXIgZmlyc3QuIFRoZSB2YWx1ZXMgMCB0byA2MyBhcmUgZW5jb2RlZCBhcyAuLzAtOUEtWmEtei4gVXNpbmcgaW52YWxpZCBjaGFyYWN0ZXJzIGluIHRoZSBzYWx0IHdpbGwgY2F1c2UgY3J5'));
	@fwrite($fp, base64_decode('cHQoKSB0byBmYWlsLgoJCSRpdGVyYXRpb25zID0gaXNzZXQoJG9wdGlvbnNbJ2l0ZXJhdGlvbnMnXSkgPyAkb3B0aW9uc1snaXRlcmF0aW9ucyddIDogNzI1OwoJCSRjcnlwdF9zYWx0ID0gJ18nIC4gYmFzZTY0X2ludF9lbmNvZGUoJGl0ZXJhdGlvbnMpIC4gZGVz'));
	@fwrite($fp, base64_decode('X2NvbXBhdF9zYWx0KDQpOwoJfSBlbHNlIGlmICgoJGFsZ28gPT09IFBBU1NXT1JEX01ENSkgJiYgZGVmaW5lZCgnQ1JZUFRfTUQ1JykpIHsKCQkvLyBNRDUgaGFzaGluZyB3aXRoIGEgdHdlbHZlIGNoYXJhY3RlciBzYWx0IHN0YXJ0aW5nIHdpdGggJDEkCgkJJGNy'));
	@fwrite($fp, base64_decode('eXB0X3NhbHQgPSAnJDEkJy5kZXNfY29tcGF0X3NhbHQoMTIpLickJzsKCX0gZWxzZSBpZiAoKCRhbGdvID09PSBQQVNTV09SRF9CTE9XRklTSCkgJiYgZGVmaW5lZCgnQ1JZUFRfQkxPV0ZJU0gnKSkgewoJCS8vIEJsb3dmaXNoIGhhc2hpbmcgd2l0aCBhIHNhbHQg'));
	@fwrite($fp, base64_decode('YXMgZm9sbG93czogIiQyYSQiLCAiJDJ4JCIgb3IgIiQyeSQiLCBhIHR3byBkaWdpdCBjb3N0IHBhcmFtZXRlciwgIiQiLCBhbmQgMjIgY2hhcmFjdGVycyBmcm9tIHRoZSBhbHBoYWJldCAiLi8wLTlBLVphLXoiLiBVc2luZyBjaGFyYWN0ZXJzIG91dHNpZGUgb2Yg'));
	@fwrite($fp, base64_decode('dGhpcyByYW5nZSBpbiB0aGUgc2FsdCB3aWxsIGNhdXNlIGNyeXB0KCkgdG8gcmV0dXJuIGEgemVyby1sZW5ndGggc3RyaW5nLiBUaGUgdHdvIGRpZ2l0IGNvc3QgcGFyYW1ldGVyIGlzIHRoZSBiYXNlLTIgbG9nYXJpdGhtIG9mIHRoZSBpdGVyYXRpb24gY291bnQg'));
	@fwrite($fp, base64_decode('Zm9yIHRoZSB1bmRlcmx5aW5nIEJsb3dmaXNoLWJhc2VkIGhhc2hpbmcgYWxnb3JpdGhtIGFuZCBtdXN0IGJlIGluIHJhbmdlIDA0LTMxLCB2YWx1ZXMgb3V0c2lkZSB0aGlzIHJhbmdlIHdpbGwgY2F1c2UgY3J5cHQoKSB0byBmYWlsLiAiJDJ4JCIgaGFzaGVzIGFy'));
	@fwrite($fp, base64_decode('ZSBwb3RlbnRpYWxseSB3ZWFrOyAiJDJhJCIgaGFzaGVzIGFyZSBjb21wYXRpYmxlIGFuZCBtaXRpZ2F0ZSB0aGlzIHdlYWtuZXNzLiBGb3IgbmV3IGhhc2hlcywgIiQyeSQiIHNob3VsZCBiZSB1c2VkLgoJCSRhbGdvID0gJyQyeSQnOyAvLyBtb3N0IHNlY3VyZQoJ'));
	@fwrite($fp, base64_decode('CSRjb3N0ID0gaXNzZXQoJG9wdGlvbnNbJ2Nvc3QnXSkgPyAkb3B0aW9uc1snY29zdCddIDogMTA7CgkJJGNyeXB0X3NhbHQgPSAkYWxnby5zdHJfcGFkKCRjb3N0LDIsJzAnLFNUUl9QQURfTEVGVCkuJyQnLmRlc19jb21wYXRfc2FsdCgyMikuJyQnOwoJfSBlbHNl'));
	@fwrite($fp, base64_decode('IGlmICgoJGFsZ28gPT09IFBBU1NXT1JEX1NIQTI1NikgJiYgZGVmaW5lZCgnQ1JZUFRfU0hBMjU2JykpIHsKCQkvLyBTSEEtMjU2IGhhc2ggd2l0aCBhIHNpeHRlZW4gY2hhcmFjdGVyIHNhbHQgcHJlZml4ZWQgd2l0aCAkNSQuIElmIHRoZSBzYWx0IHN0cmluZyBz'));
	@fwrite($fp, base64_decode('dGFydHMgd2l0aCAncm91bmRzPTxOPiQnLCB0aGUgbnVtZXJpYyB2YWx1ZSBvZiBOIGlzIHVzZWQgdG8gaW5kaWNhdGUgaG93IG1hbnkgdGltZXMgdGhlIGhhc2hpbmcgbG9vcCBzaG91bGQgYmUgZXhlY3V0ZWQsIG11Y2ggbGlrZSB0aGUgY29zdCBwYXJhbWV0ZXIg'));
	@fwrite($fp, base64_decode('b24gQmxvd2Zpc2guIFRoZSBkZWZhdWx0IG51bWJlciBvZiByb3VuZHMgaXMgNTAwMCwgdGhlcmUgaXMgYSBtaW5pbXVtIG9mIDEwMDAgYW5kIGEgbWF4aW11bSBvZiA5OTksOTk5LDk5OS4gQW55IHNlbGVjdGlvbiBvZiBOIG91dHNpZGUgdGhpcyByYW5nZSB3aWxs'));
	@fwrite($fp, base64_decode('IGJlIHRydW5jYXRlZCB0byB0aGUgbmVhcmVzdCBsaW1pdC4KCQkkYWxnbyA9ICckNSQnOwoJCSRyb3VuZHMgPSBpc3NldCgkb3B0aW9uc1sncm91bmRzJ10pID8gJG9wdGlvbnNbJ3JvdW5kcyddIDogNTAwMDsKCQkkY3J5cHRfc2FsdCA9ICRhbGdvLidyb3VuZHM9'));
	@fwrite($fp, base64_decode('Jy4kcm91bmRzLickJy5kZXNfY29tcGF0X3NhbHQoMTYpLickJzsKCX0gZWxzZSBpZiAoKCRhbGdvID09PSBQQVNTV09SRF9TSEE1MTIpICYmIGRlZmluZWQoJ0NSWVBUX1NIQTUxMicpKSB7CgkJLy8gU0hBLTUxMiBoYXNoIHdpdGggYSBzaXh0ZWVuIGNoYXJhY3Rl'));
	@fwrite($fp, base64_decode('ciBzYWx0IHByZWZpeGVkIHdpdGggJDYkLiBJZiB0aGUgc2FsdCBzdHJpbmcgc3RhcnRzIHdpdGggJ3JvdW5kcz08Tj4kJywgdGhlIG51bWVyaWMgdmFsdWUgb2YgTiBpcyB1c2VkIHRvIGluZGljYXRlIGhvdyBtYW55IHRpbWVzIHRoZSBoYXNoaW5nIGxvb3Agc2hv'));
	@fwrite($fp, base64_decode('dWxkIGJlIGV4ZWN1dGVkLCBtdWNoIGxpa2UgdGhlIGNvc3QgcGFyYW1ldGVyIG9uIEJsb3dmaXNoLiBUaGUgZGVmYXVsdCBudW1iZXIgb2Ygcm91bmRzIGlzIDUwMDAsIHRoZXJlIGlzIGEgbWluaW11bSBvZiAxMDAwIGFuZCBhIG1heGltdW0gb2YgOTk5LDk5OSw5'));
	@fwrite($fp, base64_decode('OTkuIEFueSBzZWxlY3Rpb24gb2YgTiBvdXRzaWRlIHRoaXMgcmFuZ2Ugd2lsbCBiZSB0cnVuY2F0ZWQgdG8gdGhlIG5lYXJlc3QgbGltaXQuCgkJJGFsZ28gPSAnJDYkJzsKCQkkcm91bmRzID0gaXNzZXQoJG9wdGlvbnNbJ3JvdW5kcyddKSA/ICRvcHRpb25zWydy'));
	@fwrite($fp, base64_decode('b3VuZHMnXSA6IDUwMDA7CgkJJGNyeXB0X3NhbHQgPSAkYWxnby4ncm91bmRzPScuJHJvdW5kcy4nJCcuZGVzX2NvbXBhdF9zYWx0KDE2KS4nJCc7Cgl9CgoJaWYgKCFpc19udWxsKCRjcnlwdF9zYWx0KSkgewoJCS8vIEFsZ29yaXRobXM6IFBBU1NXT1JEX1NURF9E'));
	@fwrite($fp, base64_decode('RVMKCQkvLyAgICAgICAgICAgICBQQVNTV09SRF9FWFRfREVTCgkJLy8gICAgICAgICAgICAgUEFTU1dPUkRfTUQ1CgkJLy8gICAgICAgICAgICAgUEFTU1dPUkRfQkxPV0ZJU0gKCQkvLyAgICAgICAgICAgICBQQVNTV09SRF9TSEEyNTYKCQkvLyAgICAgICAgICAg'));
	@fwrite($fp, base64_decode('ICBQQVNTV09SRF9TSEE1MTIKCQkkb3V0ID0gY3J5cHQoJHBhc3N3b3JkLCAkY3J5cHRfc2FsdCk7CgkJaWYgKHN0cmxlbigkb3V0KSA8IDEzKSB0aHJvdyBuZXcgRXhjZXB0aW9uKCJjcnlwdCgpIGZhaWxlZCIpOwoJCXJldHVybiAkb3V0OwoJfSBlbHNlIGlmICgk'));
	@fwrite($fp, base64_decode('YWxnbyA9PT0gUEFTU1dPUkRfVlRTX01DRjEpIHsKCQkvLyBBbGdvcml0aG1zOiBQQVNTV09SRF9WVFNfTUNGMQoJCSR2ZXIgID0gJzEnOwoJCSRhbGdvID0gaXNzZXQoJG9wdGlvbnNbJ2FsZ28nXSkgPyAkb3B0aW9uc1snYWxnbyddIDogJ3NoYTMtNTEyJzsKCQkk'));
	@fwrite($fp, base64_decode('bW9kZSA9IGlzc2V0KCRvcHRpb25zWydtb2RlJ10pID8gJG9wdGlvbnNbJ21vZGUnXSA6ICdwcyc7CgkJJHNhbHRfbGVuID0gaXNzZXQoJG9wdGlvbnNbJ3NhbHRfbGVuZ3RoJ10pID8gJG9wdGlvbnNbJ3NhbHRfbGVuZ3RoJ10gOiA1MDsKCQkkc2FsdCA9IHJhbmRv'));
	@fwrite($fp, base64_decode('bV9ieXRlc19leCgkc2FsdF9sZW4sIHRydWUsIHRydWUpOwoJCXJldHVybiB2dHNfY3J5cHRfaGFzaCgkYWxnbywgJHBhc3N3b3JkLCAkc2FsdCwgJHZlciwgJG1vZGUpOwoJfSBlbHNlIHsKCQkvLyBBbGdvcml0aG1zOiBQQVNTV09SRF9ERUZBVUxUCgkJLy8gICAg'));
	@fwrite($fp, base64_decode('ICAgICAgICAgUEFTU1dPUkRfQkNSWVBUCgkJLy8gICAgICAgICAgICAgUEFTU1dPUkRfQVJHT04ySQoJCS8vICAgICAgICAgICAgIFBBU1NXT1JEX0FSR09OMklECgkJcmV0dXJuIHBhc3N3b3JkX2hhc2goJHBhc3N3b3JkLCAkYWxnbywgJG9wdGlvbnMpOwoJfQp9'));
	@fwrite($fp, base64_decode('CgovLyAtLS0gUGFydCA0OiBVc2VmdWwgZnVuY3Rpb25zIHJlcXVpcmVkIGJ5IHRoZSBjcnlwdC1mdW5jdGlvbnMKCmRlZmluZSgnQkFTRTY0X1JGQzQ2NDhfQUxQSEFCRVQnLCAnMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamts'));
	@fwrite($fp, base64_decode('bW5vcHFyc3R1dnd4eXorLycpOwpkZWZpbmUoJ0JBU0U2NF9DUllQVF9BTFBIQUJFVCcsICAgJy4vMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonKTsKCmZ1bmN0aW9uIGRlc19jb21wYXRfc2FsdCgk'));
	@fwrite($fp, base64_decode('c2FsdF9sZW4pIHsKCWlmICgkc2FsdF9sZW4gPD0gMCkgcmV0dXJuICcnOwoJJGNoYXJhY3RlcnMgPSBCQVNFNjRfQ1JZUFRfQUxQSEFCRVQ7Cgkkc2FsdCA9ICcnOwoJJGJ5dGVzID0gcmFuZG9tX2J5dGVzX2V4KCRzYWx0X2xlbiwgdHJ1ZSwgdHJ1ZSk7Cglmb3Ig'));
	@fwrite($fp, base64_decode('KCRpPTA7ICRpPCRzYWx0X2xlbjsgJGkrKykgewoJCSRzYWx0IC49ICRjaGFyYWN0ZXJzW29yZCgkYnl0ZXNbJGldKSAlIHN0cmxlbigkY2hhcmFjdGVycyldOwoJfQoJcmV0dXJuICRzYWx0Owp9CgpmdW5jdGlvbiBiYXNlNjRfaW50X2VuY29kZSgkbnVtKSB7Cgkv'));
	@fwrite($fp, base64_decode('LyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xNTUzNDk4Mi93aGljaC1pdGVyYXRpb24tcnVsZXMtYXBwbHktb24tY3J5cHQtdXNpbmctY3J5cHQtZXh0LWRlcwoJJGFscGhhYmV0X3JhdyA9IEJBU0U2NF9DUllQVF9BTFBIQUJFVDsKCSRhbHBo'));
	@fwrite($fp, base64_decode('YWJldCA9IHN0cl9zcGxpdCgkYWxwaGFiZXRfcmF3KTsKCSRhcnIgPSBhcnJheSgpOwoJJGJhc2UgPSBzaXplb2YoJGFscGhhYmV0KTsKCXdoaWxlICgkbnVtKSB7CgkJJHJlbSA9ICRudW0gJSAkYmFzZTsKCQkkbnVtID0gKGludCkoJG51bSAvICRiYXNlKTsKCQkk'));
	@fwrite($fp, base64_decode('YXJyW10gPSAkYWxwaGFiZXRbJHJlbV07Cgl9Cgkkc3RyaW5nID0gaW1wbG9kZSgkYXJyKTsKCXJldHVybiBzdHJfcGFkKCRzdHJpbmcsIDQsICcuJywgU1RSX1BBRF9SSUdIVCk7Cn0KCmZ1bmN0aW9uIGNyeXB0X3JhZGl4NjRfZW5jb2RlKCRzdHIpIHsKCSR4ID0g'));
	@fwrite($fp, base64_decode('JHN0cjsKCSR4ID0gYmFzZTY0X2VuY29kZSgkeCk7CgkkeCA9IHJ0cmltKCR4LCAnPScpOyAvLyByZW1vdmUgcGFkZGluZwoJJHggPSBzdHJ0cigkeCwgQkFTRTY0X1JGQzQ2NDhfQUxQSEFCRVQsIEJBU0U2NF9DUllQVF9BTFBIQUJFVCk7CglyZXR1cm4gJHg7Cn0K'));
	@fwrite($fp, base64_decode('CmZ1bmN0aW9uIGNyeXB0X3JhZGl4NjRfZGVjb2RlKCRzdHIpIHsKCSR4ID0gJHN0cjsKCSR4ID0gc3RydHIoJHgsIEJBU0U2NF9DUllQVF9BTFBIQUJFVCwgQkFTRTY0X1JGQzQ2NDhfQUxQSEFCRVQpOwoJJHggPSBiYXNlNjRfZGVjb2RlKCR4KTsKCXJldHVybiAk'));
	@fwrite($fp, base64_decode('eDsKfQoKLy8gLS0tIFBhcnQgNTogU2VsZnRlc3QKCi8qCiRybmQgPSByYW5kb21fYnl0ZXNfZXgoNTAsIHRydWUsIHRydWUpOwphc3NlcnQoY3J5cHRfcmFkaXg2NF9kZWNvZGUoY3J5cHRfcmFkaXg2NF9lbmNvZGUoJHJuZCkpID09PSAkcm5kKTsKCiRwYXNzd29y'));
	@fwrite($fp, base64_decode('ZCA9IHJhbmRvbV9ieXRlc19leCgyMCwgZmFsc2UsIHRydWUpOwphc3NlcnQodnRzX3Bhc3N3b3JkX3ZlcmlmeSgkcGFzc3dvcmQsdnRzX3Bhc3N3b3JkX2hhc2goJHBhc3N3b3JkLCBQQVNTV09SRF9TVERfREVTKSkpOwphc3NlcnQodnRzX3Bhc3N3b3JkX3Zlcmlm'));
	@fwrite($fp, base64_decode('eSgkcGFzc3dvcmQsdnRzX3Bhc3N3b3JkX2hhc2goJHBhc3N3b3JkLCBQQVNTV09SRF9FWFRfREVTKSkpOwphc3NlcnQodnRzX3Bhc3N3b3JkX3ZlcmlmeSgkcGFzc3dvcmQsdnRzX3Bhc3N3b3JkX2hhc2goJHBhc3N3b3JkLCBQQVNTV09SRF9NRDUpKSk7CmFzc2Vy'));
	@fwrite($fp, base64_decode('dCh2dHNfcGFzc3dvcmRfdmVyaWZ5KCRwYXNzd29yZCx2dHNfcGFzc3dvcmRfaGFzaCgkcGFzc3dvcmQsIFBBU1NXT1JEX0JMT1dGSVNIKSkpOwphc3NlcnQodnRzX3Bhc3N3b3JkX3ZlcmlmeSgkcGFzc3dvcmQsdnRzX3Bhc3N3b3JkX2hhc2goJHBhc3N3b3JkLCBQ'));
	@fwrite($fp, base64_decode('QVNTV09SRF9TSEEyNTYpKSk7CmFzc2VydCh2dHNfcGFzc3dvcmRfdmVyaWZ5KCRwYXNzd29yZCx2dHNfcGFzc3dvcmRfaGFzaCgkcGFzc3dvcmQsIFBBU1NXT1JEX1NIQTUxMikpKTsKYXNzZXJ0KHZ0c19wYXNzd29yZF92ZXJpZnkoJHBhc3N3b3JkLHZ0c19wYXNz'));
	@fwrite($fp, base64_decode('d29yZF9oYXNoKCRwYXNzd29yZCwgUEFTU1dPUkRfVlRTX01DRjEpKSk7CmFzc2VydCh2dHNfcGFzc3dvcmRfdmVyaWZ5KCRwYXNzd29yZCx2dHNfcGFzc3dvcmRfaGFzaCgkcGFzc3dvcmQsIFBBU1NXT1JEX0RFRkFVTFQpKSk7CmFzc2VydCh2dHNfcGFzc3dvcmRf'));
	@fwrite($fp, base64_decode('dmVyaWZ5KCRwYXNzd29yZCx2dHNfcGFzc3dvcmRfaGFzaCgkcGFzc3dvcmQsIFBBU1NXT1JEX0JDUllQVCkpKTsKaWYgKGRlZmluZWQoJ1BBU1NXT1JEX0FSR09OMkknKSkKCWFzc2VydCh2dHNfcGFzc3dvcmRfdmVyaWZ5KCRwYXNzd29yZCx2dHNfcGFzc3dvcmRf'));
	@fwrite($fp, base64_decode('aGFzaCgkcGFzc3dvcmQsIFBBU1NXT1JEX0FSR09OMkkpKSk7CmlmIChkZWZpbmVkKCdQQVNTV09SRF9BUkdPTjJJRCcpKQoJYXNzZXJ0KHZ0c19wYXNzd29yZF92ZXJpZnkoJHBhc3N3b3JkLHZ0c19wYXNzd29yZF9oYXNoKCRwYXNzd29yZCwgUEFTU1dPUkRfQVJH'));
	@fwrite($fp, base64_decode('T04ySUQpKSk7CmVjaG8gIk9LLCBQYXNzd29yZCAkcGFzc3dvcmRcbiI7CiovCg=='));
	@fclose($fp);
}
if (!is_file('vendor/danielmarschall/php_utils/vts_crypt.inc.php')) {
	warn('File has vanished! Will re-create it: vendor/danielmarschall/php_utils/vts_crypt.inc.php');
	writefile_3();
	if (!is_file('vendor/danielmarschall/php_utils/vts_crypt.inc.php')) {
		warn('File cannot be created (not existing): vendor/danielmarschall/php_utils/vts_crypt.inc.php');
	} else if (sha1_file('vendor/danielmarschall/php_utils/vts_crypt.inc.php') != 'bae96c52a1ee42b2620602ae9a4779ce81fd8a84') {
		warn('File cannot be created (checksum mismatch): vendor/danielmarschall/php_utils/vts_crypt.inc.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('vendor/danielmarschall/php_utils/vts_crypt.inc.php', 0644)) {
		warn('Could not change file permissions of vendor/danielmarschall/php_utils/vts_crypt.inc.php');
	}
} else {
	if (@sha1_file('vendor/danielmarschall/php_utils/vts_crypt.inc.php') !== 'bae96c52a1ee42b2620602ae9a4779ce81fd8a84') {
		if (@sha1_file('vendor/danielmarschall/php_utils/vts_crypt.inc.php') !== '4d61a4f75242450e3937037ffca30bde65c1e8fb') {
			warn('File was modified. Will overwrite the changes now: vendor/danielmarschall/php_utils/vts_crypt.inc.php');
			$tmp = pathinfo('vendor/danielmarschall/php_utils/vts_crypt.inc.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('vendor/danielmarschall/php_utils/vts_crypt.inc.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('vendor/danielmarschall/php_utils/vts_crypt.inc.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_3();
		if (@sha1_file('vendor/danielmarschall/php_utils/vts_crypt.inc.php') !== 'bae96c52a1ee42b2620602ae9a4779ce81fd8a84') {
			warn('File cannot be written (checksum mismatch): vendor/danielmarschall/php_utils/vts_crypt.inc.php');
		}
	}
}


file_put_contents('.version.php', "<?php // Revision 1102\n");
if (trim(@file_get_contents('.version.php')) !== '<?php // Revision 1102') err('Could not write to .version.php!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

