<?php /* <ViaThinkSoftSignature>
Lug349TPG/tKIcGIiAzswM9rMoDcKNOJOuPWWR3HnkRqzBkipPinV6TiL39O3an4x
0wgX7xqfCyLNJ/KfgQKkcza4jZMJsQywdKTHU6nB2gZhCVKdDXL7FBxI4JGDo7EeP
/CFrXdZWCvgTohHWQBRuO3CdQxfLNFqhCmtrEn292AtpHZkFilWRtcEEp1etCaO2+
huKlYrWBA6CODLo3i+2AGCyNIqfOLzS3vmebpMmkI6Ql+4irUf0PRBweGOYMQVMU9
QEAvLDeQe/B1aCSpsJjoRfMMfUKm94R8Pywx9ojGGZSByafZs+EcZYJwqdQyX+l9N
gHg5DI8kY4IPoC60VybByMcoY3jd6YSS44exF3UST1jK+AfpoanypIGaf2CN2Qw/I
bQTVo6FkM6NlTuWlXgtfCFs6M2vVZ4Y0XFelXcGxHVoBXC0/bSGlc+h3XtnxpBtPc
PSx1LEEJbnqUM4v66pm3MDNtulxDJc6Y5UDuI+fGSGfvDlAHwYBQs0hBhIgFAl3xA
9Jzp0NsWwupu6nggzqFTDICiWexyF2MUp3Np3oyN++VBdXR8+EWiBf/ObfdWzkNhG
vuolJ7XnMqXnt3UttY554iv1Z2i6qdWtPe3XTtN42oIGZuVzVhgI45pT/02n1oWay
J6B6Pv5JKZmn6gjHPQLqALnklFdWKv5lNb0FL6YBD8wz3Bzf1BBqrXt6Z+IyieUnk
nW6MSWdtYw5n2VyTfuMSC446JkhpeDeeR/uOL3QtmLeSvHL0rfKJOJTLLmYJ3guJ7
09nGZupx7Pu8Kr874zGFm1SPSjpHi31c1acc/ekzA5hV1K64es8pLVi7WN5aYBhWl
849bN8IN3BVcDm+YI8m5oCN7x1154sWCWOx/lGmL8K+l4ISuE/yIODANRerREKBse
Pb+4IQU5BuTYCrHRGIZA30cy/UP9Vs5kWcDtLmU6DNMK9iGYIq+R81NLWIVOfmK6v
e3/wYqAjBqTzJxRxSaMGwnEhN/3PcNJ2f9Apkq3gFqb5fu9ST3IOcHpYpIqhvMKuz
wtz/8LDd4XqbyKFvkRq0BsjaV3PFC8+7ySo8jIZL+izzDrobRZWldgeK8g8Sw2a7A
yXlrnOFqsG+woKWraZmEw/wNbQI1sDFN6K/92ffqHpfey/5P7rAi8CWXewwAyhZ4r
vcl1ucDHtIzBT51vW3ZLl82V8sqgyk+d8zI3GNONvi6C3eZur4Hir89fz93URSVIs
hZyXtAmm3ZzFAkqI2CLjkfy8PwMU0/yQ2rdwI9YoAc8+kQGC7LjfIjeEYnFG8KTqn
p1Lgeux6ngg69SyRFCCNJo+PVvs4BUVLGM57xPKHJTfBYmd1GRY9sYa7sEB0ePlPz
w==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 659') {
	err('This update can only be applied to OIDplus version 2.0.0.659!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// File added: vendor/danielmarschall/php_utils/git_utils.inc.php
function writefile_1() {
	@$fp = fopen('vendor/danielmarschall/php_utils/git_utils.inc.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIFBIUCBnaXQgZnVuY3Rpb25zCiAqIENvcHlyaWdodCAyMDIxIERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKiBSZXZpc2lvbiAyMDIxLTEwLTAzCiAqCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lv'));
	@fwrite($fp, base64_decode('biAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgaHR0cDov'));
	@fwrite($fp, base64_decode('L3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlz'));
	@fwrite($fp, base64_decode('dHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdl'));
	@fwrite($fp, base64_decode('IGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwoKZnVuY3Rpb24gZ2l0X2dldF9sYXRlc3RfY29tbWl0X21lc3NhZ2UoJGdpdF9kaXIpIHsKCSRjb250ID0gZmlsZV9nZXRfY29udGVudHMoJGdpdF9k'));
	@fwrite($fp, base64_decode('aXIuJy9IRUFEJyk7CglpZiAoIXByZWdfbWF0Y2goJ0ByZWY6ICguKylbXHJcbl1AJywgIiRjb250XG4iLCAkbSkpIHRocm93IG5ldyBFeGNlcHRpb24oIkNhbm5vdCBmaW5kIEhFQUQgcmVmIik7CgkkY29tbWl0X29iamVjdCA9IHRyaW0oZmlsZV9nZXRfY29udGVu'));
	@fwrite($fp, base64_decode('dHMoJGdpdF9kaXIuJy8nLiRtWzFdKSk7CgoJJG9iamVjdHNfZGlyID0gJGdpdF9kaXIgLiAnL29iamVjdHMnOwoKCSRwYWNrX2ZpbGVzID0gZ2xvYigkb2JqZWN0c19kaXIuJy9wYWNrL3BhY2stKi5wYWNrJyk7CgkkbGFzdF9leGNlcHRpb24gPSAnTm8gcGFjayBm'));
	@fwrite($fp, base64_decode('aWxlcyBmb3VuZCc7Cglmb3JlYWNoICgkcGFja19maWxlcyBhcyAkYmFzZW5hbWUpIHsKCQkkYmFzZW5hbWUgPSBzdWJzdHIoYmFzZW5hbWUoJGJhc2VuYW1lKSwwLHN0cmxlbihiYXNlbmFtZSgkYmFzZW5hbWUpKS01KTsKCQl0cnkgewoJCQlyZXR1cm4gZ2l0X3Jl'));
	@fwrite($fp, base64_decode('YWRfb2JqZWN0KCRjb21taXRfb2JqZWN0LAoJCQkJJG9iamVjdHNfZGlyLicvcGFjay8nLiRiYXNlbmFtZS4nLmlkeCcsCgkJCQkkb2JqZWN0c19kaXIuJy9wYWNrLycuJGJhc2VuYW1lLicucGFjaycsCgkJCQlmYWxzZQoJCQkpOwoJCX0gY2F0Y2ggKEV4Y2VwdGlv'));
	@fwrite($fp, base64_decode('biAkZSkgewoJCQkkbGFzdF9leGNlcHRpb24gPSAkZTsKCQl9Cgl9Cgl0aHJvdyBuZXcgRXhjZXB0aW9uKCRsYXN0X2V4Y2VwdGlvbik7Cn0KCmZ1bmN0aW9uIGdpdF9yZWFkX29iamVjdCgkb2JqZWN0X3dhbnRlZCwgJGlkeF9maWxlLCAkcGFja19maWxlLCAkZGVi'));
	@fwrite($fp, base64_decode('dWc9ZmFsc2UpIHsKCS8vIE1vcmUgaW5mbyBhYm91dCB0aGUgSURYIGFuZCBQQUNLIGZvcm1hdDogaHR0cHM6Ly9naXQtc2NtLmNvbS9kb2NzL3BhY2stZm9ybWF0CgoJLy8gRG8gc29tZSBjaGVja3MKCWlmICghcHJlZ19tYXRjaCgnL15bMC05YS1mQS1GXXs0MH0k'));
	@fwrite($fp, base64_decode('LycsICRvYmplY3Rfd2FudGVkLCAkbSkpIHRocm93IG5ldyBFeGNlcHRpb24oIklzIG5vdCBhIHZhbGlkIG9iamVjdDogJG9iamVjdF93YW50ZWQiKTsKCWlmICghZmlsZV9leGlzdHMoJGlkeF9maWxlKSkgdGhyb3cgbmV3IEV4Y2VwdGlvbigiSWR4IGZpbGUgJGlk'));
	@fwrite($fp, base64_decode('eF9maWxlIG5vdCBmb3VuZCIpOwoJaWYgKCFmaWxlX2V4aXN0cygkcGFja19maWxlKSkgdGhyb3cgbmV3IEV4Y2VwdGlvbigiUGFjayBmaWxlICRwYWNrX2ZpbGUgbm90IGZvdW5kIik7CgoJLy8gT3BlbiBpbmRleCBmaWxlCgkkZnAgPSBmb3BlbigkaWR4X2ZpbGUs'));
	@fwrite($fp, base64_decode('ICdyYicpOwoJaWYgKCEkZnApIHRocm93IG5ldyBFeGNlcHRpb24oIkNhbm5vdCBvcGVuIGluZGV4IGZpbGUgJGlkeF9maWxlIik7CgoJLy8gUmVhZCB2ZXJzaW9uCglmc2VlaygkZnAsIDApOwoJJHVucGFja2VkID0gdW5wYWNrKCdOJywgZnJlYWQoJGZwLCA0KSk7'));
	@fwrite($fp, base64_decode('IC8vIHZvcnplaWNoZW5sb3NlciBMb25nLVR5cCAoaW1tZXIgMzIgQml0LCBCeXRlLUZvbGdlIEJpZy1FbmRpYW4pCglpZiAoJHVucGFja2VkWzFdID09PSAweEZGNzQ0RjYzKSB7CgkJJHZlcnNpb24gPSB1bnBhY2soJ04nLCBmcmVhZCgkZnAsIDQpKVsxXTsgLy8g'));
	@fwrite($fp, base64_decode('dm9yemVpY2hlbmxvc2VyIExvbmctVHlwIChpbW1lciAzMiBCaXQsIEJ5dGUtRm9sZ2UgQmlnLUVuZGlhbikKCQkkZmFub3V0X29mZnNldCA9IDg7CgkJaWYgKCR2ZXJzaW9uICE9IDIpIHRocm93IG5ldyBFeGNlcHRpb24oIlZlcnNpb24gJHZlcnNpb24gdW5rbm93'));
	@fwrite($fp, base64_decode('biIpOwoJfSBlbHNlIHsKCQkkdmVyc2lvbiA9IDE7CgkJJGZhbm91dF9vZmZzZXQgPSAwOwoJfQoJaWYgKCRkZWJ1ZykgZWNobyAiSW5kZXggZmlsZSB2ZXJzaW9uID0gJHZlcnNpb25cbiI7CgoJLy8gUmVhZCBmYW5vdXQgdGFibGUKCWZzZWVrKCRmcCwgJGZhbm91'));
	@fwrite($fp, base64_decode('dF9vZmZzZXQpOwoJJGZhbm91dF9hcnlbMF0gPSAwOwoJJGZhbm91dF9hcnkgPSB1bnBhY2soJ04qJywgZnJlYWQoJGZwLCA0KjI1NikpOwoJJG51bV9vYmplY3RzID0gJGZhbm91dF9hcnlbMjU2XTsKCgkvLyBGaW5kIG91dCBhcHByb3hpbWF0ZSBvYmplY3QgbnVt'));
	@fwrite($fp, base64_decode('YmVyIChmcm9tIGZhbm91dCB0YWJsZSkKCSRmYW5vdXRfaW5kZXggPSBoZXhkZWMoc3Vic3RyKCRvYmplY3Rfd2FudGVkLDAsMikpOwoJaWYgKCRkZWJ1ZykgZWNobyAiRmFub3V0IGluZGV4ID0gIi4oJGZhbm91dF9pbmRleC0xKS4iXG4iOwoJJG9iamVjdF9ubyA9'));
	@fwrite($fp, base64_decode('ICRmYW5vdXRfYXJ5WyRmYW5vdXRfaW5kZXhdOyAvLyBhcHByb3hpbWF0ZQoJaWYgKCRkZWJ1ZykgZWNobyAiT2JqZWN0IG5vIGFwcHJveCAkb2JqZWN0X25vXG4iOwoKCS8vIEZpbmQgdGhlIGV4YWN0IG9iamVjdCBudW1iZXIKCWZzZWVrKCRmcCwgJGZhbm91dF9v'));
	@fwrite($fp, base64_decode('ZmZzZXQgKyA0KjI1NiArIDIwKiRvYmplY3Rfbm8pOwoJJG9iamVjdF9uby0tOwoJZG8gewoJCSRvYmplY3Rfbm8rKzsKCQlpZiAoJHZlcnNpb24gPT0gMSkgewoJCQkkcGFja19vZmZzZXQgPSBmcmVhZCgkZnAsIDQpOwoJCX0KCQkkYmluYXJ5ID0gZnJlYWQoJGZw'));
	@fwrite($fp, base64_decode('LCAyMCk7CgkJaWYgKHN1YnN0cihiaW4yaGV4KCRiaW5hcnkpLDAsMikgIT0gc3Vic3RyKHN0cnRvbG93ZXIoJG9iamVjdF93YW50ZWQpLDAsMikpIHsKCQkJdGhyb3cgbmV3IEV4Y2VwdGlvbigiT2JqZWN0ICRvYmplY3Rfd2FudGVkIG5vdCBmb3VuZCIpOwoJCX0K'));
	@fwrite($fp, base64_decode('CX0gd2hpbGUgKGJpbjJoZXgoJGJpbmFyeSkgIT0gc3RydG9sb3dlcigkb2JqZWN0X3dhbnRlZCkpOwoJaWYgKCRkZWJ1ZykgZWNobyAiRXhhY3Qgb2JqZWN0IG5vID0gJG9iamVjdF9ub1xuIjsKCglpZiAoJHZlcnNpb24gPT0gMikgewoJCS8vIEdldCBDUkMzMgoJ'));
	@fwrite($fp, base64_decode('CWZzZWVrKCRmcCwgJGZhbm91dF9vZmZzZXQgKyA0KjI1NiArIDIwKiRudW1fb2JqZWN0cyArIDQqJG9iamVjdF9ubyk7CgkJJGNyYzMyID0gdW5wYWNrKCdOJywgZnJlYWQoJGZwLDQpKVsxXTsKCQlpZiAoJGRlYnVnKSBlY2hvICJDUkMzMiA9ICIuc3ByaW50Zign'));
	@fwrite($fp, base64_decode('MHglMDh4JywkY3JjMzIpLiJcbiI7CgoJCS8vIEdldCBvZmZzZXQgKDMyIGJpdCkKCQlmc2VlaygkZnAsICRmYW5vdXRfb2Zmc2V0ICsgNCoyNTYgKyAyMCokbnVtX29iamVjdHMgKyA0KiRudW1fb2JqZWN0cyArIDQqJG9iamVjdF9ubyk7CgkJJG9mZnNldF9pbmZv'));
	@fwrite($fp, base64_decode('ID0gdW5wYWNrKCdOJywgZnJlYWQoJGZwLDQpKVsxXTsKCQlpZiAoJG9mZnNldF9pbmZvID49IDB4ODAwMDAwMDApIHsKCQkJLy8gTVNCIHNldCwgc28gdGhlIG9mZnNldCBpcyA2NCBiaXQKCQkJaWYgKCRkZWJ1ZykgZWNobyAiNjQgYml0IHBhY2sgb2Zmc2V0XG4i'));
	@fwrite($fp, base64_decode('OwoJCQkkb2Zmc2V0X2luZm8gJj0gMHg3RkZGRkZGRjsKCQkJZnNlZWsoJGZwLCAkZmFub3V0X29mZnNldCArIDQqMjU2ICsgMjAqJG51bV9vYmplY3RzICsgNCokbnVtX29iamVjdHMgKyA0KiRudW1fb2JqZWN0cyArIDgqJG9mZnNldF9pbmZvKTsKCQkJJHBhY2tf'));
	@fwrite($fp, base64_decode('b2Zmc2V0ID0gdW5wYWNrKCdKJywgZnJlYWQoJGZwLDgpKVsxXTsKCQl9IGVsc2UgewoJCQkvLyBNU0IgaXMgbm90IHNldCwgc28gdGhlIG9mZnNldCBpcyAzMiBiaXQKCQkJaWYgKCRkZWJ1ZykgZWNobyAiMzIgYml0IHBhY2sgb2Zmc2V0XG4iOwoJCQkkb2Zmc2V0'));
	@fwrite($fp, base64_decode('X2luZm8gJj0gMHg3RkZGRkZGRjsKCQkJJHBhY2tfb2Zmc2V0ID0gJG9mZnNldF9pbmZvOwoJCX0KCX0KCglpZiAoJGRlYnVnKSBlY2hvICJQYWNrIGZpbGUgb2Zmc2V0ID0gIi5zcHJpbnRmKCcweCV4JywkcGFja19vZmZzZXQpLiJcbiI7CgoJLy8gQ2xvc2UgaW5k'));
	@fwrite($fp, base64_decode('ZXggZmlsZQoJZmNsb3NlKCRmcCk7CgoJLy8gT3BlbiBwYWNrIGZpbGUKCSRmcCA9IGZvcGVuKCRwYWNrX2ZpbGUsICdyYicpOwoJaWYgKCEkZnApIHRocm93IG5ldyBFeGNlcHRpb24oIkNhbm5vdCBvcGVuIHBhY2sgZmlsZSAkcGFja19maWxlIik7CgoJLy8gRmlu'));
	@fwrite($fp, base64_decode('ZCBvdXQgdHlwZQoJZnNlZWsoJGZwLCAkcGFja19vZmZzZXQpOwoJJHNpemVfaW5mbyA9IHVucGFjaygnQycsIGZyZWFkKCRmcCwxKSlbMV07CgoJJHR5cGUgPSAoJHNpemVfaW5mbyAmIDB4RTApID4+IDU7IC8qMGIxMTEwMDAwMCovCglzd2l0Y2ggKCR0eXBlKSB7'));
	@fwrite($fp, base64_decode('CgkJY2FzZSAxOgoJCQlpZiAoJGRlYnVnKSBlY2hvICJUeXBlID0gT0JKX0NPTU1JVCAoJHR5cGUpXG4iOwoJCQlicmVhazsKCQljYXNlIDI6CgkJCWlmICgkZGVidWcpIGVjaG8gIlR5cGUgPSBPQkpfVFJFRSAoJHR5cGUpXG4iOwoJCQlicmVhazsKCQljYXNlIDM6'));
	@fwrite($fp, base64_decode('CgkJCWlmICgkZGVidWcpIGVjaG8gIlR5cGUgPSBPQkpfQkxPQiAoJHR5cGUpXG4iOwoJCQlicmVhazsKCQljYXNlIDQ6CgkJCWlmICgkZGVidWcpIGVjaG8gIlR5cGUgPSBPQkpfVEFHICgkdHlwZSlcbiI7CgkJCWJyZWFrOwoJCWNhc2UgNjoKCQkJaWYgKCRkZWJ1'));
	@fwrite($fp, base64_decode('ZykgZWNobyAiVHlwZSA9IE9CSl9PRlNfREVMVEEgKCR0eXBlKVxuIjsKCQkJYnJlYWs7CgkJY2FzZSA3OgoJCQlpZiAoJGRlYnVnKSBlY2hvICJUeXBlID0gT0JKX1JFRl9ERUxUQSAoJHR5cGUpXG4iOwoJCQlicmVhazsKCQlkZWZhdWx0OgoJCQlpZiAoJGRlYnVn'));
	@fwrite($fp, base64_decode('KSBlY2hvICJUeXBlID0gSW52YWxpZCAoJHR5cGUpXG4iOwoJCQlicmVhazsKCX0KCgkvLyBGaW5kIG91dCBzaXplCgkkc2l6ZSA9ICRzaXplX2luZm8gJiAweDFGIC8qMHgwMDAxMTExMSovOwoJJHNoaWZ0X2luZm8gPSA1OwoJZG8gewoJCSRzaXplX2luZm8gPSB1'));
	@fwrite($fp, base64_decode('bnBhY2soJ0MnLCBmcmVhZCgkZnAsMSkpWzFdOwoJCSRzaXplID0gKCgkc2l6ZV9pbmZvICYgMHg3RikgPDwgJHNoaWZ0X2luZm8pICsgJHNpemU7CgkJJHNoaWZ0X2luZm8gKz0gODsKCX0gd2hpbGUgKCRvZmZzZXRfaW5mbyA+PSAweDgwMDAwMDAwKTsKCglpZiAo'));
	@fwrite($fp, base64_decode('JGRlYnVnKSBlY2hvICJQYWNrZWQgc2l6ZSA9ICIuc3ByaW50ZignMHgleCcsJHNpemUpLiJcbiI7CgoJLy8gUmVhZCBkZWx0YSBiYXNlIHR5cGUKCWlmICgkdHlwZSA9PSA2LypPQkpfT0ZTX0RFTFRBKi8pIHsKCQkvLyAiYSBuZWdhdGl2ZSByZWxhdGl2ZSBvZmZz'));
	@fwrite($fp, base64_decode('ZXQgZnJvbSB0aGUgZGVsdGEgb2JqZWN0J3MgcG9zaXRpb24gaW4gdGhlIHBhY2sKCQkvLyBpZiB0aGlzIGlzIGFuIE9CSl9PRlNfREVMVEEgb2JqZWN0IgoJCSRkZWx0YV9pbmZvID0gdW5wYWNrKCdDKicsIGZyZWFkKCRmcCw0KSlbMV07IC8vIFRPRE8/IQoJCWlm'));
	@fwrite($fp, base64_decode('ICgkZGVidWcpIGVjaG8gIkRlbHRhIG5lZ2F0aXZlIG9mZnNldDogJGRlbHRhX2luZm9cbiI7Cgl9CglpZiAoJHR5cGUgPT0gNy8qT0JKX1JFRl9ERUxUQSovKSB7CgkJLy8gImJhc2Ugb2JqZWN0IG5hbWUgaWYgT0JKX1JFRl9ERUxUQSIKCQkkZGVsdGFfaW5mbyA9'));
	@fwrite($fp, base64_decode('IGJpbjJoZXgoZnJlYWQoJGZwLDIwKSlbMV07IC8vIFRPRE8/IQoJCWlmICgkZGVidWcpIGVjaG8gIkRlbHRhIGJhc2Ugb2JqZWN0IG5hbWU6ICRkZWx0YV9pbmZvXG4iOwoJfQoKCS8vIFJlYWQgY29tcHJlc3NlZCBkYXRhCgkkY29tcHJlc3NlZCA9IGZyZWFkKCRm'));
	@fwrite($fp, base64_decode('cCwkc2l6ZSk7CgoJLy8gVW5jb21wcmVzcwoJJHVuY29tcHJlc3NlZCA9IGd6dW5jb21wcmVzcygkY29tcHJlc3NlZCk7CglpZiAoJGRlYnVnKSBlY2hvICIkdW5jb21wcmVzc2VkXG4iOwoKCS8vIENsb3NlIHBhY2sgZmlsZQoJZmNsb3NlKCRmcCk7CgoJLy8gQ2hl'));
	@fwrite($fp, base64_decode('Y2sgQ1JDMzIKCS8vIFRPRE86IERvZXMgbm90IGZpdCwgbm90IGNyYzMyIG5vciBjcmMzMmIuLi4KCS8vIGlmICgkZGVidWcpIGVjaG8gIkNSQzMyIGZvdW5kID0gMHgiLmhhc2goJ2NyYzMyJywkY29tcHJlc3NlZCkuIlxuIjsKCglyZXR1cm4gJHVuY29tcHJlc3Nl'));
	@fwrite($fp, base64_decode('ZDsKfQ0K'));
	@fclose($fp);
}
if (is_file('vendor/danielmarschall/php_utils/git_utils.inc.php') && (sha1_file('vendor/danielmarschall/php_utils/git_utils.inc.php') != '1bfb19d61d9050762fdc02979a8de49aae6976df')) {
	warn('File was created by someone else. Will overwrite the changes now: vendor/danielmarschall/php_utils/git_utils.inc.php');
	$tmp = pathinfo('vendor/danielmarschall/php_utils/git_utils.inc.php');
	$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('vendor/danielmarschall/php_utils/git_utils.inc.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
	warn('Creating a backup as '.$backup_name);
	if (!@copy('vendor/danielmarschall/php_utils/git_utils.inc.php', $backup_name)) {
		warn('Creation of backup failed');
	}
}
writefile_1();
if (!is_file('vendor/danielmarschall/php_utils/git_utils.inc.php')) {
	warn('File cannot be created (not existing): vendor/danielmarschall/php_utils/git_utils.inc.php');
} else if (sha1_file('vendor/danielmarschall/php_utils/git_utils.inc.php') != '1bfb19d61d9050762fdc02979a8de49aae6976df') {
	warn('File cannot be created (checksum mismatch): vendor/danielmarschall/php_utils/git_utils.inc.php');
} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('vendor/danielmarschall/php_utils/git_utils.inc.php', 0644)) {
	warn('Could not change file permissions of vendor/danielmarschall/php_utils/git_utils.inc.php');
}

// Files different: includes/functions.inc.php
function writefile_2() {
	@$fp = fopen('includes/functions.inc.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMSBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgpmdW5jdGlvbiBpbnNlcnRXaGl0ZXNwYWNlKCRzdHIsICRpbmRleCkgewoJcmV0dXJuIHN1YnN0cigkc3RyLCAwLCAkaW5kZXgpIC4gJyAnIC4gc3Vic3RyKCRzdHIsICRpbmRleCk7Cn0K'));
	@fwrite($fp, base64_decode('CmZ1bmN0aW9uIGpzX2VzY2FwZSgkZGF0YSkgewoJLy8gVE9ETy4uLi4ganNvbl9lbmNvZGU/PwoJJGRhdGEgPSBzdHJfcmVwbGFjZSgnXFwnLCAnXFxcXCcsICRkYXRhKTsKCSRkYXRhID0gc3RyX3JlcGxhY2UoJ1wnJywgJ1xcXCcnLCAkZGF0YSk7CglyZXR1cm4g'));
	@fwrite($fp, base64_decode('IiciIC4gJGRhdGEgLiAiJyI7Cn0KCmZ1bmN0aW9uIHRyaW1fYnIoJGh0bWwpIHsKCSRjb3VudCA9IDA7CglkbyB7ICRodG1sID0gcHJlZ19yZXBsYWNlKCdAXlxzKjxccypiclxzKi97MCwxfVxzKj5AaXNVJywgJycsICRodG1sLCAtMSwgJGNvdW50KTsgfSB3aGls'));
	@fwrite($fp, base64_decode('ZSAoJGNvdW50ID4gMCk7IC8vIGxlZnQgdHJpbQoJZG8geyAkaHRtbCA9IHByZWdfcmVwbGFjZSgnQDxccypiclxzKi97MCwxfVxzKj5ccyokQGlzVScsICcnLCAkaHRtbCwgLTEsICRjb3VudCk7IH0gd2hpbGUgKCRjb3VudCA+IDApOyAvLyByaWdodCB0cmltCgly'));
	@fwrite($fp, base64_decode('ZXR1cm4gJGh0bWw7Cn0KCmZ1bmN0aW9uIGdlbmVyYXRlUmFuZG9tU3RyaW5nKCRsZW5ndGgpIHsKCS8vIE5vdGU6IFRoaXMgZnVuY3Rpb24gY2FuIGJlIHVzZWQgaW4gdGVtcG9yYXJ5IGZpbGUgbmFtZXMsIHNvIHlvdQoJLy8gbWF5IG5vdCBnZW5lcmF0ZSBpbGxl'));
	@fwrite($fp, base64_decode('Z2FsIGZpbGUgbmFtZSBjaGFyYWN0ZXJzLgoJJGNoYXJhY3RlcnMgPSAnMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonOwoJJGNoYXJhY3RlcnNMZW5ndGggPSBzdHJsZW4oJGNoYXJhY3RlcnMpOwoJ'));
	@fwrite($fp, base64_decode('JHJhbmRvbVN0cmluZyA9ICcnOwoJZm9yICgkaSA9IDA7ICRpIDwgJGxlbmd0aDsgJGkrKykgewoJCSRyYW5kb21TdHJpbmcgLj0gJGNoYXJhY3RlcnNbcmFuZCgwLCAkY2hhcmFjdGVyc0xlbmd0aCAtIDEpXTsKCX0KCXJldHVybiAkcmFuZG9tU3RyaW5nOwp9Cgpm'));
	@fwrite($fp, base64_decode('dW5jdGlvbiB2ZXJpZnlfcHJpdmF0ZV9wdWJsaWNfa2V5KCRwcml2S2V5LCAkcHViS2V5KSB7Cgl0cnkgewoJCWlmIChlbXB0eSgkcHJpdktleSkpIHJldHVybiBmYWxzZTsKCQlpZiAoZW1wdHkoJHB1YktleSkpIHJldHVybiBmYWxzZTsKCQkkZGF0YSA9IGdlbmVy'));
	@fwrite($fp, base64_decode('YXRlUmFuZG9tU3RyaW5nKDI1KTsKCQkkZW5jcnlwdGVkID0gJyc7CgkJJGRlY3J5cHRlZCA9ICcnOwoJCWlmICghQG9wZW5zc2xfcHVibGljX2VuY3J5cHQoJGRhdGEsICRlbmNyeXB0ZWQsICRwdWJLZXkpKSByZXR1cm4gZmFsc2U7CgkJaWYgKCFAb3BlbnNzbF9w'));
	@fwrite($fp, base64_decode('cml2YXRlX2RlY3J5cHQoJGVuY3J5cHRlZCwgJGRlY3J5cHRlZCwgJHByaXZLZXkpKSByZXR1cm4gZmFsc2U7CgkJcmV0dXJuICRkZWNyeXB0ZWQgPT0gJGRhdGE7Cgl9IGNhdGNoIChFeGNlcHRpb24gJGUpIHsKCQlyZXR1cm4gZmFsc2U7Cgl9Cn0KCmZ1bmN0aW9u'));
	@fwrite($fp, base64_decode('IHNtYWxsaGFzaCgkZGF0YSkgeyAvLyBnZXQgMzEgYml0cyBmcm9tIFNIQTEuIFZhbHVlcyAwLi4yMTQ3NDgzNjQ3CglyZXR1cm4gKGhleGRlYyhzdWJzdHIoc2hhMSgkZGF0YSksLTQqMikpICYgMHg3RkZGRkZGRik7Cn0KCmZ1bmN0aW9uIHNwbGl0X2ZpcnN0bmFt'));
	@fwrite($fp, base64_decode('ZV9sYXN0bmFtZSgkbmFtZSkgewoJJGFyeSA9IGV4cGxvZGUoJyAnLCAkbmFtZSk7CgkkbGFzdF9uYW1lID0gYXJyYXlfcG9wKCRhcnkpOwoJJGZpcnN0X25hbWUgPSBpbXBsb2RlKCcgJywgJGFyeSk7CglyZXR1cm4gYXJyYXkoJGZpcnN0X25hbWUsICRsYXN0X25h'));
	@fwrite($fp, base64_decode('bWUpOwp9CgpmdW5jdGlvbiBvcmlnaW5IZWFkZXJzKCkgewoJLy8gQ09SUwoJLy8gQXV0aG9yOiBUaWxsIFdlaG93c2tpCgkvLyBUT0RPOiBhZGQgdG8gY2xhc3MgT0lEcGx1cwoKCWhlYWRlcigiQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHM6IHRydWUi'));
	@fwrite($fp, base64_decode('KTsKCWhlYWRlcigiQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luOiAiLnN0cmlwX3RhZ3MoKChpc3NldCgkX1NFUlZFUlsnSFRUUF9PUklHSU4nXSkpID8gJF9TRVJWRVJbJ0hUVFBfT1JJR0lOJ10gOiAiKiIpKSk7CgoJaGVhZGVyKCJBY2Nlc3MtQ29udHJvbC1B'));
	@fwrite($fp, base64_decode('bGxvdy1IZWFkZXJzOiBJZi1Ob25lLU1hdGNoLCBYLVJlcXVlc3RlZC1XaXRoLCBPcmlnaW4sIFgtRnJkbHdlYi1CdWdzLCBFdGFnLCBYLUZvcmdlcnktUHJvdGVjdGlvbi1Ub2tlbiwgWC1DU1JGLVRva2VuIik7CgoJaWYgKGlzc2V0KCRfU0VSVkVSWydIVFRQX09S'));
	@fwrite($fp, base64_decode('SUdJTiddKSkgewoJCWhlYWRlcignWC1GcmFtZS1PcHRpb25zOiBBTExPVy1GUk9NICcuJF9TRVJWRVJbJ0hUVFBfT1JJR0lOJ10pOwoJfSBlbHNlIHsKCQloZWFkZXJfcmVtb3ZlKCJYLUZyYW1lLU9wdGlvbnMiKTsKCX0KCgkkZXhwb3NlID0gYXJyYXkoJ0V0YWcn'));
	@fwrite($fp, base64_decode('LCAnWC1DU1JGLVRva2VuJyk7Cglmb3JlYWNoIChoZWFkZXJzX2xpc3QoKSBhcyAkbnVtID0+ICRoZWFkZXIpIHsKCQkkaCA9IGV4cGxvZGUoJzonLCAkaGVhZGVyKTsKCQkkZXhwb3NlW10gPSB0cmltKCRoWzBdKTsKCX0KCWhlYWRlcigiQWNjZXNzLUNvbnRyb2wt'));
	@fwrite($fp, base64_decode('RXhwb3NlLUhlYWRlcnM6ICIuaW1wbG9kZSgnLCcsJGV4cG9zZSkpOwoKCWhlYWRlcigiVmFyeTogT3JpZ2luIik7Cn0KCmZ1bmN0aW9uIGdldF9jYWxsaW5nX2Z1bmN0aW9uKCkgewoJJGV4ID0gbmV3IEV4Y2VwdGlvbigpOwoJJHRyYWNlID0gJGV4LT5nZXRUcmFj'));
	@fwrite($fp, base64_decode('ZSgpOwoJaWYgKCFpc3NldCgkdHJhY2VbMl0pKSByZXR1cm4gX0woJyhtYWluKScpOwoJJGZpbmFsX2NhbGwgPSAkdHJhY2VbMl07CglyZXR1cm4gJGZpbmFsX2NhbGxbJ2ZpbGUnXS4nOicuJGZpbmFsX2NhbGxbJ2xpbmUnXS4nLycuJGZpbmFsX2NhbGxbJ2Z1bmN0'));
	@fwrite($fp, base64_decode('aW9uJ10uJygpJzsKfQoKaWYgKCFmdW5jdGlvbl9leGlzdHMoJ21iX3dvcmR3cmFwJykpIHsKCWZ1bmN0aW9uIG1iX3dvcmR3cmFwKCRzdHIsICR3aWR0aCA9IDc1LCAkYnJlYWsgPSAiXG4iLCAkY3V0ID0gZmFsc2UpIHsKCQkvLyBodHRwczovL3N0YWNrb3ZlcmZs'));
	@fwrite($fp, base64_decode('b3cuY29tL2EvNDk4ODQ5NC80ODg1MzkKCQkkbGluZXMgPSBleHBsb2RlKCRicmVhaywgJHN0cik7CgkJZm9yZWFjaCAoJGxpbmVzIGFzICYkbGluZSkgewoJCQkkbGluZSA9IHJ0cmltKCRsaW5lKTsKCQkJaWYgKG1iX3N0cmxlbigkbGluZSkgPD0gJHdpZHRoKSB7'));
	@fwrite($fp, base64_decode('CgkJCQljb250aW51ZTsKCQkJfQoJCQkkd29yZHMgPSBleHBsb2RlKCcgJywgJGxpbmUpOwoJCQkkbGluZSA9ICcnOwoJCQkkYWN0dWFsID0gJyc7CgkJCWZvcmVhY2ggKCR3b3JkcyBhcyAkd29yZCkgewoJCQkJaWYgKG1iX3N0cmxlbigkYWN0dWFsLiR3b3JkKSA8'));
	@fwrite($fp, base64_decode('PSAkd2lkdGgpIHsKCQkJCQkkYWN0dWFsIC49ICR3b3JkLicgJzsKCQkJCX0gZWxzZSB7CgkJCQkJaWYgKCRhY3R1YWwgIT0gJycpIHsKCQkJCQkJJGxpbmUgLj0gcnRyaW0oJGFjdHVhbCkuJGJyZWFrOwoJCQkJCX0KCQkJCQkkYWN0dWFsID0gJHdvcmQ7CgkJCQkJ'));
	@fwrite($fp, base64_decode('aWYgKCRjdXQpIHsKCQkJCQkJd2hpbGUgKG1iX3N0cmxlbigkYWN0dWFsKSA+ICR3aWR0aCkgewoJCQkJCQkJJGxpbmUgLj0gbWJfc3Vic3RyKCRhY3R1YWwsIDAsICR3aWR0aCkuJGJyZWFrOwoJCQkJCQkJJGFjdHVhbCA9IG1iX3N1YnN0cigkYWN0dWFsLCAkd2lk'));
	@fwrite($fp, base64_decode('dGgpOwoJCQkJCQl9CgkJCQkJfQoJCQkJCSRhY3R1YWwgLj0gJyAnOwoJCQkJfQoJCQl9CgkJCSRsaW5lIC49IHRyaW0oJGFjdHVhbCk7CgkJfQoJCXJldHVybiBpbXBsb2RlKCRicmVhaywgJGxpbmVzKTsKCX0KfQoKZnVuY3Rpb24gaHR0cE91dFdpdGhFVGFnKCRv'));
	@fwrite($fp, base64_decode('dXQsICRjb250ZW50VHlwZSwgJGZpbGVuYW1lPScnKSB7CgkkZXRhZyA9IG1kNSgkb3V0KTsKCWhlYWRlcigiRXRhZzogJGV0YWciKTsKCWhlYWRlcigiQ29udGVudC1NRDU6ICRldGFnIik7IC8vIFJGQyAyNjE2IGNsYXVzZSAxNC4xNQoJaWYgKGlzc2V0KCRfU0VS'));
	@fwrite($fp, base64_decode('VkVSWydIVFRQX0lGX05PTkVfTUFUQ0gnXSkgJiYgKHRyaW0oJF9TRVJWRVJbJ0hUVFBfSUZfTk9ORV9NQVRDSCddKSA9PSAkZXRhZykpIHsKCQloZWFkZXIoIkhUVFAvMS4xIDMwNCBOb3QgTW9kaWZpZWQiKTsKCX0gZWxzZSB7CgkJaGVhZGVyKCJDb250ZW50LVR5'));
	@fwrite($fp, base64_decode('cGU6ICRjb250ZW50VHlwZSIpOwoJCWlmICghZW1wdHkoJGZpbGVuYW1lKSkgewoJCQloZWFkZXIoJ0NvbnRlbnQtRGlzcG9zaXRpb246aW5saW5lOyBmaWxlbmFtZT0iJy4kZmlsZW5hbWUuJyInKTsKCQl9CgkJZWNobyAkb3V0OwoJfQoJZGllKCk7Cn0KCmZ1bmN0'));
	@fwrite($fp, base64_decode('aW9uIG15X3ZzcHJpbnRmKCRzdHIsICRhcmdzKSB7CiAgICAgICAgJG4gPSAxOwogICAgICAgIGZvcmVhY2ggKCRhcmdzIGFzICR2YWwpIHsKICAgICAgICAgICAgICAgICRzdHIgPSBzdHJfcmVwbGFjZSgiJSRuIiwgJHZhbCwgJHN0cik7CiAgICAgICAgICAgICAg'));
	@fwrite($fp, base64_decode('ICAkbisrOwogICAgICAgIH0KICAgICAgICAkc3RyID0gc3RyX3JlcGxhY2UoIiUlIiwgIiUiLCAkc3RyKTsKICAgICAgICByZXR1cm4gJHN0cjsKfQoKZnVuY3Rpb24gX0woJHN0ciwgLi4uJHNwcmludGZBcmdzKSB7CglzdGF0aWMgJHRyYW5zbGF0aW9uX2FycmF5'));
	@fwrite($fp, base64_decode('ID0gYXJyYXkoKTsKCXN0YXRpYyAkdHJhbnNsYXRpb25fbG9hZGVkID0gbnVsbDsKCgkkc3RyID0gdHJpbSgkc3RyKTsKCglpZiAoIWNsYXNzX2V4aXN0cygnT0lEcGx1cycpKSB7CgkJcmV0dXJuIG15X3ZzcHJpbnRmKCRzdHIsICRzcHJpbnRmQXJncyk7Cgl9CgoJ'));
	@fwrite($fp, base64_decode('JGxhbmcgPSBPSURwbHVzOjpnZXRDdXJyZW50TGFuZygpOwoJJHRhID0gT0lEcGx1czo6Z2V0VHJhbnNsYXRpb25BcnJheSgkbGFuZyk7CgkkcmVzID0gKGlzc2V0KCR0YVskbGFuZ10pICYmIGlzc2V0KCR0YVskbGFuZ11bJHN0cl0pKSA/ICR0YVskbGFuZ11bJHN0'));
	@fwrite($fp, base64_decode('cl0gOiAkc3RyOwoKCSRyZXMgPSBzdHJfcmVwbGFjZSgnIyMjJywgT0lEcGx1czo6YmFzZUNvbmZpZygpLT5nZXRWYWx1ZSgnVEFCTEVOQU1FX1BSRUZJWCcsICcnKSwgJHJlcyk7CgoJJHJlcyA9IG15X3ZzcHJpbnRmKCRyZXMsICRzcHJpbnRmQXJncyk7CgoJcmV0'));
	@fwrite($fp, base64_decode('dXJuICRyZXM7Cn0KCmZ1bmN0aW9uIF9DaGVja1BhcmFtRXhpc3RzKCRwYXJhbXMsICRrZXkpIHsKCWlmICghaXNzZXQoJHBhcmFtc1ska2V5XSkpIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdQYXJhbWV0ZXIgJTEgaXMgbWlzc2luZycsICRrZXkpKTsK'));
	@fwrite($fp, base64_decode('fQoKZnVuY3Rpb24gZXh0cmFjdEh0bWxDb250ZW50cygkY29udCkgewoJLy8gbWFrZSBzdXJlIHRoZSBwcm9ncmFtIHdvcmtzIGV2ZW4gaWYgdGhlIHVzZXIgcHJvdmlkZWQgSFRNTCBpcyBub3QgVVRGLTgKCSRjb250ID0gaWNvbnYobWJfZGV0ZWN0X2VuY29kaW5n'));
	@fwrite($fp, base64_decode('KCRjb250LCBtYl9kZXRlY3Rfb3JkZXIoKSwgdHJ1ZSksICdVVEYtOC8vSUdOT1JFJywgJGNvbnQpOwoJJGJvbSA9IHBhY2soJ0gqJywnRUZCQkJGJyk7CgkkY29udCA9IHByZWdfcmVwbGFjZSgiL14kYm9tLyIsICcnLCAkY29udCk7CgoJJG91dF9qcyA9ICcnOwoJ'));
	@fwrite($fp, base64_decode('JG0gPSBhcnJheSgpOwoJcHJlZ19tYXRjaF9hbGwoJ0A8c2NyaXB0W14+XSo+KC4rKTwvc2NyaXB0PkBpc21VJywgJGNvbnQsICRtKTsKCWZvcmVhY2ggKCRtWzFdIGFzICR4KSB7CgkJJG91dF9qcyA9ICR4IC4gIlxuXG4iOwoJfQoKCSRvdXRfY3NzID0gJyc7Cgkk'));
	@fwrite($fp, base64_decode('bSA9IGFycmF5KCk7CglwcmVnX21hdGNoX2FsbCgnQDxzdHlsZVtePl0qPiguKyk8L3N0eWxlPkBpc21VJywgJGNvbnQsICRtKTsKCWZvcmVhY2ggKCRtWzFdIGFzICR4KSB7CgkJJG91dF9jc3MgPSAkeCAuICJcblxuIjsKCX0KCgkkb3V0X2h0bWwgPSAkY29udDsK'));
	@fwrite($fp, base64_decode('CSRvdXRfaHRtbCA9IHByZWdfcmVwbGFjZSgnQF4oLispPGJvZHlbXj5dKj5AaXNVJywgJycsICRvdXRfaHRtbCk7Cgkkb3V0X2h0bWwgPSBwcmVnX3JlcGxhY2UoJ0A8L2JvZHk+LiskQGlzVScsICcnLCAkb3V0X2h0bWwpOwoJJG91dF9odG1sID0gcHJlZ19yZXBs'));
	@fwrite($fp, base64_decode('YWNlKCdAPHRpdGxlPi4rPC90aXRsZT5AaXNVJywgJycsICRvdXRfaHRtbCk7Cgkkb3V0X2h0bWwgPSBwcmVnX3JlcGxhY2UoJ0A8aDE+Lis8L2gxPkBpc1UnLCAnJywgJG91dF9odG1sLCAxKTsKCSRvdXRfaHRtbCA9IHByZWdfcmVwbGFjZSgnQDxzY3JpcHRbXj5d'));
	@fwrite($fp, base64_decode('Kj4oLispPC9zY3JpcHQ+QGlzbVUnLCAnJywgJG91dF9odG1sKTsKCSRvdXRfaHRtbCA9IHByZWdfcmVwbGFjZSgnQDxzdHlsZVtePl0qPiguKyk8L3N0eWxlPkBpc21VJywgJycsICRvdXRfaHRtbCk7CgoJcmV0dXJuIGFycmF5KCRvdXRfaHRtbCwgJG91dF9qcywg'));
	@fwrite($fp, base64_decode('JG91dF9jc3MpOwp9CgpmdW5jdGlvbiBzaGEzXzUxMigkcGFzc3dvcmQsICRyYXdfb3V0cHV0PWZhbHNlKSB7CglpZiAodmVyc2lvbl9jb21wYXJlKFBIUF9WRVJTSU9OLCAnNy4xLjAnKSA+PSAwKSB7CgkJcmV0dXJuIGhhc2goJ3NoYTMtNTEyJywgJHBhc3N3b3Jk'));
	@fwrite($fp, base64_decode('LCAkcmF3X291dHB1dCk7Cgl9IGVsc2UgewoJCXJldHVybiBiYlxTaGEzXFNoYTM6Omhhc2goJHBhc3N3b3JkLCA1MTIsICRyYXdfb3V0cHV0KTsKCX0KfQoKZnVuY3Rpb24gZ2V0X3N2bl9yZXZpc2lvbigkZGlyPScnKSB7CglpZiAoIWVtcHR5KCRkaXIpKSAkZGly'));
	@fwrite($fp, base64_decode('IC49ICcvJzsKCgkvLyBUcnkgdG8gZ2V0IHRoZSB2ZXJzaW9uIHZpYSBTUUxpdGUzCglpZiAoY2xhc3NfZXhpc3RzKCdTUUxpdGUzJykpIHsKCQl0cnkgewoJCQkkZGIgPSBuZXcgU1FMaXRlMygkZGlyLicuc3ZuL3djLmRiJyk7CgkJCSRyZXN1bHRzID0gJGRiLT5x'));
	@fwrite($fp, base64_decode('dWVyeSgnU0VMRUNUIE1JTihyZXZpc2lvbikgQVMgcmV2IEZST00gTk9ERVNfQkFTRScpOwoJCQl3aGlsZSAoJHJvdyA9ICRyZXN1bHRzLT5mZXRjaEFycmF5KCkpIHsKCQkJCXJldHVybiAoJGNhY2hlZFZlcnNpb24gPSAkcm93WydyZXYnXSk7CgkJCX0KCQkJJGRi'));
	@fwrite($fp, base64_decode('LT5jbG9zZSgpOwoJCQkkZGIgPSBudWxsOwoJCX0gY2F0Y2ggKEV4Y2VwdGlvbiAkZSkgewoJCX0KCX0KCWlmIChjbGFzc19leGlzdHMoJ1BETycpKSB7CgkJdHJ5IHsKCQkJJHBkbyA9IG5ldyBQRE8oJ3NxbGl0ZTonLiRkaXIuJy5zdm4vd2MuZGInKTsKCQkJJHJl'));
	@fwrite($fp, base64_decode('cyA9ICRwZG8tPnF1ZXJ5KCdTRUxFQ1QgTUlOKHJldmlzaW9uKSBBUyByZXYgRlJPTSBOT0RFU19CQVNFJyk7CgkJCSRyb3cgPSAkcmVzLT5mZXRjaCgpOwoJCQlpZiAoJHJvdyAhPT0gZmFsc2UpIHsKCQkJCXJldHVybiAoJGNhY2hlZFZlcnNpb24gPSAkcm93Wydy'));
	@fwrite($fp, base64_decode('ZXYnXSk7CgkJCX0KCQkJJHBkbyA9IG51bGw7CgkJfSBjYXRjaCAoRXhjZXB0aW9uICRlKSB7CgkJfQoJfQoKCS8vIFRyeSB0byBmaW5kIG91dCB0aGUgU1ZOIHZlcnNpb24gdXNpbmcgdGhlIHNoZWxsCgkvLyBXZSBkb24ndCBwcmlvcml0aXplIHRoaXMgbWV0aG9k'));
	@fwrite($fp, base64_decode('LCBiZWNhdXNlIGEgZmFpbGVkIHNoZWxsIGFjY2VzcyB3aWxsIGZsb29kIHRoZSBhcGFjaGUgZXJyb3IgbG9nIHdpdGggU1RERVJSIG1lc3NhZ2VzCgkkb3V0cHV0ID0gQHNoZWxsX2V4ZWMoJ3N2bnZlcnNpb24gJy5lc2NhcGVzaGVsbGFyZygkZGlyKSk7CgkkbWF0'));
	@fwrite($fp, base64_decode('Y2ggPSBhcnJheSgpOwoJaWYgKHByZWdfbWF0Y2goJy9cZCsvJywgJG91dHB1dCwgJG1hdGNoKSkgewoJCXJldHVybiAoJGNhY2hlZFZlcnNpb24gPSAkbWF0Y2hbMF0pOwoJfQoKCSRvdXRwdXQgPSBAc2hlbGxfZXhlYygnc3ZuIGluZm8gJy5lc2NhcGVzaGVsbGFy'));
	@fwrite($fp, base64_decode('ZygkZGlyKSk7CglpZiAocHJlZ19tYXRjaCgnL1JldmlzaW9uOlxzKihcZCspL20nLCAkb3V0cHV0LCAkbWF0Y2gpKSB7IC8vIGRvIG5vdCB0cmFuc2xhdGUKCQlyZXR1cm4gKCRjYWNoZWRWZXJzaW9uID0gJG1hdGNoWzFdKTsKCX0KCglyZXR1cm4gZmFsc2U7Cn0K'));
	@fwrite($fp, base64_decode('CmZ1bmN0aW9uIGdldF9naXRzdm5fcmV2aXNpb24oJGRpcj0nJykgewoJdHJ5IHsKCQkvLyByZXF1aXJlcyBkYW5pZWxtYXJzY2hhbGwvZ2l0X3V0aWxzLmluYy5waHAKCQkkY29tbWl0X21zZyA9IGdpdF9nZXRfbGF0ZXN0X2NvbW1pdF9tZXNzYWdlKCRkaXIuJy8u'));
	@fwrite($fp, base64_decode('Z2l0Jyk7Cgl9IGNhdGNoIChFeGNlcHRpb24gJGUpIHsKCQkvLyBUcnkgY29tbWFuZC1saW5lCgkJJGVjID0gLTE7CgkJJG91dCA9IGFycmF5KCk7CgkJaWYgKCFlbXB0eSgkZGlyKSkgewoJCQlAZXhlYygnY2QgJy5lc2NhcGVzaGVsbGFyZygkZGlyKS4nICYmIGdp'));
	@fwrite($fp, base64_decode('dCBsb2cnLCAkb3V0LCAkZWMpOwoJCX0gZWxzZSB7CgkJCUBleGVjKCdnaXQgbG9nJywgJG91dCwgJGVjKTsKCQl9CgkJaWYgKCRlYyA9PSAwKSB7CgkJCSRjb21taXRfbXNnID0gaW1wbG9kZSgiXG4iLCAkb3V0KTsKCQl9IGVsc2UgewoJCQlyZXR1cm4gZmFsc2U7'));
	@fwrite($fp, base64_decode('CgkJfQoJfQoKCSRtID0gYXJyYXkoKTsKCWlmIChwcmVnX21hdGNoKCclZ2l0LXN2bi1pZDogKC4rKUAoXFxkKykgJWlzbVUnLCAkY29tbWl0X21zZywgJG0pKSB7CgkJcmV0dXJuICRtWzJdOwoJfSBlbHNlIHsKCQlyZXR1cm4gZmFsc2U7Cgl9Cn0KCmlmICghZnVu'));
	@fwrite($fp, base64_decode('Y3Rpb25fZXhpc3RzKCdzdHJfZW5kc193aXRoJykpIHsKCS8vIFBIUCA3LnggY29tcGF0aWJpbGl0eQoJZnVuY3Rpb24gc3RyX2VuZHNfd2l0aCgkaGF5c3RhY2ssICRuZWVkbGUpIHsKCQkkbGVuZ3RoID0gc3RybGVuKCRuZWVkbGUpOwoJCXJldHVybiAkbGVuZ3Ro'));
	@fwrite($fp, base64_decode('ID4gMCA/IHN1YnN0cigkaGF5c3RhY2ssIC0kbGVuZ3RoKSA9PT0gJG5lZWRsZSA6IHRydWU7Cgl9Cn0KCgppZiAoIWZ1bmN0aW9uX2V4aXN0cygnc3RyX3N0YXJ0c193aXRoJykpIHsKCS8vIFBIUCA3LnggY29tcGF0aWJpbGl0eQoJZnVuY3Rpb24gc3RyX3N0YXJ0'));
	@fwrite($fp, base64_decode('c193aXRoKCRoYXlzdGFjaywgJG5lZWRsZSkgewoJCXJldHVybiBzdHJwb3MoJGhheXN0YWNrLCAkbmVlZGxlKSA9PT0gMDsKCX0KfQoKZnVuY3Rpb24gcmVjX2lzX2RpcigkZGlyKSB7CgkkZGlycyA9IGdsb2IoJGRpcik7Cglmb3JlYWNoICgkZGlycyBhcyAkZGly'));
	@fwrite($fp, base64_decode('KSB7CgkJaWYgKGlzX2RpcigkZGlyKSkgcmV0dXJuIHRydWU7Cgl9CglyZXR1cm4gZmFsc2U7Cn0KCmZ1bmN0aW9uIGlzSW50ZXJuZXRFeHBsb3JlcigpIHsKCS8vIHNlZSBhbHNvIGluY2x1ZGVzL29pZHBsdXNfYmFzZS5qcwoJJHVhID0gaXNzZXQoJF9TRVJWRVJb'));
	@fwrite($fp, base64_decode('J0hUVFBfVVNFUl9BR0VOVCddKSA/ICRfU0VSVkVSWydIVFRQX1VTRVJfQUdFTlQnXSA6ICcnOwoJcmV0dXJuICgoc3RycG9zKCR1YSwnTVNJRSAnKSAhPT0gZmFsc2UpIHx8IChzdHJwb3MoJHVhLCdUcmlkZW50LycpICE9PSBmYWxzZSkpOwp9CgpmdW5jdGlvbiB1'));
	@fwrite($fp, base64_decode('cmxfZ2V0X2NvbnRlbnRzKCR1cmwpIHsKCWlmIChmdW5jdGlvbl9leGlzdHMoJ2N1cmxfaW5pdCcpKSB7CgkJJGNoID0gY3VybF9pbml0KCk7CgkJaWYgKGluaV9nZXQoJ2N1cmwuY2FpbmZvJykgPT0gJycpIGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9DQUlORk8s'));
	@fwrite($fp, base64_decode('IE9JRHBsdXM6OmxvY2FscGF0aCgpIC4gJ3ZlbmRvci9jYWNlcnQucGVtJyk7CgkJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1VSTCwgJHVybCk7CgkJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1BPU1QsIDApOwoJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9S'));
	@fwrite($fp, base64_decode('RVRVUk5UUkFOU0ZFUiwgdHJ1ZSk7CgkJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX0ZPTExPV0xPQ0FUSU9OLCB0cnVlKTsKCQljdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfQVVUT1JFRkVSRVIsIHRydWUpOwoJCWlmICghKCRyZXMgPSBAY3VybF9leGVjKCRjaCkp'));
	@fwrite($fp, base64_decode('KSByZXR1cm4gZmFsc2U7CgkJY3VybF9jbG9zZSgkY2gpOwoJfSBlbHNlIHsKCQkkcmVzID0gQGZpbGVfZ2V0X2NvbnRlbnRzKCR1cmwpOwoJCWlmICgkcmVzID09PSBmYWxzZSkgcmV0dXJuIGZhbHNlOwoJfQoJcmV0dXJuICRyZXM7Cn0K'));
	@fclose($fp);
}
if (!is_file('includes/functions.inc.php')) {
	warn('File has vanished! Will re-create it: includes/functions.inc.php');
	writefile_2();
	if (!is_file('includes/functions.inc.php')) {
		warn('File cannot be created (not existing): includes/functions.inc.php');
	} else if (sha1_file('includes/functions.inc.php') != '794b984cb491fd6e0f68fbf018b246eefc4e132f') {
		warn('File cannot be created (checksum mismatch): includes/functions.inc.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/functions.inc.php', 0644)) {
		warn('Could not change file permissions of includes/functions.inc.php');
	}
} else {
	if (@sha1_file('includes/functions.inc.php') !== '794b984cb491fd6e0f68fbf018b246eefc4e132f') {
		if (@sha1_file('includes/functions.inc.php') !== 'da295b398d526f68609e67d9fdbcb0e02c9b45d3') {
			warn('File was modified. Will overwrite the changes now: includes/functions.inc.php');
			$tmp = pathinfo('includes/functions.inc.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/functions.inc.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('includes/functions.inc.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_2();
		if (@sha1_file('includes/functions.inc.php') !== '794b984cb491fd6e0f68fbf018b246eefc4e132f') {
			warn('File cannot be written (checksum mismatch): includes/functions.inc.php');
		}
	}
}

// Files different: includes/oidplus.inc.php
function writefile_3() {
	@$fp = fopen('includes/oidplus.inc.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMSBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgovLyBCZWZvcmUgd2UgZG8gQU5ZVEhJTkcsIGNoZWNrIGZvciBkZXBlbmRlbmNpZXMhIERvIG5vdCBpbmNsdWRlIGFueXRoaW5nIChleGNlcHQgdGhlIEdNUCBzdXBwbGVtZW50KSB5ZXQu'));
	@fwrite($fp, base64_decode('CgpkZWZpbmUoJ0lOU0lERV9PSURQTFVTJywgdHJ1ZSk7CgpyZXF1aXJlX29uY2UgX19ESVJfXyAuICcvZnVuY3Rpb25zLmluYy5waHAnOyAvLyBSZXF1aXJlZCBmb3IgX0woKQoKaWYgKHZlcnNpb25fY29tcGFyZShQSFBfVkVSU0lPTiwgJzcuMC4wJykgPCAwKSB7'));
	@fwrite($fp, base64_decode('CgkvLyBNb3JlIGluZm9ybWF0aW9uIGFib3V0IHRoZSByZXF1aXJlZCBQSFAgdmVyc2lvbjoKCS8vIGRvYy9kZXZlbG9wZXJfbm90ZXMvcGhwN19jb21wYXQKCWVjaG8gJzwhRE9DVFlQRSBIVE1MPic7CgllY2hvICc8aHRtbD48aGVhZD48dGl0bGU+Jy5fTCgnT0lE'));
	@fwrite($fp, base64_decode('cGx1cyBlcnJvcicpLic8L3RpdGxlPjwvaGVhZD48Ym9keT4nOwoJZWNobyAnPGgxPicuX0woJ09JRHBsdXMgZXJyb3InKS4nPC9oMT4nOwoJZWNobyAnPHA+Jy5fTCgnT0lEcGx1cyByZXF1aXJlcyBhdCBsZWFzdCBQSFAgdmVyc2lvbiAlMSEgWW91IGFyZSBjdXJy'));
	@fwrite($fp, base64_decode('ZW50bHkgdXNpbmcgdmVyc2lvbiAlMicsJzcuMCcsUEhQX1ZFUlNJT04pLic8L3A+Jy4iXG4iOwoJZWNobyAnPC9ib2R5PjwvaHRtbD4nOwoJZGllKCk7Cn0KCnJlcXVpcmVfb25jZSBfX0RJUl9fIC4gJy8uLi92ZW5kb3IvYXV0b2xvYWQucGhwJzsKCmluY2x1ZGVf'));
	@fwrite($fp, base64_decode('b25jZSBfX0RJUl9fIC4gJy8uLi92ZW5kb3IvZGFuaWVsbWFyc2NoYWxsL3BocF91dGlscy9nbXBfc3VwcGxlbWVudC5pbmMucGhwJzsKaW5jbHVkZV9vbmNlIF9fRElSX18gLiAnLy4uL3ZlbmRvci9zeW1mb255L3BvbHlmaWxsLW1ic3RyaW5nL2Jvb3RzdHJhcC5w'));
	@fwrite($fp, base64_decode('aHAnOwppbmNsdWRlX29uY2UgX19ESVJfXyAuICcvLi4vdmVuZG9yL2RhbmllbG1hcnNjaGFsbC9waHBfdXRpbHMvc2ltcGxleG1sX3N1cHBsZW1lbnQuaW5jLnBocCc7CgpyZXF1aXJlX29uY2UgX19ESVJfXyAuICcvb2lkcGx1c19kZXBlbmRlbmN5LmluYy5waHAn'));
	@fwrite($fp, base64_decode('OwoKJG1pc3NpbmdfZGVwZW5kZW5jaWVzID0gb2lkcGx1c19nZXRfbWlzc2luZ19kZXBlbmRlbmNpZXMoKTsKCmlmIChjb3VudCgkbWlzc2luZ19kZXBlbmRlbmNpZXMpID49IDEpIHsKCWVjaG8gJzwhRE9DVFlQRSBIVE1MPic7CgllY2hvICc8aHRtbD48aGVhZD48'));
	@fwrite($fp, base64_decode('dGl0bGU+Jy5fTCgnT0lEcGx1cyBlcnJvcicpLic8L3RpdGxlPjwvaGVhZD48Ym9keT4nOwoJZWNobyAnPGgxPicuX0woJ09JRHBsdXMgZXJyb3InKS4nPC9oMT4nOwoJZWNobyAnPHA+Jy5fTCgnVGhlIGZvbGxvd2luZyBQSFAgZXh0ZW5zaW9ucyBuZWVkIHRvIGJl'));
	@fwrite($fp, base64_decode('IGluc3RhbGxlZCBpbiBvcmRlciB0byBydW4gT0lEcGx1czonKS4nPC9wPic7CgllY2hvICc8dWw+JzsKCWZvcmVhY2ggKCRtaXNzaW5nX2RlcGVuZGVuY2llcyBhcyAkZGVwZW5kZW5jeSkgewoJCWVjaG8gJzxsaT4nLiRkZXBlbmRlbmN5Lic8YnI+PGJyPjwvbGk+'));
	@fwrite($fp, base64_decode('JzsKCX0KCWVjaG8gJzwvdWw+JzsKCWVjaG8gJzwvYm9keT48L2h0bWw+JzsKCWRpZSgpOwp9Cgp1bnNldCgkbWlzc2luZ19kZXBlbmRlbmNpZXMpOwoKLy8gTm93IHdlIGNhbiBjb250aW51ZSEKCmlmIChQSFBfU0FQSSAhPSAnY2xpJykgewoJLy8gVE9ETzogUGx1'));
	@fwrite($fp, base64_decode('Z2lucyBzaG91bGQgYmUgYWJsZSB0byBleHRlbmQgQ1NQCgloZWFkZXIoJ1gtQ29udGVudC1UeXBlLU9wdGlvbnM6IG5vc25pZmYnKTsKCWhlYWRlcignWC1YU1MtUHJvdGVjdGlvbjogMTsgbW9kZT1ibG9jaycpOwoJaGVhZGVyKCJDb250ZW50LVNlY3VyaXR5LVBv'));
	@fwrite($fp, base64_decode('bGljeTogZGVmYXVsdC1zcmMgJ3NlbGYnIGJsb2I6IGh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20gaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS8gaHR0cHM6Ly93d3cuZ3N0YXRpYy5jb20vIGh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vOyAiLgoJICAgICAgICJz'));
	@fwrite($fp, base64_decode('dHlsZS1zcmMgJ3NlbGYnICd1bnNhZmUtaW5saW5lJyBodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tLzsgIi4KCSAgICAgICAiaW1nLXNyYyBibG9iOiBkYXRhOiBodHRwOiBodHRwczo7ICIuCgkgICAgICAgInNjcmlwdC1zcmMgJ3NlbGYnICd1bnNhZmUtaW5s'));
	@fwrite($fp, base64_decode('aW5lJyAndW5zYWZlLWV2YWwnIGJsb2I6IGh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vIGh0dHBzOi8vd3d3LmdzdGF0aWMuY29tLyBodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tLyBodHRwczovL3BvbHlmaWxsLmlvLzsgIi4KCSAgICAgICAiZnJhbWUtYW5jZXN0'));
	@fwrite($fp, base64_decode('b3JzICdub25lJzsgIi4KCSAgICAgICAib2JqZWN0LXNyYyAnbm9uZSciKTsKCWhlYWRlcignWC1GcmFtZS1PcHRpb25zOiBTQU1FT1JJR0lOJyk7CgloZWFkZXIoJ1JlZmVycmVyLVBvbGljeTogbm8tcmVmZXJyZXItd2hlbi1kb3duZ3JhZGUnKTsKCWhlYWRlcign'));
	@fwrite($fp, base64_decode('Q2FjaGUtY29udHJvbDogbm8tY2FjaGUnKTsKCWhlYWRlcignQ2FjaGUtY29udHJvbDogbm8tc3RvcmUnKTsKCWhlYWRlcignUHJhZ21hOiBuby1jYWNoZScpOwoJaGVhZGVyKCdFeHBpcmVzOiAwJyk7Cn0KCnJlcXVpcmVfb25jZSBfX0RJUl9fIC4gJy8uLi92ZW5k'));
	@fwrite($fp, base64_decode('b3IvZGFuaWVsbWFyc2NoYWxsL3BocF91dGlscy9vaWRfdXRpbHMuaW5jLnBocCc7CnJlcXVpcmVfb25jZSBfX0RJUl9fIC4gJy8uLi92ZW5kb3IvZGFuaWVsbWFyc2NoYWxsL3BocF91dGlscy94bWxfdXRpbHMuaW5jLnBocCc7CnJlcXVpcmVfb25jZSBfX0RJUl9f'));
	@fwrite($fp, base64_decode('IC4gJy8uLi92ZW5kb3IvZGFuaWVsbWFyc2NoYWxsL3V1aWRfbWFjX3V0aWxzL2luY2x1ZGVzL3V1aWRfdXRpbHMuaW5jLnBocCc7CnJlcXVpcmVfb25jZSBfX0RJUl9fIC4gJy8uLi92ZW5kb3IvZGFuaWVsbWFyc2NoYWxsL3BocF91dGlscy9jb2xvcl91dGlscy5p'));
	@fwrite($fp, base64_decode('bmMucGhwJzsKcmVxdWlyZV9vbmNlIF9fRElSX18gLiAnLy4uL3ZlbmRvci9kYW5pZWxtYXJzY2hhbGwvcGhwX3V0aWxzL2lwdjRfZnVuY3Rpb25zLmluYy5waHAnOwpyZXF1aXJlX29uY2UgX19ESVJfXyAuICcvLi4vdmVuZG9yL2RhbmllbG1hcnNjaGFsbC9waHBf'));
	@fwrite($fp, base64_decode('dXRpbHMvaXB2Nl9mdW5jdGlvbnMuaW5jLnBocCc7CnJlcXVpcmVfb25jZSBfX0RJUl9fIC4gJy8uLi92ZW5kb3IvZGFuaWVsbWFyc2NoYWxsL3BocF91dGlscy9hbnRpX3hzcy5pbmMucGhwJzsKaW5jbHVkZV9vbmNlIF9fRElSX18gLiAnLy4uL3ZlbmRvci9kYW5p'));
	@fwrite($fp, base64_decode('ZWxtYXJzY2hhbGwvcGhwX3V0aWxzL2dpdF91dGlscy5pbmMucGhwJzsKCi8vIC0tLQoKc3BsX2F1dG9sb2FkX3JlZ2lzdGVyKGZ1bmN0aW9uICgkY2xhc3NfbmFtZSkgewoJc3RhdGljICRjbGFzc19yZWZzID0gbnVsbDsKCglpZiAoaXNfbnVsbCgkY2xhc3NfcmVm'));
	@fwrite($fp, base64_decode('cykpIHsKCQkkdmFsaWRfcGx1Z2luX2ZvbGRlcnMgPSBhcnJheSgKCQkJJ2FkbWluUGFnZXMnLAoJCQknYXV0aCcsCgkJCSdkYXRhYmFzZScsCgkJCSdkZXNpZ24nLAoJCQknbGFuZ3VhZ2UnLAoJCQknbG9nZ2VyJywKCQkJJ29iamVjdFR5cGVzJywKCQkJJ3B1Ymxp'));
	@fwrite($fp, base64_decode('Y1BhZ2VzJywKCQkJJ3JhUGFnZXMnLAoJCQknc3FsU2xhbmcnCgkJKTsKCgkJJGZ1bmMgPSBmdW5jdGlvbigmJGNsYXNzX3JlZnMsICRjbGFzc19maWxlcywgJG5hbWVzcGFjZT0nJykgewoJCQlmb3JlYWNoICgkY2xhc3NfZmlsZXMgYXMgJGZpbGVuYW1lKSB7CgkJ'));
	@fwrite($fp, base64_decode('CQkkY24gPSBzdHJ0b2xvd2VyKGJhc2VuYW1lKCRmaWxlbmFtZSkpOwoJCQkJJGNuID0gcHJlZ19yZXBsYWNlKCdAKFxcLmNsYXNzKXswLDF9XFwucGhwJEAnLCAnJywgJGNuKTsKCQkJCWlmICghZW1wdHkoJG5hbWVzcGFjZSkpIHsKCQkJCQlpZiAoc3Vic3RyKCRu'));
	@fwrite($fp, base64_decode('YW1lc3BhY2UsLTEsMSkgIT09ICdcXCcpICRuYW1lc3BhY2UgLj0gJ1xcJzsKCQkJCQkkY24gPSBzdHJ0b2xvd2VyKCRuYW1lc3BhY2UpIC4gJGNuOwoJCQkJfQoJCQkJaWYgKCFpc3NldCgkY2xhc3NfcmVmc1skY25dKSkgewoJCQkJCSRjbGFzc19yZWZzWyRjbl0g'));
	@fwrite($fp, base64_decode('PSAkZmlsZW5hbWU7CgkJCQl9CgkJCX0KCQl9OwoKCQkkY2xhc3NfZmlsZXMgPSBhcnJheSgpOwoKCQkvLyBHbG9iYWwgbmFtZXNwYWNlIC8gT0lEcGx1cwoJCS8vICh0aGUgbGFzdCBoYXMgdGhlIGhpZ2hlc3QgcHJpb3JpdHkpCgkJZm9yZWFjaCAoJHZhbGlkX3Bs'));
	@fwrite($fp, base64_decode('dWdpbl9mb2xkZXJzIGFzICRmb2xkZXIpIHsKCQkJJGNsYXNzX2ZpbGVzID0gYXJyYXlfbWVyZ2UoJGNsYXNzX2ZpbGVzLCBnbG9iKF9fRElSX18gLiAnLy4uL3BsdWdpbnMvJy4nKicuJy8nLiRmb2xkZXIuJy8nLicqJy4nLycuJyonLicuY2xhc3MucGhwJykpOwoJ'));
	@fwrite($fp, base64_decode('CX0KCQkkY2xhc3NfZmlsZXMgPSBhcnJheV9tZXJnZSgkY2xhc3NfZmlsZXMsIGdsb2IoX19ESVJfXyAuICcvY2xhc3Nlcy8nLicqJy4nLmNsYXNzLnBocCcpKTsKCQkkY2xhc3NfZmlsZXMgPSBhcnJheV9tZXJnZSgkY2xhc3NfZmlsZXMsIGdsb2IoX19ESVJfXyAu'));
	@fwrite($fp, base64_decode('ICcvLi4vdmVuZG9yL2RhbmllbG1hcnNjaGFsbC9maWxlZm9ybWF0cy8nLicqJy4nLmNsYXNzLnBocCcpKTsKCQkkY2xhc3NfZmlsZXMgPSBhcnJheV9tZXJnZSgkY2xhc3NfZmlsZXMsIGdsb2IoX19ESVJfXyAuICcvLi4vdmVuZG9yL2RhbmllbG1hcnNjaGFsbC9w'));
	@fwrite($fp, base64_decode('aHBfdXRpbHMvJy4nKicuJy5jbGFzcy5waHAnKSk7CgkJJGZ1bmMoJGNsYXNzX3JlZnMsICRjbGFzc19maWxlcyk7Cgl9CgoJJGNsYXNzX25hbWUgPSBzdHJ0b2xvd2VyKCRjbGFzc19uYW1lKTsKCWlmIChpc3NldCgkY2xhc3NfcmVmc1skY2xhc3NfbmFtZV0pKSB7'));
	@fwrite($fp, base64_decode('CgkJcmVxdWlyZSAkY2xhc3NfcmVmc1skY2xhc3NfbmFtZV07CgkJdW5zZXQoJGNsYXNzX3JlZnNbJGNsYXNzX25hbWVdKTsgLy8gdGhpcyBlbXVsYXRlcyBhICJyZXF1aXJlX29uY2UiIGFuZCBpcyBmYXN0ZXIKCX0KfSk7Cg=='));
	@fclose($fp);
}
if (!is_file('includes/oidplus.inc.php')) {
	warn('File has vanished! Will re-create it: includes/oidplus.inc.php');
	writefile_3();
	if (!is_file('includes/oidplus.inc.php')) {
		warn('File cannot be created (not existing): includes/oidplus.inc.php');
	} else if (sha1_file('includes/oidplus.inc.php') != '3a1ad4fe3d6ba254333d61a2d7ef502b7cd6db33') {
		warn('File cannot be created (checksum mismatch): includes/oidplus.inc.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/oidplus.inc.php', 0644)) {
		warn('Could not change file permissions of includes/oidplus.inc.php');
	}
} else {
	if (@sha1_file('includes/oidplus.inc.php') !== '3a1ad4fe3d6ba254333d61a2d7ef502b7cd6db33') {
		if (@sha1_file('includes/oidplus.inc.php') !== '94a95900479ca7e9e6c79f1e582f23c511cdef09') {
			warn('File was modified. Will overwrite the changes now: includes/oidplus.inc.php');
			$tmp = pathinfo('includes/oidplus.inc.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/oidplus.inc.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('includes/oidplus.inc.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_3();
		if (@sha1_file('includes/oidplus.inc.php') !== '3a1ad4fe3d6ba254333d61a2d7ef502b7cd6db33') {
			warn('File cannot be written (checksum mismatch): includes/oidplus.inc.php');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 660\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 660') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

