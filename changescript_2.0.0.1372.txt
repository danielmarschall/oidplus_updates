<?php /* <ViaThinkSoftSignature>
N1G5XUu1cFPZFW9SS0Y6t6RRo+3Z6jSfGR9ggvDJ/VyG6ssUv4KLcYSM8hD6Fchy5
uEGex0k6gPSaOw7go+VZQpLqYAFg654RY8VUOXBkIDQgeCOOAx0YEbosTZfKlDnCl
2P5wwGP8s5FWrRewLbadsXRSZB7R1BXPknNnAMjasfcB9KgRLkiEiD5CqvqDcyc4V
qXKCfGVX7ACzRDVTf/MRHqDaOY2E739xa82OmBKg+paDAzXgrrgrxfwKsiLQ1Ekqd
O3yBUe0W09UD0um1ld8TGq6IvmhNxWVLIZQ5WLsWsz8MCQOeFhcZ1EIPxxSL7l/Ha
+gTEl3+sm3Gl8mqVuU887iWLzw0DAZdXO9BatGfJp7BPjfye0Y86g81uyrbP8jB3s
PL3S3tWq11Keb25qAqt3PqmUtdnJOqGOsRvOPyl9beZdntDaeSjQawsxkl2nsbCFy
zNiPjMjBvyKzho2CDzouZnfsceQ8vkMcyawUTpIzfzD+f2CaDwSS9FwbLOhyESORd
QcLWiTBFKyb/Ax0P4lVVsrcZSn0+hndoaOoqVK9Pi75nipv6VyjNihkb67RqDk+Bi
fLF2qW+/bawjmi0wiyveU9CIjpd9N/vJE6ifUh6EpFAG161WgO3YljutwYuSIhB2G
oaeaS+387roa5ZGjOofgasKu+8AdR1yYytyrkELuS2y63TFzYnOPBmo118xjFGn0y
LaUAK2vU5/q0RGM6OkgJZyDO3voUDfoZTLv08AntPftB6e1kU7x9MAjIRJYi9fyf9
cr3c2KRp4h0LG5a1XKMXxgqvJlD+H8G7m9dgtiraWQH/XY3wuGx5JXCHo8zvuF3u9
K1VgjhC6WxIz68axM3JQ5KtUYGzv27CqunOd+mhH5xsWc2k4wfdWOhp76/1rGrP6z
q/mgRd9tj9A0wJPOnrf35h2yZLoeLv5Sy+B7u6qZ32tG7AH+xan/KaPEPGvsgtUT1
z97vKKLQOISONPaGQb56Vdo0OgvkNAGBxM/K/vby58yPrXVAq6ouOTyp16wL4XxOi
R2KHQ1gFnQOnOT8/yU5aqjfu2XiYpexk7FRa1RqN6VDJdbWiCFNg2p1PFUxxFrDga
tMSbW0v6tHOVsrd2xkjtQHltRznrMzxyRnpnnrX5VHUNl9nQVnw8bvC0H+RbKe6wL
jscT4cAQqP2KJtPod93lR2nVAhGCf2tybtj6Qmc4PngpN7yln30QvTbf1bQQhkAlI
5/jYoQZHB7LAxafQfgNAze55Z5wH8qpsKfHM1TFRG2Ro4tN/6K0TgyzGxkgpsyO1W
S670+xA9g2CsTx6oiHpwZOq4lLmxAhTtvKHDxsCTseQFYQ0vG+65s07yy4aIZi+uq
A==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('.version.php')) !== '<?php // Revision 1371') {
	err('This update can only be applied to OIDplus version 2.0.0.1371!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: plugins/viathinksoft/publicPages/810_login_google/OIDplusPagePublicLoginGoogle.class.php
function writefile_1() {
	@$fp = fopen('plugins/viathinksoft/publicPages/810_login_google/OIDplusPagePublicLoginGoogle.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMyBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgpuYW1lc3BhY2UgVmlhVGhpbmtTb2Z0XE9JRHBsdXM7CgovLyBwaHBjczpkaXNhYmxlIFBTUjEuRmlsZXMuU2lkZUVmZmVjdHMKXGRlZmluZWQoJ0lOU0lERV9PSURQTFVTJykgb3IgZGll'));
	@fwrite($fp, base64_decode('OwovLyBwaHBjczplbmFibGUgUFNSMS5GaWxlcy5TaWRlRWZmZWN0cwoKY2xhc3MgT0lEcGx1c1BhZ2VQdWJsaWNMb2dpbkdvb2dsZSBleHRlbmRzIE9JRHBsdXNQYWdlUGx1Z2luUHVibGljCglpbXBsZW1lbnRzIElOVEZfT0lEXzFfM182XzFfNF8xXzM3NDc2XzJf'));
	@fwrite($fp, base64_decode('NV8yXzNfNSwgLyogYWx0ZXJuYXRpdmVMb2dpbk1ldGhvZHMgKi8KCSAgICAgICAgICAgSU5URl9PSURfMV8zXzZfMV80XzFfMzc0NzZfMl81XzJfM184ICAvKiBnZXROb3RpZmljYXRpb25zICovCnsKCgkvKioKCSAqIEBwYXJhbSBzdHJpbmcgJGFjdGlvbklECgkg'));
	@fwrite($fp, base64_decode('KiBAcGFyYW0gYXJyYXkgJHBhcmFtcwoJICogQHJldHVybiBhcnJheQoJICogQHRocm93cyBPSURwbHVzRXhjZXB0aW9uCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBhY3Rpb24oc3RyaW5nICRhY3Rpb25JRCwgYXJyYXkgJHBhcmFtcyk6IGFycmF5IHsKCQlyZXR1cm4g'));
	@fwrite($fp, base64_decode('cGFyZW50OjphY3Rpb24oJGFjdGlvbklELCAkcGFyYW1zKTsKCX0KCgkvKioKCSAqIEBwYXJhbSBib29sICRodG1sCgkgKiBAcmV0dXJuIHZvaWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGluaXQoYm9vbCAkaHRtbD10cnVlKSB7CgkJLy8gTm90aGluZwoJfQoKCS8q'));
	@fwrite($fp, base64_decode('KgoJICogQHBhcmFtIHN0cmluZyAkaWQKCSAqIEBwYXJhbSBhcnJheSAkb3V0CgkgKiBAcGFyYW0gYm9vbCAkaGFuZGxlZAoJICogQHJldHVybiB2b2lkCgkgKiBAdGhyb3dzIE9JRHBsdXNFeGNlcHRpb24KCSAqLwoJcHVibGljIGZ1bmN0aW9uIGd1aShzdHJpbmcg'));
	@fwrite($fp, base64_decode('JGlkLCBhcnJheSAmJG91dCwgYm9vbCAmJGhhbmRsZWQpIHsKCQlpZiAoJGlkID09PSAnb2lkcGx1czpsb2dpbl9nb29nbGUnKSB7CgkJCSRoYW5kbGVkID0gdHJ1ZTsKCQkJJG91dFsndGl0bGUnXSA9IF9MKCdMb2dpbiB1c2luZyBHb29nbGUnKTsKCQkJJG91dFsn'));
	@fwrite($fp, base64_decode('aWNvbiddICA9IE9JRHBsdXM6OndlYnBhdGgoX19ESVJfXyxPSURwbHVzOjpQQVRIX1JFTEFUSVZFKS4naW1nL21haW5faWNvbi5wbmcnOwoKCQkJaWYgKCFPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdHT09HTEVfT0FVVEgyX0VOQUJMRUQnLCBmYWxz'));
	@fwrite($fp, base64_decode('ZSkpIHsKCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdHb29nbGUgT0F1dGggYXV0aGVudGljYXRpb24gaXMgZGlzYWJsZWQgb24gdGhpcyBzeXN0ZW0uJyksICRvdXRbJ3RpdGxlJ10pOwoJCQl9CgoJCQkkb3V0Wyd0ZXh0J10gID0gJzxwPicuX0wo'));
	@fwrite($fp, base64_decode('J1BsZWFzZSB3YWl0Li4uJykuJzwvcD4nOwoJCQkkb3V0Wyd0ZXh0J10gLj0gJzxmb3JtIGFjdGlvbj0iaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL3YyL2F1dGgiIG1ldGhvZD0iR0VUIj4nOwoJCQkkb3V0Wyd0ZXh0J10gLj0gJzxpbnB1dCB0'));
	@fwrite($fp, base64_decode('eXBlPSJoaWRkZW4iIG5hbWU9InJlc3BvbnNlX3R5cGUiIHZhbHVlPSInLmh0bWxlbnRpdGllcygnY29kZScpLiciPicuIlxuIjsKCQkJJG91dFsndGV4dCddIC49ICc8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJjbGllbnRfaWQiIHZhbHVlPSInLmh0bWxlbnRp'));
	@fwrite($fp, base64_decode('dGllcyhPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdHT09HTEVfT0FVVEgyX0NMSUVOVF9JRCcpKS4nIj4nLiJcbiI7CgkJCSRvdXRbJ3RleHQnXSAuPSAnPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0ic2NvcGUiIHZhbHVlPSInLmh0bWxlbnRpdGll'));
	@fwrite($fp, base64_decode('cyhpbXBsb2RlKCcgJywgYXJyYXkoLyonb3BlbmlkJywqLyAnZW1haWwnLCAncHJvZmlsZScpKSkuJyI+Jy4iXG4iOwoJCQkkb3V0Wyd0ZXh0J10gLj0gJzxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9InJlZGlyZWN0X3VyaSIgdmFsdWU9IicuaHRtbGVudGl0aWVz'));
	@fwrite($fp, base64_decode('KCcnKS4nIj4nLiJcbiI7IC8vIFVSTCB3aWxsIGJlIGZpbGxlZCBieSBKYXZhU2NyaXB0CgkJCSRvdXRbJ3RleHQnXSAuPSAnPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0ic3RhdGUiIHZhbHVlPSInLmh0bWxlbnRpdGllcygkX0NPT0tJRVsnY3NyZl90b2tlbl93'));
	@fwrite($fp, base64_decode('ZWFrJ10pLiciPicuIlxuIjsgLy8gVVJMIHdpbGwgYmUgYWRkZWQgYnkgSmF2YVNjcmlwdAoJCQkkb3V0Wyd0ZXh0J10gLj0gJzwvZm9ybT4nOwoJCQkkb3V0Wyd0ZXh0J10gLj0gJzxzY3JpcHQ+JzsKCQkJJG91dFsndGV4dCddIC49ICdyZWRpcl91cmwgPSBnZXRT'));
	@fwrite($fp, base64_decode('eXN0ZW1VcmwoKSArICJwbHVnaW5zL3ZpYXRoaW5rc29mdC9wdWJsaWNQYWdlcy84MTBfbG9naW5fZ29vZ2xlL29hdXRoLnBocCI7JzsKCQkJJG91dFsndGV4dCddIC49ICdkb2N1bWVudC5mb3Jtc1swXS5lbGVtZW50cy5yZWRpcmVjdF91cmkudmFsdWUgPSByZWRp'));
	@fwrite($fp, base64_decode('cl91cmw7JzsKCQkJJG91dFsndGV4dCddIC49ICdkb2N1bWVudC5mb3Jtc1swXS5lbGVtZW50cy5zdGF0ZS52YWx1ZSA9IHJlZGlyX3VybCArICJ8IiArIGRvY3VtZW50LmZvcm1zWzBdLmVsZW1lbnRzLnN0YXRlLnZhbHVlOyc7CgkJCSRvdXRbJ3RleHQnXSAuPSAn'));
	@fwrite($fp, base64_decode('ZG9jdW1lbnQuZm9ybXNbMF0uc3VibWl0KCk7JzsKCQkJJG91dFsndGV4dCddIC49ICc8L3NjcmlwdD4nOwoJCX0KCX0KCgkvKioKCSAqIEBwYXJhbSBhcnJheSAkb3V0CgkgKiBAcmV0dXJuIHZvaWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHB1YmxpY1NpdGVtYXAo'));
	@fwrite($fp, base64_decode('YXJyYXkgJiRvdXQpIHsKCQkkb3V0W10gPSAnb2lkcGx1czpsb2dpbl9nb29nbGUnOwoJfQoKCS8qKgoJICogQHBhcmFtIGFycmF5ICRqc29uCgkgKiBAcGFyYW0gc3RyaW5nfG51bGwgJHJhX2VtYWlsCgkgKiBAcGFyYW0gYm9vbCAkbm9uanMKCSAqIEBwYXJhbSBz'));
	@fwrite($fp, base64_decode('dHJpbmcgJHJlcV9nb3RvCgkgKiBAcmV0dXJuIGJvb2wKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHRyZWUoYXJyYXkgJiRqc29uLCBzdHJpbmcgJHJhX2VtYWlsPW51bGwsIGJvb2wgJG5vbmpzPWZhbHNlLCBzdHJpbmcgJHJlcV9nb3RvPScnKTogYm9vbCB7CgkJcmV0'));
	@fwrite($fp, base64_decode('dXJuIHRydWU7Cgl9CgoJLyoqCgkgKiBAcGFyYW0gc3RyaW5nICRyZXF1ZXN0CgkgKiBAcmV0dXJuIGFycmF5fGZhbHNlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiB0cmVlX3NlYXJjaChzdHJpbmcgJHJlcXVlc3QpIHsKCQlyZXR1cm4gZmFsc2U7Cgl9CgoJLyoqCgkg'));
	@fwrite($fp, base64_decode('KiBJbXBsZW1lbnRzIGludGVyZmFjZSBJTlRGX09JRF8xXzNfNl8xXzRfMV8zNzQ3Nl8yXzVfMl8zXzUKCSAqIEByZXR1cm4gYXJyYXkKCSAqIEB0aHJvd3MgT0lEcGx1c0V4Y2VwdGlvbgoJICovCglwdWJsaWMgZnVuY3Rpb24gYWx0ZXJuYXRpdmVMb2dpbk1ldGhv'));
	@fwrite($fp, base64_decode('ZHMoKTogYXJyYXkgewoJCSRsb2dpbnMgPSBhcnJheSgpOwoJCWlmIChPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdHT09HTEVfT0FVVEgyX0VOQUJMRUQnLCBmYWxzZSkpIHsKCQkJJGxvZ2luc1tdID0gYXJyYXkoCgkJCQknb2lkcGx1czpsb2dpbl9n'));
	@fwrite($fp, base64_decode('b29nbGUnLAoJCQkJX0woJ0xvZ2luIHVzaW5nIEdvb2dsZScpLAoJCQkJT0lEcGx1czo6d2VicGF0aChfX0RJUl9fLE9JRHBsdXM6OlBBVEhfUkVMQVRJVkUpLidpbWcvbWFpbl9pY29uMTYucG5nJwoJCQkpOwoJCX0KCQlyZXR1cm4gJGxvZ2luczsKCX0KCgkvKioK'));
	@fwrite($fp, base64_decode('CSAqIEltcGxlbWVudHMgaW50ZXJmYWNlIElOVEZfT0lEXzFfM182XzFfNF8xXzM3NDc2XzJfNV8yXzNfOAoJICogQHBhcmFtIHN0cmluZ3xudWxsICR1c2VyCgkgKiBAcmV0dXJuIGFycmF5CgkgKiBAdGhyb3dzIE9JRHBsdXNFeGNlcHRpb24KCSAqLwoJcHVibGlj'));
	@fwrite($fp, base64_decode('IGZ1bmN0aW9uIGdldE5vdGlmaWNhdGlvbnMoc3RyaW5nICR1c2VyPW51bGwpOiBhcnJheSB7CgkJJG5vdGlmaWNhdGlvbnMgPSBhcnJheSgpOwoJCWlmICgoISR1c2VyIHx8ICgkdXNlciA9PSAnYWRtaW4nKSkgJiYgT0lEcGx1czo6YXV0aFV0aWxzKCktPmlzQWRt'));
	@fwrite($fp, base64_decode('aW5Mb2dnZWRJbigpKSB7CgkJCWlmIChPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdHT09HTEVfT0FVVEgyX0VOQUJMRUQnLCBmYWxzZSkpIHsKCQkJCWlmICghdXJsX3Bvc3RfY29udGVudHNfYXZhaWxhYmxlKHRydWUsICRyZWFzb24pKSB7CgkJCQkJ'));
	@fwrite($fp, base64_decode('JHRpdGxlID0gX0woJ0dvb2dsZSBPQXV0aCBMb2dpbicpOwoJCQkJCSRub3RpZmljYXRpb25zW10gPSBuZXcgT0lEcGx1c05vdGlmaWNhdGlvbignRVJSJywgX0woJ09JRHBsdXMgcGx1Z2luICIlMSIgaXMgZW5hYmxlZCwgYnV0IE9JRHBsdXMgY2Fubm90IGNvbm5l'));
	@fwrite($fp, base64_decode('Y3QgdG8gdGhlIEludGVybmV0LicsIGh0bWxlbnRpdGllcygkdGl0bGUpKS4nICcuJHJlYXNvbik7CgkJCQl9CgkJCX0KCQl9CgkJcmV0dXJuICRub3RpZmljYXRpb25zOwoJfQoKfQo='));
	@fclose($fp);
}
if (!is_file('plugins/viathinksoft/publicPages/810_login_google/OIDplusPagePublicLoginGoogle.class.php')) {
	warn('File has vanished! Will re-create it: plugins/viathinksoft/publicPages/810_login_google/OIDplusPagePublicLoginGoogle.class.php');
	writefile_1();
	if (!is_file('plugins/viathinksoft/publicPages/810_login_google/OIDplusPagePublicLoginGoogle.class.php')) {
		warn('File cannot be created (not existing): plugins/viathinksoft/publicPages/810_login_google/OIDplusPagePublicLoginGoogle.class.php');
	} else if (sha1_file('plugins/viathinksoft/publicPages/810_login_google/OIDplusPagePublicLoginGoogle.class.php') != 'f111cdce62d47faeb1b370314ee6e0c9ec0b2c7d') {
		warn('File cannot be created (checksum mismatch): plugins/viathinksoft/publicPages/810_login_google/OIDplusPagePublicLoginGoogle.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/viathinksoft/publicPages/810_login_google/OIDplusPagePublicLoginGoogle.class.php', 0644)) {
		warn('Could not change file permissions of plugins/viathinksoft/publicPages/810_login_google/OIDplusPagePublicLoginGoogle.class.php');
	}
} else {
	if (@sha1_file('plugins/viathinksoft/publicPages/810_login_google/OIDplusPagePublicLoginGoogle.class.php') !== 'f111cdce62d47faeb1b370314ee6e0c9ec0b2c7d') {
		if (@sha1_file('plugins/viathinksoft/publicPages/810_login_google/OIDplusPagePublicLoginGoogle.class.php') !== '03d30402ae8756a06f2836125f71e16f5a2b8078') {
			warn('File was modified. Will overwrite the changes now: plugins/viathinksoft/publicPages/810_login_google/OIDplusPagePublicLoginGoogle.class.php');
			$tmp = pathinfo('plugins/viathinksoft/publicPages/810_login_google/OIDplusPagePublicLoginGoogle.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/viathinksoft/publicPages/810_login_google/OIDplusPagePublicLoginGoogle.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/viathinksoft/publicPages/810_login_google/OIDplusPagePublicLoginGoogle.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('plugins/viathinksoft/publicPages/810_login_google/OIDplusPagePublicLoginGoogle.class.php') !== 'f111cdce62d47faeb1b370314ee6e0c9ec0b2c7d') {
			warn('File cannot be written (checksum mismatch): plugins/viathinksoft/publicPages/810_login_google/OIDplusPagePublicLoginGoogle.class.php');
		}
	}
}

// Files different: plugins/viathinksoft/publicPages/810_login_google/oauth.php
function writefile_2() {
	@$fp = fopen('plugins/viathinksoft/publicPages/810_login_google/oauth.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMSBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgp1c2UgVmlhVGhpbmtTb2Z0XE9JRHBsdXNcT0lEcGx1czsKdXNlIFZpYVRoaW5rU29mdFxPSURwbHVzXE9JRHBsdXNHdWk7CnVzZSBWaWFUaGlua1NvZnRcT0lEcGx1c1xPSURwbHVzRXhj'));
	@fwrite($fp, base64_decode('ZXB0aW9uOwp1c2UgVmlhVGhpbmtTb2Z0XE9JRHBsdXNcT0lEcGx1c1JBOwoKIyBNb3JlIGluZm9ybWF0aW9uIGFib3V0IHRoZSBPQXV0aDIgaW1wbGVtZW50YXRpb246CiMgLSBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9pZGVudGl0eS9wcm90b2NvbHMv'));
	@fwrite($fp, base64_decode('b2F1dGgyL29wZW5pZC1jb25uZWN0CgpyZXF1aXJlX29uY2UgX19ESVJfXyAuICcvLi4vLi4vLi4vLi4vaW5jbHVkZXMvb2lkcGx1cy5pbmMucGhwJzsKCnNldF9leGNlcHRpb25faGFuZGxlcihhcnJheShPSURwbHVzR3VpOjpjbGFzcywgJ2h0bWxfZXhjZXB0aW9u'));
	@fwrite($fp, base64_decode('X2hhbmRsZXInKSk7CgpPSURwbHVzOjppbml0KHRydWUpOwoKaWYgKE9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ0RJU0FCTEVfUExVR0lOX1ZpYVRoaW5rU29mdFxPSURwbHVzXE9JRHBsdXNQYWdlUHVibGljTG9naW5Hb29nbGUnLCBmYWxzZSkpIHsK'));
	@fwrite($fp, base64_decode('CXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdUaGlzIHBsdWdpbiB3YXMgZGlzYWJsZWQgYnkgdGhlIHN5c3RlbSBhZG1pbmlzdHJhdG9yIScpKTsKfQoKaWYgKCFPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdHT09HTEVfT0FVVEgyX0VOQUJM'));
	@fwrite($fp, base64_decode('RUQnLCBmYWxzZSkpIHsKCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdHb29nbGUgT0F1dGggYXV0aGVudGljYXRpb24gaXMgZGlzYWJsZWQgb24gdGhpcyBzeXN0ZW0uJykpOwp9CgpfQ2hlY2tQYXJhbUV4aXN0cygkX0dFVCwgJ2NvZGUnKTsKX0NoZWNr'));
	@fwrite($fp, base64_decode('UGFyYW1FeGlzdHMoJF9HRVQsICdzdGF0ZScpOwpfQ2hlY2tQYXJhbUV4aXN0cygkX0NPT0tJRSwgJ2NzcmZfdG9rZW5fd2VhaycpOwoKJGFyeSA9IGV4cGxvZGUoJ3wnLCAkX0dFVFsnc3RhdGUnXSwgMik7CmlmIChjb3VudCgkYXJ5KSAhPT0gMikgewoJZGllKF9M'));
	@fwrite($fp, base64_decode('KCdJbnZhbGlkIFN0YXRlJykpOwp9CiRyZWRpcmVjdF91cmkgPSAkYXJ5WzBdOyAvLyBBdHRlbnRpb246IENvbWVzIGZyb20gdGhlIGNsaWVudC4gVGhlIE9BdXRoMiBzZXJ2ZXIgTVVTVCB2ZXJpZnkgaXQhIChHb29nbGUgYW5kIEZhY2Vib29rIGRvZXMgdGhpcykK'));
	@fwrite($fp, base64_decode('JGNoZWNrX2NzcmYgPSAkYXJ5WzFdOwoKaWYgKCRjaGVja19jc3JmICE9ICRfQ09PS0lFWydjc3JmX3Rva2VuX3dlYWsnXSkgewoJZGllKF9MKCdNaXNzaW5nIG9yIHdyb25nIENTUkYgVG9rZW4nKSk7Cn0KCiRjb250ID0gdXJsX3Bvc3RfY29udGVudHMoCgkiaHR0'));
	@fwrite($fp, base64_decode('cHM6Ly9vYXV0aDIuZ29vZ2xlYXBpcy5jb20vdG9rZW4iLAoJYXJyYXkoCgkJImdyYW50X3R5cGUiICAgID0+ICJhdXRob3JpemF0aW9uX2NvZGUiLAoJCSJjb2RlIiAgICAgICAgICA9PiAkX0dFVFsnY29kZSddLAoJCSJyZWRpcmVjdF91cmkiICA9PiAkcmVkaXJl'));
	@fwrite($fp, base64_decode('Y3RfdXJpLAoJCSJjbGllbnRfaWQiICAgICA9PiBPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdHT09HTEVfT0FVVEgyX0NMSUVOVF9JRCcpLAoJCSJjbGllbnRfc2VjcmV0IiA9PiBPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdHT09HTEVf'));
	@fwrite($fp, base64_decode('T0FVVEgyX0NMSUVOVF9TRUNSRVQnKQoJKQopOwoKaWYgKCRjb250ID09PSBmYWxzZSkgewoJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0NvbW11bmljYXRpb24gd2l0aCAlMSBzZXJ2ZXIgZmFpbGVkJywgJ0dvb2dsZScpKTsKfQoKLy8gR2V0IElEIHRv'));
	@fwrite($fp, base64_decode('a2VuIGFuZCBBY2Nlc3MgdG9rZW4KJGRhdGEgPSBqc29uX2RlY29kZSgkY29udCx0cnVlKTsKaWYgKGlzc2V0KCRkYXRhWydlcnJvciddKSkgewoJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0Vycm9yIHJlY2VpdmluZyB0aGUgYXV0aGVudGljYXRpb24g'));
	@fwrite($fp, base64_decode('dG9rZW4gZnJvbSAlMTogJTInLCdHb29nbGUnLCRkYXRhWydlcnJvciddLicgJy4kZGF0YVsnZXJyb3JfZGVzY3JpcHRpb24nXSkpOwp9CiRpZF90b2tlbiA9ICRkYXRhWydpZF90b2tlbiddOwokYWNjZXNzX3Rva2VuID0gJGRhdGFbJ2FjY2Vzc190b2tlbiddOwoK'));
	@fwrite($fp, base64_decode('dHJ5IHsKCgkvLyBEZWNvZGUgSldUICJpZF90b2tlbiIKCS8vIHNlZSBodHRwczovL21lZGl1bS5jb20vQGRhcnV0ay91bmRlcnN0YW5kaW5nLWlkLXRva2VuLTVmODNmNTBmYTAyZQoJLy8gTm90ZTogV2UgZG8gbm90IG5lZWQgdG8gdmVyaWZ5IHRoZSBzaWduYXR1'));
	@fwrite($fp, base64_decode('cmUgYmVjYXVzZSB0aGUgdG9rZW4gY29tZXMgZGlyZWN0bHkgZnJvbSBHb29nbGUsCgkvLyAgICAgICBidXQgd2UgZG8gaXQgYW55d2F5LiBKdXN0IHRvIGJlIHN1cmUhCgkkY2VydHMgPSB1cmxfZ2V0X2NvbnRlbnRzKCdodHRwczovL3d3dy5nb29nbGVhcGlzLmNv'));
	@fwrite($fp, base64_decode('bS9vYXV0aDIvdjEvY2VydHMnKTsKCWlmICgkY2VydHMgPT09IGZhbHNlKSB7CgkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0NvbW11bmljYXRpb24gd2l0aCAlMSBzZXJ2ZXIgZmFpbGVkJywgJ0dvb2dsZScpKTsKCX0KCSR2ZXJpZmljYXRpb25fY2Vy'));
	@fwrite($fp, base64_decode('dHMgPSBqc29uX2RlY29kZSgkY2VydHMsIHRydWUpOwoJXEZpcmViYXNlXEpXVFxKV1Q6OiRsZWV3YXkgPSA2MDsgLy8gbGVld2F5IGluIHNlY29uZHMKCSRkYXRhID0gKGFycmF5KSBcRmlyZWJhc2VcSldUXEpXVDo6ZGVjb2RlKCRpZF90b2tlbiwgJHZlcmlmaWNh'));
	@fwrite($fp, base64_decode('dGlvbl9jZXJ0cywgYXJyYXkoJ0VTMjU2JywgJ0VTMzg0JywgJ1JTMjU2JywgJ1JTMzg0JywgJ1JTNTEyJykpOwoJaWYgKCFpc3NldCgkZGF0YVsnaXNzJ10pIHx8ICgkZGF0YVsnaXNzJ10gIT09ICdodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20nKSkgewoJCXRo'));
	@fwrite($fp, base64_decode('cm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdKV1QgdG9rZW4gY291bGQgbm90IGJlIGRlY29kZWQnKSk7Cgl9CgoJLy8gQ2hlY2sgaWYgdGhlIGVtYWlsIHdhcyB2ZXJpZmllZAoJJGVtYWlsID0gJGRhdGFbJ2VtYWlsJ107CglpZiAoJGRhdGFbJ2VtYWlsX3Zl'));
	@fwrite($fp, base64_decode('cmlmaWVkJ10gIT0gJ3RydWUnKSB7CgkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ1RoZSBlbWFpbCBhZGRyZXNzICUxIHdhcyBub3QgdmVyaWZpZWQuIFBsZWFzZSB2ZXJpZnkgaXQgZmlyc3QhJywkZW1haWwpKTsKCX0KCgkvLyBFdmVyeXRoaW5nJ3Mg'));
	@fwrite($fp, base64_decode('ZG9uZSEgTm93IGxvZ2luIGFuZC9vciBjcmVhdGUgYWNjb3VudAoJaWYgKCFlbXB0eSgkZW1haWwpKSB7CgkJJHJhID0gbmV3IE9JRHBsdXNSQSgkZW1haWwpOwoJCWlmICghJHJhLT5leGlzdGluZygpKSB7CgkJCSRyYS0+cmVnaXN0ZXJfcmEobnVsbCk7IC8vIGNy'));
	@fwrite($fp, base64_decode('ZWF0ZSBhIHVzZXIgYWNjb3VudCB3aXRob3V0IHBhc3N3b3JkCgoJCQkvLyBRdWVyeSB1c2VyIGluZm9zCgkJCSRyZXN1bHQgPSB1cmxfcG9zdF9jb250ZW50cygKCQkJCSdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjMvdXNlcmluZm8nLAoJCQkJ'));
	@fwrite($fp, base64_decode('YXJyYXkoCgkJCQkJImNsaWVudF9pZCIgICAgICAgPT4gT0lEcGx1czo6YmFzZUNvbmZpZygpLT5nZXRWYWx1ZSgnR09PR0xFX09BVVRIMl9DTElFTlRfSUQnKSwKCQkJCQkiY2xpZW50X3NlY3JldCIgICA9PiBPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVl'));
	@fwrite($fp, base64_decode('KCdHT09HTEVfT0FVVEgyX0NMSUVOVF9TRUNSRVQnKSwKCQkJCQkidG9rZW5fdHlwZV9oaW50IiA9PiAiYWNjZXNzX3Rva2VuIiwKCQkJCQkidG9rZW4iICAgICAgICAgICA9PiAkYWNjZXNzX3Rva2VuCgkJCQkpLAoJCQkJYXJyYXkoCgkJCQkJIkF1dGhvcml6YXRp'));
	@fwrite($fp, base64_decode('b24iCSAgPT4gIkJlYXJlciAkYWNjZXNzX3Rva2VuIgoJCQkJKQoJCQkpOwoKCQkJaWYgKCRyZXN1bHQgPT09IGZhbHNlKSB7CgkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnQ29tbXVuaWNhdGlvbiB3aXRoICUxIHNlcnZlciBmYWlsZWQnLCAnR29v'));
	@fwrite($fp, base64_decode('Z2xlJykpOwoJCQl9CgoJCQkkZGF0YSA9IGpzb25fZGVjb2RlKCRyZXN1bHQsdHJ1ZSk7CgkJCSRwZXJzb25hbF9uYW1lID0gJGRhdGFbJ25hbWUnXTsgLy8gPSBnaXZlbl9uYW1lICsgIiAiICsgZmFtaWx5X25hbWUKCgkJCU9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJ1'));
	@fwrite($fp, base64_decode('cGRhdGUgIyMjcmEgc2V0IHJhX25hbWUgPSA/LCBwZXJzb25hbF9uYW1lID0gPyB3aGVyZSBlbWFpbCA9ID8iLCBhcnJheSgkcGVyc29uYWxfbmFtZSwgJHBlcnNvbmFsX25hbWUsICRlbWFpbCkpOwoKCQkJT0lEcGx1czo6bG9nZ2VyKCktPmxvZygiVjI6W0lORk9d'));
	@fwrite($fp, base64_decode('UkEoJTEpIiwgIlJBICclMScgd2FzIGNyZWF0ZWQgYmVjYXVzZSBvZiBzdWNjZXNzZnVsIEdvb2dsZSBPQXV0aDIgbG9naW4iLCAkZW1haWwpOwoJCX0KCgkJT0lEcGx1czo6YXV0aFV0aWxzKCktPnJhTG9naW5FeCgkZW1haWwsICdHb29nbGUtT0F1dGgyJyk7CgoJ'));
	@fwrite($fp, base64_decode('CU9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJVUERBVEUgIyMjcmEgc2V0IGxhc3RfbG9naW4gPSAiLk9JRHBsdXM6OmRiKCktPnNxbERhdGUoKS4iIHdoZXJlIGVtYWlsID0gPyIsIGFycmF5KCRlbWFpbCkpOwoKCQlPSURwbHVzOjppbnZva2Vfc2h1dGRvd24oKTsKCgkJ'));
	@fwrite($fp, base64_decode('Ly8gR28gYmFjayB0byBPSURwbHVzCgoJCWhlYWRlcignTG9jYXRpb246Jy5PSURwbHVzOjp3ZWJwYXRoKG51bGwsT0lEcGx1czo6UEFUSF9SRUxBVElWRSkpOwoJfQoKfSBmaW5hbGx5IHsKCgkvLyBXZSBub3cgaGF2ZSB0aGUgZGF0YSBvZiB0aGUgcGVyc29uIHRo'));
	@fwrite($fp, base64_decode('YXQgd2FudGVkIHRvIGxvZyBpbgoJLy8gU28gd2UgY2FuIGxvZyBvZmYgYWdhaW4KCSRjb250ID0gdXJsX3Bvc3RfY29udGVudHMoCgkJImh0dHBzOi8vb2F1dGgyLmdvb2dsZWFwaXMuY29tL3Jldm9rZSIsCgkJYXJyYXkoCgkJCSJjbGllbnRfaWQiICAgICAgID0+'));
	@fwrite($fp, base64_decode('IE9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ0dPT0dMRV9PQVVUSDJfQ0xJRU5UX0lEJyksCgkJCSJjbGllbnRfc2VjcmV0IiAgID0+IE9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ0dPT0dMRV9PQVVUSDJfQ0xJRU5UX1NFQ1JFVCcpLAoJ'));
	@fwrite($fp, base64_decode('CQkidG9rZW5fdHlwZV9oaW50IiA9PiAiYWNjZXNzX3Rva2VuIiwKCQkJInRva2VuIiAgICAgICAgICAgPT4gdXJsZW5jb2RlKCRhY2Nlc3NfdG9rZW4pCgkJKQoJKTsKCglpZiAoJGNvbnQgPT09IGZhbHNlKSB7CgkJLy8gdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRp'));
	@fwrite($fp, base64_decode('b24oX0woJ0NvbW11bmljYXRpb24gd2l0aCAlMSBzZXJ2ZXIgZmFpbGVkJywgJ0dvb2dsZScpKTsKCX0KCn0K'));
	@fclose($fp);
}
if (!is_file('plugins/viathinksoft/publicPages/810_login_google/oauth.php')) {
	warn('File has vanished! Will re-create it: plugins/viathinksoft/publicPages/810_login_google/oauth.php');
	writefile_2();
	if (!is_file('plugins/viathinksoft/publicPages/810_login_google/oauth.php')) {
		warn('File cannot be created (not existing): plugins/viathinksoft/publicPages/810_login_google/oauth.php');
	} else if (sha1_file('plugins/viathinksoft/publicPages/810_login_google/oauth.php') != '6c3340992c968837e57e6415682e449c597aa206') {
		warn('File cannot be created (checksum mismatch): plugins/viathinksoft/publicPages/810_login_google/oauth.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/viathinksoft/publicPages/810_login_google/oauth.php', 0644)) {
		warn('Could not change file permissions of plugins/viathinksoft/publicPages/810_login_google/oauth.php');
	}
} else {
	if (@sha1_file('plugins/viathinksoft/publicPages/810_login_google/oauth.php') !== '6c3340992c968837e57e6415682e449c597aa206') {
		if (@sha1_file('plugins/viathinksoft/publicPages/810_login_google/oauth.php') !== '1d155f8e17750d6b3eba7919f486d730cf33d82a') {
			warn('File was modified. Will overwrite the changes now: plugins/viathinksoft/publicPages/810_login_google/oauth.php');
			$tmp = pathinfo('plugins/viathinksoft/publicPages/810_login_google/oauth.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/viathinksoft/publicPages/810_login_google/oauth.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/viathinksoft/publicPages/810_login_google/oauth.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_2();
		if (@sha1_file('plugins/viathinksoft/publicPages/810_login_google/oauth.php') !== '6c3340992c968837e57e6415682e449c597aa206') {
			warn('File cannot be written (checksum mismatch): plugins/viathinksoft/publicPages/810_login_google/oauth.php');
		}
	}
}

// Files different: plugins/viathinksoft/publicPages/820_login_facebook/OIDplusPagePublicLoginFacebook.class.php
function writefile_3() {
	@$fp = fopen('plugins/viathinksoft/publicPages/820_login_facebook/OIDplusPagePublicLoginFacebook.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMyBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgpuYW1lc3BhY2UgVmlhVGhpbmtTb2Z0XE9JRHBsdXM7CgovLyBwaHBjczpkaXNhYmxlIFBTUjEuRmlsZXMuU2lkZUVmZmVjdHMKXGRlZmluZWQoJ0lOU0lERV9PSURQTFVTJykgb3IgZGll'));
	@fwrite($fp, base64_decode('OwovLyBwaHBjczplbmFibGUgUFNSMS5GaWxlcy5TaWRlRWZmZWN0cwoKY2xhc3MgT0lEcGx1c1BhZ2VQdWJsaWNMb2dpbkZhY2Vib29rIGV4dGVuZHMgT0lEcGx1c1BhZ2VQbHVnaW5QdWJsaWMKCWltcGxlbWVudHMgSU5URl9PSURfMV8zXzZfMV80XzFfMzc0NzZf'));
	@fwrite($fp, base64_decode('Ml81XzJfM181LCAvKiBhbHRlcm5hdGl2ZUxvZ2luTWV0aG9kcyAqLwoJICAgICAgICAgICBJTlRGX09JRF8xXzNfNl8xXzRfMV8zNzQ3Nl8yXzVfMl8zXzggIC8qIGdldE5vdGlmaWNhdGlvbnMgKi8KewoKCS8qKgoJICogQHBhcmFtIHN0cmluZyAkYWN0aW9uSUQK'));
	@fwrite($fp, base64_decode('CSAqIEBwYXJhbSBhcnJheSAkcGFyYW1zCgkgKiBAcmV0dXJuIGFycmF5CgkgKiBAdGhyb3dzIE9JRHBsdXNFeGNlcHRpb24KCSAqLwoJcHVibGljIGZ1bmN0aW9uIGFjdGlvbihzdHJpbmcgJGFjdGlvbklELCBhcnJheSAkcGFyYW1zKTogYXJyYXkgewoJCXJldHVy'));
	@fwrite($fp, base64_decode('biBwYXJlbnQ6OmFjdGlvbigkYWN0aW9uSUQsICRwYXJhbXMpOwoJfQoKCS8qKgoJICogQHBhcmFtIGJvb2wgJGh0bWwKCSAqIEByZXR1cm4gdm9pZAoJICovCglwdWJsaWMgZnVuY3Rpb24gaW5pdChib29sICRodG1sPXRydWUpIHsKCQkvLyBOb3RoaW5nCgl9CgoJ'));
	@fwrite($fp, base64_decode('LyoqCgkgKiBAcGFyYW0gc3RyaW5nICRpZAoJICogQHBhcmFtIGFycmF5ICRvdXQKCSAqIEBwYXJhbSBib29sICRoYW5kbGVkCgkgKiBAcmV0dXJuIHZvaWQKCSAqIEB0aHJvd3MgT0lEcGx1c0V4Y2VwdGlvbgoJICovCglwdWJsaWMgZnVuY3Rpb24gZ3VpKHN0cmlu'));
	@fwrite($fp, base64_decode('ZyAkaWQsIGFycmF5ICYkb3V0LCBib29sICYkaGFuZGxlZCkgewoJCWlmICgkaWQgPT09ICdvaWRwbHVzOmxvZ2luX2ZhY2Vib29rJykgewoJCQkkaGFuZGxlZCA9IHRydWU7CgkJCSRvdXRbJ3RpdGxlJ10gPSBfTCgnTG9naW4gdXNpbmcgRmFjZWJvb2snKTsKCQkJ'));
	@fwrite($fp, base64_decode('JG91dFsnaWNvbiddICA9IE9JRHBsdXM6OndlYnBhdGgoX19ESVJfXyxPSURwbHVzOjpQQVRIX1JFTEFUSVZFKS4naW1nL21haW5faWNvbi5wbmcnOwoKCQkJaWYgKCFPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdGQUNFQk9PS19PQVVUSDJfRU5BQkxF'));
	@fwrite($fp, base64_decode('RCcsIGZhbHNlKSkgewoJCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0ZhY2Vib29rIE9BdXRoIGF1dGhlbnRpY2F0aW9uIGlzIGRpc2FibGVkIG9uIHRoaXMgc3lzdGVtLicpLCAkb3V0Wyd0aXRsZSddKTsKCQkJfQoKCQkJJG91dFsndGV4dCddICA9'));
	@fwrite($fp, base64_decode('ICc8cD4nLl9MKCdQbGVhc2Ugd2FpdC4uLicpLic8L3A+JzsKCQkJJG91dFsndGV4dCddIC49ICc8Zm9ybSBhY3Rpb249Imh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS92OC4wL2RpYWxvZy9vYXV0aCIgbWV0aG9kPSJHRVQiPic7CgkJCSRvdXRbJ3RleHQnXSAuPSAn'));
	@fwrite($fp, base64_decode('PGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iY2xpZW50X2lkIiB2YWx1ZT0iJy5odG1sZW50aXRpZXMoT0lEcGx1czo6YmFzZUNvbmZpZygpLT5nZXRWYWx1ZSgnRkFDRUJPT0tfT0FVVEgyX0NMSUVOVF9JRCcpKS4nIj4nLiJcbiI7CgkJCSRvdXRbJ3RleHQnXSAu'));
	@fwrite($fp, base64_decode('PSAnPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0icmVkaXJlY3RfdXJpIiB2YWx1ZT0iJy5odG1sZW50aXRpZXMoJycpLiciPicuIlxuIjsgLy8gVVJMIHdpbGwgYmUgZmlsbGVkIGJ5IEphdmFTY3JpcHQKCQkJJG91dFsndGV4dCddIC49ICc8aW5wdXQgdHlwZT0i'));
	@fwrite($fp, base64_decode('aGlkZGVuIiBuYW1lPSJzdGF0ZSIgdmFsdWU9IicuaHRtbGVudGl0aWVzKCRfQ09PS0lFWydjc3JmX3Rva2VuX3dlYWsnXSkuJyI+Jy4iXG4iOyAvLyBVUkwgd2lsbCBiZSBhZGRlZCBieSBKYXZhU2NyaXB0CgkJCSRvdXRbJ3RleHQnXSAuPSAnPGlucHV0IHR5cGU9'));
	@fwrite($fp, base64_decode('ImhpZGRlbiIgbmFtZT0ic2NvcGUiIHZhbHVlPSInLmh0bWxlbnRpdGllcyhpbXBsb2RlKCcgJywgYXJyYXkoJ2VtYWlsJykpKS4nIj4nLiJcbiI7CgkJCSRvdXRbJ3RleHQnXSAuPSAnPC9mb3JtPic7CgkJCSRvdXRbJ3RleHQnXSAuPSAnPHNjcmlwdD4nOwoJCQkk'));
	@fwrite($fp, base64_decode('b3V0Wyd0ZXh0J10gLj0gJ3JlZGlyX3VybCA9IGdldFN5c3RlbVVybCgpICsgInBsdWdpbnMvdmlhdGhpbmtzb2Z0L3B1YmxpY1BhZ2VzLzgyMF9sb2dpbl9mYWNlYm9vay9vYXV0aC5waHAiOyc7CgkJCSRvdXRbJ3RleHQnXSAuPSAnZG9jdW1lbnQuZm9ybXNbMF0u'));
	@fwrite($fp, base64_decode('ZWxlbWVudHMucmVkaXJlY3RfdXJpLnZhbHVlID0gcmVkaXJfdXJsOyc7CgkJCSRvdXRbJ3RleHQnXSAuPSAnZG9jdW1lbnQuZm9ybXNbMF0uZWxlbWVudHMuc3RhdGUudmFsdWUgPSByZWRpcl91cmwgKyAifCIgKyBkb2N1bWVudC5mb3Jtc1swXS5lbGVtZW50cy5z'));
	@fwrite($fp, base64_decode('dGF0ZS52YWx1ZTsnOwoJCQkkb3V0Wyd0ZXh0J10gLj0gJ2RvY3VtZW50LmZvcm1zWzBdLnN1Ym1pdCgpOyc7CgkJCSRvdXRbJ3RleHQnXSAuPSAnPC9zY3JpcHQ+JzsKCQl9Cgl9CgoJLyoqCgkgKiBAcGFyYW0gYXJyYXkgJG91dAoJICogQHJldHVybiB2b2lkCgkg'));
	@fwrite($fp, base64_decode('Ki8KCXB1YmxpYyBmdW5jdGlvbiBwdWJsaWNTaXRlbWFwKGFycmF5ICYkb3V0KSB7CgkJJG91dFtdID0gJ29pZHBsdXM6bG9naW5fZmFjZWJvb2snOwoJfQoKCS8qKgoJICogQHBhcmFtIGFycmF5ICRqc29uCgkgKiBAcGFyYW0gc3RyaW5nfG51bGwgJHJhX2VtYWls'));
	@fwrite($fp, base64_decode('CgkgKiBAcGFyYW0gYm9vbCAkbm9uanMKCSAqIEBwYXJhbSBzdHJpbmcgJHJlcV9nb3RvCgkgKiBAcmV0dXJuIGJvb2wKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHRyZWUoYXJyYXkgJiRqc29uLCBzdHJpbmcgJHJhX2VtYWlsPW51bGwsIGJvb2wgJG5vbmpzPWZhbHNl'));
	@fwrite($fp, base64_decode('LCBzdHJpbmcgJHJlcV9nb3RvPScnKTogYm9vbCB7CgkJcmV0dXJuIHRydWU7Cgl9CgoJLyoqCgkgKiBAcGFyYW0gc3RyaW5nICRyZXF1ZXN0CgkgKiBAcmV0dXJuIGFycmF5fGZhbHNlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiB0cmVlX3NlYXJjaChzdHJpbmcgJHJl'));
	@fwrite($fp, base64_decode('cXVlc3QpIHsKCQlyZXR1cm4gZmFsc2U7Cgl9CgoJLyoqCgkgKiBJbXBsZW1lbnRzIGludGVyZmFjZSBJTlRGX09JRF8xXzNfNl8xXzRfMV8zNzQ3Nl8yXzVfMl8zXzUKCSAqIEByZXR1cm4gYXJyYXkKCSAqIEB0aHJvd3MgT0lEcGx1c0V4Y2VwdGlvbgoJICovCglw'));
	@fwrite($fp, base64_decode('dWJsaWMgZnVuY3Rpb24gYWx0ZXJuYXRpdmVMb2dpbk1ldGhvZHMoKTogYXJyYXkgewoJCSRsb2dpbnMgPSBhcnJheSgpOwoJCWlmIChPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdGQUNFQk9PS19PQVVUSDJfRU5BQkxFRCcsIGZhbHNlKSkgewoJCQkk'));
	@fwrite($fp, base64_decode('bG9naW5zW10gPSBhcnJheSgKCQkJCSdvaWRwbHVzOmxvZ2luX2ZhY2Vib29rJywKCQkJCV9MKCdMb2dpbiB1c2luZyBGYWNlYm9vaycpLAoJCQkJT0lEcGx1czo6d2VicGF0aChfX0RJUl9fLE9JRHBsdXM6OlBBVEhfUkVMQVRJVkUpLidpbWcvbWFpbl9pY29uMTYu'));
	@fwrite($fp, base64_decode('cG5nJwoJCQkpOwoJCX0KCQlyZXR1cm4gJGxvZ2luczsKCX0KCgkvKioKCSAqIEltcGxlbWVudHMgaW50ZXJmYWNlIElOVEZfT0lEXzFfM182XzFfNF8xXzM3NDc2XzJfNV8yXzNfOAoJICogQHBhcmFtIHN0cmluZ3xudWxsICR1c2VyCgkgKiBAcmV0dXJuIGFycmF5'));
	@fwrite($fp, base64_decode('CgkgKiBAdGhyb3dzIE9JRHBsdXNFeGNlcHRpb24KCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldE5vdGlmaWNhdGlvbnMoc3RyaW5nICR1c2VyPW51bGwpOiBhcnJheSB7CgkJJG5vdGlmaWNhdGlvbnMgPSBhcnJheSgpOwoJCWlmICgoISR1c2VyIHx8ICgkdXNlciA9'));
	@fwrite($fp, base64_decode('PSAnYWRtaW4nKSkgJiYgT0lEcGx1czo6YXV0aFV0aWxzKCktPmlzQWRtaW5Mb2dnZWRJbigpKSB7CgkJCWlmIChPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdGQUNFQk9PS19PQVVUSDJfRU5BQkxFRCcsIGZhbHNlKSkgewoJCQkJaWYgKCF1cmxfcG9z'));
	@fwrite($fp, base64_decode('dF9jb250ZW50c19hdmFpbGFibGUodHJ1ZSwgJHJlYXNvbikpIHsKCQkJCQkkdGl0bGUgPSBfTCgnRmFjZWJvb2sgT0F1dGggTG9naW4nKTsKCQkJCQkkbm90aWZpY2F0aW9uc1tdID0gbmV3IE9JRHBsdXNOb3RpZmljYXRpb24oJ0VSUicsIF9MKCdPSURwbHVzIHBs'));
	@fwrite($fp, base64_decode('dWdpbiAiJTEiIGlzIGVuYWJsZWQsIGJ1dCBPSURwbHVzIGNhbm5vdCBjb25uZWN0IHRvIHRoZSBJbnRlcm5ldC4nLCBodG1sZW50aXRpZXMoJHRpdGxlKSkuJyAnLiRyZWFzb24pOwoJCQkJfQoJCQl9CgkJfQoJCXJldHVybiAkbm90aWZpY2F0aW9uczsKCX0KCn0K'));
	@fwrite($fp, base64_decode(''));
	@fclose($fp);
}
if (!is_file('plugins/viathinksoft/publicPages/820_login_facebook/OIDplusPagePublicLoginFacebook.class.php')) {
	warn('File has vanished! Will re-create it: plugins/viathinksoft/publicPages/820_login_facebook/OIDplusPagePublicLoginFacebook.class.php');
	writefile_3();
	if (!is_file('plugins/viathinksoft/publicPages/820_login_facebook/OIDplusPagePublicLoginFacebook.class.php')) {
		warn('File cannot be created (not existing): plugins/viathinksoft/publicPages/820_login_facebook/OIDplusPagePublicLoginFacebook.class.php');
	} else if (sha1_file('plugins/viathinksoft/publicPages/820_login_facebook/OIDplusPagePublicLoginFacebook.class.php') != '1c65c126576ac881d561d590f79cd145925f9e1f') {
		warn('File cannot be created (checksum mismatch): plugins/viathinksoft/publicPages/820_login_facebook/OIDplusPagePublicLoginFacebook.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/viathinksoft/publicPages/820_login_facebook/OIDplusPagePublicLoginFacebook.class.php', 0644)) {
		warn('Could not change file permissions of plugins/viathinksoft/publicPages/820_login_facebook/OIDplusPagePublicLoginFacebook.class.php');
	}
} else {
	if (@sha1_file('plugins/viathinksoft/publicPages/820_login_facebook/OIDplusPagePublicLoginFacebook.class.php') !== '1c65c126576ac881d561d590f79cd145925f9e1f') {
		if (@sha1_file('plugins/viathinksoft/publicPages/820_login_facebook/OIDplusPagePublicLoginFacebook.class.php') !== '5fbf3ef95e88e3011e55aa7d939e1071641192c6') {
			warn('File was modified. Will overwrite the changes now: plugins/viathinksoft/publicPages/820_login_facebook/OIDplusPagePublicLoginFacebook.class.php');
			$tmp = pathinfo('plugins/viathinksoft/publicPages/820_login_facebook/OIDplusPagePublicLoginFacebook.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/viathinksoft/publicPages/820_login_facebook/OIDplusPagePublicLoginFacebook.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/viathinksoft/publicPages/820_login_facebook/OIDplusPagePublicLoginFacebook.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_3();
		if (@sha1_file('plugins/viathinksoft/publicPages/820_login_facebook/OIDplusPagePublicLoginFacebook.class.php') !== '1c65c126576ac881d561d590f79cd145925f9e1f') {
			warn('File cannot be written (checksum mismatch): plugins/viathinksoft/publicPages/820_login_facebook/OIDplusPagePublicLoginFacebook.class.php');
		}
	}
}

// Files different: plugins/viathinksoft/publicPages/820_login_facebook/oauth.php
function writefile_4() {
	@$fp = fopen('plugins/viathinksoft/publicPages/820_login_facebook/oauth.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMyBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgp1c2UgVmlhVGhpbmtTb2Z0XE9JRHBsdXNcT0lEcGx1czsKdXNlIFZpYVRoaW5rU29mdFxPSURwbHVzXE9JRHBsdXNHdWk7CnVzZSBWaWFUaGlua1NvZnRcT0lEcGx1c1xPSURwbHVzRXhj'));
	@fwrite($fp, base64_decode('ZXB0aW9uOwp1c2UgVmlhVGhpbmtTb2Z0XE9JRHBsdXNcT0lEcGx1c1JBOwoKIyBNb3JlIGluZm9ybWF0aW9uIGFib3V0IHRoZSBPQXV0aDIgaW1wbGVtZW50YXRpb246CiMgLSBodHRwczovL2RldmVsb3BlcnMuZmFjZWJvb2suY29tL2RvY3MvZmFjZWJvb2stbG9n'));
	@fwrite($fp, base64_decode('aW4vbWFudWFsbHktYnVpbGQtYS1sb2dpbi1mbG93CiMgLSBodHRwczovL2RldmVsb3BlcnMuZmFjZWJvb2suY29tL3Rvb2xzL2V4cGxvcmVyLwoKcmVxdWlyZV9vbmNlIF9fRElSX18gLiAnLy4uLy4uLy4uLy4uL2luY2x1ZGVzL29pZHBsdXMuaW5jLnBocCc7Cgpz'));
	@fwrite($fp, base64_decode('ZXRfZXhjZXB0aW9uX2hhbmRsZXIoYXJyYXkoT0lEcGx1c0d1aTo6Y2xhc3MsICdodG1sX2V4Y2VwdGlvbl9oYW5kbGVyJykpOwoKT0lEcGx1czo6aW5pdCh0cnVlKTsKCmlmIChPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdESVNBQkxFX1BMVUdJTl9W'));
	@fwrite($fp, base64_decode('aWFUaGlua1NvZnRcT0lEcGx1c1xPSURwbHVzUGFnZVB1YmxpY0xvZ2luRmFjZWJvb2snLCBmYWxzZSkpIHsKCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdUaGlzIHBsdWdpbiB3YXMgZGlzYWJsZWQgYnkgdGhlIHN5c3RlbSBhZG1pbmlzdHJhdG9yIScp'));
	@fwrite($fp, base64_decode('KTsKfQoKaWYgKCFPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdGQUNFQk9PS19PQVVUSDJfRU5BQkxFRCcsIGZhbHNlKSkgewoJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0ZhY2Vib29rIE9BdXRoIGF1dGhlbnRpY2F0aW9uIGlzIGRpc2Fi'));
	@fwrite($fp, base64_decode('bGVkIG9uIHRoaXMgc3lzdGVtLicpKTsKfQoKX0NoZWNrUGFyYW1FeGlzdHMoJF9HRVQsICdjb2RlJyk7Cl9DaGVja1BhcmFtRXhpc3RzKCRfR0VULCAnc3RhdGUnKTsKX0NoZWNrUGFyYW1FeGlzdHMoJF9DT09LSUUsICdjc3JmX3Rva2VuX3dlYWsnKTsKCiRhcnkg'));
	@fwrite($fp, base64_decode('PSBleHBsb2RlKCd8JywgJF9HRVRbJ3N0YXRlJ10sIDIpOwppZiAoY291bnQoJGFyeSkgIT09IDIpIHsKCWRpZShfTCgnSW52YWxpZCBTdGF0ZScpKTsKfQokcmVkaXJlY3RfdXJpID0gJGFyeVswXTsgLy8gQXR0ZW50aW9uOiBDb21lcyBmcm9tIHRoZSBjbGllbnQu'));
	@fwrite($fp, base64_decode('IFRoZSBPQXV0aDIgc2VydmVyIE1VU1QgdmVyaWZ5IGl0ISAoR29vZ2xlIGFuZCBGYWNlYm9vayBkb2VzIHRoaXMpCiRjaGVja19jc3JmID0gJGFyeVsxXTsKCmlmICgkY2hlY2tfY3NyZiAhPSAkX0NPT0tJRVsnY3NyZl90b2tlbl93ZWFrJ10pIHsKCWRpZShfTCgn'));
	@fwrite($fp, base64_decode('TWlzc2luZyBvciB3cm9uZyBDU1JGIFRva2VuJykpOwp9CgovLyBHZXQgYWNjZXNzIHRva2VuCgokY29udCA9IHVybF9wb3N0X2NvbnRlbnRzKAoJImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL3Y4LjAvb2F1dGgvYWNjZXNzX3Rva2VuPyIuCgkJImNsaWVudF9p'));
	@fwrite($fp, base64_decode('ZD0iLnVybGVuY29kZShPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdGQUNFQk9PS19PQVVUSDJfQ0xJRU5UX0lEJykpLiImIi4KCQkicmVkaXJlY3RfdXJpPSIudXJsZW5jb2RlKCRyZWRpcmVjdF91cmkpLiImIi4KCQkiY2xpZW50X3NlY3JldD0iLnVy'));
	@fwrite($fp, base64_decode('bGVuY29kZShPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdGQUNFQk9PS19PQVVUSDJfQ0xJRU5UX1NFQ1JFVCcpKS4iJiIuCgkJImNvZGU9Ii4kX0dFVFsnY29kZSddCik7CgppZiAoJGNvbnQgPT09IGZhbHNlKSB7Cgl0aHJvdyBuZXcgT0lEcGx1c0V4'));
	@fwrite($fp, base64_decode('Y2VwdGlvbihfTCgnQ29tbXVuaWNhdGlvbiB3aXRoICUxIHNlcnZlciBmYWlsZWQnLCAnRmFjZWJvb2snKSk7Cn0KCiRkYXRhID0ganNvbl9kZWNvZGUoJGNvbnQsdHJ1ZSk7CmlmIChpc3NldCgkZGF0YVsnZXJyb3InXSkpIHsKCWVjaG8gJzxoMj5FcnJvciBhdCBz'));
	@fwrite($fp, base64_decode('dGVwIDI8L2gyPic7CgllY2hvICc8cD4nLiRkYXRhWydlcnJvciddWydtZXNzYWdlJ10uJzwvcD4nOwoJZGllKCk7Cn0KJGFjY2Vzc190b2tlbiA9ICRkYXRhWydhY2Nlc3NfdG9rZW4nXTsKCi8vIEdldCB1c2VyIGluZm9zCgokY29udCA9IHVybF9wb3N0X2NvbnRl'));
	@fwrite($fp, base64_decode('bnRzKAoJImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL3Y4LjAvbWU/Ii4KCQkiZmllbGRzPWlkLGVtYWlsLG5hbWUmIi4KCQkiYWNjZXNzX3Rva2VuPSIudXJsZW5jb2RlKCRhY2Nlc3NfdG9rZW4pCik7CgppZiAoJGNvbnQgPT09IGZhbHNlKSB7Cgl0aHJvdyBu'));
	@fwrite($fp, base64_decode('ZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnQ29tbXVuaWNhdGlvbiB3aXRoICUxIHNlcnZlciBmYWlsZWQnLCAnRmFjZWJvb2snKSk7Cn0KCiRkYXRhID0ganNvbl9kZWNvZGUoJGNvbnQsdHJ1ZSk7CmlmIChpc3NldCgkZGF0YVsnZXJyb3InXSkpIHsKCXRocm93IG5l'));
	@fwrite($fp, base64_decode('dyBPSURwbHVzRXhjZXB0aW9uKF9MKCdFcnJvciByZWNlaXZpbmcgdGhlIGF1dGhlbnRpY2F0aW9uIHRva2VuIGZyb20gJTE6ICUyJywnRmFjZWJvb2snLCRkYXRhWydlcnJvciddWydtZXNzYWdlJ10pKTsKfQokcGVyc29uYWxfbmFtZSA9ICRkYXRhWyduYW1lJ107'));
	@fwrite($fp, base64_decode('CiRlbWFpbCA9ICFpc3NldCgkZGF0YVsnZW1haWwnXSkgPyAnJyA6ICRkYXRhWydlbWFpbCddOwppZiAoZW1wdHkoJGVtYWlsKSkgewoJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ1lvdXIgRmFjZWJvb2sgYWNjb3VudCBkb2VzIG5vdCBoYXZlIGFuIGVt'));
	@fwrite($fp, base64_decode('YWlsIGFkZHJlc3MuJykpOwp9CgovLyBFdmVyeXRoaW5nJ3MgZG9uZSEgTm93IGxvZ2luIGFuZC9vciBjcmVhdGUgYWNjb3VudAoKJHJhID0gbmV3IE9JRHBsdXNSQSgkZW1haWwpOwppZiAoISRyYS0+ZXhpc3RpbmcoKSkgewoJJHJhLT5yZWdpc3Rlcl9yYShudWxs'));
	@fwrite($fp, base64_decode('KTsgLy8gY3JlYXRlIGEgdXNlciBhY2NvdW50IHdpdGhvdXQgcGFzc3dvcmQKCglPSURwbHVzOjpkYigpLT5xdWVyeSgidXBkYXRlICMjI3JhIHNldCByYV9uYW1lID0gPywgcGVyc29uYWxfbmFtZSA9ID8gd2hlcmUgZW1haWwgPSA/IiwgYXJyYXkoJHBlcnNvbmFs'));
	@fwrite($fp, base64_decode('X25hbWUsICRwZXJzb25hbF9uYW1lLCAkZW1haWwpKTsKCglPSURwbHVzOjpsb2dnZXIoKS0+bG9nKCJWMjpbSU5GT11SQSglMSkiLCAiUkEgJyUxJyB3YXMgY3JlYXRlZCBiZWNhdXNlIG9mIHN1Y2Nlc3NmdWwgRmFjZWJvb2sgT0F1dGgyIGxvZ2luIiwgJGVtYWls'));
	@fwrite($fp, base64_decode('KTsKfQoKT0lEcGx1czo6YXV0aFV0aWxzKCktPnJhTG9naW5FeCgkZW1haWwsICdGYWNlYm9vay1PQXV0aDInKTsKCk9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJVUERBVEUgIyMjcmEgc2V0IGxhc3RfbG9naW4gPSAiLk9JRHBsdXM6OmRiKCktPnNxbERhdGUoKS4iIHdo'));
	@fwrite($fp, base64_decode('ZXJlIGVtYWlsID0gPyIsIGFycmF5KCRlbWFpbCkpOwoKLy8gR28gYmFjayB0byBPSURwbHVzCgpPSURwbHVzOjppbnZva2Vfc2h1dGRvd24oKTsKCmhlYWRlcignTG9jYXRpb246Jy5PSURwbHVzOjp3ZWJwYXRoKG51bGwsT0lEcGx1czo6UEFUSF9SRUxBVElWRSkp'));
	@fwrite($fp, base64_decode('Owo='));
	@fclose($fp);
}
if (!is_file('plugins/viathinksoft/publicPages/820_login_facebook/oauth.php')) {
	warn('File has vanished! Will re-create it: plugins/viathinksoft/publicPages/820_login_facebook/oauth.php');
	writefile_4();
	if (!is_file('plugins/viathinksoft/publicPages/820_login_facebook/oauth.php')) {
		warn('File cannot be created (not existing): plugins/viathinksoft/publicPages/820_login_facebook/oauth.php');
	} else if (sha1_file('plugins/viathinksoft/publicPages/820_login_facebook/oauth.php') != '180fe0257270cb710c55a51bb5fc9a04dabd8b6b') {
		warn('File cannot be created (checksum mismatch): plugins/viathinksoft/publicPages/820_login_facebook/oauth.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/viathinksoft/publicPages/820_login_facebook/oauth.php', 0644)) {
		warn('Could not change file permissions of plugins/viathinksoft/publicPages/820_login_facebook/oauth.php');
	}
} else {
	if (@sha1_file('plugins/viathinksoft/publicPages/820_login_facebook/oauth.php') !== '180fe0257270cb710c55a51bb5fc9a04dabd8b6b') {
		if (@sha1_file('plugins/viathinksoft/publicPages/820_login_facebook/oauth.php') !== 'b0452f050efe979240c7166ff9df07d7592f6b2b') {
			warn('File was modified. Will overwrite the changes now: plugins/viathinksoft/publicPages/820_login_facebook/oauth.php');
			$tmp = pathinfo('plugins/viathinksoft/publicPages/820_login_facebook/oauth.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/viathinksoft/publicPages/820_login_facebook/oauth.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/viathinksoft/publicPages/820_login_facebook/oauth.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_4();
		if (@sha1_file('plugins/viathinksoft/publicPages/820_login_facebook/oauth.php') !== '180fe0257270cb710c55a51bb5fc9a04dabd8b6b') {
			warn('File cannot be written (checksum mismatch): plugins/viathinksoft/publicPages/820_login_facebook/oauth.php');
		}
	}
}


file_put_contents('.version.php', "<?php // Revision 1372\n");
if (trim(@file_get_contents('.version.php')) !== '<?php // Revision 1372') err('Could not write to .version.php!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

