<?php /* <ViaThinkSoftSignature>
CJIHDcdC1MhE4THFO2RAhyiXeCgY2AkdVaH6CUiKycMj8qR7H1LrUuQlCmXiPnUSO
gDduwAVvUajUmIZrwNYD2hUIeHKRXeit+hTUStiqouDtynOo29/jsAhlz1b85XTG4
IAL4jY7tNcIsgE00mZKcUv0C36waU795P1Cu5gfG+nN7BK7Edeia0E3+WAodzxwA+
KXfw5zsbEPX4xpDThw0XLzKMZvEPyo2jSs9e6UR999xxp0znW654RIu02t6z5D3e7
aK+37sdnwUo90yWQfc4J6wfGa4aGd9Y8UkBcQ33Gwdzz6Jjv4ys5ZuMEsMFh6x/mu
BqozS4HXJ/kr8Tx7l6jh1W+0Z7kPKu38sVHFjpdyfwExPQaWxEVG8o+WHh1RmlbbW
rIMDa7GG4bgUSXKgAwZcHwoFirH6h0AJsmB5vXqdVgP0xUpRKqkkoV5BMb0eysUh6
DJThPkxT2hbhX0zwlaTPoRWvtT/MBVY1Iz5e3ulakNd2gs1jg5d/ESQ0uFGusKaZc
yzLdSi07UFSYYt8crduk8nZXE8iOVO+NATY2Js0xQlgWM+Hw5W+USAJSOcrk13tZ+
bRDzIFbIinm1pwwze/sQyg2geo5hgdikk6FVw+53mfIg3F6jetGFgzCxjjbgAQBE6
SDnYDpKOpoPyZMJszmoTFBm9qadmdIfvKLzSZ1tNxvxc8TO4HrY9+gG1CCcroKJQ3
ehMd2WanDg7/sFh8poqAgJGnoQQqKYAIxznis298ZHqhLTNAdnZdn+Sj6PrmHVOJA
gQlfBf5KjA+ylkWXD4NbbgmYD/WizRwifAtM9J3DXkDeGxNK/FXSoEllXs9RjUIiP
b26YlVa7fIxQANfmTD6qtD5ga5J4dUjUmLr8k9ck3rEvgXCovVPJpbzCEpmEgqkgD
7miC4CehlzMifgmVJkWOZPGRD1y2AjEBvjtOUIOV5BiSeSX6ev09TvHBTBzJjyzjs
+yxrj242dxHEMrq95VpgR2wX+k8Vzq0cCxdBrEwZp8mGgitEkrnFvjxcHWrKTAJko
EHkouPRAv17EDgyv9Ml+BzJhojGmOp2e0PitVci9LOMTvs1AFTZyE5m8VNG90auf0
XRcY3MX6dDpp7VAD1Yts4J5PFM5QXanQTYGlSQFyVZhMI52r2t+STInSWArN61hX1
6AxiWPMsoWwi4Q3YXWREabpn4fYeMR5HP6CZZSqyuHYipS2weGJf+WJ7MT52/XTLK
fOTBPEHF+GC/hKN3Rk8T8E71bU5yrJl9P/1DrBf4iyfeChZkYih94wx5vt0APL44h
qsmGwz7zjiaF7EJ6NqMsQtCwIdltW6b463bCS0bOAyJciJRMxxcCv3vqCsZ2qA0A9
w==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 25') {
	err('This update can only be applied to OIDplus version 2.0.0.25!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: TODO
function writefile_1() {
	@$fp = fopen('TODO', 'w');
	@fwrite($fp, base64_decode('CkFkbWluaXN0cmF0b3ItSW50ZXJmYWNlOgotIGVuYWJsZSBhbmQgZGlzYWJsZSBvYmplY3QgdHlwZXMKCm1ha2UgZm9ybXMgYW5kIG90aGVyIHN0dWZmIGxvb2sgbmljZXIuIGF0IHRoZSBtb21lbnQsIGl0IHdhcyBqdXN0IGRldmVsb3BlZCBmb3IgZnVuY3Rpb25h'));
	@fwrite($fp, base64_decode('bGl0eQoKd2hlbiBqYXZhc2NyaXB0IGZhaWxzLCB0aGUgZm9ybSB3aWxsIGJlIHN1Ym1pdHRlZCB0byAnLi8nICwgdGhhdCBpcyBub3QgZ29vZCEgZmFpbGVkIGphdmFzY3JpcHQgbXVzdCByZXR1cm4gZmFsc2UsIHNvIHRoYXQgdGhlIGZvcm0gZG9lcyBub3QgZ2V0'));
	@fwrite($fp, base64_decode('IHN1Ym1pdHRlZAoKYXV0b21hdGlzY2ggdW1sZWl0ZW4gbmFjaCBodHRwcwoKZm9ybXM6IGFsaWduIGlucHV0IGVkaXRzLCBzZWUgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzAwMDg5NDgvaG93LXRvLWFsaWduLXR3by1sYWJlbHMtYW5kLXR3'));
	@fwrite($fp, base64_decode('by10ZXh0Ym94ZXMtd2l0aG91dC1hLWdhcC1pbi1mb3JtLWhvcml6b250YWwKCmh0bWwgY2hlY2tib3g6ICJsYWJlbCBmb3IiIHZlcndlbmRlbgoKYWRtaW46IHNob3cgcHJpdmFjeSBlbnRyaWVzIGZyb20gUkFzIChidXQgZ3JleSwgc28geW91IGtub3cgdGhhdCBp'));
	@fwrite($fp, base64_decode('dCBpcyBwcml2YXRlKQoKYWt0dWVsbGUgYmF1c3RlbGxlbjoKLSBzY3JpcHQgdG8gY2hhbmdlIGVtYWlsIGFkZHJlc3MKLSBlc2NhcGUgZXZlcnl0aGluZwotIGFudGkgeHNzIHdlaXRlciB2ZXJmZWluZXJuCi0gKG9pZCsgZ2Vucm9vdCA9IG1hcHBpbmcgdG8gT0lE'));
	@fwrite($fp, base64_decode('IHRyZWUpCi0gc2V0dGluZ3MgZGF0YWJhc2UgdGFibGUKCmFkbWluIHNvbGwgY29udGFjdCBkYXRhIGVpbmVyIGZyZW1kZW4gUkEg5G5kZXJuIGT8cmZlbgoKZnJlZW9pZDogYXNuLjEgdW5kIGlyaSBzcGFsdGVuIGF1c2JsZW5kZW4sIGRhIGRpZXNlciBhcmMga2Vp'));
	@fwrite($fp, base64_decode('bmUgSURzIHZlcmdpYnQ/Cgpwcm8gUkEgZGluZ2UgbG9nZ2VuIHdpZSB6LkIuIGxhc3QgbG9naW4KCmFkZCBzZWFyY2ggZnVuY3Rpb25hbGl0eQoKUHJpdmFjeTogTWVociBzdHVmZW4sIHouYi4gZGFzcyBtYW4gZGVuIHBlcnNvbmFsIG5hbWUgZXZ0bCBnYXIgbmlj'));
	@fwrite($fp, base64_decode('aHQgemVpZ2VuIG32Y2h0ZQoKTWFuIHNvbGx0ZSAiY3JlYXRlZCIgYWLkbmRlcm4gZPxyZmVuISBvZGVyIGV2dGwgZ2FueiB2ZXJzdGVja2VuLCB3ZW5uIG1hbiBlcyBuaWNodCB3ZWnfCgohIWluIGRlciBjcnVkIGxpc3RlIGRlbiB0aXRlbCBkZXMgb2JqZWt0cyB6'));
	@fwrite($fp, base64_decode('ZWlnZW4KCnF1ZTogbmljaHQgdmVyd2VuZGV0ZSBuYW1lc3BhY2VzIGF1c2JsZW5kZW4gZvxyIGRpZSD2ZmZlbnRsaWNoa2VpdD8KCgpuYXRPcmRlcigpIGlzdCBudXIgZvxyIE9JRCBn/Gx0aWchISEgYW5kZXJlIHNvcnQtbWVjaGFuaXNtZW4gZvxyIGFuZGVyZSBv'));
	@fwrite($fp, base64_decode('Ympla3R0eXBlbiBlcmZvcmRlcmxpY2gKCm1jZSBkaXJ0eSBmbGFnOgoJLSB3ZW5uIG1hbiB3ZWNoc2VsIChqcyB0cmVlIHNlbGVjdCksIGRhbm4gc29sbCBhYmdlZnJhZ3Qgd2VyZGVuLCBvYiB0aW55bWNlIGRpcnR5IGlzdCwgdW5kIGVpbmUgd2FybnVuZyBicmlu'));
	@fwrite($fp, base64_decode('Z2VuLCBhbHNvIHNvLCB3aWUgd2VubiBtYW4gZGllIHNlaXRlIG5ldSBsYWRlbiB3/HJkZQoJLSBrcml0aXNjaGVyIGJ1Zzogc2VpdGUg9mZmbmVuLCB0aW55IG1jZSBlZGl0aWVyZW4sIHNwZWljaGVybiBrbGlja2VuLiBkYW5uIGY1IG5ldSBsYWRlbiAobmljaHQg'));
	@fwrite($fp, base64_decode('c3RyZytmNSk6IGRhbm4gaXN0IGRlciBhbHRlIGNvbnRlbnQgd2llZGVyIGRhLiBhdd9lciBtYW4gZHL8Y2t0IHN0cmcrZjUKCmpzdHJlZSBzZWxlY3Q6IGF1dG9tYXRpY2FsbHkgc2Nyb2xsIGRvd24KCnRpdGVsIGxvZ28gYW5rbGlja2JhciAtPiBuYXZpZXJlIHp1'));
	@fwrite($fp, base64_decode('IHN5c3RlbQoKaW5uZXJoYWxiIGRlcyBjb250ZW50LXBhbmVzCgktIG5hdmlnYXRpb24genUgcGFyZW50IElEcwoKZm9yZWlnbiBrZXlzIG51dHplbgoKb3B0aXNjaCBhdWZo/GJzY2hlbi4gZGluZ2Ugd2llIFJBOiBtZWhyIGRpbmdlIHplaWdlbiwgYWRyZXNzZSwg'));
	@fwrite($fp, base64_decode('ZW1haWwgZXRjCgpsb2dpbgoKY2hhbmdlIGhpc3Rvcnkgb2YgZWFjaCBvaWQgKyBsYXN0IG1vZGlmaWNhdGlvbiB0aW1lCgpkYgoJLSB3ZWcgdm9uIG15c3FsXyEgKFBETz8pCgktIG1hbmRhbnRlbiAoZGIgcHLkZml4ZSkKCmF1dGggdW5kIGRhdGVu/GJlcnBy/GZ1'));
	@fwrite($fp, base64_decode('bmdzY2hlY2tzIGluIGNydWRfYWN0aW9uLnBocAoKISEgZHNndm8gZGF0ZW5zY2h1dHplcmts5HJ1bmcsIGFnYnMgZXRjLgoKbWFya2VycyBkcmFmdCwgbGVhZiwgZnJvemVuIGV0YwoKbXVsdGlsYW5nCgphdXNsaWZlcm4gbWl0IDIuOTk5IHVuZCBleGFtcGxlIERP'));
	@fwrite($fp, base64_decode('SXMgZXRjCgp3byBpbiB4LjY2MCBpc3QgZmVzdGdlaGFsdGVuLCBkYXNzIGRpZSBlcnN0ZSBSQSBmZXN0Z2VoYWx0ZW4gd2VyZGVuIG11c3M/CnF1ZSA6IGhpc3RvcmllIGVpbmVyIG9pZAoKaHR0cCBsb2dpbiBuaWNodCBt9mdsaWNoLiB3YXJ1bT8KCm9iamVjdHR5'));
	@fwrite($fp, base64_decode('cGVzIGF1dG9tYXRpc2NoIGxhZGVuIChwaHAgZGF0ZWllbiBzdWNoZW4pIHVuZCByZWdpc3RyaWVyZW4uCgpTTUFMTCBUSElOR1MKLSA8YWJicj4gaW4gPGNvZGU+IHdpcmQgZG9wcGVsdCB1bnRlcnN0cmljaGVuCi0gd2VubiBtYW4gZWluZSB3ZWxsLWtub3duIE9J'));
	@fwrite($fp, base64_decode('RCBhbmxlZ2VuIG32Y2h0ZSwgZGFubiBrb21tdCBmZWhsZXIgd2VnZW4gcmVwbGFjZUFzbjEvcmVwbGFjZUlyaSwgYWJlciBkaWUgT0lEIGlzdCBlcnN0ZWxsdC4gRGllIEFQSSBpc3QgYWJlciBuaWNodCByZWxvYWRlZC4gTWFuIHNpZWh0IGFsc28gbmljaHQsIGRh'));
	@fwrite($fp, base64_decode('c3MgZGllIE9JRCBlcnN0ZWxsdCB3dXJkZSwgdW5kIGVpbiBlcm5ldXRlciBrbGljayBhdWYgSW5zZXJ0IGb8aHJ0IHp1bSBQcmltYXJ5LUtleSBmZWhsZXIKLSBwcm9ibGVtOiB3ZW5uIGVpbmUgUkEgZWluZ2VsYWRlbiB3ZXJkZW4gbfZjaHRlLCBtdXNzIG1hbiAi'));
	@fwrite($fp, base64_decode('dXBkYXRlIiBkcvxja2VuIHVuZCBkaWUgT0lEIHdpcmQgYWxzIHVwZGF0ZWQgbWFya2llcnQKLSBiZWkgbWVocmVyZW4gaWRlbnRpZmllcm4ga2FubiBtYW4gbmljaHQgYmVzdGltbWVuLCB3ZWxjaGVyIGlkZW50aWZpZXIgZGVyIGJldm9yenVndGUgc2VpbiBzb2xs'));
	@fwrite($fp, base64_decode('ISEKLSBzaG93IGJpZyBpY29ucyBpbiB0aGUgY29udGVudCBwYW5lCi0gc2hvdyB3aG9pcyBsaW5rcyBvbmx5IGlmIGZvbGRlciAid2hvaXMvIiBleGlzdHMKCkZVVFVSRQotIGFkbWluOiBzb2xsIHdlbGxrbm93biBvaWRzIORuZGVybiBk/HJmZW4KLSBtb3ZlIG9p'));
	@fwrite($fp, base64_decode('ZCB0byBkaWZmZXJlbnQgYXJjCi0gYmVpIHNlaHIgZ3Jv32VuIGFyY3MgKHouQi4gUEVOKSBzb2xsZW4gbmljaHQgYWxsZSBhbmdlemVpZ3Qgd2VyZGVuCi0gdW50ZXJzdPx0enVuZyBm/HIgT1JTPwotIE1laHIgIkN1dHRpbmcgRWRnZSBUZWNobm9sb2dpZSIgc29s'));
	@fwrite($fp, base64_decode('bCBpbiBkaWVzZW0gUHJvamVrdCB6dW0gVHJhZ2VuIGtvbW1lbjogQUpBWCwgSlNPTiwgdm9sbHN0JmF1bWw7bmRpZyBVVEY4LCBDUlVEIGZyYW1ld29ya3MsIFBETywgSFRNTDUsIE1vYmlsZXMgRGVzaWduLCBQdXJlIENTUywgQXV0b2xvYWRpbmcsIE9iamVrdG9y'));
	@fwrite($fp, base64_decode('aWVudGllcnVuZyAoYWJlciBuaWNodCB1bmJlZGluZ3QgTVZDKSwgLi4uPGJyPgoKUkVKRUNURUQgSURFQVM6Ci0gc29sbHRlIGVzIG1laGVyZSBhZG1pbnMgZ2ViZW4/CgpJREVBUwotIHRoZXJlIHNob3VsZCBiZSBhIGZvcm0gd2hlcmUgYW4gUkEgY2FuIHJlcXVl'));
	@fwrite($fp, base64_decode('c3QgYW4gaW52aXRhdGlvbiwgZXZlbiBpZiB0aGUgc3VwZXJpb3IgUkEgZGlkIG5vdCBpbnZpdGUgdGhlbS4KICB0aGUgZmFjdCB0aGF0IGEgUkEgZXhpc3RzIGluIHRoZSBPYmplY3QgVGFibGUgc2hvdWxkIHBlcm1pdCB0aGUgUkEgdG8gaW52aXRlIHRoZWlyc2Vs'));
	@fwrite($fp, base64_decode('Zi4KLSBiZWltIHZlcmxhc3NlbiBkZXIgc2VpdGUsIHouYi4gd2VubiBtYW4gbGlua3MgYXVmIGVpbmVuIG5ldWVuIG1lbvxwdW5rdCBrbGlja3QsIHNvbGwgZWluZSBhYmZyYWdlIGtvbW1lbiwgb2IgbWFuIHNwZWljaGVybiBt9mNodGUKLSBtYWtlIGEgbGlzdCBv'));
	@fwrite($fp, base64_decode('ZiBPSURzIHRoYXQgZG8gbm90IGFzc2lnbiBBU04xL0lSSSBpZGVudGlmaWVycyAoZS5nLiBJQU5BIFBFTiBvciBWaWFUaGlua1NvZnQgRnJlZU9JRCksIHRoZW4gcmVqZWN0IGFueSBpZGVudGlmaWVyIHRoZSB1c2VyIHByb3ZpZGVzCi0gc2FuaXRpemUgSVB2NCwg'));
	@fwrite($fp, base64_decode('SVB2NiwgR1VJRCBkdXJpbmcgY3JlYXRpb24KCWJlaSBJUHY0IHVuZCBJUHY2OiAtIGlmIGl0IGlzIGEgc2luZ2xlIGhvc3QgYWRkcmVzcywgZG9uJ3QgcHV0IC8zMiBvciAvMTI4IHN1ZmZpeAoJICAgICAgICAgICAgICAgICAgIC0gc3RyaWtlIHVubmVjZXNzYXJ5'));
	@fwrite($fp, base64_decode('IGJpdHMgdGhhdCBhcmUgbm90IGRlZmluZWQgaW4gdGhlIG5ldG1hc2sgKGFsc28gYXQgdGhlIHdob2lzIG91dHB1dCkKClFVRVNUSU9OUzoKLSBzaG91bGQgdGhlIGNvbGxhdGlvbiBiZSBjYXNlIHNlbnNpdGl2ZSBvciBjYXNlIGluc2Vuc2l0aXZlPyBGb3IgSmF2'));
	@fwrite($fp, base64_decode('YSBwYWNrYWdlIG5hbWVzLCBpdCBzaG91bGQgYmUgY2FzZSBzZW5zdGl2aWUKLSB3b3J0ICJndWlkIiBvZGVyICJ1dWlkIiB2ZXJ3ZW5kZW4/Ci0gYml0IG9yIHRpbnlpbnQoMSkgPwoKR1VJRCBNYW5hZ2VtZW50Ci0gTGVhZiBub2RlcyAoR1VJRHMpIHNob3VsZCBz'));
	@fwrite($fp, base64_decode('aG93L2VkaXQgdGhlIFRpdGxlIGluIHRoZSBDUlVELCBzbyB5b3UgZG9udCBoYXZlIHRvIGNsaWNrIHRoZSBHVUlEIHRvIHNlZSB0aGUgdGl0bGUKLSBzZWx0c2FtZXIgYnVnOiB3ZW5uIGljaCBndWlkOm9pZHBsdXMgZWRpdGllcmUsIGRhbm4g9mZmbmV0IHNpY2gg'));
	@fwrite($fp, base64_decode('bGlua3MgZ3VpZDphY3RpdmVkaXJlY3RvcnkgYmVpbSBuZXVsYWRlbiBkZXMgYmF1bXMgbmFjaCBkZW0gdXBkYXRlLiBpcmdlbmR3aWUg9mZmbmV0IGVyIGRlbiB6dWxldHp0IGdl9mZmbmV0ZW4gbm9kZSBiZWltIHJlbG9hZCBub2NobWFsCi0gInJvb3QgZGV0ZWN0'));
	@fwrite($fp, base64_decode('aW9uIiBkb2VzIG5vdCB3b3JrLCBpLmUuIGF0IHRoZSBSQS1tZW51LCBhbGwgR1VJRHMgYXJlIHNob3duLCBldmVuIGlmIHRoZSBSQSBtYW5hZ2VzIHRoZSB3aG9sZSBjYXRlZ29yeSB3aXRoIHRoZSBHVUlEcyBpbnNpZGUuCgpHUzEgTWFuYWdlbWVudDoKLSBXaG9p'));
	@fwrite($fp, base64_decode('cyBtdXNzIGVpbmVuIEVpbnRyYWcgc293b2hsIG1pdCBhbHMgYXVjaCBvaG5lIFBy/GZzdW1tZSBmaW5kZW4ga/ZubmVuIChmaW5kRml0dGluZyBhbnBhc3Nlbj8pCg=='));
	@fclose($fp);
}
if (!is_file('TODO')) {
	warn('File has vanished! Will re-create it: TODO');
	writefile_1();
	if (!is_file('TODO')) {
		warn('File cannot be created (not existing): TODO');
	} else if (sha1_file('TODO') != '0cb2852bb214f77d0fd621afc70122b421bd4565') {
		warn('File cannot be created (checksum mismatch): TODO');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('TODO', 0644)) {
		warn('Could not change file permissions of TODO');
	}
} else {
	if (@sha1_file('TODO') !== '0cb2852bb214f77d0fd621afc70122b421bd4565') {
		if (@sha1_file('TODO') !== '1a25746dcd184acf11512f6d60350a08e644f753') {
			warn('File was modified. Will overwrite the changes now: TODO');
			$tmp = pathinfo('TODO');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('TODO')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('TODO', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('TODO') !== '0cb2852bb214f77d0fd621afc70122b421bd4565') {
			warn('File cannot be written (checksum mismatch): TODO');
		}
	}
}

// Files different: includes/uuid_utils.inc.php
function writefile_2() {
	@$fp = fopen('includes/uuid_utils.inc.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBVVUlEIHV0aWxzIGZvciBQSFAKLy8gQnkgRGFuaWVsIE1hcnNjaGFsbCwgVmlhVGhpbmtTb2Z0Ci8vIFZlcnNpb24gMjAxOS0wMy0xOQovLyBMaWNl'));
	@fwrite($fp, base64_decode('bnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSAyLjAgbGljZW5zZQovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCkBpbmNsdWRlX29uY2UgX19ESVJfXyAuICcvbWFjX3V0aWxzLmluYy5waHBzJzsK'));
	@fwrite($fp, base64_decode('CmRlZmluZSgnVVVJRF9OQU1FQkFTRURfTlNfRE5TJywgICAgICc2YmE3YjgxMC05ZGFkLTExZDEtODBiNC0wMGMwNGZkNDMwYzgnKTsKZGVmaW5lKCdVVUlEX05BTUVCQVNFRF9OU19VUkwnLCAgICAgJzZiYTdiODExLTlkYWQtMTFkMS04MGI0LTAwYzA0ZmQ0MzBj'));
	@fwrite($fp, base64_decode('OCcpOwpkZWZpbmUoJ1VVSURfTkFNRUJBU0VEX05TX09JRCcsICAgICAnNmJhN2I4MTItOWRhZC0xMWQxLTgwYjQtMDBjMDRmZDQzMGM4Jyk7CmRlZmluZSgnVVVJRF9OQU1FQkFTRURfTlNfWDUwMF9ETicsICc2YmE3YjgxNC05ZGFkLTExZDEtODBiNC0wMGMwNGZk'));
	@fwrite($fp, base64_decode('NDMwYzgnKTsKCmZ1bmN0aW9uIGdlbl91dWlkX21kNV9uYW1lc3BhY2UoJG5hbWVzcGFjZV91dWlkLCAkbmFtZSkgewoJJG5hbWVzcGFjZV91dWlkID0gc3RyX3JlcGxhY2UoJy0nLCAnJywgJG5hbWVzcGFjZV91dWlkKTsKCSRuYW1lc3BhY2VfdXVpZCA9IGhleDJi'));
	@fwrite($fp, base64_decode('aW4oJG5hbWVzcGFjZV91dWlkKTsKCgkkaGFzaCA9IG1kNSgkbmFtZXNwYWNlX3V1aWQuJG5hbWUpOwoKCSRoYXNoWzEyXSA9ICczJzsgLy8gTUQ1CgkkaGFzaFsxNl0gPSBoZXhkZWMoJGhhc2hbMTZdKSAmIDB4MyB8IDB4ODsgLy8gbmFtZSBiYXNlZAoKCXJldHVy'));
	@fwrite($fp, base64_decode('biBzdWJzdHIoJGhhc2gsICAwLCA4KS4nLScuCgkgICAgICAgc3Vic3RyKCRoYXNoLCAgOCwgNCkuJy0nLgoJICAgICAgIHN1YnN0cigkaGFzaCwgMTIsIDQpLictJy4KCSAgICAgICBzdWJzdHIoJGhhc2gsIDE2LCA0KS4nLScuCgkgICAgICAgc3Vic3RyKCRoYXNo'));
	@fwrite($fp, base64_decode('LCAyMCwgMTIpOwp9CgpmdW5jdGlvbiBnZW5fdXVpZF9zaGExX25hbWVzcGFjZSgkbmFtZXNwYWNlX3V1aWQsICRuYW1lKSB7CgkkbmFtZXNwYWNlX3V1aWQgPSBzdHJfcmVwbGFjZSgnLScsICcnLCAkbmFtZXNwYWNlX3V1aWQpOwoJJG5hbWVzcGFjZV91dWlkID0g'));
	@fwrite($fp, base64_decode('aGV4MmJpbigkbmFtZXNwYWNlX3V1aWQpOwoKCSRoYXNoID0gc2hhMSgkbmFtZXNwYWNlX3V1aWQuJG5hbWUpOwoKCSRoYXNoWzEyXSA9ICc1JzsgLy8gU0hBMQoJJGhhc2hbMTZdID0gaGV4ZGVjKCRoYXNoWzE2XSkgJiAweDMgfCAweDg7IC8vIG5hbWUgYmFzZWQK'));
	@fwrite($fp, base64_decode('CglyZXR1cm4gc3Vic3RyKCRoYXNoLCAgMCwgOCkuJy0nLgoJICAgICAgIHN1YnN0cigkaGFzaCwgIDgsIDQpLictJy4KCSAgICAgICBzdWJzdHIoJGhhc2gsIDEyLCA0KS4nLScuCgkgICAgICAgc3Vic3RyKCRoYXNoLCAxNiwgNCkuJy0nLgoJICAgICAgIHN1YnN0'));
	@fwrite($fp, base64_decode('cigkaGFzaCwgMjAsIDEyKTsKfQoKZnVuY3Rpb24gdXVpZF92YWxpZCgkdXVpZCkgewoJJHV1aWQgPSBzdHJfcmVwbGFjZShhcnJheSgnLScsICd7JywgJ30nKSwgJycsICR1dWlkKTsKCSR1dWlkID0gc3RydG91cHBlcigkdXVpZCk7CgoJaWYgKHN0cmxlbigkdXVp'));
	@fwrite($fp, base64_decode('ZCkgIT0gMzIpIHJldHVybiBmYWxzZTsKCgkkdXVpZCA9IHByZWdfcmVwbGFjZSgnQFswLTlBLUZdQCcsICcnLCAkdXVpZCk7CgoJcmV0dXJuICgkdXVpZCA9PSAnJyk7Cn0KCiMgVE9ETzogbmljaHQgZWNobwpmdW5jdGlvbiB1dWlkX2luZm8oJHV1aWQpIHsKCWlm'));
	@fwrite($fp, base64_decode('ICghdXVpZF92YWxpZCgkdXVpZCkpIHJldHVybiBmYWxzZTsKCgkjICR1dWlkID0gc3RyX3JlcGxhY2UoYXJyYXkoJy0nLCAneycsICd9JyksICcnLCAkdXVpZCk7CgkkdXVpZCA9IHN0cnRvdXBwZXIoJHV1aWQpOwoJJHV1aWQgPSBwcmVnX3JlcGxhY2UoJ0BbXjAt'));
	@fwrite($fp, base64_decode('OUEtRl1AJywgJycsICR1dWlkKTsKCgkkeCA9IGhleGRlYyhzdWJzdHIoJHV1aWQsIDE2LCAxKSk7CgkgICAgIGlmICgkeCA+PSAxNCAvKiAxMTEwICovKSAkdmFyaWFudCA9IDM7CgllbHNlIGlmICgkeCA+PSAxMiAvKiAxMTAwICovKSAkdmFyaWFudCA9IDI7Cgll'));
	@fwrite($fp, base64_decode('bHNlIGlmICgkeCA+PSAgOCAvKiAxMDAwICovKSAkdmFyaWFudCA9IDE7CgllbHNlIGlmICgkeCA+PSAgMCAvKiAwMDAwICovKSAkdmFyaWFudCA9IDA7CgoKCXN3aXRjaCAoJHZhcmlhbnQpIHsKCQljYXNlIDA6CgkJCWVjaG8gc3ByaW50ZigiJS0yNHMgJXNcbiIs'));
	@fwrite($fp, base64_decode('ICJWYXJpYW50OiIsICJbMHh4XSBOQ1MgKHJlc2VydmVkIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5KSIpOwoKCQkJLyoKCQkJICogSW50ZXJuYWwgc3RydWN0dXJlIG9mIHZhcmlhbnQgIzAgVVVJRHMKCQkJICoKCQkJICogVGhlIGZpcnN0IDYgb2N0ZXRzIGFy'));
	@fwrite($fp, base64_decode('ZSB0aGUgbnVtYmVyIG9mIDQgdXNlYyB1bml0cyBvZiB0aW1lIHRoYXQgaGF2ZQoJCQkgKiBwYXNzZWQgc2luY2UgMS8xLzgwIDAwMDAgR01ULiAgVGhlIG5leHQgMiBvY3RldHMgYXJlIHJlc2VydmVkIGZvcgoJCQkgKiBmdXR1cmUgdXNlLiAgVGhlIG5leHQgb2N0'));
	@fwrite($fp, base64_decode('ZXQgaXMgYW4gYWRkcmVzcyBmYW1pbHkuICBUaGUgbmV4dCA3IG9jdGV0cwoJCQkgKiBhcmUgYSBob3N0IElEIGluIHRoZSBmb3JtIGFsbG93ZWQgYnkgdGhlIHNwZWNpZmllZCBhZGRyZXNzIGZhbWlseS4KCQkJICoKCQkJICogTm90ZSB0aGF0IHdoaWxlIHRoZSBm'));
	@fwrite($fp, base64_decode('YW1pbHkgZmllbGQgKG9jdGV0IDgpIHdhcyBvcmlnaW5hbGx5IGNvbmNlaXZlZAoJCQkgKiBvZiBhcyBiZWluZyBhYmxlIHRvIGhvbGQgdmFsdWVzIGluIHRoZSByYW5nZSBbMC4uMjU1XSwgb25seSBbMC4uMTNdCgkJCSAqIHdlcmUgZXZlciB1c2VkLiAgVGh1cywg'));
	@fwrite($fp, base64_decode('dGhlIDIgTVNCIG9mIHRoaXMgZmllbGQgYXJlIGFsd2F5cyAwIGFuZCBhcmUKCQkJICogdXNlZCB0byBkaXN0aW5ndWlzaCBvbGQgYW5kIGN1cnJlbnQgVVVJRCBmb3Jtcy4KCQkJICoKCQkJICogKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t'));
	@fwrite($fp, base64_decode('LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKwoJCQkgKiB8ICAgICAgICAgICAgICAgICAgICBoaWdoIDMyIGJpdHMgb2YgdGltZSAgICAgICAgICAgICAgICAgICAgICB8ICAwLTMgIC50aW1lX2hpZ2gKCQkJICogKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t'));
	@fwrite($fp, base64_decode('LS0rLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCQkgKiB8ICAgICBsb3cgMTYgYml0cyBvZiB0aW1lICAgICAgIHwgIDQtNSAgICAgICAgICAgICAgIC50aW1lX2xvdwoJCQkgKiArLS0tLS0tLSstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsKCQkJICog'));
	@fwrite($fp, base64_decode('fCAgICAgICAgIHJlc2VydmVkICAgICAgICAgICAgICB8ICA2LTcgICAgICAgICAgICAgICAucmVzZXJ2ZWQKCQkJICogKy0tLS0tLS0tLS0tLS0tLSstLS0tLS0tLS0tLS0tLS0rCgkJCSAqIHwgICAgZmFtaWx5ICAgICB8ICAgOCAgICAgICAgICAgICAgICAgICAg'));
	@fwrite($fp, base64_decode('ICAgICAgICAgICAgLmZhbWlseQoJCQkgKiArLS0tLS0tLS0tLS0tLS0tKy0tLS0tLS0tLS0uLi4tLS0tLSsKCQkJICogfCAgICAgICAgICAgIG5vZGUgSUQgICAgICAgICAgICAgICB8ICA5LTE2ICAgICAgICAgICAubm9kZQoJCQkgKiArLS0tLS0tLS0tLS0tLS0t'));
	@fwrite($fp, base64_decode('LS0tLS0tLS0tLS0uLi4tLS0tLSsKCQkJICoKCQkJICovCgoJCQkvLyBFeGFtcGxlIG9mIGFuIFVVSUQ6IDMzM2EyMjc2LTAwMDAtMDAwMC0wZDAwLTAwODA5YzAwMDAwMAoKCQkJIyBUT0RPOiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2Nqc3YvdXVpZC9ibG9iL21h'));
	@fwrite($fp, base64_decode('c3Rlci9Eb2MKCgkJCSMgVGltZXN0YW1wOiBDb3VudCBvZiA0dXMgaW50ZXJ2YWxzIHNpbmNlIDAxIEphbiAxOTgwIDAwOjAwOjAwIEdNVAoJCQkjIDEvMCwwMDAwMDQgPSAyNTAwMDAKCQkJIyBTZWNvbmRzIGJldHdlZW4gMTk3MCBhbmQgMTk4MCA6IDMxNTUzMjgw'));
	@fwrite($fp, base64_decode('MAoJCQkjIDI1MDAwMCozMTU1MzI4MDA9Nzg4ODMyMDAwMDAwMDAKCQkJJHRpbWVzdGFtcCA9IHN1YnN0cigkdXVpZCwgMCwgMTIpOwoJCQkkdHMgPSBnbXBfaW5pdCgkdGltZXN0YW1wLCAxNik7CgkJCSR0cyA9IGdtcF9hZGQoJHRzLCBnbXBfaW5pdCgiNzg4ODMy'));
	@fwrite($fp, base64_decode('MDAwMDAwMDAiKSk7CgkJCSRtcyA9IGdtcF9tb2QoJHRzLCBnbXBfaW5pdCgiMjUwMDAwIikpOyAjIFRPRE86IGdpYnQgZXMga2VpbiBkaXZtb2Q/CgkJCSR0cyA9IGdtcF9kaXYoJHRzLCBnbXBfaW5pdCgiMjUwMDAwIikpOwoJCQkkdHMgPSBnbXBfc3RydmFsKCR0'));
	@fwrite($fp, base64_decode('cyk7CgkJCSRtcyA9IGdtcF9zdHJ2YWwoJG1zKTsKCQkJJHRzID0gZ21kYXRlKCdZLW0tZCBIOmk6cycsICR0cyk7CgkJCWVjaG8gc3ByaW50ZigiJS0yNHMgJXNcbiIsICJUaW1lc3RhbXA6IiwgIlsweCR0aW1lc3RhbXBdICR0cyciLnN0cl9wYWQoJG1zLCA2LCAn'));
	@fwrite($fp, base64_decode('MCcsIFNUUl9QQURfTEVGVCkuJyBHTVQnKTsKCgkJCSRyZXNlcnZlZCA9IHN1YnN0cigkdXVpZCwgMTIsIDQpOwoJCQllY2hvIHNwcmludGYoIiUtMjRzICVzXG4iLCAiUmVzZXJ2ZWQ6IiwgIjB4JHJlc2VydmVkIik7CgoJCQkjIEZhbWlseSAxMyAoZGRzKSBsb29r'));
	@fwrite($fp, base64_decode('cyBsaWtlIG5vZGUgaXMgMDAgfCBubm5ubm4gMDAwMDAwLgoJCQkjIEZhbWlseSAyIGlzIHByZXN1bWFibHkgKGlwKS4KCQkJIyBOb3Qgc3VyZSBpZiBhbnl0aGluZyBlbHNlIHdhcyB1c2VkLgoJCQkkZmFtaWx5X2hleCA9IHN1YnN0cigkdXVpZCwgMTYsIDIpOwoJ'));
	@fwrite($fp, base64_decode('CQkkZmFtaWx5X2RlYyA9IGhleGRlYygkZmFtaWx5X2hleCk7CgkJCWlmICgkZmFtaWx5X2RlYyA9PSAyKSB7CgkJCQkkZmFtaWx5XyA9ICdJUCc7CgkJCX0gZWxzZSBpZiAoJGZhbWlseV9kZWMgPT0gMTMpIHsKCQkJCSRmYW1pbHlfID0gJ0REUyAoRGF0YSBMaW5r'));
	@fwrite($fp, base64_decode('KSc7CgkJCX0gZWxzZSB7CgkJCQkkZmFtaWx5XyA9ICJVbmtub3duICgkZmFtaWx5X2RlYykiOyAjIFRPRE86IEZpbmQgb3V0IGFsbCBmYW1pbGllcyBbMC4uMTNdCgkJCX0KCQkJZWNobyBzcHJpbnRmKCIlLTI0cyAlc1xuIiwgIkZhbWlseToiLCAiWzB4JGZhbWls'));
	@fwrite($fp, base64_decode('eV9oZXggPSAkZmFtaWx5X2RlY10gJGZhbWlseV8iKTsKCgkJCSRub2RlaWQgPSBzdWJzdHIoJHV1aWQsIDE4LCAxNCk7CgkJCWVjaG8gc3ByaW50ZigiJS0yNHMgJXNcbiIsICJOb2RlIElEOiIsICIweCRub2RlaWQiKTsKCQkJIyBUT0RPOiBpbnRlcnByZXRlIG5v'));
	@fwrite($fp, base64_decode('ZGUgaWQgKHRoZSBmYW1pbHkgc3BlY2lmaWVzIGl0KQoKCQkJYnJlYWs7CgkJY2FzZSAxOgoJCQllY2hvIHNwcmludGYoIiUtMjRzICVzXG4iLCAiVmFyaWFudDoiLCAiWzEweF0gUkZDIDQxMjIgKExlYWNoLU1lYWxsaW5nLVNhbHopIik7CgoJCQkkdmVyc2lvbiA9'));
	@fwrite($fp, base64_decode('IGhleGRlYyhzdWJzdHIoJHV1aWQsIDEyLCAxKSk7CgkJCXN3aXRjaCAoJHZlcnNpb24pIHsKCQkJCWNhc2UgMToKCQkJCQllY2hvIHNwcmludGYoIiUtMjRzICVzXG4iLCAiVmVyc2lvbjoiLCAiWzFdIFRpbWUtYmFzZWQgd2l0aCB1bmlxdWUgcmFuZG9tIGhvc3Qg'));
	@fwrite($fp, base64_decode('aWRlbnRpZmllciIpOwoKCQkJCQkjIFRpbWVzdGFtcDogQ291bnQgb2YgMTAwbnMgaW50ZXJ2YWxzIHNpbmNlIDE1IE9jdCAxNTgyIDAwOjAwOjAwCgkJCQkJIyAxLzAsMDAwMDAwMSA9IDEwMDAwMDAwCgkJCQkJJHRpbWVzdGFtcCA9IHN1YnN0cigkdXVpZCwgMTMs'));
	@fwrite($fp, base64_decode('IDMpLnN1YnN0cigkdXVpZCwgOCwgNCkuc3Vic3RyKCR1dWlkLCAwLCA4KTsKCQkJCQkkdHMgPSBnbXBfaW5pdCgkdGltZXN0YW1wLCAxNik7CgkJCQkJJHRzID0gZ21wX3N1YigkdHMsIGdtcF9pbml0KCIxMjIxOTI5MjgwMDAwMDAwMDAiKSk7CgkJCQkJJG1zID0g'));
	@fwrite($fp, base64_decode('Z21wX21vZCgkdHMsIGdtcF9pbml0KCIxMDAwMDAwMCIpKTsgIyBUT0RPOiBnaWJ0IGVzIGtlaW4gZGl2bW9kPwoJCQkJCSR0cyA9IGdtcF9kaXYoJHRzLCBnbXBfaW5pdCgiMTAwMDAwMDAiKSk7CgkJCQkJJHRzID0gZ21wX3N0cnZhbCgkdHMpOwoJCQkJCSRtcyA9'));
	@fwrite($fp, base64_decode('IGdtcF9zdHJ2YWwoJG1zKTsKCQkJCQkkdHMgPSBnbWRhdGUoJ1ktbS1kIEg6aTpzJywgJHRzKTsKCQkJCQllY2hvIHNwcmludGYoIiUtMjRzICVzXG4iLCAiVGltZXN0YW1wOiIsICJbMHgkdGltZXN0YW1wXSAkdHMnIi5zdHJfcGFkKCRtcywgNywgJzAnLCBTVFJf'));
	@fwrite($fp, base64_decode('UEFEX0xFRlQpLicgR01UJyk7CgoJCQkJCSR4ID0gaGV4ZGVjKHN1YnN0cigkdXVpZCwgMTYsIDQpKTsKCQkJCQkkeCA9ICR4IF4gMHg4MDAwOwoJCQkJCSR5ID0gZGVjaGV4KCR4KTsKCQkJCQllY2hvIHNwcmludGYoIiUtMjRzICVzXG4iLCAiQ2xvY2sgSUQ6Iiwg'));
	@fwrite($fp, base64_decode('JzB4Jy5zdHJ0b3VwcGVyKCR5KS4iID0gJHgiKTsKCgkJCQkJJHggPSBzdWJzdHIoJHV1aWQsIDIwLCAxMik7CgkJCQkJJG5vZGVpZCA9ICcnOwoJCQkJCWZvciAoJGk9MDsgJGk8NjsgJGkrKykgewoJCQkJCQkkbm9kZWlkIC49IHN1YnN0cigkeCwgJGkqMiwgMik7'));
	@fwrite($fp, base64_decode('CgkJCQkJCWlmICgkaSAhPSA1KSAkbm9kZWlkIC49ICc6JzsKCQkJCQl9CgkJCQkJZWNobyBzcHJpbnRmKCIlLTI0cyAlc1xuIiwgIk5vZGUgSUQ6IiwgIiRub2RlaWQiKTsKCgkJCQkJaWYgKGZ1bmN0aW9uX2V4aXN0cygnZGVjb2RlX21hYycpKSB7CgkJCQkJCWVj'));
	@fwrite($fp, base64_decode('aG8gIlxuSW4gY2FzZSB0aGF0IHRoaXMgTm9kZSBJRCBpcyBhIE1BQyBhZGRyZXNzLCBoZXJlIGlzIHRoZSBpbnRlcnByZXRhdGlvbiBvZiB0aGF0IE1BQyBhZGRyZXNzOlxuIjsKCQkJCQkJZWNobyBkZWNvZGVfbWFjKCRub2RlaWQpOwoJCQkJCX0KCgkJCQkJYnJl'));
	@fwrite($fp, base64_decode('YWs7CgkJCQljYXNlIDI6CgkJCQkJZWNobyBzcHJpbnRmKCIlLTI0cyAlc1xuIiwgIlZlcnNpb246IiwgIlsyXSBEQ0UgU2VjdXJpdHkgdmVyc2lvbiAod2l0aCBQT1NJWCBVSURzKSIpOwoKCQkJCQkjIFRPRE86IGlzIHRoYXQgY29ycmVjdD8/PwoKCQkJCQkjIFRo'));
	@fwrite($fp, base64_decode('ZSB0aW1lX2xvdyBmaWVsZCAod2hpY2ggcmVwcmVzZW50cyBhbiBpbnRlZ2VyIGluIHRoZSByYW5nZSBbMCwgMjMyLTFdKSBpcyBpbnRlcnByZXRlZCBhcyBhIGxvY2FsLUlEOyB0aGF0IGlzLCBhbiBpZGVudGlmaWVyICh3aXRoaW4gdGhlIGRvbWFpbiBzcGVjaWZp'));
	@fwrite($fp, base64_decode('ZWQgYnkgY2xvY2tfc2VxX2xvdykgbWVhbmluZ2Z1bCB0byB0aGUgbG9jYWwgaG9zdC4gSW4gdGhlIHBhcnRpY3VsYXIgY2FzZSBvZiBhIFBPU0lYIGhvc3QsIHdoZW4gY29tYmluZWQgd2l0aCBhIFBPU0lYIFVJRCBvciBQT1NJWCBHSUQgZG9tYWluIGluIHRoZSBj'));
	@fwrite($fp, base64_decode('bG9ja19zZXFfbG93IGZpZWxkIChhYm92ZSksIHRoZSB0aW1lX2xvdyBmaWVsZCByZXByZXNlbnRzIGEgUE9TSVggVUlEIG9yIFBPU0lYIEdJRCwgcmVzcGVjdGl2ZWx5LiAKCQkJCQkkeCA9IHN1YnN0cigkdXVpZCwgMCwgOCk7CgkJCQkJZWNobyBzcHJpbnRmKCIl'));
	@fwrite($fp, base64_decode('LTI0cyAlc1xuIiwgIkxvY2FsIElEOiIsICIweCR4Iik7CgoKCQkJCQkjIFRoZSBjbG9ja19zZXFfbG93IGZpZWxkICh3aGljaCByZXByZXNlbnRzIGFuIGludGVnZXIgaW4gdGhlIHJhbmdlIFswLCAyOC0xXSkgaXMgaW50ZXJwcmV0ZWQgYXMgYSBsb2NhbCBkb21h'));
	@fwrite($fp, base64_decode('aW4gKGFzIHJlcHJlc2VudGVkIGJ5IHNlY19yZ3lfZG9tYWluX3Q7IHNlZSBzZWNfcmd5X2RvbWFpbl90ICk7IHRoYXQgaXMsIGFuIGlkZW50aWZpZXIgZG9tYWluIG1lYW5pbmdmdWwgdG8gdGhlIGxvY2FsIGhvc3QuIChOb3RlIHRoYXQgdGhlIGRhdGEgdHlwZSBz'));
	@fwrite($fp, base64_decode('ZWNfcmd5X2RvbWFpbl90IGNhbiBwb3RlbnRpYWxseSBob2xkIHZhbHVlcyBvdXRzaWRlIHRoZSByYW5nZSBbMCwgMjgtMV07IGhvd2V2ZXIsIHRoZSBvbmx5IHZhbHVlcyBjdXJyZW50bHkgcmVnaXN0ZXJlZCBhcmUgaW4gdGhlIHJhbmdlIFswLCAyXSwgc28gdGhp'));
	@fwrite($fp, base64_decode('cyB0eXBlIG1pc21hdGNoIGlzIG5vdCBzaWduaWZpY2FudC4pIEluIHRoZSBwYXJ0aWN1bGFyIGNhc2Ugb2YgYSBQT1NJWCBob3N0LCB0aGUgdmFsdWUgc2VjX3JneV9kb21haW5fcGVyc29uIGlzIHRvIGJlIGludGVycHJldGVkIGFzIHRoZSAiUE9TSVggVUlEIGRv'));
	@fwrite($fp, base64_decode('bWFpbiIsIGFuZCB0aGUgdmFsdWUgc2VjX3JneV9kb21haW5fZ3JvdXAgaXMgdG8gYmUgaW50ZXJwcmV0ZWQgYXMgdGhlICJQT1NJWCBHSUQgZG9tYWluIi4KCQkJCQkkeCA9IHN1YnN0cigkdXVpZCwgMCwgMTgsIDIpOwoJCQkJCWVjaG8gc3ByaW50ZigiJS0yNHMg'));
	@fwrite($fp, base64_decode('JXNcbiIsICJMb2NhbCBEb21haW46IiwgIjB4JHgiKTsKCgoJCQkJCSMgVGltZXN0YW1wOiBDb3VudCBvZiAxMDBucyBpbnRlcnZhbHMgc2luY2UgMTUgT2N0IDE1ODIgMDA6MDA6MDAKCQkJCQkjIDEvMCwwMDAwMDAxID0gMTAwMDAwMDAKCQkJCQkkdGltZXN0YW1w'));
	@fwrite($fp, base64_decode('ID0gc3Vic3RyKCR1dWlkLCAxMywgMykuc3Vic3RyKCR1dWlkLCA4LCA0KS4nMDAwMDAwMDAnOyAjIFRPRE86IGlzdCBkYXMgT0sgc28/Pz8/CgkJCQkJJHRzID0gZ21wX2luaXQoJHRpbWVzdGFtcCwgMTYpOwoJCQkJCSR0cyA9IGdtcF9zdWIoJHRzLCBnbXBfaW5p'));
	@fwrite($fp, base64_decode('dCgiMTIyMTkyOTI4MDAwMDAwMDAwIikpOwoJCQkJCSRtcyA9IGdtcF9tb2QoJHRzLCBnbXBfaW5pdCgiMTAwMDAwMDAiKSk7ICMgVE9ETzogZ2lidCBlcyBrZWluIGRpdm1vZD8KCQkJCQkkdHMgPSBnbXBfZGl2KCR0cywgZ21wX2luaXQoIjEwMDAwMDAwIikpOwoJ'));
	@fwrite($fp, base64_decode('CQkJCSR0cyA9IGdtcF9zdHJ2YWwoJHRzKTsKCQkJCQkkbXMgPSBnbXBfc3RydmFsKCRtcyk7CgkJCQkJJHRzID0gZ21kYXRlKCdZLW0tZCBIOmk6cycsICR0cyk7CgkJCQkJZWNobyBzcHJpbnRmKCIlLTI0cyAlc1xuIiwgIlRpbWVzdGFtcDoiLCAiWzB4JHRpbWVz'));
	@fwrite($fp, base64_decode('dGFtcF0gJHRzJyIuc3RyX3BhZCgkbXMsIDcsICcwJywgU1RSX1BBRF9MRUZUKS4nIEdNVCcpOwoKCQkJCQkkeCA9IGhleGRlYyhzdWJzdHIoJHV1aWQsIDE2LCAyKS4nMDAnKTsgIyBUT0RPOiBpc3QgZGFzIE9LIHNvPz8/PwoJCQkJCSR4ID0gJHggXiAweDgwMDA7'));
	@fwrite($fp, base64_decode('CgkJCQkJJHkgPSBkZWNoZXgoJHgpOwoJCQkJCWVjaG8gc3ByaW50ZigiJS0yNHMgJXNcbiIsICJDbG9jayBJRDoiLCAiMHgkeSA9ICR4Iik7CgoJCQkJCSR4ID0gc3Vic3RyKCR1dWlkLCAyMCwgMTIpOwoJCQkJCSRub2RlaWQgPSAnJzsKCQkJCQlmb3IgKCRpPTA7'));
	@fwrite($fp, base64_decode('ICRpPDY7ICRpKyspIHsKCQkJCQkJJG5vZGVpZCAuPSBzdWJzdHIoJHgsICRpKjIsIDIpOwoJCQkJCQlpZiAoJGkgIT0gNSkgJG5vZGVpZCAuPSAnOic7CgkJCQkJfQoJCQkJCWVjaG8gc3ByaW50ZigiJS0yNHMgJXNcbiIsICJOb2RlIElEOiIsICIkbm9kZWlkIik7'));
	@fwrite($fp, base64_decode('CgoJCQkJCWlmIChmdW5jdGlvbl9leGlzdHMoJ2RlY29kZV9tYWMnKSkgewoJCQkJCQllY2hvICJcbkluIGNhc2UgdGhhdCB0aGlzIE5vZGUgSUQgaXMgYSBNQUMgYWRkcmVzcywgaGVyZSBpcyB0aGUgaW50ZXJwcmV0YXRpb24gb2YgdGhhdCBNQUMgYWRkcmVzczpc'));
	@fwrite($fp, base64_decode('biI7CgkJCQkJCWVjaG8gZGVjb2RlX21hYygkbm9kZWlkKTsKCQkJCQl9CgoJCQkJCWJyZWFrOwoJCQkJY2FzZSAzOgoJCQkJCWVjaG8gc3ByaW50ZigiJS0yNHMgJXNcbiIsICJWZXJzaW9uOiIsICJbM10gTmFtZS1iYXNlZCAoTUQ1IGhhc2gpIik7CgoJCQkJCSMg'));
	@fwrite($fp, base64_decode('VE9ETwoKCQkJCQlicmVhazsKCQkJCWNhc2UgNDoKCQkJCQllY2hvIHNwcmludGYoIiUtMjRzICVzXG4iLCAiVmVyc2lvbjoiLCAiWzRdIFJhbmRvbSIpOwoKCQkJCQkkcmFuZCA9ICcnOwoJCQkJCWZvciAoJGk9MDsgJGk8MTY7ICRpKyspIHsKCQkJCQkJJGJpbiA9'));
	@fwrite($fp, base64_decode('IGJhc2VfY29udmVydChzdWJzdHIoJHV1aWQsICRpKjIsIDIpLCAxNiwgMik7CgkJCQkJCSRiaW4gPSBzdHJfcGFkKCRiaW4sIDgsICIwIiwgU1RSX1BBRF9MRUZUKTsKCgkJCQkJCWlmICgkaSA9PSA2KSB7CgkJCQkJCQkkYmluWzBdID0gJ3gnOwoJCQkJCQkJJGJp'));
	@fwrite($fp, base64_decode('blsxXSA9ICd4JzsKCQkJCQkJfSBlbHNlIGlmICgkaSA9PSA4KSB7CgkJCQkJCQkkYmluWzBdID0gJ3gnOwoJCQkJCQkJJGJpblsxXSA9ICd4JzsKCQkJCQkJCSRiaW5bMl0gPSAneCc7CgkJCQkJCQkkYmluWzNdID0gJ3gnOwoJCQkJCQl9CgoJCQkJCQkkcmFuZCAu'));
	@fwrite($fp, base64_decode('PSAiJGJpbiAiOwoJCQkJCX0KCgkJCQkJZWNobyBzcHJpbnRmKCIlLTI0cyAlc1xuIiwgIlJhbmRvbSBiaXRzOiIsIHRyaW0oJHJhbmQpKTsKCgkJCQkJYnJlYWs7CgkJCQljYXNlIDU6CgkJCQkJZWNobyBzcHJpbnRmKCIlLTI0cyAlc1xuIiwgIlZlcnNpb246Iiwg'));
	@fwrite($fp, base64_decode('Ils1XSBOYW1lLWJhc2VkIChTSEEtMSBoYXNoKSIpOwoKCQkJCQkjIFRPRE8KCgkJCQkJYnJlYWs7CgkJCQlkZWZhdWx0OgoJCQkJCWVjaG8gc3ByaW50ZigiJS0yNHMgJXNcbiIsICJWZXJzaW9uOiIsICJbJHZlcnNpb25dIFVua25vd24iKTsKCQkJCQlicmVhazsK'));
	@fwrite($fp, base64_decode('CQkJfQoKCQkJYnJlYWs7CgkJY2FzZSAyOgoJCQllY2hvIHNwcmludGYoIiUtMjRzICVzXG4iLCAiVmFyaWFudDoiLCAiWzExMF0gUmVzZXJ2ZWQgZm9yIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbiIpOwoKCQkJIyBUT0RPCgoJCQlicmVhazsKCQljYXNlIDM6CgkJCWVj'));
	@fwrite($fp, base64_decode('aG8gc3ByaW50ZigiJS0yNHMgJXNcbiIsICJWYXJpYW50OiIsICJbMTExXSBSZXNlcnZlZCBmb3IgZnV0dXJlIHVzZSIpOwoJCQlicmVhazsKCX0KfQoKZnVuY3Rpb24gdXVpZF9jYW5vbml6ZSgkdXVpZCkgewoJaWYgKCF1dWlkX3ZhbGlkKCR1dWlkKSkgcmV0dXJu'));
	@fwrite($fp, base64_decode('IGZhbHNlOwoJcmV0dXJuIG9pZF90b191dWlkKHV1aWRfdG9fb2lkKCR1dWlkKSk7Cn0KCmZ1bmN0aW9uIG9pZF90b191dWlkKCRvaWQpIHsKCWlmICghaXNfdXVpZF9vaWQoJG9pZCkpIHJldHVybiBmYWxzZTsKCglpZiAoJG9pZFswXSA9PSAnLicpIHsKCQkkb2lk'));
	@fwrite($fp, base64_decode('ID0gc3Vic3RyKCRvaWQsIDEpOwoJfQoJJGFyeSA9IGV4cGxvZGUoJy4nLCAkb2lkKTsKCSR2YWwgPSAkYXJ5WzJdOwoKCSR4ID0gZ21wX2luaXQoJHZhbCwgMTApOwoJJHkgPSBnbXBfc3RydmFsKCR4LCAxNik7CgkkeSA9IHN0cl9wYWQoJHksIDMyLCAiMCIsIFNU'));
	@fwrite($fp, base64_decode('Ul9QQURfTEVGVCk7CglyZXR1cm4gc3Vic3RyKCR5LCAgMCwgOCkuJy0nLgoJICAgICAgIHN1YnN0cigkeSwgIDgsIDQpLictJy4KCSAgICAgICBzdWJzdHIoJHksIDEyLCA0KS4nLScuCgkgICAgICAgc3Vic3RyKCR5LCAxNiwgNCkuJy0nLgoJICAgICAgIHN1YnN0'));
	@fwrite($fp, base64_decode('cigkeSwgMjAsIDEyKTsKfQoKZnVuY3Rpb24gaXNfdXVpZF9vaWQoJG9pZCwgJG9ubHlfYWxsb3dfcm9vdD1mYWxzZSkgewoJaWYgKChzdWJzdHIoJG9pZCwgMCwgNSkgIT0gJzIuMjUuJykgJiYgKHN1YnN0cigkb2lkLCAwLCA2KSAhPSAnLjIuMjUuJykpIHJldHVy'));
	@fwrite($fp, base64_decode('biBmYWxzZTsKCglpZiAoJG9pZFswXSA9PSAnLicpICRvaWQgPSBzdWJzdHIoJG9pZCwgMSk7CgoJJGFyeSA9IGV4cGxvZGUoJy4nLCAkb2lkKTsKCglpZiAoJG9ubHlfYWxsb3dfcm9vdCkgewoJCWlmIChjb3VudCgkYXJ5KSAhPSAzKSByZXR1cm4gZmFsc2U7Cgl9'));
	@fwrite($fp, base64_decode('CgoJZm9yICgkaT0yOyAkaTxjb3VudCgkYXJ5KTsgJGkrKykgewoJCSR2ID0gJGFyeVskaV07CgkJaWYgKCFpc19udW1lcmljKCR2KSkgcmV0dXJuIGZhbHNlOwoJCWlmICgkdiA8IDApIHJldHVybiBmYWxzZTsKCX0KCglyZXR1cm4gdHJ1ZTsKfQoKZnVuY3Rpb24g'));
	@fwrite($fp, base64_decode('dXVpZF90b19vaWQoJHV1aWQpIHsKCWlmICghdXVpZF92YWxpZCgkdXVpZCkpIHJldHVybiBmYWxzZTsKCgkkdXVpZCA9IHN0cl9yZXBsYWNlKGFycmF5KCctJywgJ3snLCAnfScpLCAnJywgJHV1aWQpOwoJJHggPSBnbXBfaW5pdCgkdXVpZCwgMTYpOwoJcmV0dXJu'));
	@fwrite($fp, base64_decode('ICcyLjI1LicuZ21wX3N0cnZhbCgkeCwgMTApOyAjIFRPRE86IHBhcmFtZXRlciBtaXQgb2RlciBvaG5lIGxlYWRpbmcgZG90Cn0KCmZ1bmN0aW9uIF9nZW5fdXVpZF92NCgpIHsKCS8vIGh0dHA6Ly9yb2dlcnN0cmluZ2VyLmNvbS8yMDEzLzExLzE1L2dlbmVyYXRl'));
	@fwrite($fp, base64_decode('LXV1aWRzLXBocAoJcmV0dXJuIHNwcmludGYoICclMDR4JTA0eC0lMDR4LSUwNHgtJTA0eC0lMDR4JTA0eCUwNHgnLAoJCW10X3JhbmQoIDAsIDB4ZmZmZiApLCBtdF9yYW5kKCAwLCAweGZmZmYgKSwKCQltdF9yYW5kKCAwLCAweGZmZmYgKSwKCQltdF9yYW5kKCAw'));
	@fwrite($fp, base64_decode('LCAweDBmZmYgKSB8IDB4NDAwMCwKCQltdF9yYW5kKCAwLCAweDNmZmYgKSB8IDB4ODAwMCwKCQltdF9yYW5kKCAwLCAweGZmZmYgKSwgbXRfcmFuZCggMCwgMHhmZmZmICksIG10X3JhbmQoIDAsIDB4ZmZmZiApCgkpOwp9CgpmdW5jdGlvbiBnZW5fdXVpZCgkcHJl'));
	@fwrite($fp, base64_decode('ZmVyX3RpbWViYXNlZCA9IHRydWUpIHsKCSRvdXQgPSBhcnJheSgpOwoKCSMgT24gRGViaWFuOiBhcHRpdHVkZSBpbnN0YWxsIHBocC11dWlkCgkjIGV4dGVuc2lvbl9sb2FkZWQoJ3V1aWQnKQoJaWYgKGZ1bmN0aW9uX2V4aXN0cygndXVpZF9jcmVhdGUnKSkgewoJ'));
	@fwrite($fp, base64_decode('CSMgT1NTUCB1dWlkIGV4dGVuc2lvbiBsaWtlIHNlZW4gaW4gcGhwNS11dWlkIGF0IERlYmlhbiA4CgkJLyoKCQkkeCA9IHV1aWRfY3JlYXRlKCRjb250ZXh0KTsKCQlpZiAoJHByZWZlcl90aW1lYmFzZWQpIHsKCQkJdXVpZF9tYWtlKCRjb250ZXh0LCBVVUlEX01B'));
	@fwrite($fp, base64_decode('S0VfVjEpOwoJCX0gZWxzZSB7CgkJCXV1aWRfbWFrZSgkY29udGV4dCwgVVVJRF9NQUtFX1Y0KTsKCQl9CgkJdXVpZF9leHBvcnQoJGNvbnRleHQsIFVVSURfRk1UX1NUUiwgJHV1aWQpOwoJCXJldHVybiB0cmltKCR1dWlkKTsKCQkqLwoKCQkjIFBFQ0wgdXVpZCBl'));
	@fwrite($fp, base64_decode('eHRlbnNpb24gbGlrZSBzZWVuIGluIHBocC11dWlkIGF0IERlYmlhbiA5CgkJcmV0dXJuIHRyaW0odXVpZF9jcmVhdGUoJHByZWZlcl90aW1lYmFzZWQgPyBVVUlEX1RZUEVfVElNRSA6IFVVSURfVFlQRV9SQU5ET00pKTsKCX0KCgkjIE9uIERlYmlhbjogYXB0aXR1'));
	@fwrite($fp, base64_decode('ZGUgaW5zdGFsbCB1dWlkLXJ1bnRpbWUKCWlmICgkcHJlZmVyX3RpbWViYXNlZCkgewoJCWV4ZWMoJ3V1aWRnZW4gLXQnLCAkb3V0LCAkZWMpOwoJfSBlbHNlIHsKCQlleGVjKCd1dWlkZ2VuIC1yJywgJG91dCwgJGVjKTsKCX0KCWlmICgkZWMgPT0gMCkgcmV0dXJu'));
	@fwrite($fp, base64_decode('ICRvdXRbMF07CgoJaWYgKCEkcHJlZmVyX3RpbWViYXNlZCkgewoJCXJldHVybiBfZ2VuX3V1aWRfdjQoKTsKCX0KCgkvLyBBdCB0aGlzIHBvaW50IHdlIGNhbm5vdCBmdWxmaWwgdGhlIGNhbGxlcidzIHdpc2ggaW4gcmVnYXJkcyB0byAkcHJlZmVyX3RpbWViYXNl'));
	@fwrite($fp, base64_decode('ZCBvciBub3QKCglpZiAoZmlsZV9leGlzdHMoJy9wcm9jL3N5cy9rZXJuZWwvcmFuZG9tL3V1aWQnKSkgewoJCS8vIE9uIERlYmlhbiBKZXNzaWU6IFVVSUQgVjQgKFJhbmRvbSkKCQlyZXR1cm4gZmlsZV9nZXRfY29udGVudHMoJy9wcm9jL3N5cy9rZXJuZWwvcmFu'));
	@fwrite($fp, base64_decode('ZG9tL3V1aWQnKTsKCX0KCglyZXR1cm4gX2dlbl91dWlkX3Y0KCk7Cn0KCmZ1bmN0aW9uIHV1aWRfbnVtZXJpY192YWx1ZSgkdXVpZCkgewoJJG9pZCA9IHV1aWRfdG9fb2lkKCR1dWlkKTsKCWlmICghJG9pZCkgcmV0dXJuIGZhbHNlOwoJcmV0dXJuIHN1YnN0cigk'));
	@fwrite($fp, base64_decode('b2lkLCBzdHJsZW4oJzIuMjUuJykpOwp9CgpmdW5jdGlvbiB1dWlkX2Nfc3ludGF4KCR1dWlkKSB7CgkkdXVpZCA9IHN0cl9yZXBsYWNlKCd7JywgJycsICR1dWlkKTsKCXJldHVybiAneyAweCcgLiBzdWJzdHIoJHV1aWQsIDAsIDgpIC4KCQknLCAweCcgLiBzdWJz'));
	@fwrite($fp, base64_decode('dHIoJHV1aWQsIDksIDQpIC4KCQknLCAweCcgLiBzdWJzdHIoJHV1aWQsIDE0LCA0KSAuCgkJJywgeyAweCcgLiBzdWJzdHIoJHV1aWQsIDE5LCAyKS4KCQknLCAweCcgLiBzdWJzdHIoJHV1aWQsIDIxLCAyKSAuCgkJJywgMHgnIC4gc3Vic3RyKCR1dWlkLCAyNCwg'));
	@fwrite($fp, base64_decode('MikgLgoJCScsIDB4JyAuIHN1YnN0cigkdXVpZCwgMjYsIDIpIC4KCQknLCAweCcgLiBzdWJzdHIoJHV1aWQsIDI4LCAyKSAuCgkJJywgMHgnIC4gc3Vic3RyKCR1dWlkLCAzMCwgMikgLgoJCScsIDB4JyAuIHN1YnN0cigkdXVpZCwgMzIsIDIpIC4KCQknLCAweCcg'));
	@fwrite($fp, base64_decode('LiBzdWJzdHIoJHV1aWQsIDM0LCAyKSAuICcgfSB9JzsKfQoKIyAtLS0KCi8vIGh0dHA6Ly9waHAubmV0L21hbnVhbC9kZS9mdW5jdGlvbi5oZXgyYmluLnBocCMxMTMwNTcKaWYgKCAhZnVuY3Rpb25fZXhpc3RzKCAnaGV4MmJpbicgKSApIHsKICAgIGZ1bmN0aW9u'));
	@fwrite($fp, base64_decode('IGhleDJiaW4oICRzdHIgKSB7CiAgICAgICAgJHNiaW4gPSAiIjsKICAgICAgICAkbGVuID0gc3RybGVuKCAkc3RyICk7CiAgICAgICAgZm9yICggJGkgPSAwOyAkaSA8ICRsZW47ICRpICs9IDIgKSB7CiAgICAgICAgICAgICRzYmluIC49IHBhY2soICJIKiIsIHN1'));
	@fwrite($fp, base64_decode('YnN0ciggJHN0ciwgJGksIDIgKSApOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICRzYmluOwogICAgfQp9Cg=='));
	@fclose($fp);
}
if (!is_file('includes/uuid_utils.inc.php')) {
	warn('File has vanished! Will re-create it: includes/uuid_utils.inc.php');
	writefile_2();
	if (!is_file('includes/uuid_utils.inc.php')) {
		warn('File cannot be created (not existing): includes/uuid_utils.inc.php');
	} else if (sha1_file('includes/uuid_utils.inc.php') != '64e69a2d1e355af98e694ecc6c97867c90888e27') {
		warn('File cannot be created (checksum mismatch): includes/uuid_utils.inc.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/uuid_utils.inc.php', 0644)) {
		warn('Could not change file permissions of includes/uuid_utils.inc.php');
	}
} else {
	if (@sha1_file('includes/uuid_utils.inc.php') !== '64e69a2d1e355af98e694ecc6c97867c90888e27') {
		if (@sha1_file('includes/uuid_utils.inc.php') !== '64ffaf92ef230a3edac29d21c682ff1b843477d4') {
			warn('File was modified. Will overwrite the changes now: includes/uuid_utils.inc.php');
			$tmp = pathinfo('includes/uuid_utils.inc.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/uuid_utils.inc.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('includes/uuid_utils.inc.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_2();
		if (@sha1_file('includes/uuid_utils.inc.php') !== '64e69a2d1e355af98e694ecc6c97867c90888e27') {
			warn('File cannot be written (checksum mismatch): includes/uuid_utils.inc.php');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 26\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 26') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

