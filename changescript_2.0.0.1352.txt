<?php /* <ViaThinkSoftSignature>
DwhG42C9lvlKHO6lgTZz05M5OLmbnOyvvTGwVec3dDBOcKxfVwZNNo6kUYH/AlK8P
WoBN/si5icV2GYhS/AW4S2FM/EhnWAcfbm/wo0dwX4ekujhPVA0h+1QNrPqA+1533
LfEF4Cs6xSukBFkSjy5s/uq8B7AfPkgrY91d7wsGsipe1Q8Q2xbyiwHUvYudqE61S
/hWGXP0FmXiN3fxJO7967ntdMvsvcstCP1SVFmGkvfY1lBQYVNhdriMMdCsmlk9yV
U6mHnNvZc+L8m/cFm6yN1j+S+Vmbz3HumJUtyCvmDr71mVo0mPQOErIF4nx4A2e+1
QEwHmAHbGIPsxFQlYo0J4bpjf45ZQ2lwqcSOtynvJQQNQZZg6HmB24WsT2Gcw/uNS
QHCG5zy6l5oBItCeBh4UQ/jQ6gxULtezmpw87cCed1cwadrAeOTRKJMIM2fOrp8K7
GeZwwdJ3w9/rnuAIcfUELRu08myZ8sSTMRdNGpEx/+5MvqncocTF4+GurDcyBpIHB
KEbEyD8Q8xSBFldIXy7pPhtLl24sl7r9BgcyY64G+5u3/L9/dlZv1W4CSbk5nwstE
Dnj5T1J7csmsrA5Uvm2ZVHqUNcy/OKRSeCCETBLgTZr4B1kaX6cXfPFcBTytuVCs6
rVRHD+Q2R1BqV6oy+YUGTR52vmKCC9PH9G7dzwf4LxRPNx7cQuXdzLnuRgKwN30Vv
wc7YLr7R9JrQ6NNU9ovCzdEAAsCfz37dBXS2JRduOQzReXIz186b13hirB+JDjlr3
e1NJTQ3KN8Qpb6TTejtJlC7fk3IXlYggAeszb19H49ecglsrplSelQyu1uu0zDk9Q
WcH//IEsg6W72K6E9caR9BeO82ObnEkrGnWM+JHK8rpT6/UB7F6m17ALm55hhjvwM
ZUyTBBpr4xQVJBJVlscSjuxmEMxhRobKKDwU7nChLHZaosLwAQbvhQZXB1pCfJpp4
yvIJJm8w8d4WBc4RE6omOWW2rBHcxKIdg9PvdS7eP5rTPJsxvs2xpbQZol+Li66e+
N6ESD4SIwGsc9V+byMglvRjuLZvyurc8IKx11Eq0rmDDEOIxu0pmfvnkCoLsIhJ4T
G5V2UBt5FcR52okWkNHG8Gd35l2tz3WeVfNGtHe9lcZCg9Pt5PlMSRrzDYKqfrzGu
u5Ceqs/0jPz1g1v4q9PhlHtr8kKa3+zF3olj42BlTIJnbv2arUfQ3Eicq6UeS459z
4CLpu3RgzqHV7hwKA5sCwQKm6m0Ku1wS1vp8ae9l06690BsN11enOE+a4NUoyPvR5
oeXHq42O1HwOZzcdVCGt3Et1nEojlJCMfT9pzeyrpLABl2WOoeC+lbp/stjRSqlan
g==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('.version.php')) !== '<?php // Revision 1351') {
	err('This update can only be applied to OIDplus version 2.0.0.1351!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: dev/backup_wip.phps
function writefile_1() {
	@$fp = fopen('dev/backup_wip.phps', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMyBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgp1c2UgVmlhVGhpbmtTb2Z0XE9JRHBsdXNcT0lEcGx1czsKdXNlIFZpYVRoaW5rU29mdFxPSURwbHVzXE9JRHBsdXNFeGNlcHRpb247CnVzZSBWaWFUaGlua1NvZnRcT0lEcGx1c1xPSURw'));
	@fwrite($fp, base64_decode('bHVzR3VpOwoKaGVhZGVyKCdDb250ZW50LVR5cGU6dGV4dC9odG1sOyBjaGFyc2V0PVVURi04Jyk7CgpyZXF1aXJlX29uY2UgX19ESVJfXyAuICcvLi4vaW5jbHVkZXMvb2lkcGx1cy5pbmMucGhwJzsKCnNldF9leGNlcHRpb25faGFuZGxlcihhcnJheShPSURwbHVz'));
	@fwrite($fp, base64_decode('R3VpOjpjbGFzcywgJ2h0bWxfZXhjZXB0aW9uX2hhbmRsZXInKSk7CgpvYl9zdGFydCgpOyAvLyBhbGxvdyBjb29raWUgaGVhZGVycyB0byBiZSBzZW50CgpPSURwbHVzOjppbml0KHRydWUpOwoKCgoKZGVmaW5lKCdCQUNLVVBfUkVDT1ZFUllfU1BFQ0lBTF9URVNU'));
	@fwrite($fp, base64_decode('JywgdHJ1ZSk7IC8vIFRPRE86IERpc2FibGUgb24gcmVsZWFzZSEgSnVzdCBmb3IgdGVzdGluZyB0aGUgYmFja3VwL3Jlc3RvcmUgcHJvY2VkdXJlISEhCgoKCgoKLy8gPT09PT09PT09PT09PT09PSBCYWNrdXAgPT09PT09PT09PT09PT09PQoKZnVuY3Rpb24gb2lk'));
	@fwrite($fp, base64_decode('cGx1c19iYWNrdXBfZGIoc3RyaW5nICRiYWNrdXBfZmlsZSwgYm9vbCAkZXhwb3J0X29iamVjdHM9dHJ1ZSwgYm9vbCAkZXhwb3J0X3JhPXRydWUpOiB2b2lkIHsKCSRudW1fcm93cyA9IFsKCQkib2JqZWN0cyIgPT4gJGV4cG9ydF9vYmplY3RzID8gMCA6ICJuL2Ei'));
	@fwrite($fp, base64_decode('LAoJCSJhc24xaWQiID0+ICRleHBvcnRfb2JqZWN0cyA/IDAgOiAibi9hIiwKCQkiaXJpIiA9PiAkZXhwb3J0X29iamVjdHMgPyAwIDogIm4vYSIsCgkJInJhIiA9PiAkZXhwb3J0X3JhID8gMCA6ICJuL2EiLAoJCSJsb2ciID0+ICJuL2EiLCAvLyBObyBiYWNrdXAg'));
	@fwrite($fp, base64_decode('Zm9yIHRoaXMgdGFibGUhCgkJImxvZ19vYmplY3QiID0+ICJuL2EiLCAvLyBObyBiYWNrdXAgZm9yIHRoaXMgdGFibGUhCgkJImxvZ191c2VyIiA9PiAibi9hIiwgLy8gTm8gYmFja3VwIGZvciB0aGlzIHRhYmxlIQoJCSJjb25maWciID0+ICJuL2EiIC8vIE5vIGJh'));
	@fwrite($fp, base64_decode('Y2t1cCBmb3IgdGhpcyB0YWJsZSEKCV07CgoJaWYgKEJBQ0tVUF9SRUNPVkVSWV9TUEVDSUFMX1RFU1QpIHsKCQlpZiAoJGV4cG9ydF9vYmplY3RzKSB7CgkJCU9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJkZWxldGUgZnJvbSAjIyNvYmplY3RzIHdoZXJlIGlkIGxpa2Ug'));
	@fwrite($fp, base64_decode('JyVfQ0xPTkUnIik7CgkJCU9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJkZWxldGUgZnJvbSAjIyNhc24xaWQgd2hlcmUgb2lkIGxpa2UgJyVfQ0xPTkUnIik7CgkJCU9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJkZWxldGUgZnJvbSAjIyNpcmkgd2hlcmUgb2lkIGxpa2UgJyVf'));
	@fwrite($fp, base64_decode('Q0xPTkUnIik7CgkJfQoJCWlmICgkZXhwb3J0X3JhKSB7CgkJCU9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJkZWxldGUgZnJvbSAjIyNyYSB3aGVyZSBlbWFpbCBsaWtlICclX0NMT05FJyIpOwoJCX0KCX0KCgkvLyBCYWNrdXAgb2JqZWN0cyAoVGFibGVzIG9iamVjdHMs'));
	@fwrite($fp, base64_decode('IGFzbjFpZCwgaXJpKQoJJG9iamVjdHMgPSBbXTsKCWlmICgkZXhwb3J0X29iamVjdHMpIHsKCQkkcmVzID0gT0lEcGx1czo6ZGIoKS0+cXVlcnkoInNlbGVjdCAqIGZyb20gIyMjb2JqZWN0cyBvcmRlciBieSBpZCIpOwoJCSRyb3dzID0gW107CgkJd2hpbGUgKCRy'));
	@fwrite($fp, base64_decode('b3cgPSAkcmVzLT5mZXRjaF9hcnJheSgpKSB7CgkJCS8vIE5vdCBhbGwgZGF0YWJhc2VzIHN1cHBvcnQgbXVsdGlwbGUgYWN0aXZlIHJvd3MsIHNvIHdlIG5lZWQgdG8gcmVhZCBpdCBpbiBhIGlzb2xhdGVkIGxvb3AKCQkJJHJvd3NbXSA9ICRyb3c7CgkJfQoJCWZv'));
	@fwrite($fp, base64_decode('cmVhY2ggKCRyb3dzIGFzICRyb3cpIHsKCQkJJG51bV9yb3dzWyJvYmplY3RzIl0rKzsKCgkJCSRhc24xaWRzID0gW107CgkJCSRyZXMyID0gT0lEcGx1czo6ZGIoKS0+cXVlcnkoInNlbGVjdCAqIGZyb20gIyMjYXNuMWlkIHdoZXJlIG9pZCA9ID8gb3JkZXIgYnkg'));
	@fwrite($fp, base64_decode('bmFtZSIsIGFycmF5KCRyb3dbImlkIl0pKTsKCQkJd2hpbGUgKCRyb3cyID0gJHJlczItPmZldGNoX2FycmF5KCkpIHsKCQkJCSRudW1fcm93c1siYXNuMWlkIl0rKzsKCQkJCSRhc24xaWRzW10gPSBbCgkJCQkJIm5hbWUiID0+ICRyb3cyWyduYW1lJ10sCgkJCQkJ'));
	@fwrite($fp, base64_decode('InN0YW5kYXJkaXplZCIgPT4gJHJvdzJbJ3N0YW5kYXJkaXplZCddLAoJCQkJCSJ3ZWxsX2tub3duIiA9PiAkcm93Mlsnd2VsbF9rbm93biddLAoJCQkJXTsKCQkJfQoKCQkJJGlyaXMgPSBbXTsKCQkJJHJlczIgPSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0'));
	@fwrite($fp, base64_decode('ICogZnJvbSAjIyNpcmkgd2hlcmUgb2lkID0gPyBvcmRlciBieSBuYW1lIiwgYXJyYXkoJHJvd1siaWQiXSkpOwoJCQl3aGlsZSAoJHJvdzIgPSAkcmVzMi0+ZmV0Y2hfYXJyYXkoKSkgewoJCQkJJG51bV9yb3dzWyJpcmkiXSsrOwoJCQkJJGlyaXNbXSA9IFsKCQkJ'));
	@fwrite($fp, base64_decode('CQkibmFtZSIgPT4gJHJvdzJbJ25hbWUnXSwKCQkJCQkibG9uZ2FyYyIgPT4gJHJvdzJbJ2xvbmdhcmMnXSwKCQkJCQkid2VsbF9rbm93biIgPT4gJHJvdzJbJ3dlbGxfa25vd24nXSwKCQkJCV07CgkJCX0KCgkJCSRvYmplY3RzW10gPSBbCgkJCQkiaWQiID0+ICRy'));
	@fwrite($fp, base64_decode('b3dbImlkIl0sCgkJCQkicGFyZW50IiA9PiAkcm93WyJwYXJlbnQiXSwKCQkJCSJ0aXRsZSIgPT4gJHJvd1sidGl0bGUiXSwKCQkJCSJkZXNjcmlwdGlvbiIgPT4gJHJvd1siZGVzY3JpcHRpb24iXSwKCQkJCSJyYV9lbWFpbCIgPT4gJHJvd1sicmFfZW1haWwiXSwK'));
	@fwrite($fp, base64_decode('CQkJCSJjb25maWRlbnRpYWwiID0+ICRyb3dbImNvbmZpZGVudGlhbCJdLAoJCQkJImNyZWF0ZWQiID0+ICRyb3dbImNyZWF0ZWQiXSwKCQkJCSJ1cGRhdGVkIiA9PiAkcm93WyJ1cGRhdGVkIl0sCgkJCQkiY29tbWVudCIgPT4gJHJvd1siY29tbWVudCJdLAoJCQkJ'));
	@fwrite($fp, base64_decode('ImFzbjFpZHMiID0+ICRhc24xaWRzLAoJCQkJImlyaXMiID0+ICRpcmlzCgkJCV07CgkJfQoJfQoKCS8vIEJhY2t1cCBSQXMgKFRhYmxlIHJhKQoJJHJhID0gW107CglpZiAoJGV4cG9ydF9yYSkgewoJCSRyZXMgPSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0'));
	@fwrite($fp, base64_decode('ICogZnJvbSAjIyNyYSBvcmRlciBieSBlbWFpbCIpOwoJCXdoaWxlICgkcm93ID0gJHJlcy0+ZmV0Y2hfYXJyYXkoKSkgewoJCQkkbnVtX3Jvd3NbInJhIl0rKzsKCQkJJHJhW10gPSBbCgkJCQkiZW1haWwiID0+ICRyb3dbImVtYWlsIl0sCgkJCQkicmFfbmFtZSIg'));
	@fwrite($fp, base64_decode('PT4gJHJvd1sicmFfbmFtZSJdLAoJCQkJInBlcnNvbmFsX25hbWUiID0+ICRyb3dbInBlcnNvbmFsX25hbWUiXSwKCQkJCSJvcmdhbml6YXRpb24iID0+ICRyb3dbIm9yZ2FuaXphdGlvbiJdLAoJCQkJIm9mZmljZSIgPT4gJHJvd1sib2ZmaWNlIl0sCgkJCQkic3Ry'));
	@fwrite($fp, base64_decode('ZWV0IiA9PiAkcm93WyJzdHJlZXQiXSwKCQkJCSJ6aXBfdG93biIgPT4gJHJvd1siemlwX3Rvd24iXSwKCQkJCSJjb3VudHJ5IiA9PiAkcm93WyJjb3VudHJ5Il0sCgkJCQkicGhvbmUiID0+ICRyb3dbInBob25lIl0sCgkJCQkibW9iaWxlIiA9PiAkcm93WyJtb2Jp'));
	@fwrite($fp, base64_decode('bGUiXSwKCQkJCSJmYXgiID0+ICRyb3dbImZheCJdLAoJCQkJInByaXZhY3kiID0+ICRyb3dbInByaXZhY3kiXSwKCQkJCSJhdXRoa2V5IiA9PiAkcm93WyJhdXRoa2V5Il0sCgkJCQkicmVnaXN0ZXJlZCIgPT4gJHJvd1sicmVnaXN0ZXJlZCJdLAoJCQkJInVwZGF0'));
	@fwrite($fp, base64_decode('ZWQiID0+ICRyb3dbInVwZGF0ZWQiXSwKCQkJCSJsYXN0X2xvZ2luIiA9PiAkcm93WyJsYXN0X2xvZ2luIl0KCQkJXTsKCQl9Cgl9CgoJLy8gUHV0IGV2ZXJ5dGhpbmcgdG9nZXRoZXIKCSRqc29uID0gWwoJCSJvaWRwbHVzX2JhY2t1cCIgPT4gWwoJCQkiZmlsZV92'));
	@fwrite($fp, base64_decode('ZXJzaW9uIiA9PiAiMjAyMyIsCgkJCSJvcmlnaW5fc3lzdGVtaWQiID0+IE9JRHBsdXM6OmdldFN5c3RlbUlkKGZhbHNlKSA/OiAidW5rbm93biIsCgkJCSJjcmVhdGVkIiA9PiBkYXRlKCdZLW0tZCBIOmk6cyBPJyksCgkJCSJkYXRhc2V0X2NvdW50IiA9PiAkbnVt'));
	@fwrite($fp, base64_decode('X3Jvd3MKCQldLAoJCSJvYmplY3RzIiA9PiAkb2JqZWN0cywKCQkicmEiID0+ICRyYQoJXTsKCglPSURwbHVzOjpsb2dnZXIoKS0+bG9nKCJWMjpbSU5GT11BIiwgIkNyZWF0ZWQgYmFja3VwIG9mIE9iamVjdHMgYW5kIFJBcyIpOwoKCgkkZW5jb2RlZF9kYXRhID0g'));
	@fwrite($fp, base64_decode('anNvbl9lbmNvZGUoJGpzb24sIEpTT05fUFJFVFRZX1BSSU5UfEpTT05fVU5FU0NBUEVEX1NMQVNIRVMpOwoJaWYgKEBmaWxlX3B1dF9jb250ZW50cygkYmFja3VwX2ZpbGUsICRlbmNvZGVkX2RhdGEpID09PSBmYWxzZSkgewoJCXRocm93IG5ldyBPSURwbHVzRXhj'));
	@fwrite($fp, base64_decode('ZXB0aW9uKCJDb3VsZCBub3Qgd3JpdGUgZmlsZSB0byBkaXNrOiAkYmFja3VwX2ZpbGUiKTsKCX0KCgllY2hvICI8cD5CYWNrdXAgZG9uZTogJGJhY2t1cF9maWxlPC9wPiI7Cglmb3JlYWNoICgkbnVtX3Jvd3MgYXMgJHRhYmxlX25hbWUgPT4gJGNudCkgewoJCWlm'));
	@fwrite($fp, base64_decode('ICgkY250ICE9PSAibi9hIikgIGVjaG8gIjxwPi4uLiAkdGFibGVfbmFtZTogJGNudCBkYXRhc2V0czwvcD4iOwoJfQoJZWNobyAiPGhyPiI7CgkvL2VjaG8gJzxwcmU+JzsKCS8vZWNobyBodG1sZW50aXRpZXMoJGVuY29kZWRfZGF0YSk7CgkvL2VjaG8gJzwvcHJl'));
	@fwrite($fp, base64_decode('Pic7Cn0KCgoKCi8vID09PT09PT09PT09PT09PT0gUmVjb3ZlcnkgPT09PT09PT09PT09PT09PQoKZnVuY3Rpb24gb2lkcGx1c19yZXN0b3JlX2RiKHN0cmluZyAkYmFja3VwX2ZpbGUsIGJvb2wgJGltcG9ydF9vYmplY3RzPXRydWUsIGJvb2wgJGltcG9ydF9yYT10'));
	@fwrite($fp, base64_decode('cnVlKTogdm9pZCB7CgkkbnVtX3Jvd3MgPSBbCgkJIm9iamVjdHMiID0+ICRpbXBvcnRfb2JqZWN0cyA/IDAgOiAibi9hIiwKCQkiYXNuMWlkIiA9PiAkaW1wb3J0X29iamVjdHMgPyAwIDogIm4vYSIsCgkJImlyaSIgPT4gJGltcG9ydF9vYmplY3RzID8gMCA6ICJu'));
	@fwrite($fp, base64_decode('L2EiLAoJCSJyYSIgPT4gJGltcG9ydF9yYSA/IDAgOiAibi9hIiwKCQkibG9nIiA9PiAibi9hIiwgLy8gTm8gYmFja3VwIGZvciB0aGlzIHRhYmxlIQoJCSJsb2dfb2JqZWN0IiA9PiAibi9hIiwgLy8gTm8gYmFja3VwIGZvciB0aGlzIHRhYmxlIQoJCSJsb2dfdXNl'));
	@fwrite($fp, base64_decode('ciIgPT4gIm4vYSIsIC8vIE5vIGJhY2t1cCBmb3IgdGhpcyB0YWJsZSEKCQkiY29uZmlnIiA9PiAibi9hIiAvLyBObyBiYWNrdXAgZm9yIHRoaXMgdGFibGUhCgldOwoKCSRjb250ID0gQGZpbGVfZ2V0X2NvbnRlbnRzKCRiYWNrdXBfZmlsZSk7CglpZiAoJGNvbnQg'));
	@fwrite($fp, base64_decode('PT09IGZhbHNlKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigiQ291bGQgbm90IHJlYWQgZmlsZSBmcm9tIGRpc2s6ICRiYWNrdXBfZmlsZSIpOwoJJGpzb24gPSBAanNvbl9kZWNvZGUoJGNvbnQsdHJ1ZSk7CglpZiAoJGpzb24gPT09IGZhbHNlKSB0aHJvdyBu'));
	@fwrite($fp, base64_decode('ZXcgT0lEcGx1c0V4Y2VwdGlvbigiQ291bGQgbm90IGRlY29kZSBKU09OIHN0cnVjdHVyZSBvZiAkYmFja3VwX2ZpbGUiKTsKCglpZiAoT0lEcGx1czo6ZGIoKS0+dHJhbnNhY3Rpb25fc3VwcG9ydGVkKCkpIE9JRHBsdXM6OmRiKCktPnRyYW5zYWN0aW9uX2JlZ2lu'));
	@fwrite($fp, base64_decode('KCk7Cgl0cnkgewoKCQlpZiAoJGltcG9ydF9vYmplY3RzKSB7CgkJCWlmICghQkFDS1VQX1JFQ09WRVJZX1NQRUNJQUxfVEVTVCkgewoJCQkJT0lEcGx1czo6ZGIoKS0+cXVlcnkoImRlbGV0ZSBmcm9tICMjI29iamVjdHMiKTsKCQkJCU9JRHBsdXM6OmRiKCktPnF1'));
	@fwrite($fp, base64_decode('ZXJ5KCJkZWxldGUgZnJvbSAjIyNhc24xaWQiKTsKCQkJCU9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJkZWxldGUgZnJvbSAjIyNpcmkiKTsKCQkJfQoJCQlmb3JlYWNoICgoJGpzb25bIm9iamVjdHMiXT8/W10pIGFzICRyb3cpIHsKCQkJCWlmIChCQUNLVVBfUkVDT1ZF'));
	@fwrite($fp, base64_decode('UllfU1BFQ0lBTF9URVNUKSB7CgkJCQkJJHJvd1snaWQnXSAuPSAnX0NMT05FJzsKCQkJCQlpZiAoc3Vic3RyKCRyb3dbJ3BhcmVudCddLCAtMSkgIT0gJzonKSAkcm93WydwYXJlbnQnXSAuPSAnX0NMT05FJzsKCQkJCX0KCgkJCQkkbnVtX3Jvd3NbIm9iamVjdHMi'));
	@fwrite($fp, base64_decode('XSsrOwoJCQkJT0lEcGx1czo6ZGIoKS0+cXVlcnkoImluc2VydCBpbnRvICMjI29iamVjdHMgKGlkLCBwYXJlbnQsIHRpdGxlLCBkZXNjcmlwdGlvbiwgcmFfZW1haWwsIGNvbmZpZGVudGlhbCwgY3JlYXRlZCwgdXBkYXRlZCwgY29tbWVudCkgdmFsdWVzICg/LCA/'));
	@fwrite($fp, base64_decode('LCA/LCA/LCA/LCA/LCA/LCA/LCA/KSIsCgkJCQkJYXJyYXkoJHJvd1siaWQiXT8/bnVsbCwKCQkJCQkJJHJvd1sicGFyZW50Il0/P251bGwsCgkJCQkJCSRyb3dbInRpdGxlIl0/P251bGwsCgkJCQkJCSRyb3dbImRlc2NyaXB0aW9uIl0/P251bGwsCgkJCQkJCSRy'));
	@fwrite($fp, base64_decode('b3dbInJhX2VtYWlsIl0/P251bGwsCgkJCQkJCSRyb3dbImNvbmZpZGVudGlhbCJdPz9udWxsLAoJCQkJCQkkcm93WyJjcmVhdGVkIl0/P251bGwsCgkJCQkJCSRyb3dbInVwZGF0ZWQiXT8/bnVsbCwKCQkJCQkJJHJvd1siY29tbWVudCJdPz9udWxsKQoJCQkJKTsK'));
	@fwrite($fp, base64_decode('CgkJCQlmb3JlYWNoICgoJHJvd1siYXNuMWlkcyJdPz9bXSkgYXMgJHJvdzIpIHsKCQkJCQkkbnVtX3Jvd3NbImFzbjFpZCJdKys7CgkJCQkJT0lEcGx1czo6ZGIoKS0+cXVlcnkoImluc2VydCBpbnRvICMjI2FzbjFpZCAob2lkLCBuYW1lLCBzdGFuZGFyZGl6ZWQs'));
	@fwrite($fp, base64_decode('IHdlbGxfa25vd24pIHZhbHVlcyAoPywgPywgPywgPykiLAoJCQkJCQlhcnJheSgkcm93WyJpZCJdPz9udWxsLCAvLyBzaWM6ICRyb3csIG5vdCAkcm93MgoJCQkJCQkJJHJvdzJbIm5hbWUiXT8/bnVsbCwKCQkJCQkJCSRyb3cyWyJzdGFuZGFyZGl6ZWQiXT8/bnVs'));
	@fwrite($fp, base64_decode('bCwKCQkJCQkJCSRyb3cyWyJ3ZWxsX2tub3duIl0/P251bGwpCgkJCQkJKTsKCQkJCX0KCgkJCQlmb3JlYWNoICgoJHJvd1siaXJpcyJdPz9bXSkgYXMgJHJvdzIpIHsKCQkJCQkkbnVtX3Jvd3NbImlyaSJdKys7CgkJCQkJT0lEcGx1czo6ZGIoKS0+cXVlcnkoImlu'));
	@fwrite($fp, base64_decode('c2VydCBpbnRvICMjI2lyaSAob2lkLCBuYW1lLCBsb25nYXJjLCB3ZWxsX2tub3duKSB2YWx1ZXMgKD8sID8sID8sID8pIiwKCQkJCQkJYXJyYXkoJHJvd1siaWQiXT8/bnVsbCwgLy8gc2ljOiAkcm93LCBub3QgJHJvdzIKCQkJCQkJCSRyb3cyWyJuYW1lIl0/P251'));
	@fwrite($fp, base64_decode('bGwsCgkJCQkJCQkkcm93MlsibG9uZ2FyYyJdPz9udWxsLAoJCQkJCQkJJHJvdzJbIndlbGxfa25vd24iXT8/bnVsbCkKCQkJCQkpOwoJCQkJfQoJCQl9CgkJfQoKCQlpZiAoJGltcG9ydF9yYSkgewoJCQlpZiAoIUJBQ0tVUF9SRUNPVkVSWV9TUEVDSUFMX1RFU1Qp'));
	@fwrite($fp, base64_decode('IHsKCQkJCU9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJkZWxldGUgZnJvbSAjIyNyYSIpOwoJCQl9CgkJCWZvcmVhY2ggKCgkanNvblsicmEiXT8/W10pIGFzICRyb3cpIHsKCQkJCWlmIChCQUNLVVBfUkVDT1ZFUllfU1BFQ0lBTF9URVNUKSB7CgkJCQkJJHJvd1snZW1h'));
	@fwrite($fp, base64_decode('aWwnXSAuPSAnX0NMT05FJzsKCQkJCX0KCgkJCQkkbnVtX3Jvd3NbInJhIl0rKzsKCQkJCU9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJpbnNlcnQgaW50byAjIyNyYSAoZW1haWwsIHJhX25hbWUsIHBlcnNvbmFsX25hbWUsIG9yZ2FuaXphdGlvbiwgb2ZmaWNlLCBzdHJl'));
	@fwrite($fp, base64_decode('ZXQsIHppcF90b3duLCBjb3VudHJ5LCBwaG9uZSwgbW9iaWxlLCBmYXgsIHByaXZhY3ksIGF1dGhrZXksIHJlZ2lzdGVyZWQsIHVwZGF0ZWQsIGxhc3RfbG9naW4pIHZhbHVlcyAoPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPyki'));
	@fwrite($fp, base64_decode('LAoJCQkJCWFycmF5KCRyb3dbImVtYWlsIl0/P251bGwsCgkJCQkJCSRyb3dbInJhX25hbWUiXT8/bnVsbCwKCQkJCQkJJHJvd1sicGVyc29uYWxfbmFtZSJdPz9udWxsLAoJCQkJCQkkcm93WyJvcmdhbml6YXRpb24iXT8/bnVsbCwKCQkJCQkJJHJvd1sib2ZmaWNl'));
	@fwrite($fp, base64_decode('Il0/P251bGwsCgkJCQkJCSRyb3dbInN0cmVldCJdPz9udWxsLAoJCQkJCQkkcm93WyJ6aXBfdG93biJdPz9udWxsLAoJCQkJCQkkcm93WyJjb3VudHJ5Il0/P251bGwsCgkJCQkJCSRyb3dbInBob25lIl0/P251bGwsCgkJCQkJCSRyb3dbIm1vYmlsZSJdPz9udWxs'));
	@fwrite($fp, base64_decode('LAoJCQkJCQkkcm93WyJmYXgiXT8/bnVsbCwKCQkJCQkJJHJvd1sicHJpdmFjeSJdPz9udWxsLAoJCQkJCQkkcm93WyJhdXRoa2V5Il0/P251bGwsCgkJCQkJCSRyb3dbInJlZ2lzdGVyZWQiXT8/bnVsbCwKCQkJCQkJJHJvd1sidXBkYXRlZCJdPz9udWxsLAoJCQkJ'));
	@fwrite($fp, base64_decode('CQkkcm93WyJsYXN0X2xvZ2luIl0/P251bGwpCgkJCQkpOwoJCQl9CgkJfQoKCQllY2hvICI8cD5CYWNrdXAgcmVzdG9yZSBkb25lOiAkYmFja3VwX2ZpbGU8L3A+IjsKCQlmb3JlYWNoICgkbnVtX3Jvd3MgYXMgJHRhYmxlX25hbWUgPT4gJGNudCkgewoJCQlpZiAo'));
	@fwrite($fp, base64_decode('JGNudCAhPT0gIm4vYSIpICBlY2hvICI8cD4uLi4gJHRhYmxlX25hbWU6ICRjbnQgZGF0YXNldHM8L3A+IjsKCQl9CgkJZWNobyAiPGhyPiI7CgoJCU9JRHBsdXM6OmxvZ2dlcigpLT5sb2coIlYyOltXQVJOXUEiLCAiRVhFQ1VURUQgT0JKRUNUIEFORCBSQSBEQVRB'));
	@fwrite($fp, base64_decode('QkFTRSBCQUNLVVAgUkVDT1ZFUlkiKTsKCgkJaWYgKE9JRHBsdXM6OmRiKCktPnRyYW5zYWN0aW9uX3N1cHBvcnRlZCgpKSBPSURwbHVzOjpkYigpLT50cmFuc2FjdGlvbl9jb21taXQoKTsKCX0gY2F0Y2ggKFxFeGNlcHRpb24gJGUpIHsKCQlpZiAoT0lEcGx1czo6'));
	@fwrite($fp, base64_decode('ZGIoKS0+dHJhbnNhY3Rpb25fc3VwcG9ydGVkKCkpIE9JRHBsdXM6OmRiKCktPnRyYW5zYWN0aW9uX3JvbGxiYWNrKCk7CgkJdGhyb3cgJGU7Cgl9Cn0KCgoKaWYgKCFpc19kaXIoT0lEcGx1czo6bG9jYWxwYXRoKCkuJy91c2VyZGF0YS9iYWNrdXBzLycpKSBAbWtk'));
	@fwrite($fp, base64_decode('aXIoT0lEcGx1czo6bG9jYWxwYXRoKCkuJy91c2VyZGF0YS9iYWNrdXBzLycpOwokYmFja3VwX2ZpbGUgPSBPSURwbHVzOjpsb2NhbHBhdGgoKS4nL3VzZXJkYXRhL2JhY2t1cHMvb2lkcGx1cy0nLmRhdGUoJ1ktbS1kLUgtaS1zJykuJy5iYWsuanNvbic7Cm9pZHBs'));
	@fwrite($fp, base64_decode('dXNfYmFja3VwX2RiKCRiYWNrdXBfZmlsZSwgdHJ1ZSwgdHJ1ZSk7Cm9pZHBsdXNfcmVzdG9yZV9kYigkYmFja3VwX2ZpbGUsIHRydWUsIHRydWUpOwoKCgoKT0lEcGx1czo6aW52b2tlX3NodXRkb3duKCk7DQo='));
	@fclose($fp);
}
if (!is_file('dev/backup_wip.phps')) {
	warn('File has vanished! Will re-create it: dev/backup_wip.phps');
	writefile_1();
	if (!is_file('dev/backup_wip.phps')) {
		warn('File cannot be created (not existing): dev/backup_wip.phps');
	} else if (sha1_file('dev/backup_wip.phps') != '9dee19a476e2a665b8db7e349776742ab94615b0') {
		warn('File cannot be created (checksum mismatch): dev/backup_wip.phps');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('dev/backup_wip.phps', 0644)) {
		warn('Could not change file permissions of dev/backup_wip.phps');
	}
} else {
	if (@sha1_file('dev/backup_wip.phps') !== '9dee19a476e2a665b8db7e349776742ab94615b0') {
		if (@sha1_file('dev/backup_wip.phps') !== 'a99925a1e8a3c89d4e1431a19253ac3f70bb36e6') {
			warn('File was modified. Will overwrite the changes now: dev/backup_wip.phps');
			$tmp = pathinfo('dev/backup_wip.phps');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('dev/backup_wip.phps')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('dev/backup_wip.phps', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('dev/backup_wip.phps') !== '9dee19a476e2a665b8db7e349776742ab94615b0') {
			warn('File cannot be written (checksum mismatch): dev/backup_wip.phps');
		}
	}
}


file_put_contents('.version.php', "<?php // Revision 1352\n");
if (trim(@file_get_contents('.version.php')) !== '<?php // Revision 1352') err('Could not write to .version.php!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

