<?php /* <ViaThinkSoftSignature>
W3OJWwsY03UqpbxmCnEEUtR4A/sKV2OybwwHL2nMMObkbaIlv3ToEJfKN1nPveNFy
UBKLihQIsRWzwbGQdp4E/0W/JAvMbCTy++pIkTPG8C5upxwXHrGQNtX+rXqFADaEp
qcHze7O5pZr0sqcNSVeqr1hlqxkjMTBGxfXFe6xb0vYblF6uNuRky88J8JpQPJGA8
reKRfMBzJOauJzmATh7Hrwd125tEB7K66LxpayhwGmuyXybi855TxWf+4bkEypAXH
oW40TT1zlcIXh3YsqmPwI11JXTWQ8ISAraqOa0+Qv6eWXqzAjScvxWUhfC/Mq+G2K
OrmKg9fF2pFragJqlq+n5A1dEyiVvTB5mh6rmncW2Eb/szp1CkudeEsd9MgF8MPA5
5E2eyDahSDjpbkS6GUz8Td2ZipVvjXn5pe/Y4GcdD12eV+kby1GdV9tLRu3gVSUvX
aI76x6JVOG3QbyE9d4r2p7bXTWME4382u6S13yEN4/cV8RLdjFjT5dFTJ0rY2+Kxg
xR5w04ViOXk5hEValfIbF3jF5GaGGaGx0DtfRtISLI7HHhfH9+aJ0Zc3Zu/l+NJFV
CWMje35sbZ3n+IsBt3ZL5Dn2wbOmXwmQFl6ZGc+IwUtiMwZjTiJN6Uc2DqdwIERJY
Y/nGh3HdRBB3LLMFqwFqVrx123kZz3uuVrkN9YTSiqdo2YQOuoZcoPdIKmYfpkyaz
j+vnPOO96atMI+CblkuKdnEXOyC8qPO2FXo4AqLMbAFRsLxxfelJYmdSdZ4VFtJ7y
F5K9snHct89wniv+bcfIhcqr++LnW+A4ZoGhGJruvSUndvNUg4by0xkUG0lMU3ykG
3Dz3sFMC7tqTwGrwkznJ6EeI7tKgUECrlwN/ErQuk0NmoR4xM+GgUbEOZeZqxsJ+F
UOojEU4K1KrQg3Tlhkhganmt3rlmpgvXgBYQTaU86yW6LszwbotBkOjuMDmi9pdL1
l2kg/nZ+ufexLkNr+wxplUWNs88va/l1MpAnEN+wxJp9hL7Ba3FhJy4jcahAHPFjd
/wTxF/uGyNGMVN3oESnANO79As9Nh8zRtwwVDDREDFixoroCbl+56eusQtYRza6vo
Ql93BL5s2BP32M267n7CooZjbCLbcvSyvhxBDC5F735fUXEHKXZ3v9KJdGzUG2oNi
gPgs/OETAv5w7zpqr24GtaH0jtz+ivV4MeS07+BJSupCiNnw+AD3MRV6t4dRTd4K3
OG06IFV+v/79fgNSbEkiT+0nnIwiHtcnvw8H1vCI6oNEXjr9e6zdV1Pb+jBEEP83E
97rRVjx29dGRNb87xKH6rtI2ajYnHYV94jL4Sr1B6YwTtgP1RI6IDRCCkHfwOaABR
A==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('.version.php')) !== '<?php // Revision 1350') {
	err('This update can only be applied to OIDplus version 2.0.0.1350!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// File added: dev/backup_wip.phps
function writefile_1() {
	@$fp = fopen('dev/backup_wip.phps', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMyBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgp1c2UgVmlhVGhpbmtTb2Z0XE9JRHBsdXNcT0lEcGx1czsKdXNlIFZpYVRoaW5rU29mdFxPSURwbHVzXE9JRHBsdXNFeGNlcHRpb247CnVzZSBWaWFUaGlua1NvZnRcT0lEcGx1c1xPSURw'));
	@fwrite($fp, base64_decode('bHVzR3VpOwoKaGVhZGVyKCdDb250ZW50LVR5cGU6dGV4dC9odG1sOyBjaGFyc2V0PVVURi04Jyk7CgpyZXF1aXJlX29uY2UgX19ESVJfXyAuICcvaW5jbHVkZXMvb2lkcGx1cy5pbmMucGhwJzsKCnNldF9leGNlcHRpb25faGFuZGxlcihhcnJheShPSURwbHVzR3Vp'));
	@fwrite($fp, base64_decode('OjpjbGFzcywgJ2h0bWxfZXhjZXB0aW9uX2hhbmRsZXInKSk7CgpvYl9zdGFydCgpOyAvLyBhbGxvdyBjb29raWUgaGVhZGVycyB0byBiZSBzZW50CgpPSURwbHVzOjppbml0KHRydWUpOwoKCgoKZGVmaW5lKCdCQUNLVVBfUkVDT1ZFUllfU1BFQ0lBTF9URVNUJywg'));
	@fwrite($fp, base64_decode('dHJ1ZSk7IC8vIFRPRE86IERpc2FibGUgb24gcmVsZWFzZSEgSnVzdCBmb3IgdGVzdGluZyB0aGUgYmFja3VwL3Jlc3RvcmUgcHJvY2VkdXJlISEhCgoKCgoKLy8gPT09PT09PT09PT09PT09PSBCYWNrdXAgPT09PT09PT09PT09PT09PQoKJG51bV9yb3dzID0gWwoJ'));
	@fwrite($fp, base64_decode('Im9iamVjdHMiID0+IDAsCgkiYXNuMWlkIiA9PiAwLAoJImlyaSIgPT4gMCwKCSJyYSIgPT4gMCwKCSJsb2ciID0+ICJuL2EiLCAvLyBObyBiYWNrdXAgZm9yIHRoaXMgdGFibGUhCgkibG9nX29iamVjdCIgPT4gIm4vYSIsIC8vIE5vIGJhY2t1cCBmb3IgdGhpcyB0'));
	@fwrite($fp, base64_decode('YWJsZSEKCSJsb2dfdXNlciIgPT4gIm4vYSIsIC8vIE5vIGJhY2t1cCBmb3IgdGhpcyB0YWJsZSEKCSJjb25maWciID0+ICJuL2EiIC8vIE5vIGJhY2t1cCBmb3IgdGhpcyB0YWJsZSEKXTsKCmlmIChCQUNLVVBfUkVDT1ZFUllfU1BFQ0lBTF9URVNUKSB7CglPSURw'));
	@fwrite($fp, base64_decode('bHVzOjpkYigpLT5xdWVyeSgiZGVsZXRlIGZyb20gIyMjb2JqZWN0cyB3aGVyZSBpZCBsaWtlICclX0NMT05FJyIpOwoJT0lEcGx1czo6ZGIoKS0+cXVlcnkoImRlbGV0ZSBmcm9tICMjI2FzbjFpZCB3aGVyZSBvaWQgbGlrZSAnJV9DTE9ORSciKTsKCU9JRHBsdXM6'));
	@fwrite($fp, base64_decode('OmRiKCktPnF1ZXJ5KCJkZWxldGUgZnJvbSAjIyNpcmkgd2hlcmUgb2lkIGxpa2UgJyVfQ0xPTkUnIik7CglPSURwbHVzOjpkYigpLT5xdWVyeSgiZGVsZXRlIGZyb20gIyMjcmEgd2hlcmUgZW1haWwgbGlrZSAnJV9DTE9ORSciKTsKfQoKLy8gQmFja3VwIG9iamVj'));
	@fwrite($fp, base64_decode('dHMgKFRhYmxlcyBvYmplY3RzLCBhc24xaWQsIGlyaSkKJG9iamVjdHMgPSBbXTsKJHJlcyA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgKiBmcm9tICMjI29iamVjdHMgb3JkZXIgYnkgaWQiKTsKJHJvd3MgPSBbXTsKd2hpbGUgKCRyb3cgPSAkcmVzLT5m'));
	@fwrite($fp, base64_decode('ZXRjaF9hcnJheSgpKSB7CgkvLyBOb3QgYWxsIGRhdGFiYXNlcyBzdXBwb3J0IG11bHRpcGxlIGFjdGl2ZSByb3dzLCBzbyB3ZSBuZWVkIHRvIHJlYWQgaXQgaW4gYSBpc29sYXRlZCBsb29wCgkkcm93c1tdID0gJHJvdzsKfQpmb3JlYWNoICgkcm93cyBhcyAkcm93'));
	@fwrite($fp, base64_decode('KSB7CgkkbnVtX3Jvd3NbIm9iamVjdHMiXSsrOwoKCSRhc24xaWRzID0gW107CgkkcmVzMiA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgKiBmcm9tICMjI2FzbjFpZCB3aGVyZSBvaWQgPSA/IG9yZGVyIGJ5IG5hbWUiLCBhcnJheSgkcm93WyJpZCJdKSk7'));
	@fwrite($fp, base64_decode('Cgl3aGlsZSAoJHJvdzIgPSAkcmVzMi0+ZmV0Y2hfYXJyYXkoKSkgewoJCSRudW1fcm93c1siYXNuMWlkIl0rKzsKCQkkYXNuMWlkc1tdID0gWwoJCQkibmFtZSIgPT4gJHJvdzJbJ25hbWUnXSwKCQkJInN0YW5kYXJkaXplZCIgPT4gJHJvdzJbJ3N0YW5kYXJkaXpl'));
	@fwrite($fp, base64_decode('ZCddLAoJCQkid2VsbF9rbm93biIgPT4gJHJvdzJbJ3dlbGxfa25vd24nXSwKCQldOwoJfQoKCSRpcmlzID0gW107CgkkcmVzMiA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgKiBmcm9tICMjI2lyaSB3aGVyZSBvaWQgPSA/IG9yZGVyIGJ5IG5hbWUiLCBh'));
	@fwrite($fp, base64_decode('cnJheSgkcm93WyJpZCJdKSk7Cgl3aGlsZSAoJHJvdzIgPSAkcmVzMi0+ZmV0Y2hfYXJyYXkoKSkgewoJCSRudW1fcm93c1siaXJpIl0rKzsKCQkkaXJpc1tdID0gWwoJCQkibmFtZSIgPT4gJHJvdzJbJ25hbWUnXSwKCQkJImxvbmdhcmMiID0+ICRyb3cyWydsb25n'));
	@fwrite($fp, base64_decode('YXJjJ10sCgkJCSJ3ZWxsX2tub3duIiA9PiAkcm93Mlsnd2VsbF9rbm93biddLAoJCV07Cgl9CgoJJG9iamVjdHNbXSA9IFsKCQkiaWQiID0+ICRyb3dbImlkIl0sCgkJInBhcmVudCIgPT4gJHJvd1sicGFyZW50Il0sCgkJInRpdGxlIiA9PiAkcm93WyJ0aXRsZSJd'));
	@fwrite($fp, base64_decode('LAoJCSJkZXNjcmlwdGlvbiIgPT4gJHJvd1siZGVzY3JpcHRpb24iXSwKCQkicmFfZW1haWwiID0+ICRyb3dbInJhX2VtYWlsIl0sCgkJImNvbmZpZGVudGlhbCIgPT4gJHJvd1siY29uZmlkZW50aWFsIl0sCgkJImNyZWF0ZWQiID0+ICRyb3dbImNyZWF0ZWQiXSwK'));
	@fwrite($fp, base64_decode('CQkidXBkYXRlZCIgPT4gJHJvd1sidXBkYXRlZCJdLAoJCSJjb21tZW50IiA9PiAkcm93WyJjb21tZW50Il0sCgkJImFzbjFpZHMiID0+ICRhc24xaWRzLAoJCSJpcmlzIiA9PiAkaXJpcwoJXTsKfQoKLy8gQmFja3VwIFJBcyAoVGFibGUgcmEpCiRyYSA9IFtdOwok'));
	@fwrite($fp, base64_decode('cmVzID0gT0lEcGx1czo6ZGIoKS0+cXVlcnkoInNlbGVjdCAqIGZyb20gIyMjcmEgb3JkZXIgYnkgZW1haWwiKTsKd2hpbGUgKCRyb3cgPSAkcmVzLT5mZXRjaF9hcnJheSgpKSB7CgkkbnVtX3Jvd3NbInJhIl0rKzsKCSRyYVtdID0gWwoJCSJlbWFpbCIgPT4gJHJv'));
	@fwrite($fp, base64_decode('d1siZW1haWwiXSwKCQkicmFfbmFtZSIgPT4gJHJvd1sicmFfbmFtZSJdLAoJCSJwZXJzb25hbF9uYW1lIiA9PiAkcm93WyJwZXJzb25hbF9uYW1lIl0sCgkJIm9yZ2FuaXphdGlvbiIgPT4gJHJvd1sib3JnYW5pemF0aW9uIl0sCgkJIm9mZmljZSIgPT4gJHJvd1si'));
	@fwrite($fp, base64_decode('b2ZmaWNlIl0sCgkJInN0cmVldCIgPT4gJHJvd1sic3RyZWV0Il0sCgkJInppcF90b3duIiA9PiAkcm93WyJ6aXBfdG93biJdLAoJCSJjb3VudHJ5IiA9PiAkcm93WyJjb3VudHJ5Il0sCgkJInBob25lIiA9PiAkcm93WyJwaG9uZSJdLAoJCSJtb2JpbGUiID0+ICRy'));
	@fwrite($fp, base64_decode('b3dbIm1vYmlsZSJdLAoJCSJmYXgiID0+ICRyb3dbImZheCJdLAoJCSJwcml2YWN5IiA9PiAkcm93WyJwcml2YWN5Il0sCgkJImF1dGhrZXkiID0+ICRyb3dbImF1dGhrZXkiXSwKCQkicmVnaXN0ZXJlZCIgPT4gJHJvd1sicmVnaXN0ZXJlZCJdLAoJCSJ1cGRhdGVk'));
	@fwrite($fp, base64_decode('IiA9PiAkcm93WyJ1cGRhdGVkIl0sCgkJImxhc3RfbG9naW4iID0+ICRyb3dbImxhc3RfbG9naW4iXQoJXTsKfQoKLy8gUHV0IGV2ZXJ5dGhpbmcgdG9nZXRoZXIKJGpzb24gPSBbCgkib2lkcGx1c19iYWNrdXAiID0+IFsKCQkiZmlsZV92ZXJzaW9uIiA9PiAiMjAy'));
	@fwrite($fp, base64_decode('MyIsCgkJIm9yaWdpbl9zeXN0ZW1pZCIgPT4gT0lEcGx1czo6Z2V0U3lzdGVtSWQoZmFsc2UpID86ICJ1bmtub3duIiwKCQkiY3JlYXRlZCIgPT4gZGF0ZSgnWS1tLWQgSDppOnMgTycpLAoJCSJkYXRhc2V0X2NvdW50IiA9PiAkbnVtX3Jvd3MKCV0sCgkib2JqZWN0'));
	@fwrite($fp, base64_decode('cyIgPT4gJG9iamVjdHMsCgkicmEiID0+ICRyYQpdOwoKT0lEcGx1czo6bG9nZ2VyKCktPmxvZygiVjI6W0lORk9dQSIsICJDcmVhdGVkIGJhY2t1cCBvZiBPYmplY3RzIGFuZCBSQXMiKTsKCgokYmFja3VwX2ZpbGUgPSAnb2lkcGx1cy0nLmRhdGUoJ1ktbS1kLUgt'));
	@fwrite($fp, base64_decode('aS1zJykuJy5iYWsuanNvbic7CgokZW5jb2RlZF9kYXRhID0ganNvbl9lbmNvZGUoJGpzb24sIEpTT05fUFJFVFRZX1BSSU5UfEpTT05fVU5FU0NBUEVEX1NMQVNIRVMpOwppZiAoIWlzX2RpcihPSURwbHVzOjpsb2NhbHBhdGgoKS4nL3VzZXJkYXRhL2JhY2t1cHMv'));
	@fwrite($fp, base64_decode('JykpIEBta2RpcihPSURwbHVzOjpsb2NhbHBhdGgoKS4nL3VzZXJkYXRhL2JhY2t1cHMvJyk7CmlmIChAZmlsZV9wdXRfY29udGVudHMoT0lEcGx1czo6bG9jYWxwYXRoKCkuJy91c2VyZGF0YS9iYWNrdXBzLycuJGJhY2t1cF9maWxlLCAkZW5jb2RlZF9kYXRhKSA9'));
	@fwrite($fp, base64_decode('PT0gZmFsc2UpIHsKCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKCJDb3VsZCBub3Qgd3JpdGUgZmlsZSB0byBkaXNrOiAkYmFja3VwX2ZpbGUiKTsKfQoKZWNobyAiPHA+QmFja3VwIGRvbmU6ICRiYWNrdXBfZmlsZTwvcD4iOwpmb3JlYWNoICgkbnVtX3Jvd3Mg'));
	@fwrite($fp, base64_decode('YXMgJHRhYmxlX25hbWUgPT4gJGNudCkgewoJaWYgKCRjbnQgIT09ICJuL2EiKSAgZWNobyAiPHA+Li4uICR0YWJsZV9uYW1lOiAkY250IGRhdGFzZXRzPC9wPiI7Cn0KZWNobyAiPGhyPiI7Ci8vZWNobyAnPHByZT4nOwovL2VjaG8gaHRtbGVudGl0aWVzKCRlbmNv'));
	@fwrite($fp, base64_decode('ZGVkX2RhdGEpOwovL2VjaG8gJzwvcHJlPic7CgoKCgovLyA9PT09PT09PT09PT09PT09IFJlY292ZXJ5ID09PT09PT09PT09PT09PT0KCiRudW1fcm93cyA9IFsKCSJvYmplY3RzIiA9PiAwLAoJImFzbjFpZCIgPT4gMCwKCSJpcmkiID0+IDAsCgkicmEiID0+IDAs'));
	@fwrite($fp, base64_decode('CgkibG9nIiA9PiAibi9hIiwgLy8gTm8gYmFja3VwIGZvciB0aGlzIHRhYmxlIQoJImxvZ19vYmplY3QiID0+ICJuL2EiLCAvLyBObyBiYWNrdXAgZm9yIHRoaXMgdGFibGUhCgkibG9nX3VzZXIiID0+ICJuL2EiLCAvLyBObyBiYWNrdXAgZm9yIHRoaXMgdGFibGUh'));
	@fwrite($fp, base64_decode('CgkiY29uZmlnIiA9PiAibi9hIiAvLyBObyBiYWNrdXAgZm9yIHRoaXMgdGFibGUhCl07CgokY29udCA9IEBmaWxlX2dldF9jb250ZW50cyhPSURwbHVzOjpsb2NhbHBhdGgoKS4nL3VzZXJkYXRhL2JhY2t1cHMvJy4kYmFja3VwX2ZpbGUpOwppZiAoJGNvbnQgPT09'));
	@fwrite($fp, base64_decode('IGZhbHNlKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigiQ291bGQgbm90IHJlYWQgZmlsZSBmcm9tIGRpc2s6ICRiYWNrdXBfZmlsZSIpOwokanNvbiA9IEBqc29uX2RlY29kZSgkY29udCx0cnVlKTsKaWYgKCRqc29uID09PSBmYWxzZSkgdGhyb3cgbmV3IE9J'));
	@fwrite($fp, base64_decode('RHBsdXNFeGNlcHRpb24oIkNvdWxkIG5vdCBkZWNvZGUgSlNPTiBzdHJ1Y3R1cmUgb2YgJGJhY2t1cF9maWxlIik7CgppZiAoT0lEcGx1czo6ZGIoKS0+dHJhbnNhY3Rpb25fc3VwcG9ydGVkKCkpIE9JRHBsdXM6OmRiKCktPnRyYW5zYWN0aW9uX2JlZ2luKCk7CnRy'));
	@fwrite($fp, base64_decode('eSB7CglpZiAoIUJBQ0tVUF9SRUNPVkVSWV9TUEVDSUFMX1RFU1QpIHsKCQlPSURwbHVzOjpkYigpLT5xdWVyeSgiZGVsZXRlIGZyb20gIyMjb2JqZWN0cyIpOwoJCU9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJkZWxldGUgZnJvbSAjIyNhc24xaWQiKTsKCQlPSURwbHVz'));
	@fwrite($fp, base64_decode('OjpkYigpLT5xdWVyeSgiZGVsZXRlIGZyb20gIyMjaXJpIik7Cgl9Cglmb3JlYWNoICgoJGpzb25bIm9iamVjdHMiXT8/W10pIGFzICRyb3cpIHsKCQlpZiAoQkFDS1VQX1JFQ09WRVJZX1NQRUNJQUxfVEVTVCkgewoJCQkkcm93WydpZCddIC49ICdfQ0xPTkUnOwoJ'));
	@fwrite($fp, base64_decode('CQlpZiAoc3Vic3RyKCRyb3dbJ3BhcmVudCddLCAtMSkgIT0gJzonKSAkcm93WydwYXJlbnQnXSAuPSAnX0NMT05FJzsKCQl9CgoJCSRudW1fcm93c1sib2JqZWN0cyJdKys7CgkJT0lEcGx1czo6ZGIoKS0+cXVlcnkoImluc2VydCBpbnRvICMjI29iamVjdHMgKGlk'));
	@fwrite($fp, base64_decode('LCBwYXJlbnQsIHRpdGxlLCBkZXNjcmlwdGlvbiwgcmFfZW1haWwsIGNvbmZpZGVudGlhbCwgY3JlYXRlZCwgdXBkYXRlZCwgY29tbWVudCkgdmFsdWVzICg/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/KSIsCgkJCWFycmF5KCRyb3dbImlkIl0/P251bGwsCgkJCQkk'));
	@fwrite($fp, base64_decode('cm93WyJwYXJlbnQiXT8/bnVsbCwKCQkJCSRyb3dbInRpdGxlIl0/P251bGwsCgkJCQkkcm93WyJkZXNjcmlwdGlvbiJdPz9udWxsLAoJCQkJJHJvd1sicmFfZW1haWwiXT8/bnVsbCwKCQkJCSRyb3dbImNvbmZpZGVudGlhbCJdPz9udWxsLAoJCQkJJHJvd1siY3Jl'));
	@fwrite($fp, base64_decode('YXRlZCJdPz9udWxsLAoJCQkJJHJvd1sidXBkYXRlZCJdPz9udWxsLAoJCQkJJHJvd1siY29tbWVudCJdPz9udWxsKQoJCSk7CgoJCWZvcmVhY2ggKCgkcm93WyJhc24xaWRzIl0/P1tdKSBhcyAkcm93MikgewoJCQkkbnVtX3Jvd3NbImFzbjFpZCJdKys7CgkJCU9J'));
	@fwrite($fp, base64_decode('RHBsdXM6OmRiKCktPnF1ZXJ5KCJpbnNlcnQgaW50byAjIyNhc24xaWQgKG9pZCwgbmFtZSwgc3RhbmRhcmRpemVkLCB3ZWxsX2tub3duKSB2YWx1ZXMgKD8sID8sID8sID8pIiwKCQkJCWFycmF5KCRyb3dbImlkIl0/P251bGwsIC8vIHNpYzogJHJvdywgbm90ICRy'));
	@fwrite($fp, base64_decode('b3cyCgkJCQkJJHJvdzJbIm5hbWUiXT8/bnVsbCwKCQkJCQkkcm93Mlsic3RhbmRhcmRpemVkIl0/P251bGwsCgkJCQkJJHJvdzJbIndlbGxfa25vd24iXT8/bnVsbCkKCQkJKTsKCQl9CgoJCWZvcmVhY2ggKCgkcm93WyJpcmlzIl0/P1tdKSBhcyAkcm93MikgewoJ'));
	@fwrite($fp, base64_decode('CQkkbnVtX3Jvd3NbImlyaSJdKys7CgkJCU9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJpbnNlcnQgaW50byAjIyNpcmkgKG9pZCwgbmFtZSwgbG9uZ2FyYywgd2VsbF9rbm93bikgdmFsdWVzICg/LCA/LCA/LCA/KSIsCgkJCQlhcnJheSgkcm93WyJpZCJdPz9udWxsLCAv'));
	@fwrite($fp, base64_decode('LyBzaWM6ICRyb3csIG5vdCAkcm93MgoJCQkJCSRyb3cyWyJuYW1lIl0/P251bGwsCgkJCQkJJHJvdzJbImxvbmdhcmMiXT8/bnVsbCwKCQkJCQkkcm93Mlsid2VsbF9rbm93biJdPz9udWxsKQoJCQkpOwoJCX0KCX0KCglpZiAoIUJBQ0tVUF9SRUNPVkVSWV9TUEVD'));
	@fwrite($fp, base64_decode('SUFMX1RFU1QpIHsKCQlPSURwbHVzOjpkYigpLT5xdWVyeSgiZGVsZXRlIGZyb20gIyMjcmEiKTsKCX0KCWZvcmVhY2ggKCgkanNvblsicmEiXT8/W10pIGFzICRyb3cpIHsKCQlpZiAoQkFDS1VQX1JFQ09WRVJZX1NQRUNJQUxfVEVTVCkgewoJCQkkcm93WydlbWFp'));
	@fwrite($fp, base64_decode('bCddIC49ICdfQ0xPTkUnOwoJCX0KCgkJJG51bV9yb3dzWyJyYSJdKys7CgkJT0lEcGx1czo6ZGIoKS0+cXVlcnkoImluc2VydCBpbnRvICMjI3JhIChlbWFpbCwgcmFfbmFtZSwgcGVyc29uYWxfbmFtZSwgb3JnYW5pemF0aW9uLCBvZmZpY2UsIHN0cmVldCwgemlw'));
	@fwrite($fp, base64_decode('X3Rvd24sIGNvdW50cnksIHBob25lLCBtb2JpbGUsIGZheCwgcHJpdmFjeSwgYXV0aGtleSwgcmVnaXN0ZXJlZCwgdXBkYXRlZCwgbGFzdF9sb2dpbikgdmFsdWVzICg/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/KSIsCgkJCWFy'));
	@fwrite($fp, base64_decode('cmF5KCRyb3dbImVtYWlsIl0/P251bGwsCgkJCQkkcm93WyJyYV9uYW1lIl0/P251bGwsCgkJCQkkcm93WyJwZXJzb25hbF9uYW1lIl0/P251bGwsCgkJCQkkcm93WyJvcmdhbml6YXRpb24iXT8/bnVsbCwKCQkJCSRyb3dbIm9mZmljZSJdPz9udWxsLAoJCQkJJHJv'));
	@fwrite($fp, base64_decode('d1sic3RyZWV0Il0/P251bGwsCgkJCQkkcm93WyJ6aXBfdG93biJdPz9udWxsLAoJCQkJJHJvd1siY291bnRyeSJdPz9udWxsLAoJCQkJJHJvd1sicGhvbmUiXT8/bnVsbCwKCQkJCSRyb3dbIm1vYmlsZSJdPz9udWxsLAoJCQkJJHJvd1siZmF4Il0/P251bGwsCgkJ'));
	@fwrite($fp, base64_decode('CQkkcm93WyJwcml2YWN5Il0/P251bGwsCgkJCQkkcm93WyJhdXRoa2V5Il0/P251bGwsCgkJCQkkcm93WyJyZWdpc3RlcmVkIl0/P251bGwsCgkJCQkkcm93WyJ1cGRhdGVkIl0/P251bGwsCgkJCQkkcm93WyJsYXN0X2xvZ2luIl0/P251bGwpCgkJKTsKCX0KCgll'));
	@fwrite($fp, base64_decode('Y2hvICI8cD5CYWNrdXAgcmVzdG9yZSBkb25lOiAkYmFja3VwX2ZpbGU8L3A+IjsKCWZvcmVhY2ggKCRudW1fcm93cyBhcyAkdGFibGVfbmFtZSA9PiAkY250KSB7CgkJaWYgKCRjbnQgIT09ICJuL2EiKSAgZWNobyAiPHA+Li4uICR0YWJsZV9uYW1lOiAkY250IGRh'));
	@fwrite($fp, base64_decode('dGFzZXRzPC9wPiI7Cgl9CgllY2hvICI8aHI+IjsKCglPSURwbHVzOjpsb2dnZXIoKS0+bG9nKCJWMjpbV0FSTl1BIiwgIkVYRUNVVEVEIE9CSkVDVCBBTkQgUkEgREFUQUJBU0UgQkFDS1VQIFJFQ09WRVJZIik7CgoJaWYgKE9JRHBsdXM6OmRiKCktPnRyYW5zYWN0'));
	@fwrite($fp, base64_decode('aW9uX3N1cHBvcnRlZCgpKSBPSURwbHVzOjpkYigpLT50cmFuc2FjdGlvbl9jb21taXQoKTsKfSBjYXRjaCAoXEV4Y2VwdGlvbiAkZSkgewoJaWYgKE9JRHBsdXM6OmRiKCktPnRyYW5zYWN0aW9uX3N1cHBvcnRlZCgpKSBPSURwbHVzOjpkYigpLT50cmFuc2FjdGlv'));
	@fwrite($fp, base64_decode('bl9yb2xsYmFjaygpOwoJdGhyb3cgJGU7Cn0KCgoKCgoKT0lEcGx1czo6aW52b2tlX3NodXRkb3duKCk7DQo='));
	@fclose($fp);
}
if (is_file('dev/backup_wip.phps') && (sha1_file('dev/backup_wip.phps') != 'a99925a1e8a3c89d4e1431a19253ac3f70bb36e6')) {
	warn('File was created by someone else. Will overwrite the changes now: dev/backup_wip.phps');
	$tmp = pathinfo('dev/backup_wip.phps');
	$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('dev/backup_wip.phps')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
	warn('Creating a backup as '.$backup_name);
	if (!@copy('dev/backup_wip.phps', $backup_name)) {
		warn('Creation of backup failed');
	}
}
writefile_1();
if (!is_file('dev/backup_wip.phps')) {
	warn('File cannot be created (not existing): dev/backup_wip.phps');
} else if (sha1_file('dev/backup_wip.phps') != 'a99925a1e8a3c89d4e1431a19253ac3f70bb36e6') {
	warn('File cannot be created (checksum mismatch): dev/backup_wip.phps');
} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('dev/backup_wip.phps', 0644)) {
	warn('Could not change file permissions of dev/backup_wip.phps');
}


file_put_contents('.version.php', "<?php // Revision 1351\n");
if (trim(@file_get_contents('.version.php')) !== '<?php // Revision 1351') err('Could not write to .version.php!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

