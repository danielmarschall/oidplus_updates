<?php /* <ViaThinkSoftSignature>
dWgnYZ2H5lF/hr7v0iVIN/tjIXIKKDtBj473QRnP9mpMlfqFQw/f3kfpl69dcKqEM
Pe2pXrPRpq/DXhhJY6VcwiA3jbNLwjJBXVk3v7jOq6cXKXNncxwuuPAbw8aysPcR4
4GkGKZCz30P6gS5C/GdqVgDO5PEDWL1fdREN+NL6p7GbSO37wSADtXaiGr02Yj4n1
bmcuM2ppQHY51tO/zmPXQsdgMsoB7d4Q0lk08zt3X6MusH02jU5MN6ShY5KH2pPUD
o5vC34uZOMVhq6lpUN4Q3XujQ/G4XOOMwNpXwIKjUcdASzpIUQpGdGjDMECeHJSPy
ZFkAyuytUNFB62OAxggyGhrHdzcd0a0lB1KqcJaxLN+qeaXBm1NdcRWCeXoufZ5Dw
8sO5KzuSaM/ialTpVZUecWpMYDNwGFcvjxSIfyaO0inL5mYx7k6VmcksLVtl1LIXW
gE1ULMjazRbX/3FgSZ8/AuupXKsltjbDfCP4t0nNz1i8asxSCtJ0GbaJL8SRoZsg4
9UdD7NCwL3WqNgF6FevMTGfVccX5a6e4sKS/Nlb1NS06hzO3mXVAnk3ES4G38KwtG
FyLTegnSfT6ApS8pS+Wme1J0w1fQA1kjK/I759VZeBkNUv/yy/qwXtug8c3o1VtbH
S8Yuxf3cpaJXNJI55IKphW96L7DA7wFX06zBCFa04YZ7Oyats9ma8lMt7Ji9qYMuT
9H+PslUviWQGbEzVn+iUtP0ls1ddyN6iJ6Hk5b2JQ3eq/2qsU3SClBru7qoND3tZw
YTyodrUHFn5HC3QXEc1ocUxdkMZXyAbY5fEdZvHKSlKwuU2vXsmmNZQWmS3BpY/YK
7XVNC+NbUnDCUVnm1ENHZTj/Pvn4gFkj5gQ1v31XiB3BU2Dk97CTldDJJImFN68T+
uaz4f1ZzWqNfkU+U7BL4XzQqlvL30M5X1dPADdy1v1WMmB6mG/2buBrhgi4tHhVP/
2YmCNja5zrrTH9RywLI0BES3wi6old7FQAsYTUSe5Qq2njJp1IZ5B1eG00HWjLzgq
pXKsfWVNR2SEv9FEFHdRiF58gT4RKmVWKl0LBEC6tqH3nye/OrNuBuLnblsrx365x
GfyxOGJF5BZW4NvhPvbnNDkeBIsX0VvIOLbOfz4zHmk17ATe6Gkz9yNWjBYkXgjEp
SRLBxDJT61OIHrue1PLN2mXLJRmjbax4nyNHu3nFnjZ8ow2xuuFaZJcypcVZS2Xc4
uKxNKMiTdSs0spcXLlwj7BkCgzdE9oSrwooeSn10bMiziA4VDUA1IjVYuOMjmtrd4
3AvzsFAzCldCs92g8U1C8ggjZpXTS+MJ07M+hBXfy6kMvett/ui9Jghqpf6U4I0Vd
g==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 168') {
	err('This update can only be applied to OIDplus version 2.0.0.168!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: includes/classes/OIDplusObject.class.php
function writefile_1() {
	@$fp = fopen('includes/classes/OIDplusObject.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmlmICghZGVmaW5lZCgnSU5fT0lEUExVUycpKSBkaWUoKTsKCmRlZmluZSgnT0lEUExVU19PQkpFQ1RfQ0FDSElORycsIHRydWUpOwoKYWJzdHJhY3QgY2xhc3MgT0lEcGx1c09iamVjdCB7CglwdWJs'));
	@fwrite($fp, base64_decode('aWMgc3RhdGljIGZ1bmN0aW9uIHBhcnNlKCRub2RlX2lkKSB7IC8vIHBsZWFzZSBvdmVyd3JpdGUgdGhpcyBmdW5jdGlvbiEKCQkvLyBUT0RPOiBpbiBjYXNlIHdlIGFyZSBub3QgY2FsbGluZyB0aGlzIGNsYXNzIGRpcmVjdGx5LCBjaGVjayBpZiBmdW5jdGlvbiBp'));
	@fwrite($fp, base64_decode('cyBvdmVyd3JpdHRlbiBhbmQgdGhyb3cgZXhjZXB0aW9uIG90aGVyd2lzZQoJCWZvcmVhY2ggKE9JRHBsdXM6OmdldFJlZ2lzdGVyZWRPYmplY3RUeXBlcygpIGFzICRvdCkgewoJCQlpZiAoJG9iaiA9ICRvdDo6cGFyc2UoJG5vZGVfaWQpKSByZXR1cm4gJG9iajsK'));
	@fwrite($fp, base64_decode('CQl9CgkJcmV0dXJuIG51bGw7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGdldE9pZCgpIHsKCQlpZiAoJHRoaXMtPm5zKCkgPT0gJ29pZCcpIHsKCQkJcmV0dXJuICR0aGlzLT5nZXREb3ROb3RhdGlvbigpOwoJCX0gZWxzZSB7CgkJCSRzaWQgPSBPSURwbHVzOjpzeXN0'));
	@fwrite($fp, base64_decode('ZW1faWQodHJ1ZSk7CgkJCWlmIChlbXB0eSgkc2lkKSkgcmV0dXJuIGZhbHNlOwoJCQlyZXR1cm4gJHNpZCAuICcuJyAuIHNtYWxsaGFzaCgkdGhpcy0+bm9kZUlkKCkpOwoJCX0KCX0KCglwdWJsaWMgYWJzdHJhY3Qgc3RhdGljIGZ1bmN0aW9uIG9iamVjdFR5cGVU'));
	@fwrite($fp, base64_decode('aXRsZSgpOwoKCXB1YmxpYyBhYnN0cmFjdCBzdGF0aWMgZnVuY3Rpb24gb2JqZWN0VHlwZVRpdGxlU2hvcnQoKTsKCglwdWJsaWMgYWJzdHJhY3Qgc3RhdGljIGZ1bmN0aW9uIG5zKCk7CgoJcHVibGljIGFic3RyYWN0IHN0YXRpYyBmdW5jdGlvbiByb290KCk7CgoJ'));
	@fwrite($fp, base64_decode('cHVibGljIGFic3RyYWN0IGZ1bmN0aW9uIGlzUm9vdCgpOwoKCXB1YmxpYyBhYnN0cmFjdCBmdW5jdGlvbiBub2RlSWQoKTsKCglwdWJsaWMgYWJzdHJhY3QgZnVuY3Rpb24gYWRkU3RyaW5nKCRzdHIpOwoKCXB1YmxpYyBhYnN0cmFjdCBmdW5jdGlvbiBjcnVkU2hv'));
	@fwrite($fp, base64_decode('d0lkKE9JRHBsdXNPYmplY3QgJHBhcmVudCk7CgoJcHVibGljIGFic3RyYWN0IGZ1bmN0aW9uIGNydWRJbnNlcnRQcmVmaXgoKTsKCglwdWJsaWMgYWJzdHJhY3QgZnVuY3Rpb24ganNUcmVlTm9kZU5hbWUoT0lEcGx1c09iamVjdCAkcGFyZW50ID0gbnVsbCk7CgoJ'));
	@fwrite($fp, base64_decode('cHVibGljIGFic3RyYWN0IGZ1bmN0aW9uIGRlZmF1bHRUaXRsZSgpOwoKCXB1YmxpYyBhYnN0cmFjdCBmdW5jdGlvbiBpc0xlYWZOb2RlKCk7CgoJcHVibGljIGFic3RyYWN0IGZ1bmN0aW9uIGdldENvbnRlbnRQYWdlKCYkdGl0bGUsICYkY29udGVudCwgJiRpY29u'));
	@fwrite($fp, base64_decode('KTsKCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldFJhUm9vdHMoJHJhX2VtYWlsPW51bGwpIHsKCQlpZiAoJHJhX2VtYWlsIGluc3RhbmNlb2YgT0lEcGx1c1JBKSAkcmFfZW1haWwgPSAkcmFfZW1haWwtPnJhRW1haWwoKTsKCgkJJG91dCA9IGFycmF5KCk7CgoJ'));
	@fwrite($fp, base64_decode('CWlmICghT0lEUExVU19PQkpFQ1RfQ0FDSElORykgewoJCQlpZiAoaXNfbnVsbCgkcmFfZW1haWwpKSB7CgkJCQkkcmVzID0gT0lEcGx1czo6ZGIoKS0+cXVlcnkoInNlbGVjdCBvQ2hpbGQuaWQgYXMgaWQsIG9DaGlsZC5yYV9lbWFpbCBhcyBjaGlsZF9tYWlsLCBv'));
	@fwrite($fp, base64_decode('UGFyZW50LnJhX2VtYWlsIGFzIHBhcmVudF9tYWlsIGZyb20gIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguIm9iamVjdHMgYXMgb0NoaWxkICIuCgkJCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgImxlZnQgam9pbiAiLk9JRFBMVVNfVEFCTEVOQU1FX1BS'));
	@fwrite($fp, base64_decode('RUZJWC4ib2JqZWN0cyBhcyBvUGFyZW50IG9uIG9DaGlsZC5wYXJlbnQgPSBvUGFyZW50LmlkICIuCgkJCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm9yZGVyIGJ5ICIuT0lEcGx1czo6ZGIoKS0+bmF0T3JkZXIoJ29DaGlsZC5pZCcpKTsKCQkJCXdoaWxl'));
	@fwrite($fp, base64_decode('ICgkcm93ID0gT0lEcGx1czo6ZGIoKS0+ZmV0Y2hfYXJyYXkoJHJlcykpIHsKCQkJCQlpZiAoIU9JRHBsdXM6OmF1dGhVdGlscygpOjppc1JhTG9nZ2VkSW4oJHJvd1sncGFyZW50X21haWwnXSkgJiYgT0lEcGx1czo6YXV0aFV0aWxzKCk6OmlzUmFMb2dnZWRJbigk'));
	@fwrite($fp, base64_decode('cm93WydjaGlsZF9tYWlsJ10pKSB7CgkJCQkJCSR4ID0gc2VsZjo6cGFyc2UoJHJvd1snaWQnXSk7IC8vIGNhbiBiZSBGQUxTRSBpZiBuYW1lc3BhY2Ugd2FzIGRpc2FibGVkCgkJCQkJCWlmICgkeCkgJG91dFtdID0gJHg7CgkJCQkJfQoJCQkJfQoJCQl9IGVsc2Ug'));
	@fwrite($fp, base64_decode('ewoJCQkJJHJlcyA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3Qgb0NoaWxkLmlkIGFzIGlkIGZyb20gIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguIm9iamVjdHMgYXMgb0NoaWxkICIuCgkJCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgImxlZnQg'));
	@fwrite($fp, base64_decode('am9pbiAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4ib2JqZWN0cyBhcyBvUGFyZW50IG9uIG9DaGlsZC5wYXJlbnQgPSBvUGFyZW50LmlkICIuCgkJCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgIndoZXJlIChpZm51bGwob1BhcmVudC5yYV9lbWFpbCwn'));
	@fwrite($fp, base64_decode('JykgPD4gPyBhbmQgaWZudWxsKG9DaGlsZC5yYV9lbWFpbCwnJykgPSA/KSBvciAiLgoJCQkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAob1BhcmVudC5yYV9lbWFpbCBpcyBudWxsIGFuZCBpZm51bGwob0NoaWxkLnJhX2VtYWlsLCcnKSA9ID8p'));
	@fwrite($fp, base64_decode('ICIuCgkJCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm9yZGVyIGJ5ICIuT0lEcGx1czo6ZGIoKS0+bmF0T3JkZXIoJ29DaGlsZC5pZCcpLCBhcnJheSgkcmFfZW1haWwsICRyYV9lbWFpbCwgJHJhX2VtYWlsKSk7CgkJCQl3aGlsZSAoJHJvdyA9IE9JRHBs'));
	@fwrite($fp, base64_decode('dXM6OmRiKCktPmZldGNoX2FycmF5KCRyZXMpKSB7CgkJCQkJJHggPSBzZWxmOjpwYXJzZSgkcm93WydpZCddKTsgLy8gY2FuIGJlIEZBTFNFIGlmIG5hbWVzcGFjZSB3YXMgZGlzYWJsZWQKCQkJCQlpZiAoJHgpICRvdXRbXSA9IHNlbGY6OnBhcnNlKCRyb3dbJ2lk'));
	@fwrite($fp, base64_decode('J10pOwoJCQkJfQoJCQl9CgkJfSBlbHNlIHsKCQkJaWYgKGlzX251bGwoJHJhX2VtYWlsKSkgewoJCQkJJHJhX21haWxzX3RvX2NoZWNrID0gT0lEcGx1c0F1dGhVdGlsczo6bG9nZ2VkSW5SYUxpc3QoKTsKCQkJCWlmIChjb3VudCgkcmFfbWFpbHNfdG9fY2hlY2sp'));
	@fwrite($fp, base64_decode('ID09IDApIHJldHVybiAkb3V0OwoJCQl9IGVsc2UgewoJCQkJJHJhX21haWxzX3RvX2NoZWNrID0gYXJyYXkoJHJhX2VtYWlsKTsKCQkJfQoKCQkJc2VsZjo6YnVpbGRPYmplY3RJbmZvcm1hdGlvbkNhY2hlKCk7CgoJCQlmb3JlYWNoICgkcmFfbWFpbHNfdG9fY2hl'));
	@fwrite($fp, base64_decode('Y2sgYXMgJGNoZWNrX3JhX21haWwpIHsKCQkJCSR0bXAgPSBzZWxmOjokb2JqZWN0X2luZm9fY2FjaGU7CgoJCQkJZm9yZWFjaCAoJHRtcCBhcyAkaWQgPT4gbGlzdCgkY29uZmlkZW50aWFsLCAkcGFyZW50LCAkcmFfZW1haWwpKSB7CgkJCQkJJHRtcFskaWRdW10g'));
	@fwrite($fp, base64_decode('PSAkcmFfZW1haWwgPT0gJGNoZWNrX3JhX21haWw7IC8vIGFkZCBhIHRlbXBvcmFyeSAiY2hvb3NlIGZsYWciCgkJCQl9CgoJCQkJZm9yZWFjaCAoJHRtcCBhcyAkaWQgPT4gbGlzdCgkY29uZmlkZW50aWFsLCAkcGFyZW50LCAkcmFfZW1haWwsICRjaG9vc2VfZmxh'));
	@fwrite($fp, base64_decode('ZykpIHsKCQkJCQlpZiAoaXNzZXQoJHRtcFskcGFyZW50XSkpIHsKCQkJCQkJaWYgKCR0bXBbJHBhcmVudF1bc2VsZjo6Q0FDSEVfUkFfRU1BSUxdID09ICRyYV9lbWFpbCkgewoJCQkJCQkJJHRtcFskaWRdWzNdID0gZmFsc2U7IC8vIGlmIHRoZSBwYXJlbnQgaGFz'));
	@fwrite($fp, base64_decode('IHRoZSBzYW1lIFJBLCB0aGVuIHRoaXMgT0lEIGNhbm5vdCBiZSBhIHJvb3QgPT4gcmVtb3ZlICJjaG9vc2UgZmxhZyIKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCgkJCQkkb3V0X3BhcnQgPSBhcnJheSgpOwoKCQkJCWZvcmVhY2ggKCR0bXAgYXMgJGlkID0+IGxpc3Qo'));
	@fwrite($fp, base64_decode('JGNvbmZpZGVudGlhbCwgJHBhcmVudCwgJHJhX2VtYWlsLCAkY2hvb3NlX2ZsYWcpKSB7CgkJCQkJaWYgKCRjaG9vc2VfZmxhZykgewoJCQkJCQkkb3V0X3BhcnRbXSA9ICRpZDsKCQkJCQl9CgkJCQl9CgoJCQkJbmF0c29ydCgkb3V0X3BhcnQpOwoKCQkJCWZvcmVh'));
	@fwrite($fp, base64_decode('Y2ggKCRvdXRfcGFydCBhcyAkaWQpIHsKCQkJCQkkb2JqID0gc2VsZjo6cGFyc2UoJGlkKTsKCQkJCQlpZiAoJG9iaikgJG91dFtdID0gJG9iajsKCQkJCX0KCQkJfQoJCX0KCgkJcmV0dXJuICRvdXQ7Cgl9CgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRBbGxO'));
	@fwrite($fp, base64_decode('b25Db25maWRlbnRpYWwoKSB7CgkJJG91dCA9IGFycmF5KCk7CgoJCWlmICghT0lEUExVU19PQkpFQ1RfQ0FDSElORykgewoJCQkkcmVzID0gT0lEcGx1czo6ZGIoKS0+cXVlcnkoInNlbGVjdCBpZCBmcm9tICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJvYmpl'));
	@fwrite($fp, base64_decode('Y3RzIHdoZXJlIGNvbmZpZGVudGlhbCA9IDAgb3JkZXIgYnkgIi5PSURwbHVzOjpkYigpLT5uYXRPcmRlcignaWQnKSk7CgoJCQl3aGlsZSAoJHJvdyA9IE9JRHBsdXM6OmRiKCktPmZldGNoX2FycmF5KCRyZXMpKSB7CgkJCQkkb2JqID0gc2VsZjo6cGFyc2UoJHJv'));
	@fwrite($fp, base64_decode('d1snaWQnXSk7IC8vIHdpbGwgYmUgTlVMTCBpZiB0aGUgb2JqZWN0IHR5cGUgaXMgbm90IHJlZ2lzdGVyZWQKCQkJCWlmICgkb2JqICYmICghJG9iai0+aXNDb25maWRlbnRpYWwoKSkpIHsKCQkJCQkkb3V0W10gPSAkcm93WydpZCddOwoJCQkJfQoJCQl9CgkJfSBl'));
	@fwrite($fp, base64_decode('bHNlIHsKCQkJc2VsZjo6YnVpbGRPYmplY3RJbmZvcm1hdGlvbkNhY2hlKCk7CgoJCQlmb3JlYWNoIChzZWxmOjokb2JqZWN0X2luZm9fY2FjaGUgYXMgJGlkID0+IGxpc3QoJGNvbmZpZGVudGlhbCwgJHBhcmVudCwgJHJhX2VtYWlsKSkgewoJCQkJaWYgKCEkY29u'));
	@fwrite($fp, base64_decode('ZmlkZW50aWFsKSB7CgkJCQkJJG9iaiA9IHNlbGY6OnBhcnNlKCRpZCk7IC8vIHdpbGwgYmUgTlVMTCBpZiB0aGUgb2JqZWN0IHR5cGUgaXMgbm90IHJlZ2lzdGVyZWQKCQkJCQlpZiAoJG9iaiAmJiAoISRvYmotPmlzQ29uZmlkZW50aWFsKCkpKSB7CgkJCQkJCSRv'));
	@fwrite($fp, base64_decode('dXRbXSA9ICRpZDsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9CgoJCXJldHVybiAkb3V0OwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBpc0NvbmZpZGVudGlhbCgpIHsKCQlpZiAoIU9JRFBMVVNfT0JKRUNUX0NBQ0hJTkcpIHsKCQkJJGN1cmlkID0gJHRoaXMtPm5vZGVJZCgp'));
	@fwrite($fp, base64_decode('OwoJCQkkb3JpZ19jdXJpZCA9ICRjdXJpZDsKCQkJaWYgKGlzc2V0KHNlbGY6OiRvYmplY3RfaW5mb19jYWNoZVskY3VyaWRdKSkgcmV0dXJuIHNlbGY6OiRvYmplY3RfaW5mb19jYWNoZVskY3VyaWRdOwoJCQkvLyBSZWN1cnNpdmVseSBzZWFyY2ggZm9yIHRoZSBj'));
	@fwrite($fp, base64_decode('b25maWRlbnRpYWwgZmxhZyBpbiB0aGUgcGFyZW50cwoJCQl3aGlsZSAoT0lEcGx1czo6ZGIoKS0+bnVtX3Jvd3MoJHJlcyA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgcGFyZW50LCBjb25maWRlbnRpYWwgZnJvbSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BS'));
	@fwrite($fp, base64_decode('RUZJWC4ib2JqZWN0cyB3aGVyZSBpZCA9ID8iLCBhcnJheSgkY3VyaWQpKSkgPiAwKSB7CgkJCQkkcm93ID0gT0lEcGx1czo6ZGIoKS0+ZmV0Y2hfYXJyYXkoJHJlcyk7CgkJCQlpZiAoJHJvd1snY29uZmlkZW50aWFsJ10pIHsKCQkJCQlzZWxmOjokb2JqZWN0X2lu'));
	@fwrite($fp, base64_decode('Zm9fY2FjaGVbJGN1cmlkXSA9IHRydWU7CgkJCQkJc2VsZjo6JG9iamVjdF9pbmZvX2NhY2hlWyRvcmlnX2N1cmlkXSA9IHRydWU7CgkJCQkJcmV0dXJuIHRydWU7CgkJCQl9IGVsc2UgewoJCQkJCXNlbGY6OiRvYmplY3RfaW5mb19jYWNoZVskY3VyaWRdID0gZmFs'));
	@fwrite($fp, base64_decode('c2U7CgkJCQl9CgkJCQkkY3VyaWQgPSAkcm93WydwYXJlbnQnXTsKCQkJCWlmIChpc3NldChzZWxmOjokb2JqZWN0X2luZm9fY2FjaGVbJGN1cmlkXSkpIHsKCQkJCQlzZWxmOjokb2JqZWN0X2luZm9fY2FjaGVbJG9yaWdfY3VyaWRdID0gc2VsZjo6JG9iamVjdF9p'));
	@fwrite($fp, base64_decode('bmZvX2NhY2hlWyRjdXJpZF07CgkJCQkJcmV0dXJuIHNlbGY6OiRvYmplY3RfaW5mb19jYWNoZVskY3VyaWRdOwoJCQkJfQoJCQl9CgoJCQlzZWxmOjokb2JqZWN0X2luZm9fY2FjaGVbJG9yaWdfY3VyaWRdID0gZmFsc2U7CgkJCXJldHVybiBmYWxzZTsKCQl9IGVs'));
	@fwrite($fp, base64_decode('c2UgewoJCQlzZWxmOjpidWlsZE9iamVjdEluZm9ybWF0aW9uQ2FjaGUoKTsKCgkJCSRjdXJpZCA9ICR0aGlzLT5ub2RlSWQoKTsKCQkJLy8gUmVjdXJzaXZlbHkgc2VhcmNoIGZvciB0aGUgY29uZmlkZW50aWFsIGZsYWcgaW4gdGhlIHBhcmVudHMKCQkJd2hpbGUg'));
	@fwrite($fp, base64_decode('KGlzc2V0KHNlbGY6OiRvYmplY3RfaW5mb19jYWNoZVskY3VyaWRdKSkgewoJCQkJaWYgKHNlbGY6OiRvYmplY3RfaW5mb19jYWNoZVskY3VyaWRdW3NlbGY6OkNBQ0hFX0NPTkZJREVOVElBTF0pIHJldHVybiB0cnVlOwoJCQkJJGN1cmlkID0gc2VsZjo6JG9iamVj'));
	@fwrite($fp, base64_decode('dF9pbmZvX2NhY2hlWyRjdXJpZF1bc2VsZjo6Q0FDSEVfUEFSRU5UXTsKCQkJfQoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBpc0NoaWxkT2YoT0lEcGx1c09iamVjdCAkb2JqKSB7CgkJaWYgKCFPSURQTFVTX09CSkVDVF9DQUNISU5H'));
	@fwrite($fp, base64_decode('KSB7CgkJCSRjdXJpZCA9ICR0aGlzLT5ub2RlSWQoKTsKCQkJd2hpbGUgKE9JRHBsdXM6OmRiKCktPm51bV9yb3dzKCRyZXMgPSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0IHBhcmVudCBmcm9tICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJvYmplY3Rz'));
	@fwrite($fp, base64_decode('IHdoZXJlIGlkID0gPyIsIGFycmF5KCRjdXJpZCkpKSA+IDApIHsKCQkJCSRyb3cgPSBPSURwbHVzOjpkYigpLT5mZXRjaF9hcnJheSgkcmVzKTsKCQkJCWlmICgkY3VyaWQgPT0gJG9iai0+bm9kZUlkKCkpIHJldHVybiB0cnVlOwoJCQkJJGN1cmlkID0gJHJvd1sn'));
	@fwrite($fp, base64_decode('cGFyZW50J107CgkJCX0KCQkJcmV0dXJuIGZhbHNlOwoJCX0gZWxzZSB7CgkJCXNlbGY6OmJ1aWxkT2JqZWN0SW5mb3JtYXRpb25DYWNoZSgpOwoKCQkJJGN1cmlkID0gJHRoaXMtPm5vZGVJZCgpOwoJCQl3aGlsZSAoaXNzZXQoc2VsZjo6JG9iamVjdF9pbmZvX2Nh'));
	@fwrite($fp, base64_decode('Y2hlWyRjdXJpZF0pKSB7CgkJCQlpZiAoJGN1cmlkID09ICRvYmotPm5vZGVJZCgpKSByZXR1cm4gdHJ1ZTsKCQkJCSRjdXJpZCA9IHNlbGY6OiRvYmplY3RfaW5mb19jYWNoZVskY3VyaWRdW3NlbGY6OkNBQ0hFX1BBUkVOVF07CgkJCX0KCQkJcmV0dXJuIGZhbHNl'));
	@fwrite($fp, base64_decode('OwoJCX0KCX0KCglwdWJsaWMgZnVuY3Rpb24gZ2V0Q2hpbGRyZW4oKSB7CgkJJG91dCA9IGFycmF5KCk7CgkJaWYgKCFPSURQTFVTX09CSkVDVF9DQUNISU5HKSB7CgkJCSRyZXMgPSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0IGlkIGZyb20gIi5PSURQTFVT'));
	@fwrite($fp, base64_decode('X1RBQkxFTkFNRV9QUkVGSVguIm9iamVjdHMgd2hlcmUgcGFyZW50ID0gPyIsIGFycmF5KCR0aGlzLT5ub2RlSWQoKSkpOwoJCQl3aGlsZSAoJHJvdyA9IE9JRHBsdXM6OmRiKCktPmZldGNoX2FycmF5KCRyZXMpKSB7CgkJCQkkb2JqID0gc2VsZjo6cGFyc2UoJHJv'));
	@fwrite($fp, base64_decode('d1snaWQnXSk7CgkJCQlpZiAoISRvYmopIGNvbnRpbnVlOwoJCQkJJG91dFtdID0gJG9iajsKCQkJfQoJCX0gZWxzZSB7CgkJCXNlbGY6OmJ1aWxkT2JqZWN0SW5mb3JtYXRpb25DYWNoZSgpOwoKCQkJZm9yZWFjaCAoc2VsZjo6JG9iamVjdF9pbmZvX2NhY2hlIGFz'));
	@fwrite($fp, base64_decode('ICRpZCA9PiBsaXN0KCRjb25maWRlbnRpYWwsICRwYXJlbnQsICRyYV9lbWFpbCkpIHsKCQkJCWlmICgkcGFyZW50ID09ICR0aGlzLT5ub2RlSWQoKSkgewoJCQkJCSRvYmogPSBzZWxmOjpwYXJzZSgkaWQpOwoJCQkJCWlmICghJG9iaikgY29udGludWU7CgkJCQkJ'));
	@fwrite($fp, base64_decode('JG91dFtdID0gJG9iajsKCQkJCX0KCQkJfQoJCX0KCQlyZXR1cm4gJG91dDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZ2V0UmEoKSB7CgkJcmV0dXJuIG5ldyBPSURwbHVzUkEoJHRoaXMtPmdldFJhTWFpbCgpKTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gdXNlckhhc1Jl'));
	@fwrite($fp, base64_decode('YWRSaWdodHMoJHJhX2VtYWlsPW51bGwpIHsKCQlpZiAoJHJhX2VtYWlsIGluc3RhbmNlb2YgT0lEcGx1c1JBKSAkcmFfZW1haWwgPSAkcmFfZW1haWwtPnJhRW1haWwoKTsKCgkJLy8gQWRtaW4gbWF5IGRvIGV2ZXJ5dGhpbmcKCQlpZiAoT0lEcGx1czo6YXV0aFV0'));
	@fwrite($fp, base64_decode('aWxzKCk6OmlzQWRtaW5Mb2dnZWRJbigpKSByZXR1cm4gdHJ1ZTsKCgkJLy8gSWYgaXQgaXMgbm90IGNvbmZpZGVudGlhbCwgZXZlcnlib2R5IGNhbiByZWFkL3NlZSBpdC4KCQlpZiAoISR0aGlzLT5pc0NvbmZpZGVudGlhbCgpKSByZXR1cm4gdHJ1ZTsKCgkJLy8g'));
	@fwrite($fp, base64_decode('SWYgd2Ugb3duIHRoZSBvYmplY3QsIHdlIG1heSBzZWUgaXQKCQlpZiAoaXNfbnVsbCgkcmFfZW1haWwpKSB7CgkJCWlmICgkdGhpcy0+dXNlckhhc1dyaXRlUmlnaHRzKCkpIHJldHVybiB0cnVlOwoJCX0gZWxzZSB7CgkJCWlmICgkdGhpcy0+Z2V0UmFNYWlsKCkg'));
	@fwrite($fp, base64_decode('PT0gJHJhX2VtYWlsKSByZXR1cm4gdHJ1ZTsKCQl9CgoJCS8vIElmIHNvbWVvbmUgaGFzIHJpZ2h0cyB0byBhbiBvYmplY3QgYmVsb3cgb3VyIGNvbmZpZGVudGlhbCBub2RlLAoJCS8vIHdlIGxldCBoaW0gc2VlIHRoZSBjb25maWRlbnRpYWwgbm9kZSwKCQkvLyBP'));
	@fwrite($fp, base64_decode('dGhlcndpc2UgaGUgY291bGQgbm90IGJyb3dzZSB0aHJvdWdoIHRvIGhpcyBvd24gbm9kZS4KCQkkcm9vdHMgPSAkdGhpcy0+Z2V0UmFSb290cygkcmFfZW1haWwpOwoJCWZvcmVhY2ggKCRyb290cyBhcyAkcm9vdCkgewoJCQlpZiAoJHJvb3QtPmlzQ2hpbGRPZigk'));
	@fwrite($fp, base64_decode('dGhpcykpIHJldHVybiB0cnVlOwoJCX0KCgkJcmV0dXJuIGZhbHNlOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXRJY29uKCRyb3c9bnVsbCkgewoJCSRuYW1lc3BhY2UgPSAkdGhpcy0+bnMoKTsgLy8gbXVzdCB1c2UgJHRoaXMsIG5vdCBzZWxmOjosIG90aGVyd2lz'));
	@fwrite($fp, base64_decode('ZSB0aGUgdmlydHVhbCBtZXRob2Qgd2lsbCBub3QgYmUgY2FsbGVkCgoJCWlmIChpc19udWxsKCRyb3cpKSB7CgkJCSRyYV9lbWFpbCA9ICR0aGlzLT5nZXRSYU1haWwoKTsKCQl9IGVsc2UgewoJCQkkcmFfZW1haWwgPSAkcm93WydyYV9lbWFpbCddOwoJCX0KCQkv'));
	@fwrite($fp, base64_decode('LyBUT0RPOiBoYXZlIGRpZmZlcmVudCBpY29ucyBmb3IgTGVhZi1Ob2RlcwoJCWlmIChPSURwbHVzOjphdXRoVXRpbHMoKTo6aXNSYUxvZ2dlZEluKCRyYV9lbWFpbCkpIHsKCQkJJGljb24gPSAncGx1Z2lucy9vYmplY3RUeXBlcy8nLiRuYW1lc3BhY2UuJy9pbWcv'));
	@fwrite($fp, base64_decode('dHJlZWljb25fb3duLnBuZyc7CgkJfSBlbHNlIHsKCQkJJGljb24gPSAncGx1Z2lucy9vYmplY3RUeXBlcy8nLiRuYW1lc3BhY2UuJy9pbWcvdHJlZWljb25fZ2VuZXJhbC5wbmcnOwoJCX0KCQlpZiAoIWZpbGVfZXhpc3RzKCRpY29uKSkgJGljb24gPSBudWxsOyAv'));
	@fwrite($fp, base64_decode('LyBkZWZhdWx0IGljb24gKGZvbGRlcikKCQlyZXR1cm4gJGljb247Cgl9CgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBleGlzdHMoJGlkKSB7CgkJaWYgKCFPSURQTFVTX09CSkVDVF9DQUNISU5HKSB7CgkJCSRyZXMgPSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2Vs'));
	@fwrite($fp, base64_decode('ZWN0IGlkIGZyb20gIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguIm9iamVjdHMgd2hlcmUgaWQgPSA/IiwgYXJyYXkoJGlkKSk7CgkJCXJldHVybiBPSURwbHVzOjpkYigpLT5udW1fcm93cygkcmVzKSA+IDA7CgkJfSBlbHNlIHsKCQkJc2VsZjo6YnVpbGRPYmpl'));
	@fwrite($fp, base64_decode('Y3RJbmZvcm1hdGlvbkNhY2hlKCk7CgkJCXJldHVybiBpc3NldChzZWxmOjokb2JqZWN0X2luZm9fY2FjaGVbJGlkXSk7CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXRQYXJlbnQoKSB7CgkJaWYgKCFPSURQTFVTX09CSkVDVF9DQUNISU5HKSB7CgkJCSRyZXMg'));
	@fwrite($fp, base64_decode('PSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0IHBhcmVudCBmcm9tICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJvYmplY3RzIHdoZXJlIGlkID0gPyIsIGFycmF5KCR0aGlzLT5ub2RlSWQoKSkpOwoJCQkkcm93ID0gT0lEcGx1czo6ZGIoKS0+ZmV0Y2hf'));
	@fwrite($fp, base64_decode('YXJyYXkoJHJlcyk7CgkJCSRwYXJlbnQgPSAkcm93WydwYXJlbnQnXTsKCQkJJG9iaiA9IE9JRHBsdXNPYmplY3Q6OnBhcnNlKCRwYXJlbnQpOwoJCQlpZiAoJG9iaikgcmV0dXJuICRvYmo7CgkJfSBlbHNlIHsKCQkJc2VsZjo6YnVpbGRPYmplY3RJbmZvcm1hdGlv'));
	@fwrite($fp, base64_decode('bkNhY2hlKCk7CgkJCWlmIChpc3NldChzZWxmOjokb2JqZWN0X2luZm9fY2FjaGVbJHRoaXMtPm5vZGVJZCgpXSkpIHsKCQkJCSRwYXJlbnQgPSBzZWxmOjokb2JqZWN0X2luZm9fY2FjaGVbJHRoaXMtPm5vZGVJZCgpXVtzZWxmOjpDQUNIRV9QQVJFTlRdOwoJCQkJ'));
	@fwrite($fp, base64_decode('JG9iaiA9IE9JRHBsdXNPYmplY3Q6OnBhcnNlKCRwYXJlbnQpOwoJCQkJaWYgKCRvYmopIHJldHVybiAkb2JqOwoJCQl9CgoJCQkvLyBJZiB0aGlzIE9JRCBkb2VzIG5vdCBleGlzdCwgdGhlIFNRTCBxdWVyeSAic2VsZWN0IHBhcmVudCBmcm9tIC4uLiIgZG9lcyBu'));
	@fwrite($fp, base64_decode('b3Qgd29yay4gU28gd2UgdHJ5IHRvIGZpbmQgdGhlIG5leHQgcG9zc2libGUgcGFyZW50IHVzaW5nIG9uZV91cCgpCgkJCSRjdXIgPSAkdGhpcy0+b25lX3VwKCk7CgkJCWlmICghJGN1cikgcmV0dXJuIGZhbHNlOwoJCQlkbyB7CgkJCQlpZiAoJGZpdHRpbmcgPSBz'));
	@fwrite($fp, base64_decode('ZWxmOjpmaW5kRml0dGluZygkY3VyLT5ub2RlSWQoKSkpIHJldHVybiAkZml0dGluZzsKCgkJCQkkcHJldiA9ICRjdXI7CgkJCQkkY3VyID0gJGN1ci0+b25lX3VwKCk7CgkJCQlpZiAoISRjdXIpIHJldHVybiBmYWxzZTsKCQkJfSB3aGlsZSAoJHByZXYgIT0gJGN1'));
	@fwrite($fp, base64_decode('cik7CgoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXRSYU1haWwoKSB7CgkJaWYgKCFPSURQTFVTX09CSkVDVF9DQUNISU5HKSB7CgkJCSRyZXMgPSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0IHJhX2VtYWlsIGZyb20gIi5P'));
	@fwrite($fp, base64_decode('SURQTFVTX1RBQkxFTkFNRV9QUkVGSVguIm9iamVjdHMgd2hlcmUgaWQgPSA/IiwgYXJyYXkoJHRoaXMtPm5vZGVJZCgpKSk7CgkJCSRyb3cgPSBPSURwbHVzOjpkYigpLT5mZXRjaF9hcnJheSgkcmVzKTsKCQkJcmV0dXJuICRyb3dbJ3JhX2VtYWlsJ107CgkJfSBl'));
	@fwrite($fp, base64_decode('bHNlIHsKCQkJc2VsZjo6YnVpbGRPYmplY3RJbmZvcm1hdGlvbkNhY2hlKCk7CgkJCWlmIChpc3NldChzZWxmOjokb2JqZWN0X2luZm9fY2FjaGVbJHRoaXMtPm5vZGVJZCgpXSkpIHsKCQkJCXJldHVybiBzZWxmOjokb2JqZWN0X2luZm9fY2FjaGVbJHRoaXMtPm5v'));
	@fwrite($fp, base64_decode('ZGVJZCgpXVtzZWxmOjpDQUNIRV9SQV9FTUFJTF07CgkJCX0KCQkJcmV0dXJuIGZhbHNlOwoJCX0KCX0KCglwdWJsaWMgZnVuY3Rpb24gdXNlckhhc1BhcmVudGFsV3JpdGVSaWdodHMoJHJhX2VtYWlsPW51bGwpIHsKCQlpZiAoJHJhX2VtYWlsIGluc3RhbmNlb2Yg'));
	@fwrite($fp, base64_decode('T0lEcGx1c1JBKSAkcmFfZW1haWwgPSAkcmFfZW1haWwtPnJhRW1haWwoKTsKCgkJaWYgKGlzX251bGwoJHJhX2VtYWlsKSkgewoJCQlpZiAoT0lEcGx1czo6YXV0aFV0aWxzKCk6OmlzQWRtaW5Mb2dnZWRJbigpKSByZXR1cm4gdHJ1ZTsKCQl9CgoJCSRvYmpQYXJl'));
	@fwrite($fp, base64_decode('bnQgPSAkdGhpcy0+Z2V0UGFyZW50KCk7CgkJaWYgKGlzX251bGwoJG9ialBhcmVudCkpIHJldHVybiBmYWxzZTsKCQlyZXR1cm4gJG9ialBhcmVudC0+dXNlckhhc1dyaXRlUmlnaHRzKCRyYV9lbWFpbCk7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHVzZXJIYXNXcml0'));
	@fwrite($fp, base64_decode('ZVJpZ2h0cygkcmFfZW1haWw9bnVsbCkgewoJCWlmICgkcmFfZW1haWwgaW5zdGFuY2VvZiBPSURwbHVzUkEpICRyYV9lbWFpbCA9ICRyYV9lbWFpbC0+cmFFbWFpbCgpOwoKCQlpZiAoaXNfbnVsbCgkcmFfZW1haWwpKSB7CgkJCWlmIChPSURwbHVzOjphdXRoVXRp'));
	@fwrite($fp, base64_decode('bHMoKTo6aXNBZG1pbkxvZ2dlZEluKCkpIHJldHVybiB0cnVlOwoJCQlyZXR1cm4gT0lEcGx1czo6YXV0aFV0aWxzKCk6OmlzUmFMb2dnZWRJbigkdGhpcy0+Z2V0UmFNYWlsKCkpOwoJCX0gZWxzZSB7CgkJCXJldHVybiAkdGhpcy0+Z2V0UmFNYWlsKCkgPT0gJHJh'));
	@fwrite($fp, base64_decode('X2VtYWlsOwoJCX0KCX0KCglwdWJsaWMgZnVuY3Rpb24gZGlzdGFuY2UoJHRvKSB7CgkJcmV0dXJuIG51bGw7IC8vIG5vdCBpbXBsZW1lbnRlZAoJfQoKCXB1YmxpYyBmdW5jdGlvbiBlcXVhbHMoJG9iaikgewoJCWlmICghaXNfb2JqZWN0KCRvYmopKSAkb2JqID0g'));
	@fwrite($fp, base64_decode('T0lEcGx1c09iamVjdDo6cGFyc2UoJG9iaik7CgkJaWYgKCEoJG9iaiBpbnN0YW5jZW9mICR0aGlzKSkgcmV0dXJuIGZhbHNlOwoKCQkkZGlzdGFuY2UgPSAkdGhpcy0+ZGlzdGFuY2UoJG9iaik7CgkJaWYgKGlzX251bWVyaWMoJGRpc3RhbmNlKSkgcmV0dXJuICRk'));
	@fwrite($fp, base64_decode('aXN0YW5jZSA9PT0gMDsgLy8gaWYgdGhlIGRpc3RhbmNlIGZ1bmN0aW9uIGlzIGltcGxlbWVudGVkLCB1c2UgaXQKCgkJcmV0dXJuICR0aGlzLT5ub2RlSWQoKSA9PSAkb2JqLT5ub2RlSWQoKTsgLy8gb3RoZXJ3aXNlIGNvbXBhcmUgdGhlIG5vZGUgaWQgY2FzZS1z'));
	@fwrite($fp, base64_decode('ZW5zaXRpdmUKCX0KCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGZpbmRGaXR0aW5nKCRpZCkgewoJCSRvYmogPSBPSURwbHVzT2JqZWN0OjpwYXJzZSgkaWQpOwoJCWlmICghJG9iaikgdGhyb3cgbmV3IEV4Y2VwdGlvbigiZmluZEZpdHRpbmc6IFBhcnNlIGZhaWxl'));
	@fwrite($fp, base64_decode('ZFxuIik7CgoJCWlmICghT0lEUExVU19PQkpFQ1RfQ0FDSElORykgewoJCQkkcmVzID0gT0lEcGx1czo6ZGIoKS0+cXVlcnkoInNlbGVjdCBpZCBmcm9tICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJvYmplY3RzIHdoZXJlIGlkIGxpa2UgPyIsIGFycmF5KCRv'));
	@fwrite($fp, base64_decode('YmotPm5zKCkuJzolJykpOwoJCQl3aGlsZSAoJHJvdyA9IE9JRHBsdXM6OmRiKCktPmZldGNoX29iamVjdCgkcmVzKSkgewoJCQkJJHRlc3QgPSBPSURwbHVzT2JqZWN0OjpwYXJzZSgkcm93LT5pZCk7CgkJCQlpZiAoJG9iai0+ZXF1YWxzKCR0ZXN0KSkgcmV0dXJu'));
	@fwrite($fp, base64_decode('ICR0ZXN0OwoJCQl9CgkJCXJldHVybiBmYWxzZTsKCQl9IGVsc2UgewoJCQlzZWxmOjpidWlsZE9iamVjdEluZm9ybWF0aW9uQ2FjaGUoKTsKCQkJZm9yZWFjaCAoc2VsZjo6JG9iamVjdF9pbmZvX2NhY2hlIGFzICRpZCA9PiBsaXN0KCRjb25maWRlbnRpYWwsICRw'));
	@fwrite($fp, base64_decode('YXJlbnQsICRyYV9lbWFpbCkpIHsKCQkJCWlmIChzdHJwb3MoJGlkLCAkb2JqLT5ucygpLic6JykgPT09IDApIHsKCQkJCQkkdGVzdCA9IE9JRHBsdXNPYmplY3Q6OnBhcnNlKCRpZCk7CgkJCQkJaWYgKCRvYmotPmVxdWFscygkdGVzdCkpIHJldHVybiAkdGVzdDsK'));
	@fwrite($fp, base64_decode('CQkJCX0KCQkJfQoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBvbmVfdXAoKSB7CgkJcmV0dXJuIG51bGw7IC8vIG5vdCBpbXBsZW1lbnRlZAoJfQoKCS8vIENhY2hpbmcgc3R1ZmYKCglwcm90ZWN0ZWQgc3RhdGljICRvYmplY3RfaW5m'));
	@fwrite($fp, base64_decode('b19jYWNoZSA9IG51bGw7CgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiByZXNldE9iamVjdEluZm9ybWF0aW9uQ2FjaGUoKSB7CgkJc2VsZjo6JG9iamVjdF9pbmZvX2NhY2hlID0gbnVsbDsKCX0KCgljb25zdCBDQUNIRV9DT05GSURFTlRJQUwgPSAwOwoJY29uc3Qg'));
	@fwrite($fp, base64_decode('Q0FDSEVfUEFSRU5UID0gMTsKCWNvbnN0IENBQ0hFX1JBX0VNQUlMID0gMjsKCglwcml2YXRlIHN0YXRpYyBmdW5jdGlvbiBidWlsZE9iamVjdEluZm9ybWF0aW9uQ2FjaGUoKSB7CgkJaWYgKGlzX251bGwoc2VsZjo6JG9iamVjdF9pbmZvX2NhY2hlKSkgewoJCQlz'));
	@fwrite($fp, base64_decode('ZWxmOjokb2JqZWN0X2luZm9fY2FjaGUgPSBhcnJheSgpOwoJCQkkcmVzID0gT0lEcGx1czo6ZGIoKS0+cXVlcnkoInNlbGVjdCBpZCwgcGFyZW50LCBjb25maWRlbnRpYWwsIHJhX2VtYWlsIGZyb20gIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguIm9iamVjdHMi'));
	@fwrite($fp, base64_decode('KTsKCQkJd2hpbGUgKCRyb3cgPSBPSURwbHVzOjpkYigpLT5mZXRjaF9hcnJheSgkcmVzKSkgewoJCQkJaWYgKCRyb3dbJ2NvbmZpZGVudGlhbCddID09IGNocigwKSkgJHJvd1snY29uZmlkZW50aWFsJ10gPSBmYWxzZTsgLy8gT0RCQy4uLgoJCQkJaWYgKCRyb3db'));
	@fwrite($fp, base64_decode('J2NvbmZpZGVudGlhbCddID09IGNocigxKSkgJHJvd1snY29uZmlkZW50aWFsJ10gPSB0cnVlOyAvLyBPREJDLi4uCgkJCQlzZWxmOjokb2JqZWN0X2luZm9fY2FjaGVbJHJvd1snaWQnXV0gPSBhcnJheSgkcm93Wydjb25maWRlbnRpYWwnXSwgJHJvd1sncGFyZW50'));
	@fwrite($fp, base64_decode('J10sICRyb3dbJ3JhX2VtYWlsJ10pOwoJCQl9CgkJfQoJfQp9Cg=='));
	@fclose($fp);
}
if (!is_file('includes/classes/OIDplusObject.class.php')) {
	warn('File has vanished! Will re-create it: includes/classes/OIDplusObject.class.php');
	writefile_1();
	if (!is_file('includes/classes/OIDplusObject.class.php')) {
		warn('File cannot be created (not existing): includes/classes/OIDplusObject.class.php');
	} else if (sha1_file('includes/classes/OIDplusObject.class.php') != '0c68c09b103aa5d955119b80bc25dacd8fe6b1dc') {
		warn('File cannot be created (checksum mismatch): includes/classes/OIDplusObject.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/classes/OIDplusObject.class.php', 0644)) {
		warn('Could not change file permissions of includes/classes/OIDplusObject.class.php');
	}
} else {
	if (@sha1_file('includes/classes/OIDplusObject.class.php') !== '0c68c09b103aa5d955119b80bc25dacd8fe6b1dc') {
		if (@sha1_file('includes/classes/OIDplusObject.class.php') !== 'c5a2295f74f1b0ea7196fc8595fcbba4ff105129') {
			warn('File was modified. Will overwrite the changes now: includes/classes/OIDplusObject.class.php');
			$tmp = pathinfo('includes/classes/OIDplusObject.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/classes/OIDplusObject.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('includes/classes/OIDplusObject.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('includes/classes/OIDplusObject.class.php') !== '0c68c09b103aa5d955119b80bc25dacd8fe6b1dc') {
			warn('File cannot be written (checksum mismatch): includes/classes/OIDplusObject.class.php');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 169\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 169') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

