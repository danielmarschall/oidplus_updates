<?php /* <ViaThinkSoftSignature>
r2zf+iO6cafRiJsHY+JT4Uvr3QlYt6s/qmc2aAlpiEo7LjhwNR+vJPj83v+285VD9
H11vk7ymQGjSga88Evf88jtbe4ukO88BuPLwFpdpb/O4dh44i3KmCgvLbrJB/EoI+
jDbYehDKXbhch7+up6d5aQ2z0nJcg3OyyVQIfU0fCXxHqhOlMXOerH6HxjkeAkJ//
tyP3fL+HamG82MzL8YavyDivg56t4kDAFnqoke0sreMfk+uyUEEtfnrsAkeO0C12n
YUhM5uO/IEe9ctnVdTKqWWBgpeoDVUCLtEidYwsW/eMPRvjZAAp7FbeSJU0JIoW/z
DSsWWvqbFTvXVl3MC+OO431+QEH3wQXwRt3X8TpJteuKfBt+Llp+KuMC4FMAfWP30
Ch46AOWa9FqDCbGhHjxiaCojY3GNXMGFIDFc1idxDy85b6ko73fXiYVDwXs/OuCXb
Kf0ltxjkEwiajPJi7oQxbYTNIpoqDfBvjlvMMA7S/sSaujiCpK2E+vh/uwIh/vyfi
unXLdKacTMtNlmcyNdHmglpM1+ryTJfO/adP6lnuAv9N0/9pSym27SLp630ZhaSJV
okea8WETtv0QcPEJQl/5nvdNqRFoHSj1JLdvp4Z6FRSfSHzHFLBcdv5V4YJbtfUMz
8r3wzrvSRB7sUw8V0SJEYn1Qfv/75O1xq9n+SuZ3d/Cp8FUQonI6jwMtS0XjF8kDy
PV35z3l/qXGJ4GaFQZSji2xdKv/4R8a4JOHhQQoVCv64S+0Bte6t56txEcOWluUGL
A3q7m2485hXRzTZIvDVjwWsn5xH7zWkBEJ6IJSQ+Xl6Oz/eUtMbI1dXRD1YKD7Ap/
MoVfSTcBkdCvvtOAc0CbA/UyHc0E/8bcOhiwpfDlcH3cPfinxN7XXwXB7+Z0bmsjr
4SAi66dxJepAbt8tgT1hiqvxQCWYwunmrIoJw7jIDUJB99fn8jh2paQUYSxFoMM22
wXx6fk1OlkphVuhzELdXFWhZeYDi2AULqxuftLh/xpoi4qlOJMv1Gbr8Acl7I8aHX
Y9q2phkzGKwjnTemkpy0ERzZtI/O2JvPuYGHyFHM/ZYrIXd7Lu3VNv7M7K8uRZ3uN
PDMM347b2vri2Yf+KisURLkAu2BRxLrvdhnEXbgQ3ZIO+b9A4/RoEG8SIL7blm2Z5
0yrfFDPm8p60N++q8unK9+VYsdykoxCu3KHlQW3zM/iYQeILbvdjmBVSuQfrY79Wj
GWyC83xjxV24/ZiN8Wi1i+WIo6Ru76D64emnJ2xlb5htqMkAR8V+NKsy72bk4Iuvh
HrSDrG4UHBN5m/wxht1yaTinhQS6V+qpl2UKVU3TAzSk3MU91dDgUQWMYKnxNpzuJ
Q==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 113') {
	err('This update can only be applied to OIDplus version 2.0.0.113!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: oidplus.js
function writefile_1() {
	@$fp = fopen('oidplus.js', 'w');
	@fwrite($fp, base64_decode('LyoKICogT0lEcGx1cyAyLjAKICogQ29weXJpZ2h0IDIwMTkgRGFuaWVsIE1hcnNjaGFsbCwgVmlhVGhpbmtTb2Z0CiAqCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5v'));
	@fwrite($fp, base64_decode('dCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4w'));
	@fwrite($fp, base64_decode('CiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lU'));
	@fwrite($fp, base64_decode('SE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRh'));
	@fwrite($fp, base64_decode('dGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwoKLypqc2hpbnQgZXN2ZXJzaW9uOiA2ICovCgovLyAkKCcjaHRtbCcpLmpzdHJlZSgpOwoKY3VycmVudF9ub2RlID0gIiI7CnBvcHN0YXRlX3J1bm5pbmcgPSBmYWxzZTsKClN0cmluZy5wcm90b3R5cGUuZXhwbG9k'));
	@fwrite($fp, base64_decode('ZSA9IGZ1bmN0aW9uIChzZXBhcmF0b3IsIGxpbWl0KSB7CgkvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80NTE0MzIzL2phdmFzY3JpcHQtZXF1aXZhbGVudC10by1waHAtZXhwbG9kZQoJY29uc3QgYXJyYXkgPSB0aGlzLnNwbGl0KHNlcGFy'));
	@fwrite($fp, base64_decode('YXRvcik7CglpZiAobGltaXQgIT09IHVuZGVmaW5lZCAmJiBhcnJheS5sZW5ndGggPj0gbGltaXQpIHsKCQlhcnJheS5wdXNoKGFycmF5LnNwbGljZShsaW1pdCAtIDEpLmpvaW4oc2VwYXJhdG9yKSk7Cgl9CglyZXR1cm4gYXJyYXk7Cn07CgpTdHJpbmcucHJvdG90'));
	@fwrite($fp, base64_decode('eXBlLmh0bWxlbnRpdGllcyA9IGZ1bmN0aW9uICgpIHsKCXJldHVybiB0aGlzLnJlcGxhY2UoLyYvZywgJyZhbXA7JykucmVwbGFjZSgvPC9nLCAnJmx0OycpLnJlcGxhY2UoLz4vZywgJyZndDsnKS5yZXBsYWNlKC8iL2csICcmcXVvdDsnKTsKfTsKClN0cmluZy5w'));
	@fwrite($fp, base64_decode('cm90b3R5cGUuaHRtbF9lbnRpdHlfZGVjb2RlID0gZnVuY3Rpb24gKCkgewoJcmV0dXJuICQoJzx0ZXh0YXJlYSAvPicpLmh0bWwodGhpcykudGV4dCgpOwp9OwoKZnVuY3Rpb24gZ2V0TWV0YShtZXRhTmFtZSkgewoJY29uc3QgbWV0YXMgPSBkb2N1bWVudC5nZXRF'));
	@fwrite($fp, base64_decode('bGVtZW50c0J5VGFnTmFtZSgnbWV0YScpOwoKCWZvciAobGV0IGkgPSAwOyBpIDwgbWV0YXMubGVuZ3RoOyBpKyspIHsKCQlpZiAobWV0YXNbaV0uZ2V0QXR0cmlidXRlKCduYW1lJykgPT09IG1ldGFOYW1lKSB7CgkJCXJldHVybiBtZXRhc1tpXS5nZXRBdHRyaWJ1'));
	@fwrite($fp, base64_decode('dGUoJ2NvbnRlbnQnKTsKCQl9Cgl9CgoJcmV0dXJuICcnOwp9CgpmdW5jdGlvbiBnZXRPaWRQbHVzU3lzdGVtVGl0bGUoKSB7CglyZXR1cm4gZ2V0TWV0YSgnT0lEcGx1cy1TeXN0ZW1UaXRsZScpCn0KCmZ1bmN0aW9uIGNvbWJpbmVfc3lzdGVtdGl0bGVfYW5kX3Bh'));
	@fwrite($fp, base64_decode('Z2V0aXRsZShzeXN0ZW10aXRsZSwgcGFnZXRpdGxlKSB7CglpZiAoc3lzdGVtdGl0bGUgPT0gcGFnZXRpdGxlKSB7CgkJcmV0dXJuIHN5c3RlbXRpdGxlOwoJfSBlbHNlIHsKCQlyZXR1cm4gc3lzdGVtdGl0bGUgKyAnIC0gJyArIHBhZ2V0aXRsZTsKCX0KfQoKZnVu'));
	@fwrite($fp, base64_decode('Y3Rpb24gZ2V0VHJlZUxvYWRVUkwoKSB7Cgl2YXIgdXJsID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZik7Cgl2YXIgZ290byA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCJnb3RvIik7CglyZXR1cm4gKGdvdG8gIT0gbnVsbCkgPyAiYWpheC5waHA/YWN0aW9u'));
	@fwrite($fp, base64_decode('PXRyZWVfbG9hZCZnb3RvPSIrZW5jb2RlVVJJQ29tcG9uZW50KGdvdG8pCgkgICAgICAgICAgICAgICAgICAgICAgOiAiYWpheC5waHA/YWN0aW9uPXRyZWVfbG9hZCI7Cn0KCmZ1bmN0aW9uIHJlbG9hZENvbnRlbnQoKSB7CgkvLyBkb2N1bWVudC5sb2NhdGlvbiA9'));
	@fwrite($fp, base64_decode('ICI/Z290bz0iK2VuY29kZVVSSUNvbXBvbmVudChjdXJyZW50X25vZGUpOwoJb3Blbk9pZEluUGFuZWwoY3VycmVudF9ub2RlLCBmYWxzZSk7CgkkKCcjb2lkdHJlZScpLmpzdHJlZSgicmVmcmVzaCIpOwp9CgpmdW5jdGlvbiB4X3JlYyh4X2RhdGEsIGkpIHsKCSQo'));
	@fwrite($fp, base64_decode('JyNvaWR0cmVlJykuanN0cmVlKCdvcGVuX25vZGUnLCB4X2RhdGFbaV0sIGZ1bmN0aW9uKGUsIGRhdGEpIHsKCQlpZiAoaSsxIDwgeF9kYXRhLmxlbmd0aCkgewoJCQl4X3JlYyh4X2RhdGEsIGkrMSk7CgkJfSBlbHNlIHsKCQkJcG9wc3RhdGVfcnVubmluZyA9IHRy'));
	@fwrite($fp, base64_decode('dWU7IC8vIGRvbid0IGNhbGwgb3Blbk9pZEluUGFuZWwgYWdhaW4KCQkJdHJ5IHsKCQkJCSQoJyNvaWR0cmVlJykuanN0cmVlKCdzZWxlY3Rfbm9kZScsIHhfZGF0YVtpXSk7CgkJCX0gY2F0Y2ggKGVycikgewoJCQkJcG9wc3RhdGVfcnVubmluZyA9IGZhbHNlOwoJ'));
	@fwrite($fp, base64_decode('CQl9IGZpbmFsbHkgewoJCQkJcG9wc3RhdGVfcnVubmluZyA9IGZhbHNlOwoJCQl9CgkJfQoJfSk7Cn0KCmZ1bmN0aW9uIG9wZW5PaWRJblBhbmVsKGlkLCByZXNlbGVjdD1mYWxzZSkgewoJaWYgKHJlc2VsZWN0KSB7CgkJJCgnI29pZHRyZWUnKS5qc3RyZWUoJ2Rl'));
	@fwrite($fp, base64_decode('c2VsZWN0X2FsbCcpOwoKCQlwb3BzdGF0ZV9ydW5uaW5nID0gdHJ1ZTsgLy8gZG9uJ3QgY2FsbCBvcGVuT2lkSW5QYW5lbCBkdXJpbmcgdHJlZSBzZWxlY3Rpb24KCQl0cnkgewoJCQkvLyBJZiB0aGUgbm9kZSBpcyBhbHJlYWR5IGxvYWRlZCBpbiB0aGUgdHJlZSwg'));
	@fwrite($fp, base64_decode('c2VsZWN0IGl0CgkJCWlmICghJCgnI29pZHRyZWUnKS5qc3RyZWUoJ3NlbGVjdF9ub2RlJywgaWQpKSB7CgkJCQkvLyBJZiB0aGUgbm9kZSBpcyBub3QgbG9hZGVkLCB0aGVuIHdlIHRyeSB0byBzZWFyY2ggaXQuCgkJCQkvLyBJZiBpdCBjYW4gYmUgZm91bmQsIHRo'));
	@fwrite($fp, base64_decode('ZW4gb3BlbiBhbGwgcGFyZW50IG5vZGVzIGFuZCBzZWxlY3QgdGhlIG5vZGUKCQkJCSQuYWpheCh7CgkJCQkJdXJsOiJhamF4LnBocCIsCgkJCQkJbWV0aG9kOiJQT1NUIiwKCQkJCQlkYXRhOnsKCQkJCQkJYWN0aW9uOiJ0cmVlX3NlYXJjaCIsCgkJCQkJCXNlYXJj'));
	@fwrite($fp, base64_decode('aDppZAoJCQkJCX0sCgkJCQkJZXJyb3I6ZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7CgkJCQkJCWNvbnNvbGUuZXJyb3IoIkVycm9yOiAiICsgZXJyb3JUaHJvd24pOwoJCQkJCX0sCgkJCQkJc3VjY2VzczpmdW5jdGlvbihkYXRhKSB7'));
	@fwrite($fp, base64_decode('CgkJCQkJCWlmICgiZXJyb3IiIGluIGRhdGEpIHsKCQkJCQkJCWNvbnNvbGUuZXJyb3IoZGF0YSk7CgkJCQkJCX0gZWxzZSBpZiAoKGRhdGEgaW5zdGFuY2VvZiBBcnJheSkgJiYgKGRhdGEubGVuZ3RoID4gMCkpIHsKCQkJCQkJCXhfcmVjKGRhdGEsIDApOwoJCQkJ'));
	@fwrite($fp, base64_decode('CQl9IGVsc2UgewoJCQkJCQkJY29uc29sZS5lcnJvcihkYXRhKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0pOwoJCQl9CgkJfSBjYXRjaCAoZXJyKSB7CgkJCXBvcHN0YXRlX3J1bm5pbmcgPSBmYWxzZTsKCQl9IGZpbmFsbHkgewoJCQlwb3BzdGF0ZV9ydW5uaW5nID0g'));
	@fwrite($fp, base64_decode('ZmFsc2U7CgkJfQoJfQoKCS8vIFRoaXMgbG9hZHMgdGhlIGFjdHVhbCBjb250ZW50CgoJZG9jdW1lbnQudGl0bGUgPSAiIjsKCSQoJyNyZWFsX3RpdGxlJykuaHRtbCgiJm5ic3A7Iik7CgkkKCcjcmVhbF9jb250ZW50JykuaHRtbCgiTG9hZGluZy4uLiIpOwoJJCgn'));
	@fwrite($fp, base64_decode('I3N0YXRpY19saW5rJykuYXR0cigiaHJlZiIsICJpbmRleC5waHA/Z290bz0iK2VuY29kZVVSSUNvbXBvbmVudChpZCkpOwoJJCgnI3N0YXRpY19saW5rX2Rlc2t0b3AnKS5hdHRyKCJocmVmIiwgImluZGV4X2Rlc2t0b3AucGhwP2dvdG89IitlbmNvZGVVUklDb21w'));
	@fwrite($fp, base64_decode('b25lbnQoaWQpKTsKCSQoJyNzdGF0aWNfbGlua19tb2JpbGUnKS5hdHRyKCJocmVmIiwgImluZGV4X21vYmlsZS5waHA/Z290bz0iK2VuY29kZVVSSUNvbXBvbmVudChpZCkpOwoKCS8vIE5vcm1hbCBvcGVuaW5nIG9mIGEgZGVzY3JpcHRpb24KCWZldGNoKCdhamF4'));
	@fwrite($fp, base64_decode('LnBocD9hY3Rpb249Z2V0X2Rlc2NyaXB0aW9uJmlkPScrZW5jb2RlVVJJQ29tcG9uZW50KGlkKSkKCS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7CgkJcmVzcG9uc2UuanNvbigpCgkJLnRoZW4oZnVuY3Rpb24oZGF0YSkgewoJCQlpZiAoImVycm9yIiBpbiBkYXRh'));
	@fwrite($fp, base64_decode('KSB7CgkJCQlhbGVydCgiRmFpbGVkIHRvIGxvYWQgY29udGVudDogIiArIGRhdGEuZXJyb3IpOwoJCQkJY29uc29sZS5lcnJvcihkYXRhLmVycm9yKTsKCQkJCXJldHVybjsKCQkJfQoKCQkJZGF0YS5pZCA9IGlkOwoKCQkJZG9jdW1lbnQudGl0bGUgPSBjb21iaW5l'));
	@fwrite($fp, base64_decode('X3N5c3RlbXRpdGxlX2FuZF9wYWdldGl0bGUoZ2V0T2lkUGx1c1N5c3RlbVRpdGxlKCksIGRhdGEudGl0bGUpOwoJCQl2YXIgc3RhdGUgPSB7CgkJCQkibm9kZV9pZCI6aWQsCgkJCQkidGl0bGVIVE1MIjooZGF0YS5pY29uID8gJzxpbWcgc3JjPSInK2RhdGEuaWNv'));
	@fwrite($fp, base64_decode('bisnIiB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIGFsdD0iJytkYXRhLnRpdGxlLmh0bWxlbnRpdGllcygpKyciPiAnIDogJycpICsgZGF0YS50aXRsZS5odG1sZW50aXRpZXMoKSwKCQkJCSJ0ZXh0SFRNTCI6ZGF0YS50ZXh0LAoJCQkJInN0YXRpY2xpbmtIUkVGIjoi'));
	@fwrite($fp, base64_decode('aW5kZXgucGhwP2dvdG89IitlbmNvZGVVUklDb21wb25lbnQoaWQpLAoJCQkJInN0YXRpY2xpbmtIUkVGX0Rlc2t0b3AiOiJpbmRleF9kZXNrdG9wLnBocD9nb3RvPSIrZW5jb2RlVVJJQ29tcG9uZW50KGlkKSwKCQkJCSJzdGF0aWNsaW5rSFJFRl9Nb2JpbGUiOiJp'));
	@fwrite($fp, base64_decode('bmRleF9tb2JpbGUucGhwP2dvdG89IitlbmNvZGVVUklDb21wb25lbnQoaWQpCgkJCX07CgkJCWlmIChjdXJyZW50X25vZGUgIT0gaWQpIHsKCQkJCXdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZShzdGF0ZSwgZGF0YS50aXRsZSwgIj9nb3RvPSIrZW5jb2RlVVJJQ29t'));
	@fwrite($fp, base64_decode('cG9uZW50KGlkKSk7CgkJCX0gZWxzZSB7CgkJCQl3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoc3RhdGUsIGRhdGEudGl0bGUsICI/Z290bz0iK2VuY29kZVVSSUNvbXBvbmVudChpZCkpOwoJCQl9CgoJCQlpZiAoZGF0YS5pY29uKSB7CgkJCQkkKCcjcmVhbF90'));
	@fwrite($fp, base64_decode('aXRsZScpLmh0bWwoJzxpbWcgc3JjPSInK2RhdGEuaWNvbisnIiB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIGFsdD0iJytkYXRhLnRpdGxlLmh0bWxlbnRpdGllcygpKyciPiAnICsgZGF0YS50aXRsZS5odG1sZW50aXRpZXMoKSk7CgkJCX0gZWxzZSB7CgkJCQkkKCcj'));
	@fwrite($fp, base64_decode('cmVhbF90aXRsZScpLmh0bWwoZGF0YS50aXRsZS5odG1sZW50aXRpZXMoKSk7CgkJCX0KCQkJJCgnI3JlYWxfY29udGVudCcpLmh0bWwoZGF0YS50ZXh0KTsKCQkJZG9jdW1lbnQudGl0bGUgPSBjb21iaW5lX3N5c3RlbXRpdGxlX2FuZF9wYWdldGl0bGUoZ2V0T2lk'));
	@fwrite($fp, base64_decode('UGx1c1N5c3RlbVRpdGxlKCksIGRhdGEudGl0bGUpOwoJCQljdXJyZW50X25vZGUgPSBpZDsKCQl9KQoJCS5jYXRjaChmdW5jdGlvbihlcnJvcikgewoJCQlhbGVydCgiRmFpbGVkIHRvIGxvYWQgY29udGVudDogIiArIGVycm9yKTsKCQkJY29uc29sZS5lcnJvcihl'));
	@fwrite($fp, base64_decode('cnJvcik7CgkJfSk7Cgl9KQoJLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7CgkJYWxlcnQoIkZhaWxlZCB0byBsb2FkIGNvbnRlbnQ6ICIgKyBlcnJvcik7CgkJY29uc29sZS5lcnJvcihlcnJvcik7Cgl9KTsKfQoKZnVuY3Rpb24gdXBkYXRlRGVzYygpIHsKCSQuYWph'));
	@fwrite($fp, base64_decode('eCh7CgkJdXJsOiJhamF4LnBocCIsCgkJbWV0aG9kOiJQT1NUIiwKCQlkYXRhOiB7CgkJCWFjdGlvbjoiVXBkYXRlMiIsCgkJCWlkOmN1cnJlbnRfbm9kZSwKCQkJdGl0bGU6KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXRsZWVkaXQnKSA/IGRvY3VtZW50Lmdl'));
	@fwrite($fp, base64_decode('dEVsZW1lbnRCeUlkKCd0aXRsZWVkaXQnKS52YWx1ZSA6IG51bGwpLAoJCQkvL2Rlc2NyaXB0aW9uOihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVzY3JpcHRpb24nKSA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXNjcmlwdGlvbicpLnZhbHVlIDogbnVs'));
	@fwrite($fp, base64_decode('bCkKCQkJZGVzY3JpcHRpb246dGlueU1DRS5nZXQoJ2Rlc2NyaXB0aW9uJykuZ2V0Q29udGVudCgpCgkJfSwKCQllcnJvcjpmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHsKCQkJYWxlcnQoIkVycm9yOiAiICsgZXJyb3JUaHJvd24pOwoJ'));
	@fwrite($fp, base64_decode('CX0sCgkJc3VjY2VzczpmdW5jdGlvbihkYXRhKSB7CgkJCWlmICgiZXJyb3IiIGluIGRhdGEpIHsKCQkJCWFsZXJ0KCJFcnJvcjogIiArIGRhdGEuZXJyb3IpOwoJCQl9IGVsc2UgaWYgKGRhdGEuc3RhdHVzID09IDApIHsKCQkJCWFsZXJ0KCJVcGRhdGUgT0siKTsK'));
	@fwrite($fp, base64_decode('CQkJCS8vcmVsb2FkQ29udGVudCgpOwoJCQkJJCgnI29pZHRyZWUnKS5qc3RyZWUoInJlZnJlc2giKTsKCQkJCXZhciBoMXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaDEiKTsKCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgaDFzLmxlbmd0aDsgaSsr'));
	@fwrite($fp, base64_decode('KSB7CgkJCQkJdmFyIGgxID0gaDFzW2ldOwoJCQkJCWgxLmlubmVySFRNTCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXRsZWVkaXQnKS52YWx1ZS5odG1sZW50aXRpZXMoKTsKCQkJCX0KCQkJCWRvY3VtZW50LnRpdGxlID0gY29tYmluZV9zeXN0ZW10aXRs'));
	@fwrite($fp, base64_decode('ZV9hbmRfcGFnZXRpdGxlKGdldE9pZFBsdXNTeXN0ZW1UaXRsZSgpLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGl0bGVlZGl0JykudmFsdWUpOwoKCQkJCXZhciBtY2UgPSB0aW55bWNlLmdldCgnZGVzY3JpcHRpb24nKTsKCQkJCWlmIChtY2UgIT0gbnVsbCkg'));
	@fwrite($fp, base64_decode('bWNlLmlzTm90RGlydHkgPSAxOwoJCQl9IGVsc2UgewoJCQkJYWxlcnQoIkVycm9yOiAiICsgZGF0YS5lcnJvcik7CgkJCX0KCQl9Cgl9KTsKfQoKZnVuY3Rpb24gY3J1ZEFjdGlvblNlbmRJbnZpdGF0aW9uKG9yaWdpbiwgZW1haWwpIHsKCS8vIGRvY3VtZW50Lmxv'));
	@fwrite($fp, base64_decode('Y2F0aW9uID0gIj9nb3RvPW9pZHBsdXM6aW52aXRlX3JhJCIrZW5jb2RlVVJJQ29tcG9uZW50KGVtYWlsKSsiJCIrZW5jb2RlVVJJQ29tcG9uZW50KG9yaWdpbik7CglvcGVuT2lkSW5QYW5lbCgnb2lkcGx1czppbnZpdGVfcmEkJytlbWFpbCsnJCcrb3JpZ2luLCBm'));
	@fwrite($fp, base64_decode('YWxzZSk7Cn0KCmZ1bmN0aW9uIGNydWRBY3Rpb25JbnNlcnQocGFyZW50KSB7CgkkLmFqYXgoewoJCXVybDoiYWpheC5waHAiLAoJCW1ldGhvZDoiUE9TVCIsCgkJZGF0YTp7CgkJCWFjdGlvbjoiSW5zZXJ0IiwKCQkJaWQ6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQo'));
	@fwrite($fp, base64_decode('J2lkJykudmFsdWUsCgkJCXJhX2VtYWlsOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYV9lbWFpbCcpLnZhbHVlLAoJCQlhc24xaWRzOihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXNuMWlkcycpID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FzbjFpZHMn'));
	@fwrite($fp, base64_decode('KS52YWx1ZSA6IG51bGwpLAoJCQlpcmlzOihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXJpcycpID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lyaXMnKS52YWx1ZSA6IG51bGwpLAoJCQljb25maWRlbnRpYWw6KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdo'));
	@fwrite($fp, base64_decode('aWRlJykgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGlkZScpLmNoZWNrZWQgOiBudWxsKSwKCQkJcGFyZW50OnBhcmVudAoJCX0sCgkJZXJyb3I6ZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7CgkJCWFsZXJ0KCJFcnJvcjogIiAr'));
	@fwrite($fp, base64_decode('IGVycm9yVGhyb3duKTsKCQl9LAoJCXN1Y2Nlc3M6ZnVuY3Rpb24oZGF0YSkgewoJCQlpZiAoImVycm9yIiBpbiBkYXRhKSB7CgkJCQlhbGVydCgiRXJyb3I6ICIgKyBkYXRhLmVycm9yKTsKCQkJfSBlbHNlIGlmIChkYXRhLnN0YXR1cyA9PSAwKSB7CgkJCQkvL2Fs'));
	@fwrite($fp, base64_decode('ZXJ0KCJJbnNlcnQgT0siKTsKCQkJCXJlbG9hZENvbnRlbnQoKTsKCQkJCS8vIFRPRE86IGF1ZiByZWxvYWRDb250ZW50KCkgdmVyemljaHRlbi4gc3RhdHRkZXNzZW4gbnVyIHRyZWUgbGlua3MgYWt0dWFsaXNpZXJlbiwgdW5kIHJlY2h0cyBlaW5lIG5ldWUgemVp'));
	@fwrite($fp, base64_decode('bGUgenVyIHRhYmVsbGUgaGluenVm/GdlbgoJCQl9IGVsc2UgaWYgKGRhdGEuc3RhdHVzID09IDEpIHsKCQkJCWlmIChjb25maXJtKCJVcGRhdGUgT0suIEhvd2V2ZXIsIHRoZSBlbWFpbCBhZGRyZXNzIHlvdSBoYXZlIGVudGVyZWQgKCIrZG9jdW1lbnQuZ2V0RWxl'));
	@fwrite($fp, base64_decode('bWVudEJ5SWQoJ3JhX2VtYWlsJykudmFsdWUrIikgaXMgbm90IGluIG91ciBzeXN0ZW0uIERvIHlvdSB3YW50IHRvIHNlbmQgYW4gaW52aXRhdGlvbiwgc28gdGhhdCB0aGUgUkEgY2FuIHJlZ2lzdGVyIGFuIGFjY291bnQgdG8gbWFuYWdlIHRoZWlyIE9JRHM/Iikp'));
	@fwrite($fp, base64_decode('IHsKCQkJCQljcnVkQWN0aW9uU2VuZEludml0YXRpb24ocGFyZW50LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmFfZW1haWwnKS52YWx1ZSk7CgkJCQl9IGVsc2UgewoJCQkJCXJlbG9hZENvbnRlbnQoKTsKCQkJCQkvLyBUT0RPOiBhdWYgcmVsb2FkQ29udGVu'));
	@fwrite($fp, base64_decode('dCgpIHZlcnppY2h0ZW4uIHN0YXR0ZGVzc2VuIG51ciB0cmVlIGxpbmtzIGFrdHVhbGlzaWVyZW4sIHVuZCByZWNodHMgZWluZSBuZXVlIHplaWxlIHp1ciB0YWJlbGxlIGhpbnp1ZvxnZW4KCQkJCX0KCQkJfSBlbHNlIHsKCQkJCWFsZXJ0KCJFcnJvcjogIiArIGRh'));
	@fwrite($fp, base64_decode('dGEpOwoJCQl9CgkJfQoJfSk7Cn0KCmZ1bmN0aW9uIGNydWRBY3Rpb25VcGRhdGUoaWQsIHBhcmVudCkgewoJJC5hamF4KHsKCQl1cmw6ImFqYXgucGhwIiwKCQltZXRob2Q6IlBPU1QiLAoJCWRhdGE6IHsKCQkJYWN0aW9uOiJVcGRhdGUiLAoJCQlpZDppZCwKCQkJ'));
	@fwrite($fp, base64_decode('cmFfZW1haWw6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhX2VtYWlsXycraWQpLnZhbHVlLAoJCQlhc24xaWRzOihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXNuMWlkc18nK2lkKSA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhc24xaWRzXycraWQpLnZh'));
	@fwrite($fp, base64_decode('bHVlIDogbnVsbCksCgkJCWlyaXM6KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpcmlzXycraWQpID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lyaXNfJytpZCkudmFsdWUgOiBudWxsKSwKCQkJY29uZmlkZW50aWFsOihkb2N1bWVudC5nZXRFbGVtZW50QnlJ'));
	@fwrite($fp, base64_decode('ZCgnaGlkZV8nK2lkKSA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoaWRlXycraWQpLmNoZWNrZWQgOiBudWxsKSwKCQkJcGFyZW50OnBhcmVudAoJCX0sCgkJZXJyb3I6ZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7CgkJCWFsZXJ0'));
	@fwrite($fp, base64_decode('KCJFcnJvcjogIiArIGVycm9yVGhyb3duKTsKCQl9LAoJCXN1Y2Nlc3M6ZnVuY3Rpb24oZGF0YSkgewoJCQlpZiAoImVycm9yIiBpbiBkYXRhKSB7CgkJCQlhbGVydCgiRXJyb3I6ICIgKyBkYXRhLmVycm9yKTsKCQkJfSBlbHNlIGlmIChkYXRhLnN0YXR1cyA9PSAw'));
	@fwrite($fp, base64_decode('KSB7CgkJCQlhbGVydCgiVXBkYXRlIE9LIik7CgkJCQkvLyByZWxvYWRDb250ZW50KCk7CgkJCQkkKCcjb2lkdHJlZScpLmpzdHJlZSgicmVmcmVzaCIpOwoJCQl9IGVsc2UgaWYgKGRhdGEuc3RhdHVzID09IDEpIHsKCQkJCWlmIChjb25maXJtKCJVcGRhdGUgT0su'));
	@fwrite($fp, base64_decode('IEhvd2V2ZXIsIHRoZSBlbWFpbCBhZGRyZXNzIHlvdSBoYXZlIGVudGVyZWQgKCIrZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhX2VtYWlsXycraWQpLnZhbHVlKyIpIGlzIG5vdCBpbiBvdXIgc3lzdGVtLiBEbyB5b3Ugd2FudCB0byBzZW5kIGFuIGludml0YXRp'));
	@fwrite($fp, base64_decode('b24sIHNvIHRoYXQgdGhlIFJBIGNhbiByZWdpc3RlciBhbiBhY2NvdW50IHRvIG1hbmFnZSB0aGVpciBPSURzPyIpKSB7CgkJCQkJY3J1ZEFjdGlvblNlbmRJbnZpdGF0aW9uKHBhcmVudCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhX2VtYWlsXycraWQpLnZh'));
	@fwrite($fp, base64_decode('bHVlKTsKCQkJCX0gZWxzZSB7CgkJCQkJLy8gcmVsb2FkQ29udGVudCgpOwoJCQkJCSQoJyNvaWR0cmVlJykuanN0cmVlKCJyZWZyZXNoIik7CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlhbGVydCgiRXJyb3I6ICIgKyBkYXRhKTsKCQkJfQoJCX0KCX0pOwp9CgpmdW5j'));
	@fwrite($fp, base64_decode('dGlvbiBjcnVkQWN0aW9uRGVsZXRlKGlkLCBwYXJlbnQpIHsKCWlmKCF3aW5kb3cuY29uZmlybSgiQXJlIHlvdSBzdXJlIHRoYXQgeW91IHdhbnQgdG8gZGVsZXRlICIraWQrIj8iKSkgcmV0dXJuIGZhbHNlOwoKCSQuYWpheCh7CgkJdXJsOiJhamF4LnBocCIsCgkJ'));
	@fwrite($fp, base64_decode('bWV0aG9kOiJQT1NUIiwKCQlkYXRhOiB7CgkJCWFjdGlvbjoiRGVsZXRlIiwKCQkJaWQ6aWQsCgkJCXBhcmVudDpwYXJlbnQKCQl9LAoJCWVycm9yOmZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikgewoJCQlhbGVydCgiRXJyb3I6ICIgKyBl'));
	@fwrite($fp, base64_decode('cnJvclRocm93bik7CgkJfSwKCQlzdWNjZXNzOmZ1bmN0aW9uKGRhdGEpIHsKCQkJaWYgKCJlcnJvciIgaW4gZGF0YSkgewoJCQkJYWxlcnQoIkVycm9yOiAiICsgZGF0YS5lcnJvcik7CgkJCX0gZWxzZSBpZiAoZGF0YS5zdGF0dXMgPT0gMCkgewoJCQkJcmVsb2Fk'));
	@fwrite($fp, base64_decode('Q29udGVudCgpOwoJCQkJLy8gVE9ETzogYXVmIHJlbG9hZENvbnRlbnQoKSB2ZXJ6aWNodGVuLiBzdGF0dGRlc3NlbiBudXIgdHJlZSBsaW5rcyBha3R1YWxpc2llcmVuLCB1bmQgcmVjaHRzIGRpZSB6ZWlsZSBhdXMgZGVyIHRhYmVsbGUgbPZzY2hlbgoJCQl9IGVs'));
	@fwrite($fp, base64_decode('c2UgewoJCQkJYWxlcnQoIkVycm9yOiAiICsgZGF0YS5lcnJvcik7CgkJCX0KCQl9Cgl9KTsKfQoKZnVuY3Rpb24gZGVsZXRlUmEoZW1haWwsIGdvdG8pIHsKCWlmKCF3aW5kb3cuY29uZmlybSgiQXJlIHlvdSByZWFsbHkgc3VyZSB0aGF0IHlvdSB3YW50IHRvIGRl'));
	@fwrite($fp, base64_decode('bGV0ZSAiK2VtYWlsKyI/IChUaGUgT0lEcyBzdGF5IGFjdGl2ZSkiKSkgcmV0dXJuIGZhbHNlOwoKCSQuYWpheCh7CgkJdXJsOiJhamF4LnBocCIsCgkJbWV0aG9kOiJQT1NUIiwKCQlkYXRhOiB7CgkJCWFjdGlvbjoiZGVsZXRlX3JhIiwKCQkJZW1haWw6ZW1haWws'));
	@fwrite($fp, base64_decode('CgkJfSwKCQllcnJvcjpmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHsKCQkJYWxlcnQoIkVycm9yOiAiICsgZXJyb3JUaHJvd24pOwoJCX0sCgkJc3VjY2VzczpmdW5jdGlvbihkYXRhKSB7CgkJCWlmICgiZXJyb3IiIGluIGRhdGEpIHsK'));
	@fwrite($fp, base64_decode('CQkJCWFsZXJ0KCJFcnJvcjogIiArIGRhdGEuZXJyb3IpOwoJCQl9IGVsc2UgaWYgKGRhdGEuc3RhdHVzID09IDApIHsKCQkJCWFsZXJ0KCJEb25lLiIpOwoJCQkJaWYgKGdvdG8gIT0gbnVsbCkgZG9jdW1lbnQubG9jYXRpb24gPSAiP2dvdG89IitlbmNvZGVVUklD'));
	@fwrite($fp, base64_decode('b21wb25lbnQoZ290byk7CgkJCQkvLyByZWxvYWRDb250ZW50KCk7CgkJCX0gZWxzZSB7CgkJCQlhbGVydCgiRXJyb3I6ICIgKyBkYXRhLmVycm9yKTsKCQkJfQoJCX0KCX0pOwp9CgovLyBUaGlzIGZ1bmN0aW9uIG9wZW5zIHRoZSAicGFyZW50SUQiIG5vZGUsIGFu'));
	@fwrite($fp, base64_decode('ZCB0aGVuIHNlbGVjdHMgdGhlICJjaGlsZElEIiBub2RlICh3aGljaCBzaG91bGQgYmUgYmVuZWF0aCB0aGUgcGFyZW50IG5vZGUpCmZ1bmN0aW9uIG9wZW5BbmRTZWxlY3ROb2RlKGNoaWxkSUQsIHBhcmVudElEKSB7CglpZiAoJCgnI29pZHRyZWUnKS5qc3RyZWUo'));
	@fwrite($fp, base64_decode('dHJ1ZSkuZ2V0X25vZGUocGFyZW50SUQpKSB7CgkJJCgnI29pZHRyZWUnKS5qc3RyZWUoJ29wZW5fbm9kZScsIHBhcmVudElELCBmdW5jdGlvbihlLCBkYXRhKSB7IC8vIG9wZW4gcGFyZW50IG5vZGUKCQkJaWYgKCQoJyNvaWR0cmVlJykuanN0cmVlKHRydWUpLmdl'));
	@fwrite($fp, base64_decode('dF9ub2RlKGNoaWxkSUQpKSB7IC8vIGlzIHRoZSBjaGlsZCB0aGVyZT8KCQkJCSQoJyNvaWR0cmVlJykuanN0cmVlKCdkZXNlbGVjdF9hbGwnKS5qc3RyZWUoJ3NlbGVjdF9ub2RlJywgY2hpbGRJRCk7IC8vIHNlbGVjdCBpdAoJCQl9IGVsc2UgewoJCQkJLy8gVGhp'));
	@fwrite($fp, base64_decode('cyBjYW4gaGFwcGVuIGlmIHRoZSBjb250ZW50IHBhZ2UgY29udGFpbnMgYnJhbmQgbmV3IGl0ZW1zIHdoaWNoIGFyZSBub3QgaW4gdGhlIHRyZWV2aWV3IHlldAoJCQkJZG9jdW1lbnQubG9jYXRpb24gPSAiP2dvdG89IitlbmNvZGVVUklDb21wb25lbnQoY2hpbGRJ'));
	@fwrite($fp, base64_decode('RCk7CgkJCX0KCQl9LCB0cnVlKTsKCX0gZWxzZSB7CgkJLy8gVGhpcyBzaG91bGQgdXN1YWxseSBub3QgaGFwcGVuCgkJZG9jdW1lbnQubG9jYXRpb24gPSAiP2dvdG89IitlbmNvZGVVUklDb21wb25lbnQoY2hpbGRJRCk7Cgl9Cn0KCiQod2luZG93KS5vbigicG9w'));
	@fwrite($fp, base64_decode('c3RhdGUiLCBmdW5jdGlvbihlKSB7Cglwb3BzdGF0ZV9ydW5uaW5nID0gdHJ1ZTsKCXRyeSB7CgkJdmFyIGRhdGEgPSBlLm9yaWdpbmFsRXZlbnQuc3RhdGU7CgoJCWN1cnJlbnRfbm9kZSA9IGRhdGEubm9kZV9pZDsKCQkkKCcjb2lkdHJlZScpLmpzdHJlZSgnZGVz'));
	@fwrite($fp, base64_decode('ZWxlY3RfYWxsJykuanN0cmVlKCdzZWxlY3Rfbm9kZScsIGRhdGEubm9kZV9pZCk7CgkJJCgnI3JlYWxfdGl0bGUnKS5odG1sKGRhdGEudGl0bGVIVE1MKTsKCQkkKCcjcmVhbF9jb250ZW50JykuaHRtbChkYXRhLnRleHRIVE1MKTsKCQkkKCcjc3RhdGljX2xpbmsn'));
	@fwrite($fp, base64_decode('KS5hdHRyKCJocmVmIiwgZGF0YS5zdGF0aWNsaW5rSFJFRik7CgkJJCgnI3N0YXRpY19saW5rX2Rlc2t0b3AnKS5hdHRyKCJocmVmIiwgZGF0YS5zdGF0aWNsaW5rSFJFRl9EZXNrdG9wKTsKCQkkKCcjc3RhdGljX2xpbmtfbW9iaWxlJykuYXR0cigiaHJlZiIsIGRh'));
	@fwrite($fp, base64_decode('dGEuc3RhdGljbGlua0hSRUZfTW9iaWxlKTsKCQlkb2N1bWVudC50aXRsZSA9IGNvbWJpbmVfc3lzdGVtdGl0bGVfYW5kX3BhZ2V0aXRsZShnZXRPaWRQbHVzU3lzdGVtVGl0bGUoKSwgZGF0YS50aXRsZUhUTUwuaHRtbF9lbnRpdHlfZGVjb2RlKCkpOwoJfSBjYXRj'));
	@fwrite($fp, base64_decode('aCAoZXJyKSB7CgkJcG9wc3RhdGVfcnVubmluZyA9IGZhbHNlOwoJfSBmaW5hbGx5IHsKCQlwb3BzdGF0ZV9ydW5uaW5nID0gZmFsc2U7Cgl9Cn0pOwoKJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkgewoJLy8gLS0tIEpzVHJlZQoKCSQoJyNvaWR0cmVlJykK'));
	@fwrite($fp, base64_decode('CS5qc3RyZWUoewoJCXBsdWdpbnM6IFsnbWFzc2xvYWQnLCdzZWFyY2gnLCdjb25kaXRpb25hbHNlbGVjdCddLAoJCSdjb3JlJyA6IHsKCQkJJ2RhdGEnIDogewoJCQkJInVybCIgOiBnZXRUcmVlTG9hZFVSTCgpLAoJCQkJImRhdGEiIDogZnVuY3Rpb24gKG5vZGUp'));
	@fwrite($fp, base64_decode('IHsKCQkJCQlyZXR1cm4geyAiaWQiIDogbm9kZS5pZCB9OwoJCQkJfQoJCQl9LAoJCQkibXVsdGlwbGUiOiBmYWxzZQoJCX0sCgkJJ2NvbmRpdGlvbmFsc2VsZWN0JyA6IGZ1bmN0aW9uIChub2RlKSB7CgkJCWlmIChub2RlLm9yaWdpbmFsLmNvbmRpdGlvbmFsc2Vs'));
	@fwrite($fp, base64_decode('ZWN0ICE9PSB1bmRlZmluZWQpIHsKCQkJCXJldHVybiBldmFsKG5vZGUub3JpZ2luYWwuY29uZGl0aW9uYWxzZWxlY3QpOwoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIHRydWU7IC8vIGFsbG93IHNlbGVjdAoJCQl9CgkJfSwKCX0pCgkub24oJ3JlYWR5LmpzdHJlZScs'));
	@fwrite($fp, base64_decode('IGZ1bmN0aW9uIChlLCBkYXRhKSB7CgkJdmFyIHVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpOwoJCXZhciBnb3RvID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoImdvdG8iKTsKCQlpZiAoZ290byA9PSBudWxsKSBnb3RvID0gIm9pZHBsdXM6c3lzdGVt'));
	@fwrite($fp, base64_decode('IjsgLy8gdGhlIHBhZ2Ugd2FzIG5vdCBjYWxsZWQgd2l0aCA/Z290bz0uLi4KCgkJLy8gQnkgc2V0dGluZyBjdXJyZW50X25vZGUsIHNlbGVjdF9ub2RlKCkgd2lsbCBub3QgY2F1c2UgYWpheC5waHA/YWN0aW9uPWdldF9kZXNjcmlwdGlvbiB0byBsb2FkIChzaW5j'));
	@fwrite($fp, base64_decode('ZSB3ZSBhbHJlYWR5IGxvYWRlZCB0aGUgZmlyc3Qgc3RhdGljIGNvbnRlbnQgdmlhIFBIUCwgZm9yIHNlYXJjaCBlbmdpbmVzIG1haW5seSkKCQkvLyBCdXQgdGhlbiB3ZSBuZWVkIHRvIHNldCB0aGUgaGlzdG9yeSBzdGF0ZSBtYW51YWxseQoJCWN1cnJlbnRfbm9k'));
	@fwrite($fp, base64_decode('ZSA9IGdvdG87CgkJd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHsKCQkJIm5vZGVfaWQiOmdvdG8sCgkJCSJ0aXRsZUhUTUwiOiQoJyNyZWFsX3RpdGxlJykuaHRtbCgpLAoJCQkidGV4dEhUTUwiOiQoJyNyZWFsX2NvbnRlbnQnKS5odG1sKCksCgkJCSJzdGF0'));
	@fwrite($fp, base64_decode('aWNsaW5rSFJFRiI6ImluZGV4LnBocD9nb3RvPSIrZW5jb2RlVVJJQ29tcG9uZW50KGdvdG8pLAoJCQkic3RhdGljbGlua0hSRUZfRGVza3RvcCI6ImluZGV4X2Rlc2t0b3AucGhwP2dvdG89IitlbmNvZGVVUklDb21wb25lbnQoZ290byksCgkJCSJzdGF0aWNsaW5r'));
	@fwrite($fp, base64_decode('SFJFRl9Nb2JpbGUiOiJpbmRleF9tb2JpbGUucGhwP2dvdG89IitlbmNvZGVVUklDb21wb25lbnQoZ290bykKCQl9LCAkKCcjcmVhbF90aXRsZScpLmh0bWwoKSwgIj9nb3RvPSIrZW5jb2RlVVJJQ29tcG9uZW50KGdvdG8pKTsKCgkJaWYgKGdvdG8gIT0gbnVsbCkg'));
	@fwrite($fp, base64_decode('ZGF0YS5pbnN0YW5jZS5zZWxlY3Rfbm9kZShbZ290b10pOwoJfSkKCS5vbignc2VsZWN0X25vZGUuanN0cmVlJywgZnVuY3Rpb24gKG5vZGUsIHNlbGVjdGVkLCBldmVudCkgewoJCWlmIChvaWRwbHVzTW9iaWxlKCkpIHsKCQkJJCgiI29pZHRyZWUiKS5oaWRlKCJz'));
	@fwrite($fp, base64_decode('bG93Iik7CgkJCSQoIiNzeXN0ZW1fdGl0bGVfbWVudSIpLnJlbW92ZUNsYXNzKCJhY3RpdmUiKTsKCQl9CgoJCXZhciBpZCA9IHNlbGVjdGVkLm5vZGUuaWQ7CgkJaWYgKCghcG9wc3RhdGVfcnVubmluZykgJiYgKGN1cnJlbnRfbm9kZSAhPSBpZCkpIHsKCQkJb3Bl'));
	@fwrite($fp, base64_decode('bk9pZEluUGFuZWwoaWQsIGZhbHNlKTsKCQl9Cgl9KTsKCgkvLyAtLS0gTGF5b3V0CgoJaWYgKG9pZHBsdXNNb2JpbGUoKSkgewoJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvaWR0cmVlJykuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKCQlkb2N1bWVudC5nZXRF'));
	@fwrite($fp, base64_decode('bGVtZW50QnlJZCgnc3lzdGVtX3RpdGxlX21lbnUnKS5zdHlsZS52aXNpYmlsaXR5ID0gInZpc2libGUiOwoJfSBlbHNlIHsKCQkkKCdib2R5JykubGF5b3V0KHsKCQkJbm9ydGhfX3NpemU6ICAgICAgICAgICAgICAgICAgNDAsCgkJCW5vcnRoX19zbGlkYWJsZTog'));
	@fwrite($fp, base64_decode('ICAgICAgICAgICAgIGZhbHNlLAoJCQlub3J0aF9fY2xvc2FibGU6ICAgICAgICAgICAgICBmYWxzZSwKCQkJbm9ydGhfX3Jlc2l6YWJsZTogICAgICAgICAgICAgZmFsc2UsCgkJCXdlc3RfX3NpemU6ICAgICAgICAgICAgICAgICAgIDQ1MCwKCQkJd2VzdF9fc3Bh'));
	@fwrite($fp, base64_decode('Y2luZ19jbG9zZWQ6ICAgICAgICAgMjAsCgkJCXdlc3RfX3RvZ2dsZXJMZW5ndGhfY2xvc2VkOiAgIDIzMCwKCQkJd2VzdF9fdG9nZ2xlckFsaWduX2Nsb3NlZDogICAgInRvcCIsCgkJCXdlc3RfX3RvZ2dsZXJDb250ZW50X2Nsb3NlZDogICJPPGJyPkI8YnI+Sjxi'));
	@fwrite($fp, base64_decode('cj5FPGJyPkM8YnI+VDxicj48YnI+VDxCUj5SPEJSPkU8QlI+RSIsCgkJCXdlc3RfX3RvZ2dsZXJUaXBfY2xvc2VkOiAgICAgICJPcGVuICYgUGluIE1lbnUiLAoJCQl3ZXN0X19zbGlkZXJUaXA6ICAgICAgICAgICAgICAiU2xpZGUgT3BlbiBNZW51IiwKCQkJd2Vz'));
	@fwrite($fp, base64_decode('dF9fc2xpZGVUcmlnZ2VyX29wZW46ICAgICAgIm1vdXNlb3ZlciIsCgkJCWNlbnRlcl9fbWFza0NvbnRlbnRzOiAgICAgICAgIHRydWUgLy8gSU1QT1JUQU5UIC0gZW5hYmxlIGlmcmFtZSBtYXNraW5nCgkJfSk7Cgl9Cn0pOwoKZnVuY3Rpb24gb2lkcGx1c01vYmls'));
	@fwrite($fp, base64_decode('ZSgpIHsKCXJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJ1aS1sYXlvdXQtY2VudGVyIikubGVuZ3RoID09IDA7Cn0KCmZ1bmN0aW9uIG1vYmlsZU5hdkJ1dHRvbkNsaWNrKHNlbmRlcikgewoJaWYgKCQoIiNvaWR0cmVlIikuaXMoIjp2aXNp'));
	@fwrite($fp, base64_decode('YmxlIikpIHsKCQkkKCIjb2lkdHJlZSIpLmhpZGUoInNsb3ciKTsKCQkkKCIjc3lzdGVtX3RpdGxlX21lbnUiKS5yZW1vdmVDbGFzcygiYWN0aXZlIik7Cgl9IGVsc2UgewoJCSQoIiNvaWR0cmVlIikuc2hvdygic2xvdyIpOwoJCSQoIiNzeXN0ZW1fdGl0bGVfbWVu'));
	@fwrite($fp, base64_decode('dSIpLmFkZENsYXNzKCJhY3RpdmUiKTsKCX0KfQoKZnVuY3Rpb24gbW9iaWxlTmF2QnV0dG9uSG92ZXIoc2VuZGVyKSB7CglzZW5kZXIuY2xhc3NMaXN0LnRvZ2dsZSgiaG92ZXIiKTsKfQo='));
	@fclose($fp);
}
if (!is_file('oidplus.js')) {
	warn('File has vanished! Will re-create it: oidplus.js');
	writefile_1();
	if (!is_file('oidplus.js')) {
		warn('File cannot be created (not existing): oidplus.js');
	} else if (sha1_file('oidplus.js') != 'd2b17870dcbdf230d4764ca171d46ba8dc85cb3e') {
		warn('File cannot be created (checksum mismatch): oidplus.js');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('oidplus.js', 0644)) {
		warn('Could not change file permissions of oidplus.js');
	}
} else {
	if (@sha1_file('oidplus.js') !== 'd2b17870dcbdf230d4764ca171d46ba8dc85cb3e') {
		if (@sha1_file('oidplus.js') !== 'aa26b9b9ab3184d7a5510e98aaa4b82192521b95') {
			warn('File was modified. Will overwrite the changes now: oidplus.js');
			$tmp = pathinfo('oidplus.js');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('oidplus.js')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('oidplus.js', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('oidplus.js') !== 'd2b17870dcbdf230d4764ca171d46ba8dc85cb3e') {
			warn('File cannot be written (checksum mismatch): oidplus.js');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 114\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 114') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

