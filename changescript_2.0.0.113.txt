<?php /* <ViaThinkSoftSignature>
bvW8lRhXjbRwH45d2kDWLKdBZ4fexA6yjm7vQ+lTCp0e9UrHL5svyGHyGHkaHjXLG
pBpmGZ23WZpJWgjHemyKW9BzQFCFwOTgNA5SzMVQ7K4NLFO3Wbk32WaNFw9oYXRA0
NB/BXLmZxCaaNDTBzrqvY0nGNMgCEKXMr0oBnZ1O1/qaPmODYCHL1CSpT0MiMhcxL
fd+5Mzad63+9Qs/iqPtmvuRLW0tSYYp4O4Sp9w7rgXqwsf4CZLpJAoeNkBXCkpQnV
UPHydDtus44vmOjY6m+GHbMad+KndEQUG3yjOqI5q6f2ZBIQEtBZAJK4rifOhVPZH
vf/IS0llYwBwE5NUMmeBI0xQY6hyuByyDgwoATRurmya9Uw4xvKgwXHR1GfaEZhBE
3Of3xhz+uGevIdxSi9OlPfGqD3jtAOvQ2hLeOSHLD1c9xSVKKqvInZp8+eu0QE9wx
03fwnW9nTqDKNt6HCBgpZKQHWr0En7be3sYxMVRWV5xhe1VJuI/YRIACNsFZuqgDs
GBccSYlTnZ10o+swdeLI/lrMR8LfHv4Fg16sMO72FWH1//dIw8UbvCAQ8ej8gtk+N
Z+OaROHpU8HRNbk8fg5MMAj1wP2SRU4R5+MLd56JG721yMxTGY5BIpmwUxzMz+Qun
yF5f73R7mW0LoqplJvMCWSDlxMQkaWrrmxZUUHPd8XaTA1lfCv+0lRBM6j+mSuqzK
C3L7g19wTy3y0dqCEXCNXwab+jQFwDru9raBIf2qImNHtN0lbeVekDlQTiXdtR1VW
sv64iGrkzHLQhwAjoDokBaHhygTm8ssIbJ6vW+4r+PlVeEyTYcZ8p/MYc7honDKeM
lKooaw/mI70H7EgHZyO2pa2fIC0O50phrNtXW7dtTgF68z9h9wu3QWSe+uo0hPG51
WbOCe620Pd7Wr6Ppk3iesppspyiiGdbCvPlIJxSpxjT0guU66cy+UzRWa5dbdLu40
0X00R4mAh7cE8a8AYY+lto652BUlpbfHuP3YL1Ke2pcxrwTQGl56Rig/jOb0OfrfU
38cM6IdaGrKYaG+GxT8fJDsTiQkiickF5tZzlyJP1aGqCWMKdaDrwZ27tVeoFxqPM
vzqppER55ScSUEibj0caQJiaKprbpKIZDJTbsrRNHP89rAsXYHiJOSAezFUShbpk1
EZnnB5o3qf+JXsNgQtrp7GzeeiYXRg1VrhZcwYSjawBKHUZfPMRPXCqwqJ9xlspZn
7g/uwQGVQqRvKNOFpRWBC0mBBPiAXB1LinnV9yfe2pPI/0fxhCbHLVhHnVDt8WCWz
d9hIqhZmkpPz6gGE47xb+7EC+YSEGAuZ+QQyAGMHRJs6sMD6iLHgjbaBNPFdHpaFX
g==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 112') {
	err('This update can only be applied to OIDplus version 2.0.0.112!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: index_desktop.php
function writefile_1() {
	@$fp = fopen('index_desktop.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCnJlcXVpcmVfb25jZSBfX0RJUl9fIC4gJy9pbmNsdWRlcy9vaWRwbHVzLmluYy5waHAnOwoKb2Jfc3RhcnQoKTsgLy8gYWxsb3cgY29va2llIGhlYWRlcnMgdG8gYmUgc2VudAoKaGVhZGVyKCdDb250'));
	@fwrite($fp, base64_decode('ZW50LVR5cGU6dGV4dC9odG1sOyBjaGFyc2V0PVVURi04Jyk7CgpPSURwbHVzOjppbml0KHRydWUpOwoKT0lEcGx1czo6ZGIoKS0+c2V0X2NoYXJzZXQoIlVURjgiKTsKT0lEcGx1czo6ZGIoKS0+cXVlcnkoIlNFVCBOQU1FUyAndXRmOCciKTsKCiRzdGF0aWNfbm9k'));
	@fwrite($fp, base64_decode('ZV9pZCA9IGlzc2V0KCRfUkVRVUVTVFsnZ290byddKSA/ICRfUkVRVUVTVFsnZ290byddIDogJ29pZHBsdXM6c3lzdGVtJzsKJHN0YXRpYyA9IE9JRHBsdXM6Omd1aSgpOjpnZW5lcmF0ZUNvbnRlbnRQYWdlKCRzdGF0aWNfbm9kZV9pZCk7CiRzdGF0aWNfdGl0bGUg'));
	@fwrite($fp, base64_decode('PSAkc3RhdGljWyd0aXRsZSddOwokc3RhdGljX2ljb24gPSAkc3RhdGljWydpY29uJ107CiRzdGF0aWNfY29udGVudCA9ICRzdGF0aWNbJ3RleHQnXTsKCmZ1bmN0aW9uIGNvbWJpbmVfc3lzdGVtdGl0bGVfYW5kX3BhZ2V0aXRsZSgkc3lzdGVtdGl0bGUsICRwYWdl'));
	@fwrite($fp, base64_decode('dGl0bGUpIHsKCWlmICgkc3lzdGVtdGl0bGUgPT0gJHBhZ2V0aXRsZSkgewoJCXJldHVybiAkc3lzdGVtdGl0bGU7Cgl9IGVsc2UgewoJCXJldHVybiAkc3lzdGVtdGl0bGUgLiAnIC0gJyAuICRwYWdldGl0bGU7Cgl9Cn0KCiRzeXNpZF9vaWQgPSBPSURwbHVzOjpz'));
	@fwrite($fp, base64_decode('eXN0ZW1faWQodHJ1ZSk7CmlmICghJHN5c2lkX29pZCkgJHN5c2lkX29pZCA9ICd1bmtub3duJzsKaGVhZGVyKCdYLU9JRHBsdXMtU3lzdGVtSUQ6Jy4kc3lzaWRfb2lkKTsKCiRzeXNfdXJsID0gT0lEcGx1czo6c3lzdGVtX3VybCgpOwpoZWFkZXIoJ1gtT0lEcGx1'));
	@fwrite($fp, base64_decode('cy1TeXN0ZW1VUkw6Jy4kc3lzX3VybCk7Cgokc3lzX3ZlciA9IE9JRHBsdXM6OmdldFZlcnNpb24oKTsKaWYgKCEkc3lzX3ZlcikgJHN5c192ZXIgPSAndW5rbm93bic7CmhlYWRlcignWC1PSURwbHVzLVN5c3RlbVZlcnNpb246Jy4kc3lzX3Zlcik7Cgokc3lzX3Rp'));
	@fwrite($fp, base64_decode('dGxlID0gT0lEcGx1czo6Y29uZmlnKCktPnN5c3RlbVRpdGxlKCk7CmhlYWRlcignWC1PSURwbHVzLVN5c3RlbVRpdGxlOicuJHN5c190aXRsZSk7Cgo/PjwhRE9DVFlQRSBodG1sPgo8aHRtbCBsYW5nPSJlbiI+Cgo8aGVhZD4KCTxtZXRhIGh0dHAtZXF1aXY9IkNv'));
	@fwrite($fp, base64_decode('bnRlbnQtVHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04Ij4KCTxtZXRhIG5hbWU9Ik9JRHBsdXMtU3lzdGVtSUQiIGNvbnRlbnQ9Ijw/cGhwIGVjaG8gaHRtbGVudGl0aWVzKCRzeXNpZF9vaWQpOyA/PiI+Cgk8bWV0YSBuYW1lPSJPSURwbHVz'));
	@fwrite($fp, base64_decode('LVN5c3RlbVVSTCIgY29udGVudD0iPD9waHAgZWNobyBodG1sZW50aXRpZXMoJHN5c191cmwpOyA/PiI+Cgk8bWV0YSBuYW1lPSJPSURwbHVzLVN5c3RlbVZlcnNpb24iIGNvbnRlbnQ9Ijw/cGhwIGVjaG8gaHRtbGVudGl0aWVzKCRzeXNfdmVyKTsgPz4iPgoJPG1l'));
	@fwrite($fp, base64_decode('dGEgbmFtZT0iT0lEcGx1cy1TeXN0ZW1UaXRsZSIgY29udGVudD0iPD9waHAgZWNobyBodG1sZW50aXRpZXMoJHN5c190aXRsZSk7IC8qIERvIG5vdCByZW1vdmUuIFRoaXMgbWV0YSB0YWcgaXMgYWNlc3NlZCB2aWEgSlMgKi8gPz4iPgoJPG1ldGEgbmFtZT0idGhl'));
	@fwrite($fp, base64_decode('bWUtY29sb3IiIGNvbnRlbnQ9IiNBOURDRjAiPgoKCTx0aXRsZT48P3BocCBlY2hvIGNvbWJpbmVfc3lzdGVtdGl0bGVfYW5kX3BhZ2V0aXRsZShPSURwbHVzOjpjb25maWcoKS0+c3lzdGVtVGl0bGUoKSwgJHN0YXRpY190aXRsZSk7ID8+PC90aXRsZT4KCgk8IS0t'));
	@fwrite($fp, base64_decode('IFdlIGFyZSB1c2luZyBqUXVlcnkgMi4yLjEsIGJlY2F1c2UgMy4zLjEgc2VlbXMgdG8gYmUgaW5jb21wYXRpYmxlIHdpdGgganNUcmVlIChIVE1MIGNvbnRlbnQgd2lsbCBub3QgYmUgbG9hZGVkIGludG8ganNUcmVlISkgVE9ETzogRmlsZSBidWcgcmVwb3J0IC0t'));
	@fwrite($fp, base64_decode('PgoJPHNjcmlwdCBzcmM9IjNwL2pxdWVyeS9qcXVlcnktMi4yLjEubWluLmpzIj48L3NjcmlwdD4KCTxzY3JpcHQgc3JjPSIzcC9ib290c3RyYXAvanMvYm9vdHN0cmFwLm1pbi5qcyI+PC9zY3JpcHQ+Cgk8c2NyaXB0IHNyYz0iM3AvanN0cmVlL2pzdHJlZS5taW4u'));
	@fwrite($fp, base64_decode('anMiPjwvc2NyaXB0PgoJPHNjcmlwdCBzcmM9JzNwL3RpbnltY2UvdGlueW1jZS5taW4uanMnPjwvc2NyaXB0PgoJPHNjcmlwdCBzcmM9IjNwL2pxdWVyeS11aS9qcXVlcnktdWkubWluLmpzIj48L3NjcmlwdD4KCTxzY3JpcHQgc3JjPSIzcC9sYXlvdXQvanF1ZXJ5'));
	@fwrite($fp, base64_decode('LmxheW91dC5taW4uanMiPjwvc2NyaXB0PgoJPHNjcmlwdCBzcmM9IjNwL3NwYW1zcGFuL3NwYW1zcGFuLmpzIj48L3NjcmlwdD4KCTxzY3JpcHQgc3JjPSdodHRwczovL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS9hcGkuanMnPjwvc2NyaXB0PgoJPHNjcmlwdCBz'));
	@fwrite($fp, base64_decode('cmM9Im9pZHBsdXMubWluLmpzLnBocCI+PC9zY3JpcHQ+CgoJPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSIzcC9qc3RyZWUvdGhlbWVzL2RlZmF1bHQvc3R5bGUubWluLmNzcyI+Cgk8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Im9pZHBsdXMubWluLmNz'));
	@fwrite($fp, base64_decode('cy5waHAiPgoJPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSIzcC9ib290c3RyYXAvY3NzL2Jvb3RzdHJhcC5taW4uY3NzIj4KCgk8bGluayByZWw9InNob3J0Y3V0IGljb24iIHR5cGU9ImltYWdlL3gtaWNvbiIgaHJlZj0iaW1nL2Zhdmljb24uaWNvIj4KCgk8'));
	@fwrite($fp, base64_decode('IS0tIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgdHlwZT0idGV4dC9jc3MiIGhyZWY9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2Nvb2tpZWNvbnNlbnQyLzMuMS4wL2Nvb2tpZWNvbnNlbnQubWluLmNzcyIgLz4gLS0+Cgk8IS0tIDxzY3Jp'));
	@fwrite($fp, base64_decode('cHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9jb29raWVjb25zZW50Mi8zLjEuMC9jb29raWVjb25zZW50Lm1pbi5qcyI+PC9zY3JpcHQ+IC0tPgoJPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiB0eXBlPSJ0ZXh0L2NzcyIgaHJlZj0i'));
	@fwrite($fp, base64_decode('M3AvY29va2llY29uc2VudC9jb29raWVjb25zZW50Lm1pbi5jc3MiPgoJPHNjcmlwdCBzcmM9IjNwL2Nvb2tpZWNvbnNlbnQvY29va2llY29uc2VudC5taW4uanMiPjwvc2NyaXB0PgoJPHNjcmlwdD4KCQl3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsIGZ1'));
	@fwrite($fp, base64_decode('bmN0aW9uKCl7CgkJd2luZG93LmNvb2tpZWNvbnNlbnQuaW5pdGlhbGlzZSh7CgkJCSJwYWxldHRlIjogewoJCQkJInBvcHVwIjogewoJCQkJCSJiYWNrZ3JvdW5kIjogIiNlZGVmZjUiLAoJCQkJCSJ0ZXh0IjogIiM4MzgzOTEiCgkJCQl9LAoJCQkJImJ1dHRvbiI6'));
	@fwrite($fp, base64_decode('IHsKCQkJCQkiYmFja2dyb3VuZCI6ICIjNGI4MWU4IgoJCQkJfQoJCQl9LAoJCQkicG9zaXRpb24iOiAiYm90dG9tLXJpZ2h0IgoJCX0pfSk7Cgk8L3NjcmlwdD4KPC9oZWFkPgoKPGJvZHkgY2xhc3M9InBjIj4KCTxkaXYgaWQ9InN5c3RlbV90aXRsZV9iYXIiIGNs'));
	@fwrite($fp, base64_decode('YXNzPSJ1aS1sYXlvdXQtbm9ydGgiPgoJCTxhIDw/cGhwIGVjaG8gb2lkcGx1c19saW5rKCdvaWRwbHVzOnN5c3RlbScpOyA/Pj4KCQkJPHNwYW4gaWQ9InN5c3RlbV90aXRsZV8xIiBjbGFzcz0icGMiPlZpYVRoaW5rU29mdCBPSURwbHVzIDIuMDwvc3Bhbj48YnI+'));
	@fwrite($fp, base64_decode('CgkJCTxzcGFuIGlkPSJzeXN0ZW1fdGl0bGVfMiIgY2xhc3M9InBjIj48P3BocCBlY2hvIGh0bWxlbnRpdGllcyhPSURwbHVzOjpjb25maWcoKS0+c3lzdGVtVGl0bGUoKSk7ID8+PC9zcGFuPgoJCTwvYT4KCTwvZGl2PgoKCTxkaXYgaWQ9Im9pZHRyZWUiIGNsYXNz'));
	@fwrite($fp, base64_decode('PSJwYyBib3JkZXJib3ggdWktbGF5b3V0LXdlc3QiPgoJCTxub3NjcmlwdD4KCQkJPHA+PGI+UGxlYXNlIGVuYWJsZSBKYXZhU2NyaXB0IHRvIHVzZSBhbGwgZmVhdHVyZXM8L2I+PC9wPgoJCTwvbm9zY3JpcHQ+CgkJPD9waHAgT0lEcGx1c1RyZWU6Om5vbmpzX21l'));
	@fwrite($fp, base64_decode('bnUoKTsgPz4gPCEtLSBUT0RPOiBOb25KUyBtZW51OiBIb3Jpem9udGFsIHNjcm9sbCBiYXIgbWlzc2luZyAtLT4KCTwvZGl2PgoKCTxkaXYgaWQ9ImNvbnRlbnRfd2luZG93IiBjbGFzcz0icGMgYm9yZGVyYm94IHVpLWxheW91dC1jZW50ZXIiPgoJCTw/cGhwCgkJ'));
	@fwrite($fp, base64_decode('JHN0YXRpY19jb250ZW50ID0gcHJlZ19yZXBsYWNlX2NhbGxiYWNrKAoJCQknfDxhXHMoW14+XSopaHJlZj0ibWFpbHRvOihbXiJdKykiKFtePl0qKT4oW148XSopPC9hPnxpc21VJywKCQkJZnVuY3Rpb24gKCR0cmVmZmVyKSB7CgkJCQkkZW1haWwgPSAkdHJlZmZl'));
	@fwrite($fp, base64_decode('clsyXTsKCQkJCSR0ZXh0ID0gJHRyZWZmZXJbNF07CgkJCQlyZXR1cm4gc2VjdXJlX2VtYWlsKCRlbWFpbCwgJHRleHQsIDEpOyAvLyBBbnRpU3BhbQoJCQl9LCAkc3RhdGljX2NvbnRlbnQpOwoKCQllY2hvICc8aDEgaWQ9InJlYWxfdGl0bGUiPic7CgkJaWYgKCRz'));
	@fwrite($fp, base64_decode('dGF0aWNfaWNvbiAhPSAnJykgZWNobyAnPGltZyBzcmM9IicuaHRtbGVudGl0aWVzKCRzdGF0aWNfaWNvbikuJyIgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiBhbHQ9IicuaHRtbGVudGl0aWVzKCRzdGF0aWNfdGl0bGUpLiciPiAnOwoJCWVjaG8gaHRtbGVudGl0aWVz'));
	@fwrite($fp, base64_decode('KCRzdGF0aWNfdGl0bGUpLic8L2gxPic7CgkJZWNobyAnPGRpdiBpZD0icmVhbF9jb250ZW50Ij4nLiRzdGF0aWNfY29udGVudC4nPC9kaXY+JzsKCQlpZiAoJF9TRVJWRVJbJ1JFUVVFU1RfTUVUSE9EJ10gPT0gJ0dFVCcpIHsKCQkJZWNobyAnPGJyPjxwPjxpbWcg'));
	@fwrite($fp, base64_decode('c3JjPSJpbWcvc2hhcmUucG5nIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiIGFsdD0iU2hhcmUiPiA8YSBocmVmPSJpbmRleC5waHA/Z290bz0nLmh0bWxlbnRpdGllcygkc3RhdGljX25vZGVfaWQpLiciIGlkPSJzdGF0aWNfbGluayIgY2xhc3M9ImdyYXlfZm9vdGVy'));
	@fwrite($fp, base64_decode('X2ZvbnQiPlN0YXRpYyBsaW5rIHRvIHRoaXMgcGFnZTwvYT4nOwoJCQllY2hvICcgfCA8YSBocmVmPSJpbmRleF9tb2JpbGUucGhwP2dvdG89Jy5odG1sZW50aXRpZXMoJHN0YXRpY19ub2RlX2lkKS4nIiBpZD0ic3RhdGljX2xpbmtfbW9iaWxlIiBjbGFzcz0iZ3Jh'));
	@fwrite($fp, base64_decode('eV9mb290ZXJfZm9udCI+TW9iaWxlIHZpZXc8L2E+JzsKCQkJZWNobyAnIHwgPGEgaHJlZj0iaW5kZXhfZGVza3RvcC5waHA/Z290bz0nLmh0bWxlbnRpdGllcygkc3RhdGljX25vZGVfaWQpLiciIGlkPSJzdGF0aWNfbGlua19kZXNrdG9wIiBjbGFzcz0iZ3JheV9m'));
	@fwrite($fp, base64_decode('b290ZXJfZm9udCI+RGVza3RvcCB2aWV3PC9hPic7CgkJCWVjaG8gJzwvcD4nOwoJCX0KCQllY2hvICc8YnI+JzsKCQk/PgoJPC9kaXY+CjwvYm9keT4KPC9odG1sPgo8P3BocAoKJGNvbnQgPSBvYl9nZXRfY29udGVudHMoKTsKb2JfZW5kX2NsZWFuKCk7CgplY2hv'));
	@fwrite($fp, base64_decode('ICRjb250Owo='));
	@fclose($fp);
}
if (!is_file('index_desktop.php')) {
	warn('File has vanished! Will re-create it: index_desktop.php');
	writefile_1();
	if (!is_file('index_desktop.php')) {
		warn('File cannot be created (not existing): index_desktop.php');
	} else if (sha1_file('index_desktop.php') != '7a7091f0930f2a219ef5451f50b01e3e898b058f') {
		warn('File cannot be created (checksum mismatch): index_desktop.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('index_desktop.php', 0644)) {
		warn('Could not change file permissions of index_desktop.php');
	}
} else {
	if (@sha1_file('index_desktop.php') !== '7a7091f0930f2a219ef5451f50b01e3e898b058f') {
		if (@sha1_file('index_desktop.php') !== '308e65711321ce719f47fa276abf62936b8adba5') {
			warn('File was modified. Will overwrite the changes now: index_desktop.php');
			$tmp = pathinfo('index_desktop.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('index_desktop.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('index_desktop.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('index_desktop.php') !== '7a7091f0930f2a219ef5451f50b01e3e898b058f') {
			warn('File cannot be written (checksum mismatch): index_desktop.php');
		}
	}
}

// Files different: oidplus.js
function writefile_2() {
	@$fp = fopen('oidplus.js', 'w');
	@fwrite($fp, base64_decode('LyoKICogT0lEcGx1cyAyLjAKICogQ29weXJpZ2h0IDIwMTkgRGFuaWVsIE1hcnNjaGFsbCwgVmlhVGhpbmtTb2Z0CiAqCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5v'));
	@fwrite($fp, base64_decode('dCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4w'));
	@fwrite($fp, base64_decode('CiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lU'));
	@fwrite($fp, base64_decode('SE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRh'));
	@fwrite($fp, base64_decode('dGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwoKLypqc2hpbnQgZXN2ZXJzaW9uOiA2ICovCgovLyAkKCcjaHRtbCcpLmpzdHJlZSgpOwoKY3VycmVudF9ub2RlID0gIiI7CnBvcHN0YXRlX3J1bm5pbmcgPSBmYWxzZTsKClN0cmluZy5wcm90b3R5cGUuZXhwbG9k'));
	@fwrite($fp, base64_decode('ZSA9IGZ1bmN0aW9uIChzZXBhcmF0b3IsIGxpbWl0KSB7CgkvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80NTE0MzIzL2phdmFzY3JpcHQtZXF1aXZhbGVudC10by1waHAtZXhwbG9kZQoJY29uc3QgYXJyYXkgPSB0aGlzLnNwbGl0KHNlcGFy'));
	@fwrite($fp, base64_decode('YXRvcik7CglpZiAobGltaXQgIT09IHVuZGVmaW5lZCAmJiBhcnJheS5sZW5ndGggPj0gbGltaXQpIHsKCQlhcnJheS5wdXNoKGFycmF5LnNwbGljZShsaW1pdCAtIDEpLmpvaW4oc2VwYXJhdG9yKSk7Cgl9CglyZXR1cm4gYXJyYXk7Cn07CgpTdHJpbmcucHJvdG90'));
	@fwrite($fp, base64_decode('eXBlLmh0bWxlbnRpdGllcyA9IGZ1bmN0aW9uICgpIHsKCXJldHVybiB0aGlzLnJlcGxhY2UoLyYvZywgJyZhbXA7JykucmVwbGFjZSgvPC9nLCAnJmx0OycpLnJlcGxhY2UoLz4vZywgJyZndDsnKS5yZXBsYWNlKC8iL2csICcmcXVvdDsnKTsKfTsKClN0cmluZy5w'));
	@fwrite($fp, base64_decode('cm90b3R5cGUuaHRtbF9lbnRpdHlfZGVjb2RlID0gZnVuY3Rpb24gKCkgewoJcmV0dXJuICQoJzx0ZXh0YXJlYSAvPicpLmh0bWwodGhpcykudGV4dCgpOwp9OwoKZnVuY3Rpb24gZ2V0TWV0YShtZXRhTmFtZSkgewoJY29uc3QgbWV0YXMgPSBkb2N1bWVudC5nZXRF'));
	@fwrite($fp, base64_decode('bGVtZW50c0J5VGFnTmFtZSgnbWV0YScpOwoKCWZvciAobGV0IGkgPSAwOyBpIDwgbWV0YXMubGVuZ3RoOyBpKyspIHsKCQlpZiAobWV0YXNbaV0uZ2V0QXR0cmlidXRlKCduYW1lJykgPT09IG1ldGFOYW1lKSB7CgkJCXJldHVybiBtZXRhc1tpXS5nZXRBdHRyaWJ1'));
	@fwrite($fp, base64_decode('dGUoJ2NvbnRlbnQnKTsKCQl9Cgl9CgoJcmV0dXJuICcnOwp9CgpmdW5jdGlvbiBnZXRPaWRQbHVzU3lzdGVtVGl0bGUoKSB7CglyZXR1cm4gZ2V0TWV0YSgnT0lEcGx1cy1TeXN0ZW1UaXRsZScpCn0KCmZ1bmN0aW9uIGNvbWJpbmVfc3lzdGVtdGl0bGVfYW5kX3Bh'));
	@fwrite($fp, base64_decode('Z2V0aXRsZShzeXN0ZW10aXRsZSwgcGFnZXRpdGxlKSB7CglpZiAoc3lzdGVtdGl0bGUgPT0gcGFnZXRpdGxlKSB7CgkJcmV0dXJuIHN5c3RlbXRpdGxlOwoJfSBlbHNlIHsKCQlyZXR1cm4gc3lzdGVtdGl0bGUgKyAnIC0gJyArIHBhZ2V0aXRsZTsKCX0KfQoKZnVu'));
	@fwrite($fp, base64_decode('Y3Rpb24gZ2V0VHJlZUxvYWRVUkwoKSB7Cgl2YXIgdXJsID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZik7Cgl2YXIgZ290byA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCJnb3RvIik7CglyZXR1cm4gKGdvdG8gIT0gbnVsbCkgPyAiYWpheC5waHA/YWN0aW9u'));
	@fwrite($fp, base64_decode('PXRyZWVfbG9hZCZnb3RvPSIrZW5jb2RlVVJJQ29tcG9uZW50KGdvdG8pCgkgICAgICAgICAgICAgICAgICAgICAgOiAiYWpheC5waHA/YWN0aW9uPXRyZWVfbG9hZCI7Cn0KCmZ1bmN0aW9uIHJlbG9hZENvbnRlbnQoKSB7CgkvLyBkb2N1bWVudC5sb2NhdGlvbiA9'));
	@fwrite($fp, base64_decode('ICI/Z290bz0iK2VuY29kZVVSSUNvbXBvbmVudChjdXJyZW50X25vZGUpOwoJb3Blbk9pZEluUGFuZWwoY3VycmVudF9ub2RlLCBmYWxzZSk7CgkkKCcjb2lkdHJlZScpLmpzdHJlZSgicmVmcmVzaCIpOwp9CgpmdW5jdGlvbiB4X3JlYyh4X2RhdGEsIGkpIHsKCSQo'));
	@fwrite($fp, base64_decode('JyNvaWR0cmVlJykuanN0cmVlKCdvcGVuX25vZGUnLCB4X2RhdGFbaV0sIGZ1bmN0aW9uKGUsIGRhdGEpIHsKCQlpZiAoaSsxIDwgeF9kYXRhLmxlbmd0aCkgewoJCQl4X3JlYyh4X2RhdGEsIGkrMSk7CgkJfSBlbHNlIHsKCQkJJCgnI29pZHRyZWUnKS5qc3RyZWUo'));
	@fwrite($fp, base64_decode('J3NlbGVjdF9ub2RlJywgeF9kYXRhW2ldKTsKCQl9Cgl9KTsKfQoKZnVuY3Rpb24gb3Blbk9pZEluUGFuZWwoaWQsIHJlc2VsZWN0PWZhbHNlKSB7CglpZiAocmVzZWxlY3QpIHsKCQkkKCcjb2lkdHJlZScpLmpzdHJlZSgnZGVzZWxlY3RfYWxsJyk7CgoJCS8vIElm'));
	@fwrite($fp, base64_decode('IHRoZSBub2RlIGlzIGFscmVhZHkgbG9hZGVkIGluIHRoZSB0cmVlLCBzZWxlY3QgaXQuCgkJLy8gVGhlIHNlbGVjdC1ldmVudCB3aWxsIGxvYWQgdGhlIGNvbnRlbnQgcGFnZSwgc28gd2UgY2FuIHJldHVybiBmcm9tIHRoaXMgZnVuY3Rpb24uCgkJaWYgKCQoJyNv'));
	@fwrite($fp, base64_decode('aWR0cmVlJykuanN0cmVlKCdzZWxlY3Rfbm9kZScsIGlkKSkgcmV0dXJuOwoKCQkvLyBJZiB0aGUgbm9kZSBpcyBub3QgbG9hZGVkLCB0aGVuIHdlIHRyeSB0byBzZWFyY2ggaXQuCgkJLy8gSWYgaXQgY2FuIGJlIGZvdW5kLCB0aGVuIG9wZW4gYWxsIHBhcmVudCBu'));
	@fwrite($fp, base64_decode('b2RlcyBhbmQgc2VsZWN0IHRoZSBub2RlCgkJLy8gVE9ETzogbWF5YmUgaXQgd291bGQgYmUgZ29vZCBpZiBjb250ZW50IGlzIGxvYWRlZCBCRUZPUkUgdGhlIHRyZWUgaXMgZXhwYW5kZWQKCQkkLmFqYXgoewoJCQl1cmw6ImFqYXgucGhwIiwKCQkJbWV0aG9kOiJQ'));
	@fwrite($fp, base64_decode('T1NUIiwKCQkJZGF0YTp7CgkJCQlhY3Rpb246InRyZWVfc2VhcmNoIiwKCQkJCXNlYXJjaDppZAoJCQl9LAoJCQllcnJvcjpmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHsKCQkJCW9wZW5PaWRJblBhbmVsKGlkLCBmYWxzZSk7CgkJCX0s'));
	@fwrite($fp, base64_decode('CgkJCXN1Y2Nlc3M6ZnVuY3Rpb24oZGF0YSkgewoJCQkJaWYgKCJlcnJvciIgaW4gZGF0YSkgewoJCQkJCWNvbnNvbGUuZXJyb3IoZGF0YSk7CgkJCQkJb3Blbk9pZEluUGFuZWwoaWQsIGZhbHNlKTsgLy8gc2lsZW50bHkgaWdub3JlIHRoZSBwcm9ibGVtCgkJCQl9'));
	@fwrite($fp, base64_decode('IGVsc2UgaWYgKChkYXRhIGluc3RhbmNlb2YgQXJyYXkpICYmIChkYXRhLmxlbmd0aCA+IDApKSB7CgkJCQkJeF9yZWMoZGF0YSwgMCk7CgkJCQl9IGVsc2UgewoJCQkJCW9wZW5PaWRJblBhbmVsKGlkLCBmYWxzZSk7CgkJCQl9CgkJCX0KCQl9KTsKCgkJLy8gSWYg'));
	@fwrite($fp, base64_decode('c29tZXRoaW5nIGZhaWxzIChlLmcuIGlmIGFqYXgucGhwPWFjdGlvbj10cmVlX3NlYXJjaCBjYW5ub3QgZmluZCB0aGUgbm9kZSwKCQkvLyB0aGVuIG9wZW5PaWRJblBhbmVsIHdpbGwgYmUgY2FsbGVkIGFnYWluLCB3aXRob3V0IHRoZSByZXNlbGVjdCBhcmd1bWVu'));
	@fwrite($fp, base64_decode('dC4KCQkvLyBTbyB3ZSBjYW4gbm93IGV4aXQKCQlyZXR1cm47Cgl9CgoJZG9jdW1lbnQudGl0bGUgPSAiIjsKCSQoJyNyZWFsX3RpdGxlJykuaHRtbCgiJm5ic3A7Iik7CgkkKCcjcmVhbF9jb250ZW50JykuaHRtbCgiTG9hZGluZy4uLiIpOwoJJCgnI3N0YXRpY19s'));
	@fwrite($fp, base64_decode('aW5rJykuYXR0cigiaHJlZiIsICJpbmRleC5waHA/Z290bz0iK2VuY29kZVVSSUNvbXBvbmVudChpZCkpOwoJJCgnI3N0YXRpY19saW5rX2Rlc2t0b3AnKS5hdHRyKCJocmVmIiwgImluZGV4X2Rlc2t0b3AucGhwP2dvdG89IitlbmNvZGVVUklDb21wb25lbnQoaWQp'));
	@fwrite($fp, base64_decode('KTsKCSQoJyNzdGF0aWNfbGlua19tb2JpbGUnKS5hdHRyKCJocmVmIiwgImluZGV4X21vYmlsZS5waHA/Z290bz0iK2VuY29kZVVSSUNvbXBvbmVudChpZCkpOwoKCWlmIChwb3BzdGF0ZV9ydW5uaW5nKSByZXR1cm47IC8vIFRvIGF2b2lkIHRoYXQgdGhlIGpzdHJl'));
	@fwrite($fp, base64_decode('ZSBzZWxlY3Rpb24gZHVyaW5nIHBvcHN0YXRlKCkgd29uJ3QgdHJpZ2dlciBhbm90aGVyIHBhZ2UgbG9hZAoKCS8vIE5vcm1hbCBvcGVuaW5nIG9mIGEgZGVzY3JpcHRpb24KCWZldGNoKCdhamF4LnBocD9hY3Rpb249Z2V0X2Rlc2NyaXB0aW9uJmlkPScrZW5jb2Rl'));
	@fwrite($fp, base64_decode('VVJJQ29tcG9uZW50KGlkKSkKCS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7CgkJcmVzcG9uc2UuanNvbigpCgkJLnRoZW4oZnVuY3Rpb24oZGF0YSkgewoJCQlpZiAoImVycm9yIiBpbiBkYXRhKSB7CgkJCQlhbGVydCgiRmFpbGVkIHRvIGxvYWQgY29udGVudDog'));
	@fwrite($fp, base64_decode('IiArIGRhdGEuZXJyb3IpOwoJCQkJY29uc29sZS5lcnJvcihkYXRhLmVycm9yKTsKCQkJCXJldHVybjsKCQkJfQoKCQkJZGF0YS5pZCA9IGlkOwoKCQkJZG9jdW1lbnQudGl0bGUgPSBjb21iaW5lX3N5c3RlbXRpdGxlX2FuZF9wYWdldGl0bGUoZ2V0T2lkUGx1c1N5'));
	@fwrite($fp, base64_decode('c3RlbVRpdGxlKCksIGRhdGEudGl0bGUpOwoJCQl2YXIgc3RhdGUgPSB7CgkJCQkibm9kZV9pZCI6aWQsCgkJCQkidGl0bGVIVE1MIjooZGF0YS5pY29uID8gJzxpbWcgc3JjPSInK2RhdGEuaWNvbisnIiB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIGFsdD0iJytkYXRh'));
	@fwrite($fp, base64_decode('LnRpdGxlLmh0bWxlbnRpdGllcygpKyciPiAnIDogJycpICsgZGF0YS50aXRsZS5odG1sZW50aXRpZXMoKSwKCQkJCSJ0ZXh0SFRNTCI6ZGF0YS50ZXh0LAoJCQkJInN0YXRpY2xpbmtIUkVGIjoiaW5kZXgucGhwP2dvdG89IitlbmNvZGVVUklDb21wb25lbnQoaWQp'));
	@fwrite($fp, base64_decode('LAoJCQkJInN0YXRpY2xpbmtIUkVGX0Rlc2t0b3AiOiJpbmRleF9kZXNrdG9wLnBocD9nb3RvPSIrZW5jb2RlVVJJQ29tcG9uZW50KGlkKSwKCQkJCSJzdGF0aWNsaW5rSFJFRl9Nb2JpbGUiOiJpbmRleF9tb2JpbGUucGhwP2dvdG89IitlbmNvZGVVUklDb21wb25l'));
	@fwrite($fp, base64_decode('bnQoaWQpCgkJCX07CgkJCWlmIChjdXJyZW50X25vZGUgIT0gaWQpIHsKCQkJCXdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZShzdGF0ZSwgZGF0YS50aXRsZSwgIj9nb3RvPSIrZW5jb2RlVVJJQ29tcG9uZW50KGlkKSk7CgkJCX0gZWxzZSB7CgkJCQl3aW5kb3cuaGlz'));
	@fwrite($fp, base64_decode('dG9yeS5yZXBsYWNlU3RhdGUoc3RhdGUsIGRhdGEudGl0bGUsICI/Z290bz0iK2VuY29kZVVSSUNvbXBvbmVudChpZCkpOwoJCQl9CgoJCQlpZiAoZGF0YS5pY29uKSB7CgkJCQkkKCcjcmVhbF90aXRsZScpLmh0bWwoJzxpbWcgc3JjPSInK2RhdGEuaWNvbisnIiB3'));
	@fwrite($fp, base64_decode('aWR0aD0iNDgiIGhlaWdodD0iNDgiIGFsdD0iJytkYXRhLnRpdGxlLmh0bWxlbnRpdGllcygpKyciPiAnICsgZGF0YS50aXRsZS5odG1sZW50aXRpZXMoKSk7CgkJCX0gZWxzZSB7CgkJCQkkKCcjcmVhbF90aXRsZScpLmh0bWwoZGF0YS50aXRsZS5odG1sZW50aXRp'));
	@fwrite($fp, base64_decode('ZXMoKSk7CgkJCX0KCQkJJCgnI3JlYWxfY29udGVudCcpLmh0bWwoZGF0YS50ZXh0KTsKCQkJZG9jdW1lbnQudGl0bGUgPSBjb21iaW5lX3N5c3RlbXRpdGxlX2FuZF9wYWdldGl0bGUoZ2V0T2lkUGx1c1N5c3RlbVRpdGxlKCksIGRhdGEudGl0bGUpOwoJCQljdXJy'));
	@fwrite($fp, base64_decode('ZW50X25vZGUgPSBpZDsKCQl9KQoJCS5jYXRjaChmdW5jdGlvbihlcnJvcikgewoJCQlhbGVydCgiRmFpbGVkIHRvIGxvYWQgY29udGVudDogIiArIGVycm9yKTsKCQkJY29uc29sZS5lcnJvcihlcnJvcik7CgkJfSk7Cgl9KQoJLmNhdGNoKGZ1bmN0aW9uKGVycm9y'));
	@fwrite($fp, base64_decode('KSB7CgkJYWxlcnQoIkZhaWxlZCB0byBsb2FkIGNvbnRlbnQ6ICIgKyBlcnJvcik7CgkJY29uc29sZS5lcnJvcihlcnJvcik7Cgl9KTsKfQoKZnVuY3Rpb24gdXBkYXRlRGVzYygpIHsKCSQuYWpheCh7CgkJdXJsOiJhamF4LnBocCIsCgkJbWV0aG9kOiJQT1NUIiwK'));
	@fwrite($fp, base64_decode('CQlkYXRhOiB7CgkJCWFjdGlvbjoiVXBkYXRlMiIsCgkJCWlkOmN1cnJlbnRfbm9kZSwKCQkJdGl0bGU6KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXRsZWVkaXQnKSA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXRsZWVkaXQnKS52YWx1ZSA6IG51bGwp'));
	@fwrite($fp, base64_decode('LAoJCQkvL2Rlc2NyaXB0aW9uOihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVzY3JpcHRpb24nKSA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXNjcmlwdGlvbicpLnZhbHVlIDogbnVsbCkKCQkJZGVzY3JpcHRpb246dGlueU1DRS5nZXQoJ2Rlc2NyaXB0'));
	@fwrite($fp, base64_decode('aW9uJykuZ2V0Q29udGVudCgpCgkJfSwKCQllcnJvcjpmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHsKCQkJYWxlcnQoIkVycm9yOiAiICsgZXJyb3JUaHJvd24pOwoJCX0sCgkJc3VjY2VzczpmdW5jdGlvbihkYXRhKSB7CgkJCWlmICgi'));
	@fwrite($fp, base64_decode('ZXJyb3IiIGluIGRhdGEpIHsKCQkJCWFsZXJ0KCJFcnJvcjogIiArIGRhdGEuZXJyb3IpOwoJCQl9IGVsc2UgaWYgKGRhdGEuc3RhdHVzID09IDApIHsKCQkJCWFsZXJ0KCJVcGRhdGUgT0siKTsKCQkJCS8vcmVsb2FkQ29udGVudCgpOwoJCQkJJCgnI29pZHRyZWUn'));
	@fwrite($fp, base64_decode('KS5qc3RyZWUoInJlZnJlc2giKTsKCQkJCXZhciBoMXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaDEiKTsKCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgaDFzLmxlbmd0aDsgaSsrKSB7CgkJCQkJdmFyIGgxID0gaDFzW2ldOwoJCQkJCWgxLmlubmVy'));
	@fwrite($fp, base64_decode('SFRNTCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXRsZWVkaXQnKS52YWx1ZS5odG1sZW50aXRpZXMoKTsKCQkJCX0KCQkJCWRvY3VtZW50LnRpdGxlID0gY29tYmluZV9zeXN0ZW10aXRsZV9hbmRfcGFnZXRpdGxlKGdldE9pZFBsdXNTeXN0ZW1UaXRsZSgp'));
	@fwrite($fp, base64_decode('LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGl0bGVlZGl0JykudmFsdWUpOwoKCQkJCXZhciBtY2UgPSB0aW55bWNlLmdldCgnZGVzY3JpcHRpb24nKTsKCQkJCWlmIChtY2UgIT0gbnVsbCkgbWNlLmlzTm90RGlydHkgPSAxOwoJCQl9IGVsc2UgewoJCQkJYWxl'));
	@fwrite($fp, base64_decode('cnQoIkVycm9yOiAiICsgZGF0YS5lcnJvcik7CgkJCX0KCQl9Cgl9KTsKfQoKZnVuY3Rpb24gY3J1ZEFjdGlvblNlbmRJbnZpdGF0aW9uKG9yaWdpbiwgZW1haWwpIHsKCS8vIGRvY3VtZW50LmxvY2F0aW9uID0gIj9nb3RvPW9pZHBsdXM6aW52aXRlX3JhJCIrZW5j'));
	@fwrite($fp, base64_decode('b2RlVVJJQ29tcG9uZW50KGVtYWlsKSsiJCIrZW5jb2RlVVJJQ29tcG9uZW50KG9yaWdpbik7CglvcGVuT2lkSW5QYW5lbCgnb2lkcGx1czppbnZpdGVfcmEkJytlbWFpbCsnJCcrb3JpZ2luLCBmYWxzZSk7Cn0KCmZ1bmN0aW9uIGNydWRBY3Rpb25JbnNlcnQocGFy'));
	@fwrite($fp, base64_decode('ZW50KSB7CgkkLmFqYXgoewoJCXVybDoiYWpheC5waHAiLAoJCW1ldGhvZDoiUE9TVCIsCgkJZGF0YTp7CgkJCWFjdGlvbjoiSW5zZXJ0IiwKCQkJaWQ6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lkJykudmFsdWUsCgkJCXJhX2VtYWlsOmRvY3VtZW50LmdldEVs'));
	@fwrite($fp, base64_decode('ZW1lbnRCeUlkKCdyYV9lbWFpbCcpLnZhbHVlLAoJCQlhc24xaWRzOihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXNuMWlkcycpID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FzbjFpZHMnKS52YWx1ZSA6IG51bGwpLAoJCQlpcmlzOihkb2N1bWVudC5nZXRF'));
	@fwrite($fp, base64_decode('bGVtZW50QnlJZCgnaXJpcycpID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lyaXMnKS52YWx1ZSA6IG51bGwpLAoJCQljb25maWRlbnRpYWw6KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoaWRlJykgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGlkZScp'));
	@fwrite($fp, base64_decode('LmNoZWNrZWQgOiBudWxsKSwKCQkJcGFyZW50OnBhcmVudAoJCX0sCgkJZXJyb3I6ZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7CgkJCWFsZXJ0KCJFcnJvcjogIiArIGVycm9yVGhyb3duKTsKCQl9LAoJCXN1Y2Nlc3M6ZnVuY3Rpb24o'));
	@fwrite($fp, base64_decode('ZGF0YSkgewoJCQlpZiAoImVycm9yIiBpbiBkYXRhKSB7CgkJCQlhbGVydCgiRXJyb3I6ICIgKyBkYXRhLmVycm9yKTsKCQkJfSBlbHNlIGlmIChkYXRhLnN0YXR1cyA9PSAwKSB7CgkJCQkvL2FsZXJ0KCJJbnNlcnQgT0siKTsKCQkJCXJlbG9hZENvbnRlbnQoKTsK'));
	@fwrite($fp, base64_decode('CQkJCS8vIFRPRE86IGF1ZiByZWxvYWRDb250ZW50KCkgdmVyemljaHRlbi4gc3RhdHRkZXNzZW4gbnVyIHRyZWUgbGlua3MgYWt0dWFsaXNpZXJlbiwgdW5kIHJlY2h0cyBlaW5lIG5ldWUgemVpbGUgenVyIHRhYmVsbGUgaGluenVm/GdlbgoJCQl9IGVsc2UgaWYg'));
	@fwrite($fp, base64_decode('KGRhdGEuc3RhdHVzID09IDEpIHsKCQkJCWlmIChjb25maXJtKCJVcGRhdGUgT0suIEhvd2V2ZXIsIHRoZSBlbWFpbCBhZGRyZXNzIHlvdSBoYXZlIGVudGVyZWQgKCIrZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhX2VtYWlsJykudmFsdWUrIikgaXMgbm90IGlu'));
	@fwrite($fp, base64_decode('IG91ciBzeXN0ZW0uIERvIHlvdSB3YW50IHRvIHNlbmQgYW4gaW52aXRhdGlvbiwgc28gdGhhdCB0aGUgUkEgY2FuIHJlZ2lzdGVyIGFuIGFjY291bnQgdG8gbWFuYWdlIHRoZWlyIE9JRHM/IikpIHsKCQkJCQljcnVkQWN0aW9uU2VuZEludml0YXRpb24ocGFyZW50'));
	@fwrite($fp, base64_decode('LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmFfZW1haWwnKS52YWx1ZSk7CgkJCQl9IGVsc2UgewoJCQkJCXJlbG9hZENvbnRlbnQoKTsKCQkJCQkvLyBUT0RPOiBhdWYgcmVsb2FkQ29udGVudCgpIHZlcnppY2h0ZW4uIHN0YXR0ZGVzc2VuIG51ciB0cmVlIGxp'));
	@fwrite($fp, base64_decode('bmtzIGFrdHVhbGlzaWVyZW4sIHVuZCByZWNodHMgZWluZSBuZXVlIHplaWxlIHp1ciB0YWJlbGxlIGhpbnp1ZvxnZW4KCQkJCX0KCQkJfSBlbHNlIHsKCQkJCWFsZXJ0KCJFcnJvcjogIiArIGRhdGEpOwoJCQl9CgkJfQoJfSk7Cn0KCmZ1bmN0aW9uIGNydWRBY3Rp'));
	@fwrite($fp, base64_decode('b25VcGRhdGUoaWQsIHBhcmVudCkgewoJJC5hamF4KHsKCQl1cmw6ImFqYXgucGhwIiwKCQltZXRob2Q6IlBPU1QiLAoJCWRhdGE6IHsKCQkJYWN0aW9uOiJVcGRhdGUiLAoJCQlpZDppZCwKCQkJcmFfZW1haWw6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhX2Vt'));
	@fwrite($fp, base64_decode('YWlsXycraWQpLnZhbHVlLAoJCQlhc24xaWRzOihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXNuMWlkc18nK2lkKSA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhc24xaWRzXycraWQpLnZhbHVlIDogbnVsbCksCgkJCWlyaXM6KGRvY3VtZW50LmdldEVsZW1l'));
	@fwrite($fp, base64_decode('bnRCeUlkKCdpcmlzXycraWQpID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lyaXNfJytpZCkudmFsdWUgOiBudWxsKSwKCQkJY29uZmlkZW50aWFsOihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGlkZV8nK2lkKSA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlk'));
	@fwrite($fp, base64_decode('KCdoaWRlXycraWQpLmNoZWNrZWQgOiBudWxsKSwKCQkJcGFyZW50OnBhcmVudAoJCX0sCgkJZXJyb3I6ZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7CgkJCWFsZXJ0KCJFcnJvcjogIiArIGVycm9yVGhyb3duKTsKCQl9LAoJCXN1Y2Nl'));
	@fwrite($fp, base64_decode('c3M6ZnVuY3Rpb24oZGF0YSkgewoJCQlpZiAoImVycm9yIiBpbiBkYXRhKSB7CgkJCQlhbGVydCgiRXJyb3I6ICIgKyBkYXRhLmVycm9yKTsKCQkJfSBlbHNlIGlmIChkYXRhLnN0YXR1cyA9PSAwKSB7CgkJCQlhbGVydCgiVXBkYXRlIE9LIik7CgkJCQkvLyByZWxv'));
	@fwrite($fp, base64_decode('YWRDb250ZW50KCk7CgkJCQkkKCcjb2lkdHJlZScpLmpzdHJlZSgicmVmcmVzaCIpOwoJCQl9IGVsc2UgaWYgKGRhdGEuc3RhdHVzID09IDEpIHsKCQkJCWlmIChjb25maXJtKCJVcGRhdGUgT0suIEhvd2V2ZXIsIHRoZSBlbWFpbCBhZGRyZXNzIHlvdSBoYXZlIGVu'));
	@fwrite($fp, base64_decode('dGVyZWQgKCIrZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhX2VtYWlsXycraWQpLnZhbHVlKyIpIGlzIG5vdCBpbiBvdXIgc3lzdGVtLiBEbyB5b3Ugd2FudCB0byBzZW5kIGFuIGludml0YXRpb24sIHNvIHRoYXQgdGhlIFJBIGNhbiByZWdpc3RlciBhbiBhY2Nv'));
	@fwrite($fp, base64_decode('dW50IHRvIG1hbmFnZSB0aGVpciBPSURzPyIpKSB7CgkJCQkJY3J1ZEFjdGlvblNlbmRJbnZpdGF0aW9uKHBhcmVudCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhX2VtYWlsXycraWQpLnZhbHVlKTsKCQkJCX0gZWxzZSB7CgkJCQkJLy8gcmVsb2FkQ29udGVu'));
	@fwrite($fp, base64_decode('dCgpOwoJCQkJCSQoJyNvaWR0cmVlJykuanN0cmVlKCJyZWZyZXNoIik7CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlhbGVydCgiRXJyb3I6ICIgKyBkYXRhKTsKCQkJfQoJCX0KCX0pOwp9CgpmdW5jdGlvbiBjcnVkQWN0aW9uRGVsZXRlKGlkLCBwYXJlbnQpIHsKCWlm'));
	@fwrite($fp, base64_decode('KCF3aW5kb3cuY29uZmlybSgiQXJlIHlvdSBzdXJlIHRoYXQgeW91IHdhbnQgdG8gZGVsZXRlICIraWQrIj8iKSkgcmV0dXJuIGZhbHNlOwoKCSQuYWpheCh7CgkJdXJsOiJhamF4LnBocCIsCgkJbWV0aG9kOiJQT1NUIiwKCQlkYXRhOiB7CgkJCWFjdGlvbjoiRGVs'));
	@fwrite($fp, base64_decode('ZXRlIiwKCQkJaWQ6aWQsCgkJCXBhcmVudDpwYXJlbnQKCQl9LAoJCWVycm9yOmZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikgewoJCQlhbGVydCgiRXJyb3I6ICIgKyBlcnJvclRocm93bik7CgkJfSwKCQlzdWNjZXNzOmZ1bmN0aW9uKGRh'));
	@fwrite($fp, base64_decode('dGEpIHsKCQkJaWYgKCJlcnJvciIgaW4gZGF0YSkgewoJCQkJYWxlcnQoIkVycm9yOiAiICsgZGF0YS5lcnJvcik7CgkJCX0gZWxzZSBpZiAoZGF0YS5zdGF0dXMgPT0gMCkgewoJCQkJcmVsb2FkQ29udGVudCgpOwoJCQkJLy8gVE9ETzogYXVmIHJlbG9hZENvbnRl'));
	@fwrite($fp, base64_decode('bnQoKSB2ZXJ6aWNodGVuLiBzdGF0dGRlc3NlbiBudXIgdHJlZSBsaW5rcyBha3R1YWxpc2llcmVuLCB1bmQgcmVjaHRzIGRpZSB6ZWlsZSBhdXMgZGVyIHRhYmVsbGUgbPZzY2hlbgoJCQl9IGVsc2UgewoJCQkJYWxlcnQoIkVycm9yOiAiICsgZGF0YS5lcnJvcik7'));
	@fwrite($fp, base64_decode('CgkJCX0KCQl9Cgl9KTsKfQoKZnVuY3Rpb24gZGVsZXRlUmEoZW1haWwsIGdvdG8pIHsKCWlmKCF3aW5kb3cuY29uZmlybSgiQXJlIHlvdSByZWFsbHkgc3VyZSB0aGF0IHlvdSB3YW50IHRvIGRlbGV0ZSAiK2VtYWlsKyI/IChUaGUgT0lEcyBzdGF5IGFjdGl2ZSki'));
	@fwrite($fp, base64_decode('KSkgcmV0dXJuIGZhbHNlOwoKCSQuYWpheCh7CgkJdXJsOiJhamF4LnBocCIsCgkJbWV0aG9kOiJQT1NUIiwKCQlkYXRhOiB7CgkJCWFjdGlvbjoiZGVsZXRlX3JhIiwKCQkJZW1haWw6ZW1haWwsCgkJfSwKCQllcnJvcjpmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1'));
	@fwrite($fp, base64_decode('cywgZXJyb3JUaHJvd24pIHsKCQkJYWxlcnQoIkVycm9yOiAiICsgZXJyb3JUaHJvd24pOwoJCX0sCgkJc3VjY2VzczpmdW5jdGlvbihkYXRhKSB7CgkJCWlmICgiZXJyb3IiIGluIGRhdGEpIHsKCQkJCWFsZXJ0KCJFcnJvcjogIiArIGRhdGEuZXJyb3IpOwoJCQl9'));
	@fwrite($fp, base64_decode('IGVsc2UgaWYgKGRhdGEuc3RhdHVzID09IDApIHsKCQkJCWFsZXJ0KCJEb25lLiIpOwoJCQkJaWYgKGdvdG8gIT0gbnVsbCkgZG9jdW1lbnQubG9jYXRpb24gPSAiP2dvdG89IitlbmNvZGVVUklDb21wb25lbnQoZ290byk7CgkJCQkvLyByZWxvYWRDb250ZW50KCk7'));
	@fwrite($fp, base64_decode('CgkJCX0gZWxzZSB7CgkJCQlhbGVydCgiRXJyb3I6ICIgKyBkYXRhLmVycm9yKTsKCQkJfQoJCX0KCX0pOwp9CgovLyBUaGlzIGZ1bmN0aW9uIG9wZW5zIHRoZSAicGFyZW50SUQiIG5vZGUsIGFuZCB0aGVuIHNlbGVjdHMgdGhlICJjaGlsZElEIiBub2RlICh3aGlj'));
	@fwrite($fp, base64_decode('aCBzaG91bGQgYmUgYmVuZWF0aCB0aGUgcGFyZW50IG5vZGUpCmZ1bmN0aW9uIG9wZW5BbmRTZWxlY3ROb2RlKGNoaWxkSUQsIHBhcmVudElEKSB7CglpZiAoJCgnI29pZHRyZWUnKS5qc3RyZWUodHJ1ZSkuZ2V0X25vZGUocGFyZW50SUQpKSB7CgkJJCgnI29pZHRy'));
	@fwrite($fp, base64_decode('ZWUnKS5qc3RyZWUoJ29wZW5fbm9kZScsIHBhcmVudElELCBmdW5jdGlvbihlLCBkYXRhKSB7IC8vIG9wZW4gcGFyZW50IG5vZGUKCQkJaWYgKCQoJyNvaWR0cmVlJykuanN0cmVlKHRydWUpLmdldF9ub2RlKGNoaWxkSUQpKSB7IC8vIGlzIHRoZSBjaGlsZCB0aGVy'));
	@fwrite($fp, base64_decode('ZT8KCQkJCSQoJyNvaWR0cmVlJykuanN0cmVlKCdkZXNlbGVjdF9hbGwnKS5qc3RyZWUoJ3NlbGVjdF9ub2RlJywgY2hpbGRJRCk7IC8vIHNlbGVjdCBpdAoJCQl9IGVsc2UgewoJCQkJLy8gVGhpcyBjYW4gaGFwcGVuIGlmIHRoZSBjb250ZW50IHBhZ2UgY29udGFp'));
	@fwrite($fp, base64_decode('bnMgYnJhbmQgbmV3IGl0ZW1zIHdoaWNoIGFyZSBub3QgaW4gdGhlIHRyZWV2aWV3IHlldAoJCQkJZG9jdW1lbnQubG9jYXRpb24gPSAiP2dvdG89IitlbmNvZGVVUklDb21wb25lbnQoY2hpbGRJRCk7CgkJCX0KCQl9LCB0cnVlKTsKCX0gZWxzZSB7CgkJLy8gVGhp'));
	@fwrite($fp, base64_decode('cyBzaG91bGQgdXN1YWxseSBub3QgaGFwcGVuCgkJZG9jdW1lbnQubG9jYXRpb24gPSAiP2dvdG89IitlbmNvZGVVUklDb21wb25lbnQoY2hpbGRJRCk7Cgl9Cn0KCiQod2luZG93KS5vbigicG9wc3RhdGUiLCBmdW5jdGlvbihlKSB7Cglwb3BzdGF0ZV9ydW5uaW5n'));
	@fwrite($fp, base64_decode('ID0gdHJ1ZTsKCXRyeSB7CgkJdmFyIGRhdGEgPSBlLm9yaWdpbmFsRXZlbnQuc3RhdGU7CgoJCWN1cnJlbnRfbm9kZSA9IGRhdGEubm9kZV9pZDsKCQkkKCcjb2lkdHJlZScpLmpzdHJlZSgnZGVzZWxlY3RfYWxsJykuanN0cmVlKCdzZWxlY3Rfbm9kZScsIGRhdGEu'));
	@fwrite($fp, base64_decode('bm9kZV9pZCk7CgkJJCgnI3JlYWxfdGl0bGUnKS5odG1sKGRhdGEudGl0bGVIVE1MKTsKCQkkKCcjcmVhbF9jb250ZW50JykuaHRtbChkYXRhLnRleHRIVE1MKTsKCQkkKCcjc3RhdGljX2xpbmsnKS5hdHRyKCJocmVmIiwgZGF0YS5zdGF0aWNsaW5rSFJFRik7CgkJ'));
	@fwrite($fp, base64_decode('JCgnI3N0YXRpY19saW5rX2Rlc2t0b3AnKS5hdHRyKCJocmVmIiwgZGF0YS5zdGF0aWNsaW5rSFJFRl9EZXNrdG9wKTsKCQkkKCcjc3RhdGljX2xpbmtfbW9iaWxlJykuYXR0cigiaHJlZiIsIGRhdGEuc3RhdGljbGlua0hSRUZfTW9iaWxlKTsKCQlkb2N1bWVudC50'));
	@fwrite($fp, base64_decode('aXRsZSA9IGNvbWJpbmVfc3lzdGVtdGl0bGVfYW5kX3BhZ2V0aXRsZShnZXRPaWRQbHVzU3lzdGVtVGl0bGUoKSwgZGF0YS50aXRsZUhUTUwuaHRtbF9lbnRpdHlfZGVjb2RlKCkpOwoJfSBjYXRjaCAoZXJyKSB7CgkJcG9wc3RhdGVfcnVubmluZyA9IGZhbHNlOwoJ'));
	@fwrite($fp, base64_decode('fSBmaW5hbGx5IHsKCQlwb3BzdGF0ZV9ydW5uaW5nID0gZmFsc2U7Cgl9Cn0pOwoKJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkgewoJLy8gLS0tIEpzVHJlZQoKCSQoJyNvaWR0cmVlJykKCS5qc3RyZWUoewoJCXBsdWdpbnM6IFsnbWFzc2xvYWQnLCdzZWFy'));
	@fwrite($fp, base64_decode('Y2gnLCdjb25kaXRpb25hbHNlbGVjdCddLAoJCSdjb3JlJyA6IHsKCQkJJ2RhdGEnIDogewoJCQkJInVybCIgOiBnZXRUcmVlTG9hZFVSTCgpLAoJCQkJImRhdGEiIDogZnVuY3Rpb24gKG5vZGUpIHsKCQkJCQlyZXR1cm4geyAiaWQiIDogbm9kZS5pZCB9OwoJCQkJ'));
	@fwrite($fp, base64_decode('fQoJCQl9LAoJCQkibXVsdGlwbGUiOiBmYWxzZQoJCX0sCgkJJ2NvbmRpdGlvbmFsc2VsZWN0JyA6IGZ1bmN0aW9uIChub2RlKSB7CgkJCWlmIChub2RlLm9yaWdpbmFsLmNvbmRpdGlvbmFsc2VsZWN0ICE9PSB1bmRlZmluZWQpIHsKCQkJCXJldHVybiBldmFsKG5v'));
	@fwrite($fp, base64_decode('ZGUub3JpZ2luYWwuY29uZGl0aW9uYWxzZWxlY3QpOwoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIHRydWU7IC8vIGFsbG93IHNlbGVjdAoJCQl9CgkJfSwKCX0pCgkub24oJ3JlYWR5LmpzdHJlZScsIGZ1bmN0aW9uIChlLCBkYXRhKSB7CgkJdmFyIHVybCA9IG5ldyBV'));
	@fwrite($fp, base64_decode('Ukwod2luZG93LmxvY2F0aW9uLmhyZWYpOwoJCXZhciBnb3RvID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoImdvdG8iKTsKCQlpZiAoZ290byA9PSBudWxsKSBnb3RvID0gIm9pZHBsdXM6c3lzdGVtIjsgLy8gdGhlIHBhZ2Ugd2FzIG5vdCBjYWxsZWQgd2l0aCA/Z290'));
	@fwrite($fp, base64_decode('bz0uLi4KCgkJLy8gQnkgc2V0dGluZyBjdXJyZW50X25vZGUsIHNlbGVjdF9ub2RlKCkgd2lsbCBub3QgY2F1c2UgYWpheC5waHA/YWN0aW9uPWdldF9kZXNjcmlwdGlvbiB0byBsb2FkIChzaW5jZSB3ZSBhbHJlYWR5IGxvYWRlZCB0aGUgZmlyc3Qgc3RhdGljIGNv'));
	@fwrite($fp, base64_decode('bnRlbnQgdmlhIFBIUCwgZm9yIHNlYXJjaCBlbmdpbmVzIG1haW5seSkKCQkvLyBCdXQgdGhlbiB3ZSBuZWVkIHRvIHNldCB0aGUgaGlzdG9yeSBzdGF0ZSBtYW51YWxseQoJCWN1cnJlbnRfbm9kZSA9IGdvdG87CgkJd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRl'));
	@fwrite($fp, base64_decode('KHsKCQkJIm5vZGVfaWQiOmdvdG8sCgkJCSJ0aXRsZUhUTUwiOiQoJyNyZWFsX3RpdGxlJykuaHRtbCgpLAoJCQkidGV4dEhUTUwiOiQoJyNyZWFsX2NvbnRlbnQnKS5odG1sKCksCgkJCSJzdGF0aWNsaW5rSFJFRiI6ImluZGV4LnBocD9nb3RvPSIrZW5jb2RlVVJJ'));
	@fwrite($fp, base64_decode('Q29tcG9uZW50KGdvdG8pLAoJCQkic3RhdGljbGlua0hSRUZfRGVza3RvcCI6ImluZGV4X2Rlc2t0b3AucGhwP2dvdG89IitlbmNvZGVVUklDb21wb25lbnQoZ290byksCgkJCSJzdGF0aWNsaW5rSFJFRl9Nb2JpbGUiOiJpbmRleF9tb2JpbGUucGhwP2dvdG89Iitl'));
	@fwrite($fp, base64_decode('bmNvZGVVUklDb21wb25lbnQoZ290bykKCQl9LCAkKCcjcmVhbF90aXRsZScpLmh0bWwoKSwgIj9nb3RvPSIrZW5jb2RlVVJJQ29tcG9uZW50KGdvdG8pKTsKCgkJaWYgKGdvdG8gIT0gbnVsbCkgZGF0YS5pbnN0YW5jZS5zZWxlY3Rfbm9kZShbZ290b10pOwoJfSkK'));
	@fwrite($fp, base64_decode('CS5vbignc2VsZWN0X25vZGUuanN0cmVlJywgZnVuY3Rpb24gKG5vZGUsIHNlbGVjdGVkLCBldmVudCkgewoJCWlmIChvaWRwbHVzTW9iaWxlKCkpIHsKCQkJJCgiI29pZHRyZWUiKS5oaWRlKCJzbG93Iik7CgkJCSQoIiNzeXN0ZW1fdGl0bGVfbWVudSIpLnJlbW92'));
	@fwrite($fp, base64_decode('ZUNsYXNzKCJhY3RpdmUiKTsKCQl9CgoJCXZhciBpZCA9IHNlbGVjdGVkLm5vZGUuaWQ7CgkJaWYgKGN1cnJlbnRfbm9kZSAhPSBpZCkgewoJCQlvcGVuT2lkSW5QYW5lbChpZCwgZmFsc2UpOwoJCX0KCX0pOwoKCS8vIC0tLSBMYXlvdXQKCglpZiAob2lkcGx1c01v'));
	@fwrite($fp, base64_decode('YmlsZSgpKSB7CgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29pZHRyZWUnKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwoJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzeXN0ZW1fdGl0bGVfbWVudScpLnN0eWxlLnZpc2liaWxpdHkgPSAidmlzaWJsZSI7Cgl9'));
	@fwrite($fp, base64_decode('IGVsc2UgewoJCSQoJ2JvZHknKS5sYXlvdXQoewoJCQlub3J0aF9fc2l6ZTogICAgICAgICAgICAgICAgICA0MCwKCQkJbm9ydGhfX3NsaWRhYmxlOiAgICAgICAgICAgICAgZmFsc2UsCgkJCW5vcnRoX19jbG9zYWJsZTogICAgICAgICAgICAgIGZhbHNlLAoJCQlu'));
	@fwrite($fp, base64_decode('b3J0aF9fcmVzaXphYmxlOiAgICAgICAgICAgICBmYWxzZSwKCQkJd2VzdF9fc2l6ZTogICAgICAgICAgICAgICAgICAgNDUwLAoJCQl3ZXN0X19zcGFjaW5nX2Nsb3NlZDogICAgICAgICAyMCwKCQkJd2VzdF9fdG9nZ2xlckxlbmd0aF9jbG9zZWQ6ICAgMjMwLAoJ'));
	@fwrite($fp, base64_decode('CQl3ZXN0X190b2dnbGVyQWxpZ25fY2xvc2VkOiAgICAidG9wIiwKCQkJd2VzdF9fdG9nZ2xlckNvbnRlbnRfY2xvc2VkOiAgIk88YnI+Qjxicj5KPGJyPkU8YnI+Qzxicj5UPGJyPjxicj5UPEJSPlI8QlI+RTxCUj5FIiwKCQkJd2VzdF9fdG9nZ2xlclRpcF9jbG9z'));
	@fwrite($fp, base64_decode('ZWQ6ICAgICAgIk9wZW4gJiBQaW4gTWVudSIsCgkJCXdlc3RfX3NsaWRlclRpcDogICAgICAgICAgICAgICJTbGlkZSBPcGVuIE1lbnUiLAoJCQl3ZXN0X19zbGlkZVRyaWdnZXJfb3BlbjogICAgICAibW91c2VvdmVyIiwKCQkJY2VudGVyX19tYXNrQ29udGVudHM6'));
	@fwrite($fp, base64_decode('ICAgICAgICAgdHJ1ZSAvLyBJTVBPUlRBTlQgLSBlbmFibGUgaWZyYW1lIG1hc2tpbmcKCQl9KTsKCX0KfSk7CgpmdW5jdGlvbiBvaWRwbHVzTW9iaWxlKCkgewoJcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoInVpLWxheW91dC1jZW50ZXIi'));
	@fwrite($fp, base64_decode('KS5sZW5ndGggPT0gMDsKfQoKZnVuY3Rpb24gbW9iaWxlTmF2QnV0dG9uQ2xpY2soc2VuZGVyKSB7CglpZiAoJCgiI29pZHRyZWUiKS5pcygiOnZpc2libGUiKSkgewoJCSQoIiNvaWR0cmVlIikuaGlkZSgic2xvdyIpOwoJCSQoIiNzeXN0ZW1fdGl0bGVfbWVudSIp'));
	@fwrite($fp, base64_decode('LnJlbW92ZUNsYXNzKCJhY3RpdmUiKTsKCX0gZWxzZSB7CgkJJCgiI29pZHRyZWUiKS5zaG93KCJzbG93Iik7CgkJJCgiI3N5c3RlbV90aXRsZV9tZW51IikuYWRkQ2xhc3MoImFjdGl2ZSIpOwoJfQp9CgpmdW5jdGlvbiBtb2JpbGVOYXZCdXR0b25Ib3ZlcihzZW5k'));
	@fwrite($fp, base64_decode('ZXIpIHsKCXNlbmRlci5jbGFzc0xpc3QudG9nZ2xlKCJob3ZlciIpOwp9Cg=='));
	@fclose($fp);
}
if (!is_file('oidplus.js')) {
	warn('File has vanished! Will re-create it: oidplus.js');
	writefile_2();
	if (!is_file('oidplus.js')) {
		warn('File cannot be created (not existing): oidplus.js');
	} else if (sha1_file('oidplus.js') != 'aa26b9b9ab3184d7a5510e98aaa4b82192521b95') {
		warn('File cannot be created (checksum mismatch): oidplus.js');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('oidplus.js', 0644)) {
		warn('Could not change file permissions of oidplus.js');
	}
} else {
	if (@sha1_file('oidplus.js') !== 'aa26b9b9ab3184d7a5510e98aaa4b82192521b95') {
		if (@sha1_file('oidplus.js') !== 'b9b83696cf185edd88884ab03a51ad002284f35c') {
			warn('File was modified. Will overwrite the changes now: oidplus.js');
			$tmp = pathinfo('oidplus.js');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('oidplus.js')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('oidplus.js', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_2();
		if (@sha1_file('oidplus.js') !== 'aa26b9b9ab3184d7a5510e98aaa4b82192521b95') {
			warn('File cannot be written (checksum mismatch): oidplus.js');
		}
	}
}

// Files different: plugins/publicPages/900_contact_admin/plugin.inc.php
function writefile_3() {
	@$fp = fopen('plugins/publicPages/900_contact_admin/plugin.inc.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmlmICghZGVmaW5lZCgnSU5fT0lEUExVUycpKSBkaWUoKTsKCmNsYXNzIE9JRHBsdXNQYWdlUHVibGljQ29udGFjdEVNYWlsIGV4dGVuZHMgT0lEcGx1c1BhZ2VQbHVnaW4gewoJcHVibGljIGZ1bmN0'));
	@fwrite($fp, base64_decode('aW9uIHR5cGUoKSB7CgkJcmV0dXJuICdwdWJsaWMnOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBwcmlvcml0eSgpIHsKCQlyZXR1cm4gOTAwOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBhY3Rpb24oJiRoYW5kbGVkKSB7CgkJLy8gTm90aGluZwoJfQoKCXB1YmxpYyBmdW5j'));
	@fwrite($fp, base64_decode('dGlvbiBpbml0KCRodG1sPXRydWUpIHsKCQkvLyBOb3RoaW5nCgl9CgoJcHVibGljIGZ1bmN0aW9uIGNmZ1NldFZhbHVlKCRuYW1lLCAkdmFsdWUpIHsKCQkvLyBOb3RoaW5nCgl9CgoJcHVibGljIGZ1bmN0aW9uIGd1aSgkaWQsICYkb3V0LCAmJGhhbmRsZWQpIHsK'));
	@fwrite($fp, base64_decode('CQlpZiAoJGlkID09PSAnb2lkcGx1czpjb250YWN0JykgewoJCQkkaGFuZGxlZCA9IHRydWU7CgkJCSRvdXRbJ3RpdGxlJ10gPSAnQ29udGFjdCBhZG1pbmlzdHJhdG9yJzsKCQkJJG91dFsnaWNvbiddID0gZmlsZV9leGlzdHMoX19ESVJfXy4nL2ljb25fYmlnLnBu'));
	@fwrite($fp, base64_decode('ZycpID8gJ3BsdWdpbnMvcHVibGljUGFnZXMvJy5iYXNlbmFtZShfX0RJUl9fKS4nL2ljb25fYmlnLnBuZycgOiAnJzsKCgkJCWlmIChlbXB0eShPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ2FkbWluX2VtYWlsJykpKSB7CgkJCQkkb3V0Wyd0ZXh0J10gPSAn'));
	@fwrite($fp, base64_decode('PHA+VGhlIGFkbWluaXN0cmF0b3Igb2YgdGhpcyBPSURwbHVzIHN5c3RlbSBoYXMgbm90IGVudGVyZWQgYSBjb250YWN0IGVtYWlsIGFkZHJlc3MuJzsKCQkJfSBlbHNlIHsKCQkJCSRvdXRbJ3RleHQnXSA9ICc8cD5Zb3UgY2FuIGNvbnRhY3QgdGhlIGFkbWluaXN0'));
	@fwrite($fp, base64_decode('cmF0b3Igb2YgdGhpcyBPSURwbHVzIHN5c3RlbSBhdCB0aGlzIGVtYWlsIGFkZHJlc3M6PC9wPjxwPjxhIGhyZWY9Im1haWx0bzonLmh0bWxlbnRpdGllcyhPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ2FkbWluX2VtYWlsJykpLiciPicuaHRtbGVudGl0aWVz'));
	@fwrite($fp, base64_decode('KE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgnYWRtaW5fZW1haWwnKSkuJzwvYT48L3A+JzsKCQkJfQoJCX0KCX0KCglwdWJsaWMgZnVuY3Rpb24gdHJlZSgmJGpzb24sICRyYV9lbWFpbD1udWxsLCAkbm9uanM9ZmFsc2UsICRyZXFfZ290bz0nJykgewoJCWlm'));
	@fwrite($fp, base64_decode('IChmaWxlX2V4aXN0cyhfX0RJUl9fLicvdHJlZWljb24ucG5nJykpIHsKCQkJJHRyZWVfaWNvbiA9ICdwbHVnaW5zL3B1YmxpY1BhZ2VzLycuYmFzZW5hbWUoX19ESVJfXykuJy90cmVlaWNvbi5wbmcnOwoJCX0gZWxzZSB7CgkJCSR0cmVlX2ljb24gPSBudWxsOyAv'));
	@fwrite($fp, base64_decode('LyBkZWZhdWx0IGljb24gKGZvbGRlcikKCQl9CgoJCSRqc29uW10gPSBhcnJheSgKCQkJJ2lkJyA9PiAnb2lkcGx1czpjb250YWN0JywKCQkJJ2ljb24nID0+ICR0cmVlX2ljb24sCgkJCSd0ZXh0JyA9PiAnQ29udGFjdCBhZG1pbmlzdHJhdG9yJwoJCSk7CgoJCXJl'));
	@fwrite($fp, base64_decode('dHVybiB0cnVlOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiB0cmVlX3NlYXJjaCgkcmVxdWVzdCkgewoJCXJldHVybiBmYWxzZTsKCX0KfQoKT0lEcGx1czo6cmVnaXN0ZXJQYWdlUGx1Z2luKG5ldyBPSURwbHVzUGFnZVB1YmxpY0NvbnRhY3RFTWFpbCgpKTsK'));
	@fclose($fp);
}
if (!is_file('plugins/publicPages/900_contact_admin/plugin.inc.php')) {
	warn('File has vanished! Will re-create it: plugins/publicPages/900_contact_admin/plugin.inc.php');
	writefile_3();
	if (!is_file('plugins/publicPages/900_contact_admin/plugin.inc.php')) {
		warn('File cannot be created (not existing): plugins/publicPages/900_contact_admin/plugin.inc.php');
	} else if (sha1_file('plugins/publicPages/900_contact_admin/plugin.inc.php') != 'eec1982440c97de75eb9f4705f0701767a8b471d') {
		warn('File cannot be created (checksum mismatch): plugins/publicPages/900_contact_admin/plugin.inc.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/publicPages/900_contact_admin/plugin.inc.php', 0644)) {
		warn('Could not change file permissions of plugins/publicPages/900_contact_admin/plugin.inc.php');
	}
} else {
	if (@sha1_file('plugins/publicPages/900_contact_admin/plugin.inc.php') !== 'eec1982440c97de75eb9f4705f0701767a8b471d') {
		if (@sha1_file('plugins/publicPages/900_contact_admin/plugin.inc.php') !== '9e8b8db3967e021d0e46ec161f49e8a4231ed6c2') {
			warn('File was modified. Will overwrite the changes now: plugins/publicPages/900_contact_admin/plugin.inc.php');
			$tmp = pathinfo('plugins/publicPages/900_contact_admin/plugin.inc.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/publicPages/900_contact_admin/plugin.inc.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/publicPages/900_contact_admin/plugin.inc.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_3();
		if (@sha1_file('plugins/publicPages/900_contact_admin/plugin.inc.php') !== 'eec1982440c97de75eb9f4705f0701767a8b471d') {
			warn('File cannot be written (checksum mismatch): plugins/publicPages/900_contact_admin/plugin.inc.php');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 113\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 113') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

