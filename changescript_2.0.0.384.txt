<?php /* <ViaThinkSoftSignature>
PW/0NnHnsCnSLHO4oXgOr1N34mWqbdWKhYPn6a28q6jQjibxaWWErtu24e1yFKyak
vyO44dJDnNjJ0b4+ZWQJeqINvqSkwwwCCCiJXivYAyWp1cJ7acSOySBiZTgXSonsv
KCWBkHgpLt00xi4I8cAOpDroYHt0zsEse881biZNFjcmGzhe61VRXqlNxmOTitVCe
/hYGv/LCjRfwdm+4LZuB51uNijO6Sj2omH7bITYK6kWXrT7QrO/MQfOn1hXAT2qh1
qHUy6MPoLBV35fuLsKySKUqiYOtHwvQVuue3qnNsI9ggY3HZQZf9mA4Lc/BGVj4C+
9cf9d5OO1Wy12QkjE3ilActgvbp877mh9qvGfcH3tjHYu0YmjOCbsfYstRCJzN9sU
yKWVwXNuZBfx6uq0Odpc2EweULy8hTYuxFT5erGTnMdvxZucEUnq4iGupcvi1PUqY
ApNm7PkxLS3Z8+EodoOIGex1fLJQOrK0/WcqSWV1Y/N+Nz1baIlzWbcCGXGTXEjy+
J8DdEY9TKp7IYYnBJcPC7Jca5Kby50r9thIYXF9v+cgvolvFUBzH5UkNDLJw9ShNh
2kbuNP7kC4Hwb8oGQUeC9qnc80lzoXtc5gZGZeip4+BGF+ss5xo2o4JOJeIa4Eovg
IDGax9GIxQkCzuh/2i7U7ugyNqTEEOoXZm9/DfVxzW6+23psdNgo4rYRtKPvOA21N
/lfpk4mfEybuA5Tol1dDAaRqYoWkUJbtMlTp6pvzcsWuqFSOVQEcToddNKiM4N4f4
QOyKrF009phrmLm1aoo61apd4ssXDfPGJ5EOFYHP+69CJVQ+yekKIZdtirbk9EdlX
1iMezPJBMmOgKKfMF/dNbOZREgLcDurF9y0jRdz9yaMt4oxhQk26LzU6uxiLmSxpw
ARjW5ioyWoLC2tA8CBOqLiEpfnarvCx1DdyvK+Gf2PvPh0Buee8JfqeJmby+VZxc0
MZEW5Hrolo22DTcptl6BOtjQMnXz25pk34qv+0wUhmXmEOWyBTVopef68qGGe2QKw
HEJxzU7NgWelF2Qj1ho6EkEdtHLoIFXOR0KL1ddefbo1FV+ZIC5dg5cItFvl5ICVT
4Pg2KZGISb2i9dhYBOwofojk5k83dJgvF8XKTLBU/BPCZSn+3+zPPSiGHP33tA5P4
O6wErN+iWRK/1okdtix+AyQZDRh+npthsvXGpdDgd0Ek6zcOyL04Yfsu+bTNO5Ozp
K5vq1BdxKgqkTORyzlwGBD/AHQs4Y1orVshNjl6+13jKuCBOkSwxtV59rH11+lYMI
Kj1NdJK/UXy+gLj8vQyEl07rCb1JUKyWFGLWq5wza2s5VEpUlSk0/saBZzrc8y3tH
g==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 383') {
	err('This update can only be applied to OIDplus version 2.0.0.383!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php
function writefile_1() {
	@$fp = fopen('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmNsYXNzIE9JRHBsdXNQYWdlUHVibGljQXR0YWNobWVudHMgZXh0ZW5kcyBPSURwbHVzUGFnZVBsdWdpblB1YmxpYyB7CgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRVcGxvYWREaXIoJGlkKSB7'));
	@fwrite($fp, base64_decode('CgkJJHBhdGggPSByZWFscGF0aChfX0RJUl9fLicvLi4vLi4vLi4vJykuJy91c2VyZGF0YS9hdHRhY2htZW50cy8nOwoKCQkkb2JqID0gT0lEcGx1c09iamVjdDo6cGFyc2UoJGlkKTsKCQlpZiAoJG9iaiA9PT0gbnVsbCkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRp'));
	@fwrite($fp, base64_decode('b24oX0woJ0ludmFsaWQgb2JqZWN0ICIlMSInLCRpZCkpOwoJCWlmICgkb2JqOjpucygpID09ICdvaWQnKSB7CgkJCSRvaWQgPSAkb2JqLT5ub2RlSWQoZmFsc2UpOwoJCX0gZWxzZSB7CgkJCSRvaWQgPSBudWxsOwoJCQkkYWx0X2lkcyA9ICRvYmotPmdldEFsdElk'));
	@fwrite($fp, base64_decode('cygpOwoJCQlmb3JlYWNoICgkYWx0X2lkcyBhcyAkYWx0X2lkKSB7CgkJCQlpZiAoJGFsdF9pZC0+Z2V0TmFtZXNwYWNlKCkgPT0gJ29pZCcpIHsKCQkJCQkkb2lkID0gJGFsdF9pZC0+Z2V0SWQoKTsKCQkJCQlicmVhazsgLy8gd2UgcHJlZmVyIHRoZSBmaXJzdCBP'));
	@fwrite($fp, base64_decode('SUQgKGZvciBHVUlEcywgdGhlIGZpcnN0IE9JRCBpcyB0aGUgT0lEcGx1cy1PSUQsIGFuZCB0aGUgc2Vjb25kIE9JRCBpcyB0aGUgVVVJRCBPSUQpCgkJCQl9CgkJCX0KCQl9CgoJCWlmICghaXNfbnVsbCgkb2lkKSAmJiAoJG9pZCAhPSAnJykpIHsKCQkJLy8gRm9y'));
	@fwrite($fp, base64_decode('IE9JRHMsIGl0IGlzIHRoZSBPSUQsIGZvciBvdGhlciBpZGVudGlmaWVycwoJCQkvLyBpdCBpdCB0aGUgT0lEIGFsdCBJRCAoZ2VuZXJhdGVkIHVzaW5nIHRoZSBTeXN0ZW1JRCkKCQkJJHBhdGggLj0gc3RyX3JlcGxhY2UoJy4nLCAnXycsICRvaWQpOwoKCQl9IGVs'));
	@fwrite($fp, base64_decode('c2UgewoJCQkvLyBDYW4gaGFwcGVuIGlmIHlvdSBkb24ndCBoYXZlIGEgc3lzdGVtIElEIChkdWUgdG8gbWlzc2luZyBPcGVuU1NMIHBsdWdpbikKCQkJJHBhdGggLj0gbWQ1KCRvYmotPm5vZGVJZCh0cnVlKSk7IC8vIHdlIGRvbid0IHVzZSAkaWQsIGJlY2F1c2Ug'));
	@fwrite($fp, base64_decode('JG9iai0+bm9kZUlkKHRydWUpIGlzIHBvc3NpYmx5IG1vcmUgY2Fub25pY2FsIHRoYW4gJGlkCgkJfQoKCQlyZXR1cm4gJHBhdGg7Cgl9CgoJcHJpdmF0ZSBmdW5jdGlvbiByYU1heURlbGV0ZSgpIHsKCQlyZXR1cm4gT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVl'));
	@fwrite($fp, base64_decode('KCdhdHRhY2htZW50c19hbGxvd19yYV9kZWxldGUnLCAwKTsKCX0KCglwcml2YXRlIGZ1bmN0aW9uIHJhTWF5VXBsb2FkKCkgewoJCXJldHVybiBPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ2F0dGFjaG1lbnRzX2FsbG93X3JhX3VwbG9hZCcsIDApOwoJfQoK'));
	@fwrite($fp, base64_decode('CXB1YmxpYyBmdW5jdGlvbiBhY3Rpb24oJGFjdGlvbklELCAkcGFyYW1zKSB7CgoJCWlmICgkYWN0aW9uSUQgPT0gJ2RlbGV0ZUF0dGFjaG1lbnQnKSB7CgkJCSRpZCA9ICRwYXJhbXNbJ2lkJ107CgkJCSRvYmogPSBPSURwbHVzT2JqZWN0OjpwYXJzZSgkaWQpOwoJ'));
	@fwrite($fp, base64_decode('CQlpZiAoJG9iaiA9PT0gbnVsbCkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0ludmFsaWQgb2JqZWN0ICIlMSInLCRpZCkpOwoJCQlpZiAoISRvYmotPnVzZXJIYXNXcml0ZVJpZ2h0cygpKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnQXV0'));
	@fwrite($fp, base64_decode('aGVudGljYXRpb24gZXJyb3IuIFBsZWFzZSBsb2cgaW4gYXMgYWRtaW4sIG9yIGFzIHRoZSBSQSBvZiAiJTEiIHRvIHVwbG9hZCBhbiBhdHRhY2htZW50LicsJGlkKSk7CgoJCQlpZiAoIU9JRHBsdXM6OmF1dGhVdGlscygpOjppc0FkbWluTG9nZ2VkSW4oKSAmJiAh'));
	@fwrite($fp, base64_decode('JHRoaXMtPnJhTWF5RGVsZXRlKCkpIHsKCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdUaGUgYWRtaW5pc3RyYXRvciBoYXMgZGlzYWJsZWQgZGVsZXRpbmcgYXR0YWNobWVudHMgYnkgUkFzLicpKTsKCQkJfQoKCQkJJHJlcV9maWxlbmFtZSA9ICRw'));
	@fwrite($fp, base64_decode('YXJhbXNbJ2ZpbGVuYW1lJ107CgkJCWlmIChzdHJwb3MoJHJlcV9maWxlbmFtZSwgJy8nKSAhPT0gZmFsc2UpIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdJbGxlZ2FsIGZpbGUgbmFtZScpKTsKCQkJaWYgKHN0cnBvcygkcmVxX2ZpbGVuYW1lLCAnXFwn'));
	@fwrite($fp, base64_decode('KSAhPT0gZmFsc2UpIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdJbGxlZ2FsIGZpbGUgbmFtZScpKTsKCQkJaWYgKHN0cnBvcygkcmVxX2ZpbGVuYW1lLCAnLi4nKSAhPT0gZmFsc2UpIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdJbGxlZ2Fs'));
	@fwrite($fp, base64_decode('IGZpbGUgbmFtZScpKTsKCQkJaWYgKHN0cnBvcygkcmVxX2ZpbGVuYW1lLCBjaHIoMCkpICE9PSBmYWxzZSkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0lsbGVnYWwgZmlsZSBuYW1lJykpOwoKCQkJJHVwbG9hZGRpciA9IHNlbGY6OmdldFVwbG9hZERp'));
	@fwrite($fp, base64_decode('cigkaWQpOwoJCQkkdXBsb2FkZmlsZSA9ICR1cGxvYWRkaXIgLiAnLycgLiBiYXNlbmFtZSgkcmVxX2ZpbGVuYW1lKTsKCgkJCWlmICghZmlsZV9leGlzdHMoJHVwbG9hZGZpbGUpKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnRmlsZSBkb2VzIG5vdCBl'));
	@fwrite($fp, base64_decode('eGlzdCcpKTsKCQkJQHVubGluaygkdXBsb2FkZmlsZSk7CgkJCWlmIChmaWxlX2V4aXN0cygkdXBsb2FkZmlsZSkpIHsKCQkJCU9JRHBsdXM6OmxvZ2dlcigpLT5sb2coIltFUlJdT0lEKCRpZCkrW0VSUl1BISIsICJBdHRhY2htZW50IGZpbGUgJyIuYmFzZW5hbWUo'));
	@fwrite($fp, base64_decode('JHVwbG9hZGZpbGUpLiInIGNvdWxkIG5vdCBiZSBkZWxldGVkIGZyb20gb2JqZWN0ICckb2lkJyAocHJvYmxlbSB3aXRoIHBlcm1pc3Npb25zPykiKTsKCQkJCSRtc2cgPSBfTCgnQXR0YWNobWVudCBmaWxlICIlMSIgY291bGQgbm90IGJlIGRlbGV0ZWQgZnJvbSBv'));
	@fwrite($fp, base64_decode('YmplY3QgIiUyIiAocHJvYmxlbSB3aXRoIHBlcm1pc3Npb25zPyknLGJhc2VuYW1lKCR1cGxvYWRmaWxlKSwkb2lkKTsKCQkJCWlmIChPSURwbHVzOjphdXRoVXRpbHMoKTo6aXNBZG1pbkxvZ2dlZEluKCkpIHsKCQkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlv'));
	@fwrite($fp, base64_decode('bigkbXNnKTsKCQkJCX0gZWxzZSB7CgkJCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oJG1zZy4nLiAnLl9MKCdQbGVhc2UgY29udGFjdCB0aGUgc3lzdGVtIGFkbWluaXN0cmF0b3IuJykpOwoJCQkJfQoJCQl9IGVsc2UgewoJCQkJLy8gSWYgaXQgd2FzIHRo'));
	@fwrite($fp, base64_decode('ZSBsYXN0IGZpbGUsIGRlbGV0ZSB0aGUgZW1wdHkgZGlyZWN0b3J5CgkJCQkkYXJ5ID0gZ2xvYigkdXBsb2FkZGlyIC4gJy8nIC4gJyonKTsKCQkJCWlmIChjb3VudCgkYXJ5KSA9PSAwKSBAcm1kaXIoJHVwbG9hZGRpcik7CgkJCX0KCgkJCU9JRHBsdXM6OmxvZ2dl'));
	@fwrite($fp, base64_decode('cigpLT5sb2coIltPS11PSUQoJGlkKStbP0lORk8vIU9LXU9JRFJBKCRpZCk/L1s/SU5GTy8hT0tdQT8iLCAiRGVsZXRlZCBhdHRhY2htZW50ICciLmJhc2VuYW1lKCR1cGxvYWRmaWxlKS4iJyBmcm9tIG9iamVjdCAnJGlkJyIpOwoKCQkJcmV0dXJuIGFycmF5KCJz'));
	@fwrite($fp, base64_decode('dGF0dXMiID0+IDApOwoKCQl9IGVsc2UgaWYgKCRhY3Rpb25JRCA9PSAndXBsb2FkQXR0YWNobWVudCcpIHsKCgkJCSRpZCA9ICRwYXJhbXNbJ2lkJ107CgkJCSRvYmogPSBPSURwbHVzT2JqZWN0OjpwYXJzZSgkaWQpOwoJCQlpZiAoJG9iaiA9PT0gbnVsbCkgdGhy'));
	@fwrite($fp, base64_decode('b3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0ludmFsaWQgb2JqZWN0ICIlMSInLCRpZCkpOwoJCQlpZiAoISRvYmotPnVzZXJIYXNXcml0ZVJpZ2h0cygpKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnQXV0aGVudGljYXRpb24gZXJyb3IuIFBsZWFz'));
	@fwrite($fp, base64_decode('ZSBsb2cgaW4gYXMgYWRtaW4sIG9yIGFzIHRoZSBSQSBvZiAiJTEiIHRvIHVwbG9hZCBhbiBhdHRhY2htZW50LicsJGlkKSk7CgoJCQlpZiAoIU9JRHBsdXM6OmF1dGhVdGlscygpOjppc0FkbWluTG9nZ2VkSW4oKSAmJiAhJHRoaXMtPnJhTWF5VXBsb2FkKCkpIHsK'));
	@fwrite($fp, base64_decode('CQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdUaGUgYWRtaW5pc3RyYXRvciBoYXMgZGlzYWJsZWQgdXBsb2FkaW5nIGF0dGFjaG1lbnRzIGJ5IFJBcy4nKSk7CgkJCX0KCgkJCWlmICghaXNzZXQoJF9GSUxFU1sndXNlcmZpbGUnXSkpIHsKCQkJCXRo'));
	@fwrite($fp, base64_decode('cm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdQbGVhc2UgY2hvb3NlIGEgZmlsZS4nKSk7CgkJCX0KCgkJCWlmICghT0lEcGx1czo6YXV0aFV0aWxzKCk6OmlzQWRtaW5Mb2dnZWRJbigpKSB7CgkJCQkkYmFubmVkID0gZXhwbG9kZSgnLCcsIE9JRHBsdXM6OmNv'));
	@fwrite($fp, base64_decode('bmZpZygpLT5nZXRWYWx1ZSgnYXR0YWNobWVudHNfYmxvY2tfZXh0ZW5zaW9ucycsICcnKSk7CgkJCQlmb3JlYWNoICgkYmFubmVkIGFzICRleHQpIHsKCQkJCQkkZXh0ID0gdHJpbSgkZXh0KTsKCQkJCQlpZiAoJGV4dCA9PSAnJykgY29udGludWU7CgkJCQkJaWYg'));
	@fwrite($fp, base64_decode('KHN0cnRvbG93ZXIoc3Vic3RyKGJhc2VuYW1lKCRfRklMRVNbJ3VzZXJmaWxlJ11bJ25hbWUnXSksIC1zdHJsZW4oJGV4dCktMSkpID09IHN0cnRvbG93ZXIoJy4nLiRleHQpKSB7CgkJCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdUaGUgZmlsZSBl'));
	@fwrite($fp, base64_decode('eHRlbnNpb24gIiUxIiBpcyBiYW5uZWQgYnkgdGhlIGFkbWluaXN0cmF0b3IgKGl0IGNhbiBiZSB1cGxvYWRlZCBieSB0aGUgYWRtaW5pc3RyYXRvciB0aG91Z2gpJywkZXh0KSk7CgkJCQkJfQoJCQkJfQoJCQl9CgoJCQkkcmVxX2ZpbGVuYW1lID0gJF9GSUxFU1sn'));
	@fwrite($fp, base64_decode('dXNlcmZpbGUnXVsnbmFtZSddOwoJCQlpZiAoc3RycG9zKCRyZXFfZmlsZW5hbWUsICcvJykgIT09IGZhbHNlKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnSWxsZWdhbCBmaWxlIG5hbWUnKSk7CgkJCWlmIChzdHJwb3MoJHJlcV9maWxlbmFtZSwgJ1xc'));
	@fwrite($fp, base64_decode('JykgIT09IGZhbHNlKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnSWxsZWdhbCBmaWxlIG5hbWUnKSk7CgkJCWlmIChzdHJwb3MoJHJlcV9maWxlbmFtZSwgJy4uJykgIT09IGZhbHNlKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnSWxsZWdh'));
	@fwrite($fp, base64_decode('bCBmaWxlIG5hbWUnKSk7CgkJCWlmIChzdHJwb3MoJHJlcV9maWxlbmFtZSwgY2hyKDApKSAhPT0gZmFsc2UpIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdJbGxlZ2FsIGZpbGUgbmFtZScpKTsKCgkJCSR1cGxvYWRkaXIgPSBzZWxmOjpnZXRVcGxvYWRE'));
	@fwrite($fp, base64_decode('aXIoJGlkKTsKCQkJJHVwbG9hZGZpbGUgPSAkdXBsb2FkZGlyIC4gJy8nIC4gYmFzZW5hbWUoJHJlcV9maWxlbmFtZSk7CgoJCQlpZiAoIWlzX2RpcigkdXBsb2FkZGlyKSkgewoJCQkJQG1rZGlyKCR1cGxvYWRkaXIsIDA3NzcsIHRydWUpOwoJCQkJaWYgKCFpc19k'));
	@fwrite($fp, base64_decode('aXIoJHVwbG9hZGRpcikpIHsKCQkJCQlPSURwbHVzOjpsb2dnZXIoKS0+bG9nKCJbRVJSXU9JRCgkaWQpK1tFUlJdQSEiLCAiVXBsb2FkIGF0dGFjaG1lbnQgJyIuYmFzZW5hbWUoJHVwbG9hZGZpbGUpLiInIHRvIG9iamVjdCAnJGlkJyBmYWlsZWQ6IENhbm5vdCBj'));
	@fwrite($fp, base64_decode('cmVhdGUgZGlyZWN0b3J5ICciLmJhc2VuYW1lKCR1cGxvYWRkaXIpLiInIChwcm9ibGVtIHdpdGggcGVybWlzc2lvbnM/KSIpOwoJCQkJCSRtc2cgPSBfTCgnVXBsb2FkIGF0dGFjaG1lbnQgIiUxIiB0byBvYmplY3QgIiUyIiBmYWlsZWQnLGJhc2VuYW1lKCR1cGxv'));
	@fwrite($fp, base64_decode('YWRmaWxlKSwkaWQpLic6ICcuX0woJ0Nhbm5vdCBjcmVhdGUgZGlyZWN0b3J5ICIlMSIgKHByb2JsZW0gd2l0aCBwZXJtaXNzaW9ucz8pJyxiYXNlbmFtZSgkdXBsb2FkZGlyKSk7CgkJCQkJaWYgKE9JRHBsdXM6OmF1dGhVdGlscygpOjppc0FkbWluTG9nZ2VkSW4o'));
	@fwrite($fp, base64_decode('KSkgewoJCQkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigkbXNnKTsKCQkJCQl9IGVsc2UgewoJCQkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigkbXNnLicuICcuX0woJ1BsZWFzZSBjb250YWN0IHRoZSBzeXN0ZW0gYWRtaW5pc3RyYXRvci4nKSk7'));
	@fwrite($fp, base64_decode('CgkJCQkJfQoJCQkJfQoJCQl9CgoJCQlpZiAoIUBtb3ZlX3VwbG9hZGVkX2ZpbGUoJF9GSUxFU1sndXNlcmZpbGUnXVsndG1wX25hbWUnXSwgJHVwbG9hZGZpbGUpKSB7CgkJCQlPSURwbHVzOjpsb2dnZXIoKS0+bG9nKCJbRVJSXU9JRCgkaWQpK1tFUlJdQSEiLCAi'));
	@fwrite($fp, base64_decode('VXBsb2FkIGF0dGFjaG1lbnQgJyIuYmFzZW5hbWUoJHVwbG9hZGZpbGUpLiInIHRvIG9iamVjdCAnJGlkJyBmYWlsZWQ6IENhbm5vdCBtb3ZlIHVwbG9hZGVkIGZpbGUgaW50byBkaXJlY3RvcnkgKHByb2JsZW0gd2l0aCBwZXJtaXNzaW9ucz8pIik7CgkJCQkkbXNn'));
	@fwrite($fp, base64_decode('ID0gX0woJ1VwbG9hZCBhdHRhY2htZW50ICIlMSIgdG8gb2JqZWN0ICIlMiIgZmFpbGVkJyxiYXNlbmFtZSgkdXBsb2FkZmlsZSksJGlkKS4nOiAnLl9MKCdDYW5ub3QgbW92ZSB1cGxvYWRlZCBmaWxlIGludG8gZGlyZWN0b3J5IChwcm9ibGVtIHdpdGggcGVybWlz'));
	@fwrite($fp, base64_decode('c2lvbnM/KScpOwoJCQkJaWYgKE9JRHBsdXM6OmF1dGhVdGlscygpOjppc0FkbWluTG9nZ2VkSW4oKSkgewoJCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKCRtc2cpOwoJCQkJfSBlbHNlIHsKCQkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigkbXNn'));
	@fwrite($fp, base64_decode('LicuICcuX0woJ1BsZWFzZSBjb250YWN0IHRoZSBzeXN0ZW0gYWRtaW5pc3RyYXRvci4nKSk7CgkJCQl9CgkJCX0KCgkJCU9JRHBsdXM6OmxvZ2dlcigpLT5sb2coIltPS11PSUQoJGlkKStbP0lORk8vIU9LXU9JRFJBKCRpZCk/L1s/SU5GTy8hT0tdQT8iLCAiVXBs'));
	@fwrite($fp, base64_decode('b2FkZWQgYXR0YWNobWVudCAnIi5iYXNlbmFtZSgkdXBsb2FkZmlsZSkuIicgdG8gb2JqZWN0ICckaWQnIik7CgoJCQlyZXR1cm4gYXJyYXkoInN0YXR1cyIgPT4gMCk7CgkJfSBlbHNlIHsKCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ1Vua25vd24g'));
	@fwrite($fp, base64_decode('YWN0aW9uIElEJykpOwoJCX0KCX0KCglwdWJsaWMgZnVuY3Rpb24gaW5pdCgkaHRtbD10cnVlKSB7CgkJT0lEcGx1czo6Y29uZmlnKCktPnByZXBhcmVDb25maWdLZXkoJ2F0dGFjaG1lbnRzX2Jsb2NrX2V4dGVuc2lvbnMnLCAnQmxvY2sgZmlsZSBuYW1lIGV4dGVu'));
	@fwrite($fp, base64_decode('c2lvbnMgYmVpbmcgdXNlZCBpbiBmaWxlIGF0dGFjaG1lbnRzIChjb21tYSBzZXBhcmF0ZWQpJywgJ2V4ZSxzY3IscGlmLGJhdCxjb20sdmJzLGNtZCcsIE9JRHBsdXNDb25maWc6OlBST1RFQ1RJT05fRURJVEFCTEUsIGZ1bmN0aW9uKCR2YWx1ZSkgewoJCX0pOwoJ'));
	@fwrite($fp, base64_decode('CU9JRHBsdXM6OmNvbmZpZygpLT5wcmVwYXJlQ29uZmlnS2V5KCdhdHRhY2htZW50c19hbGxvd19yYV9kZWxldGUnLCAnQWxsb3cgdGhhdCBSQXMgZGVsZXRlIGZpbGUgYXR0YWNobWVudHM/ICgwPW5vLCAxPXllcyknLCAnMCcsIE9JRHBsdXNDb25maWc6OlBST1RF'));
	@fwrite($fp, base64_decode('Q1RJT05fRURJVEFCTEUsIGZ1bmN0aW9uKCR2YWx1ZSkgewoJCQlpZiAoIWlzX251bWVyaWMoJHZhbHVlKSB8fCAoJHZhbHVlIDwgMCkgfHwgKCR2YWx1ZSA+IDEpKSB7CgkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnUGxlYXNlIGVudGVyIGEgdmFs'));
	@fwrite($fp, base64_decode('aWQgdmFsdWUgKDA9bm8sIDE9eWVzKS4nKSk7CgkJCX0KCQl9KTsKCQlPSURwbHVzOjpjb25maWcoKS0+cHJlcGFyZUNvbmZpZ0tleSgnYXR0YWNobWVudHNfYWxsb3dfcmFfdXBsb2FkJywgJ0FsbG93IHRoYXQgUkFzIHVwbG9hZCBmaWxlIGF0dGFjaG1lbnRzPyAo'));
	@fwrite($fp, base64_decode('MD1ubywgMT15ZXMpJywgJzAnLCBPSURwbHVzQ29uZmlnOjpQUk9URUNUSU9OX0VESVRBQkxFLCBmdW5jdGlvbigkdmFsdWUpIHsKCQkJaWYgKCFpc19udW1lcmljKCR2YWx1ZSkgfHwgKCR2YWx1ZSA8IDApIHx8ICgkdmFsdWUgPiAxKSkgewoJCQkJdGhyb3cgbmV3'));
	@fwrite($fp, base64_decode('IE9JRHBsdXNFeGNlcHRpb24oX0woJ1BsZWFzZSBlbnRlciBhIHZhbGlkIHZhbHVlICgwPW5vLCAxPXllcykuJykpOwoJCQl9CgkJfSk7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGd1aSgkaWQsICYkb3V0LCAmJGhhbmRsZWQpIHsKCQkvLyBOb3RoaW5nCgl9CgoJcHVi'));
	@fwrite($fp, base64_decode('bGljIGZ1bmN0aW9uIHB1YmxpY1NpdGVtYXAoJiRvdXQpIHsKCQkvLyBOb3RoaW5nCgl9CgoJcHVibGljIGZ1bmN0aW9uIHRyZWUoJiRqc29uLCAkcmFfZW1haWw9bnVsbCwgJG5vbmpzPWZhbHNlLCAkcmVxX2dvdG89JycpIHsKCQlyZXR1cm4gZmFsc2U7Cgl9CgoJ'));
	@fwrite($fp, base64_decode('cHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gY29udmVydF9maWxlc2l6ZSgkYnl0ZXMsICRkZWNpbWFscyA9IDIpewoJCSRzaXplID0gYXJyYXkoX0woJ0J5dGVzJyksX0woJ0tpQicpLF9MKCdNaUInKSxfTCgnR2lCJyksX0woJ1RpQicpLF9MKCdQaUInKSxfTCgnRWlC'));
	@fwrite($fp, base64_decode('JyksX0woJ1ppQicpLF9MKCdZaUInKSk7CgkJJGZhY3RvciA9IGZsb29yKChzdHJsZW4oJGJ5dGVzKSAtIDEpIC8gMyk7CgkJcmV0dXJuIHNwcmludGYoIiUueyRkZWNpbWFsc31mIiwgJGJ5dGVzIC8gcG93KDEwMjQsICRmYWN0b3IpKSAuICcgJyAuIEAkc2l6ZVsk'));
	@fwrite($fp, base64_decode('ZmFjdG9yXTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gaW1wbGVtZW50c0ZlYXR1cmUoJGlkKSB7CgkJaWYgKHN0cnRvbG93ZXIoJGlkKSA9PSAnMS4zLjYuMS40LjEuMzc0NzYuMi41LjIuMy4yJykgcmV0dXJuIHRydWU7IC8vIG1vZGlmeUNvbnRlbnQKCQlpZiAoc3Ry'));
	@fwrite($fp, base64_decode('dG9sb3dlcigkaWQpID09ICcxLjMuNi4xLjQuMS4zNzQ3Ni4yLjUuMi4zLjMnKSByZXR1cm4gdHJ1ZTsgLy8gYmVmb3JlT2JqZWN0KiwgYWZ0ZXJPYmplY3QqCgkJaWYgKHN0cnRvbG93ZXIoJGlkKSA9PSAnMS4zLjYuMS40LjEuMzc0NzYuMi41LjIuMy40JykgcmV0'));
	@fwrite($fp, base64_decode('dXJuIHRydWU7IC8vIHdob2lzKkF0dHJpYnV0ZXMKCQlyZXR1cm4gZmFsc2U7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIG1vZGlmeUNvbnRlbnQoJGlkLCAmJHRpdGxlLCAmJGljb24sICYkdGV4dCkgewoJCS8vIEludGVyZmFjZSAxLjMuNi4xLjQuMS4zNzQ3Ni4yLjUu'));
	@fwrite($fp, base64_decode('Mi4zLjIKCgkJJGZpbGVzID0gZ2xvYihzZWxmOjpnZXRVcGxvYWREaXIoJGlkKS4nLycuJyonKTsKCQkkZG9zaG93ID0gZmFsc2U7CgkJJG91dHB1dCA9ICcnOwoJCSRmb3VuZF9maWxlcyA9IGZhbHNlOwoKCQkkb2JqID0gT0lEcGx1c09iamVjdDo6cGFyc2UoJGlk'));
	@fwrite($fp, base64_decode('KTsKCQlpZiAoJG9iaiA9PT0gbnVsbCkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0ludmFsaWQgb2JqZWN0ICIlMSInLCRpZCkpOwoJCSRjYW5fdXBsb2FkID0gT0lEcGx1czo6YXV0aFV0aWxzKCk6OmlzQWRtaW5Mb2dnZWRJbigpIHx8ICgkdGhpcy0+'));
	@fwrite($fp, base64_decode('cmFNYXlVcGxvYWQoKSAmJiAkb2JqLT51c2VySGFzV3JpdGVSaWdodHMoKSk7CgkJJGNhbl9kZWxldGUgPSBPSURwbHVzOjphdXRoVXRpbHMoKTo6aXNBZG1pbkxvZ2dlZEluKCkgfHwgKCR0aGlzLT5yYU1heURlbGV0ZSgpICYmICRvYmotPnVzZXJIYXNXcml0ZVJp'));
	@fwrite($fp, base64_decode('Z2h0cygpKTsKCgkJJG91dHB1dCAuPSAnPGgyPicuX0woJ0ZpbGUgYXR0YWNobWVudHMnKS4nPC9oMj4nOwoJCSRvdXRwdXQgLj0gJzxkaXYgY2xhc3M9ImNvbnRhaW5lciBib3giPic7CgoJCWlmIChPSURwbHVzOjphdXRoVXRpbHMoKTo6aXNBZG1pbkxvZ2dlZElu'));
	@fwrite($fp, base64_decode('KCkpIHsKCQkJJG91dHB1dCAuPSAnPHA+Jy5fTCgnQWRtaW4gaW5mbzogVGhlIGRpcmVjdG9yeSBpcyAlMScsJzxiPicuaHRtbGVudGl0aWVzKHNlbGY6OmdldFVwbG9hZERpcigkaWQpKS4nPC9iPicpLic8L3A+JzsKCQkJJGRvc2hvdyA9IHRydWU7CgkJfQoKCQkk'));
	@fwrite($fp, base64_decode('b3V0cHV0IC49ICc8ZGl2IGlkPSJmaWxlYXR0YWNobWVudHNfdGFibGUiIGNsYXNzPSJ0YWJsZS1yZXNwb25zaXZlIj4nOwoJCSRvdXRwdXQgLj0gJzx0YWJsZSBjbGFzcz0idGFibGUgdGFibGUtYm9yZGVyZWQgdGFibGUtc3RyaXBlZCI+JzsKCQkkb3V0cHV0IC49'));
	@fwrite($fp, base64_decode('ICc8dHI+JzsKCQkkb3V0cHV0IC49ICc8dGg+Jy5fTCgnRmlsZW5hbWUnKS4nPC90aD4nOwoJCSRvdXRwdXQgLj0gJzx0aD4nLl9MKCdTaXplJykuJzwvdGg+JzsKCQkkb3V0cHV0IC49ICc8dGg+Jy5fTCgnRmlsZSB0eXBlJykuJzwvdGg+JzsKCQkkb3V0cHV0IC49'));
	@fwrite($fp, base64_decode('ICc8dGg+Jy5fTCgnRG93bmxvYWQnKS4nPC90aD4nOwoJCWlmICgkY2FuX2RlbGV0ZSkgJG91dHB1dCAuPSAnPHRoPicuX0woJ0RlbGV0ZScpLic8L3RoPic7CgkJJG91dHB1dCAuPSAnPC90cj4nOwoJCWZvcmVhY2ggKCRmaWxlcyBhcyAkZmlsZSkgewoJCQlpZiAo'));
	@fwrite($fp, base64_decode('aXNfZGlyKCRmaWxlKSkgY29udGludWU7CgoJCQkkb3V0cHV0IC49ICc8dHI+JzsKCQkJJG91dHB1dCAuPSAnPHRkPicuaHRtbGVudGl0aWVzKGJhc2VuYW1lKCRmaWxlKSkuJzwvdGQ+JzsKCQkJJG91dHB1dCAuPSAnPHRkPicuaHRtbGVudGl0aWVzKHNlbGY6OmNv'));
	@fwrite($fp, base64_decode('bnZlcnRfZmlsZXNpemUoZmlsZXNpemUoJGZpbGUpLCAwKSkuJzwvdGQ+JzsKCQkJJGxvb2t1cF9maWxlcyA9IGFycmF5KAoJCQkJX19ESVJfXy4nLy4uLy4uLy4uL3VzZXJkYXRhL2F0dGFjaG1lbnRzL2ZpbGV0eXBlcyQnLk9JRHBsdXM6OmdldEN1cnJlbnRMYW5n'));
	@fwrite($fp, base64_decode('KCkuJy5jb25mJywKCQkJCV9fRElSX18uJy8uLi8uLi8uLi91c2VyZGF0YS9hdHRhY2htZW50cy9maWxldHlwZXMuY29uZicsCgkJCQlfX0RJUl9fLicvLi4vLi4vLi4vM3AvdnRzX2ZpbGVmb3JtYXRzL2ZpbGV0eXBlcyQnLk9JRHBsdXM6OmdldEN1cnJlbnRMYW5n'));
	@fwrite($fp, base64_decode('KCkuJy5sb2NhbCcsIC8vIG5vdCByZWNvbW1lbmRlZAoJCQkJX19ESVJfXy4nLy4uLy4uLy4uLzNwL3Z0c19maWxlZm9ybWF0cy9maWxldHlwZXMubG9jYWwnLCAvLyBub3QgcmVjb21tZW5kZWQKCQkJCV9fRElSX18uJy8uLi8uLi8uLi8zcC92dHNfZmlsZWZvcm1h'));
	@fwrite($fp, base64_decode('dHMvZmlsZXR5cGVzJCcuT0lEcGx1czo6Z2V0Q3VycmVudExhbmcoKS4nLmNvbmYnLAoJCQkJX19ESVJfXy4nLy4uLy4uLy4uLzNwL3Z0c19maWxlZm9ybWF0cy9maWxldHlwZXMuY29uZicKCQkJKTsKCQkJJG91dHB1dCAuPSAnPHRkPicuaHRtbGVudGl0aWVzKFZ0'));
	@fwrite($fp, base64_decode('c0ZpbGVUeXBlRGV0ZWN0OjpnZXREZXNjcmlwdGlvbigkZmlsZSwgJGxvb2t1cF9maWxlcykpLic8L3RkPic7CgoJCQkkb3V0cHV0IC49ICcgICAgIDx0ZD48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgbmFtZT0iZG93bmxvYWRfJy5tZDUoJGZpbGUpLiciIGlkPSJkb3du'));
	@fwrite($fp, base64_decode('bG9hZF8nLm1kNSgkZmlsZSkuJyIgY2xhc3M9ImJ0biBidG4tc3VjY2VzcyBidG4teHMgZG93bmxvYWQiIG9uY2xpY2s9ImRvd25sb2FkQXR0YWNobWVudCgnLmpzX2VzY2FwZShPSURwbHVzOjp3ZWJwYXRoKF9fRElSX18pKS4nLCBjdXJyZW50X25vZGUsJy5qc19l'));
	@fwrite($fp, base64_decode('c2NhcGUoYmFzZW5hbWUoJGZpbGUpKS4nKSI+Jy5fTCgnRG93bmxvYWQnKS4nPC9idXR0b24+PC90ZD4nOwoJCQlpZiAoJGNhbl9kZWxldGUpIHsKCQkJCSRvdXRwdXQgLj0gJyAgICAgPHRkPjxidXR0b24gdHlwZT0iYnV0dG9uIiBuYW1lPSJkZWxldGVfJy5tZDUo'));
	@fwrite($fp, base64_decode('JGZpbGUpLiciIGlkPSJkZWxldGVfJy5tZDUoJGZpbGUpLiciIGNsYXNzPSJidG4gYnRuLWRhbmdlciBidG4teHMgZGVsZXRlIiBvbmNsaWNrPSJkZWxldGVBdHRhY2htZW50KGN1cnJlbnRfbm9kZSwnLmpzX2VzY2FwZShiYXNlbmFtZSgkZmlsZSkpLicpIj4nLl9M'));
	@fwrite($fp, base64_decode('KCdEZWxldGUnKS4nPC9idXR0b24+PC90ZD4nOwoJCQl9CgoJCQkkb3V0cHV0IC49ICc8L3RyPic7CgkJCSRkb3Nob3cgPSB0cnVlOwoJCQkkZm91bmRfZmlsZXMgPSB0cnVlOwoJCX0KCgkJaWYgKCEkZm91bmRfZmlsZXMpICRvdXRwdXQgLj0gJzx0cj48dGQgY29s'));
	@fwrite($fp, base64_decode('c3Bhbj0iJy4oJGNhbl9kZWxldGUgPyA1IDogNCkuJyI+PGk+Jy5fTCgnTm8gYXR0YWNobWVudHMnKS4nPC9pPjwvdGQ+PC90cj4nOwoKCQkkb3V0cHV0IC49ICc8L3RhYmxlPjwvZGl2Pic7CgoJCWlmICgkY2FuX3VwbG9hZCkgewoJCQkkb3V0cHV0IC49ICc8Zm9y'));
	@fwrite($fp, base64_decode('bSBvbnN1Ym1pdD0icmV0dXJuIHVwbG9hZEF0dGFjaG1lbnRPblN1Ym1pdCh0aGlzKTsiIGVuY3R5cGU9Im11bHRpcGFydC9mb3JtLWRhdGEiIGlkPSJ1cGxvYWRBdHRhY2htZW50Rm9ybSI+JzsKCQkJJG91dHB1dCAuPSAnPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFt'));
	@fwrite($fp, base64_decode('ZT0iaWQiIHZhbHVlPSInLmh0bWxlbnRpdGllcygkaWQpLiciPic7CgkJCSRvdXRwdXQgLj0gJzxkaXY+Jy5fTCgnQWRkIGEgZmlsZSBhdHRhY2htZW50JykuJzo8aW5wdXQgdHlwZT0iZmlsZSIgbmFtZT0idXNlcmZpbGUiIHZhbHVlPSIiIGlkPSJmaWxlQXR0YWNo'));
	@fwrite($fp, base64_decode('bWVudCI+JzsKCQkJJG91dHB1dCAuPSAnPGJyPjxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSInLl9MKCdVcGxvYWQnKS4nIj48L2Rpdj4nOwoJCQkkb3V0cHV0IC49ICc8L2Zvcm0+JzsKCQkJJGRvc2hvdyA9IHRydWU7CgkJfQoKCQkkb3V0cHV0IC49ICc8L2Rp'));
	@fwrite($fp, base64_decode('dj4nOwoKCQlpZiAoJGRvc2hvdykgJHRleHQgLj0gJG91dHB1dDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gYmVmb3JlT2JqZWN0RGVsZXRlKCRpZCkge30gLy8gSW50ZXJmYWNlIDEuMy42LjEuNC4xLjM3NDc2LjIuNS4yLjMuMwoJcHVibGljIGZ1bmN0aW9uIGFmdGVy'));
	@fwrite($fp, base64_decode('T2JqZWN0RGVsZXRlKCRpZCkgewoJCS8vIEludGVyZmFjZSAxLjMuNi4xLjQuMS4zNzQ3Ni4yLjUuMi4zLjMKCQkvLyBEZWxldGUgdGhlIGF0dGFjaG1lbnQgZm9sZGVyIGluY2x1ZGluZyBhbGwgZmlsZXMgaW4gaXQgKG5vdGU6IFN1YmZvbGRlcnMgYXJlIG5vdCBw'));
	@fwrite($fp, base64_decode('b3NzaWJsZSkKCQkkdXBsb2FkZGlyID0gc2VsZjo6Z2V0VXBsb2FkRGlyKCRpZCk7CgkJaWYgKCR1cGxvYWRkaXIgIT0gJycpIHsKCQkJJGFyeSA9IGdsb2IoJHVwbG9hZGRpciAuICcvJyAuICcqJyk7CgkJCWZvcmVhY2ggKCRhcnkgYXMgJGEpIEB1bmxpbmsoJGEp'));
	@fwrite($fp, base64_decode('OwoJCQlAcm1kaXIoJHVwbG9hZGRpcik7CgkJCWlmIChpc19kaXIoJHVwbG9hZGRpcikpIHsKCQkJCU9JRHBsdXM6OmxvZ2dlcigpLT5sb2coIltXQVJOXU9JRCgkaWQpK1tXQVJOXUEhIiwgIkF0dGFjaG1lbnQgZGlyZWN0b3J5ICckdXBsb2FkZGlyJyBjb3VsZCBu'));
	@fwrite($fp, base64_decode('b3QgYmUgZGVsZXRlZCBkdXJpbmcgdGhlIGRlbGV0aW9uIG9mIHRoZSBPSUQiKTsKCQkJfQoJCX0KCX0KCXB1YmxpYyBmdW5jdGlvbiBiZWZvcmVPYmplY3RVcGRhdGVTdXBlcmlvcigkaWQsICYkcGFyYW1zKSB7fSAvLyBJbnRlcmZhY2UgMS4zLjYuMS40LjEuMzc0'));
	@fwrite($fp, base64_decode('NzYuMi41LjIuMy4zCglwdWJsaWMgZnVuY3Rpb24gYWZ0ZXJPYmplY3RVcGRhdGVTdXBlcmlvcigkaWQsICYkcGFyYW1zKSB7fSAvLyBJbnRlcmZhY2UgMS4zLjYuMS40LjEuMzc0NzYuMi41LjIuMy4zCglwdWJsaWMgZnVuY3Rpb24gYmVmb3JlT2JqZWN0VXBkYXRl'));
	@fwrite($fp, base64_decode('U2VsZigkaWQsICYkcGFyYW1zKSB7fSAvLyBJbnRlcmZhY2UgMS4zLjYuMS40LjEuMzc0NzYuMi41LjIuMy4zCglwdWJsaWMgZnVuY3Rpb24gYWZ0ZXJPYmplY3RVcGRhdGVTZWxmKCRpZCwgJiRwYXJhbXMpIHt9IC8vIEludGVyZmFjZSAxLjMuNi4xLjQuMS4zNzQ3'));
	@fwrite($fp, base64_decode('Ni4yLjUuMi4zLjMKCXB1YmxpYyBmdW5jdGlvbiBiZWZvcmVPYmplY3RJbnNlcnQoJGlkLCAmJHBhcmFtcykge30gLy8gSW50ZXJmYWNlIDEuMy42LjEuNC4xLjM3NDc2LjIuNS4yLjMuMwoJcHVibGljIGZ1bmN0aW9uIGFmdGVyT2JqZWN0SW5zZXJ0KCRpZCwgJiRw'));
	@fwrite($fp, base64_decode('YXJhbXMpIHt9IC8vIEludGVyZmFjZSAxLjMuNi4xLjQuMS4zNzQ3Ni4yLjUuMi4zLjMKCglwdWJsaWMgZnVuY3Rpb24gdHJlZV9zZWFyY2goJHJlcXVlc3QpIHsKCQlyZXR1cm4gZmFsc2U7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHdob2lzT2JqZWN0QXR0cmlidXRl'));
	@fwrite($fp, base64_decode('cygkaWQsICYkb3V0KSB7CgkJLy8gSW50ZXJmYWNlIDEuMy42LjEuNC4xLjM3NDc2LjIuNS4yLjMuNAoKCQkkZmlsZXMgPSBnbG9iKHNlbGY6OmdldFVwbG9hZERpcigkaWQpLicvJy4nKicpOwoJCWZvcmVhY2ggKCRmaWxlcyBhcyAkZmlsZSkgewoJCQkkb3V0W10g'));
	@fwrite($fp, base64_decode('PSAnYXR0YWNobWVudC1uYW1lOiAnLmJhc2VuYW1lKCRmaWxlKTsKCQkJJG91dFtdID0gJ2F0dGFjaG1lbnQtdXJsOiAnLk9JRHBsdXM6OmdldFN5c3RlbVVybCgpLk9JRHBsdXM6OndlYnBhdGgoX19ESVJfXykuJ2Rvd25sb2FkLnBocD9pZD0nLnVybGVuY29kZSgk'));
	@fwrite($fp, base64_decode('aWQpLicmZmlsZW5hbWU9Jy51cmxlbmNvZGUoYmFzZW5hbWUoJGZpbGUpKTsKCQl9CgoJfQoJcHVibGljIGZ1bmN0aW9uIHdob2lzUmFBdHRyaWJ1dGVzKCRlbWFpbCwgJiRvdXQpIHt9IC8vIEludGVyZmFjZSAxLjMuNi4xLjQuMS4zNzQ3Ni4yLjUuMi4zLjQKfQo='));
	@fclose($fp);
}
if (!is_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php')) {
	warn('File has vanished! Will re-create it: plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
	writefile_1();
	if (!is_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php')) {
		warn('File cannot be created (not existing): plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
	} else if (sha1_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php') != '3689046b2f061b66aa5ec3eb6b285c40d7e4cf3c') {
		warn('File cannot be created (checksum mismatch): plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php', 0644)) {
		warn('Could not change file permissions of plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
	}
} else {
	if (@sha1_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php') !== '3689046b2f061b66aa5ec3eb6b285c40d7e4cf3c') {
		if (@sha1_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php') !== '7224b7135a65fe2807534ecf9c9a4a7158a32fcb') {
			warn('File was modified. Will overwrite the changes now: plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
			$tmp = pathinfo('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php') !== '3689046b2f061b66aa5ec3eb6b285c40d7e4cf3c') {
			warn('File cannot be written (checksum mismatch): plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 384\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 384') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

