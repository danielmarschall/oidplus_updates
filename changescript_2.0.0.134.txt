<?php /* <ViaThinkSoftSignature>
Bcq7wK28UgFaCR9P9uFStdCaOl+V95baL5rS9mU2nKa3WRz0LB4VVzRxvtv5hVez6
b3lhE2/WEci/5EbIeQCs9v9G3iVXWyL9C4txeDc08JEqI2RgYFKcL7G/fuWdbP4V0
50otmwW6Fne8oWTRUCeB2rwRtcRZL0056O3LqPS5XxTB+X5JOCBlcGuT4KV0GSYaf
I0Cg8Tan+bEh2xvDDqoU00URJuXAHBNnzv3riE/bWf+jcDgQEQWAYYNT2tr/1Kn8z
rIOgVd/zqQB0b2szzhrdXl2Cj1kKx1BROp9HF34wAoo+NthAOtuMVFIqZrGjqd7Ug
Cf9jyTVQmxaBVBCTIPzUjkkiBEwCFpo7kzyXzt7HnSwbRk5T/HmJ3C2/kU4f7knaT
2EdbDfWrE6iHaAT2f4J1J8epznwHBA+EpX3W+TlpwZhSeD+I4Qqx4r7T6yuM22dpT
0GB2sTq9UGf0E6eipRE2cwUlEz1QgU6MSwxr4Jqv8EeBEwXKjVPKbBuQZ7ZF6NYwr
O78tjZYtx77U/RZFN59iAwQkx2Vf1cwzKhQ2M/tSrxUEfB5bCjM70/ezAOqvKWZAV
Zi3ZHpmSn2N2M6WhUWSz2pq5NYLkTcwF+SK+kS5xfF+2UTMG5Dx6B4/c9rh8wdDp3
s/EvQhsDPJvfWwXIXaawwKKc3NGu/gqWKTeIbFgvVwFlh+yVufC6dkNKWld4N5X4P
D/3qWyLpLyG4+TUokEjoxXKUhumfQD+3/dr6+RSAPSfQVkBZAmFxw1uVth2gyR3EJ
2TznNsSfjZ+bwV+kAAXU6iD+Wugdap77JINb68lfzXRJx675Ir1x7eYsy+W4VWW/x
6kCdH3DlMUWYGr3HuGPf053Abkbm/VW0uO9wW511Gz0PAL7eUew1dZ98vd4MNYGrN
0Befj6AYkkDMJ1xBppTz4f7BkJpRuYiA3DglhwoI3/20e1PfvjwlOjxJ5Pbob7GZc
58LROU2OW2tzf4ojwXQ3rep+/Yx8Gh8vw6jlr3c+HoHPiSK1TLYufk5bY/ThF06d5
v+uKursrO5ybqzMp4C1dkRKtrOoDjCTapB5DoiEiFOMCZ60VlFhVBOeUuh8Wdj+fp
nhncSdWpVBNsrV+vx6jWqkc6p0LHRwgcsa4Dn1tITHtRqsUs9KLtxQrAxmFmWxy8j
VDiSKneBF7xKzhg4DOjl9d3kkrkynZ1IXuYQl6JwC7VrJVt9vDcyVDla4wADCGmjE
YtsMHAgngXGbJXepluwDvCxYHP9YabLXn0vr2Sx8b+ZfSJtS1nYA6WaBEhyykMhlr
2WwqJOaUjz4XzmeygStFGPCrzj+PXnZULhNvORbFCb2q4FkjlYrsFidnSGG4OOACm
A==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 133') {
	err('This update can only be applied to OIDplus version 2.0.0.133!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: plugins/publicPages/200_viathinksoft_freeoid/plugin.inc.php
function writefile_1() {
	@$fp = fopen('plugins/publicPages/200_viathinksoft_freeoid/plugin.inc.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmlmICghZGVmaW5lZCgnSU5fT0lEUExVUycpKSBkaWUoKTsKCmNsYXNzIE9JRHBsdXNQYWdlUHVibGljRnJlZU9JRCBleHRlbmRzIE9JRHBsdXNQYWdlUGx1Z2luIHsKCXB1YmxpYyBmdW5jdGlvbiB0'));
	@fwrite($fp, base64_decode('eXBlKCkgewoJCXJldHVybiAncHVibGljJzsKCX0KCglwdWJsaWMgZnVuY3Rpb24gcHJpb3JpdHkoKSB7CgkJcmV0dXJuIDIwMDsKCX0KCglwcml2YXRlIHN0YXRpYyBmdW5jdGlvbiBnZXRGcmVlUm9vdE9pZCgpIHsKCQlyZXR1cm4gT0lEcGx1c09JRDo6cGFyc2Uo'));
	@fwrite($fp, base64_decode('J29pZDonLk9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgnZnJlZW9pZF9yb290X29pZCcpKTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gYWN0aW9uKCYkaGFuZGxlZCkgewoJCWlmIChpc3NldCgkX1BPU1RbImFjdGlvbiJdKSAmJiAoJF9QT1NUWyJhY3Rpb24iXSA9'));
	@fwrite($fp, base64_decode('PSAiY29tLnZpYXRoaW5rc29mdC5mcmVlb2lkLnJlcXVlc3RfZnJlZW9pZCIpKSB7CgkJCSRoYW5kbGVkID0gdHJ1ZTsKCQkJJGVtYWlsID0gJF9QT1NUWydlbWFpbCddOwoKCQkJJHJlcyA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgKiBmcm9tICIuT0lE'));
	@fwrite($fp, base64_decode('UExVU19UQUJMRU5BTUVfUFJFRklYLiJyYSB3aGVyZSBlbWFpbCA9ICciLk9JRHBsdXM6OmRiKCktPnJlYWxfZXNjYXBlX3N0cmluZygkZW1haWwpLiInIik7CgkJCWlmIChPSURwbHVzOjpkYigpLT5udW1fcm93cygkcmVzKSA+IDApIHsKCQkJCWRpZShqc29uX2Vu'));
	@fwrite($fp, base64_decode('Y29kZShhcnJheSgiZXJyb3IiID0+ICdUaGlzIGVtYWlsIGFkZHJlc3MgYWxyZWFkeSBleGlzdHMuJykpKTsgLy8gVE9ETzogYWN0dWFsbHksIHRoZSBwZXJzb24gbWlnaHQgaGF2ZSBzb21ldGhpbmcgZWxzZSAobGlrZSBhIERPSSkgYW5kIHdhbnQgdG8gaGF2ZSBh'));
	@fwrite($fp, base64_decode('IEZyZWVPSUQKCQkJfQoKCQkJaWYgKCFvaWRwbHVzX3ZhbGlkX2VtYWlsKCRlbWFpbCkpIHsKCQkJCWRpZShqc29uX2VuY29kZShhcnJheSgiZXJyb3IiID0+ICdJbnZhbGlkIGVtYWlsIGFkZHJlc3MnKSkpOwoJCQl9CgoJCQlpZiAoUkVDQVBUQ0hBX0VOQUJMRUQp'));
	@fwrite($fp, base64_decode('IHsKCQkJCSRzZWNyZXQ9UkVDQVBUQ0hBX1BSSVZBVEU7CgkJCQkkcmVzcG9uc2U9JF9QT1NUWyJjYXB0Y2hhIl07CgkJCQkkdmVyaWZ5PWZpbGVfZ2V0X2NvbnRlbnRzKCJodHRwczovL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS9hcGkvc2l0ZXZlcmlmeT9zZWNy'));
	@fwrite($fp, base64_decode('ZXQ9eyRzZWNyZXR9JnJlc3BvbnNlPXskcmVzcG9uc2V9Iik7CgkJCQkkY2FwdGNoYV9zdWNjZXNzPWpzb25fZGVjb2RlKCR2ZXJpZnkpOwoJCQkJaWYgKCRjYXB0Y2hhX3N1Y2Nlc3MtPnN1Y2Nlc3M9PWZhbHNlKSB7CgkJCQkJZGllKGpzb25fZW5jb2RlKGFycmF5'));
	@fwrite($fp, base64_decode('KCJlcnJvciIgPT4gJ0NhcHRjaGEgd3JvbmcnKSkpOwoJCQkJfQoJCQl9CgoJCQkkcm9vdF9vaWQgPSBPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ2ZyZWVvaWRfcm9vdF9vaWQnKTsKCQkJT0lEcGx1czo6bG9nZ2VyKCktPmxvZygiT0lEKG9pZDokcm9vdF9v'));
	@fwrite($fp, base64_decode('aWQpK1JBKCRlbWFpbCkhIiwgIlJlcXVlc3RlZCBhIGZyZWUgT0lEIGZvciBlbWFpbCAnJGVtYWlsJyB0byBiZSBwbGFjZWQgaW50byByb290ICckcm9vdF9vaWQnIik7CgoJCQkkdGltZXN0YW1wID0gdGltZSgpOwoJCQkkYWN0aXZhdGVfdXJsID0gT0lEcGx1czo6'));
	@fwrite($fp, base64_decode('c3lzdGVtX3VybCgpIC4gJz9nb3RvPScudXJsZW5jb2RlKCdvaWRwbHVzOmNvbS52aWF0aGlua3NvZnQuZnJlZW9pZC5hY3RpdmF0ZV9mcmVlb2lkJCcuJGVtYWlsLickJy4kdGltZXN0YW1wLickJy5PSURwbHVzOjphdXRoVXRpbHMoKTo6bWFrZUF1dGhLZXkoJ2Nv'));
	@fwrite($fp, base64_decode('bS52aWF0aGlua3NvZnQuZnJlZW9pZC5hY3RpdmF0ZV9mcmVlb2lkOycuJGVtYWlsLic7Jy4kdGltZXN0YW1wKSk7CgoJCQkkbWVzc2FnZSA9IGZpbGVfZ2V0X2NvbnRlbnRzKF9fRElSX18gLiAnL3JlcXVlc3RfbXNnLnRwbCcpOwoJCQkkbWVzc2FnZSA9IHN0cl9y'));
	@fwrite($fp, base64_decode('ZXBsYWNlKCd7e1NZU1RFTV9VUkx9fScsIE9JRHBsdXM6OnN5c3RlbV91cmwoKSwgJG1lc3NhZ2UpOwoJCQkkbWVzc2FnZSA9IHN0cl9yZXBsYWNlKCd7e1NZU1RFTV9USVRMRX19JywgT0lEcGx1czo6Y29uZmlnKCktPnN5c3RlbVRpdGxlKCksICRtZXNzYWdlKTsK'));
	@fwrite($fp, base64_decode('CQkJJG1lc3NhZ2UgPSBzdHJfcmVwbGFjZSgne3tBRE1JTl9FTUFJTH19JywgT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdhZG1pbl9lbWFpbCcpLCAkbWVzc2FnZSk7CgkJCSRtZXNzYWdlID0gc3RyX3JlcGxhY2UoJ3t7QUNUSVZBVEVfVVJMfX0nLCAkYWN0'));
	@fwrite($fp, base64_decode('aXZhdGVfdXJsLCAkbWVzc2FnZSk7CgkJCW15X21haWwoJGVtYWlsLCBPSURwbHVzOjpjb25maWcoKS0+c3lzdGVtVGl0bGUoKS4nIC0gRnJlZSBPSUQgcmVxdWVzdCcsICRtZXNzYWdlLCBPSURwbHVzOjpjb25maWcoKS0+Z2xvYmFsQ0MoKSk7CgoJCQllY2hvIGpz'));
	@fwrite($fp, base64_decode('b25fZW5jb2RlKGFycmF5KCJzdGF0dXMiID0+IDApKTsKCQl9CgoJCWlmIChpc3NldCgkX1BPU1RbImFjdGlvbiJdKSAmJiAoJF9QT1NUWyJhY3Rpb24iXSA9PSAiY29tLnZpYXRoaW5rc29mdC5mcmVlb2lkLmFjdGl2YXRlX2ZyZWVvaWQiKSkgewoJCQkkaGFuZGxl'));
	@fwrite($fp, base64_decode('ZCA9IHRydWU7CgoJCQkkcGFzc3dvcmQxID0gJF9QT1NUWydwYXNzd29yZDEnXTsKCQkJJHBhc3N3b3JkMiA9ICRfUE9TVFsncGFzc3dvcmQyJ107CgkJCSRlbWFpbCA9ICRfUE9TVFsnZW1haWwnXTsKCgkJCSRyYV9uYW1lID0gJF9QT1NUWydyYV9uYW1lJ107CgkJ'));
	@fwrite($fp, base64_decode('CSR1cmwgPSAkX1BPU1RbJ3VybCddOwoJCQkkdGl0bGUgPSAkX1BPU1RbJ3RpdGxlJ107CgoJCQkkYXV0aCA9ICRfUE9TVFsnYXV0aCddOwoJCQkkdGltZXN0YW1wID0gJF9QT1NUWyd0aW1lc3RhbXAnXTsKCgkJCWlmICghT0lEcGx1czo6YXV0aFV0aWxzKCk6OnZh'));
	@fwrite($fp, base64_decode('bGlkYXRlQXV0aEtleSgnY29tLnZpYXRoaW5rc29mdC5mcmVlb2lkLmFjdGl2YXRlX2ZyZWVvaWQ7Jy4kZW1haWwuJzsnLiR0aW1lc3RhbXAsICRhdXRoKSkgewoJCQkJZGllKGpzb25fZW5jb2RlKGFycmF5KCJlcnJvciIgPT4gJ0ludmFsaWQgYXV0aCBrZXknKSkp'));
	@fwrite($fp, base64_decode('OwoJCQl9CgoJCQlpZiAoKE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgnbWF4X3JhX2ludml0ZV90aW1lJykgPiAwKSAmJiAodGltZSgpLSR0aW1lc3RhbXAgPiBPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ21heF9yYV9pbnZpdGVfdGltZScpKSkgewoJ'));
	@fwrite($fp, base64_decode('CQkJZGllKGpzb25fZW5jb2RlKGFycmF5KCJlcnJvciIgPT4gJ0ludml0YXRpb24gZXhwaXJlZCEnKSkpOwoJCQl9CgoJCQlpZiAoJHBhc3N3b3JkMSAhPT0gJHBhc3N3b3JkMikgewoJCQkJZGllKGpzb25fZW5jb2RlKGFycmF5KCJlcnJvciIgPT4gJ1Bhc3N3b3Jk'));
	@fwrite($fp, base64_decode('cyBhcmUgbm90IGVxdWFsJykpKTsKCQkJfQoKCQkJaWYgKHN0cmxlbigkcGFzc3dvcmQxKSA8IE9JRHBsdXM6OmNvbmZpZygpLT5taW5SYVBhc3N3b3JkTGVuZ3RoKCkpIHsKCQkJCWRpZShqc29uX2VuY29kZShhcnJheSgiZXJyb3IiID0+ICdQYXNzd29yZCBpcyB0'));
	@fwrite($fp, base64_decode('b28gc2hvcnQuIE1pbmltdW0gcGFzc3dvcmQgbGVuZ3RoOiAnLk9JRHBsdXM6OmNvbmZpZygpLT5taW5SYVBhc3N3b3JkTGVuZ3RoKCkpKSk7CgkJCX0KCgkJCWlmIChlbXB0eSgkcmFfbmFtZSkpIHsKCQkJCWRpZShqc29uX2VuY29kZShhcnJheSgiZXJyb3IiID0+'));
	@fwrite($fp, base64_decode('ICdQbGVhc2UgZW50ZXIgeW91ciBwZXJzb25hbCBuYW1lIG9yIHRoZSBuYW1lIG9mIHlvdXIgZ3JvdXAuJykpKTsKCQkJfQoKCQkJLy8gMS4gc3RlcDogQWRkIHRoZSBSQSB0byB0aGUgZGF0YWJhc2UKCgkJCSRyYSA9IG5ldyBPSURwbHVzUkEoJGVtYWlsKTsKCQkJ'));
	@fwrite($fp, base64_decode('JHJhLT5yZWdpc3Rlcl9yYSgkcGFzc3dvcmQxKTsKCQkJJHJhLT5zZXRSYU5hbWUoJHJhX25hbWUpOwoKCQkJLy8gMi4gc3RlcDogQWRkIHRoZSBuZXcgT0lEIHRvIHRoZSBkYXRhYmFzZQoKCQkJJHJvb3Rfb2lkID0gT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVl'));
	@fwrite($fp, base64_decode('KCdmcmVlb2lkX3Jvb3Rfb2lkJyk7CgkJCSRuZXdfb2lkID0gJHJvb3Rfb2lkLicuJy4oJHRoaXMtPmZyZWVvaWRfbWF4X2lkKCkrMSk7CgoJCQlPSURwbHVzOjpsb2dnZXIoKS0+bG9nKCJPSUQob2lkOiRyb290X29pZCkrT0lEUkEob2lkOiRyb290X29pZCkhIiwg'));
	@fwrite($fp, base64_decode('IkNoaWxkIE9JRCAnJG5ld19vaWQnIGFkZGVkIGF1dG9tYXRpY2FsbHkgYnkgJyRlbWFpbCcgKFJBIE5hbWU6ICckcmFfbmFtZScpIik7CgkJCU9JRHBsdXM6OmxvZ2dlcigpLT5sb2coIk9JRChvaWQ6JG5ld19vaWQpK1JBKCRlbWFpbCkhIiwgICAgICAgICAgICAi'));
	@fwrite($fp, base64_decode('RnJlZSBPSUQgJyRuZXdfb2lkJyBhY3RpdmF0ZWQgKFJBIE5hbWU6ICckcmFfbmFtZScpIik7CgoJCQlpZiAoKCFlbXB0eSgkdXJsKSkgJiYgKHN1YnN0cigkdXJsLCAwLCA0KSAhPSAnaHR0cCcpKSAkdXJsID0gJ2h0dHA6Ly8nLiR1cmw7CgoJCQkkZGVzY3JpcHRp'));
	@fwrite($fp, base64_decode('b24gPSAnJzsgLy8gJzxwPicuaHRtbGVudGl0aWVzKCRyYV9uYW1lKS4nPC9wPic7CgkJCWlmICghZW1wdHkoJHVybCkpIHsKCQkJCSRkZXNjcmlwdGlvbiAuPSAnPHA+TW9yZSBpbmZvcm1hdGlvbiBhdCA8YSBocmVmPSInLmh0bWxlbnRpdGllcygkdXJsKS4nIj4n'));
	@fwrite($fp, base64_decode('Lmh0bWxlbnRpdGllcygkdXJsKS4nPC9hPjwvcD4nOwoJCQl9CgoJCQlpZiAoZW1wdHkoJHRpdGxlKSkgJHRpdGxlID0gJHJhX25hbWU7CgoJCQlpZiAoIU9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJpbnNlcnQgaW50byAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4i'));
	@fwrite($fp, base64_decode('b2JqZWN0cyAoaWQsIHJhX2VtYWlsLCBwYXJlbnQsIHRpdGxlLCBkZXNjcmlwdGlvbiwgY29uZmlkZW50aWFsLCBjcmVhdGVkKSB2YWx1ZXMgKCciLk9JRHBsdXM6OmRiKCktPnJlYWxfZXNjYXBlX3N0cmluZygnb2lkOicuJG5ld19vaWQpLiInLCAnIi5PSURwbHVz'));
	@fwrite($fp, base64_decode('OjpkYigpLT5yZWFsX2VzY2FwZV9zdHJpbmcoJGVtYWlsKS4iJywgJyIuT0lEcGx1czo6ZGIoKS0+cmVhbF9lc2NhcGVfc3RyaW5nKCdvaWQ6Jy5PSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ2ZyZWVvaWRfcm9vdF9vaWQnKSkuIicsICciLk9JRHBsdXM6OmRi'));
	@fwrite($fp, base64_decode('KCktPnJlYWxfZXNjYXBlX3N0cmluZygkdGl0bGUpLiInLCAnIi5PSURwbHVzOjpkYigpLT5yZWFsX2VzY2FwZV9zdHJpbmcoJGRlc2NyaXB0aW9uKS4iJywgMCwgbm93KCkpIikpIHsKCQkJCSRyYS0+ZGVsZXRlKCk7CgkJCQlkaWUoanNvbl9lbmNvZGUoYXJyYXko'));
	@fwrite($fp, base64_decode('ImVycm9yIiA9PiBPSURwbHVzOjpkYigpLT5lcnJvcigpKSkpOwoJCQl9CgoJCQkvLyBTZW5kIGRlbGVnYXRpb24gcmVwb3J0IGVtYWlsIHRvIGFkbWluCgoJCQkkbWVzc2FnZSAgPSAiT0lEIGRlbGVnYXRpb24gcmVwb3J0XG4iOwoJCQkkbWVzc2FnZSAuPSAiXG4i'));
	@fwrite($fp, base64_decode('OwoJCQkkbWVzc2FnZSAuPSAiT0lEOiAiLiRuZXdfb2lkLiJcbiI7OwoJCQkkbWVzc2FnZSAuPSAiXG4iOwoJCQkkbWVzc2FnZSAuPSAiUkEgTmFtZTogJHJhX25hbWVcbiI7CgkJCSRtZXNzYWdlIC49ICJSQSBlTWFpbDogJGVtYWlsXG4iOwoJCQkkbWVzc2FnZSAu'));
	@fwrite($fp, base64_decode('PSAiVVJMIGZvciBtb3JlIGluZm9ybWF0aW9uOiAkdXJsXG4iOwoJCQkkbWVzc2FnZSAuPSAiT0lEIE5hbWU6ICR0aXRsZVxuIjsKCQkJJG1lc3NhZ2UgLj0gIlxuIjsKCQkJJG1lc3NhZ2UgLj0gIk1vcmUgZGV0YWlsczogIi5PSURwbHVzOjpzeXN0ZW1fdXJsKCku'));
	@fwrite($fp, base64_decode('Ij9nb3RvPW9pZDokbmV3X29pZFxuIjsKCgkJCW15X21haWwoJGVtYWlsLCBPSURwbHVzOjpjb25maWcoKS0+c3lzdGVtVGl0bGUoKS4iIC0gT0lEICRuZXdfb2lkIHJlZ2lzdGVyZWQiLCAkbWVzc2FnZSwgT0lEcGx1czo6Y29uZmlnKCktPmdsb2JhbENDKCkpOwoK'));
	@fwrite($fp, base64_decode('CQkJLy8gU2VuZCBkZWxlZ2F0aW9uIGluZm9ybWF0aW9uIHRvIHVzZXIKCgkJCSRtZXNzYWdlID0gZmlsZV9nZXRfY29udGVudHMoX19ESVJfXyAuICcvYWxsb2NhdGVkX21zZy50cGwnKTsKCQkJJG1lc3NhZ2UgPSBzdHJfcmVwbGFjZSgne3tTWVNURU1fVVJMfX0n'));
	@fwrite($fp, base64_decode('LCBPSURwbHVzOjpzeXN0ZW1fdXJsKCksICRtZXNzYWdlKTsKCQkJJG1lc3NhZ2UgPSBzdHJfcmVwbGFjZSgne3tTWVNURU1fVElUTEV9fScsIE9JRHBsdXM6OmNvbmZpZygpLT5zeXN0ZW1UaXRsZSgpLCAkbWVzc2FnZSk7CgkJCSRtZXNzYWdlID0gc3RyX3JlcGxh'));
	@fwrite($fp, base64_decode('Y2UoJ3t7QURNSU5fRU1BSUx9fScsIE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgnYWRtaW5fZW1haWwnKSwgJG1lc3NhZ2UpOwoJCQkkbWVzc2FnZSA9IHN0cl9yZXBsYWNlKCd7e05FV19PSUR9fScsICRuZXdfb2lkLCAkbWVzc2FnZSk7CgkJCW15X21haWwo'));
	@fwrite($fp, base64_decode('JGVtYWlsLCBPSURwbHVzOjpjb25maWcoKS0+c3lzdGVtVGl0bGUoKS4nIC0gRnJlZSBPSUQgYWxsb2NhdGVkJywgJG1lc3NhZ2UsIE9JRHBsdXM6OmNvbmZpZygpLT5nbG9iYWxDQygpKTsKCgkJCWVjaG8ganNvbl9lbmNvZGUoYXJyYXkoInN0YXR1cyIgPT4gMCkp'));
	@fwrite($fp, base64_decode('OwoJCX0KCX0KCglwdWJsaWMgZnVuY3Rpb24gaW5pdCgkaHRtbD10cnVlKSB7CgkJT0lEcGx1czo6Y29uZmlnKCktPnByZXBhcmVDb25maWdLZXkoJ2ZyZWVvaWRfcm9vdF9vaWQnLCAnUm9vdC1PSUQgb2YgZnJlZSBPSUQgc2VydmljZScsICcnLCAwLCAxKTsKCX0K'));
	@fwrite($fp, base64_decode('CglwdWJsaWMgZnVuY3Rpb24gY2ZnU2V0VmFsdWUoJG5hbWUsICR2YWx1ZSkgewoJCWlmICgkbmFtZSA9PSAnZnJlZW9pZF9yb290X29pZCcpIHsKCQkJaWYgKCgkdmFsdWUgIT0gJycpICYmICFvaWRfdmFsaWRfZG90bm90YXRpb24oJHZhbHVlLGZhbHNlLGZhbHNl'));
	@fwrite($fp, base64_decode('LDEpKSB7CgkJCQl0aHJvdyBuZXcgRXhjZXB0aW9uKCJQbGVhc2UgZW50ZXIgYSB2YWxpZCBPSUQgaW4gZG90IG5vdGF0aW9uIG9yIG5vdGhpbmciKTsKCQkJfQoJCX0KCX0KCglwdWJsaWMgZnVuY3Rpb24gZ3VpKCRpZCwgJiRvdXQsICYkaGFuZGxlZCkgewoJCWlm'));
	@fwrite($fp, base64_decode('IChleHBsb2RlKCckJywkaWQpWzBdID09ICdvaWRwbHVzOmNvbS52aWF0aGlua3NvZnQuZnJlZW9pZCcpIHsKCQkJJGhhbmRsZWQgPSB0cnVlOwoKCQkJJG91dFsndGl0bGUnXSA9ICdSZWdpc3RlciBhIGZyZWUgT0lEJzsKCQkJJG91dFsnaWNvbiddID0gZmlsZV9l'));
	@fwrite($fp, base64_decode('eGlzdHMoX19ESVJfXy4nL2ljb25fYmlnLnBuZycpID8gJ3BsdWdpbnMvcHVibGljUGFnZXMvJy5iYXNlbmFtZShfX0RJUl9fKS4nL2ljb25fYmlnLnBuZycgOiAnJzsKCgkJCSRoaWdoZXN0X2lkID0gJHRoaXMtPmZyZWVvaWRfbWF4X2lkKCk7CgoJCQkkb3V0Wyd0'));
	@fwrite($fp, base64_decode('ZXh0J10gLj0gJzxwPkN1cnJlbnRseSA8YSAnLm9pZHBsdXNfbGluaygnb2lkOicuT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdmcmVlb2lkX3Jvb3Rfb2lkJykpLic+Jy4kaGlnaGVzdF9pZC4nIGZyZWUgT0lEcyBoYXZlIGJlZW48L2E+IHJlZ2lzdGVyZWQu'));
	@fwrite($fp, base64_decode('IFBsZWFzZSBlbnRlciB5b3VyIGVtYWlsIGJlbG93IHRvIHJlY2VpdmUgYSBmcmVlIE9JRC48L3A+JzsKCgkJCXRyeSB7CgkJCQkkb3V0Wyd0ZXh0J10gLj0gJwoJCQkJICA8Zm9ybSBpZD0iZnJlZU9JREZvcm0iIG9uc3VibWl0PSJyZXR1cm4gZnJlZU9JREZvcm1P'));
	@fwrite($fp, base64_decode('blN1Ym1pdCgpOyI+CgkJCQkgICAgRS1NYWlsOiA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImVtYWlsIiB2YWx1ZT0iIi8+PGJyPjxicj4nLgoJCQkJIChSRUNBUFRDSEFfRU5BQkxFRCA/ICc8c2NyaXB0PiBncmVjYXB0Y2hhLnJlbmRlcihkb2N1bWVudC5nZXRFbGVt'));
	@fwrite($fp, base64_decode('ZW50QnlJZCgiZy1yZWNhcHRjaGEiKSwgeyAic2l0ZWtleSIgOiAiJy5SRUNBUFRDSEFfUFVCTElDLiciIH0pOyA8L3NjcmlwdD4nLgoJCQkJICAgICAgICAgICAgICAgICAgICc8ZGl2IGlkPSJnLXJlY2FwdGNoYSIgY2xhc3M9ImctcmVjYXB0Y2hhIiBkYXRhLXNp'));
	@fwrite($fp, base64_decode('dGVrZXk9IicuUkVDQVBUQ0hBX1BVQkxJQy4nIj48L2Rpdj4nIDogJycpLgoJCQkJJyA8YnI+CgkJCQkgICAgPGlucHV0IHR5cGU9InN1Ym1pdCIgdmFsdWU9IlJlcXVlc3QgZnJlZSBPSUQiPgoJCQkJICA8L2Zvcm0+JzsKCgkJCQkkdG9zID0gZmlsZV9nZXRfY29u'));
	@fwrite($fp, base64_decode('dGVudHMoX19ESVJfXyAuICcvdG9zLmh0bWwnKTsKCQkJCSR0b3MgPSBzdHJfcmVwbGFjZSgne3tBRE1JTl9FTUFJTH19JywgT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdhZG1pbl9lbWFpbCcpLCAkdG9zKTsKCQkJCSR0b3MgPSBzdHJfcmVwbGFjZSgne3tS'));
	@fwrite($fp, base64_decode('T09UX09JRH19JywgT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdmcmVlb2lkX3Jvb3Rfb2lkJyksICR0b3MpOwoJCQkJJHRvcyA9IHN0cl9yZXBsYWNlKCd7e1JPT1RfT0lEX0FTTjF9fScsIHNlbGY6OmdldEZyZWVSb290T2lkKCktPmdldEFzbjFOb3RhdGlv'));
	@fwrite($fp, base64_decode('bigpLCAkdG9zKTsKCQkJCSR0b3MgPSBzdHJfcmVwbGFjZSgne3tST09UX09JRF9JUkl9fScsIHNlbGY6OmdldEZyZWVSb290T2lkKCktPmdldElyaU5vdGF0aW9uKCksICR0b3MpOwoJCQkJJG91dFsndGV4dCddIC49ICR0b3M7CgkJCX0gY2F0Y2ggKEV4Y2VwdGlv'));
	@fwrite($fp, base64_decode('biAkZSkgewoJCQkJJG91dFsndGV4dCddID0gIkVycm9yOiAiLiRlLT5nZXRNZXNzYWdlKCk7CgkJCX0KCQl9IGVsc2UgaWYgKGV4cGxvZGUoJyQnLCRpZClbMF0gPT0gJ29pZHBsdXM6Y29tLnZpYXRoaW5rc29mdC5mcmVlb2lkLmFjdGl2YXRlX2ZyZWVvaWQnKSB7'));
	@fwrite($fp, base64_decode('CgkJCSRoYW5kbGVkID0gdHJ1ZTsKCgkJCSRlbWFpbCA9IGV4cGxvZGUoJyQnLCRpZClbMV07CgkJCSR0aW1lc3RhbXAgPSBleHBsb2RlKCckJywkaWQpWzJdOwoJCQkkYXV0aCA9IGV4cGxvZGUoJyQnLCRpZClbM107CgoJCQkkb3V0Wyd0aXRsZSddID0gJ0FjdGl2'));
	@fwrite($fp, base64_decode('YXRlIEZyZWUgT0lEJzsKCQkJJG91dFsnaWNvbiddID0gZmlsZV9leGlzdHMoX19ESVJfXy4nL2ljb25fYmlnLnBuZycpID8gJ3BsdWdpbnMvcHVibGljUGFnZXMvJy5iYXNlbmFtZShfX0RJUl9fKS4nL2ljb25fYmlnLnBuZycgOiAnJzsKCgkJCSRyZXMgPSBPSURw'));
	@fwrite($fp, base64_decode('bHVzOjpkYigpLT5xdWVyeSgic2VsZWN0ICogZnJvbSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4icmEgd2hlcmUgZW1haWwgPSAnIi5PSURwbHVzOjpkYigpLT5yZWFsX2VzY2FwZV9zdHJpbmcoJGVtYWlsKS4iJyIpOwoJCQlpZiAoT0lEcGx1czo6ZGIoKS0+'));
	@fwrite($fp, base64_decode('bnVtX3Jvd3MoJHJlcykgPiAwKSB7CgkJCQkkb3V0WydpY29uJ10gPSAnaW1nL2Vycm9yX2JpZy5wbmcnOwoJCQkJJG91dFsndGV4dCddID0gJ1RoaXMgUkEgaXMgYWxyZWFkeSByZWdpc3RlcmVkLic7IC8vIFRPRE86IGFjdHVhbGx5LCB0aGUgcGVyc29uIG1pZ2h0'));
	@fwrite($fp, base64_decode('IGhhdmUgc29tZXRoaW5nIGVsc2UgKGxpa2UgYSBET0kpIGFuZCB3YW50IHRvIGhhdmUgYSBGcmVlT0lECgkJCX0gZWxzZSB7CgkJCQlpZiAoIU9JRHBsdXM6OmF1dGhVdGlscygpOjp2YWxpZGF0ZUF1dGhLZXkoJ2NvbS52aWF0aGlua3NvZnQuZnJlZW9pZC5hY3Rp'));
	@fwrite($fp, base64_decode('dmF0ZV9mcmVlb2lkOycuJGVtYWlsLic7Jy4kdGltZXN0YW1wLCAkYXV0aCkpIHsKCQkJCQkkb3V0WydpY29uJ10gPSAnaW1nL2Vycm9yX2JpZy5wbmcnOwoJCQkJCSRvdXRbJ3RleHQnXSA9ICdJbnZhbGlkIGF1dGhvcml6YXRpb24uIElzIHRoZSBVUkwgT0s/JzsK'));
	@fwrite($fp, base64_decode('CQkJCX0gZWxzZSB7CgkJCQkJJG91dFsndGV4dCddID0gJzxwPmVNYWlsLUFkZHJlc3M6IDxiPicuJGVtYWlsLic8L2I+PC9wPgoKCQkJCSAgPGZvcm0gaWQ9ImFjdGl2YXRlRnJlZU9JREZvcm0iIG9uc3VibWl0PSJyZXR1cm4gYWN0aXZhdGVGcmVlT0lERm9ybU9u'));
	@fwrite($fp, base64_decode('U3VibWl0KCk7Ij4KCQkJCSAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBpZD0iZW1haWwiIHZhbHVlPSInLmh0bWxlbnRpdGllcygkZW1haWwpLiciLz4KCQkJCSAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBpZD0idGltZXN0YW1wIiB2YWx1ZT0iJy5odG1sZW50aXRp'));
	@fwrite($fp, base64_decode('ZXMoJHRpbWVzdGFtcCkuJyIvPgoJCQkJICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIGlkPSJhdXRoIiB2YWx1ZT0iJy5odG1sZW50aXRpZXMoJGF1dGgpLiciLz4KCgkJCQkgICAgWW91ciBwZXJzb25hbCBuYW1lIG9yIHRoZSBuYW1lIG9mIHlvdXIgZ3JvdXA6PGJy'));
	@fwrite($fp, base64_decode('PjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0icmFfbmFtZSIgdmFsdWU9IiIvPjxicj48YnI+PCEtLSBUT0RPOiBkaXNhYmxlIGF1dG9jb21wbGV0ZSAtLT4KCQkJCSAgICBUaXRsZSBvZiB5b3VyIE9JRCAodXN1YWxseSBlcXVhbCB0byB5b3VyIG5hbWUsIG9wdGlvbmFs'));
	@fwrite($fp, base64_decode('KTo8YnI+PGlucHV0IHR5cGU9InRleHQiIGlkPSJ0aXRsZSIgdmFsdWU9IiIvPjxicj48YnI+CgkJCQkgICAgVVJMIGZvciBtb3JlIGluZm9ybWF0aW9uIGFib3V0IHlvdXIgcHJvamVjdChzKSAob3B0aW9uYWwpOjxicj48aW5wdXQgdHlwZT0idGV4dCIgaWQ9InVy'));
	@fwrite($fp, base64_decode('bCIgdmFsdWU9IiIvPjxicj48YnI+CgoJCQkJICAgIDxsYWJlbCBjbGFzcz0icGFkZGluZ19sYWJlbCI+UGFzc3dvcmQ6PC9sYWJlbD48aW5wdXQgdHlwZT0icGFzc3dvcmQiIGlkPSJwYXNzd29yZDEiIHZhbHVlPSIiLz48YnI+PGJyPgoJCQkJICAgIDxsYWJlbCBj'));
	@fwrite($fp, base64_decode('bGFzcz0icGFkZGluZ19sYWJlbCI+QWdhaW46PC9sYWJlbD48aW5wdXQgdHlwZT0icGFzc3dvcmQiIGlkPSJwYXNzd29yZDIiIHZhbHVlPSIiLz48YnI+PGJyPgoJCQkJICAgIDxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJSZWdpc3RlciI+CgkJCQkgIDwvZm9y'));
	@fwrite($fp, base64_decode('bT4nOwoJCQkJfQoJCQl9CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiB0cmVlKCYkanNvbiwgJHJhX2VtYWlsPW51bGwsICRub25qcz1mYWxzZSwgJHJlcV9nb3RvPScnKSB7CgkJaWYgKGZpbGVfZXhpc3RzKF9fRElSX18uJy90cmVlaWNvbi5wbmcnKSkgewoJCQkk'));
	@fwrite($fp, base64_decode('dHJlZV9pY29uID0gJ3BsdWdpbnMvcHVibGljUGFnZXMvJy5iYXNlbmFtZShfX0RJUl9fKS4nL3RyZWVpY29uLnBuZyc7CgkJfSBlbHNlIHsKCQkJJHRyZWVfaWNvbiA9IG51bGw7IC8vIGRlZmF1bHQgaWNvbiAoZm9sZGVyKQoJCX0KCgkJJGpzb25bXSA9IGFycmF5'));
	@fwrite($fp, base64_decode('KAoJCQknaWQnID0+ICdvaWRwbHVzOmNvbS52aWF0aGlua3NvZnQuZnJlZW9pZCcsCgkJCSdpY29uJyA9PiAkdHJlZV9pY29uLAoJCQkndGV4dCcgPT4gJ1JlZ2lzdGVyIGEgZnJlZSBPSUQnCgkJKTsKCgkJcmV0dXJuIHRydWU7Cgl9CgoJIyAtLS0KCglwcm90ZWN0'));
	@fwrite($fp, base64_decode('ZWQgZnVuY3Rpb24gZnJlZW9pZF9tYXhfaWQoKSB7CgkJJHJlcyA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgaWQgZnJvbSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4ib2JqZWN0cyB3aGVyZSBpZCBsaWtlICciLk9JRHBsdXM6OmRiKCktPnJlYWxf'));
	@fwrite($fp, base64_decode('ZXNjYXBlX3N0cmluZygnb2lkOicuT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdmcmVlb2lkX3Jvb3Rfb2lkJykuJy4lJykuIicgb3JkZXIgYnkgIi5PSURwbHVzOjpkYigpLT5uYXRPcmRlcignaWQnKSk7CgkJJGhpZ2hlc3RfaWQgPSAwOwoJCXdoaWxlICgk'));
	@fwrite($fp, base64_decode('cm93ID0gT0lEcGx1czo6ZGIoKS0+ZmV0Y2hfYXJyYXkoJHJlcykpIHsKCQkJJGFyYyA9IHN1YnN0cl9jb3VudChPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ2ZyZWVvaWRfcm9vdF9vaWQnKSwgJy4nKSsxOwoJCQkkaGlnaGVzdF9pZCA9IGV4cGxvZGUoJy4n'));
	@fwrite($fp, base64_decode('LCRyb3dbJ2lkJ10pWyRhcmNdOwoJCX0KCQlyZXR1cm4gJGhpZ2hlc3RfaWQ7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHRyZWVfc2VhcmNoKCRyZXF1ZXN0KSB7CgkJcmV0dXJuIGZhbHNlOwoJfQp9CgppZiAoT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdmcmVl'));
	@fwrite($fp, base64_decode('b2lkX3Jvb3Rfb2lkJykgIT0gJycpIHsKCU9JRHBsdXM6OnJlZ2lzdGVyUGFnZVBsdWdpbihuZXcgT0lEcGx1c1BhZ2VQdWJsaWNGcmVlT0lEKCkpOwp9Cg=='));
	@fclose($fp);
}
if (!is_file('plugins/publicPages/200_viathinksoft_freeoid/plugin.inc.php')) {
	warn('File has vanished! Will re-create it: plugins/publicPages/200_viathinksoft_freeoid/plugin.inc.php');
	writefile_1();
	if (!is_file('plugins/publicPages/200_viathinksoft_freeoid/plugin.inc.php')) {
		warn('File cannot be created (not existing): plugins/publicPages/200_viathinksoft_freeoid/plugin.inc.php');
	} else if (sha1_file('plugins/publicPages/200_viathinksoft_freeoid/plugin.inc.php') != 'ee52e68e24f8560098c830f1b1c713e59e88e31b') {
		warn('File cannot be created (checksum mismatch): plugins/publicPages/200_viathinksoft_freeoid/plugin.inc.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/publicPages/200_viathinksoft_freeoid/plugin.inc.php', 0644)) {
		warn('Could not change file permissions of plugins/publicPages/200_viathinksoft_freeoid/plugin.inc.php');
	}
} else {
	if (@sha1_file('plugins/publicPages/200_viathinksoft_freeoid/plugin.inc.php') !== 'ee52e68e24f8560098c830f1b1c713e59e88e31b') {
		if (@sha1_file('plugins/publicPages/200_viathinksoft_freeoid/plugin.inc.php') !== '9d4ec93375323ffbd1fd0d2bfe61b598bbb8824c') {
			warn('File was modified. Will overwrite the changes now: plugins/publicPages/200_viathinksoft_freeoid/plugin.inc.php');
			$tmp = pathinfo('plugins/publicPages/200_viathinksoft_freeoid/plugin.inc.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/publicPages/200_viathinksoft_freeoid/plugin.inc.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/publicPages/200_viathinksoft_freeoid/plugin.inc.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('plugins/publicPages/200_viathinksoft_freeoid/plugin.inc.php') !== 'ee52e68e24f8560098c830f1b1c713e59e88e31b') {
			warn('File cannot be written (checksum mismatch): plugins/publicPages/200_viathinksoft_freeoid/plugin.inc.php');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 134\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 134') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

