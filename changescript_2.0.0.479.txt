<?php /* <ViaThinkSoftSignature>
lrATyGxjYkHL5mVbyTUNf1TtDTvzCjlHoSiry2Vd2N5lvsb++CHN7LkASQZfVqWTL
iAQFUjjWwwUS/mFQtM23k2Rn88qA4lT7ww1pAIcp97Bi+f8IbvJz9qK1l3qScRaDh
2y0Zsk3lKmGXQ2ajNXaO6cRqsDL97rIDcixLrOJKH86TFDtU1njD749lLVGPRxzUK
/fcixeR5EJZrHK1N4GpP2iydkW+p2zDQV3CcMnQT57POwRc5CQshRUuWbkZbAfTBS
ygJBFNGKMNAjMYj9xbqm4h86lQJOglInvVc2nuSkeW9zv5zD5PDp8PtSkMq7W1ni1
Yh4nDUAQ7EWryGfb5RJ0iXwvZfcW6hX6dDE5E9iopxGs/MmM3YtmvRYeyPqYmpVmx
3eb/XNd8iBTq0sPDd0u2auf6S1yX7XirQlp6bm96Ey/GbVfhVpwOaSDjNyJkcYfK9
2FepN5wjBJuamjeEP5yB2snG/ckurbGq+7yoMfyh4bZC/IrUEPMAd+//TSw3einBP
iDGhFXH+AUO/rhPfwiuIkK/hkOCbkT/JkvQ6WrWfYTlWmmQKxRDG3ATTEl/NaKCCT
pAJWSAytq6u8Q9e7pObvVQ2dTKGOfPeBLVQajrn4asltAsCtmenZat5ftslS0OE+f
iwG3VOp78mfVP+kI+FHDSBEPOsATZoMBAgvq7Fe6x3n0n218vm9KqI3yXxAV+/vyY
vpHgY3eLw/SZLag1PrhDYWVj8XSH8S7MidT6FpSYkhKyoj8JmWhagZwDYqFG1sbUo
Wr0ddGnyIsXCPprr3nDGWqGHscSSPdIPV6e+r0MCO33U3T76fnicGk20vucvR1a/b
sj6O3id8RVyNSHx6xkr1uEQFFZjMgTY56z1JkaNEmaB9nw/kl9vKG5wke6lKU7Hlt
LprNdnTWVnjNTbZzqKZqj/RrJOzF58rXljiIsL3u2LovSiKmM5BwymslehZ8Z6XZ7
0XKH2mCQZuBbYkykFO121b8iAtzMZm1WQLiU9JjxnCJVe7u1hjldeHySjQmEljIrF
oogWPJRQiMBO9FZ1wzCKSJRh75Vk+6RK+POtrzuvEcL3O5csXdScg3ZHUZglegtKe
AwsVnliocjmlKY9zl+Sskz8tKflBGqjeF1xSNB0/WdkluB3D+OJfMy60fzUJAa8UF
HK48N7bQwUuhb3L98nlsiXqcnYiqaqXLdshSVwzd1fwXt5wl1ahhOaRdj8d4EeNyD
bCHl0cWcL8lRSkdfp+M6h9lDQVAjkmW0cOKwzHYYftFOvZzQb/dE/pv6giW8+TuQe
1vhRUN/HRlAjqdrpLaBbaFTcCQk4xSizdGUJYM5R2l/iQFkAeGe883/lwlSAIfrDx
g==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 478') {
	err('This update can only be applied to OIDplus version 2.0.0.478!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php
function writefile_1() {
	@$fp = fopen('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmNsYXNzIE9JRHBsdXNQYWdlUHVibGljQXR0YWNobWVudHMgZXh0ZW5kcyBPSURwbHVzUGFnZVBsdWdpblB1YmxpYyB7CgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRVcGxvYWREaXIoJGlkKSB7'));
	@fwrite($fp, base64_decode('CgkJJHBhdGggPSByZWFscGF0aChfX0RJUl9fLicvLi4vLi4vLi4vdXNlcmRhdGEvYXR0YWNobWVudHMvJyk7CgoJCSRvYmogPSBPSURwbHVzT2JqZWN0OjpwYXJzZSgkaWQpOwoJCWlmICgkb2JqID09PSBudWxsKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihf'));
	@fwrite($fp, base64_decode('TCgnSW52YWxpZCBvYmplY3QgIiUxIicsJGlkKSk7CgkJaWYgKCRvYmo6Om5zKCkgPT0gJ29pZCcpIHsKCQkJJG9pZCA9ICRvYmotPm5vZGVJZChmYWxzZSk7CgkJfSBlbHNlIHsKCQkJJG9pZCA9IG51bGw7CgkJCSRhbHRfaWRzID0gJG9iai0+Z2V0QWx0SWRzKCk7'));
	@fwrite($fp, base64_decode('CgkJCWZvcmVhY2ggKCRhbHRfaWRzIGFzICRhbHRfaWQpIHsKCQkJCWlmICgkYWx0X2lkLT5nZXROYW1lc3BhY2UoKSA9PSAnb2lkJykgewoJCQkJCSRvaWQgPSAkYWx0X2lkLT5nZXRJZCgpOwoJCQkJCWJyZWFrOyAvLyB3ZSBwcmVmZXIgdGhlIGZpcnN0IE9JRCAo'));
	@fwrite($fp, base64_decode('Zm9yIEdVSURzLCB0aGUgZmlyc3QgT0lEIGlzIHRoZSBPSURwbHVzLU9JRCwgYW5kIHRoZSBzZWNvbmQgT0lEIGlzIHRoZSBVVUlEIE9JRCkKCQkJCX0KCQkJfQoJCX0KCgkJaWYgKCFpc19udWxsKCRvaWQpICYmICgkb2lkICE9ICcnKSkgewoJCQkvLyBGb3IgT0lE'));
	@fwrite($fp, base64_decode('cywgaXQgaXMgdGhlIE9JRCwgZm9yIG90aGVyIGlkZW50aWZpZXJzCgkJCS8vIGl0IGl0IHRoZSBPSUQgYWx0IElEIChnZW5lcmF0ZWQgdXNpbmcgdGhlIFN5c3RlbUlEKQoJCQkkcGF0aCAuPSBzdHJfcmVwbGFjZSgnLicsICdfJywgJG9pZCk7CgoJCX0gZWxzZSB7'));
	@fwrite($fp, base64_decode('CgkJCS8vIENhbiBoYXBwZW4gaWYgeW91IGRvbid0IGhhdmUgYSBzeXN0ZW0gSUQgKGR1ZSB0byBtaXNzaW5nIE9wZW5TU0wgcGx1Z2luKQoJCQkkcGF0aCAuPSBtZDUoJG9iai0+bm9kZUlkKHRydWUpKTsgLy8gd2UgZG9uJ3QgdXNlICRpZCwgYmVjYXVzZSAkb2Jq'));
	@fwrite($fp, base64_decode('LT5ub2RlSWQodHJ1ZSkgaXMgcG9zc2libHkgbW9yZSBjYW5vbmljYWwgdGhhbiAkaWQKCQl9CgoJCXJldHVybiAkcGF0aDsKCX0KCglwcml2YXRlIGZ1bmN0aW9uIHJhTWF5RGVsZXRlKCkgewoJCXJldHVybiBPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ2F0'));
	@fwrite($fp, base64_decode('dGFjaG1lbnRzX2FsbG93X3JhX2RlbGV0ZScsIDApOwoJfQoKCXByaXZhdGUgZnVuY3Rpb24gcmFNYXlVcGxvYWQoKSB7CgkJcmV0dXJuIE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgnYXR0YWNobWVudHNfYWxsb3dfcmFfdXBsb2FkJywgMCk7Cgl9CgoJcHVi'));
	@fwrite($fp, base64_decode('bGljIGZ1bmN0aW9uIGFjdGlvbigkYWN0aW9uSUQsICRwYXJhbXMpIHsKCgkJaWYgKCRhY3Rpb25JRCA9PSAnZGVsZXRlQXR0YWNobWVudCcpIHsKCQkJJGlkID0gJHBhcmFtc1snaWQnXTsKCQkJJG9iaiA9IE9JRHBsdXNPYmplY3Q6OnBhcnNlKCRpZCk7CgkJCWlm'));
	@fwrite($fp, base64_decode('ICgkb2JqID09PSBudWxsKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnSW52YWxpZCBvYmplY3QgIiUxIicsJGlkKSk7CgkJCWlmICghJG9iai0+dXNlckhhc1dyaXRlUmlnaHRzKCkpIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdBdXRoZW50'));
	@fwrite($fp, base64_decode('aWNhdGlvbiBlcnJvci4gUGxlYXNlIGxvZyBpbiBhcyBhZG1pbiwgb3IgYXMgdGhlIFJBIG9mICIlMSIgdG8gdXBsb2FkIGFuIGF0dGFjaG1lbnQuJywkaWQpKTsKCgkJCWlmICghT0lEcGx1czo6YXV0aFV0aWxzKCk6OmlzQWRtaW5Mb2dnZWRJbigpICYmICEkdGhp'));
	@fwrite($fp, base64_decode('cy0+cmFNYXlEZWxldGUoKSkgewoJCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ1RoZSBhZG1pbmlzdHJhdG9yIGhhcyBkaXNhYmxlZCBkZWxldGluZyBhdHRhY2htZW50cyBieSBSQXMuJykpOwoJCQl9CgoJCQkkcmVxX2ZpbGVuYW1lID0gJHBhcmFt'));
	@fwrite($fp, base64_decode('c1snZmlsZW5hbWUnXTsKCQkJaWYgKHN0cnBvcygkcmVxX2ZpbGVuYW1lLCAnLycpICE9PSBmYWxzZSkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0lsbGVnYWwgZmlsZSBuYW1lJykpOwoJCQlpZiAoc3RycG9zKCRyZXFfZmlsZW5hbWUsICdcXCcpICE9'));
	@fwrite($fp, base64_decode('PSBmYWxzZSkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0lsbGVnYWwgZmlsZSBuYW1lJykpOwoJCQlpZiAoc3RycG9zKCRyZXFfZmlsZW5hbWUsICcuLicpICE9PSBmYWxzZSkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0lsbGVnYWwgZmls'));
	@fwrite($fp, base64_decode('ZSBuYW1lJykpOwoJCQlpZiAoc3RycG9zKCRyZXFfZmlsZW5hbWUsIGNocigwKSkgIT09IGZhbHNlKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnSWxsZWdhbCBmaWxlIG5hbWUnKSk7CgoJCQkkdXBsb2FkZGlyID0gc2VsZjo6Z2V0VXBsb2FkRGlyKCRp'));
	@fwrite($fp, base64_decode('ZCk7CgkJCSR1cGxvYWRmaWxlID0gJHVwbG9hZGRpciAuICcvJyAuIGJhc2VuYW1lKCRyZXFfZmlsZW5hbWUpOwoKCQkJaWYgKCFmaWxlX2V4aXN0cygkdXBsb2FkZmlsZSkpIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdGaWxlIGRvZXMgbm90IGV4aXN0'));
	@fwrite($fp, base64_decode('JykpOwoJCQlAdW5saW5rKCR1cGxvYWRmaWxlKTsKCQkJaWYgKGZpbGVfZXhpc3RzKCR1cGxvYWRmaWxlKSkgewoJCQkJT0lEcGx1czo6bG9nZ2VyKCktPmxvZygiW0VSUl1PSUQoJGlkKStbRVJSXUEhIiwgIkF0dGFjaG1lbnQgZmlsZSAnIi5iYXNlbmFtZSgkdXBs'));
	@fwrite($fp, base64_decode('b2FkZmlsZSkuIicgY291bGQgbm90IGJlIGRlbGV0ZWQgZnJvbSBvYmplY3QgJyRpZCcgKHByb2JsZW0gd2l0aCBwZXJtaXNzaW9ucz8pIik7CgkJCQkkbXNnID0gX0woJ0F0dGFjaG1lbnQgZmlsZSAiJTEiIGNvdWxkIG5vdCBiZSBkZWxldGVkIGZyb20gb2JqZWN0'));
	@fwrite($fp, base64_decode('ICIlMiIgKHByb2JsZW0gd2l0aCBwZXJtaXNzaW9ucz8pJyxiYXNlbmFtZSgkdXBsb2FkZmlsZSksJGlkKTsKCQkJCWlmIChPSURwbHVzOjphdXRoVXRpbHMoKTo6aXNBZG1pbkxvZ2dlZEluKCkpIHsKCQkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigkbXNn'));
	@fwrite($fp, base64_decode('KTsKCQkJCX0gZWxzZSB7CgkJCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oJG1zZy4nLiAnLl9MKCdQbGVhc2UgY29udGFjdCB0aGUgc3lzdGVtIGFkbWluaXN0cmF0b3IuJykpOwoJCQkJfQoJCQl9IGVsc2UgewoJCQkJLy8gSWYgaXQgd2FzIHRoZSBsYXN0'));
	@fwrite($fp, base64_decode('IGZpbGUsIGRlbGV0ZSB0aGUgZW1wdHkgZGlyZWN0b3J5CgkJCQkkYXJ5ID0gZ2xvYigkdXBsb2FkZGlyIC4gJy8nIC4gJyonKTsKCQkJCWlmIChjb3VudCgkYXJ5KSA9PSAwKSBAcm1kaXIoJHVwbG9hZGRpcik7CgkJCX0KCgkJCU9JRHBsdXM6OmxvZ2dlcigpLT5s'));
	@fwrite($fp, base64_decode('b2coIltPS11PSUQoJGlkKStbP0lORk8vIU9LXU9JRFJBKCRpZCk/L1s/SU5GTy8hT0tdQT8iLCAiRGVsZXRlZCBhdHRhY2htZW50ICciLmJhc2VuYW1lKCR1cGxvYWRmaWxlKS4iJyBmcm9tIG9iamVjdCAnJGlkJyIpOwoKCQkJcmV0dXJuIGFycmF5KCJzdGF0dXMi'));
	@fwrite($fp, base64_decode('ID0+IDApOwoKCQl9IGVsc2UgaWYgKCRhY3Rpb25JRCA9PSAndXBsb2FkQXR0YWNobWVudCcpIHsKCgkJCSRpZCA9ICRwYXJhbXNbJ2lkJ107CgkJCSRvYmogPSBPSURwbHVzT2JqZWN0OjpwYXJzZSgkaWQpOwoJCQlpZiAoJG9iaiA9PT0gbnVsbCkgdGhyb3cgbmV3'));
	@fwrite($fp, base64_decode('IE9JRHBsdXNFeGNlcHRpb24oX0woJ0ludmFsaWQgb2JqZWN0ICIlMSInLCRpZCkpOwoJCQlpZiAoISRvYmotPnVzZXJIYXNXcml0ZVJpZ2h0cygpKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnQXV0aGVudGljYXRpb24gZXJyb3IuIFBsZWFzZSBsb2cg'));
	@fwrite($fp, base64_decode('aW4gYXMgYWRtaW4sIG9yIGFzIHRoZSBSQSBvZiAiJTEiIHRvIHVwbG9hZCBhbiBhdHRhY2htZW50LicsJGlkKSk7CgoJCQlpZiAoIU9JRHBsdXM6OmF1dGhVdGlscygpOjppc0FkbWluTG9nZ2VkSW4oKSAmJiAhJHRoaXMtPnJhTWF5VXBsb2FkKCkpIHsKCQkJCXRo'));
	@fwrite($fp, base64_decode('cm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdUaGUgYWRtaW5pc3RyYXRvciBoYXMgZGlzYWJsZWQgdXBsb2FkaW5nIGF0dGFjaG1lbnRzIGJ5IFJBcy4nKSk7CgkJCX0KCgkJCWlmICghaXNzZXQoJF9GSUxFU1sndXNlcmZpbGUnXSkpIHsKCQkJCXRocm93IG5l'));
	@fwrite($fp, base64_decode('dyBPSURwbHVzRXhjZXB0aW9uKF9MKCdQbGVhc2UgY2hvb3NlIGEgZmlsZS4nKSk7CgkJCX0KCgkJCWlmICghT0lEcGx1czo6YXV0aFV0aWxzKCk6OmlzQWRtaW5Mb2dnZWRJbigpKSB7CgkJCQkkYmFubmVkID0gZXhwbG9kZSgnLCcsIE9JRHBsdXM6OmNvbmZpZygp'));
	@fwrite($fp, base64_decode('LT5nZXRWYWx1ZSgnYXR0YWNobWVudHNfYmxvY2tfZXh0ZW5zaW9ucycsICcnKSk7CgkJCQlmb3JlYWNoICgkYmFubmVkIGFzICRleHQpIHsKCQkJCQkkZXh0ID0gdHJpbSgkZXh0KTsKCQkJCQlpZiAoJGV4dCA9PSAnJykgY29udGludWU7CgkJCQkJaWYgKHN0cnRv'));
	@fwrite($fp, base64_decode('bG93ZXIoc3Vic3RyKGJhc2VuYW1lKCRfRklMRVNbJ3VzZXJmaWxlJ11bJ25hbWUnXSksIC1zdHJsZW4oJGV4dCktMSkpID09IHN0cnRvbG93ZXIoJy4nLiRleHQpKSB7CgkJCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdUaGUgZmlsZSBleHRlbnNp'));
	@fwrite($fp, base64_decode('b24gIiUxIiBpcyBiYW5uZWQgYnkgdGhlIGFkbWluaXN0cmF0b3IgKGl0IGNhbiBiZSB1cGxvYWRlZCBieSB0aGUgYWRtaW5pc3RyYXRvciB0aG91Z2gpJywkZXh0KSk7CgkJCQkJfQoJCQkJfQoJCQl9CgoJCQkkcmVxX2ZpbGVuYW1lID0gJF9GSUxFU1sndXNlcmZp'));
	@fwrite($fp, base64_decode('bGUnXVsnbmFtZSddOwoJCQlpZiAoc3RycG9zKCRyZXFfZmlsZW5hbWUsICcvJykgIT09IGZhbHNlKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnSWxsZWdhbCBmaWxlIG5hbWUnKSk7CgkJCWlmIChzdHJwb3MoJHJlcV9maWxlbmFtZSwgJ1xcJykgIT09'));
	@fwrite($fp, base64_decode('IGZhbHNlKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnSWxsZWdhbCBmaWxlIG5hbWUnKSk7CgkJCWlmIChzdHJwb3MoJHJlcV9maWxlbmFtZSwgJy4uJykgIT09IGZhbHNlKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnSWxsZWdhbCBmaWxl'));
	@fwrite($fp, base64_decode('IG5hbWUnKSk7CgkJCWlmIChzdHJwb3MoJHJlcV9maWxlbmFtZSwgY2hyKDApKSAhPT0gZmFsc2UpIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdJbGxlZ2FsIGZpbGUgbmFtZScpKTsKCgkJCSR1cGxvYWRkaXIgPSBzZWxmOjpnZXRVcGxvYWREaXIoJGlk'));
	@fwrite($fp, base64_decode('KTsKCQkJJHVwbG9hZGZpbGUgPSAkdXBsb2FkZGlyIC4gJy8nIC4gYmFzZW5hbWUoJHJlcV9maWxlbmFtZSk7CgoJCQlpZiAoIWlzX2RpcigkdXBsb2FkZGlyKSkgewoJCQkJQG1rZGlyKCR1cGxvYWRkaXIsIDA3NzcsIHRydWUpOwoJCQkJaWYgKCFpc19kaXIoJHVw'));
	@fwrite($fp, base64_decode('bG9hZGRpcikpIHsKCQkJCQlPSURwbHVzOjpsb2dnZXIoKS0+bG9nKCJbRVJSXU9JRCgkaWQpK1tFUlJdQSEiLCAiVXBsb2FkIGF0dGFjaG1lbnQgJyIuYmFzZW5hbWUoJHVwbG9hZGZpbGUpLiInIHRvIG9iamVjdCAnJGlkJyBmYWlsZWQ6IENhbm5vdCBjcmVhdGUg'));
	@fwrite($fp, base64_decode('ZGlyZWN0b3J5ICciLmJhc2VuYW1lKCR1cGxvYWRkaXIpLiInIChwcm9ibGVtIHdpdGggcGVybWlzc2lvbnM/KSIpOwoJCQkJCSRtc2cgPSBfTCgnVXBsb2FkIGF0dGFjaG1lbnQgIiUxIiB0byBvYmplY3QgIiUyIiBmYWlsZWQnLGJhc2VuYW1lKCR1cGxvYWRmaWxl'));
	@fwrite($fp, base64_decode('KSwkaWQpLic6ICcuX0woJ0Nhbm5vdCBjcmVhdGUgZGlyZWN0b3J5ICIlMSIgKHByb2JsZW0gd2l0aCBwZXJtaXNzaW9ucz8pJyxiYXNlbmFtZSgkdXBsb2FkZGlyKSk7CgkJCQkJaWYgKE9JRHBsdXM6OmF1dGhVdGlscygpOjppc0FkbWluTG9nZ2VkSW4oKSkgewoJ'));
	@fwrite($fp, base64_decode('CQkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigkbXNnKTsKCQkJCQl9IGVsc2UgewoJCQkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigkbXNnLicuICcuX0woJ1BsZWFzZSBjb250YWN0IHRoZSBzeXN0ZW0gYWRtaW5pc3RyYXRvci4nKSk7CgkJCQkJ'));
	@fwrite($fp, base64_decode('fQoJCQkJfQoJCQl9CgoJCQlpZiAoIUBtb3ZlX3VwbG9hZGVkX2ZpbGUoJF9GSUxFU1sndXNlcmZpbGUnXVsndG1wX25hbWUnXSwgJHVwbG9hZGZpbGUpKSB7CgkJCQlPSURwbHVzOjpsb2dnZXIoKS0+bG9nKCJbRVJSXU9JRCgkaWQpK1tFUlJdQSEiLCAiVXBsb2Fk'));
	@fwrite($fp, base64_decode('IGF0dGFjaG1lbnQgJyIuYmFzZW5hbWUoJHVwbG9hZGZpbGUpLiInIHRvIG9iamVjdCAnJGlkJyBmYWlsZWQ6IENhbm5vdCBtb3ZlIHVwbG9hZGVkIGZpbGUgaW50byBkaXJlY3RvcnkgKHByb2JsZW0gd2l0aCBwZXJtaXNzaW9ucz8pIik7CgkJCQkkbXNnID0gX0wo'));
	@fwrite($fp, base64_decode('J1VwbG9hZCBhdHRhY2htZW50ICIlMSIgdG8gb2JqZWN0ICIlMiIgZmFpbGVkJyxiYXNlbmFtZSgkdXBsb2FkZmlsZSksJGlkKS4nOiAnLl9MKCdDYW5ub3QgbW92ZSB1cGxvYWRlZCBmaWxlIGludG8gZGlyZWN0b3J5IChwcm9ibGVtIHdpdGggcGVybWlzc2lvbnM/'));
	@fwrite($fp, base64_decode('KScpOwoJCQkJaWYgKE9JRHBsdXM6OmF1dGhVdGlscygpOjppc0FkbWluTG9nZ2VkSW4oKSkgewoJCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKCRtc2cpOwoJCQkJfSBlbHNlIHsKCQkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigkbXNnLicuICcu'));
	@fwrite($fp, base64_decode('X0woJ1BsZWFzZSBjb250YWN0IHRoZSBzeXN0ZW0gYWRtaW5pc3RyYXRvci4nKSk7CgkJCQl9CgkJCX0KCgkJCU9JRHBsdXM6OmxvZ2dlcigpLT5sb2coIltPS11PSUQoJGlkKStbP0lORk8vIU9LXU9JRFJBKCRpZCk/L1s/SU5GTy8hT0tdQT8iLCAiVXBsb2FkZWQg'));
	@fwrite($fp, base64_decode('YXR0YWNobWVudCAnIi5iYXNlbmFtZSgkdXBsb2FkZmlsZSkuIicgdG8gb2JqZWN0ICckaWQnIik7CgoJCQlyZXR1cm4gYXJyYXkoInN0YXR1cyIgPT4gMCk7CgkJfSBlbHNlIHsKCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ1Vua25vd24gYWN0aW9u'));
	@fwrite($fp, base64_decode('IElEJykpOwoJCX0KCX0KCglwdWJsaWMgZnVuY3Rpb24gaW5pdCgkaHRtbD10cnVlKSB7CgkJT0lEcGx1czo6Y29uZmlnKCktPnByZXBhcmVDb25maWdLZXkoJ2F0dGFjaG1lbnRzX2Jsb2NrX2V4dGVuc2lvbnMnLCAnQmxvY2sgZmlsZSBuYW1lIGV4dGVuc2lvbnMg'));
	@fwrite($fp, base64_decode('YmVpbmcgdXNlZCBpbiBmaWxlIGF0dGFjaG1lbnRzIChjb21tYSBzZXBhcmF0ZWQpJywgJ2V4ZSxzY3IscGlmLGJhdCxjb20sdmJzLGNtZCcsIE9JRHBsdXNDb25maWc6OlBST1RFQ1RJT05fRURJVEFCTEUsIGZ1bmN0aW9uKCR2YWx1ZSkgewoJCX0pOwoJCU9JRHBs'));
	@fwrite($fp, base64_decode('dXM6OmNvbmZpZygpLT5wcmVwYXJlQ29uZmlnS2V5KCdhdHRhY2htZW50c19hbGxvd19yYV9kZWxldGUnLCAnQWxsb3cgdGhhdCBSQXMgZGVsZXRlIGZpbGUgYXR0YWNobWVudHM/ICgwPW5vLCAxPXllcyknLCAnMCcsIE9JRHBsdXNDb25maWc6OlBST1RFQ1RJT05f'));
	@fwrite($fp, base64_decode('RURJVEFCTEUsIGZ1bmN0aW9uKCR2YWx1ZSkgewoJCQlpZiAoIWlzX251bWVyaWMoJHZhbHVlKSB8fCAoJHZhbHVlIDwgMCkgfHwgKCR2YWx1ZSA+IDEpKSB7CgkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnUGxlYXNlIGVudGVyIGEgdmFsaWQgdmFs'));
	@fwrite($fp, base64_decode('dWUgKDA9bm8sIDE9eWVzKS4nKSk7CgkJCX0KCQl9KTsKCQlPSURwbHVzOjpjb25maWcoKS0+cHJlcGFyZUNvbmZpZ0tleSgnYXR0YWNobWVudHNfYWxsb3dfcmFfdXBsb2FkJywgJ0FsbG93IHRoYXQgUkFzIHVwbG9hZCBmaWxlIGF0dGFjaG1lbnRzPyAoMD1ubywg'));
	@fwrite($fp, base64_decode('MT15ZXMpJywgJzAnLCBPSURwbHVzQ29uZmlnOjpQUk9URUNUSU9OX0VESVRBQkxFLCBmdW5jdGlvbigkdmFsdWUpIHsKCQkJaWYgKCFpc19udW1lcmljKCR2YWx1ZSkgfHwgKCR2YWx1ZSA8IDApIHx8ICgkdmFsdWUgPiAxKSkgewoJCQkJdGhyb3cgbmV3IE9JRHBs'));
	@fwrite($fp, base64_decode('dXNFeGNlcHRpb24oX0woJ1BsZWFzZSBlbnRlciBhIHZhbGlkIHZhbHVlICgwPW5vLCAxPXllcykuJykpOwoJCQl9CgkJfSk7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGd1aSgkaWQsICYkb3V0LCAmJGhhbmRsZWQpIHsKCQkvLyBOb3RoaW5nCgl9CgoJcHVibGljIGZ1'));
	@fwrite($fp, base64_decode('bmN0aW9uIHB1YmxpY1NpdGVtYXAoJiRvdXQpIHsKCQkvLyBOb3RoaW5nCgl9CgoJcHVibGljIGZ1bmN0aW9uIHRyZWUoJiRqc29uLCAkcmFfZW1haWw9bnVsbCwgJG5vbmpzPWZhbHNlLCAkcmVxX2dvdG89JycpIHsKCQlyZXR1cm4gZmFsc2U7Cgl9CgoJcHJpdmF0'));
	@fwrite($fp, base64_decode('ZSBzdGF0aWMgZnVuY3Rpb24gY29udmVydF9maWxlc2l6ZSgkYnl0ZXMsICRkZWNpbWFscyA9IDIpewoJCSRzaXplID0gYXJyYXkoX0woJ0J5dGVzJyksX0woJ0tpQicpLF9MKCdNaUInKSxfTCgnR2lCJyksX0woJ1RpQicpLF9MKCdQaUInKSxfTCgnRWlCJyksX0wo'));
	@fwrite($fp, base64_decode('J1ppQicpLF9MKCdZaUInKSk7CgkJJGZhY3RvciA9IGZsb29yKChzdHJsZW4oJGJ5dGVzKSAtIDEpIC8gMyk7CgkJcmV0dXJuIHNwcmludGYoIiUueyRkZWNpbWFsc31mIiwgJGJ5dGVzIC8gcG93KDEwMjQsICRmYWN0b3IpKSAuICcgJyAuIEAkc2l6ZVskZmFjdG9y'));
	@fwrite($fp, base64_decode('XTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gaW1wbGVtZW50c0ZlYXR1cmUoJGlkKSB7CgkJaWYgKHN0cnRvbG93ZXIoJGlkKSA9PSAnMS4zLjYuMS40LjEuMzc0NzYuMi41LjIuMy4yJykgcmV0dXJuIHRydWU7IC8vIG1vZGlmeUNvbnRlbnQKCQlpZiAoc3RydG9sb3dl'));
	@fwrite($fp, base64_decode('cigkaWQpID09ICcxLjMuNi4xLjQuMS4zNzQ3Ni4yLjUuMi4zLjMnKSByZXR1cm4gdHJ1ZTsgLy8gYmVmb3JlT2JqZWN0KiwgYWZ0ZXJPYmplY3QqCgkJaWYgKHN0cnRvbG93ZXIoJGlkKSA9PSAnMS4zLjYuMS40LjEuMzc0NzYuMi41LjIuMy40JykgcmV0dXJuIHRy'));
	@fwrite($fp, base64_decode('dWU7IC8vIHdob2lzKkF0dHJpYnV0ZXMKCQlyZXR1cm4gZmFsc2U7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIG1vZGlmeUNvbnRlbnQoJGlkLCAmJHRpdGxlLCAmJGljb24sICYkdGV4dCkgewoJCS8vIEludGVyZmFjZSAxLjMuNi4xLjQuMS4zNzQ3Ni4yLjUuMi4zLjIK'));
	@fwrite($fp, base64_decode('CgkJJGZpbGVzID0gZ2xvYihzZWxmOjpnZXRVcGxvYWREaXIoJGlkKS4nLycuJyonKTsKCQkkZG9zaG93ID0gZmFsc2U7CgkJJG91dHB1dCA9ICcnOwoJCSRmb3VuZF9maWxlcyA9IGZhbHNlOwoKCQkkb2JqID0gT0lEcGx1c09iamVjdDo6cGFyc2UoJGlkKTsKCQlp'));
	@fwrite($fp, base64_decode('ZiAoJG9iaiA9PT0gbnVsbCkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0ludmFsaWQgb2JqZWN0ICIlMSInLCRpZCkpOwoJCSRjYW5fdXBsb2FkID0gT0lEcGx1czo6YXV0aFV0aWxzKCk6OmlzQWRtaW5Mb2dnZWRJbigpIHx8ICgkdGhpcy0+cmFNYXlV'));
	@fwrite($fp, base64_decode('cGxvYWQoKSAmJiAkb2JqLT51c2VySGFzV3JpdGVSaWdodHMoKSk7CgkJJGNhbl9kZWxldGUgPSBPSURwbHVzOjphdXRoVXRpbHMoKTo6aXNBZG1pbkxvZ2dlZEluKCkgfHwgKCR0aGlzLT5yYU1heURlbGV0ZSgpICYmICRvYmotPnVzZXJIYXNXcml0ZVJpZ2h0cygp'));
	@fwrite($fp, base64_decode('KTsKCgkJJG91dHB1dCAuPSAnPGgyPicuX0woJ0ZpbGUgYXR0YWNobWVudHMnKS4nPC9oMj4nOwoJCSRvdXRwdXQgLj0gJzxkaXYgY2xhc3M9ImNvbnRhaW5lciBib3giPic7CgoJCWlmIChPSURwbHVzOjphdXRoVXRpbHMoKTo6aXNBZG1pbkxvZ2dlZEluKCkpIHsK'));
	@fwrite($fp, base64_decode('CQkJJG91dHB1dCAuPSAnPHA+Jy5fTCgnQWRtaW4gaW5mbzogVGhlIGRpcmVjdG9yeSBpcyAlMScsJzxiPicuaHRtbGVudGl0aWVzKHNlbGY6OmdldFVwbG9hZERpcigkaWQpKS4nPC9iPicpLic8L3A+JzsKCQkJJGRvc2hvdyA9IHRydWU7CgkJfQoKCQkkb3V0cHV0'));
	@fwrite($fp, base64_decode('IC49ICc8ZGl2IGlkPSJmaWxlYXR0YWNobWVudHNfdGFibGUiIGNsYXNzPSJ0YWJsZS1yZXNwb25zaXZlIj4nOwoJCSRvdXRwdXQgLj0gJzx0YWJsZSBjbGFzcz0idGFibGUgdGFibGUtYm9yZGVyZWQgdGFibGUtc3RyaXBlZCI+JzsKCQkkb3V0cHV0IC49ICc8dHI+'));
	@fwrite($fp, base64_decode('JzsKCQkkb3V0cHV0IC49ICc8dGg+Jy5fTCgnRmlsZW5hbWUnKS4nPC90aD4nOwoJCSRvdXRwdXQgLj0gJzx0aD4nLl9MKCdTaXplJykuJzwvdGg+JzsKCQkkb3V0cHV0IC49ICc8dGg+Jy5fTCgnRmlsZSB0eXBlJykuJzwvdGg+JzsKCQkkb3V0cHV0IC49ICc8dGg+'));
	@fwrite($fp, base64_decode('Jy5fTCgnRG93bmxvYWQnKS4nPC90aD4nOwoJCWlmICgkY2FuX2RlbGV0ZSkgJG91dHB1dCAuPSAnPHRoPicuX0woJ0RlbGV0ZScpLic8L3RoPic7CgkJJG91dHB1dCAuPSAnPC90cj4nOwoJCWZvcmVhY2ggKCRmaWxlcyBhcyAkZmlsZSkgewoJCQlpZiAoaXNfZGly'));
	@fwrite($fp, base64_decode('KCRmaWxlKSkgY29udGludWU7CgoJCQkkb3V0cHV0IC49ICc8dHI+JzsKCQkJJG91dHB1dCAuPSAnPHRkPicuaHRtbGVudGl0aWVzKGJhc2VuYW1lKCRmaWxlKSkuJzwvdGQ+JzsKCQkJJG91dHB1dCAuPSAnPHRkPicuaHRtbGVudGl0aWVzKHNlbGY6OmNvbnZlcnRf'));
	@fwrite($fp, base64_decode('ZmlsZXNpemUoZmlsZXNpemUoJGZpbGUpLCAwKSkuJzwvdGQ+JzsKCQkJJGxvb2t1cF9maWxlcyA9IGFycmF5KAoJCQkJX19ESVJfXy4nLy4uLy4uLy4uL3VzZXJkYXRhL2F0dGFjaG1lbnRzL2ZpbGV0eXBlcyQnLk9JRHBsdXM6OmdldEN1cnJlbnRMYW5nKCkuJy5j'));
	@fwrite($fp, base64_decode('b25mJywKCQkJCV9fRElSX18uJy8uLi8uLi8uLi91c2VyZGF0YS9hdHRhY2htZW50cy9maWxldHlwZXMuY29uZicsCgkJCQlfX0RJUl9fLicvLi4vLi4vLi4vM3AvdnRzX2ZpbGVmb3JtYXRzL2ZpbGV0eXBlcyQnLk9JRHBsdXM6OmdldEN1cnJlbnRMYW5nKCkuJy5s'));
	@fwrite($fp, base64_decode('b2NhbCcsIC8vIG5vdCByZWNvbW1lbmRlZAoJCQkJX19ESVJfXy4nLy4uLy4uLy4uLzNwL3Z0c19maWxlZm9ybWF0cy9maWxldHlwZXMubG9jYWwnLCAvLyBub3QgcmVjb21tZW5kZWQKCQkJCV9fRElSX18uJy8uLi8uLi8uLi8zcC92dHNfZmlsZWZvcm1hdHMvZmls'));
	@fwrite($fp, base64_decode('ZXR5cGVzJCcuT0lEcGx1czo6Z2V0Q3VycmVudExhbmcoKS4nLmNvbmYnLAoJCQkJX19ESVJfXy4nLy4uLy4uLy4uLzNwL3Z0c19maWxlZm9ybWF0cy9maWxldHlwZXMuY29uZicKCQkJKTsKCQkJJG91dHB1dCAuPSAnPHRkPicuaHRtbGVudGl0aWVzKFZ0c0ZpbGVU'));
	@fwrite($fp, base64_decode('eXBlRGV0ZWN0OjpnZXREZXNjcmlwdGlvbigkZmlsZSwgJGxvb2t1cF9maWxlcykpLic8L3RkPic7CgoJCQkkb3V0cHV0IC49ICcgICAgIDx0ZD48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgbmFtZT0iZG93bmxvYWRfJy5tZDUoJGZpbGUpLiciIGlkPSJkb3dubG9hZF8n'));
	@fwrite($fp, base64_decode('Lm1kNSgkZmlsZSkuJyIgY2xhc3M9ImJ0biBidG4tc3VjY2VzcyBidG4teHMgZG93bmxvYWQiIG9uY2xpY2s9ImRvd25sb2FkQXR0YWNobWVudCgnLmpzX2VzY2FwZShPSURwbHVzOjp3ZWJwYXRoKF9fRElSX18pKS4nLCBjdXJyZW50X25vZGUsJy5qc19lc2NhcGUo'));
	@fwrite($fp, base64_decode('YmFzZW5hbWUoJGZpbGUpKS4nKSI+Jy5fTCgnRG93bmxvYWQnKS4nPC9idXR0b24+PC90ZD4nOwoJCQlpZiAoJGNhbl9kZWxldGUpIHsKCQkJCSRvdXRwdXQgLj0gJyAgICAgPHRkPjxidXR0b24gdHlwZT0iYnV0dG9uIiBuYW1lPSJkZWxldGVfJy5tZDUoJGZpbGUp'));
	@fwrite($fp, base64_decode('LiciIGlkPSJkZWxldGVfJy5tZDUoJGZpbGUpLiciIGNsYXNzPSJidG4gYnRuLWRhbmdlciBidG4teHMgZGVsZXRlIiBvbmNsaWNrPSJkZWxldGVBdHRhY2htZW50KGN1cnJlbnRfbm9kZSwnLmpzX2VzY2FwZShiYXNlbmFtZSgkZmlsZSkpLicpIj4nLl9MKCdEZWxl'));
	@fwrite($fp, base64_decode('dGUnKS4nPC9idXR0b24+PC90ZD4nOwoJCQl9CgoJCQkkb3V0cHV0IC49ICc8L3RyPic7CgkJCSRkb3Nob3cgPSB0cnVlOwoJCQkkZm91bmRfZmlsZXMgPSB0cnVlOwoJCX0KCgkJaWYgKCEkZm91bmRfZmlsZXMpICRvdXRwdXQgLj0gJzx0cj48dGQgY29sc3Bhbj0i'));
	@fwrite($fp, base64_decode('Jy4oJGNhbl9kZWxldGUgPyA1IDogNCkuJyI+PGk+Jy5fTCgnTm8gYXR0YWNobWVudHMnKS4nPC9pPjwvdGQ+PC90cj4nOwoKCQkkb3V0cHV0IC49ICc8L3RhYmxlPjwvZGl2Pic7CgoJCWlmICgkY2FuX3VwbG9hZCkgewoJCQkkb3V0cHV0IC49ICc8Zm9ybSBhY3Rp'));
	@fwrite($fp, base64_decode('b249ImphdmFzY3JpcHQ6dm9pZCgwKTsiIG9uc3VibWl0PSJyZXR1cm4gdXBsb2FkQXR0YWNobWVudE9uU3VibWl0KHRoaXMpOyIgZW5jdHlwZT0ibXVsdGlwYXJ0L2Zvcm0tZGF0YSIgaWQ9InVwbG9hZEF0dGFjaG1lbnRGb3JtIj4nOwoJCQkkb3V0cHV0IC49ICc8'));
	@fwrite($fp, base64_decode('aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJpZCIgdmFsdWU9IicuaHRtbGVudGl0aWVzKCRpZCkuJyI+JzsKCQkJJG91dHB1dCAuPSAnPGRpdj4nLl9MKCdBZGQgYSBmaWxlIGF0dGFjaG1lbnQnKS4nOjxpbnB1dCB0eXBlPSJmaWxlIiBuYW1lPSJ1c2VyZmlsZSIg'));
	@fwrite($fp, base64_decode('dmFsdWU9IiIgaWQ9ImZpbGVBdHRhY2htZW50Ij4nOwoJCQkkb3V0cHV0IC49ICc8YnI+PGlucHV0IHR5cGU9InN1Ym1pdCIgdmFsdWU9IicuX0woJ1VwbG9hZCcpLiciPjwvZGl2Pic7CgkJCSRvdXRwdXQgLj0gJzwvZm9ybT4nOwoJCQkkZG9zaG93ID0gdHJ1ZTsK'));
	@fwrite($fp, base64_decode('CQl9CgoJCSRvdXRwdXQgLj0gJzwvZGl2Pic7CgoJCWlmICgkZG9zaG93KSAkdGV4dCAuPSAkb3V0cHV0OwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBiZWZvcmVPYmplY3REZWxldGUoJGlkKSB7fSAvLyBJbnRlcmZhY2UgMS4zLjYuMS40LjEuMzc0NzYuMi41LjIuMy4z'));
	@fwrite($fp, base64_decode('CglwdWJsaWMgZnVuY3Rpb24gYWZ0ZXJPYmplY3REZWxldGUoJGlkKSB7CgkJLy8gSW50ZXJmYWNlIDEuMy42LjEuNC4xLjM3NDc2LjIuNS4yLjMuMwoJCS8vIERlbGV0ZSB0aGUgYXR0YWNobWVudCBmb2xkZXIgaW5jbHVkaW5nIGFsbCBmaWxlcyBpbiBpdCAobm90'));
	@fwrite($fp, base64_decode('ZTogU3ViZm9sZGVycyBhcmUgbm90IHBvc3NpYmxlKQoJCSR1cGxvYWRkaXIgPSBzZWxmOjpnZXRVcGxvYWREaXIoJGlkKTsKCQlpZiAoJHVwbG9hZGRpciAhPSAnJykgewoJCQkkYXJ5ID0gZ2xvYigkdXBsb2FkZGlyIC4gJy8nIC4gJyonKTsKCQkJZm9yZWFjaCAo'));
	@fwrite($fp, base64_decode('JGFyeSBhcyAkYSkgQHVubGluaygkYSk7CgkJCUBybWRpcigkdXBsb2FkZGlyKTsKCQkJaWYgKGlzX2RpcigkdXBsb2FkZGlyKSkgewoJCQkJT0lEcGx1czo6bG9nZ2VyKCktPmxvZygiW1dBUk5dT0lEKCRpZCkrW1dBUk5dQSEiLCAiQXR0YWNobWVudCBkaXJlY3Rv'));
	@fwrite($fp, base64_decode('cnkgJyR1cGxvYWRkaXInIGNvdWxkIG5vdCBiZSBkZWxldGVkIGR1cmluZyB0aGUgZGVsZXRpb24gb2YgdGhlIE9JRCIpOwoJCQl9CgkJfQoJfQoJcHVibGljIGZ1bmN0aW9uIGJlZm9yZU9iamVjdFVwZGF0ZVN1cGVyaW9yKCRpZCwgJiRwYXJhbXMpIHt9IC8vIElu'));
	@fwrite($fp, base64_decode('dGVyZmFjZSAxLjMuNi4xLjQuMS4zNzQ3Ni4yLjUuMi4zLjMKCXB1YmxpYyBmdW5jdGlvbiBhZnRlck9iamVjdFVwZGF0ZVN1cGVyaW9yKCRpZCwgJiRwYXJhbXMpIHt9IC8vIEludGVyZmFjZSAxLjMuNi4xLjQuMS4zNzQ3Ni4yLjUuMi4zLjMKCXB1YmxpYyBmdW5j'));
	@fwrite($fp, base64_decode('dGlvbiBiZWZvcmVPYmplY3RVcGRhdGVTZWxmKCRpZCwgJiRwYXJhbXMpIHt9IC8vIEludGVyZmFjZSAxLjMuNi4xLjQuMS4zNzQ3Ni4yLjUuMi4zLjMKCXB1YmxpYyBmdW5jdGlvbiBhZnRlck9iamVjdFVwZGF0ZVNlbGYoJGlkLCAmJHBhcmFtcykge30gLy8gSW50'));
	@fwrite($fp, base64_decode('ZXJmYWNlIDEuMy42LjEuNC4xLjM3NDc2LjIuNS4yLjMuMwoJcHVibGljIGZ1bmN0aW9uIGJlZm9yZU9iamVjdEluc2VydCgkaWQsICYkcGFyYW1zKSB7fSAvLyBJbnRlcmZhY2UgMS4zLjYuMS40LjEuMzc0NzYuMi41LjIuMy4zCglwdWJsaWMgZnVuY3Rpb24gYWZ0'));
	@fwrite($fp, base64_decode('ZXJPYmplY3RJbnNlcnQoJGlkLCAmJHBhcmFtcykge30gLy8gSW50ZXJmYWNlIDEuMy42LjEuNC4xLjM3NDc2LjIuNS4yLjMuMwoKCXB1YmxpYyBmdW5jdGlvbiB0cmVlX3NlYXJjaCgkcmVxdWVzdCkgewoJCXJldHVybiBmYWxzZTsKCX0KCglwdWJsaWMgZnVuY3Rp'));
	@fwrite($fp, base64_decode('b24gd2hvaXNPYmplY3RBdHRyaWJ1dGVzKCRpZCwgJiRvdXQpIHsKCQkvLyBJbnRlcmZhY2UgMS4zLjYuMS40LjEuMzc0NzYuMi41LjIuMy40CgoJCSRmaWxlcyA9IGdsb2Ioc2VsZjo6Z2V0VXBsb2FkRGlyKCRpZCkuJy8nLicqJyk7CgkJZm9yZWFjaCAoJGZpbGVz'));
	@fwrite($fp, base64_decode('IGFzICRmaWxlKSB7CgkJCSRvdXRbXSA9ICdhdHRhY2htZW50LW5hbWU6ICcuYmFzZW5hbWUoJGZpbGUpOwoJCQkkb3V0W10gPSAnYXR0YWNobWVudC11cmw6ICcuT0lEcGx1czo6Z2V0U3lzdGVtVXJsKCkuT0lEcGx1czo6d2VicGF0aChfX0RJUl9fKS4nZG93bmxv'));
	@fwrite($fp, base64_decode('YWQucGhwP2lkPScudXJsZW5jb2RlKCRpZCkuJyZmaWxlbmFtZT0nLnVybGVuY29kZShiYXNlbmFtZSgkZmlsZSkpOwoJCX0KCgl9CglwdWJsaWMgZnVuY3Rpb24gd2hvaXNSYUF0dHJpYnV0ZXMoJGVtYWlsLCAmJG91dCkge30gLy8gSW50ZXJmYWNlIDEuMy42LjEu'));
	@fwrite($fp, base64_decode('NC4xLjM3NDc2LjIuNS4yLjMuNAp9Cg=='));
	@fclose($fp);
}
if (!is_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php')) {
	warn('File has vanished! Will re-create it: plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
	writefile_1();
	if (!is_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php')) {
		warn('File cannot be created (not existing): plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
	} else if (sha1_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php') != '4cd64e2c0d153f3f8869eb5ccb2ee4a25ee0d7d6') {
		warn('File cannot be created (checksum mismatch): plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php', 0644)) {
		warn('Could not change file permissions of plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
	}
} else {
	if (@sha1_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php') !== '4cd64e2c0d153f3f8869eb5ccb2ee4a25ee0d7d6') {
		if (@sha1_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php') !== '5a532e24c3652b08a36a558dfc83e07bfe888c90') {
			warn('File was modified. Will overwrite the changes now: plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
			$tmp = pathinfo('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php') !== '4cd64e2c0d153f3f8869eb5ccb2ee4a25ee0d7d6') {
			warn('File cannot be written (checksum mismatch): plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
		}
	}
}

// Files different: setup/index.php
function writefile_2() {
	@$fp = fopen('setup/index.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCnJlcXVpcmVfb25jZSBfX0RJUl9fIC4gJy8uLi9pbmNsdWRlcy9vaWRwbHVzLmluYy5waHAnOwoKT0lEcGx1czo6aGFuZGxlTGFuZ0FyZ3VtZW50KCk7CgplY2hvICc8IURPQ1RZUEUgaHRtbD4nOwpl'));
	@fwrite($fp, base64_decode('Y2hvICc8aHRtbCBsYW5nPSJlbiI+JzsKCmVjaG8gJzxoZWFkPic7CmVjaG8gJwk8dGl0bGU+Jy5fTCgnT0lEcGx1cyBTZXR1cCcpLic8L3RpdGxlPic7CmVjaG8gJwk8bWV0YSBuYW1lPSJyb2JvdHMiIGNvbnRlbnQ9Im5vaW5kZXgiPic7CmVjaG8gJwk8bWV0YSBu'));
	@fwrite($fp, base64_decode('YW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+JzsKZWNobyAnCTxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0ic2V0dXAubWluLmNzcy5waHAiPic7CmVjaG8gJwk8c2NyaXB0IHNyYz0ic2V0dXAu'));
	@fwrite($fp, base64_decode('bWluLmpzLnBocCIgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij48L3NjcmlwdD4nOwplY2hvICc8L2hlYWQ+JzsKCmVjaG8gJzxib2R5Pic7CgplY2hvICc8aDE+Jy5fTCgnT0lEcGx1cyBTZXR1cCAtIENvbmZpZ3VyYXRpb24gRmlsZSBHZW5lcmF0b3InKS4nPC9oMT4n'));
	@fwrite($fp, base64_decode('OwoKZWNobyBPSURwbHVzR3VpOjpnZXRMYW5ndWFnZUJveChudWxsLCBmYWxzZSk7CgplY2hvICc8cD4nLl9MKCdUaGFuayB5b3UgdmVyeSBtdWNoIGZvciBjaG9vc2luZyBPSURwbHVzISBUaGlzIHNldHVwIGFzc2lzdGFudCB3aWxsIGhlbHAgeW91IGNyZWF0aW5n'));
	@fwrite($fp, base64_decode('IG9yIHVwZGF0aW5nIHRoZSBmaWxlIDxiPiUxPC9iPi4gU2V0dXAgZG9lcyBub3QgYXV0b21hdGljYWxseSB3cml0ZSB0byB0aGlzIGZpbGUuIEluc3RlYWQsIHlvdSBuZWVkIHRvIGNvcHktcGFzdGUgdGhlIGNvbnRlbnRzIGludG8gdGhlIGZpbGUuIE9uY2UgT0lE'));
	@fwrite($fp, base64_decode('cGx1cyBzZXR1cCBpcyBmaW5pc2hlZCwgeW91IGNhbiBjaGFuZ2UgdGhlIGNvbmZpZyBmaWxlIGJ5IGhhbmQsIG9yIHJ1biB0aGlzIHNldHVwIGFzc2lzdGFudCBhZ2Fpbi4nLCd1c2VyZGF0YS9iYXNlY29uZmlnL2NvbmZpZy5pbmMucGhwJykuJzwvcD4nOwoKZWNo'));
	@fwrite($fp, base64_decode('byAnPGgyIGlkPSJzeXN0ZW1DaGVja0NhcHRpb24iIHN0eWxlPSJkaXNwbGF5Om5vbmUiPicuX0woJ1N5c3RlbSBjaGVjaycpLic8L2gyPic7CmVjaG8gJzxkaXYgaWQ9ImRpckFjY2Vzc1dhcm5pbmciPjwvZGl2Pic7CgplY2hvICc8ZGl2IGlkPSJzdGVwMSI+JzsK'));
	@fwrite($fp, base64_decode('ZWNobyAnPGgyPicuX0woJ1N0ZXAgJTE6IEVudGVyIHNldHVwIGluZm9ybWF0aW9uJywxKS4nPC9oMj4nOwoKZWNobyAnPGgzPicuX0woJ0FkbWluaXN0cmF0b3IgcGFzc3dvcmQnKS4nPC9oMz4nOwoKZWNobyAnPGZvcm0gaWQ9InN0ZXAxX2Zvcm0iPic7CmVjaG8g'));
	@fwrite($fp, base64_decode('JzxwPicuX0woJ1doaWNoIGFkbWluIHBhc3N3b3JkIGRvIHlvdSB3YW50PycpLic8YnI+PGlucHV0IGlkPSJhZG1pbl9wYXNzd29yZCIgdHlwZT0icGFzc3dvcmQiIGF1dG9jb21wbGV0ZT0ibmV3LXBhc3N3b3JkIiBvbmtleXByZXNzPSJyZWJ1aWxkKCkiIG9ua2V5'));
	@fwrite($fp, base64_decode('dXA9InJlYnVpbGQoKSI+IDxzcGFuIGlkPSJwYXNzd29yZF93YXJuIj48L3NwYW4+PC9wPic7CmVjaG8gJzxwPicuX0woJ1BsZWFzZSByZXBlYXQgdGhlIHBhc3N3b3JkIGlucHV0OicpLic8YnI+PGlucHV0IGlkPSJhZG1pbl9wYXNzd29yZDIiIHR5cGU9InBhc3N3'));
	@fwrite($fp, base64_decode('b3JkIiBhdXRvY29tcGxldGU9Im5ldy1wYXNzd29yZCIgb25rZXlwcmVzcz0icmVidWlsZCgpIiBvbmtleXVwPSJyZWJ1aWxkKCkiPiA8c3BhbiBpZD0icGFzc3dvcmRfd2FybjIiPjwvc3Bhbj48L3A+JzsKCmVjaG8gJzxoMz4nLl9MKCdEYXRhYmFzZSBjb25uZWN0'));
	@fwrite($fp, base64_decode('aXZpdHknKS4nPC9oMz4nOwoKaWYgKGZpbGVfZXhpc3RzKF9fRElSX18gLiAnLy4uL2RvYy9kYXRhYmFzZV9jb25uZWN0aXZpdHlfZGlhZ3JhbS5wbmcnKSkgewoJZWNobyAnPHA+PGEgaHJlZj0iLi4vZG9jL2RhdGFiYXNlX2Nvbm5lY3Rpdml0eV9kaWFncmFtLnBu'));
	@fwrite($fp, base64_decode('ZyIgdGFyZ2V0PSJfYmxhbmsiPjxpbWcgc3JjPSIuLi9kb2MvZGF0YWJhc2VfY29ubmVjdGl2aXR5X2RpYWdyYW0ucG5nIiB3aWR0aD0iMjAlIiBhbHQ9IicuX0woJ0RhdGFiYXNlIGNvbm5lY3Rpdml0eSBkaWFncmFtJykuJyIgdGl0bGU9IicuX0woJ0RhdGFiYXNl'));
	@fwrite($fp, base64_decode('IGNvbm5lY3Rpdml0eSBkaWFncmFtJykuJyI+PC9hPjwvcD4nOwp9CgplY2hvIF9MKCdEYXRhYmFzZSBwbHVnaW4nKS4nOiA8c2VsZWN0IG5hbWU9ImRiX3BsdWdpbiIgb25DaGFuZ2U9ImRicGx1Z2luX2NoYW5nZWQoKSIgaWQ9ImRiX3BsdWdpbiI+JzsKCk9JRHBs'));
	@fwrite($fp, base64_decode('dXM6OnJlZ2lzdGVyQWxsUGx1Z2lucygnZGF0YWJhc2UnLCAnT0lEcGx1c0RhdGFiYXNlUGx1Z2luJywgYXJyYXkoJ09JRHBsdXMnLCdyZWdpc3RlckRhdGFiYXNlUGx1Z2luJykpOwpmb3JlYWNoIChPSURwbHVzOjpnZXREYXRhYmFzZVBsdWdpbnMoKSBhcyAkcGx1'));
	@fwrite($fp, base64_decode('Z2luKSB7Cgkkc2VsZWN0ZWQgPSAkcGx1Z2luOjppZCgpID09ICdNeVNRTCcgPyAnIHNlbGVjdGVkPSJ0cnVlIicgOiAnJzsKCWVjaG8gJzxvcHRpb24gdmFsdWU9IicuaHRtbGVudGl0aWVzKCRwbHVnaW46OmlkKCkpLiciJy4kc2VsZWN0ZWQuJz4nLmh0bWxlbnRp'));
	@fwrite($fp, base64_decode('dGllcygkcGx1Z2luOjppZCgpKS4nPC9vcHRpb24+JzsKfQoKZWNobyAnPC9zZWxlY3Q+JzsKCmVjaG8gJzxkaXYgc3R5bGU9Im1hcmdpbi1sZWZ0OjUwcHgiPic7CgpPSURwbHVzOjpyZWdpc3RlckFsbFBsdWdpbnMoJ3NxbFNsYW5nJywgJ09JRHBsdXNTcWxTbGFu'));
	@fwrite($fp, base64_decode('Z1BsdWdpbicsIGFycmF5KCdPSURwbHVzJywncmVnaXN0ZXJTcWxTbGFuZ1BsdWdpbicpKTsKJHNxbF9zbGFuZ19zZWxlY3Rpb24gPSBhcnJheSgpOwpmb3JlYWNoIChPSURwbHVzOjpnZXRTcWxTbGFuZ1BsdWdpbnMoKSBhcyAkcGx1Z2luKSB7Cgkkc2xhbmdfaWQg'));
	@fwrite($fp, base64_decode('PSAkcGx1Z2luOjppZCgpOwoJJHBsdWdpbk1hbmlmZXN0ID0gJHBsdWdpbi0+Z2V0TWFuaWZlc3QoKTsKCSRodW1hbl9mcmllbmRseV9uYW1lID0gZW1wdHkoJHBsdWdpbk1hbmlmZXN0LT5nZXROYW1lKCkpID8gJHBsdWdpbk1hbmlmZXN0LT5nZXROYW1lKCkgOiBn'));
	@fwrite($fp, base64_decode('ZXRfY2xhc3MoJHBsdWdpbik7Cgkkc3FsX3NsYW5nX3NlbGVjdGlvbltdID0gJzxvcHRpb24gdmFsdWU9IicuJHNsYW5nX2lkLiciPicuJGh1bWFuX2ZyaWVuZGx5X25hbWUuJzwvb3B0aW9uPic7Cn0KJHNxbF9zbGFuZ19zZWxlY3Rpb24gPSBpbXBsb2RlKCJcbiIs'));
	@fwrite($fp, base64_decode('ICRzcWxfc2xhbmdfc2VsZWN0aW9uKTsKCiRmb3VuZF9kYl9wbHVnaW5zID0gMDsKLy9PSURwbHVzOjpyZWdpc3RlckFsbFBsdWdpbnMoJ2RhdGFiYXNlJywgJ09JRHBsdXNEYXRhYmFzZVBsdWdpbicsIGFycmF5KCdPSURwbHVzJywncmVnaXN0ZXJEYXRhYmFzZVBs'));
	@fwrite($fp, base64_decode('dWdpbicpKTsKZm9yZWFjaCAoT0lEcGx1czo6Z2V0RGF0YWJhc2VQbHVnaW5zKCkgYXMgJHBsdWdpbikgewoJJGZvdW5kX2RiX3BsdWdpbnMrKzsKCSRjb250ID0gJHBsdWdpbi0+c2V0dXBIVE1MKCk7CgkkY29udCA9IHN0cl9yZXBsYWNlKCc8IS0tICVTUUxfU0xB'));
	@fwrite($fp, base64_decode('TkdfU0VMRUNUSU9OJSAtLT4nLCAkc3FsX3NsYW5nX3NlbGVjdGlvbiwgJGNvbnQpOwoJZWNobyAkY29udDsKfQoKaWYgKCRmb3VuZF9kYl9wbHVnaW5zID09IDApIHsKCWVjaG8gJzxwPjxmb250IGNvbG9yPSJyZWQiPicuX0woJ0VSUk9SOiBObyBkYXRhYmFzZSBw'));
	@fwrite($fp, base64_decode('bHVnaW5zIHdlcmUgZm91bmQhIFlvdSBDQU5OT1QgdXNlIE9JRHBsdXMgd2l0aG91dCBkYXRhYmFzZSBjb25uZWN0aW9uLicpLic8L2ZvbnQ+PC9wPic7Cn0KCmVjaG8gJzwvZGl2Pic7CgplY2hvICc8cD4nLl9MKCdUYWJsZSBuYW1lIHByZWZpeCAoZS5nLiA8Yj5v'));
	@fwrite($fp, base64_decode('aWRwbHVzXzwvYj4pJykuJzo8YnI+PGlucHV0IGlkPSJ0YWJsZW5hbWVfcHJlZml4IiB0eXBlPSJ0ZXh0IiB2YWx1ZT0ib2lkcGx1c18iIG9ua2V5cHJlc3M9InJlYnVpbGQoKSIgb25rZXl1cD0icmVidWlsZCgpIj48L3A+JzsKCmVjaG8gJzxoMz4nLl9MKCdSZUNB'));
	@fwrite($fp, base64_decode('UFRDSEEnKS4nPC9oMz4nOwplY2hvICc8cD48aW5wdXQgaWQ9InJlY2FwdGNoYV9lbmFibGVkIiB0eXBlPSJjaGVja2JveCIgb25jbGljaz0icmVidWlsZCgpIj4gPGxhYmVsIGZvcj0icmVjYXB0Y2hhX2VuYWJsZWQiPicuX0woJ3JlQ0FQVENIQSBlbmFibGVkJyku'));
	@fwrite($fp, base64_decode('JzwvbGFiZWw+ICg8YSBocmVmPSJodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9yZWNhcHRjaGEvaW50cm8iIHRhcmdldD0iX2JsYW5rIj4nLl9MKCdtb3JlIGluZm9ybWF0aW9uIGFuZCBvYnRhaW4ga2V5JykuJzwvYT4pPC9wPic7CmVjaG8gJzxwPicuX0wo'));
	@fwrite($fp, base64_decode('J3JlQ0FQVENIQSBQdWJsaWMga2V5JykuJzxicj48aW5wdXQgaWQ9InJlY2FwdGNoYV9wdWJsaWMiIHR5cGU9InRleHQiIG9ua2V5cHJlc3M9InJlYnVpbGQoKSIgb25rZXl1cD0icmVidWlsZCgpIj48L3A+JzsKZWNobyAnPHA+Jy5fTCgncmVDQVBUQ0hBIFByaXZh'));
	@fwrite($fp, base64_decode('dGUga2V5JykuJzxicj48aW5wdXQgaWQ9InJlY2FwdGNoYV9wcml2YXRlIiB0eXBlPSJ0ZXh0IiBvbmtleXByZXNzPSJyZWJ1aWxkKCkiIG9ua2V5dXA9InJlYnVpbGQoKSI+PC9wPic7CgplY2hvICc8aDM+Jy5fTCgnVExTJykuJzwvaDM+JzsKZWNobyAnPHA+Jy5f'));
	@fwrite($fp, base64_decode('TCgnU1NMIGVuZm9yY2VtZW50JykuJzxicj48c2VsZWN0IG5hbWU9ImVuZm9yY2Vfc3NsIiBpZD0iZW5mb3JjZV9zc2wiIG9uY2xpY2s9InJlYnVpbGQoKSI+JzsKZWNobyAnPG9wdGlvbiB2YWx1ZT0iMCI+Jy5fTCgnTm8gU1NMIGF2YWlsYWJsZSAoZG9uXCd0IHJl'));
	@fwrite($fp, base64_decode('ZGlyZWN0KScpLic8L29wdGlvbj4nOwplY2hvICc8b3B0aW9uIHZhbHVlPSIxIj4nLl9MKCdFbmZvcmNlIFNTTCAoYWx3YXlzIHJlZGlyZWN0KScpLic8L29wdGlvbj4nOwplY2hvICc8b3B0aW9uIHZhbHVlPSIyIiBzZWxlY3RlZD4nLl9MKCdJbnRlbGxpZ2VudCBT'));
	@fwrite($fp, base64_decode('U0wgZGV0ZWN0aW9uIChyZWRpcmVjdCBpZiBwb3J0IDQ0MyBpcyBvcGVuKScpLic8L29wdGlvbj4nOwplY2hvICc8L3NlbGVjdD48L3A+JzsKZWNobyAnPC9mb3JtPic7CmVjaG8gJzwvZGl2Pic7CgplY2hvICc8ZGl2IGlkPSJzdGVwMiI+JzsKZWNobyAnPGgyPicu'));
	@fwrite($fp, base64_decode('X0woJ1N0ZXAgJTE6IEluaXRpYWxpemUgZGF0YWJhc2UnLDIpLic8L2gyPic7CmVjaG8gJzxwPjxmb250IGNvbG9yPSJyZWQiPjxiPicuX0woJ0lmIHlvdSBhbHJlYWR5IGhhdmUgYW4gT0lEcGx1cyBkYXRhYmFzZSBhbmQganVzdCB3YW50IHRvIHJlYnVpbGQgdGhl'));
	@fwrite($fp, base64_decode('IGNvbmZpZyBmaWxlLCBwbGVhc2Ugc2tpcCB0aGlzIHN0ZXAuJykuJzwvYj48L2ZvbnQ+PC9wPic7CmVjaG8gJzxwPicuX0woJ090aGVyd2lzZSwgaW1wb3J0IG9uZSBvZiB0aGUgZm9sbG93aW5nIFNRTCBkdW1wcyBpbiB5b3VyIGRhdGFiYXNlOicpLic8L3A+JzsK'));
	@fwrite($fp, base64_decode('ZWNobyAnPHA+PHVsPic7CmVjaG8gJwk8bGk+PGEgaHJlZj0ic3RydWN0X2VtcHR5LnNxbC5waHAiIGlkPSJzdHJ1Y3RfMSIgdGFyZ2V0PSJfYmxhbmsiPicuX0woJ0VtcHR5IE9JRHBsdXMgZGF0YWJhc2Ugd2l0aG91dCBleGFtcGxlIGRhdGEnKS4nPC9hPjxzcGFu'));
	@fwrite($fp, base64_decode('IGlkPSJzdHJ1Y3RfY2xpXzEiPjwvc3Bhbj48YnI+PGJyPjwvbGk+JzsKZWNobyAnCTxsaT48YSBocmVmPSJzdHJ1Y3Rfd2l0aF9leGFtcGxlcy5zcWwucGhwIiBpZD0ic3RydWN0XzIiIHRhcmdldD0iX2JsYW5rIj4nLl9MKCdPSURwbHVzIGRhdGFiYXNlIHdpdGgg'));
	@fwrite($fp, base64_decode('ZXhhbXBsZSBkYXRhJykuJzwvYT48c3BhbiBpZD0ic3RydWN0X2NsaV8yIj48L3NwYW4+PGJyPjxicj48L2xpPic7CmVjaG8gJzwvdWw+PC9wPic7CmVjaG8gJzxwPjxmb250IGNvbG9yPSJyZWQiPicuX0woJ1dhcm5pbmc6IEFsbCBkYXRhIGZyb20gdGhlIHByZXZp'));
	@fwrite($fp, base64_decode('b3VzIE9JRHBsdXMgaW5zdGFuY2Ugd2lsbCBiZSBkZWxldGVkIGR1cmluZyB0aGUgaW1wb3J0Ljxicj5JZiB5b3UgYWxyZWFkeSBoYXZlIGFuIE9JRHBsdXMgZGF0YWJhc2UsIHNraXAgdG8gU3RlcCAzLicpLic8L2ZvbnQ+PC9wPic7CmVjaG8gJzwvZGl2Pic7Cgpl'));
	@fwrite($fp, base64_decode('Y2hvICc8ZGl2IGlkPSJzdGVwMyI+JzsKZWNobyAnPGgyPicuX0woJ1N0ZXAgJTE6IFNhdmUgJTIgZmlsZScsMywndXNlcmRhdGEvYmFzZWNvbmZpZy9jb25maWcuaW5jLnBocCcpLic8L2gyPic7CmVjaG8gJzxwPicuX0woJ1NhdmUgZm9sbG93aW5nIGNvbnRlbnRz'));
	@fwrite($fp, base64_decode('IGludG8gdGhlIGZpbGUgPGI+JTE8L2I+JywndXNlcmRhdGEvYmFzZWNvbmZpZy9jb25maWcuaW5jLnBocCcpLic8L3A+JzsKZWNobyAnPGNvZGU+PGZvbnQgY29sb3I9ImRhcmtibHVlIj48ZGl2IGlkPSJjb25maWciPjwvZGl2PjwvZm9udD48L2NvZGU+JzsKZWNo'));
	@fwrite($fp, base64_decode('byAnPC9kaXY+JzsKCmVjaG8gJzxkaXYgaWQ9InN0ZXA0Ij4nOwplY2hvICc8aDI+Jy5fTCgnU3RlcCAlMTogQ29udGludWUgdG8gbmV4dCBzdGVwJyw0KS4nPC9oMj4nOwplY2hvICc8cD48aW5wdXQgdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJ3aW5kb3cubG9jYXRp'));
	@fwrite($fp, base64_decode('b24uaHJlZj1cJy4uL1wnIiB2YWx1ZT0iJy5fTCgnQ29udGludWUnKS4nIj48L3A+JzsKLy8gZWNobyAnPHA+PGEgaHJlZj0iLi4vIj5SdW4gdGhlIE9JRHBsdXMgc3lzdGVtPC9hPjwvcD4nOwplY2hvICc8L2Rpdj4nOwoKZWNobyAnPGJyPjxicj48YnI+JzsgLy8g'));
	@fwrite($fp, base64_decode('YmVjYXVzZSBvZiBpUGhvbmUgU2FmYXJpCgplY2hvICc8L2JvZHk+JzsKZWNobyAnPC9odG1sPic7Cg=='));
	@fclose($fp);
}
if (!is_file('setup/index.php')) {
	warn('File has vanished! Will re-create it: setup/index.php');
	writefile_2();
	if (!is_file('setup/index.php')) {
		warn('File cannot be created (not existing): setup/index.php');
	} else if (sha1_file('setup/index.php') != '8188bf3a48ff08dde7d70b234f38b4c1c907088b') {
		warn('File cannot be created (checksum mismatch): setup/index.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('setup/index.php', 0644)) {
		warn('Could not change file permissions of setup/index.php');
	}
} else {
	if (@sha1_file('setup/index.php') !== '8188bf3a48ff08dde7d70b234f38b4c1c907088b') {
		if (@sha1_file('setup/index.php') !== '86ee51ef61bd29d0018997a13fe05828114d30d6') {
			warn('File was modified. Will overwrite the changes now: setup/index.php');
			$tmp = pathinfo('setup/index.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('setup/index.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('setup/index.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_2();
		if (@sha1_file('setup/index.php') !== '8188bf3a48ff08dde7d70b234f38b4c1c907088b') {
			warn('File cannot be written (checksum mismatch): setup/index.php');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 479\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 479') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

