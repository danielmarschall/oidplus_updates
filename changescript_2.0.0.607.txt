<?php /* <ViaThinkSoftSignature>
SGt2dEAF5O6PJ1Navce2vkhsc+PLqVjBtoGzDPg71Exxq/XENW1hYtQOrQrcikCjM
FBjQbxDb9sakVLKkAYxqgWvSZ9Gv33n49lmz46ibLCi8cTNaEs5/z9e4nHU741TEo
nMUAh0OJ3FsXzzEkcqjE52tOubavu1ONt1hs2epqedDGzKNXV1R9DY8MStaMiyOop
lW1WC10hLFXvGhMqIQzU3qURZlblupwIsC4DqTGwrsHc9qFxS6Jzb4gSuaJRGPuIm
C96sai5yMcw7bW8/dmlIU41oc9Ow9zFK1JBD/8h9k/b3NcRnrTG7z0RaYGBz4helR
LOv6Yh5Y9Xq+D5CGiz0MISuqfh33wnuBgGAOnZEThS1toRz1MeVfMMV4oBtM67mcj
3z7BkpgWXgnswzBO6OZg1ZFJS6LUNV/Mf6RF5FaxV71lDi8Fzt4mtYxPuZ/EZrAY4
PMULkVp4GVazALwgrFEosSp1H6ooo/PCDAdF5+hCMe8VfCoSqCVqyLtUkbTyqwOmL
wq9wPK+lpzAc966Wv7r85COA1x67RzI9zvmMORfnUEuN5kGdqFcQ7VCDURtMO8c+k
PrRclm9vjelzovFPiBj/5QlATggdhvbJsYpZ0jUaWrFekF92g9JSGHFOvk8qYDDJB
a+crXynxJ1hwESk/37t+9wVoRkl1gp1uDzwJMO4hdppXjK84uLXFRjGyYUwvb7hD3
SBkk993Jeo6f94FZpvviXSIJ0X4+1td7jP/W0KJQMCQUFP92Xyv4a2hBNRtOiXi9X
Gz4g3lN/cnutculeD4qmnw6EDh3QWdqVeC05DUxa2ulxiYtxxfI1PbtrkoIqm1O+1
X5mbNkeBnFG2kImtlA2KMONHPMdb3MKV2FcXgasEaRsEpaJM38fi2FsEpT+/t/AEe
9041peQ62DVULra+qeBzhjOeaEwrzpYzR5x2dG56RDr/PTqocX/F62KpjOSix2C6g
HuVxfDxaZUnfDiw+bod1J6qKDI8ga7hqfchHCRVWUb+xZU//17HEPUcWdtyuTXoRD
D00I/AYN+GkNnd1x2Xd7IMINPQ4fElWjeeqETzv9ZVPnntSOoPRGKCJUNwjUfL0Ia
eJACqTD45Bpa6lFduOX6fXeuQ88LKBpYsWWLi9gYySVmoE+Y/nAm+jTxVAPn4l/JD
mImTJ9s+0pCIxS31LtsJgzK85PJYCJFLM/bUM3Eh0GE8yRGORK04N3431+aYjgLoM
W5FFTPDMFH/a5ROk7Bp2sin+hb5eEwFefojIsiPUrgJ3uqc5gsVNx/BIREciIi1q2
EfD8DdFJnYJtjIBPXg1Tz/aGhaHh4n8luw+UHYCmqRC4rjKvdumAEeruFqTaLo1Qx
w==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 606') {
	err('This update can only be applied to OIDplus version 2.0.0.606!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: ajax.php
function writefile_1() {
	@$fp = fopen('ajax.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMSBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgpyZXF1aXJlX29uY2UgX19ESVJfXyAuICcvaW5jbHVkZXMvb2lkcGx1cy5pbmMucGhwJzsKCnRyeSB7CglPSURwbHVzOjppbml0KGZhbHNlKTsKCglpZiAoaXNzZXQoJF9HRVRbJ09JRFBM'));
	@fwrite($fp, base64_decode('VVNfQVVUSF9KV1QnXSkgfHwgaXNzZXQoJF9QT1NUWydPSURQTFVTX0FVVEhfSldUJ10pKSB7CgkJb3JpZ2luSGVhZGVycygpOyAvLyBBbGxvd3MgcXVlcmllcyBmcm9tIG90aGVyIGRvbWFpbnMKCQlPSURwbHVzOjphdXRoVXRpbHMoKS0+ZGlzYWJsZUNTUkYoKTsg'));
	@fwrite($fp, base64_decode('Ly8gYWxsb3cgYWNjZXNzIHRvIGFqYXgucGhwIHdpdGhvdXQgdmFsaWQgQ1NSRiB0b2tlbgoJfQoKCSRqc29uX291dCA9IG51bGw7CgoJaWYgKGlzc2V0KCRfUkVRVUVTVFsncGx1Z2luJ10pICYmICgkX1JFUVVFU1RbJ3BsdWdpbiddICE9ICcnKSkgewoKCQkvLyBB'));
	@fwrite($fp, base64_decode('Y3Rpb25zIGhhbmRsZWQgYnkgcGx1Z2lucwoKCQkkcGx1Z2luID0gT0lEcGx1czo6Z2V0UGx1Z2luQnlPaWQoJF9SRVFVRVNUWydwbHVnaW4nXSk7CgkJaWYgKCEkcGx1Z2luKSB7CgkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdQbHVnaW4gd2l0aCBP'));
	@fwrite($fp, base64_decode('SUQgIiUxIiBub3QgZm91bmQnLCRfUkVRVUVTVFsncGx1Z2luJ10pKTsKCQl9CgoJCSRwYXJhbXMgPSBhcnJheSgpOwoJCWZvcmVhY2ggKGFycmF5X21lcmdlKCRfUE9TVCwkX0dFVCkgYXMgJG5hbWUgPT4gJHZhbCkgewoJCQlpZiAoKCRuYW1lICE9ICdhY3Rpb24n'));
	@fwrite($fp, base64_decode('KSAmJiAoJG5hbWUgIT0gJ3BsdWdpbicpKSB7CgkJCQkkcGFyYW1zWyRuYW1lXSA9ICR2YWw7CgkJCX0KCQl9CgoJCWlmIChpc3NldCgkX1JFUVVFU1RbJ2FjdGlvbiddKSAmJiAoJF9SRVFVRVNUWydhY3Rpb24nXSAhPSAnJykpIHsKCQkJaWYgKCRwbHVnaW4tPmNz'));
	@fwrite($fp, base64_decode('cmZVbmxvY2soJF9SRVFVRVNUWydhY3Rpb24nXSkpIHsKCQkJCW9yaWdpbkhlYWRlcnMoKTsgLy8gQWxsb3dzIHF1ZXJpZXMgZnJvbSBvdGhlciBkb21haW5zCgkJCQlPSURwbHVzOjphdXRoVXRpbHMoKS0+ZGlzYWJsZUNTUkYoKTsgLy8gYWxsb3cgYWNjZXNzIHRv'));
	@fwrite($fp, base64_decode('IGFqYXgucGhwIHdpdGhvdXQgdmFsaWQgQ1NSRiB0b2tlbgoJCQl9CgoJCQlPSURwbHVzOjphdXRoVXRpbHMoKS0+Y2hlY2tDU1JGKCk7CgoJCQlpZiAoIU9JRHBsdXM6OmJhc2Vjb25maWcoKS0+Z2V0VmFsdWUoJ0RJU0FCTEVfQUpBWF9UUkFOU0FDVElPTlMnLGZh'));
	@fwrite($fp, base64_decode('bHNlKSAmJiBPSURwbHVzOjpkYigpLT50cmFuc2FjdGlvbl9zdXBwb3J0ZWQoKSkgewoJCQkJT0lEcGx1czo6ZGIoKS0+dHJhbnNhY3Rpb25fYmVnaW4oKTsKCQkJfQoKCQkJJGpzb25fb3V0ID0gJHBsdWdpbi0+YWN0aW9uKCRfUkVRVUVTVFsnYWN0aW9uJ10sICRw'));
	@fwrite($fp, base64_decode('YXJhbXMpOwoJCQlpZiAoIWlzX2FycmF5KCRqc29uX291dCkpIHsKCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdQbHVnaW4gd2l0aCBPSUQgJTEgZGlkIG5vdCBvdXRwdXQgYXJyYXkgb2YgcmVzdWx0IGRhdGEnLCRfUkVRVUVTVFsncGx1Z2luJ10p'));
	@fwrite($fp, base64_decode('KTsKCQkJfQoJCQlpZiAoIWlzc2V0KCRqc29uX291dFsnc3RhdHVzJ10pKSAkanNvbl9vdXRbJ3N0YXR1cyddID0gLTE7CgoJCQlpZiAoIU9JRHBsdXM6OmJhc2Vjb25maWcoKS0+Z2V0VmFsdWUoJ0RJU0FCTEVfQUpBWF9UUkFOU0FDVElPTlMnLGZhbHNlKSAmJiBP'));
	@fwrite($fp, base64_decode('SURwbHVzOjpkYigpLT50cmFuc2FjdGlvbl9zdXBwb3J0ZWQoKSkgewoJCQkJT0lEcGx1czo6ZGIoKS0+dHJhbnNhY3Rpb25fY29tbWl0KCk7CgkJCX0KCQl9IGVsc2UgewoJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnSW52YWxpZCBhY3Rpb24gSUQn'));
	@fwrite($fp, base64_decode('KSk7CgkJfQoKCX0gZWxzZSB7CgoJCS8vIEFjdGlvbnMgaGFuZGxlZCBieSB0aGUgc3lzdGVtIChiYXNlIGZ1bmN0aW9uYWxpdHkgbGlrZSB0aGUgSlMgdHJlZSkKCgkJT0lEcGx1czo6YXV0aFV0aWxzKCktPmNoZWNrQ1NSRigpOwoKCQlpZiAoaXNzZXQoJF9SRVFV'));
	@fwrite($fp, base64_decode('RVNUWydhY3Rpb24nXSkgJiYgKCRfUkVRVUVTVFsnYWN0aW9uJ10gPT0gJ2dldF9kZXNjcmlwdGlvbicpKSB7CgkJCS8vIEFjdGlvbjogICAgIGdldF9kZXNjcmlwdGlvbgoJCQkvLyBNZXRob2Q6ICAgICBHRVQgLyBQT1NUCgkJCS8vIFBhcmFtZXRlcnM6IGlkCgkJ'));
	@fwrite($fp, base64_decode('CS8vIE91dHB1dHM6ICAgIEpTT04KCQkJX0NoZWNrUGFyYW1FeGlzdHMoJF9SRVFVRVNULCAnaWQnKTsKCQkJdHJ5IHsKCQkJCSRqc29uX291dCA9IE9JRHBsdXM6Omd1aSgpLT5nZW5lcmF0ZUNvbnRlbnRQYWdlKCRfUkVRVUVTVFsnaWQnXSk7CgkJCX0gY2F0Y2gg'));
	@fwrite($fp, base64_decode('KEV4Y2VwdGlvbiAkZSkgewoJCQkJJGpzb25fb3V0ID0gYXJyYXkoKTsKCQkJCSRqc29uX291dFsndGl0bGUnXSA9IF9MKCdFcnJvcicpOwoJCQkJJGpzb25fb3V0WydpY29uJ10gPSAnaW1nL2Vycm9yX2JpZy5wbmcnOwoJCQkJJGpzb25fb3V0Wyd0ZXh0J10gPSAk'));
	@fwrite($fp, base64_decode('ZS0+Z2V0TWVzc2FnZSgpOwoJCQl9CgkJCSRqc29uX291dFsnc3RhdHVzJ10gPSAwOwoJCX0gZWxzZSBpZiAoaXNzZXQoJF9SRVFVRVNUWydhY3Rpb24nXSkgJiYgKCRfUkVRVUVTVFsnYWN0aW9uJ10gPT0gJ3RyZWVfc2VhcmNoJykpIHsKCQkJLy8gQWN0aW9uOiAg'));
	@fwrite($fp, base64_decode('ICAgdHJlZV9zZWFyY2gKCQkJLy8gTWV0aG9kOiAgICAgR0VUIC8gUE9TVAoJCQkvLyBQYXJhbWV0ZXJzOiBzZWFyY2gKCQkJLy8gT3V0cHV0czogICAgSlNPTgoJCQlfQ2hlY2tQYXJhbUV4aXN0cygkX1JFUVVFU1QsICdzZWFyY2gnKTsKCgkJCSRmb3VuZCA9IGZh'));
	@fwrite($fp, base64_decode('bHNlOwoJCQlmb3JlYWNoIChPSURwbHVzOjpnZXRQYWdlUGx1Z2lucygpIGFzICRwbHVnaW4pIHsKCQkJCSRqc29uX291dCA9ICRwbHVnaW4tPnRyZWVfc2VhcmNoKCRfUkVRVUVTVFsnc2VhcmNoJ10pOwoJCQkJaWYgKCRqc29uX291dCkgewoJCQkJCSRmb3VuZCA9'));
	@fwrite($fp, base64_decode('IHRydWU7CgkJCQkJYnJlYWs7CgkJCQl9CgkJCX0KCgkJCWlmICghJGZvdW5kKSB7CgkJCQkkanNvbl9vdXQgPSBhcnJheSgpOwoJCQl9CgkJfSBlbHNlIGlmIChpc3NldCgkX1JFUVVFU1RbJ2FjdGlvbiddKSAmJiAoJF9SRVFVRVNUWydhY3Rpb24nXSA9PSAndHJl'));
	@fwrite($fp, base64_decode('ZV9sb2FkJykpIHsKCQkJLy8gQWN0aW9uOiAgICAgdHJlZV9sb2FkCgkJCS8vIE1ldGhvZDogICAgIEdFVCAvIFBPU1QKCQkJLy8gUGFyYW1ldGVyczogaWQ7IGdvdG8gKG9wdGlvbmFsKQoJCQkvLyBPdXRwdXRzOiAgICBKU09OCgkJCV9DaGVja1BhcmFtRXhpc3Rz'));
	@fwrite($fp, base64_decode('KCRfUkVRVUVTVCwgJ2lkJyk7CgkJCSRqc29uX291dCA9IE9JRHBsdXM6Om1lbnVVdGlscygpLT5qc29uX3RyZWUoJF9SRVFVRVNUWydpZCddLCBpc3NldCgkX1JFUVVFU1RbJ2dvdG8nXSkgPyAkX1JFUVVFU1RbJ2dvdG8nXSA6ICcnKTsKCQl9IGVsc2UgewoJCQl0'));
	@fwrite($fp, base64_decode('aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnSW52YWxpZCBhY3Rpb24gSUQnKSk7CgkJfQoJfQoKCUBoZWFkZXIoJ0NvbnRlbnQtVHlwZTphcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04Jyk7CgllY2hvIGpzb25fZW5jb2RlKCRqc29uX291dCk7Cgp9'));
	@fwrite($fp, base64_decode('IGNhdGNoIChFeGNlcHRpb24gJGUpIHsKCgl0cnkgewoJCWlmICghT0lEcGx1czo6YmFzZWNvbmZpZygpLT5nZXRWYWx1ZSgnRElTQUJMRV9BSkFYX1RSQU5TQUNUSU9OUycsZmFsc2UpICYmIE9JRHBsdXM6OmRiKCktPnRyYW5zYWN0aW9uX3N1cHBvcnRlZCgpICYm'));
	@fwrite($fp, base64_decode('IChPSURwbHVzOjpkYigpLT50cmFuc2FjdGlvbl9sZXZlbCgpID4gMCkpIHsKCQkJT0lEcGx1czo6ZGIoKS0+dHJhbnNhY3Rpb25fcm9sbGJhY2soKTsKCQl9Cgl9IGNhdGNoIChFeGNlcHRpb24gJGUxKSB7Cgl9CgoJJGVycm1zZyA9ICRlLT5nZXRNZXNzYWdlKCk7'));
	@fwrite($fp, base64_decode('CgkkZXJybXNnID0gc3RyaXBfdGFncygkZXJybXNnKTsKCSRlcnJtc2cgPSBodG1sX2VudGl0eV9kZWNvZGUoJGVycm1zZywgRU5UX1FVT1RFUywgJ1VURi04Jyk7CgoJJGpzb25fb3V0ID0gYXJyYXkoKTsKCSRqc29uX291dFsnc3RhdHVzJ10gPSAtMjsKCSRqc29u'));
	@fwrite($fp, base64_decode('X291dFsnZXJyb3InXSA9ICRlcnJtc2c7Cgkkb3V0ID0ganNvbl9lbmNvZGUoJGpzb25fb3V0KTsKCglpZiAoJG91dCA9PT0gZmFsc2UpIHsKCQkvLyBTb21lIG1vZHVsZXMgKGxpa2UgT0RCQykgbWlnaHQgb3V0cHV0IG5vbi1VVEY4IGRhdGEKCQkkanNvbl9vdXRb'));
	@fwrite($fp, base64_decode('J2Vycm9yJ10gPSB1dGY4X2VuY29kZSgkZXJybXNnKTsKCQkkb3V0ID0ganNvbl9lbmNvZGUoJGpzb25fb3V0KTsKCX0KCglAaGVhZGVyKCdDb250ZW50LVR5cGU6YXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcpOwoKCWVjaG8gJG91dDsKfQo='));
	@fclose($fp);
}
if (!is_file('ajax.php')) {
	warn('File has vanished! Will re-create it: ajax.php');
	writefile_1();
	if (!is_file('ajax.php')) {
		warn('File cannot be created (not existing): ajax.php');
	} else if (sha1_file('ajax.php') != 'c953917de51575289afcbd0be44280b066d077c2') {
		warn('File cannot be created (checksum mismatch): ajax.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('ajax.php', 0644)) {
		warn('Could not change file permissions of ajax.php');
	}
} else {
	if (@sha1_file('ajax.php') !== 'c953917de51575289afcbd0be44280b066d077c2') {
		if (@sha1_file('ajax.php') !== 'b5c0eb86a666fab6f9b36f88aa12f9dd3fd40198') {
			warn('File was modified. Will overwrite the changes now: ajax.php');
			$tmp = pathinfo('ajax.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('ajax.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('ajax.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('ajax.php') !== 'c953917de51575289afcbd0be44280b066d077c2') {
			warn('File cannot be written (checksum mismatch): ajax.php');
		}
	}
}

// Files different: includes/classes/OIDplusPagePlugin.class.php
function writefile_2() {
	@$fp = fopen('includes/classes/OIDplusPagePlugin.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMSBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgppZiAoIWRlZmluZWQoJ0lOU0lERV9PSURQTFVTJykpIGRpZSgpOwoKYWJzdHJhY3QgY2xhc3MgT0lEcGx1c1BhZ2VQbHVnaW4gZXh0ZW5kcyBPSURwbHVzUGx1Z2luIHsKCXB1YmxpYyBm'));
	@fwrite($fp, base64_decode('dW5jdGlvbiBhY3Rpb24oJGFjdGlvbklELCAkcGFyYW1zKSB7fQoJcHVibGljIGZ1bmN0aW9uIGd1aSgkaWQsICYkb3V0LCAmJGhhbmRsZWQpIHt9CglwdWJsaWMgZnVuY3Rpb24gdHJlZSgmJGpzb24sICRyYV9lbWFpbD1udWxsLCAkbm9uanM9ZmFsc2UsICRyZXFf'));
	@fwrite($fp, base64_decode('Z290bz0nJykge30KCXB1YmxpYyBmdW5jdGlvbiB0cmVlX3NlYXJjaCgkcmVxdWVzdCkge30KCglwdWJsaWMgZnVuY3Rpb24gY3NyZlVubG9jaygkYWN0aW9uSUQpIHsKCQkvLyBvdmVycmlkZSB0aGlzIG1ldGhvZCBpZiB5b3Ugd2FudCB0aGF0IHlvdXIgcGx1Z2lu'));
	@fwrite($fp, base64_decode('CgkJLy8gY2FuIGFjY2VwdCBhamF4LnBocCByZXF1ZXN0cyBmcm9tIG91dHNpZGUsIHdpdGhvdXQgQ1NSRiBjaGVjawoJCXJldHVybiBmYWxzZTsKCX0KCn0K'));
	@fclose($fp);
}
if (!is_file('includes/classes/OIDplusPagePlugin.class.php')) {
	warn('File has vanished! Will re-create it: includes/classes/OIDplusPagePlugin.class.php');
	writefile_2();
	if (!is_file('includes/classes/OIDplusPagePlugin.class.php')) {
		warn('File cannot be created (not existing): includes/classes/OIDplusPagePlugin.class.php');
	} else if (sha1_file('includes/classes/OIDplusPagePlugin.class.php') != 'c3896017829194fea3dd25e28c1b564dd827d5cf') {
		warn('File cannot be created (checksum mismatch): includes/classes/OIDplusPagePlugin.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/classes/OIDplusPagePlugin.class.php', 0644)) {
		warn('Could not change file permissions of includes/classes/OIDplusPagePlugin.class.php');
	}
} else {
	if (@sha1_file('includes/classes/OIDplusPagePlugin.class.php') !== 'c3896017829194fea3dd25e28c1b564dd827d5cf') {
		if (@sha1_file('includes/classes/OIDplusPagePlugin.class.php') !== 'b697f83abecd277a52b2028e66477c84f102b69f') {
			warn('File was modified. Will overwrite the changes now: includes/classes/OIDplusPagePlugin.class.php');
			$tmp = pathinfo('includes/classes/OIDplusPagePlugin.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/classes/OIDplusPagePlugin.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('includes/classes/OIDplusPagePlugin.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_2();
		if (@sha1_file('includes/classes/OIDplusPagePlugin.class.php') !== 'c3896017829194fea3dd25e28c1b564dd827d5cf') {
			warn('File cannot be written (checksum mismatch): includes/classes/OIDplusPagePlugin.class.php');
		}
	}
}

// Files different: plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php
function writefile_3() {
	@$fp = fopen('plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMSBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgppZiAoIWRlZmluZWQoJ0lOU0lERV9PSURQTFVTJykpIGRpZSgpOwoKY2xhc3MgT0lEcGx1c1BhZ2VBZG1pblJlZ2lzdHJhdGlvbiBleHRlbmRzIE9JRHBsdXNQYWdlUGx1Z2luQWRtaW4g'));
	@fwrite($fp, base64_decode('ewoKCS8qcHJpdmF0ZSovIGNvbnN0IFFVRVJZX1JFR0lTVEVSX1YxID0gICAgICAgICAnMS4zLjYuMS40LjEuMzc0NzYuMi41LjIuMS4xLjEnOwoJLypwcml2YXRlKi8gY29uc3QgUVVFUllfVU5SRUdJU1RFUl9WMSA9ICAgICAgICcxLjMuNi4xLjQuMS4zNzQ3Ni4y'));
	@fwrite($fp, base64_decode('LjUuMi4xLjIuMSc7CgkvKnByaXZhdGUqLyBjb25zdCBRVUVSWV9MSVNUQUxMU1lTVEVNSURTX1YxID0gJzEuMy42LjEuNC4xLjM3NDc2LjIuNS4yLjEuMy4xJzsKCS8qcHJpdmF0ZSovIGNvbnN0IFFVRVJZX0xJVkVTVEFUVVNfVjEgPSAgICAgICAnMS4zLjYuMS40'));
	@fwrite($fp, base64_decode('LjEuMzc0NzYuMi41LjIuMS40LjEnOwoKCXB1YmxpYyBmdW5jdGlvbiBjc3JmVW5sb2NrKCRhY3Rpb25JRCkgewoJCWlmICgkYWN0aW9uSUQgPT0gJ3ZlcmlmeV9wdWJrZXknKSByZXR1cm4gdHJ1ZTsKCQlyZXR1cm4gcGFyZW50Ojpjc3JmVW5sb2NrKCRhY3Rpb25J'));
	@fwrite($fp, base64_decode('RCk7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGFjdGlvbigkYWN0aW9uSUQsICRwYXJhbXMpIHsKCQlpZiAoJGFjdGlvbklEID09ICd2ZXJpZnlfcHVia2V5JykgewoJCQlfQ2hlY2tQYXJhbUV4aXN0cygkcGFyYW1zLCAnY2hhbGxlbmdlJyk7CgoJCQkkcGF5bG9hZCA9'));
	@fwrite($fp, base64_decode('ICdvaWRwbHVzLXZlcmlmeS1wdWJrZXk6Jy5zaGEzXzUxMigkcGFyYW1zWydjaGFsbGVuZ2UnXSk7CgoJCQkkc2lnbmF0dXJlID0gJyc7CgkJCWlmICghT0lEcGx1czo6Z2V0UGtpU3RhdHVzKCkgfHwgIUBvcGVuc3NsX3NpZ24oJHBheWxvYWQsICRzaWduYXR1cmUs'));
	@fwrite($fp, base64_decode('IE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgnb2lkcGx1c19wcml2YXRlX2tleScpKSkgewoJCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ1NpZ25hdHVyZSBmYWlsZWQnKSk7CgkJCX0KCgkJCXJldHVybiBhcnJheSgKCQkJCSJzdGF0dXMiID0+'));
	@fwrite($fp, base64_decode('IDAsCgkJCQkicmVzcG9uc2UiID0+IGJhc2U2NF9lbmNvZGUoJHNpZ25hdHVyZSkKCQkJKTsKCQl9IGVsc2UgewoJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnVW5rbm93biBhY3Rpb24gSUQnKSk7CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBndWko'));
	@fwrite($fp, base64_decode('JGlkLCAmJG91dCwgJiRoYW5kbGVkKSB7CgkJaWYgKCRpZCA9PT0gJ29pZHBsdXM6c3J2X3JlZ2lzdHJhdGlvbicpIHsKCQkJJGhhbmRsZWQgPSB0cnVlOwoJCQkkb3V0Wyd0aXRsZSddID0gX0woJ1N5c3RlbSByZWdpc3RyYXRpb24gc2V0dGluZ3MnKTsKCQkJJG91'));
	@fwrite($fp, base64_decode('dFsnaWNvbiddID0gZmlsZV9leGlzdHMoX19ESVJfXy4nL2ljb25fYmlnLnBuZycpID8gT0lEcGx1czo6d2VicGF0aChfX0RJUl9fKS4naWNvbl9iaWcucG5nJyA6ICcnOwoKCQkJaWYgKCFPSURwbHVzOjphdXRoVXRpbHMoKS0+aXNBZG1pbkxvZ2dlZEluKCkpIHsK'));
	@fwrite($fp, base64_decode('CQkJCSRvdXRbJ2ljb24nXSA9ICdpbWcvZXJyb3JfYmlnLnBuZyc7CgkJCQkkb3V0Wyd0ZXh0J10gPSAnPHA+Jy5fTCgnWW91IG5lZWQgdG8gPGEgJTE+bG9nIGluPC9hPiBhcyBhZG1pbmlzdHJhdG9yLicsT0lEcGx1czo6Z3VpKCktPmxpbmsoJ29pZHBsdXM6bG9n'));
	@fwrite($fp, base64_decode('aW4kYWRtaW4nKSkuJzwvcD4nOwoJCQkJcmV0dXJuOwoJCQl9CgoJCQlpZiAoZmlsZV9leGlzdHMoX19ESVJfXyAuICcvaW5mbyQnLk9JRHBsdXM6OmdldEN1cnJlbnRMYW5nKCkuJy5odG1sJykpIHsKCQkJCSRpbmZvID0gZmlsZV9nZXRfY29udGVudHMoX19ESVJf'));
	@fwrite($fp, base64_decode('XyAuICcvaW5mbyQnLk9JRHBsdXM6OmdldEN1cnJlbnRMYW5nKCkuJy5odG1sJyk7CgkJCX0gZWxzZSB7CgkJCQkkaW5mbyA9IGZpbGVfZ2V0X2NvbnRlbnRzKF9fRElSX18gLiAnL2luZm8uaHRtbCcpOwoJCQl9CgoJCQlsaXN0KCRodG1sLCAkanMsICRjc3MpID0g'));
	@fwrite($fp, base64_decode('ZXh0cmFjdEh0bWxDb250ZW50cygkaW5mbyk7CgkJCSRpbmZvID0gJyc7CgkJCWlmICghZW1wdHkoJGpzKSkgICRpbmZvIC49ICI8c2NyaXB0PlxuJGpzXG48L3NjcmlwdD4iOwoJCQlpZiAoIWVtcHR5KCRjc3MpKSAkaW5mbyAuPSAiPHN0eWxlPlxuJGNzc1xuPC9z'));
	@fwrite($fp, base64_decode('dHlsZT4iOwoJCQkkaW5mbyAuPSAkaHRtbDsKCgkJCSRvdXRbJ3RleHQnXSA9ICRpbmZvOwoKCQkJaWYgKCFPSURwbHVzOjpnZXRQa2lTdGF0dXMoKSkgewoJCQkJJG91dFsndGV4dCddIC49ICc8cD48Zm9udCBjb2xvcj0icmVkIj4nLl9MKCdFcnJvcjogWW91ciBz'));
	@fwrite($fp, base64_decode('eXN0ZW0gY291bGQgbm90IGdlbmVyYXRlIGEgcHJpdmF0ZS9wdWJsaWMga2V5IHBhaXIuIChPcGVuU1NMIGlzIHByb2JhYmx5IG1pc3Npbmcgb24geW91ciBzeXN0ZW0pLiBUaGVyZWZvcmUsIHlvdSBjYW5ub3QgcmVnaXN0ZXIvdW5yZWdpc3RlciB5b3VyIE9JRHBs'));
	@fwrite($fp, base64_decode('dXMgaW5zdGFuY2UuJykuJzwvZm9udD48L3A+JzsKCQkJfSBlbHNlIHsKCQkJCSRvdXRbJ3RleHQnXSAuPSAnPHA+PGlucHV0IHR5cGU9ImJ1dHRvbiIgb25jbGljaz0ib3Blbk9pZEluUGFuZWwoXCdvaWRwbHVzOnNydnJlZ19zdGF0dXNcJyk7IiB2YWx1ZT0iJy5f'));
	@fwrite($fp, base64_decode('TCgnQ2hlY2sgc3RhdHVzIG9mIHRoZSByZWdpc3RyYXRpb24gYW5kIGNvbGxlY3RlZCBkYXRhJykuJyI+PC9wPic7CgoJCQkJaWYgKE9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ1JFR0lTVFJBVElPTl9ISURFX1NZU1RFTScsIGZhbHNlKSkgewoJCQkJ'));
	@fwrite($fp, base64_decode('CSRvdXRbJ3RleHQnXSAuPSAnPHA+PGZvbnQgY29sb3I9InJlZCI+PGI+Jy5fTCgnQXR0ZW50aW9uIScpLic8L2I+ICcuX0woJzxjb2RlPlJFR0lTVFJBVElPTl9ISURFX1NZU1RFTTwvY29kZT4gaXMgc2V0IGluIHRoZSBsb2NhbCBjb25maWd1cmF0aW9uIGZpbGUh'));
	@fwrite($fp, base64_decode('IFRoZXJlZm9yZSwgdGhpcyBzeXN0ZW0gd2lsbCBub3QgcmVnaXN0ZXIgaXRzZWxmLCBkZXNwaXRlIG9mIHRoZSBzZXR0aW5ncyBiZWxvdy4nKS4nPC9mb250PjwvcD4nOwoJCQkJfQoKCQkJCSRvdXRbJ3RleHQnXSAuPSAnPHA+Jy5fTCgnWW91IGNhbiBhZGp1c3Qg'));
	@fwrite($fp, base64_decode('eW91ciBwcml2YWN5IGxldmVsIGhlcmUnKS4nOjwvcD48cD48c2VsZWN0IG5hbWU9InJlZ19wcml2YWN5IiBpZD0icmVnX3ByaXZhY3kiPic7CgoJCQkJIyAtLS0KCgkJCQkkb3V0Wyd0ZXh0J10gLj0gJzxvcHRpb24gdmFsdWU9IjAiJzsKCQkJCWlmIChPSURwbHVz'));
	@fwrite($fp, base64_decode('Ojpjb25maWcoKS0+Z2V0VmFsdWUoJ3JlZ19wcml2YWN5JykgPT0gMCkgewoJCQkJCSRvdXRbJ3RleHQnXSAuPSAnIHNlbGVjdGVkJzsKCQkJCX0gZWxzZSB7CgkJCQkJJG91dFsndGV4dCddIC49ICcnOwoJCQkJfQoJCQkJJG91dFsndGV4dCddIC49ICc+Jy5fTCgn'));
	@fwrite($fp, base64_decode('MCA9IFJlZ2lzdGVyIHRvIGRpcmVjdG9yeSBzZXJ2aWNlIGFuZCBhdXRvbWF0aWNhbGx5IHB1Ymxpc2ggUkEvT0lEIGRhdGEgYXQgb2lkLWluZm8uY29tJykuJzwvb3B0aW9uPic7CgoJCQkJIyAtLS0KCgkJCQkkb3V0Wyd0ZXh0J10gLj0gJzxvcHRpb24gdmFsdWU9'));
	@fwrite($fp, base64_decode('IjEiJzsKCQkJCWlmIChPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ3JlZ19wcml2YWN5JykgPT0gMSkgewoJCQkJCSRvdXRbJ3RleHQnXSAuPSAnIHNlbGVjdGVkJzsKCQkJCX0gZWxzZSB7CgkJCQkJJG91dFsndGV4dCddIC49ICcnOwoJCQkJfQoJCQkJJG91'));
	@fwrite($fp, base64_decode('dFsndGV4dCddIC49ICc+Jy5fTCgnMSA9IE9ubHkgcmVnaXN0ZXIgdG8gZGlyZWN0b3J5IHNlcnZpY2UnKS4nPC9vcHRpb24+JzsKCgkJCQkjIC0tLQoKCQkJCSRvdXRbJ3RleHQnXSAuPSAnPG9wdGlvbiB2YWx1ZT0iMiInOwoJCQkJaWYgKE9JRHBsdXM6OmNvbmZp'));
	@fwrite($fp, base64_decode('ZygpLT5nZXRWYWx1ZSgncmVnX3ByaXZhY3knKSA9PSAyKSB7CgkJCQkJJG91dFsndGV4dCddIC49ICcgc2VsZWN0ZWQnOwoJCQkJfSBlbHNlIHsKCQkJCQkkb3V0Wyd0ZXh0J10gLj0gJyc7CgkJCQl9CgkJCQkkb3V0Wyd0ZXh0J10gLj0gJz4nLl9MKCcyID0gSGlk'));
	@fwrite($fp, base64_decode('ZSBzeXN0ZW0nKS4nPC9vcHRpb24+JzsKCgkJCQkjIC0tLQoKCQkJCSRvdXRbJ3RleHQnXSAuPSAnPC9zZWxlY3Q+IDxpbnB1dCB0eXBlPSJidXR0b24iIHZhbHVlPSInLl9MKCdDaGFuZ2UnKS4nIiBvbmNsaWNrPSJPSURwbHVzUGFnZUFkbWluUmVnaXN0cmF0aW9u'));
	@fwrite($fp, base64_decode('LmNydWRBY3Rpb25SZWdQcml2YWN5VXBkYXRlKCkiPjwvcD4nOwoKCQkJCSRvdXRbJ3RleHQnXSAuPSAnPHA+Jy5fTCgnQWZ0ZXIgY2xpY2tpbmcgImNoYW5nZSIsIHlvdXIgT0lEcGx1cyBzeXN0ZW0gd2lsbCBjb250YWN0IHRoZSBWaWFUaGlua1NvZnQgc2VydmVy'));
	@fwrite($fp, base64_decode('IHRvIGFkanVzdCAoYWRkIG9yIHJlbW92ZSBpbmZvcm1hdGlvbikgeW91ciBwcml2YWN5IHNldHRpbmcuIFRoaXMgbWF5IHRha2UgYSBmZXcgbWludXRlcy4nKS4nPC9wPic7CgoJCQkJJG91dFsndGV4dCddIC49ICc8cD4nLl9MKCc8aT5Qcml2YWN5IGluZm9ybWF0'));
	@fwrite($fp, base64_decode('aW9uOjwvaT4gUGxlYXNlIG5vdGUgdGhhdCByZW1vdmluZyB5b3VyIHN5c3RlbSBmcm9tIHRoZSBkaXJlY3RvcnkgZG9lcyBub3QgYXV0b21hdGljYWxseSBkZWxldGUgaW5mb3JtYXRpb24gYWJvdXQgT0lEcyB3aGljaCBhcmUgYWxyZWFkeSBwdWJsaXNoZWQgYXQg'));
	@fwrite($fp, base64_decode('b2lkLWluZm8uY29tLiBUbyByZW1vdmUgYWxyZWFkeSBzdWJtaXR0ZWQgT0lEcyBhdCBvaWQtaW5mby5jb20sIHBsZWFzZSBjb250YWN0IHRoZSA8YSBocmVmPSJtYWlsdG86YWRtaW5Ab2lkLWluZm8uY29tIj5PSUQgUmVwb3NpdG9yeSBXZWJtYXN0ZXI8L2E+Licp'));
	@fwrite($fp, base64_decode('Lic8L3A+JzsKCQkJfQoJCX0KCQlpZiAoJGlkID09PSAnb2lkcGx1czpzcnZyZWdfc3RhdHVzJykgewoJCQkkaGFuZGxlZCA9IHRydWU7CgkJCSRvdXRbJ3RpdGxlJ10gPSBfTCgnUmVnaXN0cmF0aW9uIGxpdmUgc3RhdHVzJyk7CgkJCSRvdXRbJ2ljb24nXSA9IGZp'));
	@fwrite($fp, base64_decode('bGVfZXhpc3RzKF9fRElSX18uJy9pY29uX2JpZy5wbmcnKSA/IE9JRHBsdXM6OndlYnBhdGgoX19ESVJfXykuJ2ljb25fYmlnLnBuZycgOiAnJzsKCgkJCWlmICghT0lEcGx1czo6YXV0aFV0aWxzKCktPmlzQWRtaW5Mb2dnZWRJbigpKSB7CgkJCQkkb3V0WydpY29u'));
	@fwrite($fp, base64_decode('J10gPSAnaW1nL2Vycm9yX2JpZy5wbmcnOwoJCQkJJG91dFsndGV4dCddID0gJzxwPicuX0woJ1lvdSBuZWVkIHRvIDxhICUxPmxvZyBpbjwvYT4gYXMgYWRtaW5pc3RyYXRvci4nLE9JRHBsdXM6Omd1aSgpLT5saW5rKCdvaWRwbHVzOmxvZ2luJGFkbWluJykpLic8'));
	@fwrite($fp, base64_decode('L3A+JzsKCQkJCXJldHVybjsKCQkJfQoKCQkJJHF1ZXJ5ID0gc2VsZjo6UVVFUllfTElWRVNUQVRVU19WMTsKCgkJCSRwYXlsb2FkID0gYXJyYXkoCgkJCQkicXVlcnkiID0+ICRxdWVyeSwgLy8gd2UgbXVzdCByZXBlYXQgdGhlIHF1ZXJ5IGJlY2F1c2Ugd2Ugd2Fu'));
	@fwrite($fp, base64_decode('dCB0byBzaWduIGl0CgkJCQkibGFuZyIgPT4gT0lEcGx1czo6Z2V0Q3VycmVudExhbmcoKSwKCQkJCSJzeXN0ZW1faWQiID0+IE9JRHBsdXM6OmdldFN5c3RlbUlkKGZhbHNlKQoJCQkpOwoKCQkJJHNpZ25hdHVyZSA9ICcnOwoJCQlpZiAoIU9JRHBsdXM6OmdldFBr'));
	@fwrite($fp, base64_decode('aVN0YXR1cygpIHx8ICFAb3BlbnNzbF9zaWduKGpzb25fZW5jb2RlKCRwYXlsb2FkKSwgJHNpZ25hdHVyZSwgT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdvaWRwbHVzX3ByaXZhdGVfa2V5JykpKSB7CgkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihf'));
	@fwrite($fp, base64_decode('TCgnU2lnbmF0dXJlIGZhaWxlZCcpKTsKCQkJfQoKCQkJJGRhdGEgPSBhcnJheSgKCQkJCSJwYXlsb2FkIiA9PiAkcGF5bG9hZCwKCQkJCSJzaWduYXR1cmUiID0+IGJhc2U2NF9lbmNvZGUoJHNpZ25hdHVyZSkKCQkJKTsKCgkJCWlmICghZnVuY3Rpb25fZXhpc3Rz'));
	@fwrite($fp, base64_decode('KCdjdXJsX2luaXQnKSkgewoJCQkJdGhyb3cgbmV3IEV4Y2VwdGlvbihfTCgnVGhlICIlMSIgUEhQIGV4dGVuc2lvbiBpcyBub3QgaW5zdGFsbGVkIGF0IHlvdXIgc3lzdGVtLiBQbGVhc2UgZW5hYmxlIHRoZSBQSFAgZXh0ZW5zaW9uIDxjb2RlPiUyPC9jb2RlPi4n'));
	@fwrite($fp, base64_decode('LCdDVVJMJywncGhwX2N1cmwnKSk7CgkJCX0KCgkJCSRjaCA9IGN1cmxfaW5pdCgpOwoJCQlpZiAoaW5pX2dldCgnY3VybC5jYWluZm8nKSA9PSAnJykgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX0NBSU5GTywgT0lEcGx1czo6bG9jYWxwYXRoKCkgLiAndmVuZG9y'));
	@fwrite($fp, base64_decode('L2NhY2VydC5wZW0nKTsKCQkJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1VSTCwgJ2h0dHBzOi8vb2lkcGx1cy52aWF0aGlua3NvZnQuY29tL3JlZzIvcXVlcnkucGhwJyk7CgkJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9QT1NULCAxKTsKCQkJaWYgKGZ1bmN0'));
	@fwrite($fp, base64_decode('aW9uX2V4aXN0cygnZ3pkZWZsYXRlJykpIHsKCQkJCSRjb21wcmVzc2VkID0gIjEiOwoJCQkJJGRhdGEyID0gZ3pkZWZsYXRlKGpzb25fZW5jb2RlKCRkYXRhKSk7CgkJCX0gZWxzZSB7CgkJCQkkY29tcHJlc3NlZCA9ICIwIjsKCQkJCSRkYXRhMiA9IGpzb25fZW5j'));
	@fwrite($fp, base64_decode('b2RlKCRkYXRhKTsKCQkJfQoJCQljdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUE9TVEZJRUxEUywgInF1ZXJ5PSIudXJsZW5jb2RlKCRxdWVyeSkuIiZjb21wcmVzc2VkPSRjb21wcmVzc2VkJmRhdGE9Ii51cmxlbmNvZGUoYmFzZTY0X2VuY29kZSgkZGF0YTIpKSk7'));
	@fwrite($fp, base64_decode('CgkJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9SRVRVUk5UUkFOU0ZFUiwgdHJ1ZSk7CgkJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9GT0xMT1dMT0NBVElPTiwgdHJ1ZSk7CgkJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9BVVRPUkVGRVJFUiwgdHJ1ZSk7'));
	@fwrite($fp, base64_decode('CgkJCWlmICghKCRyZXMgPSBAY3VybF9leGVjKCRjaCkpKSB7CgkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnQ29tbXVuaWNhdGlvbiB3aXRoIFZpYVRoaW5rU29mdCBzZXJ2ZXIgZmFpbGVkOiAlMScsY3VybF9lcnJvcigkY2gpKSk7CgkJCX0KCQkJ'));
	@fwrite($fp, base64_decode('Y3VybF9jbG9zZSgkY2gpOwoKCQkJJGpzb24gPSBAanNvbl9kZWNvZGUoJHJlcywgdHJ1ZSk7CgoJCQlpZiAoISRqc29uKSB7CgkJCQkkb3V0WydpY29uJ10gPSAnaW1nL2Vycm9yX2JpZy5wbmcnOwoJCQkJJG91dFsndGV4dCddID0gX0woJ0pTT04gcmVwbHkgZnJv'));
	@fwrite($fp, base64_decode('bSBWaWFUaGlua1NvZnQgZGVjb2RpbmcgZXJyb3I6ICUxJywkcmVzKTsKCQkJCXJldHVybjsKCQkJfQoKCQkJaWYgKGlzc2V0KCRqc29uWydlcnJvciddKSB8fCAoJGpzb25bJ3N0YXR1cyddIDwgMCkpIHsKCQkJCSRvdXRbJ2ljb24nXSA9ICdpbWcvZXJyb3JfYmln'));
	@fwrite($fp, base64_decode('LnBuZyc7CgkJCQlpZiAoaXNzZXQoJGpzb25bJ2Vycm9yJ10pKSB7CgkJCQkJJG91dFsndGV4dCddID0gX0woJ1JlY2VpdmVkIGVycm9yIHN0YXR1cyBjb2RlOiAlMScsJGpzb25bJ2Vycm9yJ10pOwoJCQkJfSBlbHNlIHsKCQkJCQkkb3V0Wyd0ZXh0J10gPSBfTCgn'));
	@fwrite($fp, base64_decode('UmVjZWl2ZWQgZXJyb3Igc3RhdHVzIGNvZGU6ICUxJywkanNvblsnc3RhdHVzJ10pOwoJCQkJfQoJCQkJcmV0dXJuOwoJCQl9CgoJCQkkb3V0Wyd0ZXh0J10gID0gJzxwPjxhICcuT0lEcGx1czo6Z3VpKCktPmxpbmsoJ29pZHBsdXM6c3J2X3JlZ2lzdHJhdGlvbicp'));
	@fwrite($fp, base64_decode('Lic+PGltZyBzcmM9ImltZy9hcnJvd19iYWNrLnBuZyIgd2lkdGg9IjE2IiBhbHQ9IicuX0woJ0dvIGJhY2snKS4nIj4gJy5fTCgnR28gYmFjayB0byByZWdpc3RyYXRpb24gc2V0dGluZ3MnKS4nPC9hPjwvcD4nIC4KCQkJICAgICAgICAgICAgICAgICRqc29uWydj'));
	@fwrite($fp, base64_decode('b250ZW50J107CgkJfQoJfQoKCXByb3RlY3RlZCBmdW5jdGlvbiBhcmVXZVJlZ2lzdGVyZWQoKSB7CgkJLy8gVG8gY2hlY2sgaWYgd2UgYXJlIHJlZ2lzdGVyZWQuIENoZWNrIGl0ICJhbm9ueW1vdXNseSIgKGkuZS4gd2l0aG91dCByZXZlYWxpbmcgb3VyIHN5c3Rl'));
	@fwrite($fp, base64_decode('bSBJRCkKCQkkcmVzID0gZmlsZV9nZXRfY29udGVudHMoJ2h0dHBzOi8vb2lkcGx1cy52aWF0aGlua3NvZnQuY29tL3JlZzIvcXVlcnkucGhwP3F1ZXJ5PScuc2VsZjo6UVVFUllfTElTVEFMTFNZU1RFTUlEU19WMSk7CgoJCSRqc29uID0gQGpzb25fZGVjb2RlKCRy'));
	@fwrite($fp, base64_decode('ZXMsIHRydWUpOwoKCQlpZiAoISRqc29uKSB7CgkJCXJldHVybiBmYWxzZTsgLy8gdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0pTT04gcmVwbHkgZnJvbSBWaWFUaGlua1NvZnQgZGVjb2RpbmcgZXJyb3I6ICUxJywkcmVzKSk7CgkJfQoKCQlpZiAoaXNz'));
	@fwrite($fp, base64_decode('ZXQoJGpzb25bJ2Vycm9yJ10pIHx8ICgkanNvblsnc3RhdHVzJ10gPCAwKSkgewoJCQlpZiAoaXNzZXQoJGpzb25bJ2Vycm9yJ10pKSB7CgkJCQlyZXR1cm4gZmFsc2U7IC8vIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdSZWNlaXZlZCBlcnJvciBzdGF0'));
	@fwrite($fp, base64_decode('dXMgY29kZTogJTEnLCRqc29uWydlcnJvciddKSk7CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gZmFsc2U7IC8vIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdSZWNlaXZlZCBlcnJvciBzdGF0dXMgY29kZTogJTEnLCRqc29uWydzdGF0dXMnXSkpOwoJCQl9'));
	@fwrite($fp, base64_decode('CgkJfQoKCQkkbGlzdCA9ICRqc29uWydsaXN0J107CgoJCXJldHVybiBpbl9hcnJheShPSURwbHVzOjpnZXRTeXN0ZW1JZChmYWxzZSksICRsaXN0KTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gc2VuZFJlZ2lzdHJhdGlvblF1ZXJ5KCRwcml2YWN5X2xldmVsPW51bGwp'));
	@fwrite($fp, base64_decode('IHsKCQlpZiAoaXNfbnVsbCgkcHJpdmFjeV9sZXZlbCkpIHsKCQkJJHByaXZhY3lfbGV2ZWwgPSBPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ3JlZ19wcml2YWN5Jyk7CgkJfQoKCQkkc3lzdGVtX3VybCA9IE9JRHBsdXM6OndlYnBhdGgoKTsKCgkJLy8gSXQg'));
	@fwrite($fp, base64_decode('aXMgdmVyeSBpbXBvcnRhbnQgdGhhdCB3ZSBzZXQgdGhlIHBpbmcgdGltZSBOT1csIGJlY2F1c2UgVmlhVGhpbmtTb2Z0IG1pZ2h0IGNvbnRhY3QgdXMgZHVyaW5nIHRoZSBwaW5nLAoJCS8vIGFuZCB0aGlzIHdvdWxkIGNhdXNlIGFuIGVuZGxlc3MgbG9vcCEKCQlP'));
	@fwrite($fp, base64_decode('SURwbHVzOjpjb25maWcoKS0+c2V0VmFsdWUoJ3JlZ19sYXN0X3BpbmcnLCB0aW1lKCkpOwoKCQlpZiAoIU9JRHBsdXM6OmdldFBraVN0YXR1cygpKSByZXR1cm4gZmFsc2U7CgoJCWlmICgkcHJpdmFjeV9sZXZlbCA9PSAyKSB7CgkJCS8vIFRoZSB1c2VyIHdhbnRz'));
	@fwrite($fp, base64_decode('IHRvIHVucmVnaXN0ZXIsICBidXQgd2Ugb25seSB1bnJlZ2lzdGVyIGlmIHdlIGFyZSByZWdpc3RlcmVkCgkJCWlmICgkdGhpcy0+YXJlV2VSZWdpc3RlcmVkKCkpIHsKCQkJCSRxdWVyeSA9IHNlbGY6OlFVRVJZX1VOUkVHSVNURVJfVjE7CgoJCQkJJHBheWxvYWQg'));
	@fwrite($fp, base64_decode('PSBhcnJheSgKCQkJCQkicXVlcnkiID0+ICRxdWVyeSwgLy8gd2UgbXVzdCByZXBlYXQgdGhlIHF1ZXJ5IGJlY2F1c2Ugd2Ugd2FudCB0byBzaWduIGl0CgkJCQkJInN5c3RlbV9pZCIgPT4gT0lEcGx1czo6Z2V0U3lzdGVtSWQoZmFsc2UpCgkJCQkpOwoKCQkJCSRz'));
	@fwrite($fp, base64_decode('aWduYXR1cmUgPSAnJzsKCQkJCWlmICghT0lEcGx1czo6Z2V0UGtpU3RhdHVzKCkgfHwgIUBvcGVuc3NsX3NpZ24oanNvbl9lbmNvZGUoJHBheWxvYWQpLCAkc2lnbmF0dXJlLCBPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ29pZHBsdXNfcHJpdmF0ZV9rZXkn'));
	@fwrite($fp, base64_decode('KSkpIHsKCQkJCQlyZXR1cm4gZmFsc2U7IC8vIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdTaWduYXR1cmUgZmFpbGVkJykpOwoJCQkJfQoKCQkJCSRkYXRhID0gYXJyYXkoCgkJCQkJInBheWxvYWQiID0+ICRwYXlsb2FkLAoJCQkJCSJzaWduYXR1cmUi'));
	@fwrite($fp, base64_decode('ID0+IGJhc2U2NF9lbmNvZGUoJHNpZ25hdHVyZSkKCQkJCSk7CgoJCQkJaWYgKCFmdW5jdGlvbl9leGlzdHMoJ2N1cmxfaW5pdCcpKSB7CgkJCQkJcmV0dXJuIGZhbHNlOyAvLyB0aHJvdyBuZXcgRXhjZXB0aW9uKF9MKCdUaGUgIiUxIiBQSFAgZXh0ZW5zaW9uIGlz'));
	@fwrite($fp, base64_decode('IG5vdCBpbnN0YWxsZWQgYXQgeW91ciBzeXN0ZW0uIFBsZWFzZSBlbmFibGUgdGhlIFBIUCBleHRlbnNpb24gPGNvZGU+JTI8L2NvZGU+LicsJ0NVUkwnLCdwaHBfY3VybCcpKTsKCQkJCX0KCgkJCQkkY2ggPSBjdXJsX2luaXQoKTsKCQkJCWlmIChpbmlfZ2V0KCdj'));
	@fwrite($fp, base64_decode('dXJsLmNhaW5mbycpID09ICcnKSBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfQ0FJTkZPLCBPSURwbHVzOjpsb2NhbHBhdGgoKSAuICd2ZW5kb3IvY2FjZXJ0LnBlbScpOwoJCQkJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1VSTCwgJ2h0dHBzOi8vb2lkcGx1cy52'));
	@fwrite($fp, base64_decode('aWF0aGlua3NvZnQuY29tL3JlZzIvcXVlcnkucGhwJyk7CgkJCQljdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUE9TVCwgMSk7CgkJCQlpZiAoZnVuY3Rpb25fZXhpc3RzKCdnemRlZmxhdGUnKSkgewoJCQkJCSRjb21wcmVzc2VkID0gIjEiOwoJCQkJCSRkYXRhMiA9'));
	@fwrite($fp, base64_decode('IGd6ZGVmbGF0ZShqc29uX2VuY29kZSgkZGF0YSkpOwoJCQkJfSBlbHNlIHsKCQkJCQkkY29tcHJlc3NlZCA9ICIwIjsKCQkJCQkkZGF0YTIgPSBqc29uX2VuY29kZSgkZGF0YSk7CgkJCQl9CgkJCQljdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUE9TVEZJRUxEUywg'));
	@fwrite($fp, base64_decode('InF1ZXJ5PSIudXJsZW5jb2RlKCRxdWVyeSkuIiZjb21wcmVzc2VkPSRjb21wcmVzc2VkJmRhdGE9Ii51cmxlbmNvZGUoYmFzZTY0X2VuY29kZSgkZGF0YTIpKSk7CgkJCQljdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUkVUVVJOVFJBTlNGRVIsIHRydWUpOwoJCQkJ'));
	@fwrite($fp, base64_decode('Y3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX0ZPTExPV0xPQ0FUSU9OLCB0cnVlKTsKCQkJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9BVVRPUkVGRVJFUiwgdHJ1ZSk7CgkJCQlpZiAoISgkcmVzID0gQGN1cmxfZXhlYygkY2gpKSkgewoJCQkJCXJldHVybiBmYWxz'));
	@fwrite($fp, base64_decode('ZTsgLy8gdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0NvbW11bmljYXRpb24gd2l0aCBWaWFUaGlua1NvZnQgc2VydmVyIGZhaWxlZDogJTEnLGN1cmxfZXJyb3IoJGNoKSkpOwoJCQkJfQoJCQkJY3VybF9jbG9zZSgkY2gpOwoKCQkJCSRqc29uID0gQGpz'));
	@fwrite($fp, base64_decode('b25fZGVjb2RlKCRyZXMsIHRydWUpOwoKCQkJCWlmICghJGpzb24pIHsKCQkJCQlyZXR1cm4gZmFsc2U7IC8vIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdKU09OIHJlcGx5IGZyb20gVmlhVGhpbmtTb2Z0IGRlY29kaW5nIGVycm9yOiAlMScsJHJlcykp'));
	@fwrite($fp, base64_decode('OwoJCQkJfQoKCQkJCWlmIChpc3NldCgkanNvblsnZXJyb3InXSkgfHwgKCRqc29uWydzdGF0dXMnXSA8IDApKSB7CgkJCQkJaWYgKGlzc2V0KCRqc29uWydlcnJvciddKSkgewoJCQkJCQlyZXR1cm4gZmFsc2U7IC8vIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9u'));
	@fwrite($fp, base64_decode('KF9MKCdSZWNlaXZlZCBlcnJvciBzdGF0dXMgY29kZTogJTEnLCRqc29uWydlcnJvciddKSk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJcmV0dXJuIGZhbHNlOyAvLyB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnUmVjZWl2ZWQgZXJyb3Igc3RhdHVzIGNvZGU6'));
	@fwrite($fp, base64_decode('ICUxJywkanNvblsnc3RhdHVzJ10pKTsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9IGVsc2UgewoJCQlpZiAoJHByaXZhY3lfbGV2ZWwgPT0gMCkgewoJCQkJJGFkbWluRXhwb3J0UGx1Z2luID0gT0lEcGx1czo6Z2V0UGx1Z2luQnlPaWQoJzEuMy42LjEuNC4xLjM3NDc2'));
	@fwrite($fp, base64_decode('LjIuNS4yLjQuMy40MDAnKTsgLy8gT0lEcGx1c1BhZ2VBZG1pbk9JREluZm9FeHBvcnQKCQkJCWlmICghaXNfbnVsbCgkYWRtaW5FeHBvcnRQbHVnaW4pKSB7CgkJCQkJb2Jfc3RhcnQoKTsKCQkJCQlPSURwbHVzUGFnZUFkbWluT0lESW5mb0V4cG9ydDo6b3V0cHV0'));
	@fwrite($fp, base64_decode('WE1MKGZhbHNlKTsgLy8gbm8gb25saW5lIGNoZWNrLCBiZWNhdXNlIHRoZSBxdWVyeSBzaG91bGQgYmUgc2hvcnQgKHNpbmNlIHRoZSBxdWVyeSBpcyBkb25lIHdoaWxlIGEgdmlzaXRvciB3YWl0cyBmb3IgdGhlIHJlc3BvbnNlKQoJCQkJCSRvaWRpbmZvX3htbCA9'));
	@fwrite($fp, base64_decode('IG9iX2dldF9jb250ZW50cygpOwoJCQkJCW9iX2VuZF9jbGVhbigpOwoJCQkJfSBlbHNlIHsKCQkJCQkkb2lkaW5mb194bWwgPSBmYWxzZTsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCSRvaWRpbmZvX3htbCA9IGZhbHNlOwoJCQl9CgoJCQkkcXVlcnkgPSBzZWxmOjpR'));
	@fwrite($fp, base64_decode('VUVSWV9SRUdJU1RFUl9WMTsKCgkJCSRyb290X29pZHMgPSBhcnJheSgpOwoJCQlmb3JlYWNoIChPSURwbHVzOjpnZXRFbmFibGVkT2JqZWN0VHlwZXMoKSBhcyAkb3QpIHsKCQkJCWlmICgkb3Q6Om5zKCkgPT0gJ29pZCcpIHsKCQkJCQkkcmVzID0gT0lEcGx1czo6'));
	@fwrite($fp, base64_decode('ZGIoKS0+cXVlcnkoInNlbGVjdCBpZCBmcm9tICMjI29iamVjdHMgd2hlcmUgIiAuCgkJCQkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICIocGFyZW50ID0gJ29pZDonIG9yICIgLgoJCQkJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZm9s'));
	@fwrite($fp, base64_decode('bG93aW5nIHR3byBjYXNlcyBhcmUgc3BlY2lhbCBjYXNlcyBlLmcuIGlmIHRoZXJlIGFyZSBtdWx0aXBsZSBQRU4gb3IgVVVJRC1PSURzLCBhbmQgdGhlIHN5c3RlbSBvd25lciBkZWNpZGVzIHRvIHVzZSB0aGUgSUFOQSBQRU4gYXMgcm9vdCBPSUQsIGJ1dCBhY3R1'));
	@fwrite($fp, base64_decode('YWxseSwgaXQgaXMgbm90ICJoaXMiIHJvb3QgdGhlbiEgVGhlIE9JRHMgaW5zaWRlIHRoZSBJQU5BIFBFTiByb290IGFyZSBoaXMgcm9vdCB0aGVuIQoJCQkJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAicGFyZW50IGluIChzZWxlY3Qgb2lkIGZyb20gIyMj'));
	@fwrite($fp, base64_decode('YXNuMWlkIHdoZXJlIHdlbGxfa25vd24gPSA/KSBvciAiIC4KCQkJCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgInBhcmVudCBpbiAoc2VsZWN0IG9pZCBmcm9tICMjI2lyaSB3aGVyZSB3ZWxsX2tub3duID0gPykpIGFuZCAiIC4KCQkJCQkgICAgICAgICAg'));
	@fwrite($fp, base64_decode('ICAgICAgICAgICAgICAgICAgLy8gV2UgYXNzdW1lIGhlcmVieSB0aGF0IFJBcyBvZiB3ZWxsLWtub3duIE9JRHMgKGUuZy4gSUFOQSkgd2lsbCBub3QgdXNlIE9JRHBsdXMgZm9yIGFsbG9jYXRpbmcgT0lEczoKCQkJCQkgICAgICAgICAgICAgICAgICAgICAgICAg'));
	@fwrite($fp, base64_decode('ICAgImlkIG5vdCBpbiAoc2VsZWN0IG9pZCBmcm9tICMjI2FzbjFpZCB3aGVyZSB3ZWxsX2tub3duID0gPykgYW5kICIgLgoJCQkJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaWQgbm90IGluIChzZWxlY3Qgb2lkIGZyb20gIyMjaXJpIHdoZXJlIHdlbGxf'));
	@fwrite($fp, base64_decode('a25vd24gPSA/KSAiIC4KCQkJCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm9yZGVyIGJ5ICIuT0lEcGx1czo6ZGIoKS0+bmF0T3JkZXIoJ2lkJyksIGFycmF5KHRydWUsIHRydWUsIHRydWUsIHRydWUpKTsKCQkJCQl3aGlsZSAoJHJvdyA9ICRyZXMtPmZl'));
	@fwrite($fp, base64_decode('dGNoX2FycmF5KCkpIHsKCQkJCQkJJHJvb3Rfb2lkc1tdID0gc3Vic3RyKCRyb3dbJ2lkJ10sc3RybGVuKCdvaWQ6JykpOwoJCQkJCX0KCQkJCX0KCQkJfQoJCQkkcGF5bG9hZCA9IGFycmF5KAoJCQkJInF1ZXJ5IiA9PiAkcXVlcnksIC8vIHdlIG11c3QgcmVwZWF0'));
	@fwrite($fp, base64_decode('IHRoZSBxdWVyeSBiZWNhdXNlIHdlIHdhbnQgdG8gc2lnbiBpdAoJCQkJInByaXZhY3lfbGV2ZWwiID0+ICRwcml2YWN5X2xldmVsLAoJCQkJInN5c3RlbV9pZCIgPT4gT0lEcGx1czo6Z2V0U3lzdGVtSWQoZmFsc2UpLAoJCQkJInB1YmxpY19rZXkiID0+IE9JRHBs'));
	@fwrite($fp, base64_decode('dXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgnb2lkcGx1c19wdWJsaWNfa2V5JyksCgkJCQkic3lzdGVtX3VybCIgPT4gJHN5c3RlbV91cmwsCgkJCQkiaGlkZV9zeXN0ZW1fdXJsIiA9PiAwLAoJCQkJImhpZGVfcHVibGljX2tleSIgPT4gMCwKCQkJCSJhZG1pbl9lbWFp'));
	@fwrite($fp, base64_decode('bCIgPT4gT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdhZG1pbl9lbWFpbCcpLAoJCQkJInN5c3RlbV90aXRsZSIgPT4gT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdzeXN0ZW1fdGl0bGUnKSwKCQkJCSJvaWRpbmZvX3htbCIgPT4gQGJhc2U2NF9lbmNv'));
	@fwrite($fp, base64_decode('ZGUoJG9pZGluZm9feG1sKSwKCQkJCSJyb290X29pZHMiID0+ICRyb290X29pZHMsCgkJCQkic3lzdGVtX3ZlcnNpb24iID0+IE9JRHBsdXM6OmdldFZlcnNpb24oKSwKCQkJCSJzeXN0ZW1faW5zdGFsbF90eXBlIiA9PiBPSURwbHVzOjpnZXRJbnN0YWxsVHlwZSgp'));
	@fwrite($fp, base64_decode('CgkJCSk7CgoJCQkkc2lnbmF0dXJlID0gJyc7CgkJCWlmICghT0lEcGx1czo6Z2V0UGtpU3RhdHVzKCkgfHwgIUBvcGVuc3NsX3NpZ24oanNvbl9lbmNvZGUoJHBheWxvYWQpLCAkc2lnbmF0dXJlLCBPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ29pZHBsdXNf'));
	@fwrite($fp, base64_decode('cHJpdmF0ZV9rZXknKSkpIHsKCQkJCXJldHVybiBmYWxzZTsgLy8gdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ1NpZ25hdHVyZSBmYWlsZWQnKSk7CgkJCX0KCgkJCSRkYXRhID0gYXJyYXkoCgkJCQkicGF5bG9hZCIgPT4gJHBheWxvYWQsCgkJCQkic2ln'));
	@fwrite($fp, base64_decode('bmF0dXJlIiA9PiBiYXNlNjRfZW5jb2RlKCRzaWduYXR1cmUpCgkJCSk7CgoKCQkJaWYgKCFmdW5jdGlvbl9leGlzdHMoJ2N1cmxfaW5pdCcpKSB7CgkJCQlyZXR1cm4gZmFsc2U7IC8vIHRocm93IG5ldyBFeGNlcHRpb24oX0woJ1RoZSAiJTEiIFBIUCBleHRlbnNp'));
	@fwrite($fp, base64_decode('b24gaXMgbm90IGluc3RhbGxlZCBhdCB5b3VyIHN5c3RlbS4gUGxlYXNlIGVuYWJsZSB0aGUgUEhQIGV4dGVuc2lvbiA8Y29kZT4lMjwvY29kZT4uJywnQ1VSTCcsJ3BocF9jdXJsJykpOwoJCQl9CgoJCQkkY2ggPSBjdXJsX2luaXQoKTsKCQkJaWYgKGluaV9nZXQo'));
	@fwrite($fp, base64_decode('J2N1cmwuY2FpbmZvJykgPT0gJycpIGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9DQUlORk8sIE9JRHBsdXM6OmxvY2FscGF0aCgpIC4gJ3ZlbmRvci9jYWNlcnQucGVtJyk7CgkJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9VUkwsICdodHRwczovL29pZHBsdXMu'));
	@fwrite($fp, base64_decode('dmlhdGhpbmtzb2Z0LmNvbS9yZWcyL3F1ZXJ5LnBocCcpOwoJCQljdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUE9TVCwgMSk7CgkJCWlmIChmdW5jdGlvbl9leGlzdHMoJ2d6ZGVmbGF0ZScpKSB7CgkJCQkkY29tcHJlc3NlZCA9ICIxIjsKCQkJCSRkYXRhMiA9IGd6'));
	@fwrite($fp, base64_decode('ZGVmbGF0ZShqc29uX2VuY29kZSgkZGF0YSkpOwoJCQl9IGVsc2UgewoJCQkJJGNvbXByZXNzZWQgPSAiMCI7CgkJCQkkZGF0YTIgPSBqc29uX2VuY29kZSgkZGF0YSk7CgkJCX0KCQkJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1BPU1RGSUVMRFMsICJxdWVyeT0i'));
	@fwrite($fp, base64_decode('LnVybGVuY29kZSgkcXVlcnkpLiImY29tcHJlc3NlZD0kY29tcHJlc3NlZCZkYXRhPSIudXJsZW5jb2RlKGJhc2U2NF9lbmNvZGUoJGRhdGEyKSkpOwoJCQljdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUkVUVVJOVFJBTlNGRVIsIHRydWUpOwoJCQljdXJsX3NldG9w'));
	@fwrite($fp, base64_decode('dCgkY2gsIENVUkxPUFRfRk9MTE9XTE9DQVRJT04sIHRydWUpOwoJCQljdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfQVVUT1JFRkVSRVIsIHRydWUpOwoJCQlpZiAoISgkcmVzID0gQGN1cmxfZXhlYygkY2gpKSkgewoJCQkJcmV0dXJuIGZhbHNlOyAvLyB0aHJvdyBu'));
	@fwrite($fp, base64_decode('ZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnQ29tbXVuaWNhdGlvbiB3aXRoIFZpYVRoaW5rU29mdCBzZXJ2ZXIgZmFpbGVkOiAlMScsY3VybF9lcnJvcigkY2gpKSk7CgkJCX0KCQkJY3VybF9jbG9zZSgkY2gpOwoKCQkJJGpzb24gPSBAanNvbl9kZWNvZGUoJHJlcywg'));
	@fwrite($fp, base64_decode('dHJ1ZSk7CgoJCQlpZiAoISRqc29uKSB7CgkJCQlyZXR1cm4gZmFsc2U7IC8vIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdKU09OIHJlcGx5IGZyb20gVmlhVGhpbmtTb2Z0IGRlY29kaW5nIGVycm9yOiAlMScsJHJlcykpOwoJCQl9CgoJCQlpZiAoaXNz'));
	@fwrite($fp, base64_decode('ZXQoJGpzb25bJ2Vycm9yJ10pIHx8ICgkanNvblsnc3RhdHVzJ10gPCAwKSkgewoJCQkJaWYgKGlzc2V0KCRqc29uWydlcnJvciddKSkgewoJCQkJCXJldHVybiBmYWxzZTsgLy8gdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ1JlY2VpdmVkIGVycm9yIHN0'));
	@fwrite($fp, base64_decode('YXR1cyBjb2RlOiAlMScsJGpzb25bJ2Vycm9yJ10pKTsKCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuIGZhbHNlOyAvLyB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnUmVjZWl2ZWQgZXJyb3Igc3RhdHVzIGNvZGU6ICUxJywkanNvblsnc3RhdHVzJ10pKTsK'));
	@fwrite($fp, base64_decode('CQkJCX0KCQkJfSBlbHNlIGlmICgkanNvblsnc3RhdHVzJ10gPT0gOTkvKkhhc2ggY29uZmxpY3QqLykgewoJCQkJT0lEcGx1czo6bG9nZ2VyKCktPmxvZygiW1dBUk5dQSEiLCAiUmVtb3ZpbmcgU3lzdGVtSUQgYW5kIGtleSBwYWlyIGJlY2F1c2UgdGhlcmUgaXMg'));
	@fwrite($fp, base64_decode('YSBoYXNoIGNvbmZsaWN0IHdpdGggYW5vdGhlciBPSURwbHVzIHN5c3RlbSEiKTsKCgkJCQkvLyBEZWxldGUgdGhlIHN5c3RlbSBJRCBzaW5jZSB3ZSBoYXZlIGEgY29uZmxpY3Qgd2l0aCB0aGUgMzEtYml0IGhhc2ghCgkJCQlPSURwbHVzOjpjb25maWcoKS0+c2V0'));
	@fwrite($fp, base64_decode('VmFsdWUoJ29pZHBsdXNfcHJpdmF0ZV9rZXknLCAnJyk7CgkJCQlPSURwbHVzOjpjb25maWcoKS0+c2V0VmFsdWUoJ29pZHBsdXNfcHVibGljX2tleScsICcnKTsKCgkJCQkvLyBUcnkgdG8gZ2VuZXJhdGUgYSBuZXcgc3lzdGVtIElECgkJCQlPSURwbHVzOjpnZXRQ'));
	@fwrite($fp, base64_decode('a2lTdGF0dXModHJ1ZSk7CgoJCQkJLy8gRW5mb3JjZSBhIG5ldyByZWdpc3RyYXRpb24gYXR0ZW1wdCBhdCB0aGUgbmV4dCBwYWdlIHZpc2l0CgkJCQkvLyBXZSB3aWxsIG5vdCB0cnkgYWdhaW4gaGVyZSwgYmVjYXVzZSB0aGF0IG1pZ2h0IGxlYWQgdG8gYW4gZW5k'));
	@fwrite($fp, base64_decode('bGVzcyBsb29wIGlmIHRoZSBWVFMgc2VydmVyIHdvdWxkIGFsd2F5cyByZXR1cm4gJ0hBU0hfQ09ORkxDSVQnCgkJCQlPSURwbHVzOjpjb25maWcoKS0+c2V0VmFsdWUoJ3JlZ19sYXN0X3BpbmcnLCAwKTsKCQkJfQoJCX0KCX0KCglwdWJsaWMgZnVuY3Rpb24gaW5p'));
	@fwrite($fp, base64_decode('dCgkaHRtbD10cnVlKSB7CgkJLy8gTm90ZTogSXQgaXMgaW1wb3J0YW50IHRoYXQgdGhlIGRlZmF1bHQgdmFsdWUgaXMgJzInLCBvdGhlcndpc2UsIHN5c3RlbXMgd2hpY2ggZG9uJ3QgaGF2ZSBDVVJMIHdpbGwgZmFpbAoJCU9JRHBsdXM6OmNvbmZpZygpLT5wcmVw'));
	@fwrite($fp, base64_decode('YXJlQ29uZmlnS2V5KCdyZWdfcHJpdmFjeScsICcyPUhpZGUgeW91ciBzeXN0ZW0sIDE9UmVnaXN0ZXIgeW91ciBzeXN0ZW0gdG8gdGhlIFZpYVRoaW5rU29mdCBkaXJlY3RvcnkgYW5kIG9pZC1pbmZvLmNvbSwgMD1QdWJsaXNoIHlvdXIgc3lzdGVtIHRvIFZpYVRo'));
	@fwrite($fp, base64_decode('aW5rU29mdCBkaXJlY3RvcnkgYW5kIGFsbCBwdWJsaWMgY29udGVudHMgKFJBL09JRCkgdG8gb2lkLWluZm8uY29tJywgJzInLCBPSURwbHVzQ29uZmlnOjpQUk9URUNUSU9OX0VESVRBQkxFLCBmdW5jdGlvbigkdmFsdWUpIHsKCQkJaWYgKCgkdmFsdWUgIT0gJzAn'));
	@fwrite($fp, base64_decode('KSAmJiAoJHZhbHVlICE9ICcxJykgJiYgKCR2YWx1ZSAhPSAnMicpKSB7CgkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnUGxlYXNlIGVudGVyIGVpdGhlciAwLCAxIG9yIDIuJykpOwoJCQl9CgkJCS8vIE5vdyBkbyBhIHJlY2hlY2sgYW5kIG5vdGlm'));
	@fwrite($fp, base64_decode('eSB0aGUgVmlhVGhpbmtTb2Z0IHNlcnZlcgoJCQlpZiAoKCR2YWx1ZSA9PSAyKSB8fCAhT0lEcGx1czo6YmFzZUNvbmZpZygpLT5nZXRWYWx1ZSgnUkVHSVNUUkFUSU9OX0hJREVfU1lTVEVNJywgZmFsc2UpKSB7CgkJCQlPSURwbHVzOjpjb25maWcoKS0+c2V0VmFs'));
	@fwrite($fp, base64_decode('dWUoJ3JlZ19sYXN0X3BpbmcnLCAwKTsKCQkJCSR0aGlzLT5zZW5kUmVnaXN0cmF0aW9uUXVlcnkoJHZhbHVlKTsKCQkJfQoJCX0pOwoJCU9JRHBsdXM6OmNvbmZpZygpLT5wcmVwYXJlQ29uZmlnS2V5KCdyZWdfcGluZ19pbnRlcnZhbCcsICdSZWdpc3RyYXRpb24g'));
	@fwrite($fp, base64_decode('cGluZyBpbnRlcnZhbCAoaW4gc2Vjb25kcyknLCAnMzYwMCcsIE9JRHBsdXNDb25maWc6OlBST1RFQ1RJT05fSElEREVOLCBmdW5jdGlvbigkdmFsdWUpIHsKCgkJfSk7CgkJT0lEcGx1czo6Y29uZmlnKCktPnByZXBhcmVDb25maWdLZXkoJ3JlZ19sYXN0X3Bpbmcn'));
	@fwrite($fp, base64_decode('LCAnTGFzdCBwaW5nIHRvIFZpYVRoaW5rU29mdCBkaXJlY3Rvcnkgc2VydmljZXMnLCAnMCcsIE9JRHBsdXNDb25maWc6OlBST1RFQ1RJT05fSElEREVOLCBmdW5jdGlvbigkdmFsdWUpIHsKCgkJfSk7CgkJT0lEcGx1czo6Y29uZmlnKCktPnByZXBhcmVDb25maWdL'));
	@fwrite($fp, base64_decode('ZXkoJ29vYmVfcmVnaXN0cmF0aW9uX2RvbmUnLCAnIk91dCBPZiBCb3ggRXhwZXJpZW5jZSIgd2l6YXJkIGZvciBPSURwbHVzUGFnZUFkbWluUmVnaXN0cmF0aW9uIGRvbmUgb25jZT8nLCAnMCcsIE9JRHBsdXNDb25maWc6OlBST1RFQ1RJT05fSElEREVOLCBmdW5j'));
	@fwrite($fp, base64_decode('dGlvbigkdmFsdWUpIHt9KTsKCgkJLy8gSXMgaXQgdGltZSB0byByZWdpc3RlciAvIHJlbmV3IHRoZSBkaXJlY3RvcnkgZW50cnk/CgkJLy8gTm90ZTogUkVHSVNUUkFUSU9OX0hJREVfU1lTVEVNIGlzIGFuIHVuZG9jdW1lbnRlZCBjb25zdGFudCB0aGF0IGNhbiBi'));
	@fwrite($fp, base64_decode('ZSBwdXQgaW4gdGhlIHVzZXJkYXRhL2Jhc2Vjb25maWcvY29uZmlnLmluYy5waHAgZmlsZXMgb2YgYSB0ZXN0IHN5c3RlbSBhY2Nlc3NpbmcgdGhlIHNhbWUgZGF0YWJhc2UgYXMgdGhlIHByb2R1Y3RpdmUgc3lzdGVtIHRoYXQgaXMgcmVnaXN0ZXJlZC4KCQkvLyBU'));
	@fwrite($fp, base64_decode('aGlzIGF2b2lkcyB0aGF0IHRoZSBVUkwgb2YgYSBwcm9kdWN0aXZlIHN5c3RlbSBpcyBvdmVycmlkZGVuIHdpdGggdGhlIFVSTCBvZiBhIGNsb25lZCB0ZXN0IHN5c3RlbSAoc2luY2UgdGhleSB1c2UgdGhlIHNhbWUgZGF0YWJhc2UsIHRoZXkgYWxzbyBoYXZlIHRo'));
	@fwrite($fp, base64_decode('ZSBzYW1lIHN5c3RlbSBJRCkKCgkJaWYgKE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgnb29iZV9yZWdpc3RyYXRpb25fZG9uZScpID09ICcxJykgewoJCQlpZiAoIU9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ1JFR0lTVFJBVElPTl9ISURFX1NZ'));
	@fwrite($fp, base64_decode('U1RFTScsIGZhbHNlKSkgewoJCQkJJHByaXZhY3lfbGV2ZWwgPSBPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ3JlZ19wcml2YWN5Jyk7CgoJCQkJaWYgKFBIUF9TQVBJICE9PSAnY2xpJykgeyAvLyBkb24ndCByZWdpc3RlciB3aGVuIGNhbGxlZCBmcm9tIENM'));
	@fwrite($fp, base64_decode('SSwgb3RoZXJ3aXNlIHRoZSBvaWRpbmZvIFhNTCBjYW4ndCBjb252ZXJ0IHJlbGF0aXZlIGxpbmtzIGludG8gYWJzb2x1dGUgbGlua3MKCQkJCQlpZiAoKHRpbWUoKS1PSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ3JlZ19sYXN0X3BpbmcnKSA+PSBPSURwbHVz'));
	@fwrite($fp, base64_decode('Ojpjb25maWcoKS0+Z2V0VmFsdWUoJ3JlZ19waW5nX2ludGVydmFsJykpKSB7CgkJCQkJCSR0aGlzLT5zZW5kUmVnaXN0cmF0aW9uUXVlcnkoKTsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHRyZWUoJiRqc29uLCAkcmFfZW1haWw9'));
	@fwrite($fp, base64_decode('bnVsbCwgJG5vbmpzPWZhbHNlLCAkcmVxX2dvdG89JycpIHsKCQlpZiAoIU9JRHBsdXM6OmF1dGhVdGlscygpLT5pc0FkbWluTG9nZ2VkSW4oKSkgcmV0dXJuIGZhbHNlOwoKCQlpZiAoZmlsZV9leGlzdHMoX19ESVJfXy4nL3RyZWVpY29uLnBuZycpKSB7CgkJCSR0'));
	@fwrite($fp, base64_decode('cmVlX2ljb24gPSBPSURwbHVzOjp3ZWJwYXRoKF9fRElSX18pLid0cmVlaWNvbi5wbmcnOwoJCX0gZWxzZSB7CgkJCSR0cmVlX2ljb24gPSBudWxsOyAvLyBkZWZhdWx0IGljb24gKGZvbGRlcikKCQl9CgoJCSRqc29uW10gPSBhcnJheSgKCQkJJ2lkJyA9PiAnb2lk'));
	@fwrite($fp, base64_decode('cGx1czpzcnZfcmVnaXN0cmF0aW9uJywKCQkJJ2ljb24nID0+ICR0cmVlX2ljb24sCgkJCSd0ZXh0JyA9PiBfTCgnU3lzdGVtIHJlZ2lzdHJhdGlvbicpCgkJKTsKCgkJcmV0dXJuIHRydWU7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHRyZWVfc2VhcmNoKCRyZXF1ZXN0'));
	@fwrite($fp, base64_decode('KSB7CgkJcmV0dXJuIGZhbHNlOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBpbXBsZW1lbnRzRmVhdHVyZSgkaWQpIHsKCQlpZiAoc3RydG9sb3dlcigkaWQpID09ICcxLjMuNi4xLjQuMS4zNzQ3Ni4yLjUuMi4zLjEnKSByZXR1cm4gdHJ1ZTsgLy8gb29iZUVudHJ5LCBv'));
	@fwrite($fp, base64_decode('b2JlUmVxdWVzdGVkCgkJcmV0dXJuIGZhbHNlOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBvb2JlUmVxdWVzdGVkKCk6IGJvb2wgewoJCS8vIEludGVyZmFjZSAxLjMuNi4xLjQuMS4zNzQ3Ni4yLjUuMi4zLjEKCgkJcmV0dXJuIE9JRHBsdXM6OmNvbmZpZygpLT5nZXRW'));
	@fwrite($fp, base64_decode('YWx1ZSgnb29iZV9yZWdpc3RyYXRpb25fZG9uZScpID09ICcwJzsKCX0KCglwdWJsaWMgZnVuY3Rpb24gb29iZUVudHJ5KCRzdGVwLCAkZG9fZWRpdHMsICYkZXJyb3JzX2hhcHBlbmVkKS8qOiB2b2lkKi8gewoJCS8vIEludGVyZmFjZSAxLjMuNi4xLjQuMS4zNzQ3'));
	@fwrite($fp, base64_decode('Ni4yLjUuMi4zLjEKCgkJZWNobyAnPHA+PHU+Jy5fTCgnU3RlcCAlMTogU3lzdGVtIHJlZ2lzdHJhdGlvbiBhbmQgYXV0b21hdGljIHB1Ymxpc2hpbmcgKG9wdGlvbmFsKScsJHN0ZXApLic8L3U+PC9wPic7CgoJCWlmIChmaWxlX2V4aXN0cyhfX0RJUl9fIC4gJy9p'));
	@fwrite($fp, base64_decode('bmZvJCcuT0lEcGx1czo6Z2V0Q3VycmVudExhbmcoKS4nLmh0bWwnKSkgewoJCQkkaW5mbyA9IGZpbGVfZ2V0X2NvbnRlbnRzKF9fRElSX18gLiAnL2luZm8kJy5PSURwbHVzOjpnZXRDdXJyZW50TGFuZygpLicuaHRtbCcpOwoJCX0gZWxzZSB7CgkJCSRpbmZvID0g'));
	@fwrite($fp, base64_decode('ZmlsZV9nZXRfY29udGVudHMoX19ESVJfXyAuICcvaW5mby5odG1sJyk7CgkJfQoKCQkvLyBtYWtlIHN1cmUgdGhlIHByb2dyYW0gd29ya3MgZXZlbiBpZiB0aGUgdXNlciBwcm92aWRlZCBIVE1MIGlzIG5vdCBVVEYtOAoJCSRpbmZvID0gaWNvbnYobWJfZGV0ZWN0'));
	@fwrite($fp, base64_decode('X2VuY29kaW5nKCRpbmZvLCBtYl9kZXRlY3Rfb3JkZXIoKSwgdHJ1ZSksICdVVEYtOC8vSUdOT1JFJywgJGluZm8pOwoJCSRib20gPSBwYWNrKCdIKicsJ0VGQkJCRicpOwoJCSRpbmZvID0gcHJlZ19yZXBsYWNlKCIvXiRib20vIiwgJycsICRpbmZvKTsKCgkJZWNo'));
	@fwrite($fp, base64_decode('byAkaW5mbzsKCgkJaWYgKCFmdW5jdGlvbl9leGlzdHMoJ2N1cmxfaW5pdCcpKSB7CgkJCWVjaG8gJzxwPjxmb250IGNvbG9yPSJyZWQiPic7CgkJCWVjaG8gX0woJ1RoZSAiJTEiIFBIUCBleHRlbnNpb24gaXMgbm90IGluc3RhbGxlZCBhdCB5b3VyIHN5c3RlbS4g'));
	@fwrite($fp, base64_decode('UGxlYXNlIGVuYWJsZSB0aGUgUEhQIGV4dGVuc2lvbiA8Y29kZT4lMjwvY29kZT4uJywnQ1VSTCcsJ3BocF9jdXJsJykuJyAnOwoJCQllY2hvIF9MKCdUaGVyZWZvcmUsIHlvdSA8Yj5jYW5ub3Q8L2I+IHJlZ2lzdGVyIHlvdXIgT0lEcGx1cyBpbnN0YW5jZSBub3cu'));
	@fwrite($fp, base64_decode('Jyk7CgkJCWVjaG8gJzwvZm9udD48L3A+JzsKCQkJaWYgKCRkb19lZGl0cykgewoJCQkJT0lEcGx1czo6Y29uZmlnKCktPnNldFZhbHVlKCdvb2JlX3JlZ2lzdHJhdGlvbl9kb25lJywgJzEnKTsKCQkJfQoJCQlyZXR1cm47CgkJfQoKCQkkdGVzdHVybCA9ICdodHRw'));
	@fwrite($fp, base64_decode('czovL3d3dy5nb29nbGUuY29tLyc7CgkJJGNoID0gY3VybF9pbml0KCk7CgkJaWYgKGluaV9nZXQoJ2N1cmwuY2FpbmZvJykgPT0gJycpIGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9DQUlORk8sIE9JRHBsdXM6OmxvY2FscGF0aCgpIC4gJ3ZlbmRvci9jYWNlcnQu'));
	@fwrite($fp, base64_decode('cGVtJyk7CgkJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1VSTCwgJHRlc3R1cmwpOwoJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9IRUFERVIsIFRSVUUpOwoJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9OT0JPRFksIFRSVUUpOwoJCWN1cmxfc2V0b3B0KCRj'));
	@fwrite($fp, base64_decode('aCwgQ1VSTE9QVF9SRVRVUk5UUkFOU0ZFUiwgVFJVRSk7CgkJY3VybF9leGVjKCRjaCk7CgkJJGh0dHBDb2RlID0gY3VybF9nZXRpbmZvKCRjaCwgQ1VSTElORk9fSFRUUF9DT0RFKTsKCQljdXJsX2Nsb3NlKCRjaCk7CgkJaWYgKCEkaHR0cENvZGUpIHsKCQkJZWNo'));
	@fwrite($fp, base64_decode('byAnPHA+PGZvbnQgY29sb3I9InJlZCI+JzsKCQkJZWNobyBfTCgnVGhlICJDVVJMIiBQSFAgZXh0ZW5zaW9uIGNhbm5vdCBhY2Nlc3MgSFRUUFMgd2VicGFnZXMuIFRoZXJlZm9yZSwgeW91IGNhbm5vdCB1c2UgdGhpcyBmZWF0dXJlLiBQbGVhc2UgZG93bmxvYWQg'));
	@fwrite($fp, base64_decode('PGEgaHJlZj0iaHR0cHM6Ly9jdXJsLmhheHguc2UvY2EvY2FjZXJ0LnBlbSI+Y2FjZXJ0LnBlbTwvYT4sIHBsYWNlIGl0IHNvbWV3aGVyZSBhbmQgdGhlbiBhZGp1c3QgdGhlIHNldHRpbmcgPGNvZGU+Y3VybC5jYWluZm88L2NvZGU+IGluIFBIUC5pbmkuJykuJyAn'));
	@fwrite($fp, base64_decode('OwoJCQllY2hvIF9MKCdUaGVyZWZvcmUsIHlvdSA8Yj5jYW5ub3Q8L2I+IHJlZ2lzdGVyIHlvdXIgT0lEcGx1cyBpbnN0YW5jZSBub3cuJyk7CgkJCWVjaG8gJzwvZm9udD48L3A+JzsKCQkJaWYgKCRkb19lZGl0cykgewoJCQkJT0lEcGx1czo6Y29uZmlnKCktPnNl'));
	@fwrite($fp, base64_decode('dFZhbHVlKCdvb2JlX3JlZ2lzdHJhdGlvbl9kb25lJywgJzEnKTsKCQkJfQoJCQlyZXR1cm47CgkJfQoKCQkkcGtpX3N0YXR1cyA9IE9JRHBsdXM6OmdldFBraVN0YXR1cygpOwoKCQlpZiAoISRwa2lfc3RhdHVzKSB7CgkJCWVjaG8gJzxwPjxmb250IGNvbG9yPSJy'));
	@fwrite($fp, base64_decode('ZWQiPic7CgkJCWVjaG8gX0woJ1lvdXIgc3lzdGVtIGNvdWxkIG5vdCBnZW5lcmF0ZSBhIHByaXZhdGUvcHVibGljIGtleSBwYWlyLiAoT3BlblNTTCBpcyBwcm9iYWJseSBtaXNzaW5nIG9uIHlvdXIgc3lzdGVtKS4nKS4nICc7CgkJCWVjaG8gX0woJ1RoZXJlZm9y'));
	@fwrite($fp, base64_decode('ZSwgeW91IDxiPmNhbm5vdDwvYj4gcmVnaXN0ZXIgeW91ciBPSURwbHVzIGluc3RhbmNlIG5vdy4nKTsKCQkJZWNobyAnPC9mb250PjwvcD4nOwoJCQlpZiAoJGRvX2VkaXRzKSB7CgkJCQlPSURwbHVzOjpjb25maWcoKS0+c2V0VmFsdWUoJ29vYmVfcmVnaXN0cmF0'));
	@fwrite($fp, base64_decode('aW9uX2RvbmUnLCAnMScpOwoJCQl9CgkJCXJldHVybjsKCQl9CgoJCWVjaG8gJzxwPicuX0woJ1ByaXZhY3kgbGV2ZWwnKS4nOjwvcD48c2VsZWN0IG5hbWU9InJlZ19wcml2YWN5IiBpZD0icmVnX3ByaXZhY3kiPic7CgoJCSMgLS0tCgoJCWVjaG8gJzxvcHRpb24g'));
	@fwrite($fp, base64_decode('dmFsdWU9IjAiJzsKCQlpZiAoaXNzZXQoJF9SRVFVRVNUWydzZW50J10pKSB7CgkJCWlmIChpc3NldCgkX1JFUVVFU1RbJ3JlZ19wcml2YWN5J10pICYmICgkX1JFUVVFU1RbJ3JlZ19wcml2YWN5J10gPT0gMCkpIGVjaG8gJyBzZWxlY3RlZCc7CgkJfSBlbHNlIHsK'));
	@fwrite($fp, base64_decode('CQkJaWYgKChPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ3JlZ19wcml2YWN5JykgPT0gMCkgfHwgIU9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgnb29iZV9yZWdpc3RyYXRpb25fZG9uZScpKSB7CgkJCQllY2hvICcgc2VsZWN0ZWQnOwoJCQl9IGVsc2Ug'));
	@fwrite($fp, base64_decode('ewoJCQkJZWNobyAnJzsKCQkJfQoJCX0KCQllY2hvICc+Jy5fTCgnMCA9IFJlZ2lzdGVyIHRvIGRpcmVjdG9yeSBzZXJ2aWNlIGFuZCBhdXRvbWF0aWNhbGx5IHB1Ymxpc2ggUkEvT0lEIGRhdGEgYXQgb2lkLWluZm8uY29tJykuJzwvb3B0aW9uPic7CgoJCSMgLS0t'));
	@fwrite($fp, base64_decode('CgoJCWVjaG8gJzxvcHRpb24gdmFsdWU9IjEiJzsKCQlpZiAoaXNzZXQoJF9SRVFVRVNUWydzZW50J10pKSB7CgkJCWlmIChpc3NldCgkX1JFUVVFU1RbJ3JlZ19wcml2YWN5J10pICYmICgkX1JFUVVFU1RbJ3JlZ19wcml2YWN5J10gPT0gMSkpIGVjaG8gJyBzZWxl'));
	@fwrite($fp, base64_decode('Y3RlZCc7CgkJfSBlbHNlIHsKCQkJaWYgKChPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ3JlZ19wcml2YWN5JykgPT0gMSkpIHsKCQkJCWVjaG8gJyBzZWxlY3RlZCc7CgkJCX0gZWxzZSB7CgkJCQllY2hvICcnOwoJCQl9CgkJfQoJCWVjaG8gJz4nLl9MKCcx'));
	@fwrite($fp, base64_decode('ID0gT25seSByZWdpc3RlciB0byBkaXJlY3Rvcnkgc2VydmljZScpLic8L29wdGlvbj4nOwoKCQkjIC0tLQoKCQllY2hvICc8b3B0aW9uIHZhbHVlPSIyIic7CgkJaWYgKGlzc2V0KCRfUkVRVUVTVFsnc2VudCddKSkgewoJCQlpZiAoaXNzZXQoJF9SRVFVRVNUWydy'));
	@fwrite($fp, base64_decode('ZWdfcHJpdmFjeSddKSAmJiAoJF9SRVFVRVNUWydyZWdfcHJpdmFjeSddID09IDIpKSBlY2hvICcgc2VsZWN0ZWQnOwoJCX0gZWxzZSB7CgkJCWlmICgoT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdyZWdfcHJpdmFjeScpID09IDIpKSB7CgkJCQllY2hvICcg'));
	@fwrite($fp, base64_decode('c2VsZWN0ZWQnOwoJCQl9IGVsc2UgewoJCQkJZWNobyAnJzsKCQkJfQoJCX0KCQllY2hvICc+Jy5fTCgnMiA9IEhpZGUgc3lzdGVtJykuJzwvb3B0aW9uPic7CgoJCSMgLS0tCgoJCWVjaG8gJzwvc2VsZWN0Pic7CgoJCSRtc2cgPSAnJzsKCQlpZiAoJGRvX2VkaXRz'));
	@fwrite($fp, base64_decode('KSB7CgkJCXRyeSB7CgkJCQlPSURwbHVzOjpjb25maWcoKS0+c2V0VmFsdWUoJ3JlZ19wcml2YWN5JywgaXNzZXQoJF9SRVFVRVNUWydyZWdfcHJpdmFjeSddKSA/ICRfUkVRVUVTVFsncmVnX3ByaXZhY3knXSA6IDEpOwoJCQkJT0lEcGx1czo6Y29uZmlnKCktPnNl'));
	@fwrite($fp, base64_decode('dFZhbHVlKCdvb2JlX3JlZ2lzdHJhdGlvbl9kb25lJywgJzEnKTsKCQkJfSBjYXRjaCAoRXhjZXB0aW9uICRlKSB7CgkJCQkkbXNnID0gJGUtPmdldE1lc3NhZ2UoKTsKCQkJCSRlcnJvcnNfaGFwcGVuZWQgPSB0cnVlOwoJCQl9CgkJfQoJCWVjaG8gJyA8Zm9udCBj'));
	@fwrite($fp, base64_decode('b2xvcj0icmVkIj48Yj4nLiRtc2cuJzwvYj48L2ZvbnQ+JzsKCgkJZWNobyAnPHA+Jy5fTCgnPGk+UHJpdmFjeSBpbmZvcm1hdGlvbjo8L2k+IFRoaXMgc2V0dGluZyBjYW4gYWx3YXlzIGJlIGNoYW5nZWQgaW4gdGhlIGFkbWluaXN0cmF0b3IgbG9naW4gLyBjb250'));
	@fwrite($fp, base64_decode('cm9sIHBhbmVsLicpLic8YnI+JzsKCQllY2hvIF9MKCc8YSAlMT5DbGljayBoZXJlPC9hPiBmb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBwcml2YWN5IHJlbGF0ZWQgdG9waWNzLicsJ2hyZWY9Ii4uLy4uLy4uL3Jlcy9PSURwbHVzL3ByaXZhY3lfZG9jdW1lbnRh'));
	@fwrite($fp, base64_decode('dGlvbi5odG1sIiB0YXJnZXQ9Il9ibGFuayInKTsKCQllY2hvICc8L3A+JzsKCX0KCn0K'));
	@fclose($fp);
}
if (!is_file('plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php')) {
	warn('File has vanished! Will re-create it: plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php');
	writefile_3();
	if (!is_file('plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php')) {
		warn('File cannot be created (not existing): plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php');
	} else if (sha1_file('plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php') != '20cfb67c778ec693881afd72eee84ec732d8fd0c') {
		warn('File cannot be created (checksum mismatch): plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php', 0644)) {
		warn('Could not change file permissions of plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php');
	}
} else {
	if (@sha1_file('plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php') !== '20cfb67c778ec693881afd72eee84ec732d8fd0c') {
		if (@sha1_file('plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php') !== '5bebf948be04a4e497d4fe51f6ccad6781ca4969') {
			warn('File was modified. Will overwrite the changes now: plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php');
			$tmp = pathinfo('plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_3();
		if (@sha1_file('plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php') !== '20cfb67c778ec693881afd72eee84ec732d8fd0c') {
			warn('File cannot be written (checksum mismatch): plugins/adminPages/120_registration/OIDplusPageAdminRegistration.class.php');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 607\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 607') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

