<?php /* <ViaThinkSoftSignature>
T8izz8Kn/SjG8wCsz78ElzXbKWKCwEhAORMS2e4l6OtpQytQ7e2RtL/ysiGEYpmI3
aN9ZhH8xh0CAsUta30PGzbSrgUnvq3sb6kGj14AScrDRfEmi9ItG9WHnUAa9tauJu
Ci2iSI9wAUFk/OAlRwgBQt+GR5gBCtfpmLOXYQQMH/Y5/UsTcGxhTZGk+MjKYVylw
UFghtn999aGy9GGNVI/I1TUbc7k518lTxjIK2nE8TUSY1r6xla1xjlOaAOjCURryt
XEyuFgvRNE8vXj0mQBuntHCmACLPg3QQI3S53ezY5vnh0n8hOXHyJXHb+n8sqbnAo
TUTggcsgOnfTBDKnhIttxLQYE903eovRPGCYWkBo7xJ6+/7sPIfCSLwvAfMAhoYU0
J4ifRQP7pceMIucnPJ9pp0uMg0QFzbSpy7G8qKa9wFHsEWnMMhmh2yfDQkGGlRym+
wL9FSe1ltkIDR2fwtL0clu78ILG9gl44Q01q5fl9ST18a5105kWUzJv15sjSxYFkM
OWH7Weq6gvtVqhsUTy7p6j2Gji3YDqt/fz1q+KI0ujL8alb2Qk853fv6Oou439T7R
gnbVBg9KIOFNiMyiusi97CVuhXyirgVAXu43anpc4EuMGcJIPhdjI5qm6KZEsWWX+
0otOUU3S4QVuo1U1bDl9gGfey8iPgqcI/MnKdfFYNpRY61EY8tqL3n2XgK6FA/kub
3REm4wLn8NrZZ4uFqQlZeTMv+qi963Sb049DhdNeTNguBwaT5QXaiP9P0F+j/LLh2
9sEDYlNT/5hOd/06Lkd8RpVngP+eeYIsEPTEUpRLnerm7RgMJNrf60JsIGIZ9c2+T
JMrVGeb9qDbvl/yeBugJ7TD5Pr2lOp4hHyGCmlBrWTqAm6RNtCL0Znnek5wxIc34i
0cBVcO7obeX/tcphkABFpAL+KtVBNWwhPRbdmanFr4C878m1T2tiApHP2EuToi6Ag
4PW0j2FOf26YXfjozezYVImSNUISyG2qYHWyDPsFclsaAaYCgVHXpQu+CLPmxnFvz
lbFq6TfPyKjIcTqW7A9c9U2K6q11XJfvXorvYiaNcJI/WuZlV0gCIaKwzJ3U+i99k
YixoFlUSxr5z8tJxZTxhOy6YcAFVK46QWH6nc5N0S5E2JpDVYifFfeFNENawiCyq3
5dAnC9CQZ52cqqWSrtFCBHCiQugs0Ft4/sojCY0uxD2lcTJrFgizhLLq9EmzEHX7g
usKrMzOzCLN/Zn6q4twogLNG1GwCabTegsIqF4tYasRpv9tprsPvJWi4fOX9xIz8r
Qe1W9d4j9aLWwqaeFVZWnDlnMf71u/8mT0ZmFR9O9iaQ8m3wP+NvtHzX47gcuQjkD
Q==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 229') {
	err('This update can only be applied to OIDplus version 2.0.0.229!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: includes/classes/OIDplus.class.php
function writefile_1() {
	@$fp = fopen('includes/classes/OIDplus.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmlmICghZGVmaW5lZCgnSU5fT0lEUExVUycpKSBkaWUoKTsKCmNsYXNzIE9JRHBsdXMgewoJcHJpdmF0ZSBzdGF0aWMgLypPSURwbHVzUGFnZVBsdWdpbltdW10qLyAkcGFnZVBsdWdpbnMgPSBhcnJh'));
	@fwrite($fp, base64_decode('eSgpOwoJcHJpdmF0ZSBzdGF0aWMgLypPSURwbHVzQXV0aFBsdWdpbltdW10qLyAkYXV0aFBsdWdpbnMgPSBhcnJheSgpOwoJcHJpdmF0ZSBzdGF0aWMgLypPSURwbHVzT2JqZWN0VHlwZVBsdWdpbltdKi8gJG9iamVjdFR5cGVQbHVnaW5zID0gYXJyYXkoKTsKCXBy'));
	@fwrite($fp, base64_decode('aXZhdGUgc3RhdGljIC8qc3RyaW5nW10qLyAkZW5hYmxlZE9iamVjdFR5cGVzID0gYXJyYXkoKTsKCXByaXZhdGUgc3RhdGljIC8qc3RyaW5nW10qLyAkZGlzYWJsZWRPYmplY3RUeXBlcyA9IGFycmF5KCk7Cglwcml2YXRlIHN0YXRpYyAvKk9JRHBsdXNEYXRhYmFz'));
	@fwrite($fp, base64_decode('ZVBsdWdpbltdKi8gJGRiUGx1Z2lucyA9IGFycmF5KCk7CgoJcHJpdmF0ZSBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpIHsKCX0KCgkjIC0tLSBTaW5nbGV0b24gY2xhc3NlcwoKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gY29uZmlnKCkgewoJCXN0YXRpYyAkY29uZmln'));
	@fwrite($fp, base64_decode('ID0gbnVsbDsKCQlpZiAoaXNfbnVsbCgkY29uZmlnKSkgewoJCQkkY29uZmlnID0gbmV3IE9JRHBsdXNDb25maWcoKTsKCQl9CgkJcmV0dXJuICRjb25maWc7Cgl9CgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBndWkoKSB7CgkJc3RhdGljICRndWkgPSBudWxsOwoJ'));
	@fwrite($fp, base64_decode('CWlmIChpc19udWxsKCRndWkpKSB7CgkJCSRndWkgPSBuZXcgT0lEcGx1c0d1aSgpOwoJCX0KCQlyZXR1cm4gJGd1aTsKCX0KCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGF1dGhVdGlscygpIHsKCQlzdGF0aWMgJGF1dGhVdGlscyA9IG51bGw7CgkJaWYgKGlzX251'));
	@fwrite($fp, base64_decode('bGwoJGF1dGhVdGlscykpIHsKCQkJJGF1dGhVdGlscyA9IG5ldyBPSURwbHVzQXV0aFV0aWxzKCk7CgkJfQoJCXJldHVybiAkYXV0aFV0aWxzOwoJfQoKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gbG9nZ2VyKCkgewoJCXN0YXRpYyAkbG9nZ2VyID0gbnVsbDsKCQlp'));
	@fwrite($fp, base64_decode('ZiAoaXNfbnVsbCgkbG9nZ2VyKSkgewoJCQkkbG9nZ2VyID0gbmV3IE9JRHBsdXNMb2dnZXIoKTsKCQl9CgkJcmV0dXJuICRsb2dnZXI7Cgl9CgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBzZXNIYW5kbGVyKCkgewoJCXN0YXRpYyAkc2VzSGFuZGxlciA9IG51bGw7'));
	@fwrite($fp, base64_decode('CgkJaWYgKGlzX251bGwoJHNlc0hhbmRsZXIpKSB7CgkJCSRzZXNIYW5kbGVyID0gbmV3IE9JRHBsdXNTZXNzaW9uSGFuZGxlcihPSURQTFVTX1NFU1NJT05fU0VDUkVUKTsKCQl9CgkJcmV0dXJuICRzZXNIYW5kbGVyOwoJfQoKCSMgLS0tIERhdGFiYXNlIHBsdWdp'));
	@fwrite($fp, base64_decode('bgoKCXByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIHJlZ2lzdGVyRGF0YWJhc2VQbHVnaW4oT0lEcGx1c0RhdGFiYXNlUGx1Z2luICRwbHVnaW4pIHsKCQkkbmFtZSA9ICRwbHVnaW4tPm5hbWUoKTsKCQlpZiAoJG5hbWUgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7CgoJ'));
	@fwrite($fp, base64_decode('CXNlbGY6OiRkYlBsdWdpbnNbJG5hbWVdID0gJHBsdWdpbjsKCgkJcmV0dXJuIHRydWU7Cgl9CgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXREYXRhYmFzZVBsdWdpbnMoKSB7CgkJcmV0dXJuIHNlbGY6OiRkYlBsdWdpbnM7Cgl9CgoJcHVibGljIHN0YXRpYyBm'));
	@fwrite($fp, base64_decode('dW5jdGlvbiBkYigpIHsKCQlpZiAoIWlzc2V0KHNlbGY6OiRkYlBsdWdpbnNbT0lEUExVU19EQVRBQkFTRV9QTFVHSU5dKSkgewoJCQl0aHJvdyBuZXcgRXhjZXB0aW9uKCJEYXRhYmFzZSBwbHVnaW4gJyIuaHRtbGVudGl0aWVzKE9JRFBMVVNfREFUQUJBU0VfUExV'));
	@fwrite($fp, base64_decode('R0lOKS4iJyBub3QgZm91bmQuIFBsZWFzZSBjaGVjayBjb25maWcuaW5jLnBocCBvciBydW4gPGEgaHJlZj1cInNldHVwL1wiPnNldHVwPC9hPiBhZ2Fpbi4iKTsKCQl9CgkJJG9iaiA9IHNlbGY6OiRkYlBsdWdpbnNbT0lEUExVU19EQVRBQkFTRV9QTFVHSU5dOwoJ'));
	@fwrite($fp, base64_decode('CWlmICghJG9iai0+aXNDb25uZWN0ZWQoKSkgJG9iai0+Y29ubmVjdCgpOwoJCXJldHVybiAkb2JqOwoJfQoKCSMgLS0tIFBhZ2UgcGx1Z2luCgoJcHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gcmVnaXN0ZXJQYWdlUGx1Z2luKE9JRHBsdXNQYWdlUGx1Z2luICRwbHVn'));
	@fwrite($fp, base64_decode('aW4pIHsKCQkkdHlwZSA9ICRwbHVnaW4tPnR5cGUoKTsKCQlpZiAoJHR5cGUgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7CgoJCSRwcmlvID0gJHBsdWdpbi0+cHJpb3JpdHkoKTsKCQlpZiAoJHByaW8gPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7CgoJCWlmICghaXNz'));
	@fwrite($fp, base64_decode('ZXQoc2VsZjo6JHBhZ2VQbHVnaW5zWyR0eXBlXSkpIHNlbGY6OiRwYWdlUGx1Z2luc1skdHlwZV0gPSBhcnJheSgpOwoJCXNlbGY6OiRwYWdlUGx1Z2luc1skdHlwZV1bJHByaW9dID0gJHBsdWdpbjsKCgkJcmV0dXJuIHRydWU7Cgl9CgoJcHVibGljIHN0YXRpYyBm'));
	@fwrite($fp, base64_decode('dW5jdGlvbiBnZXRQYWdlUGx1Z2lucygkdHlwZT0nKicpIHsKCQlpZiAoJHR5cGUgPT09ICcqJykgewoJCQkkcmVzID0gYXJyYXkoKTsKCQkJZm9yZWFjaCAoc2VsZjo6JHBhZ2VQbHVnaW5zIGFzICRkYXRhKSB7CgkJCQkkcmVzID0gYXJyYXlfbWVyZ2UoJHJlcywg'));
	@fwrite($fp, base64_decode('JGRhdGEpOwoJCQl9CgkJfSBlbHNlIHsKCQkJJHR5cGVzID0gZXhwbG9kZSgnLCcsICR0eXBlKTsKCQkJZm9yZWFjaCAoJHR5cGVzIGFzICR0eXBlKSB7CgkJCQkkcmVzID0gaXNzZXQoc2VsZjo6JHBhZ2VQbHVnaW5zWyR0eXBlXSkgPyBzZWxmOjokcGFnZVBsdWdp'));
	@fwrite($fp, base64_decode('bnNbJHR5cGVdIDogYXJyYXkoKTsKCQkJfQoJCX0KCQlrc29ydCgkcmVzKTsKCQlyZXR1cm4gJHJlczsKCX0KCgkjIC0tLSBBdXRoIHBsdWdpbgoKCXByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIHJlZ2lzdGVyQXV0aFBsdWdpbihPSURwbHVzQXV0aFBsdWdpbiAkcGx1'));
	@fwrite($fp, base64_decode('Z2luKSB7CgkJc2VsZjo6JGF1dGhQbHVnaW5zW10gPSAkcGx1Z2luOwoJCXJldHVybiB0cnVlOwoJfQoKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0QXV0aFBsdWdpbnMoKSB7CgkJcmV0dXJuIHNlbGY6OiRhdXRoUGx1Z2luczsKCX0KCgkjIC0tLSBPYmplY3Qg'));
	@fwrite($fp, base64_decode('dHlwZSBwbHVnaW4KCglwcml2YXRlIHN0YXRpYyBmdW5jdGlvbiByZWdpc3Rlck9iamVjdFR5cGVQbHVnaW4oT0lEcGx1c09iamVjdFR5cGVQbHVnaW4gJHBsdWdpbikgewoJCXNlbGY6OiRvYmplY3RUeXBlUGx1Z2luc1tdID0gJHBsdWdpbjsKCgkJJG90ID0gJHBs'));
	@fwrite($fp, base64_decode('dWdpbjo6Z2V0T2JqZWN0VHlwZUNsYXNzTmFtZSgpOwoJCXNlbGY6OnJlZ2lzdGVyT2JqZWN0VHlwZSgkb3QpOwoKCQlyZXR1cm4gdHJ1ZTsKCX0KCglwcml2YXRlIHN0YXRpYyBmdW5jdGlvbiByZWdpc3Rlck9iamVjdFR5cGUoJG90KSB7CgkJJG5zID0gJG90Ojpu'));
	@fwrite($fp, base64_decode('cygpOwoKCQlpZiAoZW1wdHkoJG5zKSkgZGllKCJBdHRlbnRpb246IEVtcHR5IE5TIGF0ICRvdFxuIik7CgoJCSRuc19mb3VuZCA9IGZhbHNlOwoJCWZvcmVhY2ggKGFycmF5X21lcmdlKE9JRHBsdXM6OmdldEVuYWJsZWRPYmplY3RUeXBlcygpLCBPSURwbHVzOjpn'));
	@fwrite($fp, base64_decode('ZXREaXNhYmxlZE9iamVjdFR5cGVzKCkpIGFzICR0ZXN0X290KSB7CgkJCWlmICgkdGVzdF9vdDo6bnMoKSA9PSAkbnMpIHsKCQkJCSRuc19mb3VuZCA9IHRydWU7CgkJCQlicmVhazsKCQkJfQoJCX0KCQlpZiAoJG5zX2ZvdW5kKSB7CgkJCXRocm93IG5ldyBFeGNl'));
	@fwrite($fp, base64_decode('cHRpb24oIkF0dGVudGlvbjogVHdvIG9iamVjdFR5cGUgcGx1Z2lucyB1c2UgdGhlIHNhbWUgbmFtZXNwYWNlIFwiJG5zXCIhIik7CgkJfQoKCQkkaW5pdCA9IE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgib2JqZWN0dHlwZXNfaW5pdGlhbGl6ZWQiKTsKCQkk'));
	@fwrite($fp, base64_decode('aW5pdF9hcnkgPSBlbXB0eSgkaW5pdCkgPyBhcnJheSgpIDogZXhwbG9kZSgnOycsICRpbml0KTsKCQkkaW5pdF9hcnkgPSBhcnJheV9tYXAoJ3RyaW0nLCAkaW5pdF9hcnkpOwoKCQkkZW5hYmxlZCA9IE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgib2JqZWN0'));
	@fwrite($fp, base64_decode('dHlwZXNfZW5hYmxlZCIpOwoJCSRlbmFibGVkX2FyeSA9IGVtcHR5KCRlbmFibGVkKSA/IGFycmF5KCkgOiBleHBsb2RlKCc7JywgJGVuYWJsZWQpOwoJCSRlbmFibGVkX2FyeSA9IGFycmF5X21hcCgndHJpbScsICRlbmFibGVkX2FyeSk7CgoJCSRkb19lbmFibGUg'));
	@fwrite($fp, base64_decode('PSBmYWxzZTsKCQlpZiAoaW5fYXJyYXkoJG5zLCAkZW5hYmxlZF9hcnkpKSB7CgkJCSRkb19lbmFibGUgPSB0cnVlOwoJCX0gZWxzZSB7CgkJCWlmICghT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdyZWdpc3RyYXRpb25fZG9uZScpKSB7CgkJCQkkZG9fZW5h'));
	@fwrite($fp, base64_decode('YmxlID0gJG5zID09ICdvaWQnOwoJCQl9IGVsc2UgewoJCQkJJGRvX2VuYWJsZSA9ICFpbl9hcnJheSgkbnMsICRpbml0X2FyeSk7CgkJCX0KCQl9CgoJCWlmICgkZG9fZW5hYmxlKSB7CgkJCXNlbGY6OiRlbmFibGVkT2JqZWN0VHlwZXNbXSA9ICRvdDsKCQkJdXNv'));
	@fwrite($fp, base64_decode('cnQoc2VsZjo6JGVuYWJsZWRPYmplY3RUeXBlcywgZnVuY3Rpb24oJGEsICRiKSB7CgkJCQkkZW5hYmxlZCA9IE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgib2JqZWN0dHlwZXNfZW5hYmxlZCIpOwoJCQkJJGVuYWJsZWRfYXJ5ID0gZXhwbG9kZSgnOycsICRl'));
	@fwrite($fp, base64_decode('bmFibGVkKTsKCgkJCQkkaWR4X2EgPSBhcnJheV9zZWFyY2goJGE6Om5zKCksICRlbmFibGVkX2FyeSk7CgkJCQkkaWR4X2IgPSBhcnJheV9zZWFyY2goJGI6Om5zKCksICRlbmFibGVkX2FyeSk7CgoJCQkgICAgICAgIGlmICgkaWR4X2EgPT0gJGlkeF9iKSB7CgkJ'));
	@fwrite($fp, base64_decode('CSAgICAgICAgICAgIHJldHVybiAwOwoJCQkgICAgICAgIH0KCQkJICAgICAgICByZXR1cm4gKCRpZHhfYSA+ICRpZHhfYikgPyArMSA6IC0xOwoJCQl9KTsKCQl9IGVsc2UgewoJCQlzZWxmOjokZGlzYWJsZWRPYmplY3RUeXBlc1tdID0gJG90OwoJCX0KCgkJaWYg'));
	@fwrite($fp, base64_decode('KCFpbl9hcnJheSgkbnMsICRpbml0X2FyeSkpIHsKCQkJLy8gV2FzIG5ldmVyIGluaXRpYWxpemVkIGJlZm9yZSwgc28gd2UgYWRkIGl0IHRvIHRoZSBsaXN0IG9mIGVuYWJsZWQgb2JqZWN0IHR5cGVzIG9uY2UKCgkJCWlmICgkZG9fZW5hYmxlKSB7CgkJCQkkZW5h'));
	@fwrite($fp, base64_decode('YmxlZF9hcnlbXSA9ICRuczsKCQkJCU9JRHBsdXM6OmNvbmZpZygpLT5zZXRWYWx1ZSgib2JqZWN0dHlwZXNfZW5hYmxlZCIsIGltcGxvZGUoJzsnLCAkZW5hYmxlZF9hcnkpKTsKCQkJfQoKCQkJJGluaXRfYXJ5W10gPSAkbnM7CgkJCU9JRHBsdXM6OmNvbmZpZygp'));
	@fwrite($fp, base64_decode('LT5zZXRWYWx1ZSgib2JqZWN0dHlwZXNfaW5pdGlhbGl6ZWQiLCBpbXBsb2RlKCc7JywgJGluaXRfYXJ5KSk7CgkJfQoJfQoKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0T2JqZWN0VHlwZVBsdWdpbnMoKSB7CgkJcmV0dXJuIHNlbGY6OiRvYmplY3RUeXBlUGx1'));
	@fwrite($fp, base64_decode('Z2luczsKCX0KCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldE9iamVjdFR5cGVQbHVnaW5zRW5hYmxlZCgpIHsKCQkkcmVzID0gYXJyYXkoKTsKCQlmb3JlYWNoIChzZWxmOjokb2JqZWN0VHlwZVBsdWdpbnMgYXMgJHBsdWdpbikgewoJCQkkb3QgPSAkcGx1Z2lu'));
	@fwrite($fp, base64_decode('OjpnZXRPYmplY3RUeXBlQ2xhc3NOYW1lKCk7CgkJCWlmIChpbl9hcnJheSgkb3QsIHNlbGY6OiRlbmFibGVkT2JqZWN0VHlwZXMpKSAkcmVzW10gPSAkcGx1Z2luOwoJCX0KCQlyZXR1cm4gJHJlczsKCX0KCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldE9iamVj'));
	@fwrite($fp, base64_decode('dFR5cGVQbHVnaW5zRGlzYWJsZWQoKSB7CgkJJHJlcyA9IGFycmF5KCk7CgkJZm9yZWFjaCAoc2VsZjo6JG9iamVjdFR5cGVQbHVnaW5zIGFzICRwbHVnaW4pIHsKCQkJJG90ID0gJHBsdWdpbjo6Z2V0T2JqZWN0VHlwZUNsYXNzTmFtZSgpOwoJCQlpZiAoaW5fYXJy'));
	@fwrite($fp, base64_decode('YXkoJG90LCBzZWxmOjokZGlzYWJsZWRPYmplY3RUeXBlcykpICRyZXNbXSA9ICRwbHVnaW47CgkJfQoJCXJldHVybiAkcmVzOwoJfQoKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0RW5hYmxlZE9iamVjdFR5cGVzKCkgewoJCXJldHVybiBzZWxmOjokZW5hYmxl'));
	@fwrite($fp, base64_decode('ZE9iamVjdFR5cGVzOwoJfQoKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0RGlzYWJsZWRPYmplY3RUeXBlcygpIHsKCQlyZXR1cm4gc2VsZjo6JGRpc2FibGVkT2JqZWN0VHlwZXM7Cgl9CgoJIyAtLS0gSW5pdGlhbGl6YXRpb24gb2YgT0lEcGx1cwoKCXB1Ymxp'));
	@fwrite($fp, base64_decode('YyBzdGF0aWMgZnVuY3Rpb24gaW5pdCgkaHRtbD10cnVlKSB7CgkJLy8gSW5jbHVkZSBjb25maWcgZmlsZQoKCQlpZiAoZmlsZV9leGlzdHMoX19ESVJfXyAuICcvLi4vY29uZmlnLmluYy5waHAnKSkgewoJCQlpbmNsdWRlX29uY2UgX19ESVJfXyAuICcvLi4vY29u'));
	@fwrite($fp, base64_decode('ZmlnLmluYy5waHAnOwoJCX0gZWxzZSB7CgkJCWlmICgkaHRtbCkgewoJCQkJaWYgKCFpc19kaXIoJ3NldHVwJykpIHsKCQkJCQllY2hvICdFcnJvcjogU2V0dXAgZGlyZWN0b3J5IG1pc3NpbmcuJzsKCQkJCX0gZWxzZSB7CgkJCQkJaGVhZGVyKCdMb2NhdGlvbjpz'));
	@fwrite($fp, base64_decode('ZXR1cC8nKTsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCWVjaG8gJ0Vycm9yOiBTZXR1cCBkaXJlY3RvcnkgbWlzc2luZyEnOwoJCQl9CgkJCWRpZSgpOwoJCX0KCgkJLy8gQXV0by1maWxsIG5vbi1leGlzdGluZyBjb25maWcgdmFsdWVzLCBzbyB0aGF0IHRoZXJlIHdv'));
	@fwrite($fp, base64_decode('bid0IGJlIGFueSBQSFAgZXJyb3JzCgkJLy8gaWYgc29tZXRoaW5nIHdvdWxkIGJlIG1pc3NpbmcgaW4gY29uZmlnLmluYy5waHAgKHdoaWNoIHNob3VsZCBub3QgaGFwcGVuISkKCgkJaWYgKCFkZWZpbmVkKCdPSURQTFVTX0NPTkZJR19WRVJTSU9OJykpICAgZGVm'));
	@fwrite($fp, base64_decode('aW5lKCdPSURQTFVTX0NPTkZJR19WRVJTSU9OJywgICAwLjApOwoJCWlmICghZGVmaW5lZCgnT0lEUExVU19BRE1JTl9QQVNTV09SRCcpKSAgIGRlZmluZSgnT0lEUExVU19BRE1JTl9QQVNTV09SRCcsICAgJycpOwoJCWlmICghZGVmaW5lZCgnT0lEUExVU19EQVRB'));
	@fwrite($fp, base64_decode('QkFTRV9QTFVHSU4nKSkgIGRlZmluZSgnT0lEUExVU19EQVRBQkFTRV9QTFVHSU4nLCAgJ015U1FMJyk7CgkJaWYgKCFkZWZpbmVkKCdPSURQTFVTX01ZU1FMX0hPU1QnKSkgICAgICAgZGVmaW5lKCdPSURQTFVTX01ZU1FMX0hPU1QnLCAgICAgICAnbG9jYWxob3N0'));
	@fwrite($fp, base64_decode('Jyk7CgkJaWYgKCFkZWZpbmVkKCdPSURQTFVTX01ZU1FMX1VTRVJOQU1FJykpICAgZGVmaW5lKCdPSURQTFVTX01ZU1FMX1VTRVJOQU1FJywgICAncm9vdCcpOwoJCWlmICghZGVmaW5lZCgnT0lEUExVU19NWVNRTF9QQVNTV09SRCcpKSAgIGRlZmluZSgnT0lEUExV'));
	@fwrite($fp, base64_decode('U19NWVNRTF9QQVNTV09SRCcsICAgJycpOyAvLyBiYXNlNjQgZW5jb2RlZAoJCWlmICghZGVmaW5lZCgnT0lEUExVU19NWVNRTF9EQVRBQkFTRScpKSAgIGRlZmluZSgnT0lEUExVU19NWVNRTF9EQVRBQkFTRScsICAgJ29pZHBsdXMnKTsKCQlpZiAoIWRlZmluZWQo'));
	@fwrite($fp, base64_decode('J09JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWCcpKSBkZWZpbmUoJ09JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWCcsICcnKTsKCQlpZiAoIWRlZmluZWQoJ09JRFBMVVNfU0VTU0lPTl9TRUNSRVQnKSkgICBkZWZpbmUoJ09JRFBMVVNfU0VTU0lPTl9TRUNSRVQnLCAgICcn'));
	@fwrite($fp, base64_decode('KTsKCQlpZiAoIWRlZmluZWQoJ1JFQ0FQVENIQV9FTkFCTEVEJykpICAgICAgICBkZWZpbmUoJ1JFQ0FQVENIQV9FTkFCTEVEJywgICAgICAgIGZhbHNlKTsKCQlpZiAoIWRlZmluZWQoJ1JFQ0FQVENIQV9QVUJMSUMnKSkgICAgICAgICBkZWZpbmUoJ1JFQ0FQVENI'));
	@fwrite($fp, base64_decode('QV9QVUJMSUMnLCAgICAgICAgICcnKTsKCQlpZiAoIWRlZmluZWQoJ1JFQ0FQVENIQV9QUklWQVRFJykpICAgICAgICBkZWZpbmUoJ1JFQ0FQVENIQV9QUklWQVRFJywgICAgICAgICcnKTsKCQlpZiAoIWRlZmluZWQoJ09JRFBMVVNfRU5GT1JDRV9TU0wnKSkgICAg'));
	@fwrite($fp, base64_decode('ICBkZWZpbmUoJ09JRFBMVVNfRU5GT1JDRV9TU0wnLCAgICAgIDIgLyogQXV0byAqLyk7CgoJCS8vIENoZWNrIHZlcnNpb24gb2YgdGhlIGNvbmZpZyBmaWxlCgoJCWlmIChPSURQTFVTX0NPTkZJR19WRVJTSU9OICE9IDIuMCkgewoJCQlpZiAoJGh0bWwpIHsKCQkJ'));
	@fwrite($fp, base64_decode('CWVjaG8gJzxoMT5FcnJvcjwvaDE+PHA+VGhlIGluZm9ybWF0aW9uIGxvY2F0ZWQgaW4gPGI+aW5jbHVkZXMvY29uZmlnLmluYy5waHA8L2I+IGlzIG91dGRhdGVkLjwvcD48cD5QbGVhc2UgcnVuIDxhIGhyZWY9InNldHVwLyI+c2V0dXA8L2E+IGFnYWluLjwvcD4n'));
	@fwrite($fp, base64_decode('OwoJCQl9IGVsc2UgewoJCQkJZWNobyAnVGhlIGluZm9ybWF0aW9uIGxvY2F0ZWQgaW4gaW5jbHVkZXMvY29uZmlnLmluYy5waHAgaXMgb3V0ZGF0ZWQuIFBsZWFzZSBydW4gc2V0dXAgYWdhaW4uJzsKCQkJfQoJCQlkaWUoKTsKCQl9CgoJCS8vIFJlZ2lzdGVyIGRh'));
	@fwrite($fp, base64_decode('dGFiYXNlIHR5cGVzIChoaWdoZXN0IHByaW9yaXR5KQoKCQkkYXJ5ID0gZ2xvYihfX0RJUl9fIC4gJy8uLi8uLi9wbHVnaW5zL2RhdGFiYXNlLycuJyonLicvcGx1Z2luLmluYy5waHAnKTsKCQlmb3JlYWNoICgkYXJ5IGFzICRhKSBpbmNsdWRlICRhOwoKCQlmb3Jl'));
	@fwrite($fp, base64_decode('YWNoIChnZXRfZGVjbGFyZWRfY2xhc3NlcygpIGFzICRjKSB7CgkJCWlmIChpc19zdWJjbGFzc19vZigkYywgJ09JRHBsdXNEYXRhQmFzZVBsdWdpbicpKSB7CgkJCQlzZWxmOjpyZWdpc3RlckRhdGFiYXNlUGx1Z2luKG5ldyAkYygpKTsKCQkJfQoJCX0KCgkJLy8g'));
	@fwrite($fp, base64_decode('RG8gcmVkaXJlY3Qgc3R1ZmYgZXRjLgoKCQlzZWxmOjppc1NzbEF2YWlsYWJsZSgpOyAvLyBUaGlzIGZ1bmN0aW9uIGRvZXMgYXV0b21hdGljIHJlZGlyZWN0cwoKCQkvLyBTeXN0ZW0gY29uZmlnIHNldHRpbmdzCgoJCU9JRHBsdXM6OmNvbmZpZygpLT5wcmVwYXJl'));
	@fwrite($fp, base64_decode('Q29uZmlnS2V5KCdvYmplY3R0eXBlc19pbml0aWFsaXplZCcsICdMaXN0IG9mIG9iamVjdCB0eXBlIHBsdWdpbnMgdGhhdCB3ZXJlIGluaXRpYWxpemVkIG9uY2UnLCAnJywgMSwgMSk7CgkJT0lEcGx1czo6Y29uZmlnKCktPnByZXBhcmVDb25maWdLZXkoJ29iamVj'));
	@fwrite($fp, base64_decode('dHR5cGVzX2VuYWJsZWQnLCAnRW5hYmxlZCBvYmplY3QgdHlwZXMgYW5kIHRoZWlyIG9yZGVyLCBzZXBhcmF0ZWQgd2l0aCBhIHNlbWljb2xvbiAocGxlYXNlIHJlbG9hZCB0aGUgcGFnZSBzbyB0aGF0IHRoZSBjaGFuZ2UgaXMgYXBwbGllZCknLCAnJywgMCwgMSk7'));
	@fwrite($fp, base64_decode('CgoJCU9JRHBsdXM6OmNvbmZpZygpLT5wcmVwYXJlQ29uZmlnS2V5KCdvaWRwbHVzX3ByaXZhdGVfa2V5JywgJ1ByaXZhdGUga2V5IGZvciB0aGlzIHN5c3RlbScsICcnLCAxLCAwKTsKCQlPSURwbHVzOjpjb25maWcoKS0+cHJlcGFyZUNvbmZpZ0tleSgnb2lkcGx1'));
	@fwrite($fp, base64_decode('c19wdWJsaWNfa2V5JywgJ1B1YmxpYyBrZXkgZm9yIHRoaXMgc3lzdGVtLiBJZiB5b3UgImNsb25lIiB5b3VyIHN5c3RlbSwgeW91IG11c3QgZGVsZXRlIHRoaXMga2V5IChlLmcuIHVzaW5nIHBocE15QWRtaW4pLCBzbyB0aGF0IGEgbmV3IG9uZSBpcyBjcmVhdGVk'));
	@fwrite($fp, base64_decode('LicsICcnLCAxLCAxKTsKCgkJLy8gSW5pdGlhbGl6ZSBwdWJsaWMgLyBwcml2YXRlIGtleXMKCgkJT0lEcGx1czo6Z2V0UGtpU3RhdHVzKHRydWUpOwoKCQkvLyBSZWdpc3RlciBvdGhlciBwbHVnaW5zCgoJCSRhcnkgPSBnbG9iKF9fRElSX18gLiAnLy4uLy4uL3Bs'));
	@fwrite($fp, base64_decode('dWdpbnMvb2JqZWN0VHlwZXMvJy4nKicuJy9wbHVnaW4uaW5jLnBocCcpOwoJCWZvcmVhY2ggKCRhcnkgYXMgJGEpIGluY2x1ZGUgJGE7CgoJCSRhcnkgPSBnbG9iKF9fRElSX18gLiAnLy4uLy4uL3BsdWdpbnMvcHVibGljUGFnZXMvJy4nKicuJy9wbHVnaW4uaW5j'));
	@fwrite($fp, base64_decode('LnBocCcpOwoJCWZvcmVhY2ggKCRhcnkgYXMgJGEpIGluY2x1ZGUgJGE7CgkJJGFyeSA9IGdsb2IoX19ESVJfXyAuICcvLi4vLi4vcGx1Z2lucy9yYVBhZ2VzLycuJyonLicvcGx1Z2luLmluYy5waHAnKTsKCQlmb3JlYWNoICgkYXJ5IGFzICRhKSBpbmNsdWRlICRh'));
	@fwrite($fp, base64_decode('OwoJCSRhcnkgPSBnbG9iKF9fRElSX18gLiAnLy4uLy4uL3BsdWdpbnMvYWRtaW5QYWdlcy8nLicqJy4nL3BsdWdpbi5pbmMucGhwJyk7CgkJZm9yZWFjaCAoJGFyeSBhcyAkYSkgaW5jbHVkZSAkYTsKCgkJJGFyeSA9IGdsb2IoX19ESVJfXyAuICcvLi4vLi4vcGx1'));
	@fwrite($fp, base64_decode('Z2lucy9hdXRoLycuJyonLicvcGx1Z2luLmluYy5waHAnKTsKCQlmb3JlYWNoICgkYXJ5IGFzICRhKSBpbmNsdWRlICRhOwoKCQlmb3JlYWNoIChnZXRfZGVjbGFyZWRfY2xhc3NlcygpIGFzICRjKSB7CgkJCWlmIChpc19zdWJjbGFzc19vZigkYywgJ09JRHBsdXNQ'));
	@fwrite($fp, base64_decode('YWdlUGx1Z2luJykpIHsKCQkJCXNlbGY6OnJlZ2lzdGVyUGFnZVBsdWdpbihuZXcgJGMoKSk7CgkJCX0KCQkJaWYgKGlzX3N1YmNsYXNzX29mKCRjLCAnT0lEcGx1c0F1dGhQbHVnaW4nKSkgewoJCQkJc2VsZjo6cmVnaXN0ZXJBdXRoUGx1Z2luKG5ldyAkYygpKTsK'));
	@fwrite($fp, base64_decode('CQkJfQoJCQlpZiAoaXNfc3ViY2xhc3Nfb2YoJGMsICdPSURwbHVzT2JqZWN0VHlwZVBsdWdpbicpKSB7CgkJCQlzZWxmOjpyZWdpc3Rlck9iamVjdFR5cGVQbHVnaW4obmV3ICRjKCkpOwoJCQl9CgkJfQoKCQkvLyBJbml0aWFsaXplIHBsdWdpbnMKCgkJZm9yZWFj'));
	@fwrite($fp, base64_decode('aCAoT0lEcGx1czo6Z2V0RGF0YWJhc2VQbHVnaW5zKCkgYXMgJHBsdWdpbikgewoJCQkkcGx1Z2luLT5pbml0KCRodG1sKTsKCQl9CgkJZm9yZWFjaCAoT0lEcGx1czo6Z2V0UGFnZVBsdWdpbnMoJyonKSBhcyAkcGx1Z2luKSB7CgkJCSRwbHVnaW4tPmluaXQoJGh0'));
	@fwrite($fp, base64_decode('bWwpOwoJCX0KCQlmb3JlYWNoIChPSURwbHVzOjpnZXRBdXRoUGx1Z2lucygpIGFzICRwbHVnaW4pIHsKCQkJJHBsdWdpbi0+aW5pdCgkaHRtbCk7CgkJfQoJCWZvcmVhY2ggKE9JRHBsdXM6OmdldE9iamVjdFR5cGVQbHVnaW5zKCkgYXMgJHBsdWdpbikgewoJCQkk'));
	@fwrite($fp, base64_decode('cGx1Z2luLT5pbml0KCRodG1sKTsKCQl9Cgl9CgoJIyAtLS0gU3lzdGVtIFVSTCwgU3lzdGVtIElELCBQS0ksIGFuZCBvdGhlciBmdW5jdGlvbnMKCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldFN5c3RlbVVybCgkcmVsYXRpdmU9ZmFsc2UpIHsKCQlpZiAoIWlz'));
	@fwrite($fp, base64_decode('c2V0KCRfU0VSVkVSWyJTQ1JJUFRfTkFNRSJdKSkgcmV0dXJuIGZhbHNlOwoKCQkkdGVzdF9kaXIgPSBkaXJuYW1lKCRfU0VSVkVSWydTQ1JJUFRfRklMRU5BTUUnXSk7CgkJJGMgPSAwOwoJCXdoaWxlICghZmlsZV9leGlzdHMoJHRlc3RfZGlyLicvb2lkcGx1c19i'));
	@fwrite($fp, base64_decode('YXNlLmpzJykpIHsKCQkJJHRlc3RfZGlyID0gZGlybmFtZSgkdGVzdF9kaXIpOwoJCQkkYysrOwoJCQlpZiAoJGMgPT0gMTAwMCkgcmV0dXJuIGZhbHNlOwoJCX0KCgkJJHJlcyA9IGRpcm5hbWUoJF9TRVJWRVJbJ1NDUklQVF9OQU1FJ10uJ3h4eCcpOwoKCQlmb3Ig'));
	@fwrite($fp, base64_decode('KCRpPTE7ICRpPD0kYzsgJGkrKykgewoJCQkkcmVzID0gZGlybmFtZSgkcmVzKTsKCQl9CgoJCWlmICgkcmVzID09ICcvJykgJHJlcyA9ICcnOwoJCSRyZXMgLj0gJy8nOwoKCQlpZiAoISRyZWxhdGl2ZSkgewoJCQkkaXNfc3NsID0gaXNzZXQoJF9TRVJWRVJbJ0hU'));
	@fwrite($fp, base64_decode('VFBTJ10pICYmICgkX1NFUlZFUlsnSFRUUFMnXSA9PT0gJ29uJyk7CgkJCSRwcm90b2NvbCA9ICRpc19zc2wgPyAnaHR0cHMnIDogJ2h0dHAnOwoJCQkkaG9zdCA9ICRfU0VSVkVSWydIVFRQX0hPU1QnXTsKCQkJJHBvcnQgPSAkX1NFUlZFUlsnU0VSVkVSX1BPUlQn'));
	@fwrite($fp, base64_decode('XTsKCQkJaWYgKCRpc19zc2wgJiYgKCRwb3J0ICE9IDQ0MykpIHsKCQkJCSRwb3J0X2FkZCA9ICI6JHBvcnQiOwoJCQl9IGVsc2UgaWYgKCEkaXNfc3NsICYmICgkcG9ydCAhPSA4MCkpIHsKCQkJCSRwb3J0X2FkZCA9ICI6JHBvcnQiOwoJCQl9IGVsc2UgewoJCQkJ'));
	@fwrite($fp, base64_decode('JHBvcnRfYWRkID0gIiI7CgkJCX0KCQkJJHJlcyA9ICRwcm90b2NvbC4nOi8vJy4kaG9zdC4kcG9ydF9hZGQuJHJlczsKCQl9CgoJCXJldHVybiAkcmVzOwoJfQoKCXByaXZhdGUgc3RhdGljICRzeXN0ZW1faWRfY2FjaGUgPSBudWxsOwoJcHVibGljIHN0YXRpYyBm'));
	@fwrite($fp, base64_decode('dW5jdGlvbiBnZXRTeXN0ZW1JZCgkb2lkPWZhbHNlKSB7CgkJaWYgKCFpc19udWxsKHNlbGY6OiRzeXN0ZW1faWRfY2FjaGUpKSB7CgkJCSRvdXQgPSBzZWxmOjokc3lzdGVtX2lkX2NhY2hlOwoJCX0gZWxzZSB7CgkJCSRvdXQgPSBmYWxzZTsKCgkJCWlmIChzZWxm'));
	@fwrite($fp, base64_decode('OjpnZXRQa2lTdGF0dXModHJ1ZSkpIHsKCQkJCSRwdWJLZXkgPSBPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ29pZHBsdXNfcHVibGljX2tleScpOwoJCQkJaWYgKHByZWdfbWF0Y2goJ0BCRUdJTiBQVUJMSUMgS0VZXC0rKC4rKVwtK0VORCBQVUJMSUMgS0VZ'));
	@fwrite($fp, base64_decode('QGlzbVUnLCAkcHViS2V5LCAkbSkpIHsKCQkJCQkkb3V0ID0gc21hbGxoYXNoKGJhc2U2NF9kZWNvZGUoJG1bMV0pKTsKCQkJCX0KCQkJfQoJCQlzZWxmOjokc3lzdGVtX2lkX2NhY2hlID0gJG91dDsKCQl9CgkJcmV0dXJuICgkb2lkID8gJzEuMy42LjEuNC4xLjM3'));
	@fwrite($fp, base64_decode('NDc2LjMwLjkuJyA6ICcnKS4kb3V0OwoJfQoKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0UGtpU3RhdHVzKCR0cnlfZ2VuZXJhdGU9dHJ1ZSkgewoJCWlmICghZnVuY3Rpb25fZXhpc3RzKCdvcGVuc3NsX3BrZXlfbmV3JykpIHJldHVybiBmYWxzZTsKCgkJJHBy'));
	@fwrite($fp, base64_decode('aXZLZXkgPSBPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ29pZHBsdXNfcHJpdmF0ZV9rZXknKTsKCQkkcHViS2V5ID0gT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdvaWRwbHVzX3B1YmxpY19rZXknKTsKCgkJaWYgKCR0cnlfZ2VuZXJhdGUgJiYgIXZl'));
	@fwrite($fp, base64_decode('cmlmeV9wcml2YXRlX3B1YmxpY19rZXkoJHByaXZLZXksICRwdWJLZXkpKSB7CgkJCU9JRHBsdXM6OmxvZ2dlcigpLT5sb2coIkEhIiwgIkdlbmVyYXRpbmcgbmV3IFN5c3RlbUlEIHVzaW5nIGEgbmV3IGtleSBwYWlyIik7CgoJCQkkY29uZmlnID0gYXJyYXkoCgkJ'));
	@fwrite($fp, base64_decode('CSAgICAiZGlnZXN0X2FsZyIgPT4gInNoYTUxMiIsCgkJCSAgICAicHJpdmF0ZV9rZXlfYml0cyIgPT4gMjA0OCwKCQkJICAgICJwcml2YXRlX2tleV90eXBlIiA9PiBPUEVOU1NMX0tFWVRZUEVfUlNBLAoJCQkpOwoKCQkJLy8gQ3JlYXRlIHRoZSBwcml2YXRlIGFu'));
	@fwrite($fp, base64_decode('ZCBwdWJsaWMga2V5CgkJCSRyZXMgPSBvcGVuc3NsX3BrZXlfbmV3KCRjb25maWcpOwoKCQkJLy8gRXh0cmFjdCB0aGUgcHJpdmF0ZSBrZXkgZnJvbSAkcmVzIHRvICRwcml2S2V5CgkJCW9wZW5zc2xfcGtleV9leHBvcnQoJHJlcywgJHByaXZLZXkpOwoKCQkJLy8g'));
	@fwrite($fp, base64_decode('RXh0cmFjdCB0aGUgcHVibGljIGtleSBmcm9tICRyZXMgdG8gJHB1YktleQoJCQkkcHViS2V5ID0gb3BlbnNzbF9wa2V5X2dldF9kZXRhaWxzKCRyZXMpWyJrZXkiXTsKCgkJCS8vIFNhdmUgdGhlIGtleSBwYWlyIHRvIGRhdGFiYXNlCgkJCU9JRHBsdXM6OmNvbmZp'));
	@fwrite($fp, base64_decode('ZygpLT5zZXRWYWx1ZSgnb2lkcGx1c19wcml2YXRlX2tleScsICRwcml2S2V5KTsKCQkJT0lEcGx1czo6Y29uZmlnKCktPnNldFZhbHVlKCdvaWRwbHVzX3B1YmxpY19rZXknLCAkcHViS2V5KTsKCgkJCS8vIExvZyB0aGUgbmV3IHN5c3RlbSBJRAoJCQlpZiAocHJl'));
	@fwrite($fp, base64_decode('Z19tYXRjaCgnQEJFR0lOIFBVQkxJQyBLRVlcLSsoLispXC0rRU5EIFBVQkxJQyBLRVlAaXNtVScsICRwdWJLZXksICRtKSkgewoJCQkJJHN5c3RlbV9pZCA9IHNtYWxsaGFzaChiYXNlNjRfZGVjb2RlKCRtWzFdKSk7CgkJCQlPSURwbHVzOjpsb2dnZXIoKS0+bG9n'));
	@fwrite($fp, base64_decode('KCJBISIsICJZb3VyIFN5c3RlbUlEIGlzIG5vdyAkc3lzdGVtX2lkIik7CgkJCX0KCQl9CgoJCXJldHVybiB2ZXJpZnlfcHJpdmF0ZV9wdWJsaWNfa2V5KCRwcml2S2V5LCAkcHViS2V5KTsKCX0KCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEluc3RhbGxUeXBl'));
	@fwrite($fp, base64_decode('KCkgewoJCWlmICghZmlsZV9leGlzdHMoX19ESVJfXyAuICcvLi4vLi4vb2lkcGx1c192ZXJzaW9uLnR4dCcpICYmICFpc19kaXIoX19ESVJfXyAuICcvLi4vLi4vLnN2bicpKSB7CgkJCXJldHVybiAndW5rbm93bic7CgkJfQoJCWlmIChmaWxlX2V4aXN0cyhfX0RJ'));
	@fwrite($fp, base64_decode('Ul9fIC4gJy8uLi8uLi9vaWRwbHVzX3ZlcnNpb24udHh0JykgJiYgaXNfZGlyKF9fRElSX18gLiAnLy4uLy4uLy5zdm4nKSkgewoJCQlyZXR1cm4gJ2FtYmlnb3VzJzsKCQl9CgkJaWYgKGlzX2RpcihfX0RJUl9fIC4gJy8uLi8uLi8uc3ZuJykpIHsKCQkJcmV0dXJu'));
	@fwrite($fp, base64_decode('ICdzdm4td2MnOwoJCX0KCQlpZiAoZmlsZV9leGlzdHMoX19ESVJfXyAuICcvLi4vLi4vb2lkcGx1c192ZXJzaW9uLnR4dCcpKSB7CgkJCXJldHVybiAnc3ZuLXNuYXBzaG90JzsKCQl9Cgl9CgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRWZXJzaW9uKCkgewoJ'));
	@fwrite($fp, base64_decode('CSRzdm5fdmVyc2lvbiA9IG51bGw7CgoJCWlmIChmaWxlX2V4aXN0cyhfX0RJUl9fIC4gJy8uLi8uLi9vaWRwbHVzX3ZlcnNpb24udHh0JykgJiYgaXNfZGlyKF9fRElSX18gLiAnLy4uLy4uLy5zdm4nKSkgewoJCQlyZXR1cm4gZmFsc2U7IC8vIGFtYmlnb3VzCgkJ'));
	@fwrite($fp, base64_decode('fQoKCQlpZiAoaXNfZGlyKF9fRElSX18gLiAnLy4uLy4uLy5zdm4nKSkgewoJCQkvLyBUcnkgdG8gZmluZCBvdXQgdGhlIFNWTiB2ZXJzaW9uIHVzaW5nIHRoZSBzaGVsbAoJCQkkc3RhdHVzID0gQHNoZWxsX2V4ZWMoJ3N2bnZlcnNpb24gJy5yZWFscGF0aChfX0ZJ'));
	@fwrite($fp, base64_decode('TEVfXykpOwoJCQlpZiAocHJlZ19tYXRjaCgnL1xkKy8nLCAkc3RhdHVzLCAkbWF0Y2gpKSB7CgkJCQkkc3ZuX3ZlcnNpb24gPSAnc3ZuLScuJG1hdGNoWzBdOwoJCQl9CgoJCQkvLyBJZiB0aGF0IGZhaWxlZCwgdHJ5IHRvIGdldCB0aGUgdmVyc2lvbiB2aWEgU1FM'));
	@fwrite($fp, base64_decode('aXRlMwoJCQlpZiAoaXNfbnVsbCgkc3ZuX3ZlcnNpb24pKSB7CgkJCQkkZGIgPSBuZXcgU1FMaXRlMyhfX0RJUl9fIC4gJy8uLi8uLi8uc3ZuL3djLmRiJyk7CgkJCQkkcmVzdWx0cyA9ICRkYi0+cXVlcnkoJ1NFTEVDVCBNSU4ocmV2aXNpb24pIEFTIHJldiBGUk9N'));
	@fwrite($fp, base64_decode('IE5PREVTX0JBU0UnKTsKCQkJCXdoaWxlICgkcm93ID0gJHJlc3VsdHMtPmZldGNoQXJyYXkoKSkgewoJCQkJCSRzdm5fdmVyc2lvbiA9ICdzdm4tJy4kcm93WydyZXYnXTsKCQkJCX0KCQkJfQoJCX0KCgkJaWYgKGZpbGVfZXhpc3RzKF9fRElSX18gLiAnLy4uLy4u'));
	@fwrite($fp, base64_decode('L29pZHBsdXNfdmVyc2lvbi50eHQnKSkgewoJCQkkY29udCA9IGZpbGVfZ2V0X2NvbnRlbnRzKF9fRElSX18gLiAnLy4uLy4uL29pZHBsdXNfdmVyc2lvbi50eHQnKTsKCQkJaWYgKCFwcmVnX21hdGNoKCdAUmV2aXNpb24gKFxkKylAJywgJGNvbnQsICRtKSkKCQkJ'));
	@fwrite($fp, base64_decode('CXJldHVybiBmYWxzZTsgLy8gRmlsZSBoYXMgdW5rbm93biBmb3JtYXQKCQkJJHN2bl92ZXJzaW9uID0gJ3N2bi0nLiRtWzFdOwoJCX0KCgkJcmV0dXJuICRzdm5fdmVyc2lvbjsKCX0KCglwcml2YXRlIHN0YXRpYyAkc3NsQXZhaWxhYmxlQ2FjaGUgPSBudWxsOwoJ'));
	@fwrite($fp, base64_decode('cHVibGljIHN0YXRpYyBmdW5jdGlvbiBpc1NzbEF2YWlsYWJsZSgpIHsKCQlpZiAoIWlzX251bGwoc2VsZjo6JHNzbEF2YWlsYWJsZUNhY2hlKSkgcmV0dXJuIHNlbGY6OiRzc2xBdmFpbGFibGVDYWNoZTsKCQoJCWlmIChwaHBfc2FwaV9uYW1lKCkgPT0gJ2NsaScp'));
	@fwrite($fp, base64_decode('IHsKCQkJc2VsZjo6JHNzbEF2YWlsYWJsZUNhY2hlID0gZmFsc2U7CgkJCXJldHVybiBmYWxzZTsKCQl9CgoJCSR0aW1lb3V0ID0gMjsKCQkkYWxyZWFkeV9zc2wgPSBpc3NldCgkX1NFUlZFUlsnSFRUUFMnXSkgJiYgKCRfU0VSVkVSWydIVFRQUyddID09ICJvbiIp'));
	@fwrite($fp, base64_decode('OwoJCSRzc2xfcG9ydCA9IDQ0MzsKCQkkY29va2llX3BhdGggPSBPSURwbHVzOjpnZXRTeXN0ZW1VcmwodHJ1ZSk7CgkJaWYgKGVtcHR5KCRjb29raWVfcGF0aCkpICRjb29raWVfcGF0aCA9ICcvJzsKCgkJaWYgKE9JRFBMVVNfRU5GT1JDRV9TU0wgPT0gMCkgewoJ'));
	@fwrite($fp, base64_decode('CQkvLyBObyBTU0wgYXZhaWxhYmxlCgkJCXNlbGY6OiRzc2xBdmFpbGFibGVDYWNoZSA9ICRhbHJlYWR5X3NzbDsKCQkJcmV0dXJuICRhbHJlYWR5X3NzbDsKCQl9CgoJCWlmIChPSURQTFVTX0VORk9SQ0VfU1NMID09IDEpIHsKCQkJLy8gRm9yY2UgU1NMCgkJCWlm'));
	@fwrite($fp, base64_decode('ICgkYWxyZWFkeV9zc2wpIHsKCQkJCXNlbGY6OiRzc2xBdmFpbGFibGVDYWNoZSA9IHRydWU7CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfSBlbHNlIHsKCQkJCSRsb2NhdGlvbiA9ICdodHRwczovLycgLiAkX1NFUlZFUlsnSFRUUF9IT1NUJ10gLiAkX1NFUlZFUlsnUkVR'));
	@fwrite($fp, base64_decode('VUVTVF9VUkknXTsKCQkJCWhlYWRlcignTG9jYXRpb246Jy4kbG9jYXRpb24pOwoJCQkJZGllKCdSZWRpcmVjdCB0byBIVFRQUycpOwoJCQkJc2VsZjo6JHNzbEF2YWlsYWJsZUNhY2hlID0gdHJ1ZTsKCQkJCXJldHVybiB0cnVlOwoJCQl9CgkJfQoKCQlpZiAoT0lE'));
	@fwrite($fp, base64_decode('UExVU19FTkZPUkNFX1NTTCA9PSAyKSB7CgkJCS8vIEF1dG9tYXRpYyBTU0wgZGV0ZWN0aW9uCgoJCQlpZiAoJGFscmVhZHlfc3NsKSB7CgkJCQkvLyB3ZSBhcmUgYWxyZWFkeSBvbiBIVFRQUwoJCQkJc2V0Y29va2llKCdTU0xfQ0hFQ0snLCAnMScsIDAsICRjb29r'));
	@fwrite($fp, base64_decode('aWVfcGF0aCwgJycsIGZhbHNlLCB0cnVlKTsKCQkJCXNlbGY6OiRzc2xBdmFpbGFibGVDYWNoZSA9IHRydWU7CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfSBlbHNlIHsKCQkJCWlmIChpc3NldCgkX0NPT0tJRVsnU1NMX0NIRUNLJ10pKSB7CgkJCQkJLy8gV2UgYWxyZWFk'));
	@fwrite($fp, base64_decode('eSBoYWQgdGhlIEhUVFBTIGRldGVjdGlvbiBkb25lIGJlZm9yZS4KCQkJCQlpZiAoJF9DT09LSUVbJ1NTTF9DSEVDSyddKSB7CgkJCQkJCS8vIEhUVFBTIHdhcyBkZXRlY3RlZCBiZWZvcmUsIGJ1dCB3ZSBhcmUgSFRUUC4gUmVkaXJlY3Qgbm93CgkJCQkJCSRsb2Nh'));
	@fwrite($fp, base64_decode('dGlvbiA9ICdodHRwczovLycgLiAkX1NFUlZFUlsnSFRUUF9IT1NUJ10gLiAkX1NFUlZFUlsnUkVRVUVTVF9VUkknXTsKCQkJCQkJaGVhZGVyKCdMb2NhdGlvbjonLiRsb2NhdGlvbik7CgkJCQkJCWRpZSgnUmVkaXJlY3QgdG8gSFRUUFMnKTsKCQkJCQkJc2VsZjo6'));
	@fwrite($fp, base64_decode('JHNzbEF2YWlsYWJsZUNhY2hlID0gdHJ1ZTsKCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJfSBlbHNlIHsKCQkJCQkJLy8gTm8gSFRUUFMgYXZhaWxhYmxlLiBEbyBub3RoaW5nLgoJCQkJCQlzZWxmOjokc3NsQXZhaWxhYmxlQ2FjaGUgPSBmYWxzZTsKCQkJCQkJcmV0'));
	@fwrite($fp, base64_decode('dXJuIGZhbHNlOwoJCQkJCX0KCQkJCX0gZWxzZSB7CgkJCQkJLy8gVGhpcyBpcyBvdXIgZmlyc3QgY2hlY2sgKG9yIHRoZSBicm93c2VyIGRpZG4ndCBhY2NlcHQgdGhlIFNTTF9DSEVDSyBjb29raWUpCgkJCQkJaWYgKEBmc29ja29wZW4oJF9TRVJWRVJbJ0hUVFBf'));
	@fwrite($fp, base64_decode('SE9TVCddLCAkc3NsX3BvcnQsICRlcnJubywgJGVycnN0ciwgJHRpbWVvdXQpKSB7CgkJCQkJCS8vIEhUVFBTIGRldGVjdGVkLiBSZWRpcmVjdCBub3csIGFuZCByZW1lbWJlciB0aGF0IHdlIGhhZCBkZXRlY3RlZCBIVFRQUwoJCQkJCQlzZXRjb29raWUoJ1NTTF9D'));
	@fwrite($fp, base64_decode('SEVDSycsICcxJywgMCwgJGNvb2tpZV9wYXRoLCAnJywgZmFsc2UsIHRydWUpOwoJCQkJCQkkbG9jYXRpb24gPSAnaHR0cHM6Ly8nIC4gJF9TRVJWRVJbJ0hUVFBfSE9TVCddIC4gJF9TRVJWRVJbJ1JFUVVFU1RfVVJJJ107CgkJCQkJCWhlYWRlcignTG9jYXRpb246'));
	@fwrite($fp, base64_decode('Jy4kbG9jYXRpb24pOwoJCQkJCQlkaWUoJ1JlZGlyZWN0IHRvIEhUVFBTJyk7CgkJCQkJCXNlbGY6OiRzc2xBdmFpbGFibGVDYWNoZSA9IHRydWU7CgkJCQkJCXJldHVybiB0cnVlOwoJCQkJCX0gZWxzZSB7CgkJCQkJCS8vIE5vIEhUVFBTIGRldGVjdGVkLiBEbyBu'));
	@fwrite($fp, base64_decode('b3RoaW5nLCBhbmQgbmV4dCB0aW1lLCBkb24ndCB0cnkgdG8gZGV0ZWN0IEhUVFBTIGFnYWluLgoJCQkJCQlzZXRjb29raWUoJ1NTTF9DSEVDSycsICcwJywgMCwgJGNvb2tpZV9wYXRoLCAnJywgZmFsc2UsIHRydWUpOwoJCQkJCQlzZWxmOjokc3NsQXZhaWxhYmxl'));
	@fwrite($fp, base64_decode('Q2FjaGUgPSBmYWxzZTsKCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCX0KfQo='));
	@fclose($fp);
}
if (!is_file('includes/classes/OIDplus.class.php')) {
	warn('File has vanished! Will re-create it: includes/classes/OIDplus.class.php');
	writefile_1();
	if (!is_file('includes/classes/OIDplus.class.php')) {
		warn('File cannot be created (not existing): includes/classes/OIDplus.class.php');
	} else if (sha1_file('includes/classes/OIDplus.class.php') != 'c33480695779350b604ccef11fa9fa71fe7e0268') {
		warn('File cannot be created (checksum mismatch): includes/classes/OIDplus.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/classes/OIDplus.class.php', 0644)) {
		warn('Could not change file permissions of includes/classes/OIDplus.class.php');
	}
} else {
	if (@sha1_file('includes/classes/OIDplus.class.php') !== 'c33480695779350b604ccef11fa9fa71fe7e0268') {
		if (@sha1_file('includes/classes/OIDplus.class.php') !== 'bffa15f8793fa4236f60573432c3b72370253e20') {
			warn('File was modified. Will overwrite the changes now: includes/classes/OIDplus.class.php');
			$tmp = pathinfo('includes/classes/OIDplus.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/classes/OIDplus.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('includes/classes/OIDplus.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('includes/classes/OIDplus.class.php') !== 'c33480695779350b604ccef11fa9fa71fe7e0268') {
			warn('File cannot be written (checksum mismatch): includes/classes/OIDplus.class.php');
		}
	}
}

// Files different: includes/classes/OIDplusPagePlugin.class.php
function writefile_2() {
	@$fp = fopen('includes/classes/OIDplusPagePlugin.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmlmICghZGVmaW5lZCgnSU5fT0lEUExVUycpKSBkaWUoKTsKCmNsYXNzIE9JRHBsdXNQYWdlUGx1Z2luIGV4dGVuZHMgT0lEcGx1c1BsdWdpbiB7CglwdWJsaWMgZnVuY3Rpb24gdHlwZSgpIHt9Cglw'));
	@fwrite($fp, base64_decode('dWJsaWMgZnVuY3Rpb24gcHJpb3JpdHkoKSB7fQoJcHVibGljIGZ1bmN0aW9uIGFjdGlvbigmJGhhbmRsZWQpIHt9CglwdWJsaWMgZnVuY3Rpb24gY2ZnU2V0VmFsdWUoJG5hbWUsICR2YWx1ZSkge30KCXB1YmxpYyBmdW5jdGlvbiBndWkoJGlkLCAmJG91dCwgJiRo'));
	@fwrite($fp, base64_decode('YW5kbGVkKSB7fQoJcHVibGljIGZ1bmN0aW9uIHRyZWUoJiRqc29uLCAkcmFfZW1haWw9bnVsbCwgJG5vbmpzPWZhbHNlLCAkcmVxX2dvdG89JycpIHt9CglwdWJsaWMgZnVuY3Rpb24gbW9kaWZ5Q29udGVudCgkaWQsICYkdGl0bGUsICYkaWNvbiwgJiR0ZXh0KSB7'));
	@fwrite($fp, base64_decode('fQoJcHVibGljIGZ1bmN0aW9uIHRyZWVfc2VhcmNoKCRyZXF1ZXN0KSB7fQp9Cgo='));
	@fclose($fp);
}
if (!is_file('includes/classes/OIDplusPagePlugin.class.php')) {
	warn('File has vanished! Will re-create it: includes/classes/OIDplusPagePlugin.class.php');
	writefile_2();
	if (!is_file('includes/classes/OIDplusPagePlugin.class.php')) {
		warn('File cannot be created (not existing): includes/classes/OIDplusPagePlugin.class.php');
	} else if (sha1_file('includes/classes/OIDplusPagePlugin.class.php') != 'bba41f2789f455e0d081f410f17686afba766e61') {
		warn('File cannot be created (checksum mismatch): includes/classes/OIDplusPagePlugin.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/classes/OIDplusPagePlugin.class.php', 0644)) {
		warn('Could not change file permissions of includes/classes/OIDplusPagePlugin.class.php');
	}
} else {
	if (@sha1_file('includes/classes/OIDplusPagePlugin.class.php') !== 'bba41f2789f455e0d081f410f17686afba766e61') {
		if (@sha1_file('includes/classes/OIDplusPagePlugin.class.php') !== '6fd35fc4843217e98e260d0047fc1ef4f28e6fb7') {
			warn('File was modified. Will overwrite the changes now: includes/classes/OIDplusPagePlugin.class.php');
			$tmp = pathinfo('includes/classes/OIDplusPagePlugin.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/classes/OIDplusPagePlugin.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('includes/classes/OIDplusPagePlugin.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_2();
		if (@sha1_file('includes/classes/OIDplusPagePlugin.class.php') !== 'bba41f2789f455e0d081f410f17686afba766e61') {
			warn('File cannot be written (checksum mismatch): includes/classes/OIDplusPagePlugin.class.php');
		}
	}
}

// Files different: includes/classes/OIDplusPlugin.class.php
function writefile_3() {
	@$fp = fopen('includes/classes/OIDplusPlugin.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmlmICghZGVmaW5lZCgnSU5fT0lEUExVUycpKSBkaWUoKTsKCmNsYXNzIE9JRHBsdXNQbHVnaW4gewoKCXB1YmxpYyBmdW5jdGlvbiBpbml0KCRodG1sPXRydWUpIHt9CgoJcHVibGljIHN0YXRpYyBm'));
	@fwrite($fp, base64_decode('dW5jdGlvbiBnZXRQbHVnaW5JbmZvcm1hdGlvbigpIHsKCQkkb3V0ID0gYXJyYXkoKTsKCQkkb3V0WyduYW1lJ10gPSBudWxsOwoJCSRvdXRbJ2F1dGhvciddID0gbnVsbDsKCQkkb3V0Wyd2ZXJzaW9uJ10gPSBudWxsOwoJCSRvdXRbJ2Rlc2NyaXB0aW9uSFRNTCdd'));
	@fwrite($fp, base64_decode('ID0gbnVsbDsKCQlyZXR1cm4gJG91dDsKCX0KCn0KCg=='));
	@fclose($fp);
}
if (!is_file('includes/classes/OIDplusPlugin.class.php')) {
	warn('File has vanished! Will re-create it: includes/classes/OIDplusPlugin.class.php');
	writefile_3();
	if (!is_file('includes/classes/OIDplusPlugin.class.php')) {
		warn('File cannot be created (not existing): includes/classes/OIDplusPlugin.class.php');
	} else if (sha1_file('includes/classes/OIDplusPlugin.class.php') != '2eef718fb8511118790daf400623531cc4e0f869') {
		warn('File cannot be created (checksum mismatch): includes/classes/OIDplusPlugin.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/classes/OIDplusPlugin.class.php', 0644)) {
		warn('Could not change file permissions of includes/classes/OIDplusPlugin.class.php');
	}
} else {
	if (@sha1_file('includes/classes/OIDplusPlugin.class.php') !== '2eef718fb8511118790daf400623531cc4e0f869') {
		if (@sha1_file('includes/classes/OIDplusPlugin.class.php') !== '5958582eee3511a9d5eba45f1fb9e8ff5f6634ad') {
			warn('File was modified. Will overwrite the changes now: includes/classes/OIDplusPlugin.class.php');
			$tmp = pathinfo('includes/classes/OIDplusPlugin.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/classes/OIDplusPlugin.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('includes/classes/OIDplusPlugin.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_3();
		if (@sha1_file('includes/classes/OIDplusPlugin.class.php') !== '2eef718fb8511118790daf400623531cc4e0f869') {
			warn('File cannot be written (checksum mismatch): includes/classes/OIDplusPlugin.class.php');
		}
	}
}

// Files different: includes/classes/OIDplusSessionHandler.class.php
function writefile_4() {
	@$fp = fopen('includes/classes/OIDplusSessionHandler.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmlmICghZGVmaW5lZCgnSU5fT0lEUExVUycpKSBkaWUoKTsKCmRlZmluZSgnU0VTU0lPTl9MSUZFVElNRScsIDMwKjYwKTsgLy8gVE9ETzogQ29uZmlndXJlLiBDdXJyZW50IGRlZmF1bHQ6IDMwIG1p'));
	@fwrite($fp, base64_decode('bnV0ZXMKCmNsYXNzIE9JRHBsdXNTZXNzaW9uSGFuZGxlciB7CgoJcHJvdGVjdGVkICRzZWNyZXQgPSAnJzsKCglmdW5jdGlvbiBfX2NvbnN0cnVjdCgkc2VjcmV0KSB7CgkJLy8gKipQUkVWRU5USU5HIFNFU1NJT04gSElKQUNLSU5HKioKCQkvLyBQcmV2ZW50cyBq'));
	@fwrite($fp, base64_decode('YXZhc2NyaXB0IFhTUyBhdHRhY2tzIGFpbWVkIHRvIHN0ZWFsIHRoZSBzZXNzaW9uIElECgkJQGluaV9zZXQoJ3Nlc3Npb24uY29va2llX2h0dHBvbmx5JywgMSk7CgoJCS8vICoqUFJFVkVOVElORyBTRVNTSU9OIEZJWEFUSU9OKioKCQkvLyBTZXNzaW9uIElEIGNh'));
	@fwrite($fp, base64_decode('bm5vdCBiZSBwYXNzZWQgdGhyb3VnaCBVUkxzCgkJQGluaV9zZXQoJ3Nlc3Npb24udXNlX29ubHlfY29va2llcycsIDEpOwoKCQlAaW5pX3NldCgnc2Vzc2lvbi51c2VfdHJhbnNfc2lkJywgMCk7CgoJCS8vIFVzZXMgYSBzZWN1cmUgY29ubmVjdGlvbiAoSFRUUFMp'));
	@fwrite($fp, base64_decode('IGlmIHBvc3NpYmxlCgkJQGluaV9zZXQoJ3Nlc3Npb24uY29va2llX3NlY3VyZScsIE9JRHBsdXM6OmlzU3NsQXZhaWxhYmxlKCkpOwoKCQkkcGF0aCA9IE9JRHBsdXM6OmdldFN5c3RlbVVybCh0cnVlKTsKCQlpZiAoIWVtcHR5KCRwYXRoKSkgewoJCQlAaW5pX3Nl'));
	@fwrite($fp, base64_decode('dCgnc2Vzc2lvbi5jb29raWVfcGF0aCcsICRwYXRoKTsKCQl9CgoJCUBpbmlfc2V0KCdzZXNzaW9uLmNvb2tpZV9zYW1lc2l0ZScsICdMYXgnKTsKCgkJQGluaV9zZXQoJ3Nlc3Npb24udXNlX3N0cmljdF9tb2RlJywgMSk7CgoJCUBpbmlfc2V0KCdzZXNzaW9uLmdj'));
	@fwrite($fp, base64_decode('X21heGxpZmV0aW1lJywgU0VTU0lPTl9MSUZFVElNRSk7CgoJCSR0aGlzLT5zZWNyZXQgPSAkc2VjcmV0OwoJfQoKCXByb3RlY3RlZCBmdW5jdGlvbiBzZXNzaW9uU2FmZVN0YXJ0KCkgewoJCWlmICghaXNzZXQoJF9TRVNTSU9OKSkgewoJCQkvLyBUT0RPOiBzZXNz'));
	@fwrite($fp, base64_decode('aW9uX25hbWUoKSBtYWtlcyBzb21lIHByb2JsZW1zLiBMZWF2ZSBpdCBhd2F5IGZvciBub3cuCgkJCS8vc2Vzc2lvbl9uYW1lKCdPSURQTFVTX1NFU0hETFInKTsKCQkJaWYgKCFzZXNzaW9uX3N0YXJ0KCkpIHsKCQkJCXRocm93IG5ldyBFeGNlcHRpb24oIlNlc3Np'));
	@fwrite($fp, base64_decode('b24gY291bGQgbm90IGJlIHN0YXJ0ZWQiKTsKCQkJfQoJCX0KCgkJaWYgKCFpc3NldCgkX1NFU1NJT05bJ2lwJ10pKSB7CgkJCWlmICghaXNzZXQoJF9TRVJWRVJbJ1JFTU9URV9BRERSJ10pKSByZXR1cm47CgoJCQkvLyBSZW1lbWJlciB0aGUgSVAgYWRkcmVzcyBv'));
	@fwrite($fp, base64_decode('ZiB0aGUgdXNlcgoJCQkkX1NFU1NJT05bJ2lwJ10gPSAkX1NFUlZFUlsnUkVNT1RFX0FERFInXTsKCQl9IGVsc2UgewoJCQlpZiAoJF9TRVJWRVJbJ1JFTU9URV9BRERSJ10gIT0gJF9TRVNTSU9OWydpcCddKSB7CgkJCQkvLyBXYXMgdGhlIHNlc3Npb24gaGlqYWNr'));
	@fwrite($fp, base64_decode('ZWQ/ISBHZXQgb3V0IG9mIGhlcmUhCgkJCQkkdGhpcy0+ZGVzdHJveVNlc3Npb24oKTsKCQkJfQoJCX0KCX0KCglmdW5jdGlvbiBfX2Rlc3RydWN0KCkgewoJCXNlc3Npb25fd3JpdGVfY2xvc2UoKTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gc2V0VmFsdWUoJG5hbWUs'));
	@fwrite($fp, base64_decode('ICR2YWx1ZSkgewoJCSR0aGlzLT5zZXNzaW9uU2FmZVN0YXJ0KCk7CgkJc2V0Y29va2llKHNlc3Npb25fbmFtZSgpLHNlc3Npb25faWQoKSx0aW1lKCkrU0VTU0lPTl9MSUZFVElNRSwgaW5pX2dldCgnc2Vzc2lvbi5jb29raWVfcGF0aCcpKTsKCgkJJF9TRVNTSU9O'));
	@fwrite($fp, base64_decode('WyRuYW1lXSA9IHNlbGY6OmVuY3J5cHQoJHZhbHVlLCAkdGhpcy0+c2VjcmV0KTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZ2V0VmFsdWUoJG5hbWUpIHsKCQlpZiAoIWlzc2V0KCRfQ09PS0lFW3Nlc3Npb25fbmFtZSgpXSkpIHJldHVybiBudWxsOyAvLyBHRFBSOiBP'));
	@fwrite($fp, base64_decode('bmx5IHN0YXJ0IGEgc2Vzc2lvbiB3aGVuIHdlIHJlYWxseSBuZWVkIG9uZQoKCQkkdGhpcy0+c2Vzc2lvblNhZmVTdGFydCgpOwoJCXNldGNvb2tpZShzZXNzaW9uX25hbWUoKSxzZXNzaW9uX2lkKCksdGltZSgpK1NFU1NJT05fTElGRVRJTUUsIGluaV9nZXQoJ3Nl'));
	@fwrite($fp, base64_decode('c3Npb24uY29va2llX3BhdGgnKSk7CgoJCWlmICghaXNzZXQoJF9TRVNTSU9OWyRuYW1lXSkpIHJldHVybiBudWxsOwoJCXJldHVybiBzZWxmOjpkZWNyeXB0KCRfU0VTU0lPTlskbmFtZV0sICR0aGlzLT5zZWNyZXQpOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBkZXN0'));
	@fwrite($fp, base64_decode('cm95U2Vzc2lvbigpIHsKCQlpZiAoIWlzc2V0KCRfQ09PS0lFW3Nlc3Npb25fbmFtZSgpXSkpIHJldHVybjsKCgkJJHRoaXMtPnNlc3Npb25TYWZlU3RhcnQoKTsKCQlzZXRjb29raWUoc2Vzc2lvbl9uYW1lKCksc2Vzc2lvbl9pZCgpLHRpbWUoKStTRVNTSU9OX0xJ'));
	@fwrite($fp, base64_decode('RkVUSU1FLCBpbmlfZ2V0KCdzZXNzaW9uLmNvb2tpZV9wYXRoJykpOwoKCQkkX1NFU1NJT04gPSBhcnJheSgpOwoJCXNlc3Npb25fZGVzdHJveSgpOwoJCXNlc3Npb25fd3JpdGVfY2xvc2UoKTsKCQlzZXRjb29raWUoc2Vzc2lvbl9uYW1lKCksICIiLCB0aW1lKCkt'));
	@fwrite($fp, base64_decode('MzYwMCwgaW5pX2dldCgnc2Vzc2lvbi5jb29raWVfcGF0aCcpKTsgLy8gcmVtb3ZlIGNvb2tpZSwgc28gR0RQUiBwZW9wbGUgYXJlIGhhcHB5Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGV4aXN0cygkbmFtZSkgewoJCXJldHVybiBpc3NldCgkX1NFU1NJT05bJG5hbWVd'));
	@fwrite($fp, base64_decode('KTsKCX0KCglwcm90ZWN0ZWQgc3RhdGljIGZ1bmN0aW9uIGVuY3J5cHQoJGRhdGEsICRrZXkpIHsKCQkkaXYgPSByYW5kb21fYnl0ZXMoMTYpOyAvLyBBRVMgYmxvY2sgc2l6ZSBpbiBDQkMgbW9kZQoJCS8vIEVuY3J5cHRpb24KCQkkY2lwaGVydGV4dCA9IG9wZW5z'));
	@fwrite($fp, base64_decode('c2xfZW5jcnlwdCgKCQkJJGRhdGEsCgkJCSdBRVMtMjU2LUNCQycsCgkJCW1iX3N1YnN0cigka2V5LCAwLCAzMiwgJzhiaXQnKSwKCQkJT1BFTlNTTF9SQVdfREFUQSwKCQkJJGl2CgkJKTsKCQkvLyBBdXRoZW50aWNhdGlvbgoJCSRobWFjID0gaGFzaF9obWFjKAoJ'));
	@fwrite($fp, base64_decode('CQknU0hBMjU2JywKCQkJJGl2IC4gJGNpcGhlcnRleHQsCgkJCW1iX3N1YnN0cigka2V5LCAzMiwgbnVsbCwgJzhiaXQnKSwKCQkJdHJ1ZQoJCSk7CgkJcmV0dXJuICRobWFjIC4gJGl2IC4gJGNpcGhlcnRleHQ7Cgl9CgoJcHJvdGVjdGVkIHN0YXRpYyBmdW5jdGlv'));
	@fwrite($fp, base64_decode('biBkZWNyeXB0KCRkYXRhLCAka2V5KSB7CgkJJGhtYWMgICAgICAgPSBtYl9zdWJzdHIoJGRhdGEsIDAsIDMyLCAnOGJpdCcpOwoJCSRpdiAgICAgICAgID0gbWJfc3Vic3RyKCRkYXRhLCAzMiwgMTYsICc4Yml0Jyk7CgkJJGNpcGhlcnRleHQgPSBtYl9zdWJzdHIo'));
	@fwrite($fp, base64_decode('JGRhdGEsIDQ4LCBudWxsLCAnOGJpdCcpOwoJCS8vIEF1dGhlbnRpY2F0aW9uCgkJJGhtYWNOZXcgPSBoYXNoX2htYWMoCgkJCSdTSEEyNTYnLAoJCQkkaXYgLiAkY2lwaGVydGV4dCwKCQkJbWJfc3Vic3RyKCRrZXksIDMyLCBudWxsLCAnOGJpdCcpLAoJCQl0cnVl'));
	@fwrite($fp, base64_decode('CgkJKTsKCQlpZiAoIWhhc2hfZXF1YWxzKCRobWFjLCAkaG1hY05ldykpIHsKCQkJdGhyb3cgbmV3IEV4Y2VwdGlvbignQXV0aGVudGljYXRpb24gZmFpbGVkJyk7CgkJfQoJCS8vIERlY3J5cHRpb24KCQlyZXR1cm4gb3BlbnNzbF9kZWNyeXB0KAoJCQkkY2lwaGVy'));
	@fwrite($fp, base64_decode('dGV4dCwKCQkJJ0FFUy0yNTYtQ0JDJywKCQkJbWJfc3Vic3RyKCRrZXksIDAsIDMyLCAnOGJpdCcpLAoJCQlPUEVOU1NMX1JBV19EQVRBLAoJCQkkaXYKCQkpOwoJfQp9Cg=='));
	@fclose($fp);
}
if (!is_file('includes/classes/OIDplusSessionHandler.class.php')) {
	warn('File has vanished! Will re-create it: includes/classes/OIDplusSessionHandler.class.php');
	writefile_4();
	if (!is_file('includes/classes/OIDplusSessionHandler.class.php')) {
		warn('File cannot be created (not existing): includes/classes/OIDplusSessionHandler.class.php');
	} else if (sha1_file('includes/classes/OIDplusSessionHandler.class.php') != '708d102fc9f469e53ad923b79e8afc1a90332250') {
		warn('File cannot be created (checksum mismatch): includes/classes/OIDplusSessionHandler.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/classes/OIDplusSessionHandler.class.php', 0644)) {
		warn('Could not change file permissions of includes/classes/OIDplusSessionHandler.class.php');
	}
} else {
	if (@sha1_file('includes/classes/OIDplusSessionHandler.class.php') !== '708d102fc9f469e53ad923b79e8afc1a90332250') {
		if (@sha1_file('includes/classes/OIDplusSessionHandler.class.php') !== '362fec7f55b67bfedf49e77f45861bcde7cedf8e') {
			warn('File was modified. Will overwrite the changes now: includes/classes/OIDplusSessionHandler.class.php');
			$tmp = pathinfo('includes/classes/OIDplusSessionHandler.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/classes/OIDplusSessionHandler.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('includes/classes/OIDplusSessionHandler.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_4();
		if (@sha1_file('includes/classes/OIDplusSessionHandler.class.php') !== '708d102fc9f469e53ad923b79e8afc1a90332250') {
			warn('File cannot be written (checksum mismatch): includes/classes/OIDplusSessionHandler.class.php');
		}
	}
}

// Files different: plugins/database/mysqli/plugin.inc.php
function writefile_5() {
	@$fp = fopen('plugins/database/mysqli/plugin.inc.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmlmICghZGVmaW5lZCgnSU5fT0lEUExVUycpKSBkaWUoKTsKCmRlZmluZSgnT0lEUExVU19NWVNRTF9RVUVSWUxPRycsIGZhbHNlKTsKZGVmaW5lKCdNWVNRTE5EX0FWQUlMQUJMRScsIGZ1bmN0aW9u'));
	@fwrite($fp, base64_decode('X2V4aXN0cygnbXlzcWxpX2ZldGNoX2FsbCcpKTsKCmlmIChPSURQTFVTX01ZU1FMX1FVRVJZTE9HKSB7CglmdW5jdGlvbiBDYWxsaW5nRnVuY3Rpb25OYW1lKCkgewoJCSRleCA9IG5ldyBFeGNlcHRpb24oKTsKCQkkdHJhY2UgPSAkZXgtPmdldFRyYWNlKCk7CgkJ'));
	@fwrite($fp, base64_decode('aWYgKCFpc3NldCgkdHJhY2VbMl0pKSByZXR1cm4gJyhtYWluKSc7CgkJJGZpbmFsX2NhbGwgPSAkdHJhY2VbMl07CgkJcmV0dXJuICRmaW5hbF9jYWxsWydmaWxlJ10uJzonLiRmaW5hbF9jYWxsWydsaW5lJ10uJy8nLiRmaW5hbF9jYWxsWydmdW5jdGlvbiddLico'));
	@fwrite($fp, base64_decode('KSc7Cgl9Cn0KCmNsYXNzIE9JRHBsdXNEYXRhQmFzZVBsdWdpbk15U1FMaSBleHRlbmRzIE9JRHBsdXNEYXRhQmFzZVBsdWdpbiB7Cglwcml2YXRlICRteXNxbGk7Cglwcml2YXRlICRsYXN0X3F1ZXJ5OwoJcHJpdmF0ZSAkcHJlcGFyZV9jYWNoZSA9IGFycmF5KCk7'));
	@fwrite($fp, base64_decode('CgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRQbHVnaW5JbmZvcm1hdGlvbigpIHsKCQkkb3V0ID0gYXJyYXkoKTsKCQkkb3V0WyduYW1lJ10gPSAnTXlTUUxpJzsKCQkkb3V0WydhdXRob3InXSA9ICdWaWFUaGlua1NvZnQnOwoJCSRvdXRbJ3ZlcnNpb24nXSA9'));
	@fwrite($fp, base64_decode('IG51bGw7CgkJJG91dFsnZGVzY3JpcHRpb25IVE1MJ10gPSBudWxsOwoJCXJldHVybiAkb3V0OwoJfQoKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gbmFtZSgpIHsKCQlyZXR1cm4gIk15U1FMIjsKCX0KCglwdWJsaWMgZnVuY3Rpb24gcXVlcnkoJHNxbCwgJHByZXBh'));
	@fwrite($fp, base64_decode('cmVkX2FyZ3M9bnVsbCkgewoJCSR0aGlzLT5sYXN0X3F1ZXJ5ID0gJHNxbDsKCQlpZiAoT0lEUExVU19NWVNRTF9RVUVSWUxPRykgZmlsZV9wdXRfY29udGVudHMoInF1ZXJ5LmxvZyIsICIkc3FsIDw9PSAiLkNhbGxpbmdGdW5jdGlvbk5hbWUoKS4iXG4iLCBGSUxF'));
	@fwrite($fp, base64_decode('X0FQUEVORCk7CgkJaWYgKGlzX251bGwoJHByZXBhcmVkX2FyZ3MpKSB7CgkJCXJldHVybiAkdGhpcy0+bXlzcWxpLT5xdWVyeSgkc3FsLCBNWVNRTElfU1RPUkVfUkVTVUxUKTsKCQl9IGVsc2UgewoJCQlpZiAoIWlzX2FycmF5KCRwcmVwYXJlZF9hcmdzKSkgewoJ'));
	@fwrite($fp, base64_decode('CQkJdGhyb3cgbmV3IEV4Y2VwdGlvbigiJ3ByZXBhcmVkX2FyZ3MnIG11c3QgYmUgZWl0aGVyIE5VTEwgb3IgYW4gQVJSQVkuIik7CgkJCX0KCQkJaWYgKGlzc2V0KCR0aGlzLT5wcmVwYXJlX2NhY2hlWyRzcWxdKSkgewoJCQkJJHBzID0gJHRoaXMtPnByZXBhcmVf'));
	@fwrite($fp, base64_decode('Y2FjaGVbJHNxbF07CgkJCX0gZWxzZSB7CgkJCQkkcHMgPSAkdGhpcy0+bXlzcWxpLT5wcmVwYXJlKCRzcWwpOwoJCQkJaWYgKCEkcHMpIHsKCQkJCQl0aHJvdyBuZXcgRXhjZXB0aW9uKCJDYW5ub3QgcHJlcGFyZSBzdGF0ZW1lbnQgJyRzcWwnIik7CgkJCQl9CgkJ'));
	@fwrite($fp, base64_decode('CQkkdGhpcy0+cHJlcGFyZV9jYWNoZVskc3FsXSA9ICRwczsKCQkJfQoKCQkJYmluZF9wbGFjZWhvbGRlcl92YXJzKCRwcywkcHJlcGFyZWRfYXJncyk7CgkJCWlmICghJHBzLT5leGVjdXRlKCkpIHJldHVybiBmYWxzZTsKCgkJCSRyZXMgPSBNWVNRTE5EX0FWQUlM'));
	@fwrite($fp, base64_decode('QUJMRSA/ICRwcy0+Z2V0X3Jlc3VsdCgpIDogaWlteXNxbGlfc3RtdF9nZXRfcmVzdWx0KCRwcyk7CgoJCQlpZiAoJHJlcyA9PT0gZmFsc2UpIHJldHVybiB0cnVlOyAvLyBBIG5vbi1TRUxFQ1Qgc3RhdGVtZW50IGRvZXMgbm90IGdpdmUgYSByZXN1bHQtc2V0LCBi'));
	@fwrite($fp, base64_decode('dXQgaXQgaXMgc3RpbGwgc3VjY2Vzc2Z1bAoJCQlyZXR1cm4gJHJlczsKCQl9Cgl9CglwdWJsaWMgZnVuY3Rpb24gbnVtX3Jvd3MoJHJlcykgewoJCWlmICghaXNfb2JqZWN0KCRyZXMpKSB7CgkJCXRocm93IG5ldyBFeGNlcHRpb24oIm51bV9yb3dzIGNhbGxlZCBv'));
	@fwrite($fp, base64_decode('biBub24gb2JqZWN0LiBMYXN0IHF1ZXJ5OiAiLiR0aGlzLT5sYXN0X3F1ZXJ5KTsKCQl9IGVsc2UgewoJCQlyZXR1cm4gKGdldF9jbGFzcygkcmVzKT09J215c3FsaV9yZXN1bHQnKSB8fCBNWVNRTE5EX0FWQUlMQUJMRSA/ICRyZXMtPm51bV9yb3dzIDogJHJlcy0+'));
	@fwrite($fp, base64_decode('bnVtX3Jvd3MoKTsKCQl9Cgl9CglwdWJsaWMgZnVuY3Rpb24gZmV0Y2hfYXJyYXkoJHJlcykgewoJCWlmICghaXNfb2JqZWN0KCRyZXMpKSB7CgkJCXRocm93IG5ldyBFeGNlcHRpb24oImZldGNoX2FycmF5IGNhbGxlZCBvbiBub24gb2JqZWN0LiBMYXN0IHF1ZXJ5'));
	@fwrite($fp, base64_decode('OiAiLiR0aGlzLT5sYXN0X3F1ZXJ5KTsKCQl9IGVsc2UgewoJCQlyZXR1cm4gKGdldF9jbGFzcygkcmVzKT09J215c3FsaV9yZXN1bHQnKSB8fCBNWVNRTE5EX0FWQUlMQUJMRSA/ICRyZXMtPmZldGNoX2FycmF5KE1ZU1FMSV9CT1RIKSA6ICRyZXMtPmZldGNoX2Fy'));
	@fwrite($fp, base64_decode('cmF5KCk7CgkJfQoJfQoJcHVibGljIGZ1bmN0aW9uIGZldGNoX29iamVjdCgkcmVzKSB7CgkJaWYgKCFpc19vYmplY3QoJHJlcykpIHsKCQkJdGhyb3cgbmV3IEV4Y2VwdGlvbigiZmV0Y2hfb2JqZWN0IGNhbGxlZCBvbiBub24gb2JqZWN0LiBMYXN0IHF1ZXJ5OiAi'));
	@fwrite($fp, base64_decode('LiR0aGlzLT5sYXN0X3F1ZXJ5KTsKCQl9IGVsc2UgewoJCQlyZXR1cm4gKGdldF9jbGFzcygkcmVzKT09J215c3FsaV9yZXN1bHQnKSB8fCBNWVNRTE5EX0FWQUlMQUJMRSA/ICRyZXMtPmZldGNoX29iamVjdCgic3RkQ2xhc3MiKSA6ICRyZXMtPmZldGNoX29iamVj'));
	@fwrite($fp, base64_decode('dCgpOwoJCX0KCX0KCXB1YmxpYyBmdW5jdGlvbiBpbnNlcnRfaWQoKSB7CgkJcmV0dXJuICR0aGlzLT5teXNxbGktPmluc2VydF9pZDsKCX0KCXB1YmxpYyBmdW5jdGlvbiBlcnJvcigpIHsKCQlyZXR1cm4gIWVtcHR5KCR0aGlzLT5teXNxbGktPmNvbm5lY3RfZXJy'));
	@fwrite($fp, base64_decode('b3IpID8gJHRoaXMtPm15c3FsaS0+Y29ubmVjdF9lcnJvciA6ICR0aGlzLT5teXNxbGktPmVycm9yOwoJfQoJCglwcml2YXRlICRodG1sID0gbnVsbDsKCXB1YmxpYyBmdW5jdGlvbiBpbml0KCRodG1sKSB7CgkJJHRoaXMtPmh0bWwgPSAkaHRtbDsKCX0KCglwdWJs'));
	@fwrite($fp, base64_decode('aWMgZnVuY3Rpb24gY29ubmVjdCgpIHsKCQlpZiAoT0lEUExVU19NWVNRTF9RVUVSWUxPRykgZmlsZV9wdXRfY29udGVudHMoInF1ZXJ5LmxvZyIsICcnKTsKCgkJLy8gVHJ5IGNvbm5lY3RpbmcgdG8gdGhlIGRhdGFiYXNlCgkJbGlzdCgkaG9zdG5hbWUsJHBvcnQp'));
	@fwrite($fp, base64_decode('ID0gZXhwbG9kZSgnOicsIE9JRFBMVVNfTVlTUUxfSE9TVC4nOicuaW5pX2dldCgibXlzcWxpLmRlZmF1bHRfcG9ydCIpKTsKCQkkdGhpcy0+bXlzcWxpID0gQG5ldyBteXNxbGkoJGhvc3RuYW1lLCBPSURQTFVTX01ZU1FMX1VTRVJOQU1FLCBiYXNlNjRfZGVjb2Rl'));
	@fwrite($fp, base64_decode('KE9JRFBMVVNfTVlTUUxfUEFTU1dPUkQpLCBPSURQTFVTX01ZU1FMX0RBVEFCQVNFLCAkcG9ydCk7CgkJaWYgKCFlbXB0eSgkdGhpcy0+bXlzcWxpLT5jb25uZWN0X2Vycm9yKSB8fCAoJHRoaXMtPm15c3FsaS0+Y29ubmVjdF9lcnJubyAhPSAwKSkgewoJCQlpZiAo'));
	@fwrite($fp, base64_decode('JHRoaXMtPmh0bWwpIHsKCQkJCWVjaG8gIjxoMT5FcnJvcjwvaDE+PHA+RGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQhICgiLiR0aGlzLT5lcnJvcigpLiIpPC9wPiI7CgkJCQlpZiAoaXNfZGlyKF9fRElSX18uJy8uLi8uLi8uLi9zZXR1cCcpKSB7CgkJCQkJZWNo'));
	@fwrite($fp, base64_decode('byAnPHA+SWYgeW91IGJlbGlldmUgdGhhdCB0aGUgbG9naW4gY3JlZGVudGlhbHMgYXJlIHdyb25nLCBwbGVhc2UgcnVuIDxhIGhyZWY9InNldHVwLyI+c2V0dXA8L2E+IGFnYWluLjwvcD4nOwoJCQkJfQoJCQl9IGVsc2UgewoJCQkJZWNobyAiRXJyb3I6IERhdGFi'));
	@fwrite($fp, base64_decode('YXNlIGNvbm5lY3Rpb24gZmFpbGVkISAoIi4kdGhpcy0+ZXJyb3IoKS4iKSI7CgkJCQlpZiAoaXNfZGlyKF9fRElSX18uJy8uLi8uLi8uLi9zZXR1cCcpKSB7CgkJCQkJZWNobyAnIElmIHlvdSBiZWxpZXZlIHRoYXQgdGhlIGxvZ2luIGNyZWRlbnRpYWxzIGFyZSB3'));
	@fwrite($fp, base64_decode('cm9uZywgcGxlYXNlIHJ1biBzZXR1cCBhZ2Fpbi4nOwoJCQkJfQoJCQl9CgkJCWRpZSgpOwoJCX0KCgkJJHRoaXMtPnF1ZXJ5KCJTRVQgTkFNRVMgJ3V0ZjgnIik7CgkJJHRoaXMtPmFmdGVyQ29ubmVjdCgkdGhpcy0+aHRtbCk7CgkJJHRoaXMtPmNvbm5lY3RlZCA9'));
	@fwrite($fp, base64_decode('IHRydWU7Cgl9CgoJcHJpdmF0ZSAkaW50cmFuc2FjdGlvbiA9IGZhbHNlOwoKCXB1YmxpYyBmdW5jdGlvbiB0cmFuc2FjdGlvbl9iZWdpbigpIHsKCQlpZiAoJHRoaXMtPmludHJhbnNhY3Rpb24pIHRocm93IG5ldyBFeGNlcHRpb24oIk5lc3RlZCB0cmFuc2FjdGlv'));
	@fwrite($fp, base64_decode('bnMgYXJlIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBkYXRhYmFzZSBwbHVnaW4uIik7CgkJJHRoaXMtPm15c3FsaS0+YXV0b2NvbW1pdCh0cnVlKTsKCQkkdGhpcy0+aW50cmFuc2FjdGlvbiA9IHRydWU7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHRyYW5zYWN0aW9uX2Nv'));
	@fwrite($fp, base64_decode('bW1pdCgpIHsKCQkkdGhpcy0+bXlzcWxpLT5jb21taXQoKTsKCQkkdGhpcy0+bXlzcWxpLT5hdXRvY29tbWl0KGZhbHNlKTsKCQkkdGhpcy0+aW50cmFuc2FjdGlvbiA9IGZhbHNlOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiB0cmFuc2FjdGlvbl9yb2xsYmFjaygpIHsK'));
	@fwrite($fp, base64_decode('CQkkdGhpcy0+bXlzcWxpLT5yb2xsYmFjaygpOwoJCSR0aGlzLT5teXNxbGktPmF1dG9jb21taXQoZmFsc2UpOwoJCSR0aGlzLT5pbnRyYW5zYWN0aW9uID0gZmFsc2U7Cgl9Cgp9CgpmdW5jdGlvbiBiaW5kX3BsYWNlaG9sZGVyX3ZhcnMoJiRzdG10LCRwYXJhbXMs'));
	@fwrite($fp, base64_decode('JGRlYnVnPTApIHsKCS8vIENyZWRpdCB0bzogRGF2ZSBNb3JnYW4KCS8vIENvZGUgcmlwcGVkIGZyb206IGh0dHA6Ly93d3cuZGV2bW9yZ2FuLmNvbS9ibG9nLzIwMDkvMDMvMjcvZHlkbC1wYXJ0LTMtZHluYW1pYy1iaW5kaW5nLXdpdGgtbXlzcWxpLXBocC8KCS8v'));
	@fwrite($fp, base64_decode('ICAgICAgICAgICAgICAgICAgIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE3MjE5MjE0L2hvdy10by1iaW5kLWluLW15c3FsaS1keW5hbWljYWxseQoJaWYgKCRwYXJhbXMgIT0gbnVsbCkgewoJCSR0eXBlcyA9ICcnOyAgICAgICAgICAgICAg'));
	@fwrite($fp, base64_decode('ICAgICAgICAgIC8vaW5pdGlhbCBzdGluZyB3aXRoIHR5cGVzCgkJZm9yZWFjaCAoJHBhcmFtcyBhcyAkcGFyYW0pIHsgICAgICAgIC8vZm9yIGVhY2ggZWxlbWVudCwgZGV0ZXJtaW5lIHR5cGUgYW5kIGFkZAoJCQlpZiAoaXNfaW50KCRwYXJhbSkpIHsKCQkJCSR0'));
	@fwrite($fp, base64_decode('eXBlcyAuPSAnaSc7ICAgICAgICAgICAgICAvL2ludGVnZXIKCQkJfSBlbHNlaWYgKGlzX2Zsb2F0KCRwYXJhbSkpIHsKCQkJCSR0eXBlcyAuPSAnZCc7ICAgICAgICAgICAgICAvL2RvdWJsZQoJCQl9IGVsc2VpZiAoaXNfc3RyaW5nKCRwYXJhbSkpIHsKCQkJCSR0'));
	@fwrite($fp, base64_decode('eXBlcyAuPSAncyc7ICAgICAgICAgICAgICAvL3N0cmluZwoJCQl9IGVsc2UgewoJCQkJJHR5cGVzIC49ICdiJzsgICAgICAgICAgICAgIC8vYmxvYiBhbmQgdW5rbm93bgoJCQl9CgkJfQoKCQkkYmluZF9uYW1lcyA9IGFycmF5KCk7CgkJJGJpbmRfbmFtZXNbXSA9'));
	@fwrite($fp, base64_decode('ICR0eXBlczsgICAgICAgICAgICAgLy9maXJzdCBwYXJhbSBuZWVkZWQgaXMgdGhlIHR5cGUgc3RyaW5nCgkJCQkJCQkJLy8gZWc6ICAnaXNzc3MnCgoJCWZvciAoJGk9MDsgJGk8Y291bnQoJHBhcmFtcyk7JGkrKykgeyAgICAvL2dvIHRocm91Z2ggaW5jb21pbmcg'));
	@fwrite($fp, base64_decode('cGFyYW1zIGFuZCBhZGRlZCBlbSB0byBhcnJheQoJCQkkYmluZF9uYW1lID0gJ2JpbmQnIC4gJGk7ICAgICAgIC8vZ2l2ZSB0aGVtIGFuIGFyYml0cmFyeSBuYW1lCgkJCSQkYmluZF9uYW1lID0gJHBhcmFtc1skaV07ICAgICAgLy9hZGQgdGhlIHBhcmFtZXRlciB0'));
	@fwrite($fp, base64_decode('byB0aGUgdmFyaWFibGUgdmFyaWFibGUKCQkJJGJpbmRfbmFtZXNbXSA9ICYkJGJpbmRfbmFtZTsgICAvL25vdyBhc3NvY2lhdGUgdGhlIHZhcmlhYmxlIGFzIGFuIGVsZW1lbnQgaW4gYW4gYXJyYXkKCQl9CgoJCWlmICgkZGVidWcpIHsKCQkJZWNobyAiXCRiaW5k'));
	@fwrite($fp, base64_decode('X25hbWVzOjxiciAvPlxuIjsKCQkJdmFyX2R1bXAoJGJpbmRfbmFtZXMpOwoJCQllY2hvICI8YnIgLz5cbiI7CgkJfQoJCS8vZXJyb3JfbG9nKCJiZXR0ZXJfbXlzcWxpIGhhcyBwYXJhbXMgIi5wcmludF9yKCRiaW5kX25hbWVzLCAxKSk7CgkJLy9jYWxsIHRoZSBm'));
	@fwrite($fp, base64_decode('dW5jdGlvbiBiaW5kX3BhcmFtIHdpdGggZHluYW1pYyBwYXJhbXMKCQljYWxsX3VzZXJfZnVuY19hcnJheShhcnJheSgkc3RtdCwnYmluZF9wYXJhbScpLCRiaW5kX25hbWVzKTsKCQlyZXR1cm4gdHJ1ZTsKCX1lbHNlewoJCXJldHVybiBmYWxzZTsKCX0KfQoKZnVu'));
	@fwrite($fp, base64_decode('Y3Rpb24gYmluZF9yZXN1bHRfYXJyYXkoJHN0bXQsICYkcm93KSB7CgkvLyBDcmVkaXQgdG86IERhdmUgTW9yZ2FuCgkvLyBDb2RlIHJpcHBlZCBmcm9tOiBodHRwOi8vd3d3LmRldm1vcmdhbi5jb20vYmxvZy8yMDA5LzAzLzI3L2R5ZGwtcGFydC0zLWR5bmFtaWMt'));
	@fwrite($fp, base64_decode('YmluZGluZy13aXRoLW15c3FsaS1waHAvCgkkbWV0YSA9ICRzdG10LT5yZXN1bHRfbWV0YWRhdGEoKTsKCXdoaWxlICgkZmllbGQgPSAkbWV0YS0+ZmV0Y2hfZmllbGQoKSkgewoJCSRwYXJhbXNbXSA9ICYkcm93WyRmaWVsZC0+bmFtZV07Cgl9CgljYWxsX3VzZXJf'));
	@fwrite($fp, base64_decode('ZnVuY19hcnJheShhcnJheSgkc3RtdCwgJ2JpbmRfcmVzdWx0JyksICRwYXJhbXMpOwoJcmV0dXJuIHRydWU7Cn0KCmlmICghTVlTUUxORF9BVkFJTEFCTEUpIHsKCWNsYXNzIGlpbXlzcWxpX3Jlc3VsdCB7CgkJLy8gU291cmNlOiBodHRwczovL3d3dy5waHAubmV0'));
	@fwrite($fp, base64_decode('L21hbnVhbC9kZS9teXNxbGktc3RtdC5nZXQtcmVzdWx0LnBocCMxMTMzOTgKCgkJcHVibGljICRzdG10LCAkbkNvbHM7CgoJCWZ1bmN0aW9uIGZldGNoX2FycmF5KCkgewoJCQkvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDc1MjgxNS9t'));
	@fwrite($fp, base64_decode('eXNxbGktZ2V0LXJlc3VsdC1hbHRlcm5hdGl2ZSAsIG1vZGlmaWVkCgkJCSRzdG10ID0gJHRoaXMtPnN0bXQ7CgkJCSRzdG10LT5zdG9yZV9yZXN1bHQoKTsKCQkJJHJlc3VsdGtleXMgPSBhcnJheSgpOwoJCQkkdGhpc05hbWUgPSAiIjsKCgkJCWlmICgkc3RtdC0+'));
	@fwrite($fp, base64_decode('bnVtX3Jvd3M9PTApIHJldHVybiBmYWxzZTsKCgkJCWZvciAoICRpID0gMDsgJGkgPCAkc3RtdC0+bnVtX3Jvd3M7ICRpKysgKSB7CgkJCQkkbWV0YWRhdGEgPSAkc3RtdC0+cmVzdWx0X21ldGFkYXRhKCk7CgkJCQl3aGlsZSAoICRmaWVsZCA9ICRtZXRhZGF0YS0+'));
	@fwrite($fp, base64_decode('ZmV0Y2hfZmllbGQoKSApIHsKCQkJCQkkdGhpc05hbWUgPSAkZmllbGQtPm5hbWU7CgkJCQkJJHJlc3VsdGtleXNbXSA9ICR0aGlzTmFtZTsKCQkJCX0KCQkJfQoKCQkJJHJldCA9IGFycmF5KCk7CgkJCSRjb2RlID0gInJldHVybiBteXNxbGlfc3RtdF9iaW5kX3Jl'));
	@fwrite($fp, base64_decode('c3VsdChcJHRoaXMtPnN0bXQgIjsKCQkJZm9yICgkaT0wOyAkaTwkdGhpcy0+bkNvbHM7ICRpKyspIHsKCQkJCSRyZXRbJGldID0gTlVMTDsKCQkJCSR0aGVWYWx1ZSA9ICRyZXN1bHRrZXlzWyRpXTsKCQkJCSRjb2RlIC49ICIsIFwkcmV0WyckdGhlVmFsdWUnXSI7'));
	@fwrite($fp, base64_decode('CgkJCX0KCgkJCSRjb2RlIC49ICIpOyI7CgkJCWlmICghZXZhbCgkY29kZSkpIHsKCQkJCXJldHVybiBOVUxMOwoJCQl9CgoJCQkvLyBUaGlzIHNob3VsZCBhZHZhbmNlIHRoZSAiJHN0bXQiIGN1cnNvci4KCQkJaWYgKCFteXNxbGlfc3RtdF9mZXRjaCgkdGhpcy0+'));
	@fwrite($fp, base64_decode('c3RtdCkpIHsKCQkJCXJldHVybiBOVUxMOwoJCQl9CgoJCQkvLyBSZXR1cm4gdGhlIGFycmF5IHdlIGJ1aWx0LgoJCQlyZXR1cm4gJHJldDsKCQl9CgoJCXB1YmxpYyBmdW5jdGlvbiBudW1fcm93cygpIHsKCQkJJHRoaXMtPnN0bXQtPnN0b3JlX3Jlc3VsdCgpOwoJ'));
	@fwrite($fp, base64_decode('CQlyZXR1cm4gJHRoaXMtPnN0bXQtPm51bV9yb3dzOwoJCX0KCgkJcHVibGljIGZ1bmN0aW9uIGZldGNoX29iamVjdCgpIHsKCQkJJG9iaiA9IG5ldyBzdGRDbGFzczsKCQkJJGFyeSA9ICR0aGlzLT5mZXRjaF9hcnJheSgpOwoJCQlpZiAoISRhcnkpIHJldHVybiBm'));
	@fwrite($fp, base64_decode('YWxzZTsKCQkJZm9yZWFjaCAoJGFyeSBhcyAkbmFtZSA9PiAkdmFsKSB7CgkJCQkkb2JqLT4kbmFtZSA9ICR2YWw7CgkJCX0KCQkJcmV0dXJuICRvYmo7CgkJfQoJfQoKCWZ1bmN0aW9uIGlpbXlzcWxpX3N0bXRfZ2V0X3Jlc3VsdCgkc3RtdCkgewoJCS8vIFNvdXJj'));
	@fwrite($fp, base64_decode('ZTogaHR0cHM6Ly93d3cucGhwLm5ldC9tYW51YWwvZGUvbXlzcWxpLXN0bXQuZ2V0LXJlc3VsdC5waHAjMTEzMzk4CgoJCS8qKiAgICBFWFBMQU5BVElPTjoKCQkgKiBXZSBhcmUgY3JlYXRpbmcgYSBmYWtlICJyZXN1bHQiIHN0cnVjdHVyZSB0byBlbmFibGUgdXMg'));
	@fwrite($fp, base64_decode('dG8gaGF2ZQoJCSAqIHNvdXJjZS1sZXZlbCBlcXVpdmFsZW50IHN5bnRheCB0byBhIHF1ZXJ5IGV4ZWN1dGVkIHZpYQoJCSAqIG15c3FsaV9xdWVyeSgpLgoJCSAqCgkJICogICAgJHN0bXQgPSBteXNxbGlfcHJlcGFyZSgkY29ubiwgIiIpOwoJCSAqICAgIG15c3Fs'));
	@fwrite($fp, base64_decode('aV9iaW5kX3BhcmFtKCRzdG10LCAidHlwZXMiLCAuLi4pOwoJCSAqCgkJICogICAgJHBhcmFtMSA9IDA7CgkJICogICAgJHBhcmFtMiA9ICdmb28nOwoJCSAqICAgICRwYXJhbTMgPSAnYmFyJzsKCQkgKiAgICBteXNxbGlfZXhlY3V0ZSgkc3RtdCk7CgkJICogICAg'));
	@fwrite($fp, base64_decode('JHJlc3VsdCBfbXlzcWxpX3N0bXRfZ2V0X3Jlc3VsdCgkc3RtdCk7CgkJICogICAgICAgIFsgJGFyciA9IF9teXNxbGlfcmVzdWx0X2ZldGNoX2FycmF5KCRyZXN1bHQpOwoJCSAqICAgICAgICAgICAgfHwgJGFzc29jID0gX215c3FsaV9yZXN1bHRfZmV0Y2hfYXNz'));
	@fwrite($fp, base64_decode('b2MoJHJlc3VsdCk7IF0KCQkgKiAgICBteXNxbGlfc3RtdF9jbG9zZSgkc3RtdCk7CgkJICogICAgbXlzcWxpX2Nsb3NlKCRjb25uKTsKCQkgKgoJCSAqIEF0IHRoZSBzb3VyY2UgbGV2ZWwsIHRoZXJlIGlzIG5vIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGlzIGFuZCBt'));
	@fwrite($fp, base64_decode('eXNxbG5kLgoJCSAqKi8KCQkkbWV0YWRhdGEgPSBteXNxbGlfc3RtdF9yZXN1bHRfbWV0YWRhdGEoJHN0bXQpOwoJCSRyZXQgPSBuZXcgaWlteXNxbGlfcmVzdWx0OwoJCWlmICghJHJldCkgcmV0dXJuIE5VTEw7CgoJCWlmIChpc19ib29sKCRtZXRhZGF0YSkpIHsK'));
	@fwrite($fp, base64_decode('CQkJcmV0dXJuICRtZXRhZGF0YTsKCQl9CgoJCSRyZXQtPm5Db2xzID0gbXlzcWxpX251bV9maWVsZHMoJG1ldGFkYXRhKTsKCQkkcmV0LT5zdG10ID0gJHN0bXQ7CgoJCW15c3FsaV9mcmVlX3Jlc3VsdCgkbWV0YWRhdGEpOwoJCXJldHVybiAkcmV0OwoJfQp9Cg=='));
	@fclose($fp);
}
if (!is_file('plugins/database/mysqli/plugin.inc.php')) {
	warn('File has vanished! Will re-create it: plugins/database/mysqli/plugin.inc.php');
	writefile_5();
	if (!is_file('plugins/database/mysqli/plugin.inc.php')) {
		warn('File cannot be created (not existing): plugins/database/mysqli/plugin.inc.php');
	} else if (sha1_file('plugins/database/mysqli/plugin.inc.php') != '3a30029d30f682a77d3a74194233e28da883cf85') {
		warn('File cannot be created (checksum mismatch): plugins/database/mysqli/plugin.inc.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/database/mysqli/plugin.inc.php', 0644)) {
		warn('Could not change file permissions of plugins/database/mysqli/plugin.inc.php');
	}
} else {
	if (@sha1_file('plugins/database/mysqli/plugin.inc.php') !== '3a30029d30f682a77d3a74194233e28da883cf85') {
		if (@sha1_file('plugins/database/mysqli/plugin.inc.php') !== '70e4ceff72b4fe8288aa94c01205e60257d12783') {
			warn('File was modified. Will overwrite the changes now: plugins/database/mysqli/plugin.inc.php');
			$tmp = pathinfo('plugins/database/mysqli/plugin.inc.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/database/mysqli/plugin.inc.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/database/mysqli/plugin.inc.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_5();
		if (@sha1_file('plugins/database/mysqli/plugin.inc.php') !== '3a30029d30f682a77d3a74194233e28da883cf85') {
			warn('File cannot be written (checksum mismatch): plugins/database/mysqli/plugin.inc.php');
		}
	}
}

// Files different: plugins/database/odbc/plugin.inc.php
function writefile_6() {
	@$fp = fopen('plugins/database/odbc/plugin.inc.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmlmICghZGVmaW5lZCgnSU5fT0lEUExVUycpKSBkaWUoKTsKCmNsYXNzIE9JRHBsdXNEYXRhQmFzZVBsdWdpbk9EQkMgZXh0ZW5kcyBPSURwbHVzRGF0YUJhc2VQbHVnaW4gewoJcHJpdmF0ZSAkb2Ri'));
	@fwrite($fp, base64_decode('YzsKCXByaXZhdGUgJGxhc3RfcXVlcnk7Cglwcml2YXRlICRwcmVwYXJlX2NhY2hlID0gYXJyYXkoKTsKCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldFBsdWdpbkluZm9ybWF0aW9uKCkgewoJCSRvdXQgPSBhcnJheSgpOwoJCSRvdXRbJ25hbWUnXSA9ICdPREJD'));
	@fwrite($fp, base64_decode('JzsKCQkkb3V0WydhdXRob3InXSA9ICdWaWFUaGlua1NvZnQnOwoJCSRvdXRbJ3ZlcnNpb24nXSA9IG51bGw7CgkJJG91dFsnZGVzY3JpcHRpb25IVE1MJ10gPSBudWxsOwoJCXJldHVybiAkb3V0OwoJfQoKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gbmFtZSgpIHsK'));
	@fwrite($fp, base64_decode('CQlyZXR1cm4gIk9EQkMiOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBxdWVyeSgkc3FsLCAkcHJlcGFyZWRfYXJncz1udWxsKSB7CgkJJHRoaXMtPmxhc3RfcXVlcnkgPSAkc3FsOwoJCWlmIChpc19udWxsKCRwcmVwYXJlZF9hcmdzKSkgewoJCQlyZXR1cm4gQG9kYmNf'));
	@fwrite($fp, base64_decode('ZXhlYygkdGhpcy0+b2RiYywgJHNxbCk7CgkJfSBlbHNlIHsKCgoJCQkvLyBURVNUOiBFbXVsYXRlIHRoZSBwcmVwYXJlZCBzdGF0ZW1lbnQKCi8qCgkJCWZvcmVhY2ggKCRwcmVwYXJlZF9hcmdzIGFzICRhcmcpIHsKCQkJCSRuZWVkbGUgPSAnPyc7CgkJCQkkcmVw'));
	@fwrite($fp, base64_decode('bGFjZSA9ICInJGFyZyciOyAvLyBUT0RPOiB0eXBlcwoJCQkJJHBvcyA9IHN0cnBvcygkc3FsLCAkbmVlZGxlKTsKCQkJCWlmICgkcG9zICE9PSBmYWxzZSkgewoJCQkJCSRzcWwgPSBzdWJzdHJfcmVwbGFjZSgkc3FsLCAkcmVwbGFjZSwgJHBvcywgc3RybGVuKCRu'));
	@fwrite($fp, base64_decode('ZWVkbGUpKTsKCQkJCX0KCQkJfQoJCQlyZXR1cm4gQG9kYmNfZXhlYygkdGhpcy0+b2RiYywgJHNxbCk7CiovCgoKCQkJaWYgKCFpc19hcnJheSgkcHJlcGFyZWRfYXJncykpIHsKCQkJCXRocm93IG5ldyBFeGNlcHRpb24oIidwcmVwYXJlZF9hcmdzJyBtdXN0IGJl'));
	@fwrite($fp, base64_decode('IGVpdGhlciBOVUxMIG9yIGFuIEFSUkFZLiIpOwoJCQl9CgkJCWlmIChpc3NldCgkdGhpcy0+cHJlcGFyZV9jYWNoZVskc3FsXSkpIHsKCQkJCSRwcyA9ICR0aGlzLT5wcmVwYXJlX2NhY2hlWyRzcWxdOwoJCQl9IGVsc2UgewoJCQkJJHBzID0gb2RiY19wcmVwYXJl'));
	@fwrite($fp, base64_decode('KCR0aGlzLT5vZGJjLCAkc3FsKTsKCQkJCWlmICghJHBzKSB7CgkJCQkJdGhyb3cgbmV3IEV4Y2VwdGlvbigiQ2Fubm90IHByZXBhcmUgc3RhdGVtZW50ICckc3FsJyIpOwoJCQkJfQoJCQkJJHRoaXMtPnByZXBhcmVfY2FjaGVbJHNxbF0gPSAkcHM7CgkJCX0KCQkJ'));
	@fwrite($fp, base64_decode('aWYgKCFAb2RiY19leGVjdXRlKCRwcywgJHByZXBhcmVkX2FyZ3MpKSB7CgkJCQkvLyBOb3RlOiBPdXIgcGx1Z2lucyBwcmVwYXJlIHRoZSBjb25maWdzIGJ5IHRyeWluZyB0byBpbnNlcnQgc3R1ZmYsIHdoaWNoIHJhaXNlcyBhIFByaW1hcnkgS2V5IGV4Y2VwdGlv'));
	@fwrite($fp, base64_decode('bi4gU28gd2UgY2Fubm90IHRocm93IGFuIEV4Y2VwdGlvbi4KCQkJCXJldHVybiBmYWxzZTsKCQkJfQoJCQlyZXR1cm4gJHBzOwoKCQl9Cgl9CglwdWJsaWMgZnVuY3Rpb24gbnVtX3Jvd3MoJHJlcykgewoJCWlmICghaXNfcmVzb3VyY2UoJHJlcykpIHsKCQkJdGhy'));
	@fwrite($fp, base64_decode('b3cgbmV3IEV4Y2VwdGlvbigibnVtX3Jvd3MgY2FsbGVkIG9uIG5vbiBvYmplY3QuIExhc3QgcXVlcnk6ICIuJHRoaXMtPmxhc3RfcXVlcnkpOwoJCX0gZWxzZSB7CgkJCXJldHVybiBvZGJjX251bV9yb3dzKCRyZXMpOwoJCX0KCX0KCXB1YmxpYyBmdW5jdGlvbiBm'));
	@fwrite($fp, base64_decode('ZXRjaF9hcnJheSgkcmVzKSB7CgkJaWYgKCFpc19yZXNvdXJjZSgkcmVzKSkgewoJCQl0aHJvdyBuZXcgRXhjZXB0aW9uKCJmZXRjaF9hcnJheSBjYWxsZWQgb24gbm9uIG9iamVjdC4gTGFzdCBxdWVyeTogIi4kdGhpcy0+bGFzdF9xdWVyeSk7CgkJfSBlbHNlIHsK'));
	@fwrite($fp, base64_decode('CQkJcmV0dXJuIG9kYmNfZmV0Y2hfYXJyYXkoJHJlcyk7CgkJfQoJfQoJcHVibGljIGZ1bmN0aW9uIGZldGNoX29iamVjdCgkcmVzKSB7CgkJaWYgKCFpc19yZXNvdXJjZSgkcmVzKSkgewoJCQl0aHJvdyBuZXcgRXhjZXB0aW9uKCJmZXRjaF9vYmplY3QgY2FsbGVk'));
	@fwrite($fp, base64_decode('IG9uIG5vbiBvYmplY3QuIExhc3QgcXVlcnk6ICIuJHRoaXMtPmxhc3RfcXVlcnkpOwoJCX0gZWxzZSB7CgkJCXJldHVybiBvZGJjX2ZldGNoX29iamVjdCgkcmVzKTsKCQl9Cgl9CglwdWJsaWMgZnVuY3Rpb24gaW5zZXJ0X2lkKCkgewoJCSRyZXMgPSAkdGhpcy0+'));
	@fwrite($fp, base64_decode('cXVlcnkoIlNFTEVDVCBMQVNUX0lOU0VSVF9JRCBBUyBJRCIpOyAvLyBNeVNRTAoJCWlmICghJHJlcykgJHJlcyA9ICR0aGlzLT5xdWVyeSgiU0VMRUNUIEBASURFTlRJVFkgQVMgSUQiKTsgLy8gTVMgU1FMCgkJaWYgKCEkcmVzKSByZXR1cm4gZmFsc2U7CgkJJHJv'));
	@fwrite($fp, base64_decode('dyA9ICR0aGlzLT5mZXRjaF9hcnJheSgkcmVzKTsKCQlyZXR1cm4gJHJvd1snSUQnXTsKCX0KCXB1YmxpYyBmdW5jdGlvbiBlcnJvcigpIHsKCQlyZXR1cm4gb2RiY19lcnJvcm1zZygkdGhpcy0+b2RiYyk7Cgl9Cglwcml2YXRlICRodG1sID0gbnVsbDsKCXB1Ymxp'));
	@fwrite($fp, base64_decode('YyBmdW5jdGlvbiBpbml0KCRodG1sKSB7CgkJJHRoaXMtPmh0bWwgPSAkaHRtbDsKCX0KCXB1YmxpYyBmdW5jdGlvbiBjb25uZWN0KCkgewoJCS8vIFRyeSBjb25uZWN0aW5nIHRvIHRoZSBkYXRhYmFzZQoJCSR0aGlzLT5vZGJjID0gQG9kYmNfY29ubmVjdChPSURQ'));
	@fwrite($fp, base64_decode('TFVTX09EQkNfRFNOLCBPSURQTFVTX09EQkNfVVNFUk5BTUUsIGJhc2U2NF9kZWNvZGUoT0lEUExVU19PREJDX1BBU1NXT1JEKSk7CgoJCWlmICghJHRoaXMtPm9kYmMpIHsKCQkJaWYgKCR0aGlzLT5odG1sKSB7CgkJCQllY2hvICI8aDE+RXJyb3I8L2gxPjxwPkRh'));
	@fwrite($fp, base64_decode('dGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkISAoIi5vZGJjX2Vycm9ybXNnKCkuIik8L3A+IjsKCQkJCWlmIChpc19kaXIoX19ESVJfXy4nLy4uLy4uLy4uL3NldHVwJykpIHsKCQkJCQllY2hvICc8cD5JZiB5b3UgYmVsaWV2ZSB0aGF0IHRoZSBsb2dpbiBjcmVkZW50'));
	@fwrite($fp, base64_decode('aWFscyBhcmUgd3JvbmcsIHBsZWFzZSBydW4gPGEgaHJlZj0ic2V0dXAvIj5zZXR1cDwvYT4gYWdhaW4uPC9wPic7CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQllY2hvICJFcnJvcjogRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQhICgiLm9kYmNfZXJyb3Jtc2coKS4i'));
	@fwrite($fp, base64_decode('KSI7CgkJCQlpZiAoaXNfZGlyKF9fRElSX18uJy8uLi8uLi8uLi9zZXR1cCcpKSB7CgkJCQkJZWNobyAnIElmIHlvdSBiZWxpZXZlIHRoYXQgdGhlIGxvZ2luIGNyZWRlbnRpYWxzIGFyZSB3cm9uZywgcGxlYXNlIHJ1biBzZXR1cCBhZ2Fpbi4nOwoJCQkJfQoJCQl9'));
	@fwrite($fp, base64_decode('CgkJCWRpZSgpOwoJCX0KCgkJJHRoaXMtPnF1ZXJ5KCJTRVQgTkFNRVMgJ3V0ZjgnIik7IC8vIERvZXMgbW9zdCBsaWtlbHkgTk9UIHdvcmsgd2l0aCBPREJDLiBUcnkgYWRkaW5nICI7Q0hBUlNFVD1VVEY4IiAob3Igc2ltaWxhcikgdG8gdGhlIERTTgoJCSR0aGlz'));
	@fwrite($fp, base64_decode('LT5hZnRlckNvbm5lY3QoJHRoaXMtPmh0bWwpOwoJCSR0aGlzLT5jb25uZWN0ZWQgPSB0cnVlOwoJfQoKCXByaXZhdGUgJGludHJhbnNhY3Rpb24gPSBmYWxzZTsKCglwdWJsaWMgZnVuY3Rpb24gdHJhbnNhY3Rpb25fYmVnaW4oKSB7CgkJaWYgKCR0aGlzLT5pbnRy'));
	@fwrite($fp, base64_decode('YW5zYWN0aW9uKSB0aHJvdyBuZXcgRXhjZXB0aW9uKCJOZXN0ZWQgdHJhbnNhY3Rpb25zIGFyZSBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgZGF0YWJhc2UgcGx1Z2luLiIpOwoJCW9kYmNfYXV0b2NvbW1pdCgkdGhpcy0+b2RiYywgdHJ1ZSk7CgkJJHRoaXMtPmludHJh'));
	@fwrite($fp, base64_decode('bnNhY3Rpb24gPSB0cnVlOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiB0cmFuc2FjdGlvbl9jb21taXQoKSB7CgkJb2RiY19jb21taXQoJHRoaXMtPm9kYmMpOwoJCW9kYmNfYXV0b2NvbW1pdCgkdGhpcy0+b2RiYywgZmFsc2UpOwoJCSR0aGlzLT5pbnRyYW5zYWN0aW9u'));
	@fwrite($fp, base64_decode('ID0gZmFsc2U7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHRyYW5zYWN0aW9uX3JvbGxiYWNrKCkgewoJCW9kYmNfcm9sbGJhY2soJHRoaXMtPm9kYmMpOwoJCW9kYmNfYXV0b2NvbW1pdCgkdGhpcy0+b2RiYywgZmFsc2UpOwoJCSR0aGlzLT5pbnRyYW5zYWN0aW9uID0g'));
	@fwrite($fp, base64_decode('ZmFsc2U7Cgl9Cn0K'));
	@fclose($fp);
}
if (!is_file('plugins/database/odbc/plugin.inc.php')) {
	warn('File has vanished! Will re-create it: plugins/database/odbc/plugin.inc.php');
	writefile_6();
	if (!is_file('plugins/database/odbc/plugin.inc.php')) {
		warn('File cannot be created (not existing): plugins/database/odbc/plugin.inc.php');
	} else if (sha1_file('plugins/database/odbc/plugin.inc.php') != '189697d39eaa627370c2e560c83ffeedf4a7ab87') {
		warn('File cannot be created (checksum mismatch): plugins/database/odbc/plugin.inc.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/database/odbc/plugin.inc.php', 0644)) {
		warn('Could not change file permissions of plugins/database/odbc/plugin.inc.php');
	}
} else {
	if (@sha1_file('plugins/database/odbc/plugin.inc.php') !== '189697d39eaa627370c2e560c83ffeedf4a7ab87') {
		if (@sha1_file('plugins/database/odbc/plugin.inc.php') !== 'cf908a24f2a5f42e6c430776e1ab81056c3b8bae') {
			warn('File was modified. Will overwrite the changes now: plugins/database/odbc/plugin.inc.php');
			$tmp = pathinfo('plugins/database/odbc/plugin.inc.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/database/odbc/plugin.inc.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/database/odbc/plugin.inc.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_6();
		if (@sha1_file('plugins/database/odbc/plugin.inc.php') !== '189697d39eaa627370c2e560c83ffeedf4a7ab87') {
			warn('File cannot be written (checksum mismatch): plugins/database/odbc/plugin.inc.php');
		}
	}
}

// Files different: plugins/database/pdo/plugin.inc.php
function writefile_7() {
	@$fp = fopen('plugins/database/pdo/plugin.inc.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmlmICghZGVmaW5lZCgnSU5fT0lEUExVUycpKSBkaWUoKTsKCmNsYXNzIE9JRHBsdXNEYXRhQmFzZVBsdWdpblBETyBleHRlbmRzIE9JRHBsdXNEYXRhQmFzZVBsdWdpbiB7Cglwcml2YXRlICRwZG87'));
	@fwrite($fp, base64_decode('Cglwcml2YXRlICRsYXN0X3F1ZXJ5OwoJcHJpdmF0ZSAkcHJlcGFyZV9jYWNoZSA9IGFycmF5KCk7CgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRQbHVnaW5JbmZvcm1hdGlvbigpIHsKCQkkb3V0ID0gYXJyYXkoKTsKCQkkb3V0WyduYW1lJ10gPSAnUERPJzsK'));
	@fwrite($fp, base64_decode('CQkkb3V0WydhdXRob3InXSA9ICdWaWFUaGlua1NvZnQnOwoJCSRvdXRbJ3ZlcnNpb24nXSA9IG51bGw7CgkJJG91dFsnZGVzY3JpcHRpb25IVE1MJ10gPSBudWxsOwoJCXJldHVybiAkb3V0OwoJfQoKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gbmFtZSgpIHsKCQly'));
	@fwrite($fp, base64_decode('ZXR1cm4gIlBETyI7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHF1ZXJ5KCRzcWwsICRwcmVwYXJlZF9hcmdzPW51bGwpIHsKCQkkdGhpcy0+bGFzdF9xdWVyeSA9ICRzcWw7CgkJaWYgKGlzX251bGwoJHByZXBhcmVkX2FyZ3MpKSB7CgkJCXJldHVybiAkdGhpcy0+cGRv'));
	@fwrite($fp, base64_decode('LT5xdWVyeSgkc3FsKTsKCQl9IGVsc2UgewoKCgkJCS8vIFRFU1Q6IEVtdWxhdGUgdGhlIHByZXBhcmVkIHN0YXRlbWVudAovKgoJCQlmb3JlYWNoICgkcHJlcGFyZWRfYXJncyBhcyAkYXJnKSB7CgkJCQkkbmVlZGxlID0gJz8nOwoJCQkJJHJlcGxhY2UgPSAiJyRh'));
	@fwrite($fp, base64_decode('cmcnIjsgLy8gVE9ETzogdHlwZXMKCQkJCSRwb3MgPSBzdHJwb3MoJHNxbCwgJG5lZWRsZSk7CgkJCQlpZiAoJHBvcyAhPT0gZmFsc2UpIHsKCQkJCQkkc3FsID0gc3Vic3RyX3JlcGxhY2UoJHNxbCwgJHJlcGxhY2UsICRwb3MsIHN0cmxlbigkbmVlZGxlKSk7CgkJ'));
	@fwrite($fp, base64_decode('CQl9CgkJCX0KCQkJcmV0dXJuICR0aGlzLT5wZG8tPnF1ZXJ5KCRzcWwpOwoqLwoKCgkJCWlmICghaXNfYXJyYXkoJHByZXBhcmVkX2FyZ3MpKSB7CgkJCQl0aHJvdyBuZXcgRXhjZXB0aW9uKCIncHJlcGFyZWRfYXJncycgbXVzdCBiZSBlaXRoZXIgTlVMTCBvciBh'));
	@fwrite($fp, base64_decode('biBBUlJBWS4iKTsKCQkJfQoJCQlpZiAoaXNzZXQoJHRoaXMtPnByZXBhcmVfY2FjaGVbJHNxbF0pKSB7CgkJCQkkcHMgPSAkdGhpcy0+cHJlcGFyZV9jYWNoZVskc3FsXTsKCQkJfSBlbHNlIHsKCQkJCSRwcyA9ICR0aGlzLT5wZG8tPnByZXBhcmUoJHNxbCk7CgkJ'));
	@fwrite($fp, base64_decode('CQlpZiAoISRwcykgewoJCQkJCXRocm93IG5ldyBFeGNlcHRpb24oIkNhbm5vdCBwcmVwYXJlIHN0YXRlbWVudCAnJHNxbCciKTsKCQkJCX0KCQkJCSR0aGlzLT5wcmVwYXJlX2NhY2hlWyRzcWxdID0gJHBzOwoJCQl9CgkJCWlmICghJHBzLT5leGVjdXRlKCRwcmVw'));
	@fwrite($fp, base64_decode('YXJlZF9hcmdzKSkgewoJCQkJLy8gTm90ZTogT3VyIHBsdWdpbnMgcHJlcGFyZSB0aGUgY29uZmlncyBieSB0cnlpbmcgdG8gaW5zZXJ0IHN0dWZmLCB3aGljaCByYWlzZXMgYSBQcmltYXJ5IEtleSBleGNlcHRpb24uIFNvIHdlIGNhbm5vdCB0aHJvdyBhbiBFeGNl'));
	@fwrite($fp, base64_decode('cHRpb24uCgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCQkJcmV0dXJuICRwczsKCQl9Cgl9CglwdWJsaWMgZnVuY3Rpb24gbnVtX3Jvd3MoJHJlcykgewoJCWlmICghaXNfb2JqZWN0KCRyZXMpKSB7CgkJCXRocm93IG5ldyBFeGNlcHRpb24oIm51bV9yb3dzIGNhbGxl'));
	@fwrite($fp, base64_decode('ZCBvbiBub24gb2JqZWN0LiBMYXN0IHF1ZXJ5OiAiLiR0aGlzLT5sYXN0X3F1ZXJ5KTsKCQl9IGVsc2UgewoJCQlyZXR1cm4gJHJlcy0+cm93Q291bnQoKTsKCQl9Cgl9CglwdWJsaWMgZnVuY3Rpb24gZmV0Y2hfYXJyYXkoJHJlcykgewoJCWlmICghaXNfb2JqZWN0'));
	@fwrite($fp, base64_decode('KCRyZXMpKSB7CgkJCXRocm93IG5ldyBFeGNlcHRpb24oImZldGNoX2FycmF5IGNhbGxlZCBvbiBub24gb2JqZWN0LiBMYXN0IHF1ZXJ5OiAiLiR0aGlzLT5sYXN0X3F1ZXJ5KTsKCQl9IGVsc2UgewoJCQlyZXR1cm4gJHJlcy0+ZmV0Y2goUERPOjpGRVRDSF9BU1NP'));
	@fwrite($fp, base64_decode('Qyk7CgkJfQoJfQoJcHVibGljIGZ1bmN0aW9uIGZldGNoX29iamVjdCgkcmVzKSB7CgkJaWYgKCFpc19vYmplY3QoJHJlcykpIHsKCQkJdGhyb3cgbmV3IEV4Y2VwdGlvbigiZmV0Y2hfb2JqZWN0IGNhbGxlZCBvbiBub24gb2JqZWN0LiBMYXN0IHF1ZXJ5OiAiLiR0'));
	@fwrite($fp, base64_decode('aGlzLT5sYXN0X3F1ZXJ5KTsKCQl9IGVsc2UgewoJCQlyZXR1cm4gJHJlcy0+ZmV0Y2goUERPOjpGRVRDSF9PQkopOwoJCX0KCX0KCXB1YmxpYyBmdW5jdGlvbiBpbnNlcnRfaWQoKSB7CgkJcmV0dXJuICR0aGlzLT5wZG8tPmxhc3RJbnNlcnRJZCgpOwoJfQoJcHVi'));
	@fwrite($fp, base64_decode('bGljIGZ1bmN0aW9uIGVycm9yKCkgewoJCXJldHVybiAkdGhpcy0+cGRvLT5lcnJvckluZm8oKVsyXTsKCX0KCXByaXZhdGUgJGh0bWwgPSBudWxsOwoJcHVibGljIGZ1bmN0aW9uIGluaXQoJGh0bWwpIHsKCQkkdGhpcy0+aHRtbCA9ICRodG1sOwoJfQoJcHVibGlj'));
	@fwrite($fp, base64_decode('IGZ1bmN0aW9uIGNvbm5lY3QoKSB7CgkJdHJ5IHsKCQkJJG9wdGlvbnMgPSBbCgkJCSMgICAgUERPOjpBVFRSX0VSUk1PREUgICAgICAgICAgICA9PiBQRE86OkVSUk1PREVfRVhDRVBUSU9OLAoJCQkgICAgUERPOjpBVFRSX0RFRkFVTFRfRkVUQ0hfTU9ERSA9PiBQ'));
	@fwrite($fp, base64_decode('RE86OkZFVENIX0FTU09DLAoJCQkgICAgUERPOjpBVFRSX0VNVUxBVEVfUFJFUEFSRVMgICA9PiB0cnVlLAoJCQldOwoKCQkJLy8gVHJ5IGNvbm5lY3RpbmcgdG8gdGhlIGRhdGFiYXNlCgkJCSR0aGlzLT5wZG8gPSBuZXcgUERPKE9JRFBMVVNfUERPX0RTTiwgT0lE'));
	@fwrite($fp, base64_decode('UExVU19QRE9fVVNFUk5BTUUsIGJhc2U2NF9kZWNvZGUoT0lEUExVU19QRE9fUEFTU1dPUkQpLCAkb3B0aW9ucyk7CgkJfSBjYXRjaCAoUERPRXhjZXB0aW9uICRlKSB7CgkJCWlmICgkdGhpcy0+aHRtbCkgewoJCQkJZWNobyAiPGgxPkVycm9yPC9oMT48cD5EYXRh'));
	@fwrite($fp, base64_decode('YmFzZSBjb25uZWN0aW9uIGZhaWxlZCEgKCIuJGUtPmdldE1lc3NhZ2UoKS4iKTwvcD4iOwoJCQkJaWYgKGlzX2RpcihfX0RJUl9fLicvLi4vLi4vLi4vc2V0dXAnKSkgewoJCQkJCWVjaG8gJzxwPklmIHlvdSBiZWxpZXZlIHRoYXQgdGhlIGxvZ2luIGNyZWRlbnRp'));
	@fwrite($fp, base64_decode('YWxzIGFyZSB3cm9uZywgcGxlYXNlIHJ1biA8YSBocmVmPSJzZXR1cC8iPnNldHVwPC9hPiBhZ2Fpbi48L3A+JzsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCWVjaG8gIkVycm9yOiBEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCEgKCIuJGUtPmdldE1lc3NhZ2UoKS4i'));
	@fwrite($fp, base64_decode('KSI7CgkJCQlpZiAoaXNfZGlyKF9fRElSX18uJy8uLi8uLi8uLi9zZXR1cCcpKSB7CgkJCQkJZWNobyAnIElmIHlvdSBiZWxpZXZlIHRoYXQgdGhlIGxvZ2luIGNyZWRlbnRpYWxzIGFyZSB3cm9uZywgcGxlYXNlIHJ1biBzZXR1cCBhZ2Fpbi4nOwoJCQkJfQoJCQl9'));
	@fwrite($fp, base64_decode('CgkJCWRpZSgpOwoJCX0KCgkJJHRoaXMtPnF1ZXJ5KCJTRVQgTkFNRVMgJ3V0ZjgnIik7CgkJJHRoaXMtPmFmdGVyQ29ubmVjdCgkdGhpcy0+aHRtbCk7CgkJJHRoaXMtPmNvbm5lY3RlZCA9IHRydWU7Cgl9CgoJcHJpdmF0ZSAkaW50cmFuc2FjdGlvbiA9IGZhbHNl'));
	@fwrite($fp, base64_decode('OwoKCXB1YmxpYyBmdW5jdGlvbiB0cmFuc2FjdGlvbl9iZWdpbigpIHsKCQlpZiAoJHRoaXMtPmludHJhbnNhY3Rpb24pIHRocm93IG5ldyBFeGNlcHRpb24oIk5lc3RlZCB0cmFuc2FjdGlvbnMgYXJlIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBkYXRhYmFzZSBwbHVn'));
	@fwrite($fp, base64_decode('aW4uIik7CgkJJHRoaXMtPnBkby0+YmVnaW5UcmFuc2FjdGlvbigpOwoJCSR0aGlzLT5pbnRyYW5zYWN0aW9uID0gdHJ1ZTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gdHJhbnNhY3Rpb25fY29tbWl0KCkgewoJCSR0aGlzLT5wZG8tPmNvbW1pdCgpOwoJCSR0aGlzLT5p'));
	@fwrite($fp, base64_decode('bnRyYW5zYWN0aW9uID0gZmFsc2U7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHRyYW5zYWN0aW9uX3JvbGxiYWNrKCkgewoJCSR0aGlzLT5wZG8tPnJvbGxCYWNrKCk7CgkJJHRoaXMtPmludHJhbnNhY3Rpb24gPSBmYWxzZTsKCX0KfQo='));
	@fclose($fp);
}
if (!is_file('plugins/database/pdo/plugin.inc.php')) {
	warn('File has vanished! Will re-create it: plugins/database/pdo/plugin.inc.php');
	writefile_7();
	if (!is_file('plugins/database/pdo/plugin.inc.php')) {
		warn('File cannot be created (not existing): plugins/database/pdo/plugin.inc.php');
	} else if (sha1_file('plugins/database/pdo/plugin.inc.php') != 'c2a1c95c4fec61a5d1f13b30ce48c378742ef3a4') {
		warn('File cannot be created (checksum mismatch): plugins/database/pdo/plugin.inc.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/database/pdo/plugin.inc.php', 0644)) {
		warn('Could not change file permissions of plugins/database/pdo/plugin.inc.php');
	}
} else {
	if (@sha1_file('plugins/database/pdo/plugin.inc.php') !== 'c2a1c95c4fec61a5d1f13b30ce48c378742ef3a4') {
		if (@sha1_file('plugins/database/pdo/plugin.inc.php') !== '6490e2e354d4d2765df45b4b72ff8cc0f93ef1dd') {
			warn('File was modified. Will overwrite the changes now: plugins/database/pdo/plugin.inc.php');
			$tmp = pathinfo('plugins/database/pdo/plugin.inc.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/database/pdo/plugin.inc.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/database/pdo/plugin.inc.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_7();
		if (@sha1_file('plugins/database/pdo/plugin.inc.php') !== 'c2a1c95c4fec61a5d1f13b30ce48c378742ef3a4') {
			warn('File cannot be written (checksum mismatch): plugins/database/pdo/plugin.inc.php');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 230\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 230') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

