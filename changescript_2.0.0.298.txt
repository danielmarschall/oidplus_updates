<?php /* <ViaThinkSoftSignature>
pWjRddRjLJD9gLsIMbIJ3LD4L/G9oFWWYleWBUKGYY1MIW84jDXlUj9Jb84DAW8yc
az1IwhrqWLTrYlpgCt4qMFKK7ss7pQNpaimZgAkb7qy1INjhVObA7b3tIjKXkal7O
uRVNgEszhO2ZeEcRn0tp1F23wI/hlBiBWtYmXAmSgINtDMmGl87oHhtcyEK+xZAQv
9GhI+hT7pdmQ+Zyozvn7HXDL4G77taUo3a+LX75CkKQJ5KgQ8EXoAip97Dpn/FfGc
oQzVLrHC+Xo2o7vfmihUSSCvPS61lHmdmScjPNe1lK3y1Zm03eowLpcNeQDyY7lvV
WHLqpSJ89hnicolHRvYTZqSnihppZMd/1wEYas31nfEbMCyYKIEZMuAQDmka0dlUB
AqwtZw1sjc2kagHGm4OWcxzUGvV1jLNsdhNuhvz4xdDtyFOwSV4Gzdjr2NU8D+22x
7//cMBYdPq5f3IcUrxCslaZ/BYotPI2mmQw4W7SbB9NZZOm6UG9p/QFqN6vnTSk4U
7RnnSzUeuta9MThOVqnmacXEJnypRNE5dlheyMwnO7M65RgF6vlaju50FD9lclo9s
A9t4x5YaXsuaZl+MDwfjbpIxrkyG+Vo2IiKlafDvk/M1yfX8r9/AfHt9ZuIcd2YpA
lH51M4dbTCp9iuzSm/kmovwbwWBXx9DeqKxus30AgWMoRjhUuWuJwOtq7DBHk1Tzn
hENwV/Q+589A7RnfsrkrkgQfjs8owiQkyHQLzKY5GDwSXzwktVW2ZWNDQ1IqV30uV
8PignorXjMNa0GlUFOx4WNfJPMgfqQZOTHhnVffbkWD26j2bOqrKkOcxN0G9i9hEn
VmtwWaFzK/qycuc8xd3xQ2eV8Z6CpEJ6NpiACWq/EPUs75AB3bG93gTIZ07oeFA35
4C3l+rHHbNi91kesRuV+C/fVTwO2LKiCv5hmOarhdg5fid7IzimRqn89QmX4qYo5n
bmEQm/IFowlm0zrYIqPuzNUTZRV2zqlvdexMNxAKXkiIRPQzTipkx7p3M8SPR8gZv
UMNX68J0UbDz9FbD6lqzpoYpVtmGFuxQyUSmy0qtXaynj8+q9Zde5WI24JoPVNIpu
J/kuaUkNTgI/N9ExLcgq/Ncqv4ZcUiHPi0d70GFznq+KZ4VvHzr0MICJbUNSyDTce
OrVDrNCaxC01+r7/EUnrZHNRO2NdVhVCt+Hh1WAggJW9FMQ+ed0rwcSFQkRXBcNaH
unmyi5wgMMlv0epCBxIexCpzyKhlPiAFaniG/sinwldcN1HFyujXFM04KnzrhBpr9
AFFQdpU7gDzyvCeoz77scmUdGxql6uXkiBton8efypfbhaFmowMOEEO9GMuAktshP
Q==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 297') {
	err('This update can only be applied to OIDplus version 2.0.0.297!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// File added: doc/fail2ban.txt
function writefile_1() {
	@$fp = fopen('doc/fail2ban.txt', 'w');
	@fwrite($fp, base64_decode('DQpPSURQTFVTIEZBSUwyQkFOIElOVEVHUkFUSU9ODQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoNCmZhaWwyYmFuIGNhbiBiZSB1c2VkIHRvIHdhdGNoIHlvdXIgbG9nIGZpbGVzIGFuZA0KYmxvY2sgbmV0d29yayBhZGRyZXNzZXMgdGhhdCB0cnkgdG8g'));
	@fwrite($fp, base64_decode('YnJlYWsgaW50bw0KeW91ciBzeXN0ZW0gdXNpbmcgYnJ1dGUgZm9yY2UuDQoNCg0KL2V0Yy9mYWlsMmJhbi9qYWlsLmQvdnRzLW9pZHBsdXMuY29uZiAocGxlYXNlIGFkanVzdCBpdCB0byB5b3VyIG5lZWRzISkNCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09'));
	@fwrite($fp, base64_decode('PT09PT09PT0NCg0KW3Z0cy1vaWRwbHVzXQ0KZW5hYmxlZCAgPSB0cnVlDQpwb3J0ICAgICA9IGh0dHAsaHR0cHMNCmZpbHRlciAgID0gdnRzLW9pZHBsdXMNCmxvZ3BhdGggID0gLy4uLi4uLi4uL3VzZXJkYXRhL2xvZ3Mvb2lkcGx1cy5sb2cNCiMgYWN0aW9uICAg'));
	@fwrite($fp, base64_decode('PSBpcHRhYmxlcy1hbGxwb3J0c1tuYW1lPU9JRFBMVVMsIHByb3RvY29sPXRjcF0NCmFjdGlvbiAgID0gaXB0YWJsZXMtbXVsdGlwb3J0W25hbWU9T0lEUExVUywgcG9ydD0iODAsNDQzIl0NCm1heHJldHJ5ID0gMjANCg0KDQovZXRjL2ZhaWwyYmFuL2ZpbHRlci5k'));
	@fwrite($fp, base64_decode('L3Z0cy1vaWRwbHVzLmNvbmYNCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KDQojIEZhaWwyQmFuIGNvbmZpZ3VyYXRpb24gZmlsZSBmb3IgT0lEcGx1cw0KIw0KIyBBdXRob3I6IERhbmllbCBNYXJzY2hhbGwNCiMNCiMgJFJldmlzaW9u'));
	@fwrite($fp, base64_decode('OiAxDQojDQoNCltEZWZpbml0aW9uXQ0KDQojIE9wdGlvbjogIGZhaWxyZWdleA0KIyBOb3Rlcy46ICByZWdleCB0byBtYXRjaCB0aGUgcGFzc3dvcmQgZmFpbHVyZSBtZXNzYWdlcyBpbiB0aGUgbG9nZmlsZS4gVGhlDQojICAgICAgICAgIGhvc3QgbXVzdCBiZSBt'));
	@fwrite($fp, base64_decode('YXRjaGVkIGJ5IGEgZ3JvdXAgbmFtZWQgImhvc3QiLiBUaGUgdGFnICI8SE9TVD4iIGNhbg0KIyAgICAgICAgICBiZSB1c2VkIGZvciBzdGFuZGFyZCBJUC9ob3N0bmFtZSBtYXRjaGluZyBhbmQgaXMgb25seSBhbiBhbGlhcyBmb3INCiMgICAgICAgICAgKD86Ojpm'));
	@fwrite($fp, base64_decode('ezQsNn06KT8oP1A8aG9zdD5bXHdcLS5eX10rKQ0KIyBWYWx1ZXM6ICBURVhUDQojDQpmYWlscmVnZXggPSBbW108SE9TVD5bXV0gRmFpbGVkIGxvZ2luIHRvIChhZG1pbnxSQSkgYWNjb3VudA0KDQojIE9wdGlvbjogIGlnbm9yZXJlZ2V4DQojIE5vdGVzLjogIHJl'));
	@fwrite($fp, base64_decode('Z2V4IHRvIGlnbm9yZS4gSWYgdGhpcyByZWdleCBtYXRjaGVzLCB0aGUgbGluZSBpcyBpZ25vcmVkLg0KIyBWYWx1ZXM6ICBURVhUDQojDQppZ25vcmVyZWdleCA9DQoNCltJbml0XQ0KDQpkYXRlcGF0dGVybiA9IF4lJVktJSVtLSUlZCAlJUg6JSVNOiUlUw0K'));
	@fclose($fp);
}
if (is_file('doc/fail2ban.txt') && (sha1_file('doc/fail2ban.txt') != '002d1bf63c3fc0f1e56b0adc53a5ca2f864a05c9')) {
	warn('File was created by someone else. Will overwrite the changes now: doc/fail2ban.txt');
	$tmp = pathinfo('doc/fail2ban.txt');
	$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('doc/fail2ban.txt')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
	warn('Creating a backup as '.$backup_name);
	if (!@copy('doc/fail2ban.txt', $backup_name)) {
		warn('Creation of backup failed');
	}
}
writefile_1();
if (!is_file('doc/fail2ban.txt')) {
	warn('File cannot be created (not existing): doc/fail2ban.txt');
} else if (sha1_file('doc/fail2ban.txt') != '002d1bf63c3fc0f1e56b0adc53a5ca2f864a05c9') {
	warn('File cannot be created (checksum mismatch): doc/fail2ban.txt');
} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('doc/fail2ban.txt', 0644)) {
	warn('Could not change file permissions of doc/fail2ban.txt');
}

// Files different: plugins/logger/100_linux_syslog/OIDplusLoggerPluginLinuxSyslog.class.php
function writefile_2() {
	@$fp = fopen('plugins/logger/100_linux_syslog/OIDplusLoggerPluginLinuxSyslog.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmNsYXNzIE9JRHBsdXNMb2dnZXJQbHVnaW5MaW51eFN5c2xvZyBleHRlbmRzIE9JRHBsdXNMb2dnZXJQbHVnaW4gewoKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gYXZhaWxhYmxlKCYkcmVhc29uKS8q'));
	@fwrite($fp, base64_decode('OiBib29sKi8gewoJCWlmIChzdHJ0b3VwcGVyKHN1YnN0cihQSFBfT1MsIDAsIDMpKSA9PT0gJ1dJTicpIHsKCQkJJHJlYXNvbiA9ICdGdW5jdGlvbmFsaXR5IG5vdCBhdmFpbGFibGUgb24gV2luZG93cyc7CgkJCXJldHVybiBmYWxzZTsKCQl9CgoJCWlmICghZmls'));
	@fwrite($fp, base64_decode('ZV9leGlzdHMoJy92YXIvbG9nL3N5c2xvZycpKSB7CgkJCSRyZWFzb24gPSAiRmlsZSAvdmFyL2xvZy9zeXNsb2cgbm90IGV4aXN0aW5nIjsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJaWYgKEBmaWxlX3B1dF9jb250ZW50cygnL3Zhci9sb2cvc3lzbG9nJywgJycs'));
	@fwrite($fp, base64_decode('IEZJTEVfQVBQRU5EKSA9PT0gZmFsc2UpIHsKCQkJJHJlYXNvbiA9ICJGaWxlIC92YXIvbG9nL3N5c2xvZyBub3Qgd3JpdGVhYmxlIjsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJJHJlYXNvbiA9ICcnOwoJCXJldHVybiB0cnVlOwoJfQoKCXB1YmxpYyBzdGF0aWMg'));
	@fwrite($fp, base64_decode('ZnVuY3Rpb24gbG9nKCRldmVudCwgJHVzZXJzLCAkb2JqZWN0cykvKjogYm9vbCovIHsKCQlpZiAoc3RydG91cHBlcihzdWJzdHIoUEhQX09TLCAwLCAzKSkgPT09ICdXSU4nKSByZXR1cm4gZmFsc2U7CgoJCWlmICghZmlsZV9leGlzdHMoJy92YXIvbG9nL3N5c2xv'));
	@fwrite($fp, base64_decode('ZycpKSByZXR1cm4gZmFsc2U7CgoJCSR1c2Vyc19uYW1lcyA9IGFycmF5KCk7CgkJZm9yZWFjaCAoJHVzZXJzIGFzIGxpc3QoJHNldmVyaXR5LCAkdXNlcm5hbWUpKSAkdXNlcnNfbmFtZXNbXSA9ICR1c2VybmFtZTsKCQkkdXNlcnNfaW5mbyA9IGNvdW50KCR1c2Vy'));
	@fwrite($fp, base64_decode('c19uYW1lcykgPT0gMCA/ICcnIDogIiAoYWZmZWN0ZWQgdXNlcnM6ICIuaW1wbG9kZSgnLCAnLCR1c2Vyc19uYW1lcykuIikiOwoKCQkkb2JqZWN0c19uYW1lcyA9IGFycmF5KCk7CgkJZm9yZWFjaCAoJG9iamVjdHMgYXMgbGlzdCgkc2V2ZXJpdHksICRvYmplY3Rz'));
	@fwrite($fp, base64_decode('X25hbWVzKSkgJG9iamVjdHNfbmFtZXNbXSA9ICRvYmplY3RuYW1lOwoJCSRvYmplY3RzX2luZm8gPSBjb3VudCgkb2JqZWN0c19uYW1lcykgPT0gMCA/ICcnIDogIiAoYWZmZWN0ZWQgb2JqZWN0czogIi5pbXBsb2RlKCcsICcsJG9iamVjdHNfbmFtZXMpLiIpIjsK'));
	@fwrite($fp, base64_decode('CgkJJHRzID0gZGF0ZSgnWS1tLWQgSDppOnMnKTsKCQkkYWRkciA9IGlzc2V0KCRfU0VSVkVSWydSRU1PVEVfQUREUiddKSA/ICRfU0VSVkVSWydSRU1PVEVfQUREUiddIDogJ3Vua25vd24nOwoJCSRsaW5lID0gIlskdHNdIFskYWRkcl0gJGV2ZW50JHVzZXJzX2lu'));
	@fwrite($fp, base64_decode('Zm8kb2JqZWN0c19pbmZvIjsKCgkJcmV0dXJuIEBmaWxlX3B1dF9jb250ZW50cygnL3Zhci9sb2cvc3lzbG9nJywgIiRsaW5lXG4iLCBGSUxFX0FQUEVORCkgIT09IGZhbHNlOwoJfQp9Cg=='));
	@fclose($fp);
}
if (!is_file('plugins/logger/100_linux_syslog/OIDplusLoggerPluginLinuxSyslog.class.php')) {
	warn('File has vanished! Will re-create it: plugins/logger/100_linux_syslog/OIDplusLoggerPluginLinuxSyslog.class.php');
	writefile_2();
	if (!is_file('plugins/logger/100_linux_syslog/OIDplusLoggerPluginLinuxSyslog.class.php')) {
		warn('File cannot be created (not existing): plugins/logger/100_linux_syslog/OIDplusLoggerPluginLinuxSyslog.class.php');
	} else if (sha1_file('plugins/logger/100_linux_syslog/OIDplusLoggerPluginLinuxSyslog.class.php') != '3049fa13f2fcea3ea2108e75b570e0d19bdbda76') {
		warn('File cannot be created (checksum mismatch): plugins/logger/100_linux_syslog/OIDplusLoggerPluginLinuxSyslog.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/logger/100_linux_syslog/OIDplusLoggerPluginLinuxSyslog.class.php', 0644)) {
		warn('Could not change file permissions of plugins/logger/100_linux_syslog/OIDplusLoggerPluginLinuxSyslog.class.php');
	}
} else {
	if (@sha1_file('plugins/logger/100_linux_syslog/OIDplusLoggerPluginLinuxSyslog.class.php') !== '3049fa13f2fcea3ea2108e75b570e0d19bdbda76') {
		if (@sha1_file('plugins/logger/100_linux_syslog/OIDplusLoggerPluginLinuxSyslog.class.php') !== '6dd40e9c6a7e63186e3af71a1d35615b0577359f') {
			warn('File was modified. Will overwrite the changes now: plugins/logger/100_linux_syslog/OIDplusLoggerPluginLinuxSyslog.class.php');
			$tmp = pathinfo('plugins/logger/100_linux_syslog/OIDplusLoggerPluginLinuxSyslog.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/logger/100_linux_syslog/OIDplusLoggerPluginLinuxSyslog.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/logger/100_linux_syslog/OIDplusLoggerPluginLinuxSyslog.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_2();
		if (@sha1_file('plugins/logger/100_linux_syslog/OIDplusLoggerPluginLinuxSyslog.class.php') !== '3049fa13f2fcea3ea2108e75b570e0d19bdbda76') {
			warn('File cannot be written (checksum mismatch): plugins/logger/100_linux_syslog/OIDplusLoggerPluginLinuxSyslog.class.php');
		}
	}
}

// Files different: plugins/logger/300_userdata_logfile/OIDplusLoggerPluginUserdataLogfile.class.php
function writefile_3() {
	@$fp = fopen('plugins/logger/300_userdata_logfile/OIDplusLoggerPluginUserdataLogfile.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmNsYXNzIE9JRHBsdXNMb2dnZXJQbHVnaW5Vc2VyZGF0YUxvZ2ZpbGUgZXh0ZW5kcyBPSURwbHVzTG9nZ2VyUGx1Z2luIHsKCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGF2YWlsYWJsZSgmJHJlYXNv'));
	@fwrite($fp, base64_decode('bikvKjogYm9vbCovIHsKCQlpZiAoIWlzX2RpcihPSURwbHVzOjpiYXNlUGF0aCgpLicvdXNlcmRhdGEvbG9ncy8nKSkgewoJCQkkcmVhc29uID0gIkRpcmVjdG9yeSB1c2VyZGF0YS9sb2dzLyBub3QgZXhpc3RpbmciOwoJCQlyZXR1cm4gZmFsc2U7CgkJfQoKCQlp'));
	@fwrite($fp, base64_decode('ZiAoQGZpbGVfcHV0X2NvbnRlbnRzKE9JRHBsdXM6OmJhc2VQYXRoKCkuJy91c2VyZGF0YS9sb2dzL29pZHBsdXMubG9nJywgJycsIEZJTEVfQVBQRU5EKSA9PT0gZmFsc2UpIHsKCQkJJHJlYXNvbiA9ICJGaWxlIHVzZXJkYXRhL2xvZ3Mvb2lkcGx1cy5sb2cgbm90'));
	@fwrite($fp, base64_decode('IHdyaXRlYWJsZSI7CgkJCXJldHVybiBmYWxzZTsKCQl9CgoJCSRyZWFzb24gPSAnJzsKCQlyZXR1cm4gdHJ1ZTsKCX0KCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGxvZygkZXZlbnQsICR1c2VycywgJG9iamVjdHMpLyo6IGJvb2wqLyB7CgkJaWYgKCFpc19kaXIo'));
	@fwrite($fp, base64_decode('T0lEcGx1czo6YmFzZVBhdGgoKS4nL3VzZXJkYXRhL2xvZ3MvJykpIHJldHVybiBmYWxzZTsKCgkJJHVzZXJzX25hbWVzID0gYXJyYXkoKTsKCQlmb3JlYWNoICgkdXNlcnMgYXMgbGlzdCgkc2V2ZXJpdHksICR1c2VybmFtZSkpICR1c2Vyc19uYW1lc1tdID0gJHVz'));
	@fwrite($fp, base64_decode('ZXJuYW1lOwoJCSR1c2Vyc19pbmZvID0gY291bnQoJHVzZXJzX25hbWVzKSA9PSAwID8gJycgOiAiIChhZmZlY3RlZCB1c2VyczogIi5pbXBsb2RlKCcsICcsJHVzZXJzX25hbWVzKS4iKSI7CgoJCSRvYmplY3RzX25hbWVzID0gYXJyYXkoKTsKCQlmb3JlYWNoICgk'));
	@fwrite($fp, base64_decode('b2JqZWN0cyBhcyBsaXN0KCRzZXZlcml0eSwgJG9iamVjdHNfbmFtZXMpKSAkb2JqZWN0c19uYW1lc1tdID0gJG9iamVjdG5hbWU7CgkJJG9iamVjdHNfaW5mbyA9IGNvdW50KCRvYmplY3RzX25hbWVzKSA9PSAwID8gJycgOiAiIChhZmZlY3RlZCBvYmplY3RzOiAi'));
	@fwrite($fp, base64_decode('LmltcGxvZGUoJywgJywkb2JqZWN0c19uYW1lcykuIikiOwoKCQkkdHMgPSBkYXRlKCdZLW0tZCBIOmk6cycpOwoJCSRhZGRyID0gaXNzZXQoJF9TRVJWRVJbJ1JFTU9URV9BRERSJ10pID8gJF9TRVJWRVJbJ1JFTU9URV9BRERSJ10gOiAndW5rbm93bic7CgoJCS8v'));
	@fwrite($fp, base64_decode('IE5vdGU6ICR0cyB3YXMgcHV0IGludG8gYnJhY2tldHMsIGJlY2F1c2UgdGhlcmUgaXMgcHJvYmFibHkgYSBidWcgaW4gZmFpbDJiYW4gdGhhdCBkb2VzIG5vdCBhbGxvdyB0aGUgZGF0ZS90aW1lIGJlaW5nIGF0IG9mZnNldCAwCgkJLy8gIldBUk5JTkcgRm91bmQg'));
	@fwrite($fp, base64_decode('YSBtYXRjaCBmb3IgJzAyMC0wNS0xMSAyMjo1MDo1OCBbMTkyLjE2OC42OS44OV0gRmFpbGVkIGxvZ2luIC4uLiIKCQkkbGluZSA9ICJbJHRzXSBbJGFkZHJdICRldmVudCR1c2Vyc19pbmZvJG9iamVjdHNfaW5mbyI7CgoJCXJldHVybiBAZmlsZV9wdXRfY29udGVu'));
	@fwrite($fp, base64_decode('dHMoT0lEcGx1czo6YmFzZVBhdGgoKS4nL3VzZXJkYXRhL2xvZ3Mvb2lkcGx1cy5sb2cnLCAiJGxpbmVcbiIsIEZJTEVfQVBQRU5EKSAhPT0gZmFsc2U7Cgl9Cn0K'));
	@fclose($fp);
}
if (!is_file('plugins/logger/300_userdata_logfile/OIDplusLoggerPluginUserdataLogfile.class.php')) {
	warn('File has vanished! Will re-create it: plugins/logger/300_userdata_logfile/OIDplusLoggerPluginUserdataLogfile.class.php');
	writefile_3();
	if (!is_file('plugins/logger/300_userdata_logfile/OIDplusLoggerPluginUserdataLogfile.class.php')) {
		warn('File cannot be created (not existing): plugins/logger/300_userdata_logfile/OIDplusLoggerPluginUserdataLogfile.class.php');
	} else if (sha1_file('plugins/logger/300_userdata_logfile/OIDplusLoggerPluginUserdataLogfile.class.php') != 'd42371b415ce6c4439bc3fb3f945e88d26b2057b') {
		warn('File cannot be created (checksum mismatch): plugins/logger/300_userdata_logfile/OIDplusLoggerPluginUserdataLogfile.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/logger/300_userdata_logfile/OIDplusLoggerPluginUserdataLogfile.class.php', 0644)) {
		warn('Could not change file permissions of plugins/logger/300_userdata_logfile/OIDplusLoggerPluginUserdataLogfile.class.php');
	}
} else {
	if (@sha1_file('plugins/logger/300_userdata_logfile/OIDplusLoggerPluginUserdataLogfile.class.php') !== 'd42371b415ce6c4439bc3fb3f945e88d26b2057b') {
		if (@sha1_file('plugins/logger/300_userdata_logfile/OIDplusLoggerPluginUserdataLogfile.class.php') !== 'e73cf207c72b70ff4f9194a4227ccf585e430a78') {
			warn('File was modified. Will overwrite the changes now: plugins/logger/300_userdata_logfile/OIDplusLoggerPluginUserdataLogfile.class.php');
			$tmp = pathinfo('plugins/logger/300_userdata_logfile/OIDplusLoggerPluginUserdataLogfile.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/logger/300_userdata_logfile/OIDplusLoggerPluginUserdataLogfile.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/logger/300_userdata_logfile/OIDplusLoggerPluginUserdataLogfile.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_3();
		if (@sha1_file('plugins/logger/300_userdata_logfile/OIDplusLoggerPluginUserdataLogfile.class.php') !== 'd42371b415ce6c4439bc3fb3f945e88d26b2057b') {
			warn('File cannot be written (checksum mismatch): plugins/logger/300_userdata_logfile/OIDplusLoggerPluginUserdataLogfile.class.php');
		}
	}
}

// Files different: plugins/publicPages/090_login/OIDplusPagePublicLogin.class.php
function writefile_4() {
	@$fp = fopen('plugins/publicPages/090_login/OIDplusPagePublicLogin.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmNsYXNzIE9JRHBsdXNQYWdlUHVibGljTG9naW4gZXh0ZW5kcyBPSURwbHVzUGFnZVBsdWdpblB1YmxpYyB7CgoJcHVibGljIGZ1bmN0aW9uIGFjdGlvbigmJGhhbmRsZWQpIHsKCQkvLyA9PT0gUkEg'));
	@fwrite($fp, base64_decode('TE9HSU4vTE9HT1VUID09PQoKCQlpZiAoaXNzZXQoJF9QT1NUWyJhY3Rpb24iXSkgJiYgKCRfUE9TVFsiYWN0aW9uIl0gPT0gInJhX2xvZ2luIikpIHsKCQkJJGhhbmRsZWQgPSB0cnVlOwoKCQkJJGVtYWlsID0gJF9QT1NUWydlbWFpbCddOwoJCQkkcmEgPSBuZXcg'));
	@fwrite($fp, base64_decode('T0lEcGx1c1JBKCRlbWFpbCk7CgoJCQlpZiAoT0lEcGx1czo6YmFzZUNvbmZpZygpLT5nZXRWYWx1ZSgnUkVDQVBUQ0hBX0VOQUJMRUQnLCBmYWxzZSkpIHsKCQkJCSRzZWNyZXQ9T0lEcGx1czo6YmFzZUNvbmZpZygpLT5nZXRWYWx1ZSgnUkVDQVBUQ0hBX1BSSVZB'));
	@fwrite($fp, base64_decode('VEUnLCAnJyk7CgkJCQkkcmVzcG9uc2U9JF9QT1NUWyJjYXB0Y2hhIl07CgkJCQkkdmVyaWZ5PWZpbGVfZ2V0X2NvbnRlbnRzKCJodHRwczovL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS9hcGkvc2l0ZXZlcmlmeT9zZWNyZXQ9eyRzZWNyZXR9JnJlc3BvbnNlPXsk'));
	@fwrite($fp, base64_decode('cmVzcG9uc2V9Iik7CgkJCQkkY2FwdGNoYV9zdWNjZXNzPWpzb25fZGVjb2RlKCR2ZXJpZnkpOwoJCQkJaWYgKCRjYXB0Y2hhX3N1Y2Nlc3MtPnN1Y2Nlc3M9PWZhbHNlKSB7CgkJCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oJ0NhcHRjaGEgd3JvbmcnKTsK'));
	@fwrite($fp, base64_decode('CQkJCX0KCQkJfQoKCQkJaWYgKCRyYS0+Y2hlY2tQYXNzd29yZCgkX1BPU1RbJ3Bhc3N3b3JkJ10pKSB7CgkJCQlPSURwbHVzOjpsb2dnZXIoKS0+bG9nKCJbT0tdUkEoJGVtYWlsKSEiLCAiUkEgJyRlbWFpbCcgbG9nZ2VkIGluIik7CgkJCQlPSURwbHVzOjphdXRo'));
	@fwrite($fp, base64_decode('VXRpbHMoKTo6cmFMb2dpbigkZW1haWwpOwoKCQkJCU9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJVUERBVEUgIyMjcmEgc2V0IGxhc3RfbG9naW4gPSAiLk9JRHBsdXM6OmRiKCktPnNxbERhdGUoKS4iIHdoZXJlIGVtYWlsID0gPyIsIGFycmF5KCRlbWFpbCkpOwoKCQkJ'));
	@fwrite($fp, base64_decode('CWVjaG8ganNvbl9lbmNvZGUoYXJyYXkoInN0YXR1cyIgPT4gMCkpOwoJCQl9IGVsc2UgewoJCQkJaWYgKE9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ2xvZ19mYWlsZWRfcmFfbG9naW5zJywgZmFsc2UpKSB7CgkJCQkJaWYgKCRyYS0+ZXhpc3Rpbmco'));
	@fwrite($fp, base64_decode('KSkgewoJCQkJCQlPSURwbHVzOjpsb2dnZXIoKS0+bG9nKCJbV0FSTl1BISIsICJGYWlsZWQgbG9naW4gdG8gUkEgYWNjb3VudCAnJGVtYWlsJyAod3JvbmcgcGFzc3dvcmQpIik7CgkJCQkJfSBlbHNlIHsKCQkJCQkJT0lEcGx1czo6bG9nZ2VyKCktPmxvZygiW1dB'));
	@fwrite($fp, base64_decode('Uk5dQSEiLCAiRmFpbGVkIGxvZ2luIHRvIFJBIGFjY291bnQgJyRlbWFpbCcgKFJBIG5vdCBleGlzdGluZykiKTsKCQkJCQl9CgkJCQl9CgkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbignV3JvbmcgcGFzc3dvcmQgb3IgdXNlciBub3QgcmVnaXN0ZXJlZCcp'));
	@fwrite($fp, base64_decode('OwoJCQl9CgkJfQoJCWlmIChpc3NldCgkX1BPU1RbImFjdGlvbiJdKSAmJiAoJF9QT1NUWyJhY3Rpb24iXSA9PSAicmFfbG9nb3V0IikpIHsKCQkJJGhhbmRsZWQgPSB0cnVlOwoKCQkJJGVtYWlsID0gJF9QT1NUWydlbWFpbCddOwoKCQkJT0lEcGx1czo6bG9nZ2Vy'));
	@fwrite($fp, base64_decode('KCktPmxvZygiW09LXVJBKCRlbWFpbCkhIiwgIlJBICckZW1haWwnIGxvZ2dlZCBvdXQiKTsKCQkJT0lEcGx1czo6YXV0aFV0aWxzKCk6OnJhTG9nb3V0KCRlbWFpbCk7CgkJCWVjaG8ganNvbl9lbmNvZGUoYXJyYXkoInN0YXR1cyIgPT4gMCkpOwoJCX0KCgkJLy8g'));
	@fwrite($fp, base64_decode('PT09IEFETUlOIExPR0lOL0xPR09VVCA9PT0KCgkJaWYgKGlzc2V0KCRfUE9TVFsiYWN0aW9uIl0pICYmICgkX1BPU1RbImFjdGlvbiJdID09ICJhZG1pbl9sb2dpbiIpKSB7CgkJCSRoYW5kbGVkID0gdHJ1ZTsKCgkJCWlmIChPSURwbHVzOjpiYXNlQ29uZmlnKCkt'));
	@fwrite($fp, base64_decode('PmdldFZhbHVlKCdSRUNBUFRDSEFfRU5BQkxFRCcsIGZhbHNlKSkgewoJCQkJJHNlY3JldD1PSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdSRUNBUFRDSEFfUFJJVkFURScsICcnKTsKCQkJCSRyZXNwb25zZT0kX1BPU1RbImNhcHRjaGEiXTsKCQkJCSR2'));
	@fwrite($fp, base64_decode('ZXJpZnk9ZmlsZV9nZXRfY29udGVudHMoImh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vcmVjYXB0Y2hhL2FwaS9zaXRldmVyaWZ5P3NlY3JldD17JHNlY3JldH0mcmVzcG9uc2U9eyRyZXNwb25zZX0iKTsKCQkJCSRjYXB0Y2hhX3N1Y2Nlc3M9anNvbl9kZWNvZGUoJHZl'));
	@fwrite($fp, base64_decode('cmlmeSk7CgkJCQlpZiAoJGNhcHRjaGFfc3VjY2Vzcy0+c3VjY2Vzcz09ZmFsc2UpIHsKCQkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbignQ2FwdGNoYSB3cm9uZycpOwoJCQkJfQoJCQl9CgoJCQlpZiAoT0lEcGx1czo6YXV0aFV0aWxzKCk6OmFkbWluQ2hl'));
	@fwrite($fp, base64_decode('Y2tQYXNzd29yZCgkX1BPU1RbJ3Bhc3N3b3JkJ10pKSB7CgkJCQlPSURwbHVzOjpsb2dnZXIoKS0+bG9nKCJbT0tdQSEiLCAiQWRtaW4gbG9nZ2VkIGluIik7CgkJCQlPSURwbHVzOjphdXRoVXRpbHMoKTo6YWRtaW5Mb2dpbigpOwoJCQkJZWNobyBqc29uX2VuY29k'));
	@fwrite($fp, base64_decode('ZShhcnJheSgic3RhdHVzIiA9PiAwKSk7CgkJCX0gZWxzZSB7CgkJCQlpZiAoT0lEcGx1czo6YmFzZUNvbmZpZygpLT5nZXRWYWx1ZSgnbG9nX2ZhaWxlZF9hZG1pbl9sb2dpbnMnLCBmYWxzZSkpIHsKCQkJCQlPSURwbHVzOjpsb2dnZXIoKS0+bG9nKCJbV0FSTl1B'));
	@fwrite($fp, base64_decode('ISIsICJGYWlsZWQgbG9naW4gdG8gYWRtaW4gYWNjb3VudCIpOwoJCQkJfQoJCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oJ1dyb25nIHBhc3N3b3JkJyk7CgkJCX0KCQl9CgkJaWYgKGlzc2V0KCRfUE9TVFsiYWN0aW9uIl0pICYmICgkX1BPU1RbImFjdGlv'));
	@fwrite($fp, base64_decode('biJdID09ICJhZG1pbl9sb2dvdXQiKSkgewoJCQkkaGFuZGxlZCA9IHRydWU7CgkJCU9JRHBsdXM6OmxvZ2dlcigpLT5sb2coIltPS11BISIsICJBZG1pbiBsb2dnZWQgb3V0Iik7CgkJCU9JRHBsdXM6OmF1dGhVdGlscygpOjphZG1pbkxvZ291dCgpOwoJCQllY2hv'));
	@fwrite($fp, base64_decode('IGpzb25fZW5jb2RlKGFycmF5KCJzdGF0dXMiID0+IDApKTsKCQl9Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGluaXQoJGh0bWw9dHJ1ZSkgewoJCU9JRHBsdXM6OmNvbmZpZygpLT5wcmVwYXJlQ29uZmlnS2V5KCdsb2dfZmFpbGVkX3JhX2xvZ2lucycsICdMb2cgZmFp'));
	@fwrite($fp, base64_decode('bGVkIFJBIGxvZ2lucycsICcwJywgT0lEcGx1c0NvbmZpZzo6UFJPVEVDVElPTl9FRElUQUJMRSwgZnVuY3Rpb24oJHZhbHVlKSB7CgkJCWlmICghaXNfbnVtZXJpYygkdmFsdWUpIHx8ICgoJHZhbHVlICE9IDApICYmICgoJHZhbHVlICE9IDEpKSkpIHsKCQkJCXRo'));
	@fwrite($fp, base64_decode('cm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKCJWYWxpZCB2YWx1ZXM6IDAgKG9mZikgb3IgMSAob24pLiIpOwoJCQl9CgkJfSk7CgkJT0lEcGx1czo6Y29uZmlnKCktPnByZXBhcmVDb25maWdLZXkoJ2xvZ19mYWlsZWRfYWRtaW5fbG9naW5zJywgJ0xvZyBmYWlsZWQg'));
	@fwrite($fp, base64_decode('QWRtaW4gbG9naW5zJywgJzAnLCBPSURwbHVzQ29uZmlnOjpQUk9URUNUSU9OX0VESVRBQkxFLCBmdW5jdGlvbigkdmFsdWUpIHsKCQkJaWYgKCFpc19udW1lcmljKCR2YWx1ZSkgfHwgKCgkdmFsdWUgIT0gMCkgJiYgKCgkdmFsdWUgIT0gMSkpKSkgewoJCQkJdGhy'));
	@fwrite($fp, base64_decode('b3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oIlZhbGlkIHZhbHVlczogMCAob2ZmKSBvciAxIChvbikuIik7CgkJCX0KCQl9KTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZ3VpKCRpZCwgJiRvdXQsICYkaGFuZGxlZCkgewoJCWlmICgkaWQgPT09ICdvaWRwbHVzOmxvZ2lu'));
	@fwrite($fp, base64_decode('JykgewoJCQkkaGFuZGxlZCA9IHRydWU7CgkJCSRvdXRbJ3RpdGxlJ10gPSAnTG9naW4nOwoJCQkkb3V0WydpY29uJ10gID0gT0lEcGx1czo6d2VicGF0aChfX0RJUl9fKS4nbG9naW5fYmlnLnBuZyc7CgoJCQkkb3V0Wyd0ZXh0J10gLj0gJzxub3NjcmlwdD4nOwoJ'));
	@fwrite($fp, base64_decode('CQkkb3V0Wyd0ZXh0J10gLj0gJzxwPllvdSBuZWVkIHRvIGVuYWJsZSBKYXZhU2NyaXB0IHRvIHVzZSB0aGUgbG9naW4gYXJlYS48L3A+JzsKCQkJJG91dFsndGV4dCddIC49ICc8L25vc2NyaXB0Pic7CgoJCQkkb3V0Wyd0ZXh0J10gLj0gJzxkaXYgaWQ9ImxvZ2lu'));
	@fwrite($fp, base64_decode('QXJlYSIgc3R5bGU9InZpc2liaWxpdHk6IGhpZGRlbiI+PGRpdiBpZD0ibG9naW5UYWIiIGNsYXNzPSJjb250YWluZXIiIHN0eWxlPSJ3aWR0aDoxMDAlOyI+JzsKCQkJJG91dFsndGV4dCddIC49IChPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdSRUNB'));
	@fwrite($fp, base64_decode('UFRDSEFfRU5BQkxFRCcsIGZhbHNlKSA/CgkJCSAgICAgICAgICAgICAgICAnPHNjcmlwdD4gZ3JlY2FwdGNoYS5yZW5kZXIoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImctcmVjYXB0Y2hhIiksIHsgInNpdGVrZXkiIDogIicuT0lEcGx1czo6YmFzZUNvbmZpZygp'));
	@fwrite($fp, base64_decode('LT5nZXRWYWx1ZSgnUkVDQVBUQ0hBX1BVQkxJQycsICcnKS4nIiB9KTsgPC9zY3JpcHQ+Jy4KCQkJICAgICAgICAgICAgICAgICc8cD5CZWZvcmUgbG9nZ2luZyBpbiwgcGxlYXNlIHNvbHZlIHRoZSBmb2xsb3dpbmcgQ0FQVENIQTwvcD48ZGl2IGlkPSJnLXJlY2Fw'));
	@fwrite($fp, base64_decode('dGNoYSIgY2xhc3M9ImctcmVjYXB0Y2hhIiBkYXRhLXNpdGVrZXk9IicuT0lEcGx1czo6YmFzZUNvbmZpZygpLT5nZXRWYWx1ZSgnUkVDQVBUQ0hBX1BVQkxJQycsICcnKS4nIj48L2Rpdj4nIDogJycpOwoJCQkkb3V0Wyd0ZXh0J10gLj0gJzxicj4nOwoJCQkkb3V0'));
	@fwrite($fp, base64_decode('Wyd0ZXh0J10gLj0gJzx1bCBjbGFzcz0ibmF2IG5hdi1waWxscyI+JzsKCQkJJG91dFsndGV4dCddIC49ICcJCQk8bGkgY2xhc3M9ImFjdGl2ZSI+JzsKCQkJJG91dFsndGV4dCddIC49ICcJCQk8YSBocmVmPSIjMWEiIGRhdGEtdG9nZ2xlPSJ0YWIiPkxvZ2luIGFz'));
	@fwrite($fp, base64_decode('IFJBPC9hPic7CgkJCSRvdXRbJ3RleHQnXSAuPSAnCQkJPC9saT4nOwoJCQkkb3V0Wyd0ZXh0J10gLj0gJwkJCTxsaT48YSBocmVmPSIjMmEiIGRhdGEtdG9nZ2xlPSJ0YWIiPkxvZ2luIGFzIGFkbWluaXN0cmF0b3I8L2E+JzsKCQkJJG91dFsndGV4dCddIC49ICcJ'));
	@fwrite($fp, base64_decode('CQk8L2xpPic7CgkJCSRvdXRbJ3RleHQnXSAuPSAnCQk8L3VsPic7CgkJCSRvdXRbJ3RleHQnXSAuPSAnCQkJPGRpdiBjbGFzcz0idGFiLWNvbnRlbnQgY2xlYXJmaXgiPic7CgkJCSRvdXRbJ3RleHQnXSAuPSAnCQkJICA8ZGl2IGNsYXNzPSJ0YWItcGFuZSBhY3Rp'));
	@fwrite($fp, base64_decode('dmUiIGlkPSIxYSI+JzsKCgkJCSRvdXRbJ3RleHQnXSAuPSAnPGgyPkxvZ2luIGFzIFJBPC9oMj4nOwoKCQkJJGxvZ2luX2xpc3QgPSBPSURwbHVzOjphdXRoVXRpbHMoKS0+bG9nZ2VkSW5SYUxpc3QoKTsKCQkJaWYgKGNvdW50KCRsb2dpbl9saXN0KSA+IDApIHsK'));
	@fwrite($fp, base64_decode('CQkJCWZvcmVhY2ggKCRsb2dpbl9saXN0IGFzICR4KSB7CgkJCQkJJG91dFsndGV4dCddIC49ICc8cD5Zb3UgYXJlIGxvZ2dlZCBpbiBhcyA8Yj4nLiR4LT5yYUVtYWlsKCkuJzwvYj4gKDxhIGhyZWY9IiMiIG9uY2xpY2s9InJldHVybiByYUxvZ291dCgnLmpzX2Vz'));
	@fwrite($fp, base64_decode('Y2FwZSgkeC0+cmFFbWFpbCgpKS4nKTsiPkxvZ291dDwvYT4pPC9wPic7CgkJCQl9CgkJCQkkb3V0Wyd0ZXh0J10gLj0gJzxwPklmIHlvdSBoYXZlIG1vcmUgYWNjb3VudHMsIHlvdSBjYW4gbG9nIGluIHdpdGggYSBuZXcgYWNjb3VudDo8L3A+JzsKCQkJfSBlbHNl'));
	@fwrite($fp, base64_decode('IHsKCQkJCSRvdXRbJ3RleHQnXSAuPSAnPHA+RW50ZXIgeW91ciBlbWFpbCBhZGRyZXNzIGFuZCB5b3VyIHBhc3N3b3JkIHRvIGxvZyBpbiBhcyBSZWdpc3RyYXRpb24gQXV0aG9yaXR5LjwvcD4nOwoJCQl9CgkJCSRvdXRbJ3RleHQnXSAuPSAnPGZvcm0gb25zdWJt'));
	@fwrite($fp, base64_decode('aXQ9InJldHVybiByYUxvZ2luT25TdWJtaXQodGhpcyk7Ij4nOwoJCQkkb3V0Wyd0ZXh0J10gLj0gJzxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9ImFjdGlvbiIgdmFsdWU9InJhX2xvZ2luIj4nOwoJCQkkb3V0Wyd0ZXh0J10gLj0gJzxkaXY+PGxhYmVsIGNsYXNz'));
	@fwrite($fp, base64_decode('PSJwYWRkaW5nX2xhYmVsIj5FLU1haWw6PC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0iZW1haWwiIHZhbHVlPSIiIGlkPSJyYUxvZ2luRU1haWwiPjwvZGl2Pic7CgkJCSRvdXRbJ3RleHQnXSAuPSAnPGRpdj48bGFiZWwgY2xhc3M9InBhZGRpbmdfbGFi'));
	@fwrite($fp, base64_decode('ZWwiPlBhc3N3b3JkOjwvbGFiZWw+PGlucHV0IHR5cGU9InBhc3N3b3JkIiBuYW1lPSJwYXNzd29yZCIgdmFsdWU9IiIgaWQ9InJhTG9naW5QYXNzd29yZCI+PC9kaXY+JzsKCQkJJG91dFsndGV4dCddIC49ICc8YnI+PGlucHV0IHR5cGU9InN1Ym1pdCIgdmFsdWU9'));
	@fwrite($fp, base64_decode('IkxvZ2luIj48YnI+PGJyPic7CgkJCSRvdXRbJ3RleHQnXSAuPSAnPC9mb3JtPic7CgkJCSRvdXRbJ3RleHQnXSAuPSAnPHA+PGEgJy5PSURwbHVzOjpndWkoKS0+bGluaygnb2lkcGx1czpmb3Jnb3RfcGFzc3dvcmQnKS4nPkZvcmdvdCBwYXNzd29yZD88L2E+PGJy'));
	@fwrite($fp, base64_decode('Pic7CgoJCQlpZiAoY2xhc3NfZXhpc3RzKCdPSURwbHVzUGFnZVJhSW52aXRlJykgJiYgT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdyYV9pbnZpdGF0aW9uX2VuYWJsZWQnKSkgewoJCQkJJG91dFsndGV4dCddIC49ICc8YWJiciB0aXRsZT0iVG8gcmVjZWl2'));
	@fwrite($fp, base64_decode('ZSBsb2dpbiBkYXRhLCB0aGUgc3VwZXJpb3IgUkEgbmVlZHMgdG8gc2VuZCB5b3UgYW4gaW52aXRhdGlvbi4gQWZ0ZXIgY3JlYXRpbmcgb3IgdXBkYXRpbmcgeW91ciBPSUQsIHRoZSBzeXN0ZW0gd2lsbCBhc2sgdGhlbSBpZiB0aGV5IHdhbnQgdG8gc2VuZCB5b3Ug'));
	@fwrite($fp, base64_decode('YW4gaW52aXRhdGlvbi4gSWYgdGhleSBhY2NlcHQsIHlvdSB3aWxsIHJlY2VpdmUgYW4gZW1haWwgd2l0aCBhbiBhY3RpdmF0aW9uIGxpbmsuIEFsdGVybmF0aXZlbHksIHRoZSBzeXN0ZW0gYWRtaW4gY2FuIGNyZWF0ZSB5b3VyIGFjY291bnQgbWFudWFsbHkgaW4g'));
	@fwrite($fp, base64_decode('dGhlIGFkbWluaXN0cmF0b3IgY29udHJvbCBwYW5lbC4iPkhvdyB0byByZWdpc3Rlcj88L2FiYnI+PC9wPic7CgkJCX0gZWxzZSB7CgkJCQkkb3V0Wyd0ZXh0J10gLj0gJzxhYmJyIHRpdGxlPSJTaW5jZSBpbnZpdGF0aW9ucyBhcmUgZGlzYWJsZWQgYXQgdGhpcyBP'));
	@fwrite($fp, base64_decode('SURwbHVzIGluc3RhbGxhdGlvbiwgdGhlIHN5c3RlbSBhZG1pbmlzdHJhdG9yIG5lZWRzIHRvIGNyZWF0ZSB5b3VyIGFjY291bnQgbWFudWFsbHkgaW4gdGhlIGFkbWluaXN0cmF0b3IgY29udHJvbCBwYW5lbC4iPkhvdyB0byByZWdpc3Rlcj88L2FiYnI+PC9wPic7'));
	@fwrite($fp, base64_decode('CgkJCX0KCgkJCSRvdXRbJ3RleHQnXSAuPSAnCQkJCTwvZGl2Pic7CgkJCSRvdXRbJ3RleHQnXSAuPSAnCQkJCTxkaXYgY2xhc3M9InRhYi1wYW5lIiBpZD0iMmEiPic7CgoJCQlpZiAoT0lEcGx1czo6YXV0aFV0aWxzKCk6OmlzQWRtaW5Mb2dnZWRJbigpKSB7CgkJ'));
	@fwrite($fp, base64_decode('CQkkb3V0Wyd0ZXh0J10gLj0gJzxoMj5BZG1pbiBsb2dpbjwvaDI+JzsKCQkJCSRvdXRbJ3RleHQnXSAuPSAnPHA+WW91IGFyZSBsb2dnZWQgaW4gYXMgYWRtaW5pc3RyYXRvci48L3A+JzsKCQkJCSRvdXRbJ3RleHQnXSAuPSAnPGEgaHJlZj0iIyIgb25jbGljaz0i'));
	@fwrite($fp, base64_decode('cmV0dXJuIGFkbWluTG9nb3V0KCk7Ij5Mb2dvdXQ8L2E+JzsKCQkJfSBlbHNlIHsKCQkJCSRvdXRbJ3RleHQnXSAuPSAnPGgyPkxvZ2luIGFzIGFkbWluaXN0cmF0b3I8L2gyPic7CgkJCQkkb3V0Wyd0ZXh0J10gLj0gJzxmb3JtIG9uc3VibWl0PSJyZXR1cm4gYWRt'));
	@fwrite($fp, base64_decode('aW5Mb2dpbk9uU3VibWl0KHRoaXMpOyI+JzsKCQkJCSRvdXRbJ3RleHQnXSAuPSAnPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iYWN0aW9uIiB2YWx1ZT0iYWRtaW5fbG9naW4iPic7CgkJCQkkb3V0Wyd0ZXh0J10gLj0gJzxkaXY+PGxhYmVsIGNsYXNzPSJwYWRk'));
	@fwrite($fp, base64_decode('aW5nX2xhYmVsIj5QYXNzd29yZDo8L2xhYmVsPjxpbnB1dCB0eXBlPSJwYXNzd29yZCIgbmFtZT0icGFzc3dvcmQiIHZhbHVlPSIiIGlkPSJhZG1pbkxvZ2luUGFzc3dvcmQiPjwvZGl2Pic7CgkJCQkkb3V0Wyd0ZXh0J10gLj0gJzxicj48aW5wdXQgdHlwZT0ic3Vi'));
	@fwrite($fp, base64_decode('bWl0IiB2YWx1ZT0iTG9naW4iPjxicj48YnI+JzsKCQkJCSRvdXRbJ3RleHQnXSAuPSAnPC9mb3JtPic7CgkJCQkkb3V0Wyd0ZXh0J10gLj0gJzxwPjxhICcuT0lEcGx1czo6Z3VpKCktPmxpbmsoJ29pZHBsdXM6Zm9yZ290X3Bhc3N3b3JkX2FkbWluJykuJz5Gb3Jn'));
	@fwrite($fp, base64_decode('b3QgcGFzc3dvcmQ/PC9hPjxicj4nOwoJCQl9CgoJCQkkb3V0Wyd0ZXh0J10gLj0gJwkJCQk8L2Rpdj4nOwoJCQkkb3V0Wyd0ZXh0J10gLj0gJwkJCTwvZGl2Pic7CgkJCSRvdXRbJ3RleHQnXSAuPSAnICA8L2Rpdj48YnI+JzsKCQkJJG91dFsndGV4dCddIC49ICc8'));
	@fwrite($fp, base64_decode('cD48Zm9udCBzaXplPSItMSI+PGk+UHJpdmFjeSBpbmZvcm1hdGlvbjwvaT46IEJ5IHVzaW5nIHRoZSBsb2dpbiBmdW5jdGlvbmFsaXR5LCB5b3UgYXJlIGFjY2VwdGluZyB0aGF0IGEgInNlc3Npb24gY29va2llIiBpcyB0ZW1wb3JhcmlseSBzdG9yZWQgaW4geW91'));
	@fwrite($fp, base64_decode('ciBicm93c2VyLiAnLgoJCQkgICAgICAgICAgICAgICAgJ1RoZSBzZXNzaW9uIGNvb2tpZSBpcyBhIHNtYWxsIHRleHQgZmlsZSB0aGF0IGlzIHNlbnQgdG8gdGhpcyB3ZWJzaXRlIGV2ZXJ5IHRpbWUgeW91IHZpc2l0IGl0LCB0byBpZGVudGlmeSB5b3UgYXMgYW4g'));
	@fwrite($fp, base64_decode('YWxyZWFkeSBsb2dnZWQgaW4gdXNlci4gJy4KCQkJICAgICAgICAgICAgICAgICdJdCBkb2VzIG5vdCB0cmFjayBhbnkgb2YgeW91ciBvbmxpbmUgYWN0aXZpdGllcyBvdXRzaWRlIE9JRHBsdXMuIFRoZSBjb29raWUgd2lsbCBiZSBkZXN0cm95ZWQgd2hlbiB5b3Ug'));
	@fwrite($fp, base64_decode('bG9nIG91dCBvciBhZnRlciBhbiBpbmFjdGl2aXR5IG9mICcuY2VpbChPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdTRVNTSU9OX0xJRkVUSU1FJywgMzAqNjApLzYwKS4nIG1pbnV0ZXMuJzsKCQkJJHByaXZhY3lfZG9jdW1lbnRfZmlsZSA9ICdPSURw'));
	@fwrite($fp, base64_decode('bHVzL3ByaXZhY3lfZG9jdW1lbnRhdGlvbi5odG1sJzsKCQkJaWYgKGNsYXNzX2V4aXN0cygnT0lEcGx1c1BhZ2VQdWJsaWNSZXNvdXJjZXMnKSAmJiBmaWxlX2V4aXN0cyhPSURwbHVzOjpiYXNlUGF0aCgpLicvcmVzLycuJHByaXZhY3lfZG9jdW1lbnRfZmlsZSkp'));
	@fwrite($fp, base64_decode('IHsKCQkJCSRvdXRbJ3RleHQnXSAuPSAnIDxhICcuT0lEcGx1czo6Z3VpKCktPmxpbmsoJ29pZHBsdXM6cmVzb3VyY2VzJCcuJHByaXZhY3lfZG9jdW1lbnRfZmlsZS4nJCcuT0lEcGx1czo6YXV0aFV0aWxzKCk6Om1ha2VBdXRoS2V5KCJyZXNvdXJjZXM7Ii4kcHJp'));
	@fwrite($fp, base64_decode('dmFjeV9kb2N1bWVudF9maWxlKS4nI2Nvb2tpZXMnKS4nPk1vcmUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGNvb2tpZXMgdXNlZDwvYT4nOwoJCQl9CgkJCSRvdXRbJ3RleHQnXSAuPSAnPC9mb250PjwvcD48L2Rpdj4nOwoKCQkJJG91dFsndGV4dCddIC49ICc8c2Ny'));
	@fwrite($fp, base64_decode('aXB0PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJsb2dpbkFyZWEiKS5zdHlsZS52aXNpYmlsaXR5ID0gInZpc2libGUiOzwvc2NyaXB0Pic7CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBwdWJsaWNTaXRlbWFwKCYkb3V0KSB7CgkJJG91dFtdID0gT0lEcGx1czo6'));
	@fwrite($fp, base64_decode('Z2V0U3lzdGVtVXJsKCkuJz9nb3RvPScudXJsZW5jb2RlKCdvaWRwbHVzOmxvZ2luJyk7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHRyZWUoJiRqc29uLCAkcmFfZW1haWw9bnVsbCwgJG5vbmpzPWZhbHNlLCAkcmVxX2dvdG89JycpIHsKCQkkbG9naW5DaGlsZHJlbiA9'));
	@fwrite($fp, base64_decode('IGFycmF5KCk7CgoJCWlmIChPSURwbHVzOjphdXRoVXRpbHMoKTo6aXNBZG1pbkxvZ2dlZEluKCkpIHsKCQkJJHJhX3Jvb3RzID0gYXJyYXkoKTsKCgkJCWZvcmVhY2ggKE9JRHBsdXM6OmdldFBhZ2VQbHVnaW5zKCkgYXMgJHBsdWdpbikgewoJCQkJaWYgKGlzX3N1'));
	@fwrite($fp, base64_decode('YmNsYXNzX29mKCRwbHVnaW4sIE9JRHBsdXNQYWdlUGx1Z2luQWRtaW46OmNsYXNzKSkgewoJCQkJCSRwbHVnaW4tPnRyZWUoJHJhX3Jvb3RzKTsKCQkJCX0KCQkJfQoKCQkJJHJhX3Jvb3RzW10gPSBhcnJheSgKCQkJCSdpZCcgICAgICAgPT4gJ29pZHBsdXM6bG9n'));
	@fwrite($fp, base64_decode('b3V0JGFkbWluJywKCQkJCSdpY29uJyAgICAgPT4gT0lEcGx1czo6d2VicGF0aChfX0RJUl9fKS4ndHJlZWljb25fbG9nb3V0LnBuZycsCgkJCQknY29uZGl0aW9uYWxzZWxlY3QnID0+ICdhZG1pbkxvZ291dCgpJywgLy8gZGVmaW5lZCBpbiBvaWRwbHVzX2Jhc2Uu'));
	@fwrite($fp, base64_decode('anMKCQkJCSd0ZXh0JyAgICAgPT4gJ0xvZyBvdXQnCgkJCSk7CgkJCSRsb2dpbkNoaWxkcmVuW10gPSBhcnJheSgKCQkJCSdpZCcgICAgICAgPT4gJ29pZHBsdXM6ZHVtbXkkJy5tZDUocmFuZCgpKSwKCQkJCSd0ZXh0JyAgICAgPT4gIkxvZ2dlZCBpbiBhcyBhZG1p'));
	@fwrite($fp, base64_decode('biIsCgkJCQknaWNvbicgICAgID0+IE9JRHBsdXM6OndlYnBhdGgoX19ESVJfXykuJ3RyZWVpY29uX2FkbWluLnBuZycsCgkJCQknY29uZGl0aW9uYWxzZWxlY3QnID0+ICdmYWxzZScsIC8vIGR1bW15IG5vZGUgdGhhdCBjYW4ndCBiZSBzZWxlY3RlZAoJCQkJJ3N0'));
	@fwrite($fp, base64_decode('YXRlJyAgICA9PiBhcnJheSgib3BlbmVkIiA9PiB0cnVlKSwKCQkJCSdjaGlsZHJlbicgPT4gJHJhX3Jvb3RzCgkJCSk7CgkJfQoKCQlmb3JlYWNoIChPSURwbHVzOjphdXRoVXRpbHMoKTo6bG9nZ2VkSW5SYUxpc3QoKSBhcyAkcmEpIHsKCQkJJHJhX2VtYWlsID0g'));
	@fwrite($fp, base64_decode('JHJhLT5yYUVtYWlsKCk7CgkJCSRyYV9yb290cyA9IGFycmF5KCk7CgoJCQlmb3JlYWNoIChPSURwbHVzOjpnZXRQYWdlUGx1Z2lucygpIGFzICRwbHVnaW4pIHsKCQkJCWlmIChpc19zdWJjbGFzc19vZigkcGx1Z2luLCBPSURwbHVzUGFnZVBsdWdpblJhOjpjbGFz'));
	@fwrite($fp, base64_decode('cykpIHsKCQkJCQkkcGx1Z2luLT50cmVlKCRyYV9yb290cywgJHJhX2VtYWlsKTsKCQkJCX0KCQkJfQoKCQkJJHJhX3Jvb3RzW10gPSBhcnJheSgKCQkJCSdpZCcgICAgICAgPT4gJ29pZHBsdXM6bG9nb3V0JCcuJHJhX2VtYWlsLAoJCQkJJ2NvbmRpdGlvbmFsc2Vs'));
	@fwrite($fp, base64_decode('ZWN0JyA9PiAncmFMb2dvdXQoJy5qc19lc2NhcGUoJHJhX2VtYWlsKS4nKScsIC8vIGRlZmluZWQgaW4gb2lkcGx1c19iYXNlLmpzCgkJCQknaWNvbicgICAgID0+IE9JRHBsdXM6OndlYnBhdGgoX19ESVJfXykuJ3RyZWVpY29uX2xvZ291dC5wbmcnLAoJCQkJJ3Rl'));
	@fwrite($fp, base64_decode('eHQnICAgICA9PiAnTG9nIG91dCcKCQkJKTsKCQkJZm9yZWFjaCAoT0lEcGx1c09iamVjdDo6Z2V0UmFSb290cygkcmFfZW1haWwpIGFzICRsb2Nfcm9vdCkgewoJCQkJJGljbyA9ICRsb2Nfcm9vdC0+Z2V0SWNvbigpOwoJCQkJJHJhX3Jvb3RzW10gPSBhcnJheSgK'));
	@fwrite($fp, base64_decode('CQkJCQknaWQnID0+ICdvaWRwbHVzOnJhcm9vdCQnLiRsb2Nfcm9vdC0+bm9kZUlkKCksCgkJCQkJJ3RleHQnID0+ICdKdW1wIHRvIFJBIHJvb3QgJy4kbG9jX3Jvb3QtPm9iamVjdFR5cGVUaXRsZVNob3J0KCkuJyAnLiRsb2Nfcm9vdC0+Y3J1ZFNob3dJZChPSURw'));
	@fwrite($fp, base64_decode('bHVzT2JqZWN0OjpwYXJzZSgkbG9jX3Jvb3Q6OnJvb3QoKSkpLAoJCQkJCSdjb25kaXRpb25hbHNlbGVjdCcgPT4gJ29wZW5PaWRJblBhbmVsKCcuanNfZXNjYXBlKCRsb2Nfcm9vdC0+bm9kZUlkKCkpLicsIHRydWUpOycsCgkJCQkJJ2ljb24nID0+ICFpc19udWxs'));
	@fwrite($fp, base64_decode('KCRpY28pID8gJGljbyA6IE9JRHBsdXM6OndlYnBhdGgoX19ESVJfXykuJ3RyZWVpY29uX2xpbmsucG5nJwoJCQkJKTsKCQkJfQoJCQkkcmFfZW1haWxfb3JfbmFtZSA9IChuZXcgT0lEcGx1c1JBKCRyYV9lbWFpbCkpLT5yYU5hbWUoKTsKCQkJaWYgKCRyYV9lbWFp'));
	@fwrite($fp, base64_decode('bF9vcl9uYW1lID09ICcnKSAkcmFfZW1haWxfb3JfbmFtZSA9ICRyYV9lbWFpbDsKCQkJJGxvZ2luQ2hpbGRyZW5bXSA9IGFycmF5KAoJCQkJJ2lkJyAgICAgICA9PiAnb2lkcGx1czpkdW1teSQnLm1kNShyYW5kKCkpLAoJCQkJJ3RleHQnICAgICA9PiAiTG9nZ2Vk'));
	@fwrite($fp, base64_decode('IGluIGFzICIuaHRtbGVudGl0aWVzKCRyYV9lbWFpbF9vcl9uYW1lKSwKCQkJCSdpY29uJyAgICAgPT4gT0lEcGx1czo6d2VicGF0aChfX0RJUl9fKS4ndHJlZWljb25fcmEucG5nJywKCQkJCSdjb25kaXRpb25hbHNlbGVjdCcgPT4gJ2ZhbHNlJywgLy8gZHVtbXkg'));
	@fwrite($fp, base64_decode('bm9kZSB0aGF0IGNhbid0IGJlIHNlbGVjdGVkCgkJCQknc3RhdGUnICAgID0+IGFycmF5KCJvcGVuZWQiID0+IHRydWUpLAoJCQkJJ2NoaWxkcmVuJyA9PiAkcmFfcm9vdHMKCQkJKTsKCQl9CgoJCSRqc29uW10gPSBhcnJheSgKCQkJJ2lkJyAgICAgICA9PiAnb2lk'));
	@fwrite($fp, base64_decode('cGx1czpsb2dpbicsCgkJCSdpY29uJyAgICAgPT4gT0lEcGx1czo6d2VicGF0aChfX0RJUl9fKS4ndHJlZWljb25fbG9naW4ucG5nJywKCQkJJ3RleHQnICAgICA9PiAnTG9naW4nLAoJCQknc3RhdGUnICAgID0+IGFycmF5KCJvcGVuZWQiID0+IGNvdW50KCRsb2dp'));
	@fwrite($fp, base64_decode('bkNoaWxkcmVuKT4wKSwKCQkJJ2NoaWxkcmVuJyA9PiAkbG9naW5DaGlsZHJlbgoJCSk7CgoJCXJldHVybiB0cnVlOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiB0cmVlX3NlYXJjaCgkcmVxdWVzdCkgewoJCXJldHVybiBmYWxzZTsKCX0KfQo='));
	@fclose($fp);
}
if (!is_file('plugins/publicPages/090_login/OIDplusPagePublicLogin.class.php')) {
	warn('File has vanished! Will re-create it: plugins/publicPages/090_login/OIDplusPagePublicLogin.class.php');
	writefile_4();
	if (!is_file('plugins/publicPages/090_login/OIDplusPagePublicLogin.class.php')) {
		warn('File cannot be created (not existing): plugins/publicPages/090_login/OIDplusPagePublicLogin.class.php');
	} else if (sha1_file('plugins/publicPages/090_login/OIDplusPagePublicLogin.class.php') != 'd53a4241630e45062be40fa71ee6446221267202') {
		warn('File cannot be created (checksum mismatch): plugins/publicPages/090_login/OIDplusPagePublicLogin.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/publicPages/090_login/OIDplusPagePublicLogin.class.php', 0644)) {
		warn('Could not change file permissions of plugins/publicPages/090_login/OIDplusPagePublicLogin.class.php');
	}
} else {
	if (@sha1_file('plugins/publicPages/090_login/OIDplusPagePublicLogin.class.php') !== 'd53a4241630e45062be40fa71ee6446221267202') {
		if (@sha1_file('plugins/publicPages/090_login/OIDplusPagePublicLogin.class.php') !== '54aaf6e26a764500fa4cbb4b54ad85724d8d7ab7') {
			warn('File was modified. Will overwrite the changes now: plugins/publicPages/090_login/OIDplusPagePublicLogin.class.php');
			$tmp = pathinfo('plugins/publicPages/090_login/OIDplusPagePublicLogin.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/publicPages/090_login/OIDplusPagePublicLogin.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/publicPages/090_login/OIDplusPagePublicLogin.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_4();
		if (@sha1_file('plugins/publicPages/090_login/OIDplusPagePublicLogin.class.php') !== 'd53a4241630e45062be40fa71ee6446221267202') {
			warn('File cannot be written (checksum mismatch): plugins/publicPages/090_login/OIDplusPagePublicLogin.class.php');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 298\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 298') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

