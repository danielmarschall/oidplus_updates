<?php /* <ViaThinkSoftSignature>
k4L/9q55/Ky4+qNQyNoR8RKJYo5sosz7jMhZCuQZSSy4u2YQtHKexhNlDcxecNZJp
aX9FhNHtyLuemQZfdRZZe2eOjbA8xFo6bZoonEicqfeZBTD9phvi5B6NqQMtHALuO
3gUB4fbuQIblxBWPKZ22+R4jPb0b7874iv4eYalpHNdmzOiJJoV8ns19FCZCXcofe
5eme9iErpZ3Oia94UiBF4AEVgqZxVOleSS1+98cfBdwpd1HhGeMahRuuPidCkev4/
TakKuRkxR/StzluoZJEDoy7Jo5GnMXtpZkszqHRqxtk5XyNr7mIEa67oDgvym0VaE
qONzLyX288TixAsYfNOE44LVdbPZqwg3/Ib64msvbeYTrBgrLalF5Jq72bmFSm/Lh
Tn2ZIWLHbXuSsNKshN7UbOmYuV6cAkfui6h7TzuAVpvmtRG8oofAQVuH/FSuTMWR8
QFM57CVgP8DSs4UcV3uXyvSmRUAuivaAgGcvFIglxFpP+CWGxtdSX7qshIx6cPtGC
jOYLR3w4Ib8ZFPQIMX47CS23HDCU/dBL2pmjKDI9UdEMzlzK5P04rnM3UdQnozDxI
TOwMx2SGugL0OrqPVDw7VW1kZlRHQcAST1h2L06P8yzSPeDep0RvfXk4M+9RlLSzw
/geOjAKgqsIqiDdZKP0ZoFss7wfJ0vixnInhWWcSlt1OyIw5OIay5UshzTBklvDOq
O1F6vdiOuXT/WqHBR96wODUXlhhhA0oA8ta4h/xcweC9Orc1pg0XrAzjgnLNeZ5k1
/bVbAclwziG29H3KmUIbuVIrDK0IcSZuwTm0zHeHecI9as4q3znK1lyxZBzXnpgY8
vScKKhqePCgis5zznQ4obO3J8zgh5C/GRAgMngbYFC7S9SVLc7SnQApdbtbIpA+va
q++pKSITZo2IpxdZzwgqqRFeawo6JO4BlnQz2+GXqc9AMzHseMakrC3N62q2h6LRI
leIaY113LOyf8UKlEwMXermjNE3QFguZCd5Jywt2UrstGeMltR/H3pR9X4zmSzOjJ
hY4V17p7Rd8KcodeNBCTpitYW3J/2RFYd9j7e1zjefpXzYCJmSLm/TFIkbn7ZOrdW
2gGrRCTdeuuZZ1ZDhrRyEAPcNtQOrOoEOf4iwi7A014r9WwQOwAXLn6KolEIOeBke
3XtKRmCxjfKVu59d1kv2VTRWEUKr6MeUEOHbA/p1Lo0IlqqqXDHR569yjYJCVVvPi
Ldvc5BP4fqu05/dehbuNmL4jxFwhFwXoc9pQIJLCNrQA4Ww8WTkCfXsEJo9FgoFl/
FQj8e1ujVfa2dVa/uE5HfyLw/96/Gv/nHVnXtbJgExJ1DFdwCPGnz0uBYm2Waverp
w==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 550') {
	err('This update can only be applied to OIDplus version 2.0.0.550!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: plugins/publicPages/100_whois/whois/webwhois.php
function writefile_1() {
	@$fp = fopen('plugins/publicPages/100_whois/whois/webwhois.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMSBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgpyZXF1aXJlX29uY2UgX19ESVJfXyAuICcvLi4vLi4vLi4vLi4vaW5jbHVkZXMvb2lkcGx1cy5pbmMucGhwJzsKCk9JRHBsdXM6OmluaXQodHJ1ZSk7CnNldF9leGNlcHRpb25faGFuZGxl'));
	@fwrite($fp, base64_decode('cihhcnJheSgnT0lEcGx1c0d1aScsICdodG1sX2V4Y2VwdGlvbl9oYW5kbGVyJykpOwoKb3JpZ2luSGVhZGVycygpOwoKLy8gU3RlcCAwOiBHZXQgcmVxdWVzdCBwYXJhbWV0ZXIKCmlmIChQSFBfU0FQSSA9PSAnY2xpJykgewoJaWYgKCRfU0VSVkVSWydhcmdjJ10g'));
	@fwrite($fp, base64_decode('IT0gMikgewoJCWVjaG8gX0woJ1N5bnRheCcpLic6ICcuJF9TRVJWRVJbJ2FyZ3YnXVswXS4nIDxxdWVyeT4nLiJcbiI7CgkJZXhpdCgyKTsKCX0KCSRxdWVyeSA9ICRfU0VSVkVSWydhcmd2J11bMV07Cn0gZWxzZSB7CglpZiAoIWlzc2V0KCRfUkVRVUVTVFsncXVl'));
	@fwrite($fp, base64_decode('cnknXSkpIHsKCQlodHRwX3Jlc3BvbnNlX2NvZGUoNDAwKTsKCQlkaWUoJzxoMT4nLl9MKCdFcnJvcicpLic8L2gxPjxwPicuX0woJ0FyZ3VtZW50ICIlMSIgaXMgbWlzc2luZycsJ3F1ZXJ5JykuJzxwPicpOwoJfQoJJHF1ZXJ5ID0gJF9SRVFVRVNUWydxdWVyeSdd'));
	@fwrite($fp, base64_decode('Owp9CgokYXV0aFRva2VucyA9IGV4cGxvZGUoJyQnLCAkcXVlcnkpOwokcXVlcnkgPSBhcnJheV9zaGlmdCgkYXV0aFRva2Vucyk7CgokcXVlcnkgPSBzdHJfcmVwbGFjZSgnb2lkOi4nLCAnb2lkOicsICRxdWVyeSk7IC8vIGFsbG93IGxlYWRpbmcgZG90CgovLyBT'));
	@fwrite($fp, base64_decode('dGVwIDE6IENvbGxlY3QgZGF0YQoKJG91dCA9IGFycmF5KCk7Cgokb3V0W10gPSAicXVlcnk6ICRxdWVyeSI7CgokZGlzdGFuY2UgPSBudWxsOwokZm91bmQgPSBudWxsOwoKdHJ5IHsKCSRvYmogPSBPSURwbHVzT2JqZWN0OjpmaW5kRml0dGluZygkcXVlcnkpOwoJ'));
	@fwrite($fp, base64_decode('aWYgKCEkb2JqKSAkb2JqID0gT0lEcGx1c09iamVjdDo6cGFyc2UoJHF1ZXJ5KTsgLy8gaW4gY2FzZSB3ZSBkaWRuJ3QgZmluZCBhbnl0aGluZyBmaXR0aW5nLCB3ZSB0YWtlIGl0IGFzIGl0IGlzIGFuZCBsYXRlciB1c2UgZ2V0UGFyZW50KCkgdG8gZmluZCBzb21l'));
	@fwrite($fp, base64_decode('dGhpbmcgZWxzZQoJJHF1ZXJ5ID0gJG9iai0+bm9kZUlkKCk7Cn0gY2F0Y2ggKEV4Y2VwdGlvbiAkZSkgewoJJG9iaiA9IG51bGw7Cn0KCiRvbmx5X3dlbGxrbm93bl9pZHNfZm91bmQgPSBmYWxzZTsKJGNvbnRpbnVlID0gZmFsc2U7CgppZiAoISRvYmopIHsKCSRv'));
	@fwrite($fp, base64_decode('dXRbXSA9ICJyZXN1bHQ6IE5vdCBmb3VuZCI7IC8vIERPIE5PVCBUUkFOU0xBVEUhCgkkY29udGludWUgPSBmYWxzZTsKfSBlbHNlIHsKCSRvYmogPSBudWxsOwoJJGRpc3RhbmNlID0gMDsKCgkkaW5pdF9xdWVyeSA9ICRxdWVyeTsKCXdoaWxlICh0cnVlKSB7CgkJ'));
	@fwrite($fp, base64_decode('JHJlcyA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgKiBmcm9tICMjI29iamVjdHMgd2hlcmUgaWQgPSA/IiwgYXJyYXkoJHF1ZXJ5KSk7CgkJaWYgKCRyZXMtPm51bV9yb3dzKCkgPiAwKSB7CgkJCSRvYmogPSBPSURwbHVzT2JqZWN0OjpwYXJzZSgkcXVl'));
	@fwrite($fp, base64_decode('cnkpOwoJCQlpZiAoJGRpc3RhbmNlID4gMCkgewoJCQkJJG91dFtdID0gInJlc3VsdDogTm90IGZvdW5kOyBzdXBlcmlvciBvYmplY3QgZm91bmQiOyAvLyBETyBOT1QgVFJBTlNMQVRFIQoJCQkJJG91dFtdID0gImRpc3RhbmNlOiAkZGlzdGFuY2UiOyAvLyBETyBO'));
	@fwrite($fp, base64_decode('T1QgVFJBTlNMQVRFCgkJCX0gZWxzZSB7CgkJCQkkb3V0W10gPSAicmVzdWx0OiBGb3VuZCI7IC8vIERPIE5PVCBUUkFOU0xBVEUhCgkJCX0KCQkJJGNvbnRpbnVlID0gdHJ1ZTsKCQkJYnJlYWs7CgkJfQoKCQlpZiAoc3Vic3RyKCRxdWVyeSwwLDQpID09PSAnb2lk'));
	@fwrite($fp, base64_decode('OicpIHsKCQkJJHF1ZXJ5X3ByZXYgPSAkcXVlcnk7CgkJCSRxdWVyeSA9ICdvaWQ6Jy5vaWRfdXAoZXhwbG9kZSgnOicsJHF1ZXJ5LDIpWzFdKTsKCQkJaWYgKCRxdWVyeSA9PSAkcXVlcnlfcHJldikgYnJlYWs7CgkJCSRkaXN0YW5jZSsrOwoJCX0gZWxzZSB7CgkJ'));
	@fwrite($fp, base64_decode('CSRvYmogPSBPSURwbHVzT2JqZWN0OjpwYXJzZSgkcXVlcnkpLT5nZXRQYXJlbnQoKTsgLy8gRm9yIG9iamVjdHMsIHdlIGFzc3VtZSB0aGF0IHRoZXkgYXJlIHBhcmVudHMgb2YgZWFjaCBvdGhlcgoJCQlpZiAoJG9iaikgewoJCQkJJHJlcyA9IE9JRHBsdXM6OmRi'));
	@fwrite($fp, base64_decode('KCktPnF1ZXJ5KCJzZWxlY3QgKiBmcm9tICMjI29iamVjdHMgd2hlcmUgaWQgPSA/IiwgYXJyYXkoJG9iai0+bm9kZUlkKCkpKTsKCQkJCSRkaXN0YW5jZSA9ICRvYmotPmRpc3RhbmNlKCRxdWVyeSk7CgkJCQlhc3NlcnQoJHJlcy0+bnVtX3Jvd3MoKSA+IDApOwoK'));
	@fwrite($fp, base64_decode('CQkJCSRxdWVyeSA9ICRvYmotPm5vZGVJZCgpOwoJCQl9CgkJCWJyZWFrOwoJCX0KCX0KCglpZiAoKHN1YnN0cigkcXVlcnksMCw0KSA9PT0gJ29pZDonKSAmJiAoISRvYmopKSB7CgkJJHF1ZXJ5ID0gJGluaXRfcXVlcnk7CgkJJGRpc3RhbmNlID0gMDsKCQl3aGls'));
	@fwrite($fp, base64_decode('ZSAodHJ1ZSkgewoJCQkkcmVzID0gT0lEcGx1czo6ZGIoKS0+cXVlcnkoInNlbGVjdCAqIGZyb20gIyMjYXNuMWlkIHdoZXJlIG9pZCA9ID8gdW5pb24gc2VsZWN0ICogZnJvbSAjIyNpcmkgd2hlcmUgb2lkID0gPyIsIGFycmF5KCRxdWVyeSwgJHF1ZXJ5KSk7CgkJ'));
	@fwrite($fp, base64_decode('CWlmICgkcmVzLT5udW1fcm93cygpID4gMCkgewoJCQkJJG9iaiA9IE9JRHBsdXNPYmplY3Q6OnBhcnNlKCRxdWVyeSk7CgkJCQkkcmVzID0gbnVsbDsKCQkJCWlmICgkZGlzdGFuY2UgPiAwKSB7CgkJCQkJJG91dFtdID0gInJlc3VsdDogTm90IGZvdW5kOyBzdXBl'));
	@fwrite($fp, base64_decode('cmlvciBvYmplY3QgZm91bmQiOyAvLyBETyBOT1QgVFJBTlNMQVRFIQoJCQkJCSRvdXRbXSA9ICJkaXN0YW5jZTogJGRpc3RhbmNlIjsgLy8gRE8gTk9UIFRSQU5TTEFURQoJCQkJfSBlbHNlIHsKCQkJCQkkb3V0W10gPSAicmVzdWx0OiBGb3VuZCI7IC8vIERPIE5P'));
	@fwrite($fp, base64_decode('VCBUUkFOU0xBVEUhCgkJCQl9CgkJCQkkb25seV93ZWxsa25vd25faWRzX2ZvdW5kID0gdHJ1ZTsgLy8gSW5mb3JtYXRpb24gcGFydGlhbGx5IGF2YWlsYWJsZQoJCQkJJGNvbnRpbnVlID0gdHJ1ZTsKCQkJCWJyZWFrOwoJCQl9CgkJCSRxdWVyeV9wcmV2ID0gJHF1'));
	@fwrite($fp, base64_decode('ZXJ5OwoJCQkkcXVlcnkgPSAnb2lkOicub2lkX3VwKGV4cGxvZGUoJzonLCRxdWVyeSwyKVsxXSk7CgkJCWlmICgkcXVlcnkgPT0gJHF1ZXJ5X3ByZXYpIGJyZWFrOwoJCQkkZGlzdGFuY2UrKzsKCQl9Cgl9CgoJaWYgKCEkb2JqKSB7CgkJJG91dFtdID0gInJlc3Vs'));
	@fwrite($fp, base64_decode('dDogTm90IGZvdW5kIjsgLy8gRE8gTk9UIFRSQU5TTEFURSEKCQkkY29udGludWUgPSBmYWxzZTsKCX0KCgkkZm91bmQgPSAkZGlzdGFuY2UgPT0gMDsKfQoKaWYgKCRjb250aW51ZSkgewoJJG91dFtdID0gIiI7Cgkkb3V0W10gPSAib2JqZWN0OiAkcXVlcnkiOyAv'));
	@fwrite($fp, base64_decode('LyBETyBOT1QgVFJBTlNMQVRFIQoJaWYgKCFhbGxvd09iamVjdFZpZXcoJG9iaiwgJGF1dGhUb2tlbnMpKSB7CgkJJG91dFtdID0gInN0YXR1czogSW5mb3JtYXRpb24gdW5hdmFpbGFibGUiOyAvLyBETyBOT1QgVFJBTlNMQVRFIQoJCSRvdXRbXSA9ICJhdHRyaWJ1'));
	@fwrite($fp, base64_decode('dGU6IGNvbmZpZGVudGlhbCI7IC8vIERPIE5PVCBUUkFOU0xBVEUhCgl9IGVsc2UgewoJCWlmICgkb25seV93ZWxsa25vd25faWRzX2ZvdW5kKSB7CgkJCSRvdXRbXSA9ICJzdGF0dXM6IEluZm9ybWF0aW9uIHBhcnRpYWxseSBhdmFpbGFibGUiOyAvLyBETyBOT1Qg'));
	@fwrite($fp, base64_decode('VFJBTlNMQVRFIQoJCX0gZWxzZSB7CgkJCSRvdXRbXSA9ICJzdGF0dXM6IEluZm9ybWF0aW9uIGF2YWlsYWJsZSI7IC8vIERPIE5PVCBUUkFOU0xBVEUhCgkJfQoKCQkkcm93ID0gJHJlcyA/ICRyZXMtPmZldGNoX29iamVjdCgpIDogbnVsbDsKCgkJaWYgKCFpc19u'));
	@fwrite($fp, base64_decode('dWxsKCRyb3cpKSAkb3V0W10gPSAnbmFtZTogJyAuICRyb3ctPnRpdGxlOyAvLyBETyBOT1QgVFJBTlNMQVRFIQoKCQlpZiAoIWlzX251bGwoJHJvdykpIHsKCQkJJGNvbnQgPSAkcm93LT5kZXNjcmlwdGlvbjsKCQkJJGNvbnQgPSBwcmVnX3JlcGxhY2UoJ0A8YVte'));
	@fwrite($fp, base64_decode('Pl0raHJlZlxzKj1ccypbIlwnXShbXlwnIl0rKVsiXCddW14+XSo+KC4rKTxccyovXHMqYVxzKj5AaXNtVScsICdcMiAoXDEpJywgJGNvbnQpOwoJCQkkY29udCA9IHByZWdfcmVwbGFjZSgnQDxici4qPkAnLCAiXG4iLCAkY29udCk7CgkJCSRjb250ID0gcHJlZ19y'));
	@fwrite($fp, base64_decode('ZXBsYWNlKCdAXFxuK0AnLCAiXG4iLCAkY29udCk7CgkJCSRvdXRbXSA9ICdkZXNjcmlwdGlvbjogJyAuIHRyaW0oaHRtbF9lbnRpdHlfZGVjb2RlKHN0cmlwX3RhZ3MoJGNvbnQpKSk7IC8vIERPIE5PVCBUUkFOU0xBVEUhCgkJfQoKCQlpZiAoc3Vic3RyKCRxdWVy'));
	@fwrite($fp, base64_decode('eSwwLDQpID09PSAnb2lkOicpIHsKCQkJJG91dFtdID0gJ2FzbjEtbm90YXRpb246ICcgLiAkb2JqLT5nZXRBc24xTm90YXRpb24oZmFsc2UpOyAvLyBETyBOT1QgVFJBTlNMQVRFIQoJCQkkb3V0W10gPSAnaXJpLW5vdGF0aW9uOiAnIC4gJG9iai0+Z2V0SXJpTm90'));
	@fwrite($fp, base64_decode('YXRpb24oZmFsc2UpOyAvLyBETyBOT1QgVFJBTlNMQVRFIQoKCQkJJHJlczIgPSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0ICogZnJvbSAjIyNhc24xaWQgd2hlcmUgb2lkID0gPyIsIGFycmF5KCRvYmotPm5vZGVJZCgpKSk7CgkJCXdoaWxlICgkcm93MiA9'));
	@fwrite($fp, base64_decode('ICRyZXMyLT5mZXRjaF9vYmplY3QoKSkgewoJCQkJJG91dFtdID0gJ2lkZW50aWZpZXI6ICcgLiAkcm93Mi0+bmFtZTsgLy8gRE8gTk9UIFRSQU5TTEFURSEKCQkJfQoKCQkJJHJlczIgPSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0ICogZnJvbSAjIyNhc24x'));
	@fwrite($fp, base64_decode('aWQgd2hlcmUgc3RhbmRhcmRpemVkID0gPyBhbmQgb2lkID0gPyIsIGFycmF5KHRydWUsICRvYmotPm5vZGVJZCgpKSk7CgkJCXdoaWxlICgkcm93MiA9ICRyZXMyLT5mZXRjaF9vYmplY3QoKSkgewoJCQkJJG91dFtdID0gJ3N0YW5kYXJkaXplZC1pZDogJyAuICRy'));
	@fwrite($fp, base64_decode('b3cyLT5uYW1lOyAvLyBETyBOT1QgVFJBTlNMQVRFIQoJCQl9CgoJCQkkcmVzMiA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgKiBmcm9tICMjI2lyaSB3aGVyZSBvaWQgPSA/IiwgYXJyYXkoJG9iai0+bm9kZUlkKCkpKTsKCQkJd2hpbGUgKCRyb3cyID0g'));
	@fwrite($fp, base64_decode('JHJlczItPmZldGNoX29iamVjdCgpKSB7CgkJCQkkb3V0W10gPSAndW5pY29kZS1sYWJlbDogJyAuICRyb3cyLT5uYW1lOyAvLyBETyBOT1QgVFJBTlNMQVRFIQoJCQl9CgoJCQkkcmVzMiA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgKiBmcm9tICMjI2ly'));
	@fwrite($fp, base64_decode('aSB3aGVyZSBsb25nYXJjID0gPyBhbmQgb2lkID0gPyIsIGFycmF5KHRydWUsICRvYmotPm5vZGVJZCgpKSk7CgkJCXdoaWxlICgkcm93MiA9ICRyZXMyLT5mZXRjaF9vYmplY3QoKSkgewoJCQkJJG91dFtdID0gJ2xvbmctYXJjOiAnIC4gJHJvdzItPm5hbWU7IC8v'));
	@fwrite($fp, base64_decode('IERPIE5PVCBUUkFOU0xBVEUhCgkJCX0KCQl9CgoJCWlmICgkb2JqLT5pc0NvbmZpZGVudGlhbCgpKSB7IC8vIHllcywgd2UgdXNlIGlzQ29uZmlkZW50aWFsKCkgaW5zdGVhZCBvZiBhbGxvd09iamVjdFZpZXcoKSEKCQkJJG91dFtdID0gJ2F0dHJpYnV0ZTogY29u'));
	@fwrite($fp, base64_decode('ZmlkZW50aWFsJzsKCQl9CgoJCWZvcmVhY2ggKE9JRHBsdXM6OmdldFBhZ2VQbHVnaW5zKCkgYXMgJHBsdWdpbikgewoJCQlpZiAoJHBsdWdpbi0+aW1wbGVtZW50c0ZlYXR1cmUoJzEuMy42LjEuNC4xLjM3NDc2LjIuNS4yLjMuNCcpKSB7CgkJCQkkcGx1Z2luLT53'));
	@fwrite($fp, base64_decode('aG9pc09iamVjdEF0dHJpYnV0ZXMoJG9iai0+bm9kZUlkKCksICRvdXQpOwoJCQl9CgkJfQoKCQlpZiAoc3Vic3RyKCRxdWVyeSwwLDQpID09PSAnb2lkOicpIHsKCQkJJHNQYXJlbnQgPSAnb2lkOicub2lkX3VwKGV4cGxvZGUoJzonLCRxdWVyeSwyKVsxXSk7CgoJ'));
	@fwrite($fp, base64_decode('CQkkb2JqVGVzdCA9IE9JRHBsdXNPYmplY3Q6OnBhcnNlKCRzUGFyZW50KTsKCQkJaWYgKGFsbG93T2JqZWN0Vmlldygkb2JqVGVzdCwgJGF1dGhUb2tlbnMpKSB7CgkJCQkkb3V0W10gPSAncGFyZW50OiAnIC4gJHNQYXJlbnQgLiBzaG93X2FzbjFfYXBwZW5kaXgo'));
	@fwrite($fp, base64_decode('JHNQYXJlbnQpOyAvLyBETyBOT1QgVFJBTlNMQVRFIQoJCQl9IGVsc2UgewoJCQkJJG91dFtdID0gJ3BhcmVudDogJyAuICRzUGFyZW50OyAvLyBETyBOT1QgVFJBTlNMQVRFIQoJCQl9CgkJfSBlbHNlIGlmICghaXNfbnVsbCgkcm93KSAmJiAhZW1wdHkoJHJvdy0+'));
	@fwrite($fp, base64_decode('cGFyZW50KSAmJiAoIWlzX3Jvb3QoJHJvdy0+cGFyZW50KSkpIHsKCQkJJHNQYXJlbnQgPSAkcm93LT5wYXJlbnQ7CgkJCSRvdXRbXSA9ICdwYXJlbnQ6ICcgLiAkcm93LT5wYXJlbnQ7IC8vIERPIE5PVCBUUkFOU0xBVEUhCgkJfQoKCQkkcmVzMiA9IE9JRHBsdXM6'));
	@fwrite($fp, base64_decode('OmRiKCktPnF1ZXJ5KCJzZWxlY3QgKiBmcm9tICMjI29iamVjdHMgd2hlcmUgcGFyZW50ID0gPyBvcmRlciBieSAiLk9JRHBsdXM6OmRiKCktPm5hdE9yZGVyKCdpZCcpLCBhcnJheSgkb2JqLT5ub2RlSWQoKSkpOwoJCXdoaWxlICgkcm93MiA9ICRyZXMyLT5mZXRj'));
	@fwrite($fp, base64_decode('aF9vYmplY3QoKSkgewoJCQkkb2JqVGVzdCA9IE9JRHBsdXNPYmplY3Q6OnBhcnNlKCRyb3cyLT5pZCk7CgkJCWlmIChhbGxvd09iamVjdFZpZXcoJG9ialRlc3QsICRhdXRoVG9rZW5zKSkgewoJCQkJJG91dFtdID0gJ3N1Ym9yZGluYXRlOiAnIC4gJHJvdzItPmlk'));
	@fwrite($fp, base64_decode('IC4gc2hvd19hc24xX2FwcGVuZGl4KCRyb3cyLT5pZCk7IC8vIERPIE5PVCBUUkFOU0xBVEUhCgkJCX0gZWxzZSB7CgkJCQkkb3V0W10gPSAnc3Vib3JkaW5hdGU6ICcgLiAkcm93Mi0+aWQ7IC8vIERPIE5PVCBUUkFOU0xBVEUhCgkJCX0KCQl9CgoJCWlmICghaXNf'));
	@fwrite($fp, base64_decode('bnVsbCgkcm93KSkgewoJCQlpZiAoJHJvdy0+Y3JlYXRlZCkgJG91dFtdID0gJ2NyZWF0ZWQ6ICcgLiBkYXRlKCdZLW0tZCBIOmk6cycsIHN0cnRvdGltZSgkcm93LT5jcmVhdGVkKSk7IC8vIERPIE5PVCBUUkFOU0xBVEUhCgkJCWlmICgkcm93LT51cGRhdGVkKSAk'));
	@fwrite($fp, base64_decode('b3V0W10gPSAndXBkYXRlZDogJyAuIGRhdGUoJ1ktbS1kIEg6aTpzJywgc3RydG90aW1lKCRyb3ctPnVwZGF0ZWQpKTsgLy8gRE8gTk9UIFRSQU5TTEFURSEKCQl9CgoJCSRvdXRbXSA9ICcnOwoKCQkkcmVzMiA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3Qg'));
	@fwrite($fp, base64_decode('KiBmcm9tICMjI3JhIHdoZXJlIGVtYWlsID0gPyIsIGFycmF5KGlzX251bGwoJHJvdykgPyAnJyA6ICRyb3ctPnJhX2VtYWlsKSk7CgkJaWYgKCRyb3cyID0gJHJlczItPmZldGNoX29iamVjdCgpKSB7CgkJCSRvdXRbXSA9ICdyYTogJy4oIWVtcHR5KCRyb3cyLT5y'));
	@fwrite($fp, base64_decode('YV9uYW1lKSA/ICRyb3cyLT5yYV9uYW1lIDogKCFlbXB0eSgkcm93Mi0+ZW1haWwpID8gJHJvdzItPmVtYWlsIDogX0woJ1Vua25vd24nKSkpOyAvLyBETyBOT1QgVFJBTlNMQVRFIQoJCQkkb3V0W10gPSAncmEtc3RhdHVzOiBJbmZvcm1hdGlvbiBhdmFpbGFibGUn'));
	@fwrite($fp, base64_decode('OyAvLyBETyBOT1QgVFJBTlNMQVRFIQoKCQkJJHRtcCA9IGFycmF5KCk7CgkJCWlmICghZW1wdHkoJHJvdzItPm9mZmljZSkpICR0bXBbXSA9ICRyb3cyLT5vZmZpY2U7CgkJCWlmICghZW1wdHkoJHJvdzItPm9yZ2FuaXphdGlvbikpICR0bXBbXSA9ICRyb3cyLT5v'));
	@fwrite($fp, base64_decode('cmdhbml6YXRpb247CgkJCSR0bXAgPSBpbXBsb2RlKCcsICcsICR0bXApOwoKCQkJJG91dFtdID0gJ3JhLWNvbnRhY3QtbmFtZTogJyAuICRyb3cyLT5wZXJzb25hbF9uYW1lLighZW1wdHkoJHRtcCkgPyAiICgkdG1wKSIgOiAnJyk7IC8vIERPIE5PVCBUUkFOU0xB'));
	@fwrite($fp, base64_decode('VEUhCgkJCWlmICghYWxsb3dSQVZpZXcoJHJvdzIsICRhdXRoVG9rZW5zKSkgewoJCQkJaWYgKCFlbXB0eSgkcm93Mi0+c3RyZWV0KSB8fCAhZW1wdHkoJHJvdzItPnppcF90b3duKSB8fCAhZW1wdHkoJHJvdzItPmNvdW50cnkpKSB7CgkJCQkJJG91dFtdID0gJ3Jh'));
	@fwrite($fp, base64_decode('LWFkZHJlc3M6ICcuX0woJyhyZWRhY3RlZCknKTsgLy8gRE8gTk9UIFRSQU5TTEFURSEKCQkJCX0KCQkJCSRvdXRbXSA9ICdyYS1waG9uZTogJyAuICghZW1wdHkoJHJvdzItPnBob25lKSA/IF9MKCcocmVkYWN0ZWQpJykgOiAnJyk7IC8vIERPIE5PVCBUUkFOU0xB'));
	@fwrite($fp, base64_decode('VEUhCgkJCQkkb3V0W10gPSAncmEtbW9iaWxlOiAnIC4gKCFlbXB0eSgkcm93Mi0+bW9iaWxlKSA/IF9MKCcocmVkYWN0ZWQpJykgOiAnJyk7IC8vIERPIE5PVCBUUkFOU0xBVEUhCgkJCQkkb3V0W10gPSAncmEtZmF4OiAnIC4gKCFlbXB0eSgkcm93Mi0+ZmF4KSA/'));
	@fwrite($fp, base64_decode('IF9MKCcocmVkYWN0ZWQpJykgOiAnJyk7IC8vIERPIE5PVCBUUkFOU0xBVEUhCgkJCX0gZWxzZSB7CgkJCQlpZiAoIWVtcHR5KCRyb3cyLT5zdHJlZXQpKSAgICRvdXRbXSA9ICdyYS1hZGRyZXNzOiAnIC4gJHJvdzItPnN0cmVldDsgLy8gRE8gTk9UIFRSQU5TTEFU'));
	@fwrite($fp, base64_decode('RSEKCQkJCWlmICghZW1wdHkoJHJvdzItPnppcF90b3duKSkgJG91dFtdID0gJ3JhLWFkZHJlc3M6ICcgLiAkcm93Mi0+emlwX3Rvd247IC8vIERPIE5PVCBUUkFOU0xBVEUhCgkJCQlpZiAoIWVtcHR5KCRyb3cyLT5jb3VudHJ5KSkgICRvdXRbXSA9ICdyYS1hZGRy'));
	@fwrite($fp, base64_decode('ZXNzOiAnIC4gJHJvdzItPmNvdW50cnk7IC8vIERPIE5PVCBUUkFOU0xBVEUhCgkJCQkkb3V0W10gPSAncmEtcGhvbmU6ICcgLiAkcm93Mi0+cGhvbmU7IC8vIERPIE5PVCBUUkFOU0xBVEUhCgkJCQkkb3V0W10gPSAncmEtbW9iaWxlOiAnIC4gJHJvdzItPm1vYmls'));
	@fwrite($fp, base64_decode('ZTsgLy8gRE8gTk9UIFRSQU5TTEFURSEKCQkJCSRvdXRbXSA9ICdyYS1mYXg6ICcgLiAkcm93Mi0+ZmF4OyAvLyBETyBOT1QgVFJBTlNMQVRFIQoJCQl9CgkJCSRvdXRbXSA9ICdyYS1lbWFpbDogJyAuICRyb3ctPnJhX2VtYWlsOyAvLyBETyBOT1QgVFJBTlNMQVRF'));
	@fwrite($fp, base64_decode('IQoJCQlmb3JlYWNoIChPSURwbHVzOjpnZXRQYWdlUGx1Z2lucygpIGFzICRwbHVnaW4pIHsKCQkJCWlmICgkcGx1Z2luLT5pbXBsZW1lbnRzRmVhdHVyZSgnMS4zLjYuMS40LjEuMzc0NzYuMi41LjIuMy40JykpIHsKCQkJCQkkcGx1Z2luLT53aG9pc1JhQXR0cmli'));
	@fwrite($fp, base64_decode('dXRlcygkcm93LT5yYV9lbWFpbCwgJG91dCk7CgkJCQl9CgkJCX0KCgkJCWlmICgkcm93Mi0+cHJpdmFjeSkgeyAvLyB5ZXMsIHdlIHVzZSByb3cyLT5wcml2YWN5KCkgaW5zdGVhZCBvZiBhbGxvd1JBVmlldygpIQoJCQkJJG91dFtdID0gJ3JhLWF0dHJpYnV0ZTog'));
	@fwrite($fp, base64_decode('Y29uZmlkZW50aWFsJzsKCQkJfQoKCQkJaWYgKCRyb3cyLT5yZWdpc3RlcmVkKSAkb3V0W10gPSAncmEtY3JlYXRlZDogJyAuIGRhdGUoJ1ktbS1kIEg6aTpzJywgc3RydG90aW1lKCRyb3cyLT5yZWdpc3RlcmVkKSk7IC8vIERPIE5PVCBUUkFOU0xBVEUhCgkJCWlm'));
	@fwrite($fp, base64_decode('ICgkcm93Mi0+dXBkYXRlZCkgICAgJG91dFtdID0gJ3JhLXVwZGF0ZWQ6ICcgLiBkYXRlKCdZLW0tZCBIOmk6cycsIHN0cnRvdGltZSgkcm93Mi0+dXBkYXRlZCkpOyAvLyBETyBOT1QgVFJBTlNMQVRFIQoJCX0gZWxzZSB7CgkJCSRvdXRbXSA9ICdyYTogJy4oIWlz'));
	@fwrite($fp, base64_decode('X251bGwoJHJvdykgJiYgIWVtcHR5KCRyb3ctPnJhX2VtYWlsKSA/ICRyb3ctPnJhX2VtYWlsIDogX0woJ1Vua25vd24nKSk7IC8vIERPIE5PVCBUUkFOU0xBVEUhCgkJCWlmICghaXNfbnVsbCgkcm93KSkgewoJCQkJZm9yZWFjaCAoT0lEcGx1czo6Z2V0UGFnZVBs'));
	@fwrite($fp, base64_decode('dWdpbnMoKSBhcyAkcGx1Z2luKSB7CgkJCQkJaWYgKCRwbHVnaW4tPmltcGxlbWVudHNGZWF0dXJlKCcxLjMuNi4xLjQuMS4zNzQ3Ni4yLjUuMi4zLjQnKSkgewoJCQkJCQkkcGx1Z2luLT53aG9pc1JhQXR0cmlidXRlcygkcm93LT5yYV9lbWFpbCwgJG91dCk7CgkJ'));
	@fwrite($fp, base64_decode('CQkJfQoJCQkJfQoJCQl9CgkJCSRvdXRbXSA9ICJyYS1zdGF0dXM6IEluZm9ybWF0aW9uIHVuYXZhaWxhYmxlIjsgLy8gRE8gTk9UIFRSQU5TTEFURSEKCQl9Cgl9Cn0KCi8vIFN0ZXAgMjogRm9ybWF0IG91dHB1dAoKJGZvcm1hdCA9IGlzc2V0KCRfUkVRVUVTVFsn'));
	@fwrite($fp, base64_decode('Zm9ybWF0J10pID8gJF9SRVFVRVNUWydmb3JtYXQnXSA6ICd0eHQnOwoKaWYgKCRmb3JtYXQgPT0gJ3R4dCcpIHsKCWhlYWRlcignQ29udGVudC1UeXBlOnRleHQvcGxhaW47IGNoYXJzZXQ9VVRGLTgnKTsKCgkkbG9uZ2VzdF9rZXkgPSAwOwoJZm9yZWFjaCAoJG91'));
	@fwrite($fp, base64_decode('dCBhcyAkbGluZSkgewoJCSRsb25nZXN0X2tleSA9IG1heCgkbG9uZ2VzdF9rZXksIHN0cmxlbih0cmltKGV4cGxvZGUoJzonLCRsaW5lLDIpWzBdKSkpOwoJfQoKCW9iX3N0YXJ0KCk7CgoJLy9lY2hvICclICcgLiBzdHJfcmVwZWF0KCcqJywgT0lEcGx1czo6Y29u'));
	@fwrite($fp, base64_decode('ZmlnKCktPmdldFZhbHVlKCd3ZWJ3aG9pc19vdXRwdXRfZm9ybWF0X21heF9saW5lX2xlbmd0aCcsIDgwKS0yKS4iXHJcbiI7CgoJZm9yZWFjaCAoJG91dCBhcyAkbGluZSkgewoJCWlmICh0cmltKCRsaW5lKSA9PSAnJykgewoJCQllY2hvICJcclxuIjsKCQkJY29u'));
	@fwrite($fp, base64_decode('dGludWU7CgkJfQoKCQkkYXJ5ID0gZXhwbG9kZSgnOicsICRsaW5lLCAyKTsKCgkJJGtleSA9IHRyaW0oJGFyeVswXSk7CgoJCSR2YWx1ZSA9IGlzc2V0KCRhcnlbMV0pID8gdHJpbSgkYXJ5WzFdKSA6ICcnOwoJCSR2YWx1ZSA9IG1iX3dvcmR3cmFwKCR2YWx1ZSwg'));
	@fwrite($fp, base64_decode('T0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCd3ZWJ3aG9pc19vdXRwdXRfZm9ybWF0X21heF9saW5lX2xlbmd0aCcsIDgwKSAtICRsb25nZXN0X2tleSAtIHN0cmxlbignOicpIC0gT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCd3ZWJ3aG9pc19vdXRwdXRf'));
	@fwrite($fp, base64_decode('Zm9ybWF0X3NwYWNlcicsIDIpLCAiXHJcbiIpOwoJCSR2YWx1ZSA9IHN0cl9yZXBsYWNlKCJcclxuIiwgIlxyXG4ka2V5OiIuc3RyX3JlcGVhdCgnICcsICRsb25nZXN0X2tleS1zdHJsZW4oJGtleSkpIC4gc3RyX3JlcGVhdCgnICcsIE9JRHBsdXM6OmNvbmZpZygp'));
	@fwrite($fp, base64_decode('LT5nZXRWYWx1ZSgnd2Vid2hvaXNfb3V0cHV0X2Zvcm1hdF9zcGFjZXInLCAyKSksICR2YWx1ZSk7CgoJCWlmICghZW1wdHkoJHZhbHVlKSkgewoJCQllY2hvICRrZXkuJzonIC4gc3RyX3JlcGVhdCgnICcsICRsb25nZXN0X2tleS1zdHJsZW4oJGtleSkpIC4gc3Ry'));
	@fwrite($fp, base64_decode('X3JlcGVhdCgnICcsIE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgnd2Vid2hvaXNfb3V0cHV0X2Zvcm1hdF9zcGFjZXInLCAyKSkgLiAkdmFsdWUgLiAiXHJcbiI7CgkJfQoJfQoKCS8vZWNobyAnJSAnIC4gc3RyX3JlcGVhdCgnKicsIE9JRHBsdXM6OmNvbmZp'));
	@fwrite($fp, base64_decode('ZygpLT5nZXRWYWx1ZSgnd2Vid2hvaXNfb3V0cHV0X2Zvcm1hdF9tYXhfbGluZV9sZW5ndGgnLCA4MCktMikuIlxyXG4iOwoKCSRjb250ID0gb2JfZ2V0X2NvbnRlbnRzKCk7CglvYl9lbmRfY2xlYW4oKTsKCgllY2hvICRjb250OwoKCWlmIChPSURwbHVzOjpnZXRQ'));
	@fwrite($fp, base64_decode('a2lTdGF0dXMoKSkgewoJCSRzaWduYXR1cmUgPSAnJzsKCQlpZiAoQG9wZW5zc2xfc2lnbigkY29udCwgJHNpZ25hdHVyZSwgT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdvaWRwbHVzX3ByaXZhdGVfa2V5JykpKSB7CgkJCSRzaWduYXR1cmUgPSBiYXNlNjRf'));
	@fwrite($fp, base64_decode('ZW5jb2RlKCRzaWduYXR1cmUpOwoJCQkkc2lnbmF0dXJlID0gbWJfd29yZHdyYXAoJHNpZ25hdHVyZSwgT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCd3ZWJ3aG9pc19vdXRwdXRfZm9ybWF0X21heF9saW5lX2xlbmd0aCcsIDgwKSAtIHN0cmxlbignJSAnKSwg'));
	@fwrite($fp, base64_decode('IlxyXG4iLCB0cnVlKTsKCQkJJHNpZ25hdHVyZSA9ICIlIC0tLS0tQkVHSU4gUlNBIFNJR05BVFVSRS0tLS0tXHJcbiIuCgkJCSAgICAgICAgICAgICBwcmVnX3JlcGxhY2UoJy9eL20nLCAnJSAnLCAkc2lnbmF0dXJlKS4iXHJcbiIuCgkJCSAgICAgICAgICAgICAi'));
	@fwrite($fp, base64_decode('JSAtLS0tLUVORCBSU0EgU0lHTkFUVVJFLS0tLS1cclxuIjsKCQkJZWNobyAkc2lnbmF0dXJlOwoJCX0KCX0KfQoKaWYgKCRmb3JtYXQgPT0gJ2pzb24nKSB7CgkkYXJ5ID0gYXJyYXkoKTsKCgkkY3VycmVudF9zZWN0aW9uID0gYXJyYXkoKTsKCSRhcnlbXSA9ICYk'));
	@fwrite($fp, base64_decode('Y3VycmVudF9zZWN0aW9uOwoKCWZvcmVhY2ggKCRvdXQgYXMgJGxpbmUpIHsKCQlpZiAoJGxpbmUgPT0gJycpIHsKCQkJdW5zZXQoJGN1cnJlbnRfc2VjdGlvbik7CgkJCSRjdXJyZW50X3NlY3Rpb24gPSBhcnJheSgpOwoJCQkkYXJ5W10gPSAmJGN1cnJlbnRfc2Vj'));
	@fwrite($fp, base64_decode('dGlvbjsKCQl9IGVsc2UgewoJCQlsaXN0KCRrZXksJHZhbCkgPSBleHBsb2RlKCc6JywgJGxpbmUsIDIpOwoJCQkkdmFsID0gdHJpbSgkdmFsKTsKCQkJaWYgKCFlbXB0eSgkdmFsKSkgewoJCQkJaWYgKCFpc3NldCgkY3VycmVudF9zZWN0aW9uWyRrZXldKSkgewoJ'));
	@fwrite($fp, base64_decode('CQkJCSRjdXJyZW50X3NlY3Rpb25bJGtleV0gPSAkdmFsOwoJCQkJfSBlbHNlaWYgKGlzX2FycmF5KCRjdXJyZW50X3NlY3Rpb25bJGtleV0pKSB7CgkJCQkJJGN1cnJlbnRfc2VjdGlvblska2V5XVtdID0gJHZhbDsKCQkJCX0gZWxzZSB7CgkJCQkJJGN1cnJlbnRf'));
	@fwrite($fp, base64_decode('c2VjdGlvblska2V5XSA9IGFycmF5KCRjdXJyZW50X3NlY3Rpb25bJGtleV0sICR2YWwpOwoJCQkJfQoJCQl9CgkJfQoJfQoJJGFyeSA9IGFycmF5KAoJCS8vIGh0dHBzOi8vY29kZS52aXN1YWxzdHVkaW8uY29tL2RvY3MvbGFuZ3VhZ2VzL2pzb24jX21hcHBpbmct'));
	@fwrite($fp, base64_decode('aW4tdGhlLWpzb24KCQkvLyBOb3RlIHRoYXQgdGhpcyBzeW50YXggaXMgVlMgQ29kZS1zcGVjaWZpYyBhbmQgbm90IHBhcnQgb2YgdGhlIEpTT04gU2NoZW1hIHNwZWNpZmljYXRpb24uCgkJLy8nJHNjaGVtYScgPT4gJ2h0dHBzOi8vb2lkcGx1cy52aWF0aGlua3Nv'));
	@fwrite($fp, base64_decode('ZnQuY29tL29pZHBsdXMvcGx1Z2lucy9wdWJsaWNQYWdlcy8xMDBfd2hvaXMvd2hvaXMvanNvbl9zY2hlbWEuanNvbicsCgkJJyRzY2hlbWEnID0+IE9JRHBsdXM6OndlYnBhdGgoKS4ncGx1Z2lucy9wdWJsaWNQYWdlcy8xMDBfd2hvaXMvd2hvaXMvanNvbl9zY2hl'));
	@fwrite($fp, base64_decode('bWEuanNvbicsCgoJCS8vIHdlIG5lZWQgdGhpcyBOQU1FRCByb290LCBvdGhlcndpc2UgUEhQIHdpbGwgbmFtZSB0aGUgc2VjdGlvbnMgIjAiLCAiMSIsICIyIiBpZiB0aGUgYXJyYXkgaXMgbm90IHNlcXVlbmNpYWwgKGUuZy4gYmVjYXVzZSAic2lnbmF0dXJlIiBp'));
	@fwrite($fp, base64_decode('cyBhZGRlZCkKCQknd2hvaXMnID0+ICRhcnkKCSk7CgoJaWYgKE9JRHBsdXM6OmdldFBraVN0YXR1cygpKSB7CgkJJGNvbnQgPSBqc29uX2VuY29kZSgkYXJ5KTsKCQkkc2lnbmF0dXJlID0gJyc7CgkJaWYgKEBvcGVuc3NsX3NpZ24oJGNvbnQsICRzaWduYXR1cmUs'));
	@fwrite($fp, base64_decode('IE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgnb2lkcGx1c19wcml2YXRlX2tleScpKSkgewoJCQkkc2lnbmF0dXJlID0gYmFzZTY0X2VuY29kZSgkc2lnbmF0dXJlKTsKCQkJJGFyeVsnc2lnbmF0dXJlJ10gPSBhcnJheSgnY29udGVudCcgPT4gJGNvbnQsICdz'));
	@fwrite($fp, base64_decode('aWduYXR1cmUnID0+ICRzaWduYXR1cmUpOwoJCX0KCX0KCgkvLyBHb29kIEpTT04gc2NoZW1hIHZhbGlkYXRvciBoZXJlOiBodHRwczovL3d3dy5qc29uc2NoZW1hdmFsaWRhdG9yLm5ldAoJaGVhZGVyKCdDb250ZW50LVR5cGU6YXBwbGljYXRpb24vanNvbjsgY2hh'));
	@fwrite($fp, base64_decode('cnNldD1VVEYtOCcpOwoJZWNobyBqc29uX2VuY29kZSgkYXJ5KTsKfQoKaWYgKCRmb3JtYXQgPT0gJ3htbCcpIHsKCSR4bWwgPSAnPHdob2lzPjxzZWN0aW9uPic7Cglmb3JlYWNoICgkb3V0IGFzICRsaW5lKSB7CgkJaWYgKCRsaW5lID09ICcnKSB7CgkJCSR4bWwg'));
	@fwrite($fp, base64_decode('Lj0gJzwvc2VjdGlvbj48c2VjdGlvbj4nOwoJCX0gZWxzZSB7CgkJCWxpc3QoJGtleSwkdmFsKSA9IGV4cGxvZGUoJzonLCAkbGluZSwgMik7CgkJCSR2YWwgPSB0cmltKCR2YWwpOwoJCQlpZiAoIWVtcHR5KCR2YWwpKSB7CgkJCQkkeG1sIC49ICI8JGtleT4iLmh0'));
	@fwrite($fp, base64_decode('bWxzcGVjaWFsY2hhcnMoJHZhbCkuIjwvJGtleT4iOwoJCQl9CgkJfQoJfQoJJHhtbCAuPSAnPC9zZWN0aW9uPjwvd2hvaXM+JzsKCgkkeG1sID0gcHJlZ19yZXBsYWNlKCdAPHNlY3Rpb24+PCguKyk+KC4rKTwvc2VjdGlvbj5AaXNtVScsICc8XFwxU2VjdGlvbj48'));
	@fwrite($fp, base64_decode('XFwxPlxcMjwvXFwxU2VjdGlvbj4nLCAkeG1sKTsKCglpZiAoT0lEcGx1czo6Z2V0UGtpU3RhdHVzKCkpIHsKCQkkY29udCA9ICR4bWw7CgkJJHNpZ25hdHVyZSA9ICcnOwoJCWlmIChAb3BlbnNzbF9zaWduKCRjb250LCAkc2lnbmF0dXJlLCBPSURwbHVzOjpjb25m'));
	@fwrite($fp, base64_decode('aWcoKS0+Z2V0VmFsdWUoJ29pZHBsdXNfcHJpdmF0ZV9rZXknKSkpIHsKCQkJJHNpZ25hdHVyZSA9IGJhc2U2NF9lbmNvZGUoJHNpZ25hdHVyZSk7CgkJCSR4bWwgLj0gIjxzaWduYXR1cmU+PGNvbnRlbnQ+Ii5odG1sc3BlY2lhbGNoYXJzKCRjb250KS4iPC9jb250'));
	@fwrite($fp, base64_decode('ZW50PjxzaWduYXR1cmU+Ii5odG1sc3BlY2lhbGNoYXJzKCRzaWduYXR1cmUpLiI8L3NpZ25hdHVyZT48L3NpZ25hdHVyZT4iOwoJCX0KCX0KCgkvLyBHb29kIFhTRCB2YWxpZGF0b3IgaGVyZTogaHR0cHM6Ly93d3cubGlxdWlkLXRlY2hub2xvZ2llcy5jb20vb25s'));
	@fwrite($fp, base64_decode('aW5lLXhzZC12YWxpZGF0b3IKCWhlYWRlcignQ29udGVudC1UeXBlOmFwcGxpY2F0aW9uL3htbDsgY2hhcnNldD1VVEYtOCcpOwoJZWNobyAnPD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyIgPz4nOwoJZWNobyAnPHJv'));
	@fwrite($fp, base64_decode('b3QgeG1sbnM9InVybjpvaWQ6MS4zLjYuMS40LjEuMzc0NzYuMi41LjIuNS4xLjEiJzsKCWVjaG8gJyAgICAgIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiJzsKCS8vZWNobyAnICAgICAgeHNpOnNjaGVtYUxvY2F0'));
	@fwrite($fp, base64_decode('aW9uPSJ1cm46b2lkOjEuMy42LjEuNC4xLjM3NDc2LjIuNS4yLjUuMS4xIGh0dHBzOi8vb2lkcGx1cy52aWF0aGlua3NvZnQuY29tL29pZHBsdXMvcGx1Z2lucy9wdWJsaWNQYWdlcy8xMDBfd2hvaXMvd2hvaXMveG1sX3NjaGVtYS54c2QiPic7CgllY2hvICcgICAg'));
	@fwrite($fp, base64_decode('ICB4c2k6c2NoZW1hTG9jYXRpb249InVybjpvaWQ6MS4zLjYuMS40LjEuMzc0NzYuMi41LjIuNS4xLjEgJy5PSURwbHVzOjp3ZWJwYXRoKCkuJ3BsdWdpbnMvcHVibGljUGFnZXMvMTAwX3dob2lzL3dob2lzL3htbF9zY2hlbWEueHNkIj4nOwoJZWNobyAkeG1sOwoJ'));
	@fwrite($fp, base64_decode('ZWNobyAnPC9yb290Pic7Cn0KCiMgLS0tCgpmdW5jdGlvbiBzaG93X2FzbjFfYXBwZW5kaXgoJGlkKSB7CglpZiAoc3Vic3RyKCRpZCwwLDQpID09PSAnb2lkOicpIHsKCQkkYXBwZW5kaXhfYXNuMWlkcyA9IGFycmF5KCk7CgkJJHJlczMgPSBPSURwbHVzOjpkYigp'));
	@fwrite($fp, base64_decode('LT5xdWVyeSgic2VsZWN0ICogZnJvbSAjIyNhc24xaWQgd2hlcmUgb2lkID0gPyIsIGFycmF5KCRpZCkpOwoJCXdoaWxlICgkcm93MyA9ICRyZXMzLT5mZXRjaF9vYmplY3QoKSkgewoJCQkkYXBwZW5kaXhfYXNuMWlkc1tdID0gJHJvdzMtPm5hbWU7CgkJfQoKCQkk'));
	@fwrite($fp, base64_decode('YXBwZW5kaXggPSBpbXBsb2RlKCcsICcsICRhcHBlbmRpeF9hc24xaWRzKTsKCQlpZiAoIWVtcHR5KCRhcHBlbmRpeCkpICRhcHBlbmRpeCA9ICIgKCRhcHBlbmRpeCkiOwoJfSBlbHNlIHsKCQkkYXBwZW5kaXggPSAnJzsKCX0KCXJldHVybiAkYXBwZW5kaXg7Cn0K'));
	@fwrite($fp, base64_decode('CmZ1bmN0aW9uIGlzX3Jvb3QoJGlkKSB7CglyZXR1cm4gZW1wdHkoZXhwbG9kZSgnOicsJGlkLDIpWzFdKTsKfQoKZnVuY3Rpb24gYXV0aFRva2VuQWNjZXB0ZWQoJGNvbnRlbnQsICRhdXRoVG9rZW5zKSB7Cglmb3JlYWNoICgkYXV0aFRva2VucyBhcyAkdG9rZW4p'));
	@fwrite($fp, base64_decode('IHsKCQlpZiAoT0lEcGx1c1BhZ2VQdWJsaWNXaG9pczo6Z2VuV2hvaXNBdXRoVG9rZW4oJGNvbnRlbnQpID09ICR0b2tlbikgcmV0dXJuIHRydWU7Cgl9CglyZXR1cm4gZmFsc2U7Cn0KCmZ1bmN0aW9uIGFsbG93T2JqZWN0Vmlldygkb2JqLCAkYXV0aFRva2Vucykg'));
	@fwrite($fp, base64_decode('ewoJLy8gTWFzdGVyIGF1dGggdG9rZW4KCSRhdXRoVG9rZW4gPSB0cmltKE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgnd2hvaXNfYXV0aF90b2tlbicpKTsKCWlmIChlbXB0eSgkYXV0aFRva2VuKSkgJGF1dGhUb2tlbiA9IGZhbHNlOwoJaWYgKCRhdXRoVG9r'));
	@fwrite($fp, base64_decode('ZW4gJiYgaW5fYXJyYXkoJGF1dGhUb2tlbiwgJGF1dGhUb2tlbnMpKSByZXR1cm4gdHJ1ZTsKCgkvLyBQZXItT0lEIGF1dGggdG9rZW5zCgkkY3VyaWQgPSAkb2JqLT5ub2RlSWQoKTsKCXdoaWxlICgoJHJlcyA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3Qg'));
	@fwrite($fp, base64_decode('cGFyZW50LCBjb25maWRlbnRpYWwgZnJvbSAjIyNvYmplY3RzIHdoZXJlIGlkID0gPyIsIGFycmF5KCRjdXJpZCkpKS0+bnVtX3Jvd3MoKSA+IDApIHsKCQkkcm93ID0gJHJlcy0+ZmV0Y2hfYXJyYXkoKTsKCQkvLyBFeGFtcGxlOiBZb3UgaGF2ZSBhbiBhdXRoIFRv'));
	@fwrite($fp, base64_decode('a2VuIGZvciAyLjk5OS4xLjIuMwoJCS8vIFRoaXMgYWxsb3dzIHlvdSB0byB2aWV3IDIuOTk5LjEuMi4zIGFuZCBhbGwgb2YgaXRzIGNoaWxkcmVuLAoJCS8vIGFzIGxvbmcgYXMgdGhleSBhcmUgbm90IGNvbmZpZGVudGlhbCAodGhlbiB5b3UgbmVlZCB0aGVpciBh'));
	@fwrite($fp, base64_decode('dXRoIHRva2VuKS4KCQkvLyAyLCAyLjk5OSwgMi45OTkuMSBhbmQgMi45OTkuMS4yIGFyZSB2aXNpYmxlLAoJCS8vIChiZWNhdXNlIHRoZWlyIGV4aXN0ZW5jZSBpcyBub3cgb2J2aW91cykuCgkJaWYgKCRyb3dbJ2NvbmZpZGVudGlhbCddICYmICFhdXRoVG9rZW5B'));
	@fwrite($fp, base64_decode('Y2NlcHRlZCgkY3VyaWQsICRhdXRoVG9rZW5zKSkgcmV0dXJuIGZhbHNlOwoJCSRjdXJpZCA9ICRyb3dbJ3BhcmVudCddOwoJfQoKCS8vIEFsbG93CglyZXR1cm4gdHJ1ZTsKfQoKZnVuY3Rpb24gYWxsb3dSQVZpZXcoJHJvdywgJGF1dGhUb2tlbnMpIHsKCS8vIE1h'));
	@fwrite($fp, base64_decode('c3RlciBhdXRoIHRva2VuCgkkYXV0aFRva2VuID0gdHJpbShPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ3dob2lzX2F1dGhfdG9rZW4nKSk7CglpZiAoZW1wdHkoJGF1dGhUb2tlbikpICRhdXRoVG9rZW4gPSBmYWxzZTsKCWlmICgkYXV0aFRva2VuICYmIGlu'));
	@fwrite($fp, base64_decode('X2FycmF5KCRhdXRoVG9rZW4sICRhdXRoVG9rZW5zKSkgcmV0dXJuIHRydWU7CgoJLy8gUGVyLVJBIGF1dGggdG9rZW5zCglpZiAoJHJvdy0+cHJpdmFjeSAmJiAhYXV0aFRva2VuQWNjZXB0ZWQoJ3JhOicuJHJvdy0+cmFfbmFtZSwgJGF1dGhUb2tlbnMpKSByZXR1'));
	@fwrite($fp, base64_decode('cm4gZmFsc2U7CgoJLy8gQWxsb3cKCXJldHVybiB0cnVlOwp9Cg=='));
	@fclose($fp);
}
if (!is_file('plugins/publicPages/100_whois/whois/webwhois.php')) {
	warn('File has vanished! Will re-create it: plugins/publicPages/100_whois/whois/webwhois.php');
	writefile_1();
	if (!is_file('plugins/publicPages/100_whois/whois/webwhois.php')) {
		warn('File cannot be created (not existing): plugins/publicPages/100_whois/whois/webwhois.php');
	} else if (sha1_file('plugins/publicPages/100_whois/whois/webwhois.php') != '7277ae25ca153d4245ee8f1215512e2587be6e1c') {
		warn('File cannot be created (checksum mismatch): plugins/publicPages/100_whois/whois/webwhois.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/publicPages/100_whois/whois/webwhois.php', 0644)) {
		warn('Could not change file permissions of plugins/publicPages/100_whois/whois/webwhois.php');
	}
} else {
	if (@sha1_file('plugins/publicPages/100_whois/whois/webwhois.php') !== '7277ae25ca153d4245ee8f1215512e2587be6e1c') {
		if (@sha1_file('plugins/publicPages/100_whois/whois/webwhois.php') !== '48ef5010c21a1a4e2bbd151baf03bb14ed05d491') {
			warn('File was modified. Will overwrite the changes now: plugins/publicPages/100_whois/whois/webwhois.php');
			$tmp = pathinfo('plugins/publicPages/100_whois/whois/webwhois.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/publicPages/100_whois/whois/webwhois.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/publicPages/100_whois/whois/webwhois.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('plugins/publicPages/100_whois/whois/webwhois.php') !== '7277ae25ca153d4245ee8f1215512e2587be6e1c') {
			warn('File cannot be written (checksum mismatch): plugins/publicPages/100_whois/whois/webwhois.php');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 551\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 551') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

