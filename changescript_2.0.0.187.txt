<?php /* <ViaThinkSoftSignature>
h0yYzd0CAXjca/9Vjyrg07denE6A+8MS/O4x7Ad5L0cRTDGHxaAMfj9YxuA19JDjl
fpJT16LtnYP6S140A6NLa8AYxZnodFZg4C7AzYzUFi92wReThc4g5E66L2Fn3M8hV
8HoGnQmb/Vsb4U/XE3YXaUxYU7lojxb7ef40N94wxynEK5V7cnfLM22Fd4P6x6Xpw
+S8j3YOefAECH0F+LxggPfr785I7e8TBIAeTgDsMSpx/xXbE3rBVgArzJ6v0dGuAR
xwWsSeXPUE/fQa+KIqjsi6uy6hSlIUI3gzymVjoSHYVPAOD0CQm9bOr7z90aw3Xhf
ZkKaiM1r/A5JalCvKZxV+zzv1e4rv4fJiEKBWREScunmI0SVroqpYDNtUBsSbExi3
8fl5hTZLeDO2RBS1+Cy6Ud0/2xkMesK5R/NR5jhZjid+BpiKP4t6xP/Evginfq5ex
LQ9QUNhqOtX1R3J/35crAzOZgb5Wz5OO2xb3kdaGPCPtR6ZlU2k9/iYfkrXyjJtnk
nH2zEw6EXg1uq1A3RPDcYylS16xZW9wwlb0hs6UbSoeUsEYmlEVn0rp3VxpiXCW+L
D/CeuyD3P8souNfQiuPn0DsZq/HXpxNdfZy1bSVOL7P/mdK+N2uIgcje6IIXkXa9s
rRjgJ7rxbrCHHU3VhdReKYAvYTXOqkDPz4sJxVEuBunHQH/V41SKnJsyeizuzjO7t
I3wRsgoxC6a5bG2C+n2UrytQ+HmQ2jabhRyHhhZuRKOj3jmXj4G9nE2R9UpYKbpZq
07H4qxRYy0aM6dp8BlbFzlz7179Tc2uAI/M4S0gqlqQDejOI1V2f0xiez++WI4jI1
sj9WbMLtSb/3DG/5K3RVoWhRKOiV2LNVtaMDxhPdgMorNVcexEQeZQduJM/U0bXsT
1DouNks0m74Qh9TWo0Gwym6k+IwxCTB/RHoDXJJ6DI6U6mqbGURbsrmM5pWaoIWBn
6GvA79k4VjcvT1AqFv5MLvH+XivnvnEVhADqpAn98fie2YeaQIfq0W85m1cGf84t6
peceCeKm34NM+EYynOYN+DO4SxfhNc3EZh/RIFeuA7uVRhcDryo3Y45zx7zexXWmH
3ecP0+B6TaCgaldy+hCR4TGSczklRg6hptOy17ceFs9lz4Gyttpo8U9eyCaj1GRlb
0Qt6Z+MQ1mWnm8jYb06NOS8eQQvuUtxs647NkwtRRcHZRS2RYOBifqzWtL9Cx2pNR
LYviF02V+Ek/QCsH8GnVwBTNAqdXmxZi6VflceTg9UDwXuWiuJlFj9plSOLzgYG7Q
k26WDy30GBPaIKiGjQkcacCe0unGAiw2L9CE3J/ADxutg29oXI2lXLjsriKQynt9K
g==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 186') {
	err('This update can only be applied to OIDplus version 2.0.0.186!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: ajax.php
function writefile_1() {
	@$fp = fopen('ajax.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCnJlcXVpcmVfb25jZSBfX0RJUl9fIC4gJy9pbmNsdWRlcy9vaWRwbHVzLmluYy5waHAnOwoKT0lEcGx1czo6aW5pdChmYWxzZSk7CgpoZWFkZXIoJ0NvbnRlbnQtVHlwZTphcHBsaWNhdGlvbi9qc29u'));
	@fwrite($fp, base64_decode('OyBjaGFyc2V0PXV0Zi04Jyk7Cgp0cnkgewoJT0lEcGx1czo6ZGIoKS0+dHJhbnNhY3Rpb25fYmVnaW4oKTsKCSRoYW5kbGVkID0gZmFsc2U7CgoJLy8gQWN0aW9uOiAgICAgKGFjdGlvbnMgZGVmaW5lZCBieSBwbHVnaW5zKQoJLy8gTWV0aG9kOiAgICAgR0VUIC8g'));
	@fwrite($fp, base64_decode('UE9TVAoJLy8gUGFyYW1ldGVyczogLi4uCgkvLyBPdXRwdXRzOiAgICAuLi4KCWZvcmVhY2ggKE9JRHBsdXM6OmdldFBhZ2VQbHVnaW5zKCcqJykgYXMgJHBsdWdpbikgewoJCSRwbHVnaW4tPmFjdGlvbigkaGFuZGxlZCk7Cgl9CgoJLy8gQWN0aW9uOiAgICAgZ2V0'));
	@fwrite($fp, base64_decode('X2Rlc2NyaXB0aW9uCgkvLyBNZXRob2Q6ICAgICBHRVQgLyBQT1NUCgkvLyBQYXJhbWV0ZXJzOiBpZAoJLy8gT3V0cHV0czogICAgSlNPTgoJaWYgKGlzc2V0KCRfUkVRVUVTVFsiYWN0aW9uIl0pICYmICgkX1JFUVVFU1RbJ2FjdGlvbiddID09ICdnZXRfZGVzY3Jp'));
	@fwrite($fp, base64_decode('cHRpb24nKSkgewoJCSRoYW5kbGVkID0gdHJ1ZTsKCQlpZiAoIWlzc2V0KCRfUkVRVUVTVFsnaWQnXSkpIHRocm93IG5ldyBFeGNlcHRpb24oIkludmFsaWQgYXJncyIpOwoJCXRyeSB7CgkJCSRvdXQgPSBPSURwbHVzOjpndWkoKTo6Z2VuZXJhdGVDb250ZW50UGFn'));
	@fwrite($fp, base64_decode('ZSgkX1JFUVVFU1RbJ2lkJ10pOwoJCX0gY2F0Y2goRXhjZXB0aW9uICRlKSB7CgkJCSRvdXQgPSBhcnJheSgpOwoJCQkkb3V0Wyd0aXRsZSddID0gJ0Vycm9yJzsKCQkJJG91dFsnaWNvbiddID0gJ2ltZy9lcnJvcl9iaWcucG5nJzsKCQkJJG91dFsndGV4dCddID0g'));
	@fwrite($fp, base64_decode('JGUtPmdldE1lc3NhZ2UoKTsKCQl9CgkJZWNobyBqc29uX2VuY29kZSgkb3V0KTsKCX0KCgkvLyA9PT0ganNUcmVlID09PQoKCS8vIEFjdGlvbjogICAgIHRyZWVfc2VhcmNoCgkvLyBNZXRob2Q6ICAgICBHRVQgLyBQT1NUCgkvLyBQYXJhbWV0ZXJzOiBzZWFyY2gK'));
	@fwrite($fp, base64_decode('CS8vIE91dHB1dHM6ICAgIEpTT04KCWlmIChpc3NldCgkX1JFUVVFU1RbImFjdGlvbiJdKSAmJiAoJF9SRVFVRVNUWydhY3Rpb24nXSA9PSAndHJlZV9zZWFyY2gnKSkgewoJCSRoYW5kbGVkID0gdHJ1ZTsKCQlpZiAoIWlzc2V0KCRfUkVRVUVTVFsnc2VhcmNoJ10p'));
	@fwrite($fp, base64_decode('KSB0aHJvdyBuZXcgRXhjZXB0aW9uKCJJbnZhbGlkIGFyZ3MiKTsKCgkJJGZvdW5kID0gZmFsc2U7CgkJZm9yZWFjaCAoT0lEcGx1czo6Z2V0UGFnZVBsdWdpbnMoJyonKSBhcyAkcGx1Z2luKSB7CgkJCSRyZXMgPSAkcGx1Z2luLT50cmVlX3NlYXJjaCgkX1JFUVVF'));
	@fwrite($fp, base64_decode('U1RbJ3NlYXJjaCddKTsKCQkJaWYgKCRyZXMpIHsKCQkJCWVjaG8ganNvbl9lbmNvZGUoJHJlcyk7CgkJCQkkZm91bmQgPSB0cnVlOwoJCQkJYnJlYWs7CgkJCX0KCQl9CgoJCWlmICghJGZvdW5kKSB7CgkJCWVjaG8ganNvbl9lbmNvZGUoYXJyYXkoKSk7CgkJfQoJ'));
	@fwrite($fp, base64_decode('fQoKCS8vIEFjdGlvbjogICAgIHRyZWVfbG9hZAoJLy8gTWV0aG9kOiAgICAgR0VUIC8gUE9TVAoJLy8gUGFyYW1ldGVyczogaWQ7IGdvdG8gKG9wdGlvbmFsKQoJLy8gT3V0cHV0czogICAgSlNPTgoJaWYgKGlzc2V0KCRfUkVRVUVTVFsiYWN0aW9uIl0pICYmICgk'));
	@fwrite($fp, base64_decode('X1JFUVVFU1RbJ2FjdGlvbiddID09ICd0cmVlX2xvYWQnKSkgewoJCSRoYW5kbGVkID0gdHJ1ZTsKCQlpZiAoIWlzc2V0KCRfUkVRVUVTVFsnaWQnXSkpIHRocm93IG5ldyBFeGNlcHRpb24oIkludmFsaWQgYXJncyIpOwoJCSRqc29uID0gT0lEcGx1c1RyZWU6Ompz'));
	@fwrite($fp, base64_decode('b25fdHJlZSgkX1JFUVVFU1RbJ2lkJ10sIGlzc2V0KCRfUkVRVUVTVFsnZ290byddKSA/ICRfUkVRVUVTVFsnZ290byddIDogJycpOwoJCWVjaG8gJGpzb247Cgl9CgoJLy8gPT09IEFkbWluIC8gUkEgYWN0aW9ucyA9PT0KCgkvLyBBY3Rpb246ICAgICBkZWxldGVf'));
	@fwrite($fp, base64_decode('cmEKCS8vIE1ldGhvZDogICAgIFBPU1QKCS8vIFBhcmFtZXRlcnM6IGVtYWlsCgkvLyBPdXRwdXRzOiAgICBUZXh0CglpZiAoaXNzZXQoJF9QT1NUWyJhY3Rpb24iXSkgJiYgKCRfUE9TVFsiYWN0aW9uIl0gPT0gImRlbGV0ZV9yYSIpKSB7CgkJJGhhbmRsZWQgPSB0'));
	@fwrite($fp, base64_decode('cnVlOwoKCQkkZW1haWwgPSAkX1BPU1RbJ2VtYWlsJ107CgoJCSRyYV9sb2dnZWRfaW4gPSBPSURwbHVzOjphdXRoVXRpbHMoKS0+aXNSYUxvZ2dlZEluKCRlbWFpbCk7CgoJCWlmICghT0lEcGx1czo6YXV0aFV0aWxzKCktPmlzQWRtaW5Mb2dnZWRJbigpICYmICEk'));
	@fwrite($fp, base64_decode('cmFfbG9nZ2VkX2luKSB7CgkJCXRocm93IG5ldyBFeGNlcHRpb24oJ0F1dGhlbnRpZmljYXRpb24gZXJyb3IuIFBsZWFzZSBsb2cgaW4uJyk7CgkJfQoKCQlpZiAoJHJhX2xvZ2dlZF9pbikgT0lEcGx1czo6YXV0aFV0aWxzKCktPnJhTG9nb3V0KCRlbWFpbCk7CgoJ'));
	@fwrite($fp, base64_decode('CSRyYSA9IG5ldyBPSURwbHVzUkEoJGVtYWlsKTsKCQkkcmEtPmRlbGV0ZSgpOwoKCQlPSURwbHVzOjpsb2dnZXIoKS0+bG9nKCJSQSgkZW1haWwpPy9BPyIsICJSQSAnJGVtYWlsJyBkZWxldGVkIik7CgoJCWVjaG8ganNvbl9lbmNvZGUoYXJyYXkoInN0YXR1cyIg'));
	@fwrite($fp, base64_decode('PT4gMCkpOwoJfQoKCS8vID09PSBPSUQgQ1JVRCA9PT0KCgkvLyBBY3Rpb246ICAgICBEZWxldGUKCS8vIE1ldGhvZDogICAgIFBPU1QKCS8vIFBhcmFtZXRlcnM6IGlkCgkvLyBPdXRwdXRzOiAgICBUZXh0CglpZiAoaXNzZXQoJF9QT1NUWyJhY3Rpb24iXSkgJiYg'));
	@fwrite($fp, base64_decode('KCRfUE9TVFsiYWN0aW9uIl0gPT0gIkRlbGV0ZSIpKSB7CgkJJGhhbmRsZWQgPSB0cnVlOwoKCQkkaWQgPSAkX1BPU1RbJ2lkJ107CgkJJG9iaiA9IE9JRHBsdXNPYmplY3Q6OnBhcnNlKCRpZCk7CgkJaWYgKCRvYmogPT09IG51bGwpIHRocm93IG5ldyBFeGNlcHRp'));
	@fwrite($fp, base64_decode('b24oIkRFTEVURSBhY3Rpb24gZmFpbGVkIGJlY2F1c2Ugb2JqZWN0ICckaWQnIGNhbm5vdCBiZSBwYXJzZWQhIik7CgoJCS8vIENoZWNrIGlmIHBlcm1pdHRlZAoJCWlmICghJG9iai0+dXNlckhhc1BhcmVudGFsV3JpdGVSaWdodHMoKSkgdGhyb3cgbmV3IEV4Y2Vw'));
	@fwrite($fp, base64_decode('dGlvbignQXV0aGVudGlmaWNhdGlvbiBlcnJvci4gUGxlYXNlIGxvZyBpbiBhcyB0aGUgc3VwZXJpb3IgUkEgdG8gZGVsZXRlIHRoaXMgT0lELicpOwoKCQlPSURwbHVzOjpsb2dnZXIoKS0+bG9nKCJPSUQoJGlkKStTVVBPSURSQSgkaWQpPy9BPyIsICJPYmplY3Qg'));
	@fwrite($fp, base64_decode('JyRpZCcgKHJlY3Vyc2l2ZWx5KSBkZWxldGVkIik7CgkJT0lEcGx1czo6bG9nZ2VyKCktPmxvZygiT0lEUkEoJGlkKSEiLCAiTG9zdCBvd25lcnNoaXAgb2Ygb2JqZWN0ICckaWQnIGJlY2F1c2UgaXQgd2FzIGRlbGV0ZWQiKTsKCgkJLy8gRGVsZXRlIG9iamVjdAoJ'));
	@fwrite($fp, base64_decode('CU9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJkZWxldGUgZnJvbSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4ib2JqZWN0cyB3aGVyZSBpZCA9ID8iLCBhcnJheSgkaWQpKTsKCgkJLy8gRGVsZXRlIG9ycGhhbiBzdHVmZgoJCWZvcmVhY2ggKE9JRHBsdXM6OmdldFJl'));
	@fwrite($fp, base64_decode('Z2lzdGVyZWRPYmplY3RUeXBlcygpIGFzICRvdCkgewoJCQlkbyB7CgkJCQkkcmVzID0gT0lEcGx1czo6ZGIoKS0+cXVlcnkoInNlbGVjdCBpZCBmcm9tICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJvYmplY3RzIHdoZXJlIHBhcmVudCA8PiA/IGFuZCBwYXJl'));
	@fwrite($fp, base64_decode('bnQgbGlrZSA/IGFuZCBwYXJlbnQgbm90IGluIChzZWxlY3QgaWQgZnJvbSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4ib2JqZWN0cyB3aGVyZSBpZCBsaWtlID8pIiwgYXJyYXkoJG90Ojpyb290KCksICRvdDo6cm9vdCgpLiclJywgJG90Ojpyb290KCkuJyUn'));
	@fwrite($fp, base64_decode('KSk7CgoJCQkJd2hpbGUgKCRyb3cgPSBPSURwbHVzOjpkYigpLT5mZXRjaF9hcnJheSgkcmVzKSkgewoJCQkJCSRpZF90b19kZWxldGUgPSAkcm93WydpZCddOwoJCQkJCU9JRHBsdXM6OmxvZ2dlcigpLT5sb2coIk9JRFJBKCRpZF90b19kZWxldGUpISIsICJMb3N0'));
	@fwrite($fp, base64_decode('IG93bmVyc2hpcCBvZiBvYmplY3QgJyRpZF90b19kZWxldGUnIGJlY2F1c2Ugb25lIG9mIHRoZSBzdXBlcmlvciBvYmplY3RzICgnJGlkJykgd2FzIHJlY3Vyc2l2ZWx5IGRlbGV0ZWQiKTsKCQkJCQlpZiAoIU9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJkZWxldGUgZnJv'));
	@fwrite($fp, base64_decode('bSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4ib2JqZWN0cyB3aGVyZSBpZCA9ID8iLCBhcnJheSgkaWRfdG9fZGVsZXRlKSkpIHsKCQkJCQkJdGhyb3cgbmV3IEV4Y2VwdGlvbihPSURwbHVzOjpkYigpLT5lcnJvcigpKTsKCQkJCQl9CgkJCQl9CgkJCX0gd2hp'));
	@fwrite($fp, base64_decode('bGUgKE9JRHBsdXM6OmRiKCktPm51bV9yb3dzKCRyZXMpID4gMCk7CgkJfQoJCU9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJkZWxldGUgZnJvbSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4iYXNuMWlkIHdoZXJlIHdlbGxfa25vd24gPD4gMSBhbmQgb2lkIG5vdCBp'));
	@fwrite($fp, base64_decode('biAoc2VsZWN0IGlkIGZyb20gIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguIm9iamVjdHMgd2hlcmUgaWQgbGlrZSAnb2lkOiUnKTsiKTsKCQlPSURwbHVzOjpkYigpLT5xdWVyeSgiZGVsZXRlIGZyb20gIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguImlyaSAg'));
	@fwrite($fp, base64_decode('ICB3aGVyZSB3ZWxsX2tub3duIDw+IDEgYW5kIG9pZCBub3QgaW4gKHNlbGVjdCBpZCBmcm9tICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJvYmplY3RzIHdoZXJlIGlkIGxpa2UgJ29pZDolJyk7Iik7CgoJCWVjaG8ganNvbl9lbmNvZGUoYXJyYXkoInN0YXR1'));
	@fwrite($fp, base64_decode('cyIgPT4gMCkpOwoJfQoKCS8vIEFjdGlvbjogICAgIFVwZGF0ZQoJLy8gTWV0aG9kOiAgICAgUE9TVAoJLy8gUGFyYW1ldGVyczogaWQsIHJhX2VtYWlsLCBpcmlzLCBhc24xaWRzLCBjb25maWRlbnRpYWwKCS8vIE91dHB1dHM6ICAgIFRleHQKCWlmIChpc3NldCgk'));
	@fwrite($fp, base64_decode('X1BPU1RbImFjdGlvbiJdKSAmJiAoJF9QT1NUWyJhY3Rpb24iXSA9PSAiVXBkYXRlIikpIHsKCQkkaGFuZGxlZCA9IHRydWU7CgoJCSRpZCA9ICRfUE9TVFsnaWQnXTsKCQkkb2JqID0gT0lEcGx1c09iamVjdDo6cGFyc2UoJGlkKTsKCQlpZiAoJG9iaiA9PT0gbnVs'));
	@fwrite($fp, base64_decode('bCkgdGhyb3cgbmV3IEV4Y2VwdGlvbigiVVBEQVRFIGFjdGlvbiBmYWlsZWQgYmVjYXVzZSBvYmplY3QgJyRpZCcgY2Fubm90IGJlIHBhcnNlZCEiKTsKCgkJLy8gQ2hlY2sgaWYgcGVybWl0dGVkCgkJaWYgKCEkb2JqLT51c2VySGFzUGFyZW50YWxXcml0ZVJpZ2h0'));
	@fwrite($fp, base64_decode('cygpKSB0aHJvdyBuZXcgRXhjZXB0aW9uKCdBdXRoZW50aWZpY2F0aW9uIGVycm9yLiBQbGVhc2UgbG9nIGluIGFzIHRoZSBzdXBlcmlvciBSQSB0byB1cGRhdGUgdGhpcyBPSUQuJyk7CgoJCS8vIFZhbGlkYXRlIFJBIGVtYWlsIGFkZHJlc3MKCQkkbmV3X3JhID0g'));
	@fwrite($fp, base64_decode('JF9QT1NUWydyYV9lbWFpbCddOwoJCWlmICghZW1wdHkoJG5ld19yYSkgJiYgIW9pZHBsdXNfdmFsaWRfZW1haWwoJG5ld19yYSkpIHsKCQkJdGhyb3cgbmV3IEV4Y2VwdGlvbignSW52YWxpZCBSQSBlbWFpbCBhZGRyZXNzJyk7CgkJfQoKCQkvLyBGaXJzdCwgZG8g'));
	@fwrite($fp, base64_decode('YSBzaW11bGF0aW9uIGZvciBBU04uMSBJRHMgYW5kIElSSXMgdG8gY2hlY2sgaWYgdGhlcmUgYXJlIGFueSBwcm9ibGVtcyAodGhlbiBhbiBFeGNlcHRpb24gd2lsbCBiZSB0aHJvd24pCgkJaWYgKCRvYmo6Om5zKCkgPT0gJ29pZCcpIHsKCQkJJG9pZCA9ICRvYmo7'));
	@fwrite($fp, base64_decode('CgoJCQkkaWRzID0gKCRfUE9TVFsnaXJpcyddID09ICcnKSA/IGFycmF5KCkgOiBleHBsb2RlKCcsJywkX1BPU1RbJ2lyaXMnXSk7CgkJCSRpZHMgPSBhcnJheV9tYXAoJ3RyaW0nLCRpZHMpOwoJCQkkb2lkLT5yZXBsYWNlSXJpcygkaWRzLCB0cnVlKTsKCgkJCSRp'));
	@fwrite($fp, base64_decode('ZHMgPSAoJF9QT1NUWydhc24xaWRzJ10gPT0gJycpID8gYXJyYXkoKSA6IGV4cGxvZGUoJywnLCRfUE9TVFsnYXNuMWlkcyddKTsKCQkJJGlkcyA9IGFycmF5X21hcCgndHJpbScsJGlkcyk7CgkJCSRvaWQtPnJlcGxhY2VBc24xSWRzKCRpZHMsIHRydWUpOwoJCX0K'));
	@fwrite($fp, base64_decode('CgkJLy8gQ2hhbmdlIFJBIHJlY3Vyc2l2ZWx5CgkJJHJlcyA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgcmFfZW1haWwgZnJvbSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4ib2JqZWN0cyB3aGVyZSBpZCA9ID8iLCBhcnJheSgkaWQpKTsKCQkkcm93'));
	@fwrite($fp, base64_decode('ID0gT0lEcGx1czo6ZGIoKS0+ZmV0Y2hfYXJyYXkoJHJlcyk7CgkJJGN1cnJlbnRfcmEgPSAkcm93WydyYV9lbWFpbCddOwoJCWlmICgkbmV3X3JhICE9ICRjdXJyZW50X3JhKSB7CgkJCU9JRHBsdXM6OmxvZ2dlcigpLT5sb2coIk9JRCgkaWQpK1NVUE9JRFJBKCRp'));
	@fwrite($fp, base64_decode('ZCk/L0E/IiwgIlJBIG9mIG9iamVjdCAnJGlkJyBjaGFuZ2VkIGZyb20gJyRjdXJyZW50X3JhJyB0byAnJG5ld19yYSciKTsKCQkJT0lEcGx1czo6bG9nZ2VyKCktPmxvZygiUkEoJGN1cnJlbnRfcmEpISIsICAgICAgICAgICAiTG9zdCBvd25lcnNoaXAgb2Ygb2Jq'));
	@fwrite($fp, base64_decode('ZWN0ICckaWQnIGR1ZSB0byBSQSB0cmFuc2ZlciBvZiBzdXBlcmlvciBSQSAvIGFkbWluLiIpOwoJCQlPSURwbHVzOjpsb2dnZXIoKS0+bG9nKCJSQSgkbmV3X3JhKSEiLCAgICAgICAgICAgICAgICJHYWluZWQgb3duZXJzaGlwIG9mIG9iamVjdCAnJGlkJyBkdWUg'));
	@fwrite($fp, base64_decode('dG8gUkEgdHJhbnNmZXIgb2Ygc3VwZXJpb3IgUkEgLyBhZG1pbi4iKTsKCQkJX3JhX2NoYW5nZV9yZWMoJGlkLCAkY3VycmVudF9yYSwgJG5ld19yYSk7IC8vIEluaGVyaXRlZCBSQXMgcmVrdXJzaXYgbWl05G5kZXJuCgkJfQoKCQlPSURwbHVzOjpsb2dnZXIoKS0+'));
	@fwrite($fp, base64_decode('bG9nKCJPSUQoJGlkKStTVVBPSURSQSgkaWQpPy9BPyIsICJJZGVudGlmaWVycy9Db25maWRlbnRpYWwgZmxhZyBvZiBvYmplY3QgJyRpZCcgdXBkYXRlZCIpOyAvLyBUT0RPOiBDaGVjayBpZiB0aGV5IHdlcmUgQUNUVUFMTFkgdXBkYXRlZCEKCgkJLy8gUmVwbGFj'));
	@fwrite($fp, base64_decode('ZSBBU04uMSBJRHMgdW5kIElSSXMKCQlpZiAoJG9iajo6bnMoKSA9PSAnb2lkJykgewoJCQkkb2lkID0gJG9iajsKCgkJCSRpZHMgPSAoJF9QT1NUWydpcmlzJ10gPT0gJycpID8gYXJyYXkoKSA6IGV4cGxvZGUoJywnLCRfUE9TVFsnaXJpcyddKTsKCQkJJGlkcyA9'));
	@fwrite($fp, base64_decode('IGFycmF5X21hcCgndHJpbScsJGlkcyk7CgkJCSRvaWQtPnJlcGxhY2VJcmlzKCRpZHMsIGZhbHNlKTsKCgkJCSRpZHMgPSAoJF9QT1NUWydhc24xaWRzJ10gPT0gJycpID8gYXJyYXkoKSA6IGV4cGxvZGUoJywnLCRfUE9TVFsnYXNuMWlkcyddKTsKCQkJJGlkcyA9'));
	@fwrite($fp, base64_decode('IGFycmF5X21hcCgndHJpbScsJGlkcyk7CgkJCSRvaWQtPnJlcGxhY2VBc24xSWRzKCRpZHMsIGZhbHNlKTsKCQl9CgoJCSRjb25maWRlbnRpYWwgPSAkX1BPU1RbJ2NvbmZpZGVudGlhbCddID09ICd0cnVlJzsKCQlpZiAoIU9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJV'));
	@fwrite($fp, base64_decode('UERBVEUgIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguIm9iamVjdHMgU0VUIGNvbmZpZGVudGlhbCA9ID8sIHVwZGF0ZWQgPSBub3coKSBXSEVSRSBpZCA9ID8iLCBhcnJheSgkY29uZmlkZW50aWFsID8gMSA6IDAsICRpZCkpKSB7CgkJCXRocm93IG5ldyBFeGNl'));
	@fwrite($fp, base64_decode('cHRpb24oJ0Vycm9yIGF0IHNldHRpbmcgY29uZmlkZW50aWFsIGZsYWc6JyAuIE9JRHBsdXM6OmRiKCktPmVycm9yKCkpOwoJCX0KCgkJJHN0YXR1cyA9IDA7CgoJCWlmICghZW1wdHkoJG5ld19yYSkpIHsKCQkJJHJlcyA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJz'));
	@fwrite($fp, base64_decode('ZWxlY3QgcmFfbmFtZSBmcm9tICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJyYSB3aGVyZSBlbWFpbCA9ID8iLCBhcnJheSgkbmV3X3JhKSk7CgkJCWlmIChPSURwbHVzOjpkYigpLT5udW1fcm93cygkcmVzKSA9PSAwKSAkc3RhdHVzID0gT0lEcGx1czo6Y29u'));
	@fwrite($fp, base64_decode('ZmlnKCktPmdldFZhbHVlKCdyYV9pbnZpdGF0aW9uX2VuYWJsZWQnKSA/IDEgOiAyOwoJCX0KCgkJZWNobyBqc29uX2VuY29kZShhcnJheSgic3RhdHVzIiA9PiAkc3RhdHVzKSk7Cgl9CgoJLy8gQWN0aW9uOiAgICAgVXBkYXRlMgoJLy8gTWV0aG9kOiAgICAgUE9T'));
	@fwrite($fp, base64_decode('VAoJLy8gUGFyYW1ldGVyczogaWQsIHRpdGxlLCBkZXNjcmlwdGlvbgoJLy8gT3V0cHV0czogICAgVGV4dAoJaWYgKGlzc2V0KCRfUE9TVFsiYWN0aW9uIl0pICYmICgkX1BPU1RbImFjdGlvbiJdID09ICJVcGRhdGUyIikpIHsKCQkkaGFuZGxlZCA9IHRydWU7CgoJ'));
	@fwrite($fp, base64_decode('CSRpZCA9ICRfUE9TVFsnaWQnXTsKCQkkb2JqID0gT0lEcGx1c09iamVjdDo6cGFyc2UoJGlkKTsKCQlpZiAoJG9iaiA9PT0gbnVsbCkgdGhyb3cgbmV3IEV4Y2VwdGlvbigiVVBEQVRFMiBhY3Rpb24gZmFpbGVkIGJlY2F1c2Ugb2JqZWN0ICckaWQnIGNhbm5vdCBi'));
	@fwrite($fp, base64_decode('ZSBwYXJzZWQhIik7CgoJCS8vIENoZWNrIGlmIGFsbG93ZWQKCQlpZiAoISRvYmotPnVzZXJIYXNXcml0ZVJpZ2h0cygpKSB0aHJvdyBuZXcgRXhjZXB0aW9uKCdBdXRoZW50aWZpY2F0aW9uIGVycm9yLiBQbGVhc2UgbG9nIGluIGFzIHRoZSBSQSB0byB1cGRhdGUg'));
	@fwrite($fp, base64_decode('dGhpcyBPSUQuJyk7CgoJCU9JRHBsdXM6OmxvZ2dlcigpLT5sb2coIk9JRCgkaWQpK09JRFJBKCRpZCk/L0E/IiwgIlRpdGxlL0Rlc2NyaXB0aW9uIG9mIG9iamVjdCAnJGlkJyB1cGRhdGVkIik7CgoJCWlmICghT0lEcGx1czo6ZGIoKS0+cXVlcnkoIlVQREFURSAi'));
	@fwrite($fp, base64_decode('Lk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4ib2JqZWN0cyBTRVQgdGl0bGUgPSA/LCBkZXNjcmlwdGlvbiA9ID8sIHVwZGF0ZWQgPSBub3coKSBXSEVSRSBpZCA9ID8iLCBhcnJheSgkX1BPU1RbJ3RpdGxlJ10sICRfUE9TVFsnZGVzY3JpcHRpb24nXSwgJGlkKSkp'));
	@fwrite($fp, base64_decode('IHsKCQkJdGhyb3cgbmV3IEV4Y2VwdGlvbihPSURwbHVzOjpkYigpLT5lcnJvcigpKTsKCQl9CgoJCWVjaG8ganNvbl9lbmNvZGUoYXJyYXkoInN0YXR1cyIgPT4gMCkpOwoJfQoKCS8vIEFjdGlvbjogICAgIEluc2VydAoJLy8gTWV0aG9kOiAgICAgUE9TVAoJLy8g'));
	@fwrite($fp, base64_decode('UGFyYW1ldGVyczogcGFyZW50LCBpZCwgcmFfZW1haWwsIGNvbmZpZGVudGlhbCwgaXJpcywgYXNuMWlkcwoJLy8gT3V0cHV0czogICAgVGV4dAoJaWYgKGlzc2V0KCRfUE9TVFsiYWN0aW9uIl0pICYmICgkX1BPU1RbImFjdGlvbiJdID09ICJJbnNlcnQiKSkgewoJ'));
	@fwrite($fp, base64_decode('CSRoYW5kbGVkID0gdHJ1ZTsKCgkJLy8gVmFsaWRhdGVkIGFyZTogSUQsIHJhIGVtYWlsLCBhc24xIGlkcywgaXJpIGlkcwoKCQkvLyBDaGVjayBpZiB5b3UgaGF2ZSB3cml0ZSByaWdodHMgb24gdGhlIHBhcmVudCAodG8gY3JlYXRlIGEgbmV3IG9iamVjdCkKCQkk'));
	@fwrite($fp, base64_decode('b2JqUGFyZW50ID0gT0lEcGx1c09iamVjdDo6cGFyc2UoJF9QT1NUWydwYXJlbnQnXSk7CgkJaWYgKCRvYmpQYXJlbnQgPT09IG51bGwpIHRocm93IG5ldyBFeGNlcHRpb24oIklOU0VSVCBhY3Rpb24gZmFpbGVkIGJlY2F1c2UgcGFyZW50IG9iamVjdCAnIi4kX1BP'));
	@fwrite($fp, base64_decode('U1RbJ3BhcmVudCddLiInIGNhbm5vdCBiZSBwYXJzZWQhIik7CgkJaWYgKCEkb2JqUGFyZW50LT51c2VySGFzV3JpdGVSaWdodHMoKSkgdGhyb3cgbmV3IEV4Y2VwdGlvbignQXV0aGVudGlmaWNhdGlvbiBlcnJvci4gUGxlYXNlIGxvZyBpbiBhcyB0aGUgY29ycmVj'));
	@fwrite($fp, base64_decode('dCBSQSB0byBpbnNlcnQgYW4gT0lEIGF0IHRoaXMgYXJjLicpOwoKCQkvLyBDaGVjayBpZiB0aGUgSUQgaXMgdmFsaWQKCQlpZiAoJF9QT1NUWydpZCddID09ICcnKSB0aHJvdyBuZXcgRXhjZXB0aW9uKCdJRCBtYXkgbm90IGJlIGVtcHR5Jyk7CgoJCS8vIEFic29s'));
	@fwrite($fp, base64_decode('dXRlbiBPSUQgbmFtZW4gYmVzdGltbWVuCgkJLy8gTm90ZTogQXQgYWRkU3RyaW5nKCkgYW5kIHBhcnNlKCksIHRoZSBzeW50YXggb2YgdGhlIElEIHdpbGwgYmUgY2hlY2tlZAoJCSRpZCA9ICRvYmpQYXJlbnQtPmFkZFN0cmluZygkX1BPU1RbJ2lkJ10pOwoKCQkv'));
	@fwrite($fp, base64_decode('LyBDaGVjaywgaWYgdGhlIE9JRCBleGlzdHMKCQkkdGVzdCA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgaWQgZnJvbSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4ib2JqZWN0cyB3aGVyZSBpZCA9ID8iLCBhcnJheSgkaWQpKTsKCQlpZiAoT0lEcGx1'));
	@fwrite($fp, base64_decode('czo6ZGIoKS0+bnVtX3Jvd3MoJHRlc3QpID49IDEpIHsKCQkJdGhyb3cgbmV3IEV4Y2VwdGlvbigiT2JqZWN0ICRpZCBhbHJlYWR5IGV4aXN0cyEiKTsKCQl9CgoJCSRvYmogPSBPSURwbHVzT2JqZWN0OjpwYXJzZSgkaWQpOwogICAgICAgICAgICAgICAgaWYgKCRv'));
	@fwrite($fp, base64_decode('YmogPT09IG51bGwpIHRocm93IG5ldyBFeGNlcHRpb24oIklOU0VSVCBhY3Rpb24gZmFpbGVkIGJlY2F1c2Ugb2JqZWN0ICckaWQnIGNhbm5vdCBiZSBwYXJzZWQhIik7CgoJCS8vIEZpcnN0IHNpbXVsYXRlIGlmIHRoZXJlIGFyZSBhbnkgcHJvYmxlbXMgb2YgQVNO'));
	@fwrite($fp, base64_decode('LjEgSURzIHVuZCBJUklzCgkJaWYgKCRvYmo6Om5zKCkgPT0gJ29pZCcpIHsKCQkJJG9pZCA9ICRvYmo7CgoJCQkkaWRzID0gKCRfUE9TVFsnaXJpcyddID09ICcnKSA/IGFycmF5KCkgOiBleHBsb2RlKCcsJywkX1BPU1RbJ2lyaXMnXSk7CgkJCSRpZHMgPSBhcnJh'));
	@fwrite($fp, base64_decode('eV9tYXAoJ3RyaW0nLCRpZHMpOwoJCQkkb2lkLT5yZXBsYWNlSXJpcygkaWRzLCB0cnVlKTsKCgkJCSRpZHMgPSAoJF9QT1NUWydhc24xaWRzJ10gPT0gJycpID8gYXJyYXkoKSA6IGV4cGxvZGUoJywnLCRfUE9TVFsnYXNuMWlkcyddKTsKCQkJJGlkcyA9IGFycmF5'));
	@fwrite($fp, base64_decode('X21hcCgndHJpbScsJGlkcyk7CgkJCSRvaWQtPnJlcGxhY2VBc24xSWRzKCRpZHMsIHRydWUpOwoJCX0KCgkJLy8gU3VwZXJpb3IgUkEgxG5kZXJ1bmcgZHVyY2hm/GhyZW4KCQkkcGFyZW50ID0gJF9QT1NUWydwYXJlbnQnXTsKCQkkcmFfZW1haWwgPSAkX1BPU1Rb'));
	@fwrite($fp, base64_decode('J3JhX2VtYWlsJ107CgkJaWYgKCFlbXB0eSgkcmFfZW1haWwpICYmICFvaWRwbHVzX3ZhbGlkX2VtYWlsKCRyYV9lbWFpbCkpIHsKCQkJdGhyb3cgbmV3IEV4Y2VwdGlvbignSW52YWxpZCBSQSBlbWFpbCBhZGRyZXNzJyk7CgkJfQoJCSRjb25maWRlbnRpYWwgPSAk'));
	@fwrite($fp, base64_decode('X1BPU1RbJ2NvbmZpZGVudGlhbCddID09ICd0cnVlJzsKCgkJT0lEcGx1czo6bG9nZ2VyKCktPmxvZygiT0lEKCRwYXJlbnQpK09JRCgkaWQpK09JRFJBKCRwYXJlbnQpPy9BPyIsICJPYmplY3QgJyRpZCcgY3JlYXRlZCwgIi4oZW1wdHkoJHJhX2VtYWlsKSA/ICJ3'));
	@fwrite($fp, base64_decode('aXRob3V0IGRlZmluZWQgUkEiIDogImdpdmVuIHRvIFJBICckcmFfZW1haWwnIikpLiIsIHN1cGVyaW9yIG9iamVjdCBpcyAnJHBhcmVudCciOwoJCWlmICghZW1wdHkoJHJhX2VtYWlsKSkgewoJCQlPSURwbHVzOjpsb2dnZXIoKS0+bG9nKCJSQSgkcmFfZW1haWwp'));
	@fwrite($fp, base64_decode('ISIsICJHYWluZWQgb3duZXJzaGlwIG9mIG5ld2x5IGNyZWF0ZWQgb2JqZWN0ICckaWQnIik7CgkJfQoKCQlpZiAoIU9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJJTlNFUlQgSU5UTyAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4ib2JqZWN0cyAoaWQsIHBhcmVudCwg'));
	@fwrite($fp, base64_decode('cmFfZW1haWwsIGNvbmZpZGVudGlhbCwgY3JlYXRlZCkgVkFMVUVTICg/LCA/LCA/LCA/LCBub3coKSkiLCBhcnJheSgkaWQsICRwYXJlbnQsICRyYV9lbWFpbCwgJGNvbmZpZGVudGlhbCA/IDEgOiAwKSkpIHsKCQkJdGhyb3cgbmV3IEV4Y2VwdGlvbihPSURwbHVz'));
	@fwrite($fp, base64_decode('OjpkYigpLT5lcnJvcigpKTsKCQl9CgoJCS8vIFNldCBBU04uMSBJRHMgdW5kIElSSXMKCQlpZiAoJG9iajo6bnMoKSA9PSAnb2lkJykgewoJCQkkb2lkID0gJG9iajsKCgkJCSRpZHMgPSAoJF9QT1NUWydpcmlzJ10gPT0gJycpID8gYXJyYXkoKSA6IGV4cGxvZGUo'));
	@fwrite($fp, base64_decode('JywnLCRfUE9TVFsnaXJpcyddKTsKCQkJJGlkcyA9IGFycmF5X21hcCgndHJpbScsJGlkcyk7CgkJCSRvaWQtPnJlcGxhY2VJcmlzKCRpZHMsIGZhbHNlKTsKCgkJCSRpZHMgPSAoJF9QT1NUWydhc24xaWRzJ10gPT0gJycpID8gYXJyYXkoKSA6IGV4cGxvZGUoJywn'));
	@fwrite($fp, base64_decode('LCRfUE9TVFsnYXNuMWlkcyddKTsKCQkJJGlkcyA9IGFycmF5X21hcCgndHJpbScsJGlkcyk7CgkJCSRvaWQtPnJlcGxhY2VBc24xSWRzKCRpZHMsIGZhbHNlKTsKCQl9CgoJCSRzdGF0dXMgPSAwOwoKCQlpZiAoIWVtcHR5KCRyYV9lbWFpbCkpIHsKCQkJLy8gRG8g'));
	@fwrite($fp, base64_decode('d2UgbmVlZCB0byBub3RpZnkgdGhhdCB0aGUgUkEgZG9lcyBub3QgZXhpc3Q/CgkJCSRyZXMgPSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0IHJhX25hbWUgZnJvbSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4icmEgd2hlcmUgZW1haWwgPSA/IiwgYXJy'));
	@fwrite($fp, base64_decode('YXkoJHJhX2VtYWlsKSk7CgkJCWlmIChPSURwbHVzOjpkYigpLT5udW1fcm93cygkcmVzKSA9PSAwKSAkc3RhdHVzID0gT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdyYV9pbnZpdGF0aW9uX2VuYWJsZWQnKSA/IDEgOiAyOwoJCX0KCgkJZWNobyBqc29uX2Vu'));
	@fwrite($fp, base64_decode('Y29kZShhcnJheSgic3RhdHVzIiA9PiAkc3RhdHVzKSk7Cgl9CgoJaWYgKCEkaGFuZGxlZCkgewoJCXRocm93IG5ldyBFeGNlcHRpb24oJ0ludmFsaWQgYWN0aW9uIElEJyk7Cgl9CgoJT0lEcGx1czo6ZGIoKS0+dHJhbnNhY3Rpb25fY29tbWl0KCk7Cn0gY2F0Y2gg'));
	@fwrite($fp, base64_decode('KEV4Y2VwdGlvbiAkZSkgewoJT0lEcGx1czo6ZGIoKS0+dHJhbnNhY3Rpb25fcm9sbGJhY2soKTsKCSRhcnkgPSBhcnJheSgpOwoJJGFyeVsnZXJyb3InXSA9ICRlLT5nZXRNZXNzYWdlKCk7CgllY2hvIGpzb25fZW5jb2RlKCRhcnkpOwp9CgojIC0tLQoKZnVuY3Rp'));
	@fwrite($fp, base64_decode('b24gX3JhX2NoYW5nZV9yZWMoJGlkLCAkb2xkX3JhLCAkbmV3X3JhKSB7CglPSURwbHVzOjpkYigpLT5xdWVyeSgidXBkYXRlICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJvYmplY3RzIHNldCByYV9lbWFpbCA9ID8sIHVwZGF0ZWQgPSBub3coKSB3aGVyZSBp'));
	@fwrite($fp, base64_decode('ZCA9ID8gYW5kIGlmbnVsbChyYV9lbWFpbCwnJykgPSA/IiwgYXJyYXkoJG5ld19yYSwgJGlkLCAkb2xkX3JhKSk7CgoJJHJlcyA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgaWQgZnJvbSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4ib2JqZWN0cyB3'));
	@fwrite($fp, base64_decode('aGVyZSBwYXJlbnQgPSA/IGFuZCBpZm51bGwocmFfZW1haWwsJycpID0gPyIsIGFycmF5KCRpZCwgJG9sZF9yYSkpOwoJd2hpbGUgKCRyb3cgPSBPSURwbHVzOjpkYigpLT5mZXRjaF9hcnJheSgkcmVzKSkgewoJCV9yYV9jaGFuZ2VfcmVjKCRyb3dbJ2lkJ10sICRv'));
	@fwrite($fp, base64_decode('bGRfcmEsICRuZXdfcmEpOwoJfQp9Cg=='));
	@fclose($fp);
}
if (!is_file('ajax.php')) {
	warn('File has vanished! Will re-create it: ajax.php');
	writefile_1();
	if (!is_file('ajax.php')) {
		warn('File cannot be created (not existing): ajax.php');
	} else if (sha1_file('ajax.php') != '00b78a77a5bab3f1573a78f21fa4000d3cef702e') {
		warn('File cannot be created (checksum mismatch): ajax.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('ajax.php', 0644)) {
		warn('Could not change file permissions of ajax.php');
	}
} else {
	if (@sha1_file('ajax.php') !== '00b78a77a5bab3f1573a78f21fa4000d3cef702e') {
		if (@sha1_file('ajax.php') !== 'ce8bbdbd8588e1c8e8618061b03c676088bb32df') {
			warn('File was modified. Will overwrite the changes now: ajax.php');
			$tmp = pathinfo('ajax.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('ajax.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('ajax.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('ajax.php') !== '00b78a77a5bab3f1573a78f21fa4000d3cef702e') {
			warn('File cannot be written (checksum mismatch): ajax.php');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 187\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 187') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

