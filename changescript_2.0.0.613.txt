<?php /* <ViaThinkSoftSignature>
mFQ4+Pn7hEYQJtLTX51Dm+bjM7TVA8u21I5I53i4UJsEEz+7IbOvXxuwt9eWAreri
0wh4FMGBXAF1fQeqr/a2DMEhw78nTM+QJWMXuDyMwL17QSys3Yap2zYOdHMC0QE8N
eD9kQAtsVV7Q/gChTi8zb2wtUD7GAbcodMCiqYEJ0y8zChuH5NrwIBYEdwNqiaMUG
y8p7rIiSl3Kuxo967FRfq8GC5kOHNPeipqbKYgWPnIFLBVDsLJw67Lk4NY5BmdcRG
7oUMj6tpUzZaAeQCOazFyekt21lS0jGt+bCqp+wP3rH+WI4z/MNkNSPUGFypm+FMr
yHqpQzo48LJLCOQDSUrn6P5lc7p6w9TyVmJG763RT3WUcKjS+x1S1q0ARvp9DgApQ
L3Uv2WBKINpixZ8rx1BgU6KMvMKCJlXw0JRMrt/AXtzVqFDNqnZ5178LLwhvOllbd
07a/BUwCDND2zClHzGTqGfrY+chntBKUSbDUXCBTmuyGc+MMLJrL+7eMaFbPOew4+
ctnWZSXF8irjOOoANoqlhYj/3naBGl+5II5PqFqwm8748xvWk1c0J+jS6xRaFpFjN
kiWZAlmG/Kbv3jPI7q6T4BodhXwUkajfo+gziiCwYhbuVsb1VSZhGhfa/SqmOPtGc
hFKuVuBCJ7jDcK8opnMN9/2gZunUPllBU75oWJU03KqDMfPhzDcFm4ZZGDWWoFMo/
yEytQFPUPYMI0e3fnG53c9tkAgKPFgOZIxhf+wW0oQ0ZX2rAnobKQ4q2P4MA0u5pk
AeC4+LLPHkv9qLgpu5FoJ6XbcueuPnwS/zgME1ipFbOOw6eeArBqGkmPStaFRxpts
hJE6bipZAkis44oJpApn8YtUSRPfcaludrq2YOdlMu8DmlE6ENCTB/tPQ/bgtRGoT
YlyhKDcnBP+uN1Wo/jmhy4zjWItY7WSf4i4NfpHeUut45gZiRGS7E3O104DNhiRPG
aDWceVv1bsTxz8vt/nfMtpNN6rWIMSsRR5WGRAv19wU0aJ0s3vU61NNq2y0h2191m
zFpLzhpzqQMbsMftordq7aqgashpasqST25+OgXgd6rkNqDt/Y0y4zE11X+OSO3+s
MozSwQAqmFZg2xX3rTTuyfJGip8MONcnGwijbJuE82Zxk84tEO79hZiWYczBK8Mof
aytMbgBcYWNDVr+hUZP9NMarkRB7SmTwuaLPeitO1crRO3k5MAa1Kf/p4g73kjNLt
pKP+mBtV1J4BENycp9EdnGpdanKWPsB96D3QBwnkem95XHDbgFVQh9H3AovbOuiyd
qLQZjB2KRkLwQEkvdZ44cW+8g+5m/qfXyCefLtwxWzVeHu7IyF2MJBQXOHlC8E4Cv
w==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 612') {
	err('This update can only be applied to OIDplus version 2.0.0.612!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php
function writefile_1() {
	@$fp = fopen('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMSBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgppZiAoIWRlZmluZWQoJ0lOU0lERV9PSURQTFVTJykpIGRpZSgpOwoKY2xhc3MgT0lEcGx1c1BhZ2VQdWJsaWNBdHRhY2htZW50cyBleHRlbmRzIE9JRHBsdXNQYWdlUGx1Z2luUHVibGlj'));
	@fwrite($fp, base64_decode('IHsKCgljb25zdCBESVJfVU5MT0NLX0ZJTEUgPSAnb2lkcGx1c191cGxvYWQuZGlyJzsKCglwcm90ZWN0ZWQgc3RhdGljIGZ1bmN0aW9uIGNoZWNrVXBsb2FkRGlyKCRkaXIpIHsKCQlpZiAoIWlzX2RpcigkZGlyKSkgewoJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2Vw'));
	@fwrite($fp, base64_decode('dGlvbihfTCgnVGhlIGF0dGFjaG1lbnQgZGlyZWN0b3J5ICIlMSIgaXMgbm90IGV4aXN0aW5nLicsICRkaXIpKTsKCQl9CgoJCSRyZWFsZGlyID0gcmVhbHBhdGgoJGRpcik7CgkJaWYgKCRyZWFsZGlyID09PSBmYWxzZSkgewoJCQl0aHJvdyBuZXcgT0lEcGx1c0V4'));
	@fwrite($fp, base64_decode('Y2VwdGlvbihfTCgnVGhlIGF0dGFjaG1lbnQgZGlyZWN0b3J5ICIlMSIgY2Fubm90IGJlIHJlc29sdmVkIChyZWFscGF0aCkuJywgJGRpcikpOwoJCX0KCgkJJHVubG9ja19maWxlID0gJHJlYWxkaXIgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gc2VsZjo6RElSX1VO'));
	@fwrite($fp, base64_decode('TE9DS19GSUxFOwoJCWlmICghZmlsZV9leGlzdHMoJHVubG9ja19maWxlKSkgewoJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnVW5sb2NrIGZpbGUgIiUxIiBpcyBub3QgZXhpc3RpbmcgaW4gYXR0YWNobWVudCBkaXJlY3RvcnkgIiUyIi4nLCBzZWxm'));
	@fwrite($fp, base64_decode('OjpESVJfVU5MT0NLX0ZJTEUsICRkaXIpKTsKCQl9CgoJCS8vIE5vdGU6IFdlIHdpbGwgbm90IHF1ZXJ5IHRoZSBmaWxlIG93bmVyIGluIFdpbmRvd3Mgc3lzdGVtcy4KCQkvLyBJdCB3b3VsZCBiZSBwb3NzaWJsZSwgaG93ZXZlciwgb24gV2luZG93cyBzeXN0ZW1z'));
	@fwrite($fp, base64_decode('LCB0aGUgZmlsZQoJCS8vIG93bmVyc2hpcCBpcyByYXRoZXIgaGlkZGVuIHRvIHRoZSB1c2VyIGFuZCB0aGUgdXNlciBuZWVkcwoJCS8vIHRvIGdvIGludG8gc2V2ZXJhbCBtZW51cyBhbmQgd2luZG93cyBpbiBvcmRlciB0byBzZWUvY2hhbmdlCgkJLy8gdGhlIG93'));
	@fwrite($fp, base64_decode('bmVyLiBXZSBkb24ndCB3YW50IHRvIG92ZXItY29tcGxpY2F0ZSBpdCB0byB0aGUgV2luZG93cyBhZG1pbi4KCQlpZiAoc3RydG91cHBlcihzdWJzdHIoUEhQX09TLCAwLCAzKSkgIT09ICdXSU4nKSB7CgkJCSRmaWxlX293bmVyX2EgPSBmaWxlb3duZXIoT0lEcGx1'));
	@fwrite($fp, base64_decode('czo6bG9jYWxwYXRoKCkuJ2luZGV4LnBocCcpOwoJCQlpZiAoJGZpbGVfb3duZXJfYSA9PT0gZmFsc2UpIHsKCQkJCSRmaWxlX293bmVyX2EgPSAtMTsKCQkJCSRmaWxlX293bmVyX2FfbmFtZSA9ICc/Pz8nOwoJCQl9IGVsc2UgewoJCQkJJHRtcCA9IHBvc2l4X2dl'));
	@fwrite($fp, base64_decode('dHB3dWlkKCRmaWxlX293bmVyX2EpOwoJCQkJJGZpbGVfb3duZXJfYV9uYW1lID0gJHRtcCAhPT0gZmFsc2UgPyAkdG1wWyduYW1lJ10gOiAnVUlEICcuJGZpbGVfb3duZXJfYTsKCQkJfQoKCQkJJGZpbGVfb3duZXJfYiA9IGZpbGVvd25lcigkdW5sb2NrX2ZpbGUp'));
	@fwrite($fp, base64_decode('OwoJCQlpZiAoJGZpbGVfb3duZXJfYiA9PT0gZmFsc2UpIHsKCQkJCSRmaWxlX293bmVyX2IgPSAtMTsKCQkJCSRmaWxlX293bmVyX2JfbmFtZSA9ICc/Pz8nOwoJCQl9IGVsc2UgewoJCQkJJHRtcCA9IHBvc2l4X2dldHB3dWlkKCRmaWxlX293bmVyX2IpOwoJCQkJ'));
	@fwrite($fp, base64_decode('JGZpbGVfb3duZXJfYl9uYW1lID0gJHRtcCAhPT0gZmFsc2UgPyAkdG1wWyduYW1lJ10gOiAnVUlEICcuJGZpbGVfb3duZXJfYjsKCQkJfQoKCQkJaWYgKCRmaWxlX293bmVyX2EgIT0gJGZpbGVfb3duZXJfYikgewoJCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRp'));
	@fwrite($fp, base64_decode('b24oX0woJ093bmVyIG9mIHVubG9jayBmaWxlICIlMSIgaXMgd3JvbmcuIEl0IGlzICIlMiIsIGJ1dCBpdCBzaG91bGQgYmUgIiUzIi4nLCAkdW5sb2NrX2ZpbGUsICRmaWxlX293bmVyX2JfbmFtZSwgJGZpbGVfb3duZXJfYV9uYW1lKSk7CgkJCX0KCQl9Cgl9CgoJ'));
	@fwrite($fp, base64_decode('cHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRVcGxvYWREaXIoJGlkPW51bGwpIHsKCQkkb2JqID0gT0lEcGx1c09iamVjdDo6cGFyc2UoJGlkKTsKCQlpZiAoJG9iaiA9PT0gbnVsbCkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0ludmFsaWQgb2JqZWN0'));
	@fwrite($fp, base64_decode('ICIlMSInLCRpZCkpOwoKCQkvLyBHZXQgYmFzZSBwYXRoCgkJJGNmZyA9IE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgnYXR0YWNobWVudF91cGxvYWRfZGlyJywgJycpOwoJCSRjZmcgPSB0cmltKCRjZmcpOwoJCWlmICgkY2ZnID09PSAnJykgewoJCQkkYmFz'));
	@fwrite($fp, base64_decode('ZXBhdGggPSBPSURwbHVzOjpsb2NhbHBhdGgoKSAuICd1c2VyZGF0YScgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJ2F0dGFjaG1lbnRzJzsKCQl9IGVsc2UgewoJCQkkYmFzZXBhdGggPSAkY2ZnOwoJCX0KCQlzZWxmOjpjaGVja1VwbG9hZERpcigkYmFzZXBhdGgp'));
	@fwrite($fp, base64_decode('OwoKCQkvLyBHZXQgb2JqZWN0LXNwZWNpZmljIHBhdGgKCQlpZiAoIWlzX251bGwoJGlkKSkgewoJCQkkcGF0aF92MSA9ICRiYXNlcGF0aCAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkb2JqLT5nZXRMZWdhY3lEaXJlY3RvcnlOYW1lKCk7CgkJCSRwYXRoX3YxX2J1'));
	@fwrite($fp, base64_decode('ZyA9ICRiYXNlcGF0aCAuICRvYmotPmdldExlZ2FjeURpcmVjdG9yeU5hbWUoKTsKCQkJJHBhdGhfdjIgPSAkYmFzZXBhdGggLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJG9iai0+Z2V0RGlyZWN0b3J5TmFtZSgpOwoKCQkJaWYgKGlzX2RpcigkcGF0aF92MSkpIHJl'));
	@fwrite($fp, base64_decode('dHVybiAkcGF0aF92MTsgLy8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkKCQkJaWYgKGlzX2RpcigkcGF0aF92MV9idWcpKSByZXR1cm4gJHBhdGhfdjFfYnVnOyAvLyBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eQoJCQlyZXR1cm4gJHBhdGhfdjI7CgkJfSBlbHNlIHsK'));
	@fwrite($fp, base64_decode('CQkJcmV0dXJuICRiYXNlcGF0aDsKCQl9Cgl9CgoJcHJpdmF0ZSBmdW5jdGlvbiByYU1heURlbGV0ZSgpIHsKCQlyZXR1cm4gT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdhdHRhY2htZW50c19hbGxvd19yYV9kZWxldGUnLCAwKTsKCX0KCglwcml2YXRlIGZ1'));
	@fwrite($fp, base64_decode('bmN0aW9uIHJhTWF5VXBsb2FkKCkgewoJCXJldHVybiBPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ2F0dGFjaG1lbnRzX2FsbG93X3JhX3VwbG9hZCcsIDApOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBhY3Rpb24oJGFjdGlvbklELCAkcGFyYW1zKSB7CgoJCWlm'));
	@fwrite($fp, base64_decode('ICgkYWN0aW9uSUQgPT0gJ2RlbGV0ZUF0dGFjaG1lbnQnKSB7CgkJCV9DaGVja1BhcmFtRXhpc3RzKCRwYXJhbXMsICdpZCcpOwoJCQkkaWQgPSAkcGFyYW1zWydpZCddOwoJCQkkb2JqID0gT0lEcGx1c09iamVjdDo6cGFyc2UoJGlkKTsKCQkJaWYgKCRvYmogPT09'));
	@fwrite($fp, base64_decode('IG51bGwpIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdJbnZhbGlkIG9iamVjdCAiJTEiJywkaWQpKTsKCQkJaWYgKCEkb2JqLT51c2VySGFzV3JpdGVSaWdodHMoKSkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0F1dGhlbnRpY2F0aW9uIGVy'));
	@fwrite($fp, base64_decode('cm9yLiBQbGVhc2UgbG9nIGluIGFzIGFkbWluLCBvciBhcyB0aGUgUkEgb2YgIiUxIiB0byB1cGxvYWQgYW4gYXR0YWNobWVudC4nLCRpZCkpOwoKCQkJaWYgKCFPSURwbHVzOjphdXRoVXRpbHMoKS0+aXNBZG1pbkxvZ2dlZEluKCkgJiYgISR0aGlzLT5yYU1heURl'));
	@fwrite($fp, base64_decode('bGV0ZSgpKSB7CgkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnVGhlIGFkbWluaXN0cmF0b3IgaGFzIGRpc2FibGVkIGRlbGV0aW5nIGF0dGFjaG1lbnRzIGJ5IFJBcy4nKSk7CgkJCX0KCgkJCV9DaGVja1BhcmFtRXhpc3RzKCRwYXJhbXMsICdmaWxl'));
	@fwrite($fp, base64_decode('bmFtZScpOwoJCQkkcmVxX2ZpbGVuYW1lID0gJHBhcmFtc1snZmlsZW5hbWUnXTsKCQkJaWYgKHN0cnBvcygkcmVxX2ZpbGVuYW1lLCAnLycpICE9PSBmYWxzZSkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0lsbGVnYWwgZmlsZSBuYW1lJykpOwoJCQlp'));
	@fwrite($fp, base64_decode('ZiAoc3RycG9zKCRyZXFfZmlsZW5hbWUsICdcXCcpICE9PSBmYWxzZSkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0lsbGVnYWwgZmlsZSBuYW1lJykpOwoJCQlpZiAoc3RycG9zKCRyZXFfZmlsZW5hbWUsICcuLicpICE9PSBmYWxzZSkgdGhyb3cgbmV3'));
	@fwrite($fp, base64_decode('IE9JRHBsdXNFeGNlcHRpb24oX0woJ0lsbGVnYWwgZmlsZSBuYW1lJykpOwoJCQlpZiAoc3RycG9zKCRyZXFfZmlsZW5hbWUsIGNocigwKSkgIT09IGZhbHNlKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnSWxsZWdhbCBmaWxlIG5hbWUnKSk7CgoJCQkk'));
	@fwrite($fp, base64_decode('dXBsb2FkZGlyID0gc2VsZjo6Z2V0VXBsb2FkRGlyKCRpZCk7CgkJCSR1cGxvYWRmaWxlID0gJHVwbG9hZGRpciAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiBiYXNlbmFtZSgkcmVxX2ZpbGVuYW1lKTsKCgkJCWlmICghZmlsZV9leGlzdHMoJHVwbG9hZGZpbGUpKSB0'));
	@fwrite($fp, base64_decode('aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnRmlsZSBkb2VzIG5vdCBleGlzdCcpKTsKCQkJQHVubGluaygkdXBsb2FkZmlsZSk7CgkJCWlmIChmaWxlX2V4aXN0cygkdXBsb2FkZmlsZSkpIHsKCQkJCU9JRHBsdXM6OmxvZ2dlcigpLT5sb2coIltFUlJdT0lE'));
	@fwrite($fp, base64_decode('KCRpZCkrW0VSUl1BISIsICJBdHRhY2htZW50IGZpbGUgJyIuYmFzZW5hbWUoJHVwbG9hZGZpbGUpLiInIGNvdWxkIG5vdCBiZSBkZWxldGVkIGZyb20gb2JqZWN0ICckaWQnIChwcm9ibGVtIHdpdGggcGVybWlzc2lvbnM/KSIpOwoJCQkJJG1zZyA9IF9MKCdBdHRh'));
	@fwrite($fp, base64_decode('Y2htZW50IGZpbGUgIiUxIiBjb3VsZCBub3QgYmUgZGVsZXRlZCBmcm9tIG9iamVjdCAiJTIiIChwcm9ibGVtIHdpdGggcGVybWlzc2lvbnM/KScsYmFzZW5hbWUoJHVwbG9hZGZpbGUpLCRpZCk7CgkJCQlpZiAoT0lEcGx1czo6YXV0aFV0aWxzKCktPmlzQWRtaW5M'));
	@fwrite($fp, base64_decode('b2dnZWRJbigpKSB7CgkJCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oJG1zZyk7CgkJCQl9IGVsc2UgewoJCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKCRtc2cuJy4gJy5fTCgnUGxlYXNlIGNvbnRhY3QgdGhlIHN5c3RlbSBhZG1pbmlzdHJhdG9y'));
	@fwrite($fp, base64_decode('LicpKTsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCS8vIElmIGl0IHdhcyB0aGUgbGFzdCBmaWxlLCBkZWxldGUgdGhlIGVtcHR5IGRpcmVjdG9yeQoJCQkJJGFyeSA9IGdsb2IoJHVwbG9hZGRpciAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAnKicpOwoJCQkJaWYgKGNv'));
	@fwrite($fp, base64_decode('dW50KCRhcnkpID09IDApIEBybWRpcigkdXBsb2FkZGlyKTsKCQkJfQoKCQkJT0lEcGx1czo6bG9nZ2VyKCktPmxvZygiW09LXU9JRCgkaWQpK1s/SU5GTy8hT0tdT0lEUkEoJGlkKT8vWz9JTkZPLyFPS11BPyIsICJEZWxldGVkIGF0dGFjaG1lbnQgJyIuYmFzZW5h'));
	@fwrite($fp, base64_decode('bWUoJHVwbG9hZGZpbGUpLiInIGZyb20gb2JqZWN0ICckaWQnIik7CgoJCQlyZXR1cm4gYXJyYXkoInN0YXR1cyIgPT4gMCk7CgoJCX0gZWxzZSBpZiAoJGFjdGlvbklEID09ICd1cGxvYWRBdHRhY2htZW50JykgewoJCQlfQ2hlY2tQYXJhbUV4aXN0cygkcGFyYW1z'));
	@fwrite($fp, base64_decode('LCAnaWQnKTsKCQkJJGlkID0gJHBhcmFtc1snaWQnXTsKCQkJJG9iaiA9IE9JRHBsdXNPYmplY3Q6OnBhcnNlKCRpZCk7CgkJCWlmICgkb2JqID09PSBudWxsKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnSW52YWxpZCBvYmplY3QgIiUxIicsJGlkKSk7'));
	@fwrite($fp, base64_decode('CgkJCWlmICghJG9iai0+dXNlckhhc1dyaXRlUmlnaHRzKCkpIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdBdXRoZW50aWNhdGlvbiBlcnJvci4gUGxlYXNlIGxvZyBpbiBhcyBhZG1pbiwgb3IgYXMgdGhlIFJBIG9mICIlMSIgdG8gdXBsb2FkIGFuIGF0'));
	@fwrite($fp, base64_decode('dGFjaG1lbnQuJywkaWQpKTsKCgkJCWlmICghT0lEcGx1czo6YXV0aFV0aWxzKCktPmlzQWRtaW5Mb2dnZWRJbigpICYmICEkdGhpcy0+cmFNYXlVcGxvYWQoKSkgewoJCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ1RoZSBhZG1pbmlzdHJhdG9yIGhh'));
	@fwrite($fp, base64_decode('cyBkaXNhYmxlZCB1cGxvYWRpbmcgYXR0YWNobWVudHMgYnkgUkFzLicpKTsKCQkJfQoKCQkJaWYgKCFpc3NldCgkX0ZJTEVTWyd1c2VyZmlsZSddKSkgewoJCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ1BsZWFzZSBjaG9vc2UgYSBmaWxlLicpKTsK'));
	@fwrite($fp, base64_decode('CQkJfQoKCQkJaWYgKCFPSURwbHVzOjphdXRoVXRpbHMoKS0+aXNBZG1pbkxvZ2dlZEluKCkpIHsKCQkJCSRiYW5uZWQgPSBleHBsb2RlKCcsJywgT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdhdHRhY2htZW50c19ibG9ja19leHRlbnNpb25zJywgJycpKTsK'));
	@fwrite($fp, base64_decode('CQkJCWZvcmVhY2ggKCRiYW5uZWQgYXMgJGV4dCkgewoJCQkJCSRleHQgPSB0cmltKCRleHQpOwoJCQkJCWlmICgkZXh0ID09ICcnKSBjb250aW51ZTsKCQkJCQlpZiAoc3RydG9sb3dlcihzdWJzdHIoYmFzZW5hbWUoJF9GSUxFU1sndXNlcmZpbGUnXVsnbmFtZSdd'));
	@fwrite($fp, base64_decode('KSwgLXN0cmxlbigkZXh0KS0xKSkgPT0gc3RydG9sb3dlcignLicuJGV4dCkpIHsKCQkJCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ1RoZSBmaWxlIGV4dGVuc2lvbiAiJTEiIGlzIGJhbm5lZCBieSB0aGUgYWRtaW5pc3RyYXRvciAoaXQgY2FuIGJl'));
	@fwrite($fp, base64_decode('IHVwbG9hZGVkIGJ5IHRoZSBhZG1pbmlzdHJhdG9yIHRob3VnaCknLCRleHQpKTsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJCSRyZXFfZmlsZW5hbWUgPSAkX0ZJTEVTWyd1c2VyZmlsZSddWyduYW1lJ107CgkJCWlmIChzdHJwb3MoJHJlcV9maWxlbmFtZSwgJy8nKSAh'));
	@fwrite($fp, base64_decode('PT0gZmFsc2UpIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdJbGxlZ2FsIGZpbGUgbmFtZScpKTsKCQkJaWYgKHN0cnBvcygkcmVxX2ZpbGVuYW1lLCAnXFwnKSAhPT0gZmFsc2UpIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdJbGxlZ2FsIGZp'));
	@fwrite($fp, base64_decode('bGUgbmFtZScpKTsKCQkJaWYgKHN0cnBvcygkcmVxX2ZpbGVuYW1lLCAnLi4nKSAhPT0gZmFsc2UpIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdJbGxlZ2FsIGZpbGUgbmFtZScpKTsKCQkJaWYgKHN0cnBvcygkcmVxX2ZpbGVuYW1lLCBjaHIoMCkpICE9'));
	@fwrite($fp, base64_decode('PSBmYWxzZSkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0lsbGVnYWwgZmlsZSBuYW1lJykpOwoKCQkJJHVwbG9hZGRpciA9IHNlbGY6OmdldFVwbG9hZERpcigkaWQpOwoJCQkkdXBsb2FkZmlsZSA9ICR1cGxvYWRkaXIgLiBESVJFQ1RPUllfU0VQQVJB'));
	@fwrite($fp, base64_decode('VE9SIC4gYmFzZW5hbWUoJHJlcV9maWxlbmFtZSk7CgoJCQlpZiAoIWlzX2RpcigkdXBsb2FkZGlyKSkgewoJCQkJQG1rZGlyKCR1cGxvYWRkaXIsIDA3NzcsIHRydWUpOwoJCQkJaWYgKCFpc19kaXIoJHVwbG9hZGRpcikpIHsKCQkJCQlPSURwbHVzOjpsb2dnZXIo'));
	@fwrite($fp, base64_decode('KS0+bG9nKCJbRVJSXU9JRCgkaWQpK1tFUlJdQSEiLCAiVXBsb2FkIGF0dGFjaG1lbnQgJyIuYmFzZW5hbWUoJHVwbG9hZGZpbGUpLiInIHRvIG9iamVjdCAnJGlkJyBmYWlsZWQ6IENhbm5vdCBjcmVhdGUgZGlyZWN0b3J5ICciLmJhc2VuYW1lKCR1cGxvYWRkaXIp'));
	@fwrite($fp, base64_decode('LiInIChwcm9ibGVtIHdpdGggcGVybWlzc2lvbnM/KSIpOwoJCQkJCSRtc2cgPSBfTCgnVXBsb2FkIGF0dGFjaG1lbnQgIiUxIiB0byBvYmplY3QgIiUyIiBmYWlsZWQnLGJhc2VuYW1lKCR1cGxvYWRmaWxlKSwkaWQpLic6ICcuX0woJ0Nhbm5vdCBjcmVhdGUgZGly'));
	@fwrite($fp, base64_decode('ZWN0b3J5ICIlMSIgKHByb2JsZW0gd2l0aCBwZXJtaXNzaW9ucz8pJyxiYXNlbmFtZSgkdXBsb2FkZGlyKSk7CgkJCQkJaWYgKE9JRHBsdXM6OmF1dGhVdGlscygpLT5pc0FkbWluTG9nZ2VkSW4oKSkgewoJCQkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigk'));
	@fwrite($fp, base64_decode('bXNnKTsKCQkJCQl9IGVsc2UgewoJCQkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigkbXNnLicuICcuX0woJ1BsZWFzZSBjb250YWN0IHRoZSBzeXN0ZW0gYWRtaW5pc3RyYXRvci4nKSk7CgkJCQkJfQoJCQkJfQoJCQl9CgoJCQlpZiAoIUBtb3ZlX3VwbG9h'));
	@fwrite($fp, base64_decode('ZGVkX2ZpbGUoJF9GSUxFU1sndXNlcmZpbGUnXVsndG1wX25hbWUnXSwgJHVwbG9hZGZpbGUpKSB7CgkJCQlPSURwbHVzOjpsb2dnZXIoKS0+bG9nKCJbRVJSXU9JRCgkaWQpK1tFUlJdQSEiLCAiVXBsb2FkIGF0dGFjaG1lbnQgJyIuYmFzZW5hbWUoJHVwbG9hZGZp'));
	@fwrite($fp, base64_decode('bGUpLiInIHRvIG9iamVjdCAnJGlkJyBmYWlsZWQ6IENhbm5vdCBtb3ZlIHVwbG9hZGVkIGZpbGUgaW50byBkaXJlY3RvcnkgKHByb2JsZW0gd2l0aCBwZXJtaXNzaW9ucz8pIik7CgkJCQkkbXNnID0gX0woJ1VwbG9hZCBhdHRhY2htZW50ICIlMSIgdG8gb2JqZWN0'));
	@fwrite($fp, base64_decode('ICIlMiIgZmFpbGVkJyxiYXNlbmFtZSgkdXBsb2FkZmlsZSksJGlkKS4nOiAnLl9MKCdDYW5ub3QgbW92ZSB1cGxvYWRlZCBmaWxlIGludG8gZGlyZWN0b3J5IChwcm9ibGVtIHdpdGggcGVybWlzc2lvbnM/KScpOwoJCQkJaWYgKE9JRHBsdXM6OmF1dGhVdGlscygp'));
	@fwrite($fp, base64_decode('LT5pc0FkbWluTG9nZ2VkSW4oKSkgewoJCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKCRtc2cpOwoJCQkJfSBlbHNlIHsKCQkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigkbXNnLicuICcuX0woJ1BsZWFzZSBjb250YWN0IHRoZSBzeXN0ZW0gYWRt'));
	@fwrite($fp, base64_decode('aW5pc3RyYXRvci4nKSk7CgkJCQl9CgkJCX0KCgkJCU9JRHBsdXM6OmxvZ2dlcigpLT5sb2coIltPS11PSUQoJGlkKStbP0lORk8vIU9LXU9JRFJBKCRpZCk/L1s/SU5GTy8hT0tdQT8iLCAiVXBsb2FkZWQgYXR0YWNobWVudCAnIi5iYXNlbmFtZSgkdXBsb2FkZmls'));
	@fwrite($fp, base64_decode('ZSkuIicgdG8gb2JqZWN0ICckaWQnIik7CgoJCQlyZXR1cm4gYXJyYXkoInN0YXR1cyIgPT4gMCk7CgkJfSBlbHNlIHsKCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ1Vua25vd24gYWN0aW9uIElEJykpOwoJCX0KCX0KCglwdWJsaWMgZnVuY3Rpb24g'));
	@fwrite($fp, base64_decode('aW5pdCgkaHRtbD10cnVlKSB7CgkJT0lEcGx1czo6Y29uZmlnKCktPnByZXBhcmVDb25maWdLZXkoJ2F0dGFjaG1lbnRzX2Jsb2NrX2V4dGVuc2lvbnMnLCAnQmxvY2sgZmlsZSBuYW1lIGV4dGVuc2lvbnMgYmVpbmcgdXNlZCBpbiBmaWxlIGF0dGFjaG1lbnRzIChj'));
	@fwrite($fp, base64_decode('b21tYSBzZXBhcmF0ZWQpJywgJ2V4ZSxzY3IscGlmLGJhdCxjb20sdmJzLGNtZCcsIE9JRHBsdXNDb25maWc6OlBST1RFQ1RJT05fRURJVEFCTEUsIGZ1bmN0aW9uKCR2YWx1ZSkgewoJCX0pOwoJCU9JRHBsdXM6OmNvbmZpZygpLT5wcmVwYXJlQ29uZmlnS2V5KCdh'));
	@fwrite($fp, base64_decode('dHRhY2htZW50c19hbGxvd19yYV9kZWxldGUnLCAnQWxsb3cgdGhhdCBSQXMgZGVsZXRlIGZpbGUgYXR0YWNobWVudHM/ICgwPW5vLCAxPXllcyknLCAnMCcsIE9JRHBsdXNDb25maWc6OlBST1RFQ1RJT05fRURJVEFCTEUsIGZ1bmN0aW9uKCR2YWx1ZSkgewoJCQlp'));
	@fwrite($fp, base64_decode('ZiAoIWlzX251bWVyaWMoJHZhbHVlKSB8fCAoJHZhbHVlIDwgMCkgfHwgKCR2YWx1ZSA+IDEpKSB7CgkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnUGxlYXNlIGVudGVyIGEgdmFsaWQgdmFsdWUgKDA9bm8sIDE9eWVzKS4nKSk7CgkJCX0KCQl9KTsK'));
	@fwrite($fp, base64_decode('CQlPSURwbHVzOjpjb25maWcoKS0+cHJlcGFyZUNvbmZpZ0tleSgnYXR0YWNobWVudHNfYWxsb3dfcmFfdXBsb2FkJywgJ0FsbG93IHRoYXQgUkFzIHVwbG9hZCBmaWxlIGF0dGFjaG1lbnRzPyAoMD1ubywgMT15ZXMpJywgJzAnLCBPSURwbHVzQ29uZmlnOjpQUk9U'));
	@fwrite($fp, base64_decode('RUNUSU9OX0VESVRBQkxFLCBmdW5jdGlvbigkdmFsdWUpIHsKCQkJaWYgKCFpc19udW1lcmljKCR2YWx1ZSkgfHwgKCR2YWx1ZSA8IDApIHx8ICgkdmFsdWUgPiAxKSkgewoJCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ1BsZWFzZSBlbnRlciBhIHZh'));
	@fwrite($fp, base64_decode('bGlkIHZhbHVlICgwPW5vLCAxPXllcykuJykpOwoJCQl9CgkJfSk7CgoJCSRpbmZvX3R4dCAgPSAnQWx0ZXJuYXRpdmUgZGlyZWN0b3J5IGZvciBhdHRhY2htZW50cy4gSXQgbXVzdCBjb250YWluIGEgZmlsZSBuYW1lZCAiJzsKCQkkaW5mb190eHQgLj0gc2VsZjo6'));
	@fwrite($fp, base64_decode('RElSX1VOTE9DS19GSUxFOwoJCSRpbmZvX3R4dCAuPSAnIic7CgkJaWYgKHN0cnRvdXBwZXIoc3Vic3RyKFBIUF9PUywgMCwgMykpICE9PSAnV0lOJykgewoJCQkkaW5mb190eHQgLj0gJyB3aXRoIHRoZSBzYW1lIG93bmVyIGFzIGluZGV4LnBocCc7CgkJfQoJCSRp'));
	@fwrite($fp, base64_decode('bmZvX3R4dCAuPSAnLiBJZiB0aGlzIHNldHRpbmcgaXMgZW1wdHksIHRoZW4gdGhlIHVzZXJkYXRhIGRpcmVjdG9yeSBpcyB1c2VkLic7CgkJT0lEcGx1czo6Y29uZmlnKCktPnByZXBhcmVDb25maWdLZXkoJ2F0dGFjaG1lbnRfdXBsb2FkX2RpcicsICRpbmZvX3R4'));
	@fwrite($fp, base64_decode('dCwgJycsIE9JRHBsdXNDb25maWc6OlBST1RFQ1RJT05fRURJVEFCTEUsIGZ1bmN0aW9uKCR2YWx1ZSkgewoJCQlpZiAodHJpbSgkdmFsdWUpICE9PSAnJykgewoJCQkJc2VsZjo6Y2hlY2tVcGxvYWREaXIoJHZhbHVlKTsKCQkJfQoJCX0pOwoJfQoKCXB1YmxpYyBm'));
	@fwrite($fp, base64_decode('dW5jdGlvbiBndWkoJGlkLCAmJG91dCwgJiRoYW5kbGVkKSB7CgkJLy8gTm90aGluZwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBwdWJsaWNTaXRlbWFwKCYkb3V0KSB7CgkJLy8gTm90aGluZwoJfQoKCXB1YmxpYyBmdW5jdGlvbiB0cmVlKCYkanNvbiwgJHJhX2VtYWls'));
	@fwrite($fp, base64_decode('PW51bGwsICRub25qcz1mYWxzZSwgJHJlcV9nb3RvPScnKSB7CgkJcmV0dXJuIGZhbHNlOwoJfQoKCXByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIGNvbnZlcnRfZmlsZXNpemUoJGJ5dGVzLCAkZGVjaW1hbHMgPSAyKXsKCQkkc2l6ZSA9IGFycmF5KF9MKCdCeXRlcycp'));
	@fwrite($fp, base64_decode('LF9MKCdLaUInKSxfTCgnTWlCJyksX0woJ0dpQicpLF9MKCdUaUInKSxfTCgnUGlCJyksX0woJ0VpQicpLF9MKCdaaUInKSxfTCgnWWlCJykpOwoJCSRmYWN0b3IgPSBmbG9vcigoc3RybGVuKCRieXRlcykgLSAxKSAvIDMpOwoJCXJldHVybiBzcHJpbnRmKCIlLnsk'));
	@fwrite($fp, base64_decode('ZGVjaW1hbHN9ZiIsICRieXRlcyAvIHBvdygxMDI0LCAkZmFjdG9yKSkgLiAnICcgLiBAJHNpemVbJGZhY3Rvcl07Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGltcGxlbWVudHNGZWF0dXJlKCRpZCkgewoJCWlmIChzdHJ0b2xvd2VyKCRpZCkgPT0gJzEuMy42LjEuNC4x'));
	@fwrite($fp, base64_decode('LjM3NDc2LjIuNS4yLjMuMicpIHJldHVybiB0cnVlOyAvLyBtb2RpZnlDb250ZW50CgkJaWYgKHN0cnRvbG93ZXIoJGlkKSA9PSAnMS4zLjYuMS40LjEuMzc0NzYuMi41LjIuMy4zJykgcmV0dXJuIHRydWU7IC8vIGJlZm9yZU9iamVjdCosIGFmdGVyT2JqZWN0KgoJ'));
	@fwrite($fp, base64_decode('CWlmIChzdHJ0b2xvd2VyKCRpZCkgPT0gJzEuMy42LjEuNC4xLjM3NDc2LjIuNS4yLjMuNCcpIHJldHVybiB0cnVlOyAvLyB3aG9pcypBdHRyaWJ1dGVzCgkJcmV0dXJuIGZhbHNlOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBtb2RpZnlDb250ZW50KCRpZCwgJiR0aXRs'));
	@fwrite($fp, base64_decode('ZSwgJiRpY29uLCAmJHRleHQpIHsKCQkvLyBJbnRlcmZhY2UgMS4zLjYuMS40LjEuMzc0NzYuMi41LjIuMy4yCgoJCSRvdXRwdXQgPSAnJzsKCQkkZG9zaG93ID0gZmFsc2U7CgoJCXRyeSB7CgkJCSR1cGxvYWRfZGlyID0gc2VsZjo6Z2V0VXBsb2FkRGlyKCRpZCk7'));
	@fwrite($fp, base64_decode('CgkJCSRmaWxlcyA9IGdsb2IoJHVwbG9hZF9kaXIgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJyonKTsKCQkJJGZvdW5kX2ZpbGVzID0gZmFsc2U7CgoJCQkkb2JqID0gT0lEcGx1c09iamVjdDo6cGFyc2UoJGlkKTsKCQkJaWYgKCRvYmogPT09IG51bGwpIHRocm93'));
	@fwrite($fp, base64_decode('IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdJbnZhbGlkIG9iamVjdCAiJTEiJywkaWQpKTsKCQkJJGNhbl91cGxvYWQgPSBPSURwbHVzOjphdXRoVXRpbHMoKS0+aXNBZG1pbkxvZ2dlZEluKCkgfHwgKCR0aGlzLT5yYU1heVVwbG9hZCgpICYmICRvYmotPnVzZXJI'));
	@fwrite($fp, base64_decode('YXNXcml0ZVJpZ2h0cygpKTsKCQkJJGNhbl9kZWxldGUgPSBPSURwbHVzOjphdXRoVXRpbHMoKS0+aXNBZG1pbkxvZ2dlZEluKCkgfHwgKCR0aGlzLT5yYU1heURlbGV0ZSgpICYmICRvYmotPnVzZXJIYXNXcml0ZVJpZ2h0cygpKTsKCgkJCWlmIChPSURwbHVzOjph'));
	@fwrite($fp, base64_decode('dXRoVXRpbHMoKS0+aXNBZG1pbkxvZ2dlZEluKCkpIHsKCQkJCSRvdXRwdXQgLj0gJzxwPicuX0woJ0FkbWluIGluZm86IFRoZSBkaXJlY3RvcnkgaXMgJTEnLCc8Yj4nLmh0bWxlbnRpdGllcygkdXBsb2FkX2RpcikuJzwvYj4nKS4nPC9wPic7CgkJCQkkZG9zaG93'));
	@fwrite($fp, base64_decode('ID0gdHJ1ZTsKCQkJfQoKCQkJJG91dHB1dCAuPSAnPGRpdiBpZD0iZmlsZWF0dGFjaG1lbnRzX3RhYmxlIiBjbGFzcz0idGFibGUtcmVzcG9uc2l2ZSI+JzsKCQkJJG91dHB1dCAuPSAnPHRhYmxlIGNsYXNzPSJ0YWJsZSB0YWJsZS1ib3JkZXJlZCB0YWJsZS1zdHJp'));
	@fwrite($fp, base64_decode('cGVkIj4nOwoJCQkkb3V0cHV0IC49ICc8dHI+JzsKCQkJJG91dHB1dCAuPSAnPHRoPicuX0woJ0ZpbGVuYW1lJykuJzwvdGg+JzsKCQkJJG91dHB1dCAuPSAnPHRoPicuX0woJ1NpemUnKS4nPC90aD4nOwoJCQkkb3V0cHV0IC49ICc8dGg+Jy5fTCgnRmlsZSB0eXBl'));
	@fwrite($fp, base64_decode('JykuJzwvdGg+JzsKCQkJJG91dHB1dCAuPSAnPHRoPicuX0woJ0Rvd25sb2FkJykuJzwvdGg+JzsKCQkJaWYgKCRjYW5fZGVsZXRlKSAkb3V0cHV0IC49ICc8dGg+Jy5fTCgnRGVsZXRlJykuJzwvdGg+JzsKCQkJJG91dHB1dCAuPSAnPC90cj4nOwoJCQlmb3JlYWNo'));
	@fwrite($fp, base64_decode('ICgkZmlsZXMgYXMgJGZpbGUpIHsKCQkJCWlmIChpc19kaXIoJGZpbGUpKSBjb250aW51ZTsKCgkJCQkkb3V0cHV0IC49ICc8dHI+JzsKCQkJCSRvdXRwdXQgLj0gJzx0ZD4nLmh0bWxlbnRpdGllcyhiYXNlbmFtZSgkZmlsZSkpLic8L3RkPic7CgkJCQkkb3V0cHV0'));
	@fwrite($fp, base64_decode('IC49ICc8dGQ+Jy5odG1sZW50aXRpZXMoc2VsZjo6Y29udmVydF9maWxlc2l6ZShmaWxlc2l6ZSgkZmlsZSksIDApKS4nPC90ZD4nOwoJCQkJJGxvb2t1cF9maWxlcyA9IGFycmF5KAoJCQkJCU9JRHBsdXM6OmxvY2FscGF0aCgpLid1c2VyZGF0YS9hdHRhY2htZW50'));
	@fwrite($fp, base64_decode('cy9maWxldHlwZXMkJy5PSURwbHVzOjpnZXRDdXJyZW50TGFuZygpLicuY29uZicsCgkJCQkJT0lEcGx1czo6bG9jYWxwYXRoKCkuJ3VzZXJkYXRhL2F0dGFjaG1lbnRzL2ZpbGV0eXBlcy5jb25mJywKCQkJCQlPSURwbHVzOjpsb2NhbHBhdGgoKS4ndmVuZG9yL2Rh'));
	@fwrite($fp, base64_decode('bmllbG1hcnNjaGFsbC9maWxlZm9ybWF0cy9maWxldHlwZXMkJy5PSURwbHVzOjpnZXRDdXJyZW50TGFuZygpLicubG9jYWwnLCAvLyBub3QgcmVjb21tZW5kZWQKCQkJCQlPSURwbHVzOjpsb2NhbHBhdGgoKS4ndmVuZG9yL2RhbmllbG1hcnNjaGFsbC9maWxlZm9y'));
	@fwrite($fp, base64_decode('bWF0cy9maWxldHlwZXMubG9jYWwnLCAvLyBub3QgcmVjb21tZW5kZWQKCQkJCQlPSURwbHVzOjpsb2NhbHBhdGgoKS4ndmVuZG9yL2RhbmllbG1hcnNjaGFsbC9maWxlZm9ybWF0cy9maWxldHlwZXMkJy5PSURwbHVzOjpnZXRDdXJyZW50TGFuZygpLicuY29uZics'));
	@fwrite($fp, base64_decode('CgkJCQkJT0lEcGx1czo6bG9jYWxwYXRoKCkuJ3ZlbmRvci9kYW5pZWxtYXJzY2hhbGwvZmlsZWZvcm1hdHMvZmlsZXR5cGVzLmNvbmYnCgkJCQkpOwoJCQkJJG91dHB1dCAuPSAnPHRkPicuaHRtbGVudGl0aWVzKFZ0c0ZpbGVUeXBlRGV0ZWN0OjpnZXREZXNjcmlw'));
	@fwrite($fp, base64_decode('dGlvbigkZmlsZSwgJGxvb2t1cF9maWxlcykpLic8L3RkPic7CgoJCQkJJG91dHB1dCAuPSAnICAgICA8dGQ+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG5hbWU9ImRvd25sb2FkXycubWQ1KCRmaWxlKS4nIiBpZD0iZG93bmxvYWRfJy5tZDUoJGZpbGUpLiciIGNsYXNz'));
	@fwrite($fp, base64_decode('PSJidG4gYnRuLXN1Y2Nlc3MgYnRuLXhzIGRvd25sb2FkIiBvbmNsaWNrPSJPSURwbHVzUGFnZVB1YmxpY0F0dGFjaG1lbnRzLmRvd25sb2FkQXR0YWNobWVudCgnLmpzX2VzY2FwZShPSURwbHVzOjp3ZWJwYXRoKF9fRElSX18pKS4nLCBjdXJyZW50X25vZGUsJy5q'));
	@fwrite($fp, base64_decode('c19lc2NhcGUoYmFzZW5hbWUoJGZpbGUpKS4nKSI+Jy5fTCgnRG93bmxvYWQnKS4nPC9idXR0b24+PC90ZD4nOwoJCQkJaWYgKCRjYW5fZGVsZXRlKSB7CgkJCQkJJG91dHB1dCAuPSAnICAgICA8dGQ+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG5hbWU9ImRlbGV0ZV8n'));
	@fwrite($fp, base64_decode('Lm1kNSgkZmlsZSkuJyIgaWQ9ImRlbGV0ZV8nLm1kNSgkZmlsZSkuJyIgY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi14cyBkZWxldGUiIG9uY2xpY2s9Ik9JRHBsdXNQYWdlUHVibGljQXR0YWNobWVudHMuZGVsZXRlQXR0YWNobWVudChjdXJyZW50X25vZGUsJy5q'));
	@fwrite($fp, base64_decode('c19lc2NhcGUoYmFzZW5hbWUoJGZpbGUpKS4nKSI+Jy5fTCgnRGVsZXRlJykuJzwvYnV0dG9uPjwvdGQ+JzsKCQkJCX0KCgkJCQkkb3V0cHV0IC49ICc8L3RyPic7CgkJCQkkZG9zaG93ID0gdHJ1ZTsKCQkJCSRmb3VuZF9maWxlcyA9IHRydWU7CgkJCX0KCgkJCWlm'));
	@fwrite($fp, base64_decode('ICghJGZvdW5kX2ZpbGVzKSAkb3V0cHV0IC49ICc8dHI+PHRkIGNvbHNwYW49IicuKCRjYW5fZGVsZXRlID8gNSA6IDQpLiciPjxpPicuX0woJ05vIGF0dGFjaG1lbnRzJykuJzwvaT48L3RkPjwvdHI+JzsKCgkJCSRvdXRwdXQgLj0gJzwvdGFibGU+PC9kaXY+JzsK'));
	@fwrite($fp, base64_decode('CgkJCWlmICgkY2FuX3VwbG9hZCkgewoJCQkJJG91dHB1dCAuPSAnPGZvcm0gYWN0aW9uPSJqYXZhc2NyaXB0OnZvaWQoMCk7IiBvbnN1Ym1pdD0icmV0dXJuIE9JRHBsdXNQYWdlUHVibGljQXR0YWNobWVudHMudXBsb2FkQXR0YWNobWVudE9uU3VibWl0KHRoaXMp'));
	@fwrite($fp, base64_decode('OyIgZW5jdHlwZT0ibXVsdGlwYXJ0L2Zvcm0tZGF0YSIgaWQ9InVwbG9hZEF0dGFjaG1lbnRGb3JtIj4nOwoJCQkJJG91dHB1dCAuPSAnPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iaWQiIHZhbHVlPSInLmh0bWxlbnRpdGllcygkaWQpLiciPic7CgkJCQkkb3V0'));
	@fwrite($fp, base64_decode('cHV0IC49ICc8ZGl2PicuX0woJ0FkZCBhIGZpbGUgYXR0YWNobWVudCcpLic6PGlucHV0IHR5cGU9ImZpbGUiIG5hbWU9InVzZXJmaWxlIiB2YWx1ZT0iIiBpZD0iZmlsZUF0dGFjaG1lbnQiPic7CgkJCQkkb3V0cHV0IC49ICc8YnI+PGlucHV0IHR5cGU9InN1Ym1p'));
	@fwrite($fp, base64_decode('dCIgdmFsdWU9IicuX0woJ1VwbG9hZCcpLiciPjwvZGl2Pic7CgkJCQkkb3V0cHV0IC49ICc8L2Zvcm0+JzsKCQkJCSRkb3Nob3cgPSB0cnVlOwoJCQl9CgkJfSBjYXRjaCAoRXhjZXB0aW9uICRlKSB7CgkJCSRkb3Nob3cgPSB0cnVlOwoJCQkkb3V0cHV0ID0gJzxw'));
	@fwrite($fp, base64_decode('PicuX0woJ1RoaXMgZnVuY3Rpb25hbGl0eSBpcyBub3QgYXZhaWxhYmxlIGR1ZSB0byBhIG1pc2NvbmZpZ3VyYXRpb24uJykuJzwvcD4nOwoJCQlpZiAoT0lEcGx1czo6YXV0aFV0aWxzKCktPmlzQWRtaW5Mb2dnZWRJbigpKSB7CgkJCQkkb3V0cHV0IC49ICc8cD4n'));
	@fwrite($fp, base64_decode('LiRlLT5nZXRNZXNzYWdlKCkuJzwvcD4nOwoJCQl9IGVsc2UgewoJCQkJJG91dHB1dCAuPSAnPHA+Jy5fTCgnUGxlYXNlIG5vdGlmeSB0aGUgc3lzdGVtIGFkbWluaXN0cmF0b3IuIEFmdGVyIHRoZXkgbG9nLWluLCB0aGV5IGNhbiBzZWUgdGhlIHJlYXNvbiBhdCB0'));
	@fwrite($fp, base64_decode('aGlzIHBsYWNlLicpLic8L3A+JzsKCQkJfQoJCX0KCgkJJG91dHB1dCA9ICc8aDI+Jy5fTCgnRmlsZSBhdHRhY2htZW50cycpLic8L2gyPicgLgoJCSAgICAgICAgICAnPGRpdiBjbGFzcz0iY29udGFpbmVyIGJveCI+JyAuCgkJICAgICAgICAgICRvdXRwdXQgLgoJ'));
	@fwrite($fp, base64_decode('CSAgICAgICAgICAnPC9kaXY+JzsKCQlpZiAoJGRvc2hvdykgJHRleHQgLj0gJG91dHB1dDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gYmVmb3JlT2JqZWN0RGVsZXRlKCRpZCkge30gLy8gSW50ZXJmYWNlIDEuMy42LjEuNC4xLjM3NDc2LjIuNS4yLjMuMwoJcHVibGlj'));
	@fwrite($fp, base64_decode('IGZ1bmN0aW9uIGFmdGVyT2JqZWN0RGVsZXRlKCRpZCkgewoJCS8vIEludGVyZmFjZSAxLjMuNi4xLjQuMS4zNzQ3Ni4yLjUuMi4zLjMKCQkvLyBEZWxldGUgdGhlIGF0dGFjaG1lbnQgZm9sZGVyIGluY2x1ZGluZyBhbGwgZmlsZXMgaW4gaXQgKG5vdGU6IFN1YmZv'));
	@fwrite($fp, base64_decode('bGRlcnMgYXJlIG5vdCBwb3NzaWJsZSkKCQkkdXBsb2FkZGlyID0gc2VsZjo6Z2V0VXBsb2FkRGlyKCRpZCk7CgkJaWYgKCR1cGxvYWRkaXIgIT0gJycpIHsKCQkJJGFyeSA9IGdsb2IoJHVwbG9hZGRpciAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAnKicpOwoJCQlm'));
	@fwrite($fp, base64_decode('b3JlYWNoICgkYXJ5IGFzICRhKSBAdW5saW5rKCRhKTsKCQkJQHJtZGlyKCR1cGxvYWRkaXIpOwoJCQlpZiAoaXNfZGlyKCR1cGxvYWRkaXIpKSB7CgkJCQlPSURwbHVzOjpsb2dnZXIoKS0+bG9nKCJbV0FSTl1PSUQoJGlkKStbV0FSTl1BISIsICJBdHRhY2htZW50'));
	@fwrite($fp, base64_decode('IGRpcmVjdG9yeSAnJHVwbG9hZGRpcicgY291bGQgbm90IGJlIGRlbGV0ZWQgZHVyaW5nIHRoZSBkZWxldGlvbiBvZiB0aGUgT0lEIik7CgkJCX0KCQl9Cgl9CglwdWJsaWMgZnVuY3Rpb24gYmVmb3JlT2JqZWN0VXBkYXRlU3VwZXJpb3IoJGlkLCAmJHBhcmFtcykg'));
	@fwrite($fp, base64_decode('e30gLy8gSW50ZXJmYWNlIDEuMy42LjEuNC4xLjM3NDc2LjIuNS4yLjMuMwoJcHVibGljIGZ1bmN0aW9uIGFmdGVyT2JqZWN0VXBkYXRlU3VwZXJpb3IoJGlkLCAmJHBhcmFtcykge30gLy8gSW50ZXJmYWNlIDEuMy42LjEuNC4xLjM3NDc2LjIuNS4yLjMuMwoJcHVi'));
	@fwrite($fp, base64_decode('bGljIGZ1bmN0aW9uIGJlZm9yZU9iamVjdFVwZGF0ZVNlbGYoJGlkLCAmJHBhcmFtcykge30gLy8gSW50ZXJmYWNlIDEuMy42LjEuNC4xLjM3NDc2LjIuNS4yLjMuMwoJcHVibGljIGZ1bmN0aW9uIGFmdGVyT2JqZWN0VXBkYXRlU2VsZigkaWQsICYkcGFyYW1zKSB7'));
	@fwrite($fp, base64_decode('fSAvLyBJbnRlcmZhY2UgMS4zLjYuMS40LjEuMzc0NzYuMi41LjIuMy4zCglwdWJsaWMgZnVuY3Rpb24gYmVmb3JlT2JqZWN0SW5zZXJ0KCRpZCwgJiRwYXJhbXMpIHt9IC8vIEludGVyZmFjZSAxLjMuNi4xLjQuMS4zNzQ3Ni4yLjUuMi4zLjMKCXB1YmxpYyBmdW5j'));
	@fwrite($fp, base64_decode('dGlvbiBhZnRlck9iamVjdEluc2VydCgkaWQsICYkcGFyYW1zKSB7fSAvLyBJbnRlcmZhY2UgMS4zLjYuMS40LjEuMzc0NzYuMi41LjIuMy4zCgoJcHVibGljIGZ1bmN0aW9uIHRyZWVfc2VhcmNoKCRyZXF1ZXN0KSB7CgkJcmV0dXJuIGZhbHNlOwoJfQoKCXB1Ymxp'));
	@fwrite($fp, base64_decode('YyBmdW5jdGlvbiB3aG9pc09iamVjdEF0dHJpYnV0ZXMoJGlkLCAmJG91dCkgewoJCS8vIEludGVyZmFjZSAxLjMuNi4xLjQuMS4zNzQ3Ni4yLjUuMi4zLjQKCgkJJGZpbGVzID0gZ2xvYihzZWxmOjpnZXRVcGxvYWREaXIoJGlkKSAuIERJUkVDVE9SWV9TRVBBUkFU'));
	@fwrite($fp, base64_decode('T1IgLiAnKicpOwoJCWZvcmVhY2ggKCRmaWxlcyBhcyAkZmlsZSkgewoJCQkkb3V0W10gPSAnYXR0YWNobWVudC1uYW1lOiAnLmJhc2VuYW1lKCRmaWxlKTsKCQkJJG91dFtdID0gJ2F0dGFjaG1lbnQtdXJsOiAnLk9JRHBsdXM6OndlYnBhdGgoX19ESVJfXykuJ2Rv'));
	@fwrite($fp, base64_decode('d25sb2FkLnBocD9pZD0nLnVybGVuY29kZSgkaWQpLicmZmlsZW5hbWU9Jy51cmxlbmNvZGUoYmFzZW5hbWUoJGZpbGUpKTsKCQl9CgoJfQoJcHVibGljIGZ1bmN0aW9uIHdob2lzUmFBdHRyaWJ1dGVzKCRlbWFpbCwgJiRvdXQpIHt9IC8vIEludGVyZmFjZSAxLjMu'));
	@fwrite($fp, base64_decode('Ni4xLjQuMS4zNzQ3Ni4yLjUuMi4zLjQKfQo='));
	@fclose($fp);
}
if (!is_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php')) {
	warn('File has vanished! Will re-create it: plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
	writefile_1();
	if (!is_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php')) {
		warn('File cannot be created (not existing): plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
	} else if (sha1_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php') != 'e0812d03257295543e1753b90c6dfcaf2dc6b9cd') {
		warn('File cannot be created (checksum mismatch): plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php', 0644)) {
		warn('Could not change file permissions of plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
	}
} else {
	if (@sha1_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php') !== 'e0812d03257295543e1753b90c6dfcaf2dc6b9cd') {
		if (@sha1_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php') !== 'a5126221fae2ea091a17fce0f7520d966d67a51f') {
			warn('File was modified. Will overwrite the changes now: plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
			$tmp = pathinfo('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php') !== 'e0812d03257295543e1753b90c6dfcaf2dc6b9cd') {
			warn('File cannot be written (checksum mismatch): plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 613\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 613') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

