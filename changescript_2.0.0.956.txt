<?php /* <ViaThinkSoftSignature>
CpstUXmr0bu89LP7EHmvCuEoSju3W85E5LLt8isaNv9Zy6rJvpsniXYiXxZoqlLEW
Bn/Wn1aLijz1ZXtdTA1Fs7Z/DU2NPJ774/yls/5LWVi3Hzm0VMsDS/ProLXMziQsD
BiI3/oFH3f/+5p9GPVJeQIadsq2tv+MlSHCypJetw1zH3svlIvbIfrjOnVzKcRWQi
zbnlNBL2TpN5gnfl9d6kBM/+gxIuNziDHR3EqHTt22YNlayxEQp4p0v1yojgt/pFV
WVxZLvITmy/PLd+/fklyjRHov/5PJ7OuMYWxYJz1MWH1PtYPJ90kOkmMr0CTBtp8b
k+6s5uGX8NDK1l2r9SwS5owfVVnQPfso/GMPe74vdvn4Joad6hTZISxMsY10u45cM
+tAdVR0JYo9OVAm3bstlgH3alNXcb5SAPgj8hijC1grnIGZGryYKC99gSzqj1pZqA
a0FMNEH5uCmxnqSFnwrSWRAA8zqiBz3FbmlBgTaQSTHREHpnKMOX8BTNnj3wS4hKA
xCyRVXAD7Rs8HLP6hEhH0eGeOLIbpDgSdQyErvHqdXwnbEUprJkm2su6GJ4qsFu8w
Nkgx5ur+xPZ2k6AneY0S92GyyTHn3iRU8bK7fbx9i+y9LOt3covyPRExvBLwlMARr
9vozRxRAxctssxF09X8zYfyiRBF3Ln4ltSdg6//iYEOwDJBT2gHVqN3RtIEgwZvQw
pzrLjf9xTJhqM9Sy23/GhtoQsI0zy6o97U42eLzVVGohq5hqgpL3nDVPWP9e8o3Ld
e6A4f3iyrGMVQoGxMWKmSfAkSN2tv8DBfhqIOlzuFPcP2esBky3AdVeML4kp7CUF6
S8sIEalFGmTwKYcd6mlj96W0BT6LcLqeL9hbu13eJZ/quK8OGbowqNUqo42MQHY4v
DZRnGZ9E6/tYkIg2cgA3a4WHIX1pRF7A3dW/r4X7SeEaWYMqUUsjImB+9BC0jVUCz
qKsKHwc91m1EG834z+XzJ8Mz3rBiBS9Yld4cZCh3pMPFJsypJuD+3dtYt/dXHoZst
nTlQhcaydYdNr9ocG5atUWjyKoik9cqPLbI3Ve0DUW1Bd3kJoqB35qPyJsFJRtLcA
GpNbp2xPava1ojG7FPdhqIGpxp+5PDSzQ6SUj74wuDUeObM5LBvvDi0sLOqLwSPcy
flI9j+LkXQwBS0d51TuncUZdgFOG7f6wbxHK2hmatzjgFjM22TGWcS85Zw1jU5PPA
l9/GMwADfnXNJJarZJAJZUc9/XpWXHzJqtJBHtybz0yFephnDAKOAr5cM7BleT2UR
zjQWW1F5S8IswK4RIb6Na9bn9xdChZLOdXpui7u7wxtIfA+CcLOhKeF5dNAwLt/LF
Q==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('.version.php')) !== '<?php // Revision 955') {
	err('This update can only be applied to OIDplus version 2.0.0.955!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: includes/classes/OIDplusObject.class.php
function writefile_1() {
	@$fp = fopen('includes/classes/OIDplusObject.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMiBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgppZiAoIWRlZmluZWQoJ0lOU0lERV9PSURQTFVTJykpIGRpZSgpOwoKYWJzdHJhY3QgY2xhc3MgT0lEcGx1c09iamVjdCBleHRlbmRzIE9JRHBsdXNCYXNlQ2xhc3MgewoJY29uc3QgVVVJ'));
	@fwrite($fp, base64_decode('RF9OQU1FQkFTRURfTlNfT2lkUGx1c01pc2MgPSAnYWQxNjU0ZTYtN2UxNS0xMWU0LTllZjYtNzhlM2I1ZmM3ZjIyJzsKCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHBhcnNlKCRub2RlX2lkKSB7IC8vIHBsZWFzZSBvdmVyd3JpdGUgdGhpcyBmdW5jdGlvbiEKCQlm'));
	@fwrite($fp, base64_decode('b3JlYWNoIChPSURwbHVzOjpnZXRFbmFibGVkT2JqZWN0VHlwZXMoKSBhcyAkb3QpIHsKCQkJdHJ5IHsKCQkJCSRnb29kID0gZmFsc2U7CgkJCQlpZiAoZ2V0X3BhcmVudF9jbGFzcygkb3QpID09ICdPSURwbHVzT2JqZWN0JykgewoJCQkJCSRyZWZsZWN0b3IgPSBu'));
	@fwrite($fp, base64_decode('ZXcgXFJlZmxlY3Rpb25NZXRob2QoJG90LCAncGFyc2UnKTsKCQkJCQkkaXNJbXBsZW1lbnRlZCA9ICgkcmVmbGVjdG9yLT5nZXREZWNsYXJpbmdDbGFzcygpLT5nZXROYW1lKCkgPT09ICRvdCk7CgkJCQkJaWYgKCRpc0ltcGxlbWVudGVkKSB7IC8vIGF2b2lkIGVu'));
	@fwrite($fp, base64_decode('ZGxlc3MgbG9vcCBpZiBwYXJzZSBpcyBub3Qgb3ZlcnJpZGVuCgkJCQkJCSRnb29kID0gdHJ1ZTsKCQkJCQl9CgkJCQl9CgkJCQkvLyBXZSBuZWVkIHRvIGRvIHRoZSB3b3JrYXJvdW5kIHdpdGggIiRnb29kIiwgb3RoZXJ3aXNlIFBIUHN0YW4gc2hvd3MKCQkJCS8v'));
	@fwrite($fp, base64_decode('ICJDYWxsIHRvIGFuIHVuZGVmaW5lZCBzdGF0aWMgbWV0aG9kIG9iamVjdDo6cGFyc2UoKSIKCQkJCWlmICgkZ29vZCAmJiAkb2JqID0gJG90OjpwYXJzZSgkbm9kZV9pZCkpIHJldHVybiAkb2JqOwoJCQl9IGNhdGNoIChFeGNlcHRpb24gJGUpIHt9CgkJfQoJCXJl'));
	@fwrite($fp, base64_decode('dHVybiBudWxsOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiAvKk9JRHBsdXNBbHRJZFtdKi8gZ2V0QWx0SWRzKCkgewoJCWlmICgkdGhpcy0+aXNSb290KCkpIHJldHVybiBhcnJheSgpOwoKCQkkaWRzID0gYXJyYXkoKTsKCQlpZiAoJHRoaXMtPm5zKCkgIT0gJ29pZCcp'));
	@fwrite($fp, base64_decode('IHsKCQkJLy8gQ3JlYXRlcyBhbiBPSURwbHVzLUhhc2gtT0lECgkJCSRzaWQgPSBPSURwbHVzOjpnZXRTeXN0ZW1JZCh0cnVlKTsKCQkJaWYgKCFlbXB0eSgkc2lkKSkgewoJCQkJJG5zX29pZCA9ICR0aGlzLT5nZXRQbHVnaW4oKS0+Z2V0TWFuaWZlc3QoKS0+Z2V0'));
	@fwrite($fp, base64_decode('T2lkKCk7CgkJCQlpZiAoc3RyX3N0YXJ0c193aXRoKCRuc19vaWQsICcxLjMuNi4xLjQuMS4zNzQ3Ni4yLjUuMi4nKSkgewoJCQkJCS8vIE9mZmljaWFsIFZpYVRoaW5rU29mdCBvYmplY3QgdHlwZSBwbHVnaW5zCgkJCQkJLy8gRm9yIGJhY2t3YXJkcyBjb21wYXRp'));
	@fwrite($fp, base64_decode('YmlsaXR5IHdpdGggZXhpc3RpbmcgSURzLAoJCQkJCS8vIHNldCB0aGUgaGFzaF9wYXlsb2FkIGFzICc8bmFtZXNwYWNlPjo8aWQ+JwoJCQkJCSRoYXNoX3BheWxvYWQgPSAkdGhpcy0+bm9kZUlkKHRydWUpOwoJCQkJfSBlbHNlIHsKCQkJCQkvLyBUaGlyZC1wYXJ0'));
	@fwrite($fp, base64_decode('eSBvYmplY3QgdHlwZSBwbHVnaW5zCgkJCQkJLy8gU2V0IHRoZSBoYXNoX3BheWxvYWQgYXMgJzxwbHVnaW4gb2lkPjo8aWQ+JwoJCQkJCSRoYXNoX3BheWxvYWQgPSAkbnNfb2lkLic6Jy4kdGhpcy0+bm9kZUlkKGZhbHNlKTsKCQkJCX0KCQkJCSRvaWQgPSAkc2lk'));
	@fwrite($fp, base64_decode('IC4gJy4nIC4gc21hbGxoYXNoKCRoYXNoX3BheWxvYWQpOwoJCQkJJGlkc1tdID0gbmV3IE9JRHBsdXNBbHRJZCgnb2lkJywgJG9pZCwgX0woJ09JRHBsdXMgSW5mb3JtYXRpb24gT2JqZWN0IElEJykpOwoJCQl9CgoJCQkvLyBNYWtlIGEgbmFtZWJhc2VkIFVVSUQs'));
	@fwrite($fp, base64_decode('IGJ1dC4uLgoJCQkvLyAuLi4gZXhjbHVkZSBHVUlELCBiZWNhdXNlIGEgR1VJRCBpcyBhbHJlYWR5IGEgR1VJRAoJCQkvLyAuLi4gZXhjbHVkZSBPSUQsIGJlY2F1c2UgYW4gT0lEIGFscmVhZHkgaGFzIGEgcmVjb3JkIFVVSURfTkFNRUJBU0VEX05TX09JRCBzZXQg'));
	@fwrite($fp, base64_decode('IGJ5IGNsYXNzIE9JRHBsdXNPaWQKCQkJaWYgKCR0aGlzLT5ucygpICE9ICdndWlkJykgewoJCQkJJGlkc1tdID0gbmV3IE9JRHBsdXNBbHRJZCgnZ3VpZCcsIGdlbl91dWlkX21kNV9uYW1lYmFzZWQoc2VsZjo6VVVJRF9OQU1FQkFTRURfTlNfT2lkUGx1c01pc2Ms'));
	@fwrite($fp, base64_decode('ICR0aGlzLT5ub2RlSWQoKSksIF9MKCdOYW1lIGJhc2VkIHZlcnNpb24gMyAvIE1ENSBVVUlEIHdpdGggbmFtZXNwYWNlICUxJywnVVVJRF9OQU1FQkFTRURfTlNfT2lkUGx1c01pc2MnKSk7CgkJCQkkaWRzW10gPSBuZXcgT0lEcGx1c0FsdElkKCdndWlkJywgZ2Vu'));
	@fwrite($fp, base64_decode('X3V1aWRfc2hhMV9uYW1lYmFzZWQoc2VsZjo6VVVJRF9OQU1FQkFTRURfTlNfT2lkUGx1c01pc2MsICR0aGlzLT5ub2RlSWQoKSksIF9MKCdOYW1lIGJhc2VkIHZlcnNpb24gNSAvIFNIQTEgVVVJRCB3aXRoIG5hbWVzcGFjZSAlMScsJ1VVSURfTkFNRUJBU0VEX05T'));
	@fwrite($fp, base64_decode('X09pZFBsdXNNaXNjJykpOwoJCQl9CgkJfQoJCXJldHVybiAkaWRzOwoJfQoKCXB1YmxpYyBhYnN0cmFjdCBzdGF0aWMgZnVuY3Rpb24gb2JqZWN0VHlwZVRpdGxlKCk7CgoJcHVibGljIGFic3RyYWN0IHN0YXRpYyBmdW5jdGlvbiBvYmplY3RUeXBlVGl0bGVTaG9y'));
	@fwrite($fp, base64_decode('dCgpOwoKCXB1YmxpYyBmdW5jdGlvbiBnZXRQbHVnaW4oKS8qOiA/T0lEcGx1c09iamVjdFR5cGVQbHVnaW4gKi8gewoJCSRyZXMgPSBudWxsOwoJCSRwbHVnaW5zID0gT0lEcGx1czo6Z2V0T2JqZWN0VHlwZVBsdWdpbnMoKTsKCQlmb3JlYWNoICgkcGx1Z2lucyBh'));
	@fwrite($fp, base64_decode('cyAkcGx1Z2luKSB7CgkJCWlmIChnZXRfY2xhc3MoJHRoaXMpID09ICRwbHVnaW46OmdldE9iamVjdFR5cGVDbGFzc05hbWUoJHRoaXMpKSB7CgkJCQlyZXR1cm4gJHBsdWdpbjsKCQkJfQoJCX0KCQlyZXR1cm4gJHJlczsKCX0KCglwdWJsaWMgYWJzdHJhY3Qgc3Rh'));
	@fwrite($fp, base64_decode('dGljIGZ1bmN0aW9uIG5zKCk7CgoJcHVibGljIGFic3RyYWN0IHN0YXRpYyBmdW5jdGlvbiByb290KCk7CgoJcHVibGljIGFic3RyYWN0IGZ1bmN0aW9uIGlzUm9vdCgpOwoKCXB1YmxpYyBhYnN0cmFjdCBmdW5jdGlvbiBub2RlSWQoJHdpdGhfbnM9dHJ1ZSk7CgoJ'));
	@fwrite($fp, base64_decode('cHVibGljIGFic3RyYWN0IGZ1bmN0aW9uIGFkZFN0cmluZygkc3RyKTsKCglwdWJsaWMgYWJzdHJhY3QgZnVuY3Rpb24gY3J1ZFNob3dJZChPSURwbHVzT2JqZWN0ICRwYXJlbnQpOwoKCXB1YmxpYyBmdW5jdGlvbiBjcnVkSW5zZXJ0UHJlZml4KCkgewoJCXJldHVy'));
	@fwrite($fp, base64_decode('biAnJzsKCX0KCglwdWJsaWMgZnVuY3Rpb24gY3J1ZEluc2VydFN1ZmZpeCgpIHsKCQlyZXR1cm4gJyc7Cgl9CgoJcHVibGljIGFic3RyYWN0IGZ1bmN0aW9uIGpzVHJlZU5vZGVOYW1lKE9JRHBsdXNPYmplY3QgJHBhcmVudCA9IG51bGwpOwoKCXB1YmxpYyBhYnN0'));
	@fwrite($fp, base64_decode('cmFjdCBmdW5jdGlvbiBkZWZhdWx0VGl0bGUoKTsKCglwdWJsaWMgYWJzdHJhY3QgZnVuY3Rpb24gaXNMZWFmTm9kZSgpOwoKCXB1YmxpYyBhYnN0cmFjdCBmdW5jdGlvbiBnZXRDb250ZW50UGFnZSgmJHRpdGxlLCAmJGNvbnRlbnQsICYkaWNvbik7CgoJcHVibGlj'));
	@fwrite($fp, base64_decode('IHN0YXRpYyBmdW5jdGlvbiBnZXRSYVJvb3RzKCRyYV9lbWFpbD1udWxsKSB7CgkJaWYgKCRyYV9lbWFpbCBpbnN0YW5jZW9mIE9JRHBsdXNSQSkgJHJhX2VtYWlsID0gJHJhX2VtYWlsLT5yYUVtYWlsKCk7CgoJCSRvdXQgPSBhcnJheSgpOwoKCQlpZiAoIU9JRHBs'));
	@fwrite($fp, base64_decode('dXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ09CSkVDVF9DQUNISU5HJywgdHJ1ZSkpIHsKCQkJaWYgKGlzX251bGwoJHJhX2VtYWlsKSkgewoJCQkJJHJlcyA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3Qgb0NoaWxkLmlkIGFzIGlkLCBvQ2hpbGQucmFf'));
	@fwrite($fp, base64_decode('ZW1haWwgYXMgY2hpbGRfbWFpbCwgb1BhcmVudC5yYV9lbWFpbCBhcyBwYXJlbnRfbWFpbCBmcm9tICMjI29iamVjdHMgYXMgb0NoaWxkICIuCgkJCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgImxlZnQgam9pbiAjIyNvYmplY3RzIGFzIG9QYXJlbnQgb24g'));
	@fwrite($fp, base64_decode('b0NoaWxkLnBhcmVudCA9IG9QYXJlbnQuaWQgIi4KCQkJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAib3JkZXIgYnkgIi5PSURwbHVzOjpkYigpLT5uYXRPcmRlcignb0NoaWxkLmlkJykpOwoJCQkJd2hpbGUgKCRyb3cgPSAkcmVzLT5mZXRjaF9hcnJheSgp'));
	@fwrite($fp, base64_decode('KSB7CgkJCQkJaWYgKCFPSURwbHVzOjphdXRoVXRpbHMoKS0+aXNSYUxvZ2dlZEluKCRyb3dbJ3BhcmVudF9tYWlsJ10pICYmIE9JRHBsdXM6OmF1dGhVdGlscygpLT5pc1JhTG9nZ2VkSW4oJHJvd1snY2hpbGRfbWFpbCddKSkgewoJCQkJCQkkeCA9IHNlbGY6OnBh'));
	@fwrite($fp, base64_decode('cnNlKCRyb3dbJ2lkJ10pOyAvLyBjYW4gYmUgRkFMU0UgaWYgbmFtZXNwYWNlIHdhcyBkaXNhYmxlZAoJCQkJCQlpZiAoJHgpICRvdXRbXSA9ICR4OwoJCQkJCX0KCQkJCX0KCQkJfSBlbHNlIHsKCQkJCSRyZXMgPSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0'));
	@fwrite($fp, base64_decode('IG9DaGlsZC5pZCBhcyBpZCBmcm9tICMjI29iamVjdHMgYXMgb0NoaWxkICIuCgkJCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgImxlZnQgam9pbiAjIyNvYmplY3RzIGFzIG9QYXJlbnQgb24gb0NoaWxkLnBhcmVudCA9IG9QYXJlbnQuaWQgIi4KCQkJCSAg'));
	@fwrite($fp, base64_decode('ICAgICAgICAgICAgICAgICAgICAgICAgICAid2hlcmUgKCIuT0lEcGx1czo6ZGIoKS0+Z2V0U2xhbmcoKS0+aXNOdWxsRnVuY3Rpb24oJ29QYXJlbnQucmFfZW1haWwnLCInJyIpLiIgPD4gPyBhbmQgIi4KCQkJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBP'));
	@fwrite($fp, base64_decode('SURwbHVzOjpkYigpLT5nZXRTbGFuZygpLT5pc051bGxGdW5jdGlvbignb0NoaWxkLnJhX2VtYWlsJywiJyciKS4iID0gPykgb3IgIi4KCQkJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgKG9QYXJlbnQucmFfZW1haWwgaXMgbnVsbCBhbmQgIi5P'));
	@fwrite($fp, base64_decode('SURwbHVzOjpkYigpLT5nZXRTbGFuZygpLT5pc051bGxGdW5jdGlvbignb0NoaWxkLnJhX2VtYWlsJywiJyciKS4iID0gPykgIi4KCQkJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAib3JkZXIgYnkgIi5PSURwbHVzOjpkYigpLT5uYXRPcmRlcignb0NoaWxk'));
	@fwrite($fp, base64_decode('LmlkJyksIGFycmF5KCRyYV9lbWFpbCwgJHJhX2VtYWlsLCAkcmFfZW1haWwpKTsKCQkJCXdoaWxlICgkcm93ID0gJHJlcy0+ZmV0Y2hfYXJyYXkoKSkgewoJCQkJCSR4ID0gc2VsZjo6cGFyc2UoJHJvd1snaWQnXSk7IC8vIGNhbiBiZSBGQUxTRSBpZiBuYW1lc3Bh'));
	@fwrite($fp, base64_decode('Y2Ugd2FzIGRpc2FibGVkCgkJCQkJaWYgKCR4KSAkb3V0W10gPSBzZWxmOjpwYXJzZSgkcm93WydpZCddKTsKCQkJCX0KCQkJfQoJCX0gZWxzZSB7CgkJCWlmIChpc19udWxsKCRyYV9lbWFpbCkpIHsKCQkJCSRyYV9tYWlsc190b19jaGVjayA9IE9JRHBsdXM6OmF1'));
	@fwrite($fp, base64_decode('dGhVdGlscygpLT5sb2dnZWRJblJhTGlzdCgpOwoJCQkJaWYgKGNvdW50KCRyYV9tYWlsc190b19jaGVjaykgPT0gMCkgcmV0dXJuICRvdXQ7CgkJCX0gZWxzZSB7CgkJCQkkcmFfbWFpbHNfdG9fY2hlY2sgPSBhcnJheSgkcmFfZW1haWwpOwoJCQl9CgoJCQlzZWxm'));
	@fwrite($fp, base64_decode('OjpidWlsZE9iamVjdEluZm9ybWF0aW9uQ2FjaGUoKTsKCgkJCWZvcmVhY2ggKCRyYV9tYWlsc190b19jaGVjayBhcyAkY2hlY2tfcmFfbWFpbCkgewoJCQkJJG91dF9wYXJ0ID0gYXJyYXkoKTsKCgkJCQlmb3JlYWNoIChzZWxmOjokb2JqZWN0X2luZm9fY2FjaGUg'));
	@fwrite($fp, base64_decode('YXMgJGlkID0+IGxpc3QoJGNvbmZpZGVudGlhbCwgJHBhcmVudCwgJHJhX2VtYWlsLCAkdGl0bGUpKSB7CgkJCQkJLy8gSWYgdGhlIE9JRCBSQSBpcyB0aGUgUkEgd2UgYXJlIHNlYXJjaGluZywgdGhlbiBhZGQgdGhlIG9iamVjdCB0byB0aGUgY2hvaWNlIGxpc3QK'));
	@fwrite($fp, base64_decode('CQkJCQlpZiAoJHJhX2VtYWlsID09ICRjaGVja19yYV9tYWlsKSAkb3V0X3BhcnRbXSA9ICRpZDsKCQkJCX0KCgkJCQlmb3JlYWNoIChzZWxmOjokb2JqZWN0X2luZm9fY2FjaGUgYXMgJGlkID0+IGxpc3QoJGNvbmZpZGVudGlhbCwgJHBhcmVudCwgJHJhX2VtYWls'));
	@fwrite($fp, base64_decode('LCAkdGl0bGUpKSB7CgkJCQkJaWYgKGlzc2V0KHNlbGY6OiRvYmplY3RfaW5mb19jYWNoZVskcGFyZW50XSkpIHsKCQkJCQkJaWYgKHNlbGY6OiRvYmplY3RfaW5mb19jYWNoZVskcGFyZW50XVtzZWxmOjpDQUNIRV9SQV9FTUFJTF0gPT0gJHJhX2VtYWlsKSB7CgkJ'));
	@fwrite($fp, base64_decode('CQkJCQkvLyBpZiB0aGUgcGFyZW50IGhhcyB0aGUgc2FtZSBSQSwgdGhlbiB0aGlzIE9JRCBjYW5ub3QgYmUgYSByb290ID0+IHJlbW92ZSB0aGUgZWxlbWVudCBmcm9tIHRoZSBjaG9pY2UgbGlzdAoJCQkJCQkJZm9yZWFjaCAoYXJyYXlfa2V5cygkb3V0X3BhcnQs'));
	@fwrite($fp, base64_decode('ICRpZCkgYXMgJGtleSkgdW5zZXQoJG91dF9wYXJ0WyRrZXldKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCgkJCQluYXRzb3J0KCRvdXRfcGFydCk7CgoJCQkJZm9yZWFjaCAoJG91dF9wYXJ0IGFzICRpZCkgewoJCQkJCSRvYmogPSBzZWxmOjpwYXJzZSgkaWQpOwoJ'));
	@fwrite($fp, base64_decode('CQkJCWlmICgkb2JqKSAkb3V0W10gPSAkb2JqOwoJCQkJfQoJCQl9CgkJfQoKCQlyZXR1cm4gJG91dDsKCX0KCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEFsbE5vbkNvbmZpZGVudGlhbCgpIHsKCQkkb3V0ID0gYXJyYXkoKTsKCgkJaWYgKCFPSURwbHVzOjpi'));
	@fwrite($fp, base64_decode('YXNlQ29uZmlnKCktPmdldFZhbHVlKCdPQkpFQ1RfQ0FDSElORycsIHRydWUpKSB7CgkJCSRyZXMgPSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0IGlkIGZyb20gIyMjb2JqZWN0cyB3aGVyZSBjb25maWRlbnRpYWwgPSA/IG9yZGVyIGJ5ICIuT0lEcGx1czo6'));
	@fwrite($fp, base64_decode('ZGIoKS0+bmF0T3JkZXIoJ2lkJyksIGFycmF5KGZhbHNlKSk7CgoJCQl3aGlsZSAoJHJvdyA9ICRyZXMtPmZldGNoX2FycmF5KCkpIHsKCQkJCSRvYmogPSBzZWxmOjpwYXJzZSgkcm93WydpZCddKTsgLy8gd2lsbCBiZSBOVUxMIGlmIHRoZSBvYmplY3QgdHlwZSBp'));
	@fwrite($fp, base64_decode('cyBub3QgcmVnaXN0ZXJlZAoJCQkJaWYgKCRvYmogJiYgKCEkb2JqLT5pc0NvbmZpZGVudGlhbCgpKSkgewoJCQkJCSRvdXRbXSA9ICRyb3dbJ2lkJ107CgkJCQl9CgkJCX0KCQl9IGVsc2UgewoJCQlzZWxmOjpidWlsZE9iamVjdEluZm9ybWF0aW9uQ2FjaGUoKTsK'));
	@fwrite($fp, base64_decode('CgkJCWZvcmVhY2ggKHNlbGY6OiRvYmplY3RfaW5mb19jYWNoZSBhcyAkaWQgPT4gbGlzdCgkY29uZmlkZW50aWFsLCAkcGFyZW50LCAkcmFfZW1haWwsICR0aXRsZSkpIHsKCQkJCWlmICghJGNvbmZpZGVudGlhbCkgewoJCQkJCSRvYmogPSBzZWxmOjpwYXJzZSgk'));
	@fwrite($fp, base64_decode('aWQpOyAvLyB3aWxsIGJlIE5VTEwgaWYgdGhlIG9iamVjdCB0eXBlIGlzIG5vdCByZWdpc3RlcmVkCgkJCQkJaWYgKCRvYmogJiYgKCEkb2JqLT5pc0NvbmZpZGVudGlhbCgpKSkgewoJCQkJCQkkb3V0W10gPSAkaWQ7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoKCQly'));
	@fwrite($fp, base64_decode('ZXR1cm4gJG91dDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gaXNDb25maWRlbnRpYWwoKSB7CgkJaWYgKCFPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdPQkpFQ1RfQ0FDSElORycsIHRydWUpKSB7CgkJCS8vc3RhdGljICRjb25maWRlbnRpYWxfY2FjaGUg'));
	@fwrite($fp, base64_decode('PSBhcnJheSgpOwoJCQkkY3VyaWQgPSAkdGhpcy0+bm9kZUlkKCk7CgkJCS8vJG9yaWdfY3VyaWQgPSAkY3VyaWQ7CgkJCS8vaWYgKGlzc2V0KCRjb25maWRlbnRpYWxfY2FjaGVbJGN1cmlkXSkpIHJldHVybiAkY29uZmlkZW50aWFsX2NhY2hlWyRjdXJpZF07CgkJ'));
	@fwrite($fp, base64_decode('CS8vIFJlY3Vyc2l2ZWx5IHNlYXJjaCBmb3IgdGhlIGNvbmZpZGVudGlhbCBmbGFnIGluIHRoZSBwYXJlbnRzCgkJCXdoaWxlICgoJHJlcyA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgcGFyZW50LCBjb25maWRlbnRpYWwgZnJvbSAjIyNvYmplY3RzIHdo'));
	@fwrite($fp, base64_decode('ZXJlIGlkID0gPyIsIGFycmF5KCRjdXJpZCkpKS0+YW55KCkpIHsKCQkJCSRyb3cgPSAkcmVzLT5mZXRjaF9hcnJheSgpOwoJCQkJaWYgKCRyb3dbJ2NvbmZpZGVudGlhbCddKSB7CgkJCQkJLy8kY29uZmlkZW50aWFsX2NhY2hlWyRjdXJpZF0gPSB0cnVlOwoJCQkJ'));
	@fwrite($fp, base64_decode('CS8vJGNvbmZpZGVudGlhbF9jYWNoZVskb3JpZ19jdXJpZF0gPSB0cnVlOwoJCQkJCXJldHVybiB0cnVlOwoJCQkJfSBlbHNlIHsKCQkJCQkvLyRjb25maWRlbnRpYWxfY2FjaGVbJGN1cmlkXSA9IGZhbHNlOwoJCQkJfQoJCQkJJGN1cmlkID0gJHJvd1sncGFyZW50'));
	@fwrite($fp, base64_decode('J107CgkJCQkvL2lmIChpc3NldCgkY29uZmlkZW50aWFsX2NhY2hlWyRjdXJpZF0pKSB7CgkJCQkJLy8kY29uZmlkZW50aWFsX2NhY2hlWyRvcmlnX2N1cmlkXSA9ICRjb25maWRlbnRpYWxfY2FjaGVbJGN1cmlkXTsKCQkJCQkvL3JldHVybiAkY29uZmlkZW50aWFs'));
	@fwrite($fp, base64_decode('X2NhY2hlWyRjdXJpZF07CgkJCQkvL30KCQkJfQoKCQkJLy8kY29uZmlkZW50aWFsX2NhY2hlWyRvcmlnX2N1cmlkXSA9IGZhbHNlOwoJCQlyZXR1cm4gZmFsc2U7CgkJfSBlbHNlIHsKCQkJc2VsZjo6YnVpbGRPYmplY3RJbmZvcm1hdGlvbkNhY2hlKCk7CgoJCQkk'));
	@fwrite($fp, base64_decode('Y3VyaWQgPSAkdGhpcy0+bm9kZUlkKCk7CgkJCS8vIFJlY3Vyc2l2ZWx5IHNlYXJjaCBmb3IgdGhlIGNvbmZpZGVudGlhbCBmbGFnIGluIHRoZSBwYXJlbnRzCgkJCXdoaWxlIChpc3NldChzZWxmOjokb2JqZWN0X2luZm9fY2FjaGVbJGN1cmlkXSkpIHsKCQkJCWlm'));
	@fwrite($fp, base64_decode('IChzZWxmOjokb2JqZWN0X2luZm9fY2FjaGVbJGN1cmlkXVtzZWxmOjpDQUNIRV9DT05GSURFTlRJQUxdKSByZXR1cm4gdHJ1ZTsKCQkJCSRjdXJpZCA9IHNlbGY6OiRvYmplY3RfaW5mb19jYWNoZVskY3VyaWRdW3NlbGY6OkNBQ0hFX1BBUkVOVF07CgkJCX0KCQkJ'));
	@fwrite($fp, base64_decode('cmV0dXJuIGZhbHNlOwoJCX0KCX0KCglwdWJsaWMgZnVuY3Rpb24gaXNDaGlsZE9mKE9JRHBsdXNPYmplY3QgJG9iaikgewoJCWlmICghT0lEcGx1czo6YmFzZUNvbmZpZygpLT5nZXRWYWx1ZSgnT0JKRUNUX0NBQ0hJTkcnLCB0cnVlKSkgewoJCQkkY3VyaWQgPSAk'));
	@fwrite($fp, base64_decode('dGhpcy0+bm9kZUlkKCk7CgkJCXdoaWxlICgoJHJlcyA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgcGFyZW50IGZyb20gIyMjb2JqZWN0cyB3aGVyZSBpZCA9ID8iLCBhcnJheSgkY3VyaWQpKSktPmFueSgpKSB7CgkJCQkkcm93ID0gJHJlcy0+ZmV0Y2hf'));
	@fwrite($fp, base64_decode('YXJyYXkoKTsKCQkJCWlmICgkY3VyaWQgPT0gJG9iai0+bm9kZUlkKCkpIHJldHVybiB0cnVlOwoJCQkJJGN1cmlkID0gJHJvd1sncGFyZW50J107CgkJCX0KCQkJcmV0dXJuIGZhbHNlOwoJCX0gZWxzZSB7CgkJCXNlbGY6OmJ1aWxkT2JqZWN0SW5mb3JtYXRpb25D'));
	@fwrite($fp, base64_decode('YWNoZSgpOwoKCQkJJGN1cmlkID0gJHRoaXMtPm5vZGVJZCgpOwoJCQl3aGlsZSAoaXNzZXQoc2VsZjo6JG9iamVjdF9pbmZvX2NhY2hlWyRjdXJpZF0pKSB7CgkJCQlpZiAoJGN1cmlkID09ICRvYmotPm5vZGVJZCgpKSByZXR1cm4gdHJ1ZTsKCQkJCSRjdXJpZCA9'));
	@fwrite($fp, base64_decode('IHNlbGY6OiRvYmplY3RfaW5mb19jYWNoZVskY3VyaWRdW3NlbGY6OkNBQ0hFX1BBUkVOVF07CgkJCX0KCQkJcmV0dXJuIGZhbHNlOwoJCX0KCX0KCglwdWJsaWMgZnVuY3Rpb24gZ2V0Q2hpbGRyZW4oKSB7CgkJJG91dCA9IGFycmF5KCk7CgkJaWYgKCFPSURwbHVz'));
	@fwrite($fp, base64_decode('OjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdPQkpFQ1RfQ0FDSElORycsIHRydWUpKSB7CgkJCSRyZXMgPSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0IGlkIGZyb20gIyMjb2JqZWN0cyB3aGVyZSBwYXJlbnQgPSA/IiwgYXJyYXkoJHRoaXMtPm5vZGVJZCgp'));
	@fwrite($fp, base64_decode('KSk7CgkJCXdoaWxlICgkcm93ID0gJHJlcy0+ZmV0Y2hfYXJyYXkoKSkgewoJCQkJJG9iaiA9IHNlbGY6OnBhcnNlKCRyb3dbJ2lkJ10pOwoJCQkJaWYgKCEkb2JqKSBjb250aW51ZTsKCQkJCSRvdXRbXSA9ICRvYmo7CgkJCX0KCQl9IGVsc2UgewoJCQlzZWxmOjpi'));
	@fwrite($fp, base64_decode('dWlsZE9iamVjdEluZm9ybWF0aW9uQ2FjaGUoKTsKCgkJCWZvcmVhY2ggKHNlbGY6OiRvYmplY3RfaW5mb19jYWNoZSBhcyAkaWQgPT4gbGlzdCgkY29uZmlkZW50aWFsLCAkcGFyZW50LCAkcmFfZW1haWwsICR0aXRsZSkpIHsKCQkJCWlmICgkcGFyZW50ID09ICR0'));
	@fwrite($fp, base64_decode('aGlzLT5ub2RlSWQoKSkgewoJCQkJCSRvYmogPSBzZWxmOjpwYXJzZSgkaWQpOwoJCQkJCWlmICghJG9iaikgY29udGludWU7CgkJCQkJJG91dFtdID0gJG9iajsKCQkJCX0KCQkJfQoJCX0KCQlyZXR1cm4gJG91dDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZ2V0UmEo'));
	@fwrite($fp, base64_decode('KSB7CgkJcmV0dXJuIG5ldyBPSURwbHVzUkEoJHRoaXMtPmdldFJhTWFpbCgpKTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gdXNlckhhc1JlYWRSaWdodHMoJHJhX2VtYWlsPW51bGwpIHsKCQlpZiAoJHJhX2VtYWlsIGluc3RhbmNlb2YgT0lEcGx1c1JBKSAkcmFfZW1h'));
	@fwrite($fp, base64_decode('aWwgPSAkcmFfZW1haWwtPnJhRW1haWwoKTsKCgkJLy8gSWYgaXQgaXMgbm90IGNvbmZpZGVudGlhbCwgZXZlcnlib2R5IGNhbiByZWFkL3NlZSBpdC4KCQkvLyBOb3RlOiBUaGlzIGFsc28gY2hlY2tzIGlmIHN1cGVyaW9yIE9JRHMgYXJlIGNvbmZpZGVudGlhbC4K'));
	@fwrite($fp, base64_decode('CQlpZiAoISR0aGlzLT5pc0NvbmZpZGVudGlhbCgpKSByZXR1cm4gdHJ1ZTsKCgkJaWYgKGlzX251bGwoJHJhX2VtYWlsKSkgewoJCQkvLyBBZG1pbiBtYXkgZG8gZXZlcnl0aGluZwoJCQlpZiAoT0lEcGx1czo6YXV0aFV0aWxzKCktPmlzQWRtaW5Mb2dnZWRJbigp'));
	@fwrite($fp, base64_decode('KSByZXR1cm4gdHJ1ZTsKCgkJCS8vIElmIHRoZSBSQSBpcyBsb2dnZWQgaW4sIHRoZW4gdGhleSBjYW4gc2VlIHRoZSBPSUQuCgkJCWlmIChPSURwbHVzOjphdXRoVXRpbHMoKS0+aXNSYUxvZ2dlZEluKCR0aGlzLT5nZXRSYU1haWwoKSkpIHJldHVybiB0cnVlOwoJ'));
	@fwrite($fp, base64_decode('CX0gZWxzZSB7CgkJCS8vIElmIHRoaXMgT0lEIGJlbG9uZ3MgdG8gdGhlIHJlcXVlc3RlZCBSQSwgdGhlbiB0aGV5IG1heSBzZWUgaXQuCgkJCWlmICgkdGhpcy0+Z2V0UmFNYWlsKCkgPT0gJHJhX2VtYWlsKSByZXR1cm4gdHJ1ZTsKCQl9CgoJCS8vIElmIHNvbWVv'));
	@fwrite($fp, base64_decode('bmUgaGFzIHJpZ2h0cyB0byBhbiBvYmplY3QgYmVsb3cgb3VyIGNvbmZpZGVudGlhbCBub2RlLAoJCS8vIHdlIGxldCBoaW0gc2VlIHRoZSBjb25maWRlbnRpYWwgbm9kZSwKCQkvLyBPdGhlcndpc2UgaGUgY291bGQgbm90IGJyb3dzZSB0aHJvdWdoIHRvIGhpcyBv'));
	@fwrite($fp, base64_decode('d24gbm9kZS4KCQkkcm9vdHMgPSAkdGhpcy0+Z2V0UmFSb290cygkcmFfZW1haWwpOwoJCWZvcmVhY2ggKCRyb290cyBhcyAkcm9vdCkgewoJCQlpZiAoJHJvb3QtPmlzQ2hpbGRPZigkdGhpcykpIHJldHVybiB0cnVlOwoJCX0KCgkJcmV0dXJuIGZhbHNlOwoJfQoK'));
	@fwrite($fp, base64_decode('CXB1YmxpYyBmdW5jdGlvbiBnZXRJY29uKCRyb3c9bnVsbCkgewoJCSRuYW1lc3BhY2UgPSAkdGhpcy0+bnMoKTsgLy8gbXVzdCB1c2UgJHRoaXMsIG5vdCBzZWxmOjosIG90aGVyd2lzZSB0aGUgdmlydHVhbCBtZXRob2Qgd2lsbCBub3QgYmUgY2FsbGVkCgoJCWlm'));
	@fwrite($fp, base64_decode('IChpc19udWxsKCRyb3cpKSB7CgkJCSRyYV9lbWFpbCA9ICR0aGlzLT5nZXRSYU1haWwoKTsKCQl9IGVsc2UgewoJCQkkcmFfZW1haWwgPSAkcm93WydyYV9lbWFpbCddOwoJCX0KCQkvLyBUT0RPOiBoYXZlIGRpZmZlcmVudCBpY29ucyBmb3IgTGVhZi1Ob2RlcwoK'));
	@fwrite($fp, base64_decode('CQkkZGlycyA9IGdsb2IoT0lEcGx1czo6bG9jYWxwYXRoKCkuJ3BsdWdpbnMvJy4nKicuJy9vYmplY3RUeXBlcy8nLiRuYW1lc3BhY2UuJy8nKTsKCgkJaWYgKGNvdW50KCRkaXJzKSA9PSAwKSByZXR1cm4gbnVsbDsgLy8gZGVmYXVsdCBpY29uIChmb2xkZXIpCgoJ'));
	@fwrite($fp, base64_decode('CSRkaXIgPSBzdWJzdHIoJGRpcnNbMF0sIHN0cmxlbihPSURwbHVzOjpsb2NhbHBhdGgoKSkpOwoKCQkvLyBXZSB1c2UgJHRoaXM6OiBpbnN0ZWFkIG9mIHNlbGY6OiAsIGJlY2F1c2Ugd2Ugd2FudCB0byBjYWxsIHRoZSBvdmVycmlkZGVuIG1ldGhvZHMKCQlpZiAo'));
	@fwrite($fp, base64_decode('T0lEcGx1czo6YXV0aFV0aWxzKCktPmlzUmFMb2dnZWRJbigkcmFfZW1haWwpKSB7CgkJCSRpY29uID0gJGRpci4nLycuJHRoaXM6OnRyZWVJY29uRmlsZW5hbWUoJ293bicpOwoJCX0gZWxzZSB7CgkJCSRpY29uID0gJGRpci4nLycuJHRoaXM6OnRyZWVJY29uRmls'));
	@fwrite($fp, base64_decode('ZW5hbWUoJ2dlbmVyYWwnKTsKCQl9CgoJCWlmICghZmlsZV9leGlzdHMoJGljb24pKSByZXR1cm4gbnVsbDsgLy8gZGVmYXVsdCBpY29uIChmb2xkZXIpCgoJCXJldHVybiAkaWNvbjsKCX0KCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGV4aXN0cygkaWQpIHsKCQlp'));
	@fwrite($fp, base64_decode('ZiAoIU9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ09CSkVDVF9DQUNISU5HJywgdHJ1ZSkpIHsKCQkJJHJlcyA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgaWQgZnJvbSAjIyNvYmplY3RzIHdoZXJlIGlkID0gPyIsIGFycmF5KCRpZCkpOwoJ'));
	@fwrite($fp, base64_decode('CQlyZXR1cm4gJHJlcy0+YW55KCk7CgkJfSBlbHNlIHsKCQkJc2VsZjo6YnVpbGRPYmplY3RJbmZvcm1hdGlvbkNhY2hlKCk7CgkJCXJldHVybiBpc3NldChzZWxmOjokb2JqZWN0X2luZm9fY2FjaGVbJGlkXSk7CgkJfQoJfQoKCS8vIEdldCBwYXJlbnQgZ2l2ZXMg'));
	@fwrite($fp, base64_decode('dGhlIG5leHQgcG9zc2libGUgcGFyZW50IHdoaWNoIGlzIEVYSVNUSU5HIGluIE9JRHBsdXMKCS8vIEl0IGRvZXMgbm90IGdpdmUgdGhlIGltbWVkaWF0ZSBwYXJlbnQKCXB1YmxpYyBmdW5jdGlvbiBnZXRQYXJlbnQoKSB7CgkJaWYgKCFPSURwbHVzOjpiYXNlQ29u'));
	@fwrite($fp, base64_decode('ZmlnKCktPmdldFZhbHVlKCdPQkpFQ1RfQ0FDSElORycsIHRydWUpKSB7CgkJCSRyZXMgPSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0IHBhcmVudCBmcm9tICMjI29iamVjdHMgd2hlcmUgaWQgPSA/IiwgYXJyYXkoJHRoaXMtPm5vZGVJZCgpKSk7CgkJCWlm'));
	@fwrite($fp, base64_decode('ICghJHJlcy0+YW55KCkpIHJldHVybiBudWxsOwoJCQkkcm93ID0gJHJlcy0+ZmV0Y2hfYXJyYXkoKTsKCQkJJHBhcmVudCA9ICRyb3dbJ3BhcmVudCddOwoJCQkkb2JqID0gT0lEcGx1c09iamVjdDo6cGFyc2UoJHBhcmVudCk7CgkJCWlmICgkb2JqKSByZXR1cm4g'));
	@fwrite($fp, base64_decode('JG9iajsKCQkJLy8gVE9ETzogQWxzbyBpbXBsZW1lbnQgb25lX3VwKCkgbGlrZSBiZWxvdwoJCX0gZWxzZSB7CgkJCXNlbGY6OmJ1aWxkT2JqZWN0SW5mb3JtYXRpb25DYWNoZSgpOwoJCQlpZiAoaXNzZXQoc2VsZjo6JG9iamVjdF9pbmZvX2NhY2hlWyR0aGlzLT5u'));
	@fwrite($fp, base64_decode('b2RlSWQoKV0pKSB7CgkJCQkkcGFyZW50ID0gc2VsZjo6JG9iamVjdF9pbmZvX2NhY2hlWyR0aGlzLT5ub2RlSWQoKV1bc2VsZjo6Q0FDSEVfUEFSRU5UXTsKCQkJCSRvYmogPSBPSURwbHVzT2JqZWN0OjpwYXJzZSgkcGFyZW50KTsKCQkJCWlmICgkb2JqKSByZXR1'));
	@fwrite($fp, base64_decode('cm4gJG9iajsKCQkJfQoKCQkJLy8gSWYgdGhpcyBPSUQgZG9lcyBub3QgZXhpc3QsIHRoZSBTUUwgcXVlcnkgInNlbGVjdCBwYXJlbnQgZnJvbSAuLi4iIGRvZXMgbm90IHdvcmsuIFNvIHdlIHRyeSB0byBmaW5kIHRoZSBuZXh0IHBvc3NpYmxlIHBhcmVudCB1c2lu'));
	@fwrite($fp, base64_decode('ZyBvbmVfdXAoKQoJCQkkY3VyID0gJHRoaXMtPm9uZV91cCgpOwoJCQlpZiAoISRjdXIpIHJldHVybiBudWxsOwoJCQlkbyB7CgkJCQkvLyBmaW5kRml0dGluZygpIGNoZWNrcyBpZiB0aGF0IE9JRCBleGlzdHMKCQkJCWlmICgkZml0dGluZyA9IHNlbGY6OmZpbmRG'));
	@fwrite($fp, base64_decode('aXR0aW5nKCRjdXItPm5vZGVJZCgpKSkgcmV0dXJuICRmaXR0aW5nOwoKCQkJCSRwcmV2ID0gJGN1cjsKCQkJCSRjdXIgPSAkY3VyLT5vbmVfdXAoKTsKCQkJCWlmICghJGN1cikgcmV0dXJuIG51bGw7CgkJCX0gd2hpbGUgKCRwcmV2ICE9ICRjdXIpOwoKCQkJcmV0'));
	@fwrite($fp, base64_decode('dXJuIG51bGw7CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXRSYU1haWwoKSB7CgkJaWYgKCFPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdPQkpFQ1RfQ0FDSElORycsIHRydWUpKSB7CgkJCSRyZXMgPSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2Vs'));
	@fwrite($fp, base64_decode('ZWN0IHJhX2VtYWlsIGZyb20gIyMjb2JqZWN0cyB3aGVyZSBpZCA9ID8iLCBhcnJheSgkdGhpcy0+bm9kZUlkKCkpKTsKCQkJaWYgKCEkcmVzLT5hbnkoKSkgcmV0dXJuIG51bGw7CgkJCSRyb3cgPSAkcmVzLT5mZXRjaF9hcnJheSgpOwoJCQlyZXR1cm4gJHJvd1sn'));
	@fwrite($fp, base64_decode('cmFfZW1haWwnXTsKCQl9IGVsc2UgewoJCQlzZWxmOjpidWlsZE9iamVjdEluZm9ybWF0aW9uQ2FjaGUoKTsKCQkJaWYgKGlzc2V0KHNlbGY6OiRvYmplY3RfaW5mb19jYWNoZVskdGhpcy0+bm9kZUlkKCldKSkgewoJCQkJcmV0dXJuIHNlbGY6OiRvYmplY3RfaW5m'));
	@fwrite($fp, base64_decode('b19jYWNoZVskdGhpcy0+bm9kZUlkKCldW3NlbGY6OkNBQ0hFX1JBX0VNQUlMXTsKCQkJfQoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXRUaXRsZSgpIHsKCQlpZiAoIU9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ09C'));
	@fwrite($fp, base64_decode('SkVDVF9DQUNISU5HJywgdHJ1ZSkpIHsKCQkJJHJlcyA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgdGl0bGUgZnJvbSAjIyNvYmplY3RzIHdoZXJlIGlkID0gPyIsIGFycmF5KCR0aGlzLT5ub2RlSWQoKSkpOwoJCQlpZiAoISRyZXMtPmFueSgpKSByZXR1'));
	@fwrite($fp, base64_decode('cm4gbnVsbDsKCQkJJHJvdyA9ICRyZXMtPmZldGNoX2FycmF5KCk7CgkJCXJldHVybiAkcm93Wyd0aXRsZSddOwoJCX0gZWxzZSB7CgkJCXNlbGY6OmJ1aWxkT2JqZWN0SW5mb3JtYXRpb25DYWNoZSgpOwoJCQlpZiAoaXNzZXQoc2VsZjo6JG9iamVjdF9pbmZvX2Nh'));
	@fwrite($fp, base64_decode('Y2hlWyR0aGlzLT5ub2RlSWQoKV0pKSB7CgkJCQlyZXR1cm4gc2VsZjo6JG9iamVjdF9pbmZvX2NhY2hlWyR0aGlzLT5ub2RlSWQoKV1bc2VsZjo6Q0FDSEVfVElUTEVdOwoJCQl9CgkJCXJldHVybiBmYWxzZTsKCQl9Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHVzZXJI'));
	@fwrite($fp, base64_decode('YXNQYXJlbnRhbFdyaXRlUmlnaHRzKCRyYV9lbWFpbD1udWxsKSB7CgkJaWYgKCRyYV9lbWFpbCBpbnN0YW5jZW9mIE9JRHBsdXNSQSkgJHJhX2VtYWlsID0gJHJhX2VtYWlsLT5yYUVtYWlsKCk7CgoJCWlmIChpc19udWxsKCRyYV9lbWFpbCkpIHsKCQkJaWYgKE9J'));
	@fwrite($fp, base64_decode('RHBsdXM6OmF1dGhVdGlscygpLT5pc0FkbWluTG9nZ2VkSW4oKSkgcmV0dXJuIHRydWU7CgkJfQoKCQkkb2JqUGFyZW50ID0gJHRoaXMtPmdldFBhcmVudCgpOwoJCWlmICghJG9ialBhcmVudCkgcmV0dXJuIGZhbHNlOwoJCXJldHVybiAkb2JqUGFyZW50LT51c2Vy'));
	@fwrite($fp, base64_decode('SGFzV3JpdGVSaWdodHMoJHJhX2VtYWlsKTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gdXNlckhhc1dyaXRlUmlnaHRzKCRyYV9lbWFpbD1udWxsKSB7CgkJaWYgKCRyYV9lbWFpbCBpbnN0YW5jZW9mIE9JRHBsdXNSQSkgJHJhX2VtYWlsID0gJHJhX2VtYWlsLT5yYUVt'));
	@fwrite($fp, base64_decode('YWlsKCk7CgoJCWlmIChpc19udWxsKCRyYV9lbWFpbCkpIHsKCQkJaWYgKE9JRHBsdXM6OmF1dGhVdGlscygpLT5pc0FkbWluTG9nZ2VkSW4oKSkgcmV0dXJuIHRydWU7CgkJCXJldHVybiBPSURwbHVzOjphdXRoVXRpbHMoKS0+aXNSYUxvZ2dlZEluKCR0aGlzLT5n'));
	@fwrite($fp, base64_decode('ZXRSYU1haWwoKSk7CgkJfSBlbHNlIHsKCQkJcmV0dXJuICR0aGlzLT5nZXRSYU1haWwoKSA9PSAkcmFfZW1haWw7CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBkaXN0YW5jZSgkdG8pIHsKCQlyZXR1cm4gbnVsbDsgLy8gbm90IGltcGxlbWVudGVkCgl9CgoJcHVi'));
	@fwrite($fp, base64_decode('bGljIGZ1bmN0aW9uIGVxdWFscygkb2JqKSB7CgkJaWYgKCFpc19vYmplY3QoJG9iaikpICRvYmogPSBPSURwbHVzT2JqZWN0OjpwYXJzZSgkb2JqKTsKCQlpZiAoISgkb2JqIGluc3RhbmNlb2YgJHRoaXMpKSByZXR1cm4gZmFsc2U7CgoJCSRkaXN0YW5jZSA9ICR0'));
	@fwrite($fp, base64_decode('aGlzLT5kaXN0YW5jZSgkb2JqKTsKCQlpZiAoaXNfbnVtZXJpYygkZGlzdGFuY2UpKSByZXR1cm4gJGRpc3RhbmNlID09PSAwOyAvLyBpZiB0aGUgZGlzdGFuY2UgZnVuY3Rpb24gaXMgaW1wbGVtZW50ZWQsIHVzZSBpdAoKCQlyZXR1cm4gJHRoaXMtPm5vZGVJZCgp'));
	@fwrite($fp, base64_decode('ID09ICRvYmotPm5vZGVJZCgpOyAvLyBvdGhlcndpc2UgY29tcGFyZSB0aGUgbm9kZSBpZCBjYXNlLXNlbnNpdGl2ZQoJfQoKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZmluZEZpdHRpbmcoJGlkKSB7CgkJJG9iaiA9IE9JRHBsdXNPYmplY3Q6OnBhcnNlKCRpZCk7'));
	@fwrite($fp, base64_decode('CgkJaWYgKCEkb2JqKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnZmluZEZpdHRpbmc6IFBhcnNlIGZhaWxlZCcpKTsKCgkJaWYgKCFPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdPQkpFQ1RfQ0FDSElORycsIHRydWUpKSB7CgkJCSRyZXMg'));
	@fwrite($fp, base64_decode('PSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0IGlkIGZyb20gIyMjb2JqZWN0cyB3aGVyZSBpZCBsaWtlID8iLCBhcnJheSgkb2JqLT5ucygpLic6JScpKTsKCQkJd2hpbGUgKCRyb3cgPSAkcmVzLT5mZXRjaF9vYmplY3QoKSkgewoJCQkJJHRlc3QgPSBPSURw'));
	@fwrite($fp, base64_decode('bHVzT2JqZWN0OjpwYXJzZSgkcm93LT5pZCk7CgkJCQlpZiAoJG9iai0+ZXF1YWxzKCR0ZXN0KSkgcmV0dXJuICR0ZXN0OwoJCQl9CgkJCXJldHVybiBmYWxzZTsKCQl9IGVsc2UgewoJCQlzZWxmOjpidWlsZE9iamVjdEluZm9ybWF0aW9uQ2FjaGUoKTsKCQkJZm9y'));
	@fwrite($fp, base64_decode('ZWFjaCAoc2VsZjo6JG9iamVjdF9pbmZvX2NhY2hlIGFzICRpZCA9PiBsaXN0KCRjb25maWRlbnRpYWwsICRwYXJlbnQsICRyYV9lbWFpbCwgJHRpdGxlKSkgewoJCQkJaWYgKHN0cnBvcygkaWQsICRvYmotPm5zKCkuJzonKSA9PT0gMCkgewoJCQkJCSR0ZXN0ID0g'));
	@fwrite($fp, base64_decode('T0lEcGx1c09iamVjdDo6cGFyc2UoJGlkKTsKCQkJCQlpZiAoJG9iai0+ZXF1YWxzKCR0ZXN0KSkgcmV0dXJuICR0ZXN0OwoJCQkJfQoJCQl9CgkJCXJldHVybiBmYWxzZTsKCQl9Cgl9CgoJcHVibGljIGZ1bmN0aW9uIG9uZV91cCgpIHsKCQlyZXR1cm4gbnVsbDsg'));
	@fwrite($fp, base64_decode('Ly8gbm90IGltcGxlbWVudGVkCgl9CgoJLy8gQ2FjaGluZyBzdHVmZgoKCXByb3RlY3RlZCBzdGF0aWMgJG9iamVjdF9pbmZvX2NhY2hlID0gbnVsbDsKCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHJlc2V0T2JqZWN0SW5mb3JtYXRpb25DYWNoZSgpIHsKCQlzZWxm'));
	@fwrite($fp, base64_decode('Ojokb2JqZWN0X2luZm9fY2FjaGUgPSBudWxsOwoJfQoKCWNvbnN0IENBQ0hFX0NPTkZJREVOVElBTCA9IDA7IC8vIFRPRE86IEFuIG9iamVjdCB3b3VsZCBiZSBiZXR0ZXIgc28geW91IGNhbiB1c2UgJGNhY2hlaXRlbS0+aXNDb25maWRlbnRpYWwoKSBldGMuCglj'));
	@fwrite($fp, base64_decode('b25zdCBDQUNIRV9QQVJFTlQgPSAxOwoJY29uc3QgQ0FDSEVfUkFfRU1BSUwgPSAyOwoJY29uc3QgQ0FDSEVfVElUTEUgPSAzOwoKCXByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIGJ1aWxkT2JqZWN0SW5mb3JtYXRpb25DYWNoZSgpIHsKCQlpZiAoaXNfbnVsbChzZWxm'));
	@fwrite($fp, base64_decode('Ojokb2JqZWN0X2luZm9fY2FjaGUpKSB7CgkJCXNlbGY6OiRvYmplY3RfaW5mb19jYWNoZSA9IGFycmF5KCk7CgkJCSRyZXMgPSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0IGlkLCBwYXJlbnQsIGNvbmZpZGVudGlhbCwgcmFfZW1haWwsIHRpdGxlIGZyb20g'));
	@fwrite($fp, base64_decode('IyMjb2JqZWN0cyIpOwoJCQl3aGlsZSAoJHJvdyA9ICRyZXMtPmZldGNoX2FycmF5KCkpIHsKCQkJCXNlbGY6OiRvYmplY3RfaW5mb19jYWNoZVskcm93WydpZCddXSA9IGFycmF5KCRyb3dbJ2NvbmZpZGVudGlhbCddLCAkcm93WydwYXJlbnQnXSwgJHJvd1sncmFf'));
	@fwrite($fp, base64_decode('ZW1haWwnXSwgJHJvd1sndGl0bGUnXSk7CgkJCX0KCQl9Cgl9CgoJLy8gb3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiBpZiB5b3Ugd2FudCB5b3VyIG9iamVjdCB0eXBlIHRvIHNhdmUKCS8vIGF0dGFjaG1lbnRzIGluIGRpcmVjdG9yaWVzIHdpdGggZWFzeSBuYW1lcy4K'));
	@fwrite($fp, base64_decode('CS8vIFRha2UgY2FyZSB0aGF0IHlvdXIgY3VzdG9tIGRpcmVjdG9yeSBuYW1lIHdpbGwgbm90IGFsbG93IGphaWxicmVha3MgKC4uLykgIQoJcHVibGljIGZ1bmN0aW9uIGdldERpcmVjdG9yeU5hbWUoKSB7CgkJaWYgKCR0aGlzLT5pc1Jvb3QoKSkgcmV0dXJuICR0'));
	@fwrite($fp, base64_decode('aGlzLT5ucygpOwoJCXJldHVybiAkdGhpcy0+Z2V0TGVnYWN5RGlyZWN0b3J5TmFtZSgpOwoJfQoKCXB1YmxpYyBmaW5hbCBmdW5jdGlvbiBnZXRMZWdhY3lEaXJlY3RvcnlOYW1lKCkgewoJCWlmICgkdGhpczo6bnMoKSA9PSAnb2lkJykgewoJCQkkb2lkID0gJHRo'));
	@fwrite($fp, base64_decode('aXMtPm5vZGVJZChmYWxzZSk7CgkJfSBlbHNlIHsKCQkJJG9pZCA9IG51bGw7CgkJCSRhbHRfaWRzID0gJHRoaXMtPmdldEFsdElkcygpOwoJCQlmb3JlYWNoICgkYWx0X2lkcyBhcyAkYWx0X2lkKSB7CgkJCQlpZiAoJGFsdF9pZC0+Z2V0TmFtZXNwYWNlKCkgPT0g'));
	@fwrite($fp, base64_decode('J29pZCcpIHsKCQkJCQkkb2lkID0gJGFsdF9pZC0+Z2V0SWQoKTsKCQkJCQlicmVhazsgLy8gd2UgcHJlZmVyIHRoZSBmaXJzdCBPSUQgKGZvciBHVUlEcywgdGhlIGZpcnN0IE9JRCBpcyB0aGUgT0lEcGx1cy1PSUQsIGFuZCB0aGUgc2Vjb25kIE9JRCBpcyB0aGUg'));
	@fwrite($fp, base64_decode('VVVJRCBPSUQpCgkJCQl9CgkJCX0KCQl9CgoJCWlmICghaXNfbnVsbCgkb2lkKSAmJiAoJG9pZCAhPSAnJykpIHsKCQkJLy8gRm9yIE9JRHMsIGl0IGlzIHRoZSBPSUQsIGZvciBvdGhlciBpZGVudGlmaWVycwoJCQkvLyBpdCBpdCB0aGUgT0lEIGFsdCBJRCAoZ2Vu'));
	@fwrite($fp, base64_decode('ZXJhdGVkIHVzaW5nIHRoZSBTeXN0ZW1JRCkKCQkJcmV0dXJuIHN0cl9yZXBsYWNlKCcuJywgJ18nLCAkb2lkKTsKCQl9IGVsc2UgewoJCQkvLyBDYW4gaGFwcGVuIGlmIHlvdSBkb24ndCBoYXZlIGEgc3lzdGVtIElEIChkdWUgdG8gbWlzc2luZyBPcGVuU1NMIHBs'));
	@fwrite($fp, base64_decode('dWdpbikKCQkJcmV0dXJuIG1kNSgkdGhpcy0+bm9kZUlkKHRydWUpKTsgLy8gd2UgZG9uJ3QgdXNlICRpZCwgYmVjYXVzZSAkdGhpcy0+bm9kZUlkKHRydWUpIGlzIHBvc3NpYmx5IG1vcmUgY2Fub25pY2FsIHRoYW4gJGlkCgkJfQoJfQoKCXB1YmxpYyBzdGF0aWMg'));
	@fwrite($fp, base64_decode('ZnVuY3Rpb24gdHJlZUljb25GaWxlbmFtZSgkbW9kZSkgewoJCS8vIGZvciBiYWNrd2FyZHMtY29tcGF0aWJpbGl0eSB3aXRoIG9sZGVyIHBsdWdpbnMKCQlyZXR1cm4gJ2ltZy90cmVlaWNvbl8nLiRtb2RlLicucG5nJzsKCX0KCn0K'));
	@fclose($fp);
}
if (!is_file('includes/classes/OIDplusObject.class.php')) {
	warn('File has vanished! Will re-create it: includes/classes/OIDplusObject.class.php');
	writefile_1();
	if (!is_file('includes/classes/OIDplusObject.class.php')) {
		warn('File cannot be created (not existing): includes/classes/OIDplusObject.class.php');
	} else if (sha1_file('includes/classes/OIDplusObject.class.php') != 'c83a13d728642055a2e354ded7863f4998a30484') {
		warn('File cannot be created (checksum mismatch): includes/classes/OIDplusObject.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/classes/OIDplusObject.class.php', 0644)) {
		warn('Could not change file permissions of includes/classes/OIDplusObject.class.php');
	}
} else {
	if (@sha1_file('includes/classes/OIDplusObject.class.php') !== 'c83a13d728642055a2e354ded7863f4998a30484') {
		if (@sha1_file('includes/classes/OIDplusObject.class.php') !== '682fe7e8b78a855ae352d8a50c30210e5df5013e') {
			warn('File was modified. Will overwrite the changes now: includes/classes/OIDplusObject.class.php');
			$tmp = pathinfo('includes/classes/OIDplusObject.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/classes/OIDplusObject.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('includes/classes/OIDplusObject.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('includes/classes/OIDplusObject.class.php') !== 'c83a13d728642055a2e354ded7863f4998a30484') {
			warn('File cannot be written (checksum mismatch): includes/classes/OIDplusObject.class.php');
		}
	}
}


file_put_contents('.version.php', "<?php // Revision 956\n");
if (trim(@file_get_contents('.version.php')) !== '<?php // Revision 956') err('Could not write to .version.php!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

