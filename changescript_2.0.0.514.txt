<?php /* <ViaThinkSoftSignature>
bd/hMW8Imj9tgZGRCJjUlCv1PoAcxeuTS3UlXGA+7iVBWplHD9VewNL7iZrMIdCIk
s/Ocw42UgY16BIEczhTJCDzdWf8HUTwfYkPYODdtImxw0o9S9iZJO3ORmKL5q4PhU
aO0oa45gMGCZJw9a4vx6wwrrd4UeKi74n7HJfk6P6BPdF81+7q6Ujk7Y7B0QjJQGY
zS79lpJyFmdc5XL/eGv/N8B0NOnS5nTYCEDcvUD+AALyMsBUkKpRcUomnNgr7k+Oi
syOidZEmIzFhVLVzAZSiISrw4S7BfaXu1B+biyCH9EQgbK7t8PKwjKQ/X/fzvMVnN
nX1VHo7wrPrR2pzyqIyl2ZEWMgT0HommaBEQrpRKodXIHiC7QV66KopAEE3JZ3fS/
MOi1gpIpNJFXQh86yyy89zGQ/j6nUUw6FDVAa7KR70VA89R8+ON5oVAmMURRVgWuQ
iudbZV0Pw/f15mCmt4gXqGMP+4U5W+CGssua+WYotSXjySrfSJzhnRm6g3RDNlSCc
dlqLfLu1QaYKr/Ixzutqp7Xb2Hl311OX70POtRgZsBmRCz7kNfFlSHJ2WxXd0ywFW
u9vC8NxNecuGu1T3YJ1lqwBXJ2+bRDSpKM5Kodgnr7MLE0/g2M8Ga4NkxuQWjMcuU
daKsduWEjChjFchQcZXVQ7edFERX4OabeBtRwEfxZSZXAyyPguZcGGXgNj0N+Irhr
YC3K4fpFcpB6tz8d9RDCWoRNFzdZzXgt34FrFaMiCBlg/BNCpinfVQhgkTmPtOqCx
9Y8p+rkkVjJbYqv9NMvB04I6H6TmNPOvzi6RNMxCKSsfr/JTa3dpN+baSRihRH/gc
ZsRsmC198vwCoVfKo6163QE/3xXGbR477QzHpgV+7w4qDFHPDptQyYBBiKryAKIRr
4C0uKVnZ+crIpmMyUC3p70ml293GxmkQSSyVVfO8c2uD6/szzFBlmmWpP1YN72ADi
FQ6ITB2yNiCmDj80alXA279JDRvFfQ4YygikC5bAAfCxlbBL2UvrPWexVOtTza5hP
E8XKKMByj55moYgOY6C89GrC8bzmSW5Ys45tLkB1EvxKWlg4rTJxV3bVm+VPCku0Q
j3JHFDhbv0d63MkUbc7I4EXRg2loSO6mXHlyxf9sBGFQnIJKqQqv8CwuiyFZBwV89
uqZzHoqDvjNxvCU7wiD7sVOQ4wWez9Jopet8h0l8HVQzDiRJeZohy/GngtiwkKGZr
MnPH1s4o6tOVnxcu2xTe4G9Yto2iOVNZgw8H1r+W6Ruf7WBkd9i99Vp2GFiPz71F5
WWIzykJT0G8o2Ka8c6xFDcm4cBwOKXZVQoOvVW5oGDFWOGvoKG3GB4pMDeijFzU22
g==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 513') {
	err('This update can only be applied to OIDplus version 2.0.0.513!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: includes/classes/OIDplusObject.class.php
function writefile_1() {
	@$fp = fopen('includes/classes/OIDplusObject.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMSBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgppZiAoIWRlZmluZWQoJ0lOU0lERV9PSURQTFVTJykpIGRpZSgpOwoKYWJzdHJhY3QgY2xhc3MgT0lEcGx1c09iamVjdCB7Cgljb25zdCBVVUlEX05BTUVCQVNFRF9OU19PaWRQbHVzTWlz'));
	@fwrite($fp, base64_decode('YyA9ICdhZDE2NTRlNi03ZTE1LTExZTQtOWVmNi03OGUzYjVmYzdmMjInOwoKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gcGFyc2UoJG5vZGVfaWQpIHsgLy8gcGxlYXNlIG92ZXJ3cml0ZSB0aGlzIGZ1bmN0aW9uIQoJCS8vIFRPRE86IGluIGNhc2Ugd2UgYXJlIG5v'));
	@fwrite($fp, base64_decode('dCBjYWxsaW5nIHRoaXMgY2xhc3MgZGlyZWN0bHksIGNoZWNrIGlmIGZ1bmN0aW9uIGlzIG92ZXJ3cml0dGVuIGFuZCB0aHJvdyBleGNlcHRpb24gb3RoZXJ3aXNlCgkJZm9yZWFjaCAoT0lEcGx1czo6Z2V0RW5hYmxlZE9iamVjdFR5cGVzKCkgYXMgJG90KSB7CgkJ'));
	@fwrite($fp, base64_decode('CWlmICgkb2JqID0gJG90OjpwYXJzZSgkbm9kZV9pZCkpIHJldHVybiAkb2JqOwoJCX0KCQlyZXR1cm4gbnVsbDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gLypPSURwbHVzQWx0SWRbXSovIGdldEFsdElkcygpIHsKCQlpZiAoJHRoaXMtPmlzUm9vdCgpKSByZXR1cm4g'));
	@fwrite($fp, base64_decode('YXJyYXkoKTsKCgkJJGlkcyA9IGFycmF5KCk7CgkJaWYgKCR0aGlzLT5ucygpICE9ICdvaWQnKSB7CgkJCS8vIENyZWF0ZXMgYW4gT0lEcGx1cy1IYXNoLU9JRAoJCQkvLyBJZiB0aGUgb2JqZWN0IHR5cGUgaGFzIGEgYmV0dGVyIHdheSBvZiBkZWZpbmluZyBhbiBP'));
	@fwrite($fp, base64_decode('SUQsIHBsZWFzZSBvdmVycmlkZSB0aGlzIG1ldGhvZCEKCQkJJHNpZCA9IE9JRHBsdXM6OmdldFN5c3RlbUlkKHRydWUpOwoJCQlpZiAoIWVtcHR5KCRzaWQpKSB7CgkJCQkkb2lkID0gJHNpZCAuICcuJyAuIHNtYWxsaGFzaCgkdGhpcy0+bm9kZUlkKCkpOwoJCQkJ'));
	@fwrite($fp, base64_decode('JGlkc1tdID0gbmV3IE9JRHBsdXNBbHRJZCgnb2lkJywgJG9pZCwgX0woJ09JRHBsdXMgSW5mb3JtYXRpb24gT2JqZWN0IElEJykpOwoJCQl9CgkJfQoJCWlmICgkdGhpcy0+bnMoKSAhPSAnZ3VpZCcpIHsKCQkJJGlkc1tdID0gbmV3IE9JRHBsdXNBbHRJZCgnZ3Vp'));
	@fwrite($fp, base64_decode('ZCcsIGdlbl91dWlkX21kNV9uYW1lYmFzZWQoc2VsZjo6VVVJRF9OQU1FQkFTRURfTlNfT2lkUGx1c01pc2MsICR0aGlzLT5ub2RlSWQoKSksIF9MKCdOYW1lIGJhc2VkIHZlcnNpb24gMyAvIE1ENSBVVUlEIHdpdGggbmFtZXNwYWNlICUxJywnVVVJRF9OQU1FQkFT'));
	@fwrite($fp, base64_decode('RURfTlNfT2lkUGx1c01pc2MnKSk7CgkJCSRpZHNbXSA9IG5ldyBPSURwbHVzQWx0SWQoJ2d1aWQnLCBnZW5fdXVpZF9zaGExX25hbWViYXNlZChzZWxmOjpVVUlEX05BTUVCQVNFRF9OU19PaWRQbHVzTWlzYywgJHRoaXMtPm5vZGVJZCgpKSwgX0woJ05hbWUgYmFz'));
	@fwrite($fp, base64_decode('ZWQgdmVyc2lvbiA1IC8gU0hBMSBVVUlEIHdpdGggbmFtZXNwYWNlICUxJywnVVVJRF9OQU1FQkFTRURfTlNfT2lkUGx1c01pc2MnKSk7CgkJfQoJCXJldHVybiAkaWRzOwoJfQoKCXB1YmxpYyBhYnN0cmFjdCBzdGF0aWMgZnVuY3Rpb24gb2JqZWN0VHlwZVRpdGxl'));
	@fwrite($fp, base64_decode('KCk7CgoJcHVibGljIGFic3RyYWN0IHN0YXRpYyBmdW5jdGlvbiBvYmplY3RUeXBlVGl0bGVTaG9ydCgpOwoKCXB1YmxpYyBhYnN0cmFjdCBzdGF0aWMgZnVuY3Rpb24gbnMoKTsKCglwdWJsaWMgYWJzdHJhY3Qgc3RhdGljIGZ1bmN0aW9uIHJvb3QoKTsKCglwdWJs'));
	@fwrite($fp, base64_decode('aWMgYWJzdHJhY3QgZnVuY3Rpb24gaXNSb290KCk7CgoJcHVibGljIGFic3RyYWN0IGZ1bmN0aW9uIG5vZGVJZCgkd2l0aF9ucz10cnVlKTsKCglwdWJsaWMgYWJzdHJhY3QgZnVuY3Rpb24gYWRkU3RyaW5nKCRzdHIpOwoKCXB1YmxpYyBhYnN0cmFjdCBmdW5jdGlv'));
	@fwrite($fp, base64_decode('biBjcnVkU2hvd0lkKE9JRHBsdXNPYmplY3QgJHBhcmVudCk7CgoJcHVibGljIGFic3RyYWN0IGZ1bmN0aW9uIGNydWRJbnNlcnRQcmVmaXgoKTsKCglwdWJsaWMgYWJzdHJhY3QgZnVuY3Rpb24ganNUcmVlTm9kZU5hbWUoT0lEcGx1c09iamVjdCAkcGFyZW50ID0g'));
	@fwrite($fp, base64_decode('bnVsbCk7CgoJcHVibGljIGFic3RyYWN0IGZ1bmN0aW9uIGRlZmF1bHRUaXRsZSgpOwoKCXB1YmxpYyBhYnN0cmFjdCBmdW5jdGlvbiBpc0xlYWZOb2RlKCk7CgoJcHVibGljIGFic3RyYWN0IGZ1bmN0aW9uIGdldENvbnRlbnRQYWdlKCYkdGl0bGUsICYkY29udGVu'));
	@fwrite($fp, base64_decode('dCwgJiRpY29uKTsKCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldFJhUm9vdHMoJHJhX2VtYWlsPW51bGwpIHsKCQlpZiAoJHJhX2VtYWlsIGluc3RhbmNlb2YgT0lEcGx1c1JBKSAkcmFfZW1haWwgPSAkcmFfZW1haWwtPnJhRW1haWwoKTsKCgkJJG91dCA9IGFy'));
	@fwrite($fp, base64_decode('cmF5KCk7CgoJCWlmICghT0lEcGx1czo6YmFzZUNvbmZpZygpLT5nZXRWYWx1ZSgnT0JKRUNUX0NBQ0hJTkcnLCB0cnVlKSkgewoJCQlpZiAoaXNfbnVsbCgkcmFfZW1haWwpKSB7CgkJCQkkcmVzID0gT0lEcGx1czo6ZGIoKS0+cXVlcnkoInNlbGVjdCBvQ2hpbGQu'));
	@fwrite($fp, base64_decode('aWQgYXMgaWQsIG9DaGlsZC5yYV9lbWFpbCBhcyBjaGlsZF9tYWlsLCBvUGFyZW50LnJhX2VtYWlsIGFzIHBhcmVudF9tYWlsIGZyb20gIyMjb2JqZWN0cyBhcyBvQ2hpbGQgIi4KCQkJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAibGVmdCBqb2luICMjI29i'));
	@fwrite($fp, base64_decode('amVjdHMgYXMgb1BhcmVudCBvbiBvQ2hpbGQucGFyZW50ID0gb1BhcmVudC5pZCAiLgoJCQkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICJvcmRlciBieSAiLk9JRHBsdXM6OmRiKCktPm5hdE9yZGVyKCdvQ2hpbGQuaWQnKSk7CgkJCQl3aGlsZSAoJHJvdyA9'));
	@fwrite($fp, base64_decode('ICRyZXMtPmZldGNoX2FycmF5KCkpIHsKCQkJCQlpZiAoIU9JRHBsdXM6OmF1dGhVdGlscygpOjppc1JhTG9nZ2VkSW4oJHJvd1sncGFyZW50X21haWwnXSkgJiYgT0lEcGx1czo6YXV0aFV0aWxzKCk6OmlzUmFMb2dnZWRJbigkcm93WydjaGlsZF9tYWlsJ10pKSB7'));
	@fwrite($fp, base64_decode('CgkJCQkJCSR4ID0gc2VsZjo6cGFyc2UoJHJvd1snaWQnXSk7IC8vIGNhbiBiZSBGQUxTRSBpZiBuYW1lc3BhY2Ugd2FzIGRpc2FibGVkCgkJCQkJCWlmICgkeCkgJG91dFtdID0gJHg7CgkJCQkJfQoJCQkJfQoJCQl9IGVsc2UgewoJCQkJJHJlcyA9IE9JRHBsdXM6'));
	@fwrite($fp, base64_decode('OmRiKCktPnF1ZXJ5KCJzZWxlY3Qgb0NoaWxkLmlkIGFzIGlkIGZyb20gIyMjb2JqZWN0cyBhcyBvQ2hpbGQgIi4KCQkJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAibGVmdCBqb2luICMjI29iamVjdHMgYXMgb1BhcmVudCBvbiBvQ2hpbGQucGFyZW50ID0g'));
	@fwrite($fp, base64_decode('b1BhcmVudC5pZCAiLgoJCQkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ3aGVyZSAoIi5PSURwbHVzOjpkYigpLT5nZXRTbGFuZygpLT5pc051bGxGdW5jdGlvbignb1BhcmVudC5yYV9lbWFpbCcsIicnIikuIiA8PiA/IGFuZCAiLgoJCQkJICAgICAgICAg'));
	@fwrite($fp, base64_decode('ICAgICAgICAgICAgICAgICAgIE9JRHBsdXM6OmRiKCktPmdldFNsYW5nKCktPmlzTnVsbEZ1bmN0aW9uKCdvQ2hpbGQucmFfZW1haWwnLCInJyIpLiIgPSA/KSBvciAiLgoJCQkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAob1BhcmVudC5yYV9l'));
	@fwrite($fp, base64_decode('bWFpbCBpcyBudWxsIGFuZCAiLk9JRHBsdXM6OmRiKCktPmdldFNsYW5nKCktPmlzTnVsbEZ1bmN0aW9uKCdvQ2hpbGQucmFfZW1haWwnLCInJyIpLiIgPSA/KSAiLgoJCQkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICJvcmRlciBieSAiLk9JRHBsdXM6OmRi'));
	@fwrite($fp, base64_decode('KCktPm5hdE9yZGVyKCdvQ2hpbGQuaWQnKSwgYXJyYXkoJHJhX2VtYWlsLCAkcmFfZW1haWwsICRyYV9lbWFpbCkpOwoJCQkJd2hpbGUgKCRyb3cgPSAkcmVzLT5mZXRjaF9hcnJheSgpKSB7CgkJCQkJJHggPSBzZWxmOjpwYXJzZSgkcm93WydpZCddKTsgLy8gY2Fu'));
	@fwrite($fp, base64_decode('IGJlIEZBTFNFIGlmIG5hbWVzcGFjZSB3YXMgZGlzYWJsZWQKCQkJCQlpZiAoJHgpICRvdXRbXSA9IHNlbGY6OnBhcnNlKCRyb3dbJ2lkJ10pOwoJCQkJfQoJCQl9CgkJfSBlbHNlIHsKCQkJaWYgKGlzX251bGwoJHJhX2VtYWlsKSkgewoJCQkJJHJhX21haWxzX3Rv'));
	@fwrite($fp, base64_decode('X2NoZWNrID0gT0lEcGx1czo6YXV0aFV0aWxzKCktPmxvZ2dlZEluUmFMaXN0KCk7CgkJCQlpZiAoY291bnQoJHJhX21haWxzX3RvX2NoZWNrKSA9PSAwKSByZXR1cm4gJG91dDsKCQkJfSBlbHNlIHsKCQkJCSRyYV9tYWlsc190b19jaGVjayA9IGFycmF5KCRyYV9l'));
	@fwrite($fp, base64_decode('bWFpbCk7CgkJCX0KCgkJCXNlbGY6OmJ1aWxkT2JqZWN0SW5mb3JtYXRpb25DYWNoZSgpOwoKCQkJZm9yZWFjaCAoJHJhX21haWxzX3RvX2NoZWNrIGFzICRjaGVja19yYV9tYWlsKSB7CgkJCQkkb3V0X3BhcnQgPSBhcnJheSgpOwoKCQkJCWZvcmVhY2ggKHNlbGY6'));
	@fwrite($fp, base64_decode('OiRvYmplY3RfaW5mb19jYWNoZSBhcyAkaWQgPT4gbGlzdCgkY29uZmlkZW50aWFsLCAkcGFyZW50LCAkcmFfZW1haWwsICR0aXRsZSkpIHsKCQkJCQkvLyBJZiB0aGUgT0lEIFJBIGlzIHRoZSBSQSB3ZSBhcmUgc2VhcmNoaW5nLCB0aGVuIGFkZCB0aGUgb2JqZWN0'));
	@fwrite($fp, base64_decode('IHRvIHRoZSBjaG9pY2UgbGlzdAoJCQkJCWlmICgkcmFfZW1haWwgPT0gJGNoZWNrX3JhX21haWwpICRvdXRfcGFydFtdID0gJGlkOwoJCQkJfQoKCQkJCWZvcmVhY2ggKHNlbGY6OiRvYmplY3RfaW5mb19jYWNoZSBhcyAkaWQgPT4gbGlzdCgkY29uZmlkZW50aWFs'));
	@fwrite($fp, base64_decode('LCAkcGFyZW50LCAkcmFfZW1haWwsICR0aXRsZSkpIHsKCQkJCQlpZiAoaXNzZXQoc2VsZjo6JG9iamVjdF9pbmZvX2NhY2hlWyRwYXJlbnRdKSkgewoJCQkJCQlpZiAoc2VsZjo6JG9iamVjdF9pbmZvX2NhY2hlWyRwYXJlbnRdW3NlbGY6OkNBQ0hFX1JBX0VNQUlM'));
	@fwrite($fp, base64_decode('XSA9PSAkcmFfZW1haWwpIHsKCQkJCQkJCS8vIGlmIHRoZSBwYXJlbnQgaGFzIHRoZSBzYW1lIFJBLCB0aGVuIHRoaXMgT0lEIGNhbm5vdCBiZSBhIHJvb3QgPT4gcmVtb3ZlIHRoZSBlbGVtZW50IGZyb20gdGhlIGNob2ljZSBsaXN0CgkJCQkJCQlmb3JlYWNoIChh'));
	@fwrite($fp, base64_decode('cnJheV9rZXlzKCRvdXRfcGFydCwgJGlkKSBhcyAka2V5KSB1bnNldCgkb3V0X3BhcnRbJGtleV0pOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoKCQkJCW5hdHNvcnQoJG91dF9wYXJ0KTsKCgkJCQlmb3JlYWNoICgkb3V0X3BhcnQgYXMgJGlkKSB7CgkJCQkJJG9iaiA9'));
	@fwrite($fp, base64_decode('IHNlbGY6OnBhcnNlKCRpZCk7CgkJCQkJaWYgKCRvYmopICRvdXRbXSA9ICRvYmo7CgkJCQl9CgkJCX0KCQl9CgoJCXJldHVybiAkb3V0OwoJfQoKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0QWxsTm9uQ29uZmlkZW50aWFsKCkgewoJCSRvdXQgPSBhcnJheSgp'));
	@fwrite($fp, base64_decode('OwoKCQlpZiAoIU9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ09CSkVDVF9DQUNISU5HJywgdHJ1ZSkpIHsKCQkJJHJlcyA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgaWQgZnJvbSAjIyNvYmplY3RzIHdoZXJlIGNvbmZpZGVudGlhbCA9ID8g'));
	@fwrite($fp, base64_decode('b3JkZXIgYnkgIi5PSURwbHVzOjpkYigpLT5uYXRPcmRlcignaWQnKSwgYXJyYXkoZmFsc2UpKTsKCgkJCXdoaWxlICgkcm93ID0gJHJlcy0+ZmV0Y2hfYXJyYXkoKSkgewoJCQkJJG9iaiA9IHNlbGY6OnBhcnNlKCRyb3dbJ2lkJ10pOyAvLyB3aWxsIGJlIE5VTEwg'));
	@fwrite($fp, base64_decode('aWYgdGhlIG9iamVjdCB0eXBlIGlzIG5vdCByZWdpc3RlcmVkCgkJCQlpZiAoJG9iaiAmJiAoISRvYmotPmlzQ29uZmlkZW50aWFsKCkpKSB7CgkJCQkJJG91dFtdID0gJHJvd1snaWQnXTsKCQkJCX0KCQkJfQoJCX0gZWxzZSB7CgkJCXNlbGY6OmJ1aWxkT2JqZWN0'));
	@fwrite($fp, base64_decode('SW5mb3JtYXRpb25DYWNoZSgpOwoKCQkJZm9yZWFjaCAoc2VsZjo6JG9iamVjdF9pbmZvX2NhY2hlIGFzICRpZCA9PiBsaXN0KCRjb25maWRlbnRpYWwsICRwYXJlbnQsICRyYV9lbWFpbCwgJHRpdGxlKSkgewoJCQkJaWYgKCEkY29uZmlkZW50aWFsKSB7CgkJCQkJ'));
	@fwrite($fp, base64_decode('JG9iaiA9IHNlbGY6OnBhcnNlKCRpZCk7IC8vIHdpbGwgYmUgTlVMTCBpZiB0aGUgb2JqZWN0IHR5cGUgaXMgbm90IHJlZ2lzdGVyZWQKCQkJCQlpZiAoJG9iaiAmJiAoISRvYmotPmlzQ29uZmlkZW50aWFsKCkpKSB7CgkJCQkJCSRvdXRbXSA9ICRpZDsKCQkJCQl9'));
	@fwrite($fp, base64_decode('CgkJCQl9CgkJCX0KCQl9CgoJCXJldHVybiAkb3V0OwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBpc0NvbmZpZGVudGlhbCgpIHsKCQlpZiAoIU9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ09CSkVDVF9DQUNISU5HJywgdHJ1ZSkpIHsKCQkJLy9zdGF0aWMg'));
	@fwrite($fp, base64_decode('JGNvbmZpZGVudGlhbF9jYWNoZSA9IGFycmF5KCk7CgkJCSRjdXJpZCA9ICR0aGlzLT5ub2RlSWQoKTsKCQkJLy8kb3JpZ19jdXJpZCA9ICRjdXJpZDsKCQkJLy9pZiAoaXNzZXQoJGNvbmZpZGVudGlhbF9jYWNoZVskY3VyaWRdKSkgcmV0dXJuICRjb25maWRlbnRp'));
	@fwrite($fp, base64_decode('YWxfY2FjaGVbJGN1cmlkXTsKCQkJLy8gUmVjdXJzaXZlbHkgc2VhcmNoIGZvciB0aGUgY29uZmlkZW50aWFsIGZsYWcgaW4gdGhlIHBhcmVudHMKCQkJd2hpbGUgKCgkcmVzID0gT0lEcGx1czo6ZGIoKS0+cXVlcnkoInNlbGVjdCBwYXJlbnQsIGNvbmZpZGVudGlh'));
	@fwrite($fp, base64_decode('bCBmcm9tICMjI29iamVjdHMgd2hlcmUgaWQgPSA/IiwgYXJyYXkoJGN1cmlkKSkpLT5udW1fcm93cygpID4gMCkgewoJCQkJJHJvdyA9ICRyZXMtPmZldGNoX2FycmF5KCk7CgkJCQlpZiAoJHJvd1snY29uZmlkZW50aWFsJ10pIHsKCQkJCQkvLyRjb25maWRlbnRp'));
	@fwrite($fp, base64_decode('YWxfY2FjaGVbJGN1cmlkXSA9IHRydWU7CgkJCQkJLy8kY29uZmlkZW50aWFsX2NhY2hlWyRvcmlnX2N1cmlkXSA9IHRydWU7CgkJCQkJcmV0dXJuIHRydWU7CgkJCQl9IGVsc2UgewoJCQkJCS8vJGNvbmZpZGVudGlhbF9jYWNoZVskY3VyaWRdID0gZmFsc2U7CgkJ'));
	@fwrite($fp, base64_decode('CQl9CgkJCQkkY3VyaWQgPSAkcm93WydwYXJlbnQnXTsKCQkJCS8vaWYgKGlzc2V0KCRjb25maWRlbnRpYWxfY2FjaGVbJGN1cmlkXSkpIHsKCQkJCQkvLyRjb25maWRlbnRpYWxfY2FjaGVbJG9yaWdfY3VyaWRdID0gJGNvbmZpZGVudGlhbF9jYWNoZVskY3VyaWRd'));
	@fwrite($fp, base64_decode('OwoJCQkJCS8vcmV0dXJuICRjb25maWRlbnRpYWxfY2FjaGVbJGN1cmlkXTsKCQkJCS8vfQoJCQl9CgoJCQkvLyRjb25maWRlbnRpYWxfY2FjaGVbJG9yaWdfY3VyaWRdID0gZmFsc2U7CgkJCXJldHVybiBmYWxzZTsKCQl9IGVsc2UgewoJCQlzZWxmOjpidWlsZE9i'));
	@fwrite($fp, base64_decode('amVjdEluZm9ybWF0aW9uQ2FjaGUoKTsKCgkJCSRjdXJpZCA9ICR0aGlzLT5ub2RlSWQoKTsKCQkJLy8gUmVjdXJzaXZlbHkgc2VhcmNoIGZvciB0aGUgY29uZmlkZW50aWFsIGZsYWcgaW4gdGhlIHBhcmVudHMKCQkJd2hpbGUgKGlzc2V0KHNlbGY6OiRvYmplY3Rf'));
	@fwrite($fp, base64_decode('aW5mb19jYWNoZVskY3VyaWRdKSkgewoJCQkJaWYgKHNlbGY6OiRvYmplY3RfaW5mb19jYWNoZVskY3VyaWRdW3NlbGY6OkNBQ0hFX0NPTkZJREVOVElBTF0pIHJldHVybiB0cnVlOwoJCQkJJGN1cmlkID0gc2VsZjo6JG9iamVjdF9pbmZvX2NhY2hlWyRjdXJpZF1b'));
	@fwrite($fp, base64_decode('c2VsZjo6Q0FDSEVfUEFSRU5UXTsKCQkJfQoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBpc0NoaWxkT2YoT0lEcGx1c09iamVjdCAkb2JqKSB7CgkJaWYgKCFPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdPQkpFQ1RfQ0FD'));
	@fwrite($fp, base64_decode('SElORycsIHRydWUpKSB7CgkJCSRjdXJpZCA9ICR0aGlzLT5ub2RlSWQoKTsKCQkJd2hpbGUgKCgkcmVzID0gT0lEcGx1czo6ZGIoKS0+cXVlcnkoInNlbGVjdCBwYXJlbnQgZnJvbSAjIyNvYmplY3RzIHdoZXJlIGlkID0gPyIsIGFycmF5KCRjdXJpZCkpKS0+bnVt'));
	@fwrite($fp, base64_decode('X3Jvd3MoKSA+IDApIHsKCQkJCSRyb3cgPSAkcmVzLT5mZXRjaF9hcnJheSgpOwoJCQkJaWYgKCRjdXJpZCA9PSAkb2JqLT5ub2RlSWQoKSkgcmV0dXJuIHRydWU7CgkJCQkkY3VyaWQgPSAkcm93WydwYXJlbnQnXTsKCQkJfQoJCQlyZXR1cm4gZmFsc2U7CgkJfSBl'));
	@fwrite($fp, base64_decode('bHNlIHsKCQkJc2VsZjo6YnVpbGRPYmplY3RJbmZvcm1hdGlvbkNhY2hlKCk7CgoJCQkkY3VyaWQgPSAkdGhpcy0+bm9kZUlkKCk7CgkJCXdoaWxlIChpc3NldChzZWxmOjokb2JqZWN0X2luZm9fY2FjaGVbJGN1cmlkXSkpIHsKCQkJCWlmICgkY3VyaWQgPT0gJG9i'));
	@fwrite($fp, base64_decode('ai0+bm9kZUlkKCkpIHJldHVybiB0cnVlOwoJCQkJJGN1cmlkID0gc2VsZjo6JG9iamVjdF9pbmZvX2NhY2hlWyRjdXJpZF1bc2VsZjo6Q0FDSEVfUEFSRU5UXTsKCQkJfQoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXRDaGlsZHJl'));
	@fwrite($fp, base64_decode('bigpIHsKCQkkb3V0ID0gYXJyYXkoKTsKCQlpZiAoIU9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ09CSkVDVF9DQUNISU5HJywgdHJ1ZSkpIHsKCQkJJHJlcyA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgaWQgZnJvbSAjIyNvYmplY3RzIHdo'));
	@fwrite($fp, base64_decode('ZXJlIHBhcmVudCA9ID8iLCBhcnJheSgkdGhpcy0+bm9kZUlkKCkpKTsKCQkJd2hpbGUgKCRyb3cgPSAkcmVzLT5mZXRjaF9hcnJheSgpKSB7CgkJCQkkb2JqID0gc2VsZjo6cGFyc2UoJHJvd1snaWQnXSk7CgkJCQlpZiAoISRvYmopIGNvbnRpbnVlOwoJCQkJJG91'));
	@fwrite($fp, base64_decode('dFtdID0gJG9iajsKCQkJfQoJCX0gZWxzZSB7CgkJCXNlbGY6OmJ1aWxkT2JqZWN0SW5mb3JtYXRpb25DYWNoZSgpOwoKCQkJZm9yZWFjaCAoc2VsZjo6JG9iamVjdF9pbmZvX2NhY2hlIGFzICRpZCA9PiBsaXN0KCRjb25maWRlbnRpYWwsICRwYXJlbnQsICRyYV9l'));
	@fwrite($fp, base64_decode('bWFpbCwgJHRpdGxlKSkgewoJCQkJaWYgKCRwYXJlbnQgPT0gJHRoaXMtPm5vZGVJZCgpKSB7CgkJCQkJJG9iaiA9IHNlbGY6OnBhcnNlKCRpZCk7CgkJCQkJaWYgKCEkb2JqKSBjb250aW51ZTsKCQkJCQkkb3V0W10gPSAkb2JqOwoJCQkJfQoJCQl9CgkJfQoJCXJl'));
	@fwrite($fp, base64_decode('dHVybiAkb3V0OwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXRSYSgpIHsKCQlyZXR1cm4gbmV3IE9JRHBsdXNSQSgkdGhpcy0+Z2V0UmFNYWlsKCkpOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiB1c2VySGFzUmVhZFJpZ2h0cygkcmFfZW1haWw9bnVsbCkgewoJCWlmICgk'));
	@fwrite($fp, base64_decode('cmFfZW1haWwgaW5zdGFuY2VvZiBPSURwbHVzUkEpICRyYV9lbWFpbCA9ICRyYV9lbWFpbC0+cmFFbWFpbCgpOwoKCQkvLyBJZiBpdCBpcyBub3QgY29uZmlkZW50aWFsLCBldmVyeWJvZHkgY2FuIHJlYWQvc2VlIGl0LgoJCS8vIE5vdGU6IFRoaXMgYWxzbyBjaGVj'));
	@fwrite($fp, base64_decode('a3MgaWYgc3VwZXJpb3IgT0lEcyBhcmUgY29uZmlkZW50aWFsLgoJCWlmICghJHRoaXMtPmlzQ29uZmlkZW50aWFsKCkpIHJldHVybiB0cnVlOwoKCQlpZiAoaXNfbnVsbCgkcmFfZW1haWwpKSB7CgkJCS8vIEFkbWluIG1heSBkbyBldmVyeXRoaW5nCgkJCWlmIChP'));
	@fwrite($fp, base64_decode('SURwbHVzOjphdXRoVXRpbHMoKTo6aXNBZG1pbkxvZ2dlZEluKCkpIHJldHVybiB0cnVlOwoKCQkJLy8gSWYgdGhlIFJBIGlzIGxvZ2dlZCBpbiwgdGhlbiB0aGV5IGNhbiBzZWUgdGhlIE9JRC4KCQkJaWYgKE9JRHBsdXM6OmF1dGhVdGlscygpOjppc1JhTG9nZ2Vk'));
	@fwrite($fp, base64_decode('SW4oJHRoaXMtPmdldFJhTWFpbCgpKSkgcmV0dXJuIHRydWU7CgkJfSBlbHNlIHsKCQkJLy8gSWYgdGhpcyBPSUQgYmVsb25ncyB0byB0aGUgcmVxdWVzdGVkIFJBLCB0aGVuIHRoZXkgbWF5IHNlZSBpdC4KCQkJaWYgKCR0aGlzLT5nZXRSYU1haWwoKSA9PSAkcmFf'));
	@fwrite($fp, base64_decode('ZW1haWwpIHJldHVybiB0cnVlOwoJCX0KCgkJLy8gSWYgc29tZW9uZSBoYXMgcmlnaHRzIHRvIGFuIG9iamVjdCBiZWxvdyBvdXIgY29uZmlkZW50aWFsIG5vZGUsCgkJLy8gd2UgbGV0IGhpbSBzZWUgdGhlIGNvbmZpZGVudGlhbCBub2RlLAoJCS8vIE90aGVyd2lz'));
	@fwrite($fp, base64_decode('ZSBoZSBjb3VsZCBub3QgYnJvd3NlIHRocm91Z2ggdG8gaGlzIG93biBub2RlLgoJCSRyb290cyA9ICR0aGlzLT5nZXRSYVJvb3RzKCRyYV9lbWFpbCk7CgkJZm9yZWFjaCAoJHJvb3RzIGFzICRyb290KSB7CgkJCWlmICgkcm9vdC0+aXNDaGlsZE9mKCR0aGlzKSkg'));
	@fwrite($fp, base64_decode('cmV0dXJuIHRydWU7CgkJfQoKCQlyZXR1cm4gZmFsc2U7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGdldEljb24oJHJvdz1udWxsKSB7CgkJJG5hbWVzcGFjZSA9ICR0aGlzLT5ucygpOyAvLyBtdXN0IHVzZSAkdGhpcywgbm90IHNlbGY6Oiwgb3RoZXJ3aXNlIHRoZSB2'));
	@fwrite($fp, base64_decode('aXJ0dWFsIG1ldGhvZCB3aWxsIG5vdCBiZSBjYWxsZWQKCgkJaWYgKGlzX251bGwoJHJvdykpIHsKCQkJJHJhX2VtYWlsID0gJHRoaXMtPmdldFJhTWFpbCgpOwoJCX0gZWxzZSB7CgkJCSRyYV9lbWFpbCA9ICRyb3dbJ3JhX2VtYWlsJ107CgkJfQoJCS8vIFRPRE86'));
	@fwrite($fp, base64_decode('IGhhdmUgZGlmZmVyZW50IGljb25zIGZvciBMZWFmLU5vZGVzCgkJaWYgKE9JRHBsdXM6OmF1dGhVdGlscygpOjppc1JhTG9nZ2VkSW4oJHJhX2VtYWlsKSkgewoJCQkkaWNvbiA9ICdwbHVnaW5zL29iamVjdFR5cGVzLycuJG5hbWVzcGFjZS4nL2ltZy90cmVlaWNv'));
	@fwrite($fp, base64_decode('bl9vd24ucG5nJzsKCQl9IGVsc2UgewoJCQkkaWNvbiA9ICdwbHVnaW5zL29iamVjdFR5cGVzLycuJG5hbWVzcGFjZS4nL2ltZy90cmVlaWNvbl9nZW5lcmFsLnBuZyc7CgkJfQoJCWlmICghZmlsZV9leGlzdHMoJGljb24pKSAkaWNvbiA9IG51bGw7IC8vIGRlZmF1'));
	@fwrite($fp, base64_decode('bHQgaWNvbiAoZm9sZGVyKQoJCXJldHVybiAkaWNvbjsKCX0KCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGV4aXN0cygkaWQpIHsKCQlpZiAoIU9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ09CSkVDVF9DQUNISU5HJywgdHJ1ZSkpIHsKCQkJJHJlcyA9'));
	@fwrite($fp, base64_decode('IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgaWQgZnJvbSAjIyNvYmplY3RzIHdoZXJlIGlkID0gPyIsIGFycmF5KCRpZCkpOwoJCQlyZXR1cm4gJHJlcy0+bnVtX3Jvd3MoKSA+IDA7CgkJfSBlbHNlIHsKCQkJc2VsZjo6YnVpbGRPYmplY3RJbmZvcm1hdGlv'));
	@fwrite($fp, base64_decode('bkNhY2hlKCk7CgkJCXJldHVybiBpc3NldChzZWxmOjokb2JqZWN0X2luZm9fY2FjaGVbJGlkXSk7CgkJfQoJfQoKCS8vIEdldCBwYXJlbnQgZ2l2ZXMgdGhlIG5leHQgcG9zc2libGUgcGFyZW50IHdoaWNoIGlzIEVYSVNUSU5HIGluIE9JRHBsdXMKCS8vIEl0IGRv'));
	@fwrite($fp, base64_decode('ZXMgbm90IGdpdmUgdGhlIGltbWVkaWF0ZSBwYXJlbnQKCXB1YmxpYyBmdW5jdGlvbiBnZXRQYXJlbnQoKSB7CgkJaWYgKCFPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdPQkpFQ1RfQ0FDSElORycsIHRydWUpKSB7CgkJCSRyZXMgPSBPSURwbHVzOjpk'));
	@fwrite($fp, base64_decode('YigpLT5xdWVyeSgic2VsZWN0IHBhcmVudCBmcm9tICMjI29iamVjdHMgd2hlcmUgaWQgPSA/IiwgYXJyYXkoJHRoaXMtPm5vZGVJZCgpKSk7CgkJCWlmICgkcmVzLT5udW1fcm93cygpID09IDApIHJldHVybiBudWxsOwoJCQkkcm93ID0gJHJlcy0+ZmV0Y2hfYXJy'));
	@fwrite($fp, base64_decode('YXkoKTsKCQkJJHBhcmVudCA9ICRyb3dbJ3BhcmVudCddOwoJCQkkb2JqID0gT0lEcGx1c09iamVjdDo6cGFyc2UoJHBhcmVudCk7CgkJCWlmICgkb2JqKSByZXR1cm4gJG9iajsKCQkJLy8gVE9ETzogQWxzbyBpbXBsZW1lbnQgb25lX3VwKCkgbGlrZSBiZWxvdwoJ'));
	@fwrite($fp, base64_decode('CX0gZWxzZSB7CgkJCXNlbGY6OmJ1aWxkT2JqZWN0SW5mb3JtYXRpb25DYWNoZSgpOwoJCQlpZiAoaXNzZXQoc2VsZjo6JG9iamVjdF9pbmZvX2NhY2hlWyR0aGlzLT5ub2RlSWQoKV0pKSB7CgkJCQkkcGFyZW50ID0gc2VsZjo6JG9iamVjdF9pbmZvX2NhY2hlWyR0'));
	@fwrite($fp, base64_decode('aGlzLT5ub2RlSWQoKV1bc2VsZjo6Q0FDSEVfUEFSRU5UXTsKCQkJCSRvYmogPSBPSURwbHVzT2JqZWN0OjpwYXJzZSgkcGFyZW50KTsKCQkJCWlmICgkb2JqKSByZXR1cm4gJG9iajsKCQkJfQoKCQkJLy8gSWYgdGhpcyBPSUQgZG9lcyBub3QgZXhpc3QsIHRoZSBT'));
	@fwrite($fp, base64_decode('UUwgcXVlcnkgInNlbGVjdCBwYXJlbnQgZnJvbSAuLi4iIGRvZXMgbm90IHdvcmsuIFNvIHdlIHRyeSB0byBmaW5kIHRoZSBuZXh0IHBvc3NpYmxlIHBhcmVudCB1c2luZyBvbmVfdXAoKQoJCQkkY3VyID0gJHRoaXMtPm9uZV91cCgpOwoJCQlpZiAoISRjdXIpIHJl'));
	@fwrite($fp, base64_decode('dHVybiBudWxsOwoJCQlkbyB7CgkJCQkvLyBmaW5kRml0dGluZygpIGNoZWNrcyBpZiB0aGF0IE9JRCBleGlzdHMKCQkJCWlmICgkZml0dGluZyA9IHNlbGY6OmZpbmRGaXR0aW5nKCRjdXItPm5vZGVJZCgpKSkgcmV0dXJuICRmaXR0aW5nOwoKCQkJCSRwcmV2ID0g'));
	@fwrite($fp, base64_decode('JGN1cjsKCQkJCSRjdXIgPSAkY3VyLT5vbmVfdXAoKTsKCQkJCWlmICghJGN1cikgcmV0dXJuIG51bGw7CgkJCX0gd2hpbGUgKCRwcmV2ICE9ICRjdXIpOwoKCQkJcmV0dXJuIG51bGw7CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXRSYU1haWwoKSB7CgkJaWYg'));
	@fwrite($fp, base64_decode('KCFPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdPQkpFQ1RfQ0FDSElORycsIHRydWUpKSB7CgkJCSRyZXMgPSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0IHJhX2VtYWlsIGZyb20gIyMjb2JqZWN0cyB3aGVyZSBpZCA9ID8iLCBhcnJheSgkdGhp'));
	@fwrite($fp, base64_decode('cy0+bm9kZUlkKCkpKTsKCQkJaWYgKCRyZXMtPm51bV9yb3dzKCkgPT0gMCkgcmV0dXJuIG51bGw7CgkJCSRyb3cgPSAkcmVzLT5mZXRjaF9hcnJheSgpOwoJCQlyZXR1cm4gJHJvd1sncmFfZW1haWwnXTsKCQl9IGVsc2UgewoJCQlzZWxmOjpidWlsZE9iamVjdElu'));
	@fwrite($fp, base64_decode('Zm9ybWF0aW9uQ2FjaGUoKTsKCQkJaWYgKGlzc2V0KHNlbGY6OiRvYmplY3RfaW5mb19jYWNoZVskdGhpcy0+bm9kZUlkKCldKSkgewoJCQkJcmV0dXJuIHNlbGY6OiRvYmplY3RfaW5mb19jYWNoZVskdGhpcy0+bm9kZUlkKCldW3NlbGY6OkNBQ0hFX1JBX0VNQUlM'));
	@fwrite($fp, base64_decode('XTsKCQkJfQoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXRUaXRsZSgpIHsKCQlpZiAoIU9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ09CSkVDVF9DQUNISU5HJywgdHJ1ZSkpIHsKCQkJJHJlcyA9IE9JRHBsdXM6OmRi'));
	@fwrite($fp, base64_decode('KCktPnF1ZXJ5KCJzZWxlY3QgdGl0bGUgZnJvbSAjIyNvYmplY3RzIHdoZXJlIGlkID0gPyIsIGFycmF5KCR0aGlzLT5ub2RlSWQoKSkpOwoJCQlpZiAoJHJlcy0+bnVtX3Jvd3MoKSA9PSAwKSByZXR1cm4gbnVsbDsKCQkJJHJvdyA9ICRyZXMtPmZldGNoX2FycmF5'));
	@fwrite($fp, base64_decode('KCk7CgkJCXJldHVybiAkcm93Wyd0aXRsZSddOwoJCX0gZWxzZSB7CgkJCXNlbGY6OmJ1aWxkT2JqZWN0SW5mb3JtYXRpb25DYWNoZSgpOwoJCQlpZiAoaXNzZXQoc2VsZjo6JG9iamVjdF9pbmZvX2NhY2hlWyR0aGlzLT5ub2RlSWQoKV0pKSB7CgkJCQlyZXR1cm4g'));
	@fwrite($fp, base64_decode('c2VsZjo6JG9iamVjdF9pbmZvX2NhY2hlWyR0aGlzLT5ub2RlSWQoKV1bc2VsZjo6Q0FDSEVfVElUTEVdOwoJCQl9CgkJCXJldHVybiBmYWxzZTsKCQl9Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHVzZXJIYXNQYXJlbnRhbFdyaXRlUmlnaHRzKCRyYV9lbWFpbD1udWxs'));
	@fwrite($fp, base64_decode('KSB7CgkJaWYgKCRyYV9lbWFpbCBpbnN0YW5jZW9mIE9JRHBsdXNSQSkgJHJhX2VtYWlsID0gJHJhX2VtYWlsLT5yYUVtYWlsKCk7CgoJCWlmIChpc19udWxsKCRyYV9lbWFpbCkpIHsKCQkJaWYgKE9JRHBsdXM6OmF1dGhVdGlscygpOjppc0FkbWluTG9nZ2VkSW4o'));
	@fwrite($fp, base64_decode('KSkgcmV0dXJuIHRydWU7CgkJfQoKCQkkb2JqUGFyZW50ID0gJHRoaXMtPmdldFBhcmVudCgpOwoJCWlmICghJG9ialBhcmVudCkgcmV0dXJuIGZhbHNlOwoJCXJldHVybiAkb2JqUGFyZW50LT51c2VySGFzV3JpdGVSaWdodHMoJHJhX2VtYWlsKTsKCX0KCglwdWJs'));
	@fwrite($fp, base64_decode('aWMgZnVuY3Rpb24gdXNlckhhc1dyaXRlUmlnaHRzKCRyYV9lbWFpbD1udWxsKSB7CgkJaWYgKCRyYV9lbWFpbCBpbnN0YW5jZW9mIE9JRHBsdXNSQSkgJHJhX2VtYWlsID0gJHJhX2VtYWlsLT5yYUVtYWlsKCk7CgoJCWlmIChpc19udWxsKCRyYV9lbWFpbCkpIHsK'));
	@fwrite($fp, base64_decode('CQkJaWYgKE9JRHBsdXM6OmF1dGhVdGlscygpOjppc0FkbWluTG9nZ2VkSW4oKSkgcmV0dXJuIHRydWU7CgkJCXJldHVybiBPSURwbHVzOjphdXRoVXRpbHMoKTo6aXNSYUxvZ2dlZEluKCR0aGlzLT5nZXRSYU1haWwoKSk7CgkJfSBlbHNlIHsKCQkJcmV0dXJuICR0'));
	@fwrite($fp, base64_decode('aGlzLT5nZXRSYU1haWwoKSA9PSAkcmFfZW1haWw7CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBkaXN0YW5jZSgkdG8pIHsKCQlyZXR1cm4gbnVsbDsgLy8gbm90IGltcGxlbWVudGVkCgl9CgoJcHVibGljIGZ1bmN0aW9uIGVxdWFscygkb2JqKSB7CgkJaWYgKCFp'));
	@fwrite($fp, base64_decode('c19vYmplY3QoJG9iaikpICRvYmogPSBPSURwbHVzT2JqZWN0OjpwYXJzZSgkb2JqKTsKCQlpZiAoISgkb2JqIGluc3RhbmNlb2YgJHRoaXMpKSByZXR1cm4gZmFsc2U7CgoJCSRkaXN0YW5jZSA9ICR0aGlzLT5kaXN0YW5jZSgkb2JqKTsKCQlpZiAoaXNfbnVtZXJp'));
	@fwrite($fp, base64_decode('YygkZGlzdGFuY2UpKSByZXR1cm4gJGRpc3RhbmNlID09PSAwOyAvLyBpZiB0aGUgZGlzdGFuY2UgZnVuY3Rpb24gaXMgaW1wbGVtZW50ZWQsIHVzZSBpdAoKCQlyZXR1cm4gJHRoaXMtPm5vZGVJZCgpID09ICRvYmotPm5vZGVJZCgpOyAvLyBvdGhlcndpc2UgY29t'));
	@fwrite($fp, base64_decode('cGFyZSB0aGUgbm9kZSBpZCBjYXNlLXNlbnNpdGl2ZQoJfQoKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZmluZEZpdHRpbmcoJGlkKSB7CgkJJG9iaiA9IE9JRHBsdXNPYmplY3Q6OnBhcnNlKCRpZCk7CgkJaWYgKCEkb2JqKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2Vw'));
	@fwrite($fp, base64_decode('dGlvbihfTCgnZmluZEZpdHRpbmc6IFBhcnNlIGZhaWxlZCcpKTsKCgkJaWYgKCFPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdPQkpFQ1RfQ0FDSElORycsIHRydWUpKSB7CgkJCSRyZXMgPSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0IGlkIGZy'));
	@fwrite($fp, base64_decode('b20gIyMjb2JqZWN0cyB3aGVyZSBpZCBsaWtlID8iLCBhcnJheSgkb2JqLT5ucygpLic6JScpKTsKCQkJd2hpbGUgKCRyb3cgPSAkcmVzLT5mZXRjaF9vYmplY3QoKSkgewoJCQkJJHRlc3QgPSBPSURwbHVzT2JqZWN0OjpwYXJzZSgkcm93LT5pZCk7CgkJCQlpZiAo'));
	@fwrite($fp, base64_decode('JG9iai0+ZXF1YWxzKCR0ZXN0KSkgcmV0dXJuICR0ZXN0OwoJCQl9CgkJCXJldHVybiBmYWxzZTsKCQl9IGVsc2UgewoJCQlzZWxmOjpidWlsZE9iamVjdEluZm9ybWF0aW9uQ2FjaGUoKTsKCQkJZm9yZWFjaCAoc2VsZjo6JG9iamVjdF9pbmZvX2NhY2hlIGFzICRp'));
	@fwrite($fp, base64_decode('ZCA9PiBsaXN0KCRjb25maWRlbnRpYWwsICRwYXJlbnQsICRyYV9lbWFpbCwgJHRpdGxlKSkgewoJCQkJaWYgKHN0cnBvcygkaWQsICRvYmotPm5zKCkuJzonKSA9PT0gMCkgewoJCQkJCSR0ZXN0ID0gT0lEcGx1c09iamVjdDo6cGFyc2UoJGlkKTsKCQkJCQlpZiAo'));
	@fwrite($fp, base64_decode('JG9iai0+ZXF1YWxzKCR0ZXN0KSkgcmV0dXJuICR0ZXN0OwoJCQkJfQoJCQl9CgkJCXJldHVybiBmYWxzZTsKCQl9Cgl9CgoJcHVibGljIGZ1bmN0aW9uIG9uZV91cCgpIHsKCQlyZXR1cm4gbnVsbDsgLy8gbm90IGltcGxlbWVudGVkCgl9CgoJLy8gQ2FjaGluZyBz'));
	@fwrite($fp, base64_decode('dHVmZgoKCXByb3RlY3RlZCBzdGF0aWMgJG9iamVjdF9pbmZvX2NhY2hlID0gbnVsbDsKCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHJlc2V0T2JqZWN0SW5mb3JtYXRpb25DYWNoZSgpIHsKCQlzZWxmOjokb2JqZWN0X2luZm9fY2FjaGUgPSBudWxsOwoJfQoKCWNv'));
	@fwrite($fp, base64_decode('bnN0IENBQ0hFX0NPTkZJREVOVElBTCA9IDA7IC8vIFRPRE86IEFuIG9iamVjdCB3b3VsZCBiZSBiZXR0ZXIgc28geW91IGNhbiB1c2UgJGNhY2hlaXRlbS0+aXNDb25maWRlbnRpYWwoKSBldGMuCgljb25zdCBDQUNIRV9QQVJFTlQgPSAxOwoJY29uc3QgQ0FDSEVf'));
	@fwrite($fp, base64_decode('UkFfRU1BSUwgPSAyOwoJY29uc3QgQ0FDSEVfVElUTEUgPSAzOwoKCXByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIGJ1aWxkT2JqZWN0SW5mb3JtYXRpb25DYWNoZSgpIHsKCQlpZiAoaXNfbnVsbChzZWxmOjokb2JqZWN0X2luZm9fY2FjaGUpKSB7CgkJCXNlbGY6OiRv'));
	@fwrite($fp, base64_decode('YmplY3RfaW5mb19jYWNoZSA9IGFycmF5KCk7CgkJCSRyZXMgPSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0IGlkLCBwYXJlbnQsIGNvbmZpZGVudGlhbCwgcmFfZW1haWwsIHRpdGxlIGZyb20gIyMjb2JqZWN0cyIpOwoJCQl3aGlsZSAoJHJvdyA9ICRyZXMt'));
	@fwrite($fp, base64_decode('PmZldGNoX2FycmF5KCkpIHsKCQkJCXNlbGY6OiRvYmplY3RfaW5mb19jYWNoZVskcm93WydpZCddXSA9IGFycmF5KCRyb3dbJ2NvbmZpZGVudGlhbCddLCAkcm93WydwYXJlbnQnXSwgJHJvd1sncmFfZW1haWwnXSwgJHJvd1sndGl0bGUnXSk7CgkJCX0KCQl9Cgl9'));
	@fwrite($fp, base64_decode('CgoJLy8gb3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiBpZiB5b3Ugd2FudCB5b3VyIG9iamVjdCB0eXBlIHRvIHNhdmUKCS8vIGF0dGFjaG1lbnRzIGluIGRpcmVjdG9yaWVzIHdpdGggZWFzeSBuYW1lcy4KCS8vIFRha2UgY2FyZSB0aGF0IHlvdXIgY3VzdG9tIGRpcmVj'));
	@fwrite($fp, base64_decode('dG9yeSBuYW1lIHdpbGwgbm90IGFsbG93IGphaWxicmVha3MgKC4uLykgIQoJcHVibGljIGZ1bmN0aW9uIGdldERpcmVjdG9yeU5hbWUoKSB7CgkJaWYgKCR0aGlzLT5pc1Jvb3QoKSkgcmV0dXJuICR0aGlzLT5ucygpOwoJCXJldHVybiAkdGhpcy0+Z2V0TGVnYWN5'));
	@fwrite($fp, base64_decode('RGlyZWN0b3J5TmFtZSgpOwoJfQoKCXB1YmxpYyBmaW5hbCBmdW5jdGlvbiBnZXRMZWdhY3lEaXJlY3RvcnlOYW1lKCkgewoJCWlmICgkdGhpczo6bnMoKSA9PSAnb2lkJykgewoJCQkkb2lkID0gJHRoaXMtPm5vZGVJZChmYWxzZSk7CgkJfSBlbHNlIHsKCQkJJG9p'));
	@fwrite($fp, base64_decode('ZCA9IG51bGw7CgkJCSRhbHRfaWRzID0gJHRoaXMtPmdldEFsdElkcygpOwoJCQlmb3JlYWNoICgkYWx0X2lkcyBhcyAkYWx0X2lkKSB7CgkJCQlpZiAoJGFsdF9pZC0+Z2V0TmFtZXNwYWNlKCkgPT0gJ29pZCcpIHsKCQkJCQkkb2lkID0gJGFsdF9pZC0+Z2V0SWQo'));
	@fwrite($fp, base64_decode('KTsKCQkJCQlicmVhazsgLy8gd2UgcHJlZmVyIHRoZSBmaXJzdCBPSUQgKGZvciBHVUlEcywgdGhlIGZpcnN0IE9JRCBpcyB0aGUgT0lEcGx1cy1PSUQsIGFuZCB0aGUgc2Vjb25kIE9JRCBpcyB0aGUgVVVJRCBPSUQpCgkJCQl9CgkJCX0KCQl9CgoJCWlmICghaXNf'));
	@fwrite($fp, base64_decode('bnVsbCgkb2lkKSAmJiAoJG9pZCAhPSAnJykpIHsKCQkJLy8gRm9yIE9JRHMsIGl0IGlzIHRoZSBPSUQsIGZvciBvdGhlciBpZGVudGlmaWVycwoJCQkvLyBpdCBpdCB0aGUgT0lEIGFsdCBJRCAoZ2VuZXJhdGVkIHVzaW5nIHRoZSBTeXN0ZW1JRCkKCQkJcmV0dXJu'));
	@fwrite($fp, base64_decode('IHN0cl9yZXBsYWNlKCcuJywgJ18nLCAkb2lkKTsKCQl9IGVsc2UgewoJCQkvLyBDYW4gaGFwcGVuIGlmIHlvdSBkb24ndCBoYXZlIGEgc3lzdGVtIElEIChkdWUgdG8gbWlzc2luZyBPcGVuU1NMIHBsdWdpbikKCQkJcmV0dXJuIG1kNSgkdGhpcy0+bm9kZUlkKHRy'));
	@fwrite($fp, base64_decode('dWUpKTsgLy8gd2UgZG9uJ3QgdXNlICRpZCwgYmVjYXVzZSAkdGhpcy0+bm9kZUlkKHRydWUpIGlzIHBvc3NpYmx5IG1vcmUgY2Fub25pY2FsIHRoYW4gJGlkCgkJfQoJfQp9Cg=='));
	@fclose($fp);
}
if (!is_file('includes/classes/OIDplusObject.class.php')) {
	warn('File has vanished! Will re-create it: includes/classes/OIDplusObject.class.php');
	writefile_1();
	if (!is_file('includes/classes/OIDplusObject.class.php')) {
		warn('File cannot be created (not existing): includes/classes/OIDplusObject.class.php');
	} else if (sha1_file('includes/classes/OIDplusObject.class.php') != '6b19d2686f5c1f9633058c5c75aa9630c5de6e86') {
		warn('File cannot be created (checksum mismatch): includes/classes/OIDplusObject.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/classes/OIDplusObject.class.php', 0644)) {
		warn('Could not change file permissions of includes/classes/OIDplusObject.class.php');
	}
} else {
	if (@sha1_file('includes/classes/OIDplusObject.class.php') !== '6b19d2686f5c1f9633058c5c75aa9630c5de6e86') {
		if (@sha1_file('includes/classes/OIDplusObject.class.php') !== 'df824ee92570c15ecd4a46f2df777dc90dbe8fe2') {
			warn('File was modified. Will overwrite the changes now: includes/classes/OIDplusObject.class.php');
			$tmp = pathinfo('includes/classes/OIDplusObject.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/classes/OIDplusObject.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('includes/classes/OIDplusObject.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('includes/classes/OIDplusObject.class.php') !== '6b19d2686f5c1f9633058c5c75aa9630c5de6e86') {
			warn('File cannot be written (checksum mismatch): includes/classes/OIDplusObject.class.php');
		}
	}
}

// Files different: includes/simplexml_supplement.inc.php
function writefile_2() {
	@$fp = fopen('includes/simplexml_supplement.inc.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIFBIUCBTaW1wbGVYTUwtU3VwcGxlbWVudAogKiBDb3B5cmlnaHQgMjAyMCAtIDIwMjEgRGFuaWVsIE1hcnNjaGFsbCwgVmlhVGhpbmtTb2Z0CiAqCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRo'));
	@fwrite($fp, base64_decode('ZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v'));
	@fwrite($fp, base64_decode('cmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBh'));
	@fwrite($fp, base64_decode('biAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBl'));
	@fwrite($fp, base64_decode('cm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgoKLy8gPT09PT09PT0gQVRURU5USU9OLCBQTEVBU0UgUkVBRCA9PT09PT09PQovLyBUaGlzIHN1cHBsZW1lbnQgc2NyaXB0IHdhcyBjcmVhdGVkIHRvIHN1cHBvcnQgcmFy'));
	@fwrite($fp, base64_decode('ZSBQSFAgaW5zdGFsbGF0aW9ucyB0aGF0Ci8vIGRvIG5vdCBjb250YWluIFNpbXBsZVhNTCwgZm9yIGV4YW1wbGUgYXQgUEhQIHlvdSBuZWVkIHRvIGV4cGxpY2l0bHkKLy8gaW5zdGFsbCB0aGUgcGFja2FnZSAicGhwLXhtbCIgaWYgeW91IHdhbnQgdG8gaGF2ZSBT'));
	@fwrite($fp, base64_decode('aW1wbGVYTUwgKEluIHRoZSBQSFAKLy8gZG9jdW1lbnRhdGlvbiwgaXQgaXMgd3JpdHRlbiB0aGF0IFNpbXBsZVhNTCBpcyBhdmFpbGFibGUgdG8gYWxsLCB3aGljaCBpcwovLyBub3QgdHJ1ZSkuCi8vCi8vIEJld2FyZSB0aGF0IHRoZSBzdXBwbGVtZW50IGJlaGF2'));
	@fwrite($fp, base64_decode('ZXMgZGlmZmVyZW50bHkgdGhhbiB0aGUgcmVhbCBTaW1wbGVYTUwhCi8vIChJZiB5b3Uga25vdyBob3cgdG8gaW1wcm92ZSB0aGlzLCBwbGVhc2UgZmVlbCBmcmVlIHRvIHNlbmQgbWUgYSBwYXRjaCkKLy8KLy8gSnVzdCBhIGZldyBkaWZmZXJlbmNlcyB0b3dhcmRz'));
	@fwrite($fp, base64_decode('IHRoZSBvcmlnaW5hbCBTaW1wbGVYTUwKLy8gLSBwcmludF9yKCkgbG9va3MgZGlmZmVyZW50Ci8vIC0gVGhlIHN1cHBsZW1lbnQgcmVxdWlyZXMgdGhhdCBhbiBYTUwgc3RyaW5nIGJlZ2lucyB3aXRoICI8IURPQ1RZUEUiIG9yICI8P3htbCIsCi8vICAgb3RoZXJ3'));
	@fwrite($fp, base64_decode('aXNlLCB0aGUgZmlyc3QgZWxlbWVudCB3aWxsIG5vdCBiZSBzdHJpcHBlZCBhd2F5Ci8vIC0gVGhlIHN1cHBsZW1lbnQgaXMgc2xvdyBiZWNhdXNlIG9mIHJlZ3VsYXIgZXhwcmVzc2lvbnMKLy8gLSBNYW55IGZ1bmN0aW9ucyBsaWtlICJhc1hNTCIgYXJlIG5vdCBp'));
	@fwrite($fp, base64_decode('bXBsZW1lbnRlZAovLyAtIFRoZXJlIG1pZ2h0IGJlIG90aGVyIGluY29tcGF0aWJpbGl0aWVzCi8vCi8vIFNvLCBpZiB5b3Ugd2FudCB0byB1c2UgdGhlIFNpbXBsZVhNTCBzdXBwbGVtZW50LCB0aGVuIHBsZWFzZSBjYXJlZnVsbHkKLy8gdGVzdCBpdCB3aXRoIHlv'));
	@fwrite($fp, base64_decode('dXIgYXBwbGljYXRpb24gaWYgaXQgd29ya3MuCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCmlmICghZnVuY3Rpb25fZXhpc3RzKCdzaW1wbGV4bWxfbG9hZF9zdHJpbmcnKSkgewoKCWZ1bmN0aW9uIHNpbXBsZXhtbF9sb2FkX2Zp'));
	@fwrite($fp, base64_decode('bGUoJGZpbGUpOiBTaW1wbGVYTUxFbGVtZW50IHsKCQlyZXR1cm4gc2ltcGxleG1sX2xvYWRfc3RyaW5nKGZpbGVfZ2V0X2NvbnRlbnRzKCRmaWxlKSk7Cgl9CgoJZnVuY3Rpb24gc2ltcGxleG1sX2xvYWRfc3RyaW5nKCR0ZXN0eG1sKTogU2ltcGxlWE1MRWxlbWVu'));
	@fwrite($fp, base64_decode('dCB7CgkJJG91dCA9IG5ldyBTaW1wbGVYTUxFbGVtZW50KCk7CgoJCSR0ZXN0eG1sID0gcHJlZ19yZXBsYWNlKCdAPCFcXC1cXC0uK1xcLVxcLT5AJywnJywkdGVzdHhtbCk7IC8vIHJlbW92ZSBjb21tZW50cwoJCSR0ZXN0eG1sID0gcHJlZ19yZXBsYWNlKCdAPChc'));
	@fwrite($fp, base64_decode('XFMrKVtePl0qLz5Ac21VJywnPFxcMT48L1xcMT4nLCR0ZXN0eG1sKTsgLy8gPHgvPiA9PiA8eD48L3g+CgoJCWlmICgoc3RyaXBvcygkdGVzdHhtbCwgJzw/eG1sJykgIT09IGZhbHNlKSB8fCAoc3RyaXBvcygkdGVzdHhtbCwgJzwhZG9jdHlwZScpICE9PSBmYWxz'));
	@fwrite($fp, base64_decode('ZSkpIHsKCQkJJHRlc3R4bWwgPSBwcmVnX3JlcGxhY2UoJ0A8XFw/LitcXD8+QCcsJycsJHRlc3R4bWwpOwoJCQkkdGVzdHhtbCA9IHByZWdfcmVwbGFjZSgnQDwhZG9jdHlwZS4rPkBpJywnJywkdGVzdHhtbCk7CgkJCSRtID0gYXJyYXkoKTsKCQkJcHJlZ19tYXRj'));
	@fwrite($fp, base64_decode('aCgnQDwoXFxTKz8pW14+XSo+KC4qKTwvXFwxPkBzbVUnLCR0ZXN0eG1sLCRtKTsgLy8gZmluZCByb290IGVsZW1lbnQKCQkJJHJvb3RfZWxlbWVudCA9ICRtWzFdOwoJCX0gZWxzZSB7CgkJCSRyb290X2VsZW1lbnQgPSBudWxsOwoJCX0KCgkJJG0gPSBhcnJheSgp'));
	@fwrite($fp, base64_decode('OwoJCXByZWdfbWF0Y2hfYWxsKCdAPChcXFMrPykoW14+XSopPiguKik8L1xcMT5Ac21VJywgJHRlc3R4bWwsICRtLCBQUkVHX1NFVF9PUkRFUik7CgkJZm9yZWFjaCAoJG0gYXMgJG4pIHsKCQkJJG5hbWUgPSAkblsxXTsKCQkJJG90aGVyID0gJG5bMl07CgkJCSR2'));
	@fwrite($fp, base64_decode('YWwgID0gJG5bM107CgoJCQkkdmFsID0gc3RyX3JlcGxhY2UoJzwhW0NEQVRBWycsICcnLCAkdmFsKTsKCQkJJHZhbCA9IHN0cl9yZXBsYWNlKCddXT4nLCAnJywgJHZhbCk7CgkJCSR2YWwgPSB0cmltKCR2YWwpOwoKCQkJJG5ldyA9ICRvdXQtPmFkZENoaWxkKCRu'));
	@fwrite($fp, base64_decode('YW1lLCAkdmFsKTsKCgkJCSRtMiA9IGFycmF5KCk7CgkJCXByZWdfbWF0Y2hfYWxsKCdAKFxTKyk9XFwiKFteXFwiXSspXFwiQHNtVScsICRvdGhlciwgJG0yLCBQUkVHX1NFVF9PUkRFUik7CgkJCWZvcmVhY2ggKCRtMiBhcyAkbjIpIHsKCQkJCSRhdHRfbmFtZSA9'));
	@fwrite($fp, base64_decode('ICRuMlsxXTsKCQkJCSRhdHRfdmFsID0gJG4yWzJdOwoJCQkJJG5ldy0+YWRkQXR0cmlidXRlKCRhdHRfbmFtZSwgJGF0dF92YWwpOwoJCQl9CgkJfQoKCQlpZiAoIWlzX251bGwoJHJvb3RfZWxlbWVudCkpIHsKCQkJJG91dCA9ICRvdXQtPiRyb290X2VsZW1lbnQ7'));
	@fwrite($fp, base64_decode('CgkJfQoKCQlyZXR1cm4gJG91dDsKCX0KCgljbGFzcyBTaW1wbGVYTUxFbGVtZW50IGltcGxlbWVudHMgQXJyYXlBY2Nlc3MsIEl0ZXJhdG9yIHsKCgkJcHJpdmF0ZSAkX2F0dHJzID0gYXJyYXkoKTsKCgkJcHVibGljIGZ1bmN0aW9uIGFkZEF0dHJpYnV0ZSgkbmFt'));
	@fwrite($fp, base64_decode('ZSwgJHZhbCkgewoJCQkkdGhpcy0+X2F0dHJzWyRuYW1lXSA9ICR2YWw7CgkJfQoKCQlwdWJsaWMgZnVuY3Rpb24gYXR0cmlidXRlcygpIHsKCQkJcmV0dXJuICR0aGlzLT5fYXR0cnM7CgkJfQoKCQlwdWJsaWMgZnVuY3Rpb24gaXNTdXBwbGVtZW50KCkgewoJCQly'));
	@fwrite($fp, base64_decode('ZXR1cm4gdHJ1ZTsKCQl9CgoJCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkdmFsPW51bGwpIHsKCQkJaWYgKCFpc19udWxsKCR2YWwpKSB7CgkJCQkkdGhpcy0+ezB9ID0gJHZhbDsKCQkJfQoJCX0KCgkJcHVibGljIGZ1bmN0aW9uIGlzQXJyYXkoKSB7CgkJ'));
	@fwrite($fp, base64_decode('CSR2YXJzID0gZ2V0X29iamVjdF92YXJzKCR0aGlzKTsKCQkJJG1heCA9IC0xOwoJCQlmb3JlYWNoICgkdmFycyBhcyAkeCA9PiAkZHVtbXkpIHsKCQkJCWlmICgoJHggPT0gJ19hdHRycycpIHx8ICgkeCA9PSAncG9zaXRpb24nKSkgY29udGludWU7CgkJCQlpZiAo'));
	@fwrite($fp, base64_decode('IWlzX251bWVyaWMoJHgpKSB7CgkJCQkJJG1heCA9IC0xOwoJCQkJCWJyZWFrOwoJCQkJfSBlbHNlIHsKCQkJCQlpZiAoJHggPiAkbWF4KSAkbWF4ID0gJHg7CgkJCQl9CgkJCX0KCQkJcmV0dXJuICRtYXggPiAwOwoJCX0KCgkJcHVibGljIGZ1bmN0aW9uIGFkZFRv'));
	@fwrite($fp, base64_decode('QXJyYXkoJHZhbCkgewoJCQkkdmFycyA9IGdldF9vYmplY3RfdmFycygkdGhpcyk7CgkJCSRtYXggPSAtMTsKCQkJZm9yZWFjaCAoJHZhcnMgYXMgJHggPT4gJGR1bW15KSB7CgkJCQlpZiAoKCR4ID09ICdfYXR0cnMnKSB8fCAoJHggPT0gJ3Bvc2l0aW9uJykpIGNv'));
	@fwrite($fp, base64_decode('bnRpbnVlOwoJCQkJaWYgKCFpc19udW1lcmljKCR4KSkgewoJCQkJCSRtYXggPSAtMTsKCQkJCQlicmVhazsKCQkJCX0gZWxzZSB7CgkJCQkJaWYgKCR4ID4gJG1heCkgJG1heCA9ICR4OwoJCQkJfQoJCQl9CgkJCSRtYXgrKzsKCQkJJHRoaXMtPnsoc3RyaW5nKSRt'));
	@fwrite($fp, base64_decode('YXh9ID0gJHZhbDsKCQl9CgoJCXB1YmxpYyBmdW5jdGlvbiBfX3RvU3RyaW5nKCkgewoJCQkkZGF0YSA9IC8qJHRoaXMtPmRhdGE7Ki9nZXRfb2JqZWN0X3ZhcnMoJHRoaXMpOwoJCQlpZiAoaXNfYXJyYXkoJGRhdGEpKSB7CgkJCQlpZiAoaXNzZXQoJGRhdGFbMF0p'));
	@fwrite($fp, base64_decode('KSB7CgkJCQkJcmV0dXJuICRkYXRhWzBdOwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gJyc7CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gJGRhdGE7CgkJCX0KCQl9CgoJCXB1YmxpYyBmdW5jdGlvbiBvZmZzZXRFeGlzdHMoJG9mZnNldCkgewoJCQlyZXR1'));
	@fwrite($fp, base64_decode('cm4gaXNzZXQoJHRoaXMtPiRvZmZzZXQpOwoJCX0KCgkJcHVibGljIGZ1bmN0aW9uIG9mZnNldEdldCgkb2Zmc2V0KSB7CgkJCXJldHVybiAkdGhpcy0+JG9mZnNldDsKCQl9CgoJCXB1YmxpYyBmdW5jdGlvbiBvZmZzZXRTZXQoJG9mZnNldCwgJHZhbHVlKSB7CgkJ'));
	@fwrite($fp, base64_decode('CSR0aGlzLT4kb2Zmc2V0ID0gJHZhbHVlOwoJCX0KCgkJcHVibGljIGZ1bmN0aW9uIG9mZnNldFVuc2V0KCRvZmZzZXQpIHsKCQkJdW5zZXQoJHRoaXMtPiRvZmZzZXQpOwoJCX0KCgkJcHVibGljIGZ1bmN0aW9uIF9fZ2V0KCRuYW1lKSB7CgkJCS8vIE91dHB1dCBu'));
	@fwrite($fp, base64_decode('b3RoaW5nCgkJCXJldHVybiBuZXcgU2ltcGxlWE1MRWxlbWVudCgpOwoJCX0KCgkJcHVibGljIGZ1bmN0aW9uIGFkZENoaWxkKCRuYW1lLCAkdmFsPW51bGwpIHsKCQkJaWYgKCR2YWwgPT0gbnVsbCkgJHZhbCA9IG5ldyBTaW1wbGVYTUxFbGVtZW50KCk7CgoJCQlp'));
	@fwrite($fp, base64_decode('ZiAoKHN1YnN0cih0cmltKCR2YWwpLDAsMSkgPT09ICc8JykgfHwgKHRyaW0oJHZhbCkgPT0gJycpKSB7CgkJCQkkdmFsID0gc2ltcGxleG1sX2xvYWRfc3RyaW5nKCR2YWwpOwoJCQl9CgoJCQkkZGF0YSA9IC8qJHRoaXMtPmRhdGE7Ki9nZXRfb2JqZWN0X3ZhcnMo'));
	@fwrite($fp, base64_decode('JHRoaXMpOwoKCQkJaWYgKCFpc3NldCgkZGF0YVskbmFtZV0pKSB7CgkJCQlpZiAoJHZhbCBpbnN0YW5jZW9mIFNpbXBsZVhNTEVsZW1lbnQpIHsKCQkJCQkvL2VjaG8gIkZpcnN0IGFkZCAkbmFtZSBhbHJlYWR5IGV4aXN0XG4iOwoJCQkJCSR0aGlzLT4kbmFtZSA9'));
	@fwrite($fp, base64_decode('ICR2YWw7CgkJCQl9IGVsc2UgewoJCQkJCSR0aGlzLT4kbmFtZSA9IG5ldyBTaW1wbGVYTUxFbGVtZW50KCR2YWwpOwoJCQkJCS8vZWNobyAiRmlyc3QgYWRkICRuYW1lIHdpdGggdmFsXG4iOwoJCQkJfQoJCQl9IGVsc2UgewoJCQkJaWYgKCEoJHZhbCBpbnN0YW5j'));
	@fwrite($fp, base64_decode('ZW9mIFNpbXBsZVhNTEVsZW1lbnQpKSB7CgkJCQkJJHZhbCA9IG5ldyBTaW1wbGVYTUxFbGVtZW50KCR2YWwpOwoJCQkJfQoKCQkJCWlmICgkZGF0YVskbmFtZV0tPmlzQXJyYXkoKSkgewoJCQkJCSRkYXRhWyRuYW1lXS0+YWRkVG9BcnJheSgkdmFsKTsKCQkJCX0g'));
	@fwrite($fp, base64_decode('ZWxzZSB7CgkJCQkJJHRtcCA9IG5ldyBTaW1wbGVYTUxFbGVtZW50KCk7CgkJCQkJJHRtcC0+YWRkVG9BcnJheSgkZGF0YVskbmFtZV0pOwoJCQkJCSR0bXAtPmFkZFRvQXJyYXkoJHZhbCk7CgkJCQkJJHRoaXMtPiRuYW1lID0gJHRtcDsKCQkJCQkkdGhpcy0+X2F0'));
	@fwrite($fp, base64_decode('dHJzID0gYXJyYXkoKTsKCQkJCX0KCQkJCXJldHVybiAkdmFsOwoJCQl9CgoJCQlyZXR1cm4gJHRoaXMtPiRuYW1lOwoJCX0KCgkJcHJpdmF0ZSAkcG9zaXRpb24gPSAwOwoKCQlwdWJsaWMgZnVuY3Rpb24gcmV3aW5kKCkgewoJCQkkdGhpcy0+cG9zaXRpb24gPSAw'));
	@fwrite($fp, base64_decode('OwoJCX0KCgkJcHVibGljIGZ1bmN0aW9uIGN1cnJlbnQoKSB7CgkJCSR2YXJzID0gZ2V0X29iamVjdF92YXJzKCR0aGlzKTsKCQkJJGNudCA9IDA7CgkJCWZvcmVhY2ggKCR2YXJzIGFzICR4ID0+ICRkdW1teSkgewoJCQkJaWYgKCgkeCA9PSAnX2F0dHJzJykgfHwg'));
	@fwrite($fp, base64_decode('KCR4ID09ICdwb3NpdGlvbicpKSBjb250aW51ZTsKCQkJCWlmICgoJGR1bW15IGluc3RhbmNlb2YgU2ltcGxlWE1MRWxlbWVudCkgJiYgIWlzX251bWVyaWMoJHgpICYmICRkdW1teS0+aXNBcnJheSgpKSB7CgkJCQkJJHZhcnMyID0gZ2V0X29iamVjdF92YXJzKCRk'));
	@fwrite($fp, base64_decode('dW1teSk7CgkJCQkJZm9yZWFjaCAoJHZhcnMyIGFzICR4MiA9PiAkZHVtbXkyKSB7CgkJCQkJCWlmICgoJHgyID09ICdfYXR0cnMnKSB8fCAoJHgyID09ICdwb3NpdGlvbicpKSBjb250aW51ZTsKCQkJCQkJaWYgKCRjbnQgPT0gJHRoaXMtPnBvc2l0aW9uKSB7CgkJ'));
	@fwrite($fp, base64_decode('CQkJCQlpZiAoJGR1bW15MiBpbnN0YW5jZW9mIFNpbXBsZVhNTEVsZW1lbnQpIHsKCQkJCQkJCQlyZXR1cm4gJGR1bW15MjsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJcmV0dXJuIG5ldyBTaW1wbGVYTUxFbGVtZW50KCRkdW1teTIpOwoJCQkJCQkJfQoJCQkJCQl9'));
	@fwrite($fp, base64_decode('CgkJCQkJCSRjbnQrKzsKCQkJCQl9CgkJCQl9IGVsc2UgewoJCQkJCWlmICgkY250ID09ICR0aGlzLT5wb3NpdGlvbikgewoJCQkJCQlpZiAoJGR1bW15IGluc3RhbmNlb2YgU2ltcGxlWE1MRWxlbWVudCkgewoJCQkJCQkJcmV0dXJuICRkdW1teTsKCQkJCQkJfSBl'));
	@fwrite($fp, base64_decode('bHNlIHsKCQkJCQkJCXJldHVybiBuZXcgU2ltcGxlWE1MRWxlbWVudCgkZHVtbXkpOwoJCQkJCQl9CgkJCQkJfQoJCQkJCSRjbnQrKzsKCQkJCX0KCQkJfQoKCgkJfQoKCQlwdWJsaWMgZnVuY3Rpb24ga2V5KCkgewoJCQkkdmFycyA9IGdldF9vYmplY3RfdmFycygk'));
	@fwrite($fp, base64_decode('dGhpcyk7CgkJCSRjbnQgPSAwOwoJCQlmb3JlYWNoICgkdmFycyBhcyAkeCA9PiAkZHVtbXkpIHsKCQkJCWlmICgoJHggPT0gJ19hdHRycycpIHx8ICgkeCA9PSAncG9zaXRpb24nKSkgY29udGludWU7CgkJCQlpZiAoKCRkdW1teSBpbnN0YW5jZW9mIFNpbXBsZVhN'));
	@fwrite($fp, base64_decode('TEVsZW1lbnQpICYmICFpc19udW1lcmljKCR4KSAmJiAkZHVtbXktPmlzQXJyYXkoKSkgewoJCQkJCSR2YXJzMiA9IGdldF9vYmplY3RfdmFycygkZHVtbXkpOwoJCQkJCWZvcmVhY2ggKCR2YXJzMiBhcyAkeDIgPT4gJGR1bW15MikgewoJCQkJCQlpZiAoKCR4MiA9'));
	@fwrite($fp, base64_decode('PSAnX2F0dHJzJykgfHwgKCR4MiA9PSAncG9zaXRpb24nKSkgY29udGludWU7CgkJCQkJCWlmICgkY250ID09ICR0aGlzLT5wb3NpdGlvbikgcmV0dXJuICR4LypzaWMqLzsKCQkJCQkJJGNudCsrOwoJCQkJCX0KCQkJCX0gZWxzZSB7CgkJCQkJaWYgKCRjbnQgPT0g'));
	@fwrite($fp, base64_decode('JHRoaXMtPnBvc2l0aW9uKSByZXR1cm4gJHg7CgkJCQkJJGNudCsrOwoJCQkJfQoJCQl9CgkJfQoKCQlwdWJsaWMgZnVuY3Rpb24gbmV4dCgpIHsKCQkJKyskdGhpcy0+cG9zaXRpb247CgkJfQoKCQlwdWJsaWMgZnVuY3Rpb24gdmFsaWQoKSB7CgkJCSR2YXJzID0g'));
	@fwrite($fp, base64_decode('Z2V0X29iamVjdF92YXJzKCR0aGlzKTsKCQkJJGNudCA9IDA7CgkJCWZvcmVhY2ggKCR2YXJzIGFzICR4ID0+ICRkdW1teSkgewoJCQkJaWYgKCgkeCA9PSAnX2F0dHJzJykgfHwgKCR4ID09ICdwb3NpdGlvbicpKSBjb250aW51ZTsKCQkJCWlmICgoJGR1bW15IGlu'));
	@fwrite($fp, base64_decode('c3RhbmNlb2YgU2ltcGxlWE1MRWxlbWVudCkgJiYgIWlzX251bWVyaWMoJHgpICYmICRkdW1teS0+aXNBcnJheSgpKSB7CgkJCQkJJHZhcnMyID0gZ2V0X29iamVjdF92YXJzKCRkdW1teSk7CgkJCQkJZm9yZWFjaCAoJHZhcnMyIGFzICR4MiA9PiAkZHVtbXkyKSB7'));
	@fwrite($fp, base64_decode('CgkJCQkJCWlmICgoJHgyID09ICdfYXR0cnMnKSB8fCAoJHgyID09ICdwb3NpdGlvbicpKSBjb250aW51ZTsKCQkJCQkJJGNudCsrOwoJCQkJCX0KCQkJCX0gZWxzZSB7CgkJCQkJJGNudCsrOwoJCQkJfQoJCQl9CgoJCQlyZXR1cm4gJHRoaXMtPnBvc2l0aW9uIDwg'));
	@fwrite($fp, base64_decode('JGNudDsKCQl9CgoJfQp9Cg=='));
	@fclose($fp);
}
if (!is_file('includes/simplexml_supplement.inc.php')) {
	warn('File has vanished! Will re-create it: includes/simplexml_supplement.inc.php');
	writefile_2();
	if (!is_file('includes/simplexml_supplement.inc.php')) {
		warn('File cannot be created (not existing): includes/simplexml_supplement.inc.php');
	} else if (sha1_file('includes/simplexml_supplement.inc.php') != '39bc0f7878619bc157052ae250cb2a4d413e8858') {
		warn('File cannot be created (checksum mismatch): includes/simplexml_supplement.inc.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/simplexml_supplement.inc.php', 0644)) {
		warn('Could not change file permissions of includes/simplexml_supplement.inc.php');
	}
} else {
	if (@sha1_file('includes/simplexml_supplement.inc.php') !== '39bc0f7878619bc157052ae250cb2a4d413e8858') {
		if (@sha1_file('includes/simplexml_supplement.inc.php') !== 'ff73b1aa082c181e4a5e976f8f82306305150785') {
			warn('File was modified. Will overwrite the changes now: includes/simplexml_supplement.inc.php');
			$tmp = pathinfo('includes/simplexml_supplement.inc.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/simplexml_supplement.inc.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('includes/simplexml_supplement.inc.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_2();
		if (@sha1_file('includes/simplexml_supplement.inc.php') !== '39bc0f7878619bc157052ae250cb2a4d413e8858') {
			warn('File cannot be written (checksum mismatch): includes/simplexml_supplement.inc.php');
		}
	}
}

// Files different: plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php
function writefile_3() {
	@$fp = fopen('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMSBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgppZiAoIWRlZmluZWQoJ0lOU0lERV9PSURQTFVTJykpIGRpZSgpOwoKY2xhc3MgT0lEcGx1c1BhZ2VQdWJsaWNBdHRhY2htZW50cyBleHRlbmRzIE9JRHBsdXNQYWdlUGx1Z2luUHVibGlj'));
	@fwrite($fp, base64_decode('IHsKCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldFVwbG9hZERpcigkaWQpIHsKCQkkb2JqID0gT0lEcGx1c09iamVjdDo6cGFyc2UoJGlkKTsKCQlpZiAoJG9iaiA9PT0gbnVsbCkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0ludmFsaWQgb2JqZWN0'));
	@fwrite($fp, base64_decode('ICIlMSInLCRpZCkpOwoKCQkkcGF0aCA9IE9JRHBsdXM6OmxvY2FscGF0aCgpIC4gJ3VzZXJkYXRhJyAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAnYXR0YWNobWVudHMnOwoJCSRwYXRoX3YxID0gJHBhdGggLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJG9iai0+Z2V0'));
	@fwrite($fp, base64_decode('TGVnYWN5RGlyZWN0b3J5TmFtZSgpOwoJCSRwYXRoX3YxX2J1ZyA9ICRwYXRoIC4gJG9iai0+Z2V0TGVnYWN5RGlyZWN0b3J5TmFtZSgpOwoJCSRwYXRoX3YyID0gJHBhdGggLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJG9iai0+Z2V0RGlyZWN0b3J5TmFtZSgpOwoK'));
	@fwrite($fp, base64_decode('CQlpZiAoaXNfZGlyKCRwYXRoX3YxKSkgcmV0dXJuICRwYXRoX3YxOyAvLyBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eQoJCWlmIChpc19kaXIoJHBhdGhfdjFfYnVnKSkgcmV0dXJuICRwYXRoX3YxX2J1ZzsgLy8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkKCQlyZXR1'));
	@fwrite($fp, base64_decode('cm4gJHBhdGhfdjI7Cgl9CgoJcHJpdmF0ZSBmdW5jdGlvbiByYU1heURlbGV0ZSgpIHsKCQlyZXR1cm4gT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdhdHRhY2htZW50c19hbGxvd19yYV9kZWxldGUnLCAwKTsKCX0KCglwcml2YXRlIGZ1bmN0aW9uIHJhTWF5'));
	@fwrite($fp, base64_decode('VXBsb2FkKCkgewoJCXJldHVybiBPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ2F0dGFjaG1lbnRzX2FsbG93X3JhX3VwbG9hZCcsIDApOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBhY3Rpb24oJGFjdGlvbklELCAkcGFyYW1zKSB7CgoJCWlmICgkYWN0aW9uSUQg'));
	@fwrite($fp, base64_decode('PT0gJ2RlbGV0ZUF0dGFjaG1lbnQnKSB7CgkJCSRpZCA9ICRwYXJhbXNbJ2lkJ107CgkJCSRvYmogPSBPSURwbHVzT2JqZWN0OjpwYXJzZSgkaWQpOwoJCQlpZiAoJG9iaiA9PT0gbnVsbCkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0ludmFsaWQgb2Jq'));
	@fwrite($fp, base64_decode('ZWN0ICIlMSInLCRpZCkpOwoJCQlpZiAoISRvYmotPnVzZXJIYXNXcml0ZVJpZ2h0cygpKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnQXV0aGVudGljYXRpb24gZXJyb3IuIFBsZWFzZSBsb2cgaW4gYXMgYWRtaW4sIG9yIGFzIHRoZSBSQSBvZiAiJTEi'));
	@fwrite($fp, base64_decode('IHRvIHVwbG9hZCBhbiBhdHRhY2htZW50LicsJGlkKSk7CgoJCQlpZiAoIU9JRHBsdXM6OmF1dGhVdGlscygpOjppc0FkbWluTG9nZ2VkSW4oKSAmJiAhJHRoaXMtPnJhTWF5RGVsZXRlKCkpIHsKCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdUaGUg'));
	@fwrite($fp, base64_decode('YWRtaW5pc3RyYXRvciBoYXMgZGlzYWJsZWQgZGVsZXRpbmcgYXR0YWNobWVudHMgYnkgUkFzLicpKTsKCQkJfQoKCQkJJHJlcV9maWxlbmFtZSA9ICRwYXJhbXNbJ2ZpbGVuYW1lJ107CgkJCWlmIChzdHJwb3MoJHJlcV9maWxlbmFtZSwgJy8nKSAhPT0gZmFsc2Up'));
	@fwrite($fp, base64_decode('IHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdJbGxlZ2FsIGZpbGUgbmFtZScpKTsKCQkJaWYgKHN0cnBvcygkcmVxX2ZpbGVuYW1lLCAnXFwnKSAhPT0gZmFsc2UpIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdJbGxlZ2FsIGZpbGUgbmFtZScp'));
	@fwrite($fp, base64_decode('KTsKCQkJaWYgKHN0cnBvcygkcmVxX2ZpbGVuYW1lLCAnLi4nKSAhPT0gZmFsc2UpIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdJbGxlZ2FsIGZpbGUgbmFtZScpKTsKCQkJaWYgKHN0cnBvcygkcmVxX2ZpbGVuYW1lLCBjaHIoMCkpICE9PSBmYWxzZSkg'));
	@fwrite($fp, base64_decode('dGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0lsbGVnYWwgZmlsZSBuYW1lJykpOwoKCQkJJHVwbG9hZGRpciA9IHNlbGY6OmdldFVwbG9hZERpcigkaWQpOwoJCQkkdXBsb2FkZmlsZSA9ICR1cGxvYWRkaXIgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gYmFz'));
	@fwrite($fp, base64_decode('ZW5hbWUoJHJlcV9maWxlbmFtZSk7CgoJCQlpZiAoIWZpbGVfZXhpc3RzKCR1cGxvYWRmaWxlKSkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0ZpbGUgZG9lcyBub3QgZXhpc3QnKSk7CgkJCUB1bmxpbmsoJHVwbG9hZGZpbGUpOwoJCQlpZiAoZmlsZV9l'));
	@fwrite($fp, base64_decode('eGlzdHMoJHVwbG9hZGZpbGUpKSB7CgkJCQlPSURwbHVzOjpsb2dnZXIoKS0+bG9nKCJbRVJSXU9JRCgkaWQpK1tFUlJdQSEiLCAiQXR0YWNobWVudCBmaWxlICciLmJhc2VuYW1lKCR1cGxvYWRmaWxlKS4iJyBjb3VsZCBub3QgYmUgZGVsZXRlZCBmcm9tIG9iamVj'));
	@fwrite($fp, base64_decode('dCAnJGlkJyAocHJvYmxlbSB3aXRoIHBlcm1pc3Npb25zPykiKTsKCQkJCSRtc2cgPSBfTCgnQXR0YWNobWVudCBmaWxlICIlMSIgY291bGQgbm90IGJlIGRlbGV0ZWQgZnJvbSBvYmplY3QgIiUyIiAocHJvYmxlbSB3aXRoIHBlcm1pc3Npb25zPyknLGJhc2VuYW1l'));
	@fwrite($fp, base64_decode('KCR1cGxvYWRmaWxlKSwkaWQpOwoJCQkJaWYgKE9JRHBsdXM6OmF1dGhVdGlscygpOjppc0FkbWluTG9nZ2VkSW4oKSkgewoJCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKCRtc2cpOwoJCQkJfSBlbHNlIHsKCQkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2Vw'));
	@fwrite($fp, base64_decode('dGlvbigkbXNnLicuICcuX0woJ1BsZWFzZSBjb250YWN0IHRoZSBzeXN0ZW0gYWRtaW5pc3RyYXRvci4nKSk7CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQkvLyBJZiBpdCB3YXMgdGhlIGxhc3QgZmlsZSwgZGVsZXRlIHRoZSBlbXB0eSBkaXJlY3RvcnkKCQkJCSRhcnkg'));
	@fwrite($fp, base64_decode('PSBnbG9iKCR1cGxvYWRkaXIgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJyonKTsKCQkJCWlmIChjb3VudCgkYXJ5KSA9PSAwKSBAcm1kaXIoJHVwbG9hZGRpcik7CgkJCX0KCgkJCU9JRHBsdXM6OmxvZ2dlcigpLT5sb2coIltPS11PSUQoJGlkKStbP0lORk8vIU9L'));
	@fwrite($fp, base64_decode('XU9JRFJBKCRpZCk/L1s/SU5GTy8hT0tdQT8iLCAiRGVsZXRlZCBhdHRhY2htZW50ICciLmJhc2VuYW1lKCR1cGxvYWRmaWxlKS4iJyBmcm9tIG9iamVjdCAnJGlkJyIpOwoKCQkJcmV0dXJuIGFycmF5KCJzdGF0dXMiID0+IDApOwoKCQl9IGVsc2UgaWYgKCRhY3Rp'));
	@fwrite($fp, base64_decode('b25JRCA9PSAndXBsb2FkQXR0YWNobWVudCcpIHsKCgkJCSRpZCA9ICRwYXJhbXNbJ2lkJ107CgkJCSRvYmogPSBPSURwbHVzT2JqZWN0OjpwYXJzZSgkaWQpOwoJCQlpZiAoJG9iaiA9PT0gbnVsbCkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0ludmFs'));
	@fwrite($fp, base64_decode('aWQgb2JqZWN0ICIlMSInLCRpZCkpOwoJCQlpZiAoISRvYmotPnVzZXJIYXNXcml0ZVJpZ2h0cygpKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnQXV0aGVudGljYXRpb24gZXJyb3IuIFBsZWFzZSBsb2cgaW4gYXMgYWRtaW4sIG9yIGFzIHRoZSBSQSBv'));
	@fwrite($fp, base64_decode('ZiAiJTEiIHRvIHVwbG9hZCBhbiBhdHRhY2htZW50LicsJGlkKSk7CgoJCQlpZiAoIU9JRHBsdXM6OmF1dGhVdGlscygpOjppc0FkbWluTG9nZ2VkSW4oKSAmJiAhJHRoaXMtPnJhTWF5VXBsb2FkKCkpIHsKCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9M'));
	@fwrite($fp, base64_decode('KCdUaGUgYWRtaW5pc3RyYXRvciBoYXMgZGlzYWJsZWQgdXBsb2FkaW5nIGF0dGFjaG1lbnRzIGJ5IFJBcy4nKSk7CgkJCX0KCgkJCWlmICghaXNzZXQoJF9GSUxFU1sndXNlcmZpbGUnXSkpIHsKCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdQbGVh'));
	@fwrite($fp, base64_decode('c2UgY2hvb3NlIGEgZmlsZS4nKSk7CgkJCX0KCgkJCWlmICghT0lEcGx1czo6YXV0aFV0aWxzKCk6OmlzQWRtaW5Mb2dnZWRJbigpKSB7CgkJCQkkYmFubmVkID0gZXhwbG9kZSgnLCcsIE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgnYXR0YWNobWVudHNfYmxv'));
	@fwrite($fp, base64_decode('Y2tfZXh0ZW5zaW9ucycsICcnKSk7CgkJCQlmb3JlYWNoICgkYmFubmVkIGFzICRleHQpIHsKCQkJCQkkZXh0ID0gdHJpbSgkZXh0KTsKCQkJCQlpZiAoJGV4dCA9PSAnJykgY29udGludWU7CgkJCQkJaWYgKHN0cnRvbG93ZXIoc3Vic3RyKGJhc2VuYW1lKCRfRklM'));
	@fwrite($fp, base64_decode('RVNbJ3VzZXJmaWxlJ11bJ25hbWUnXSksIC1zdHJsZW4oJGV4dCktMSkpID09IHN0cnRvbG93ZXIoJy4nLiRleHQpKSB7CgkJCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdUaGUgZmlsZSBleHRlbnNpb24gIiUxIiBpcyBiYW5uZWQgYnkgdGhlIGFk'));
	@fwrite($fp, base64_decode('bWluaXN0cmF0b3IgKGl0IGNhbiBiZSB1cGxvYWRlZCBieSB0aGUgYWRtaW5pc3RyYXRvciB0aG91Z2gpJywkZXh0KSk7CgkJCQkJfQoJCQkJfQoJCQl9CgoJCQkkcmVxX2ZpbGVuYW1lID0gJF9GSUxFU1sndXNlcmZpbGUnXVsnbmFtZSddOwoJCQlpZiAoc3RycG9z'));
	@fwrite($fp, base64_decode('KCRyZXFfZmlsZW5hbWUsICcvJykgIT09IGZhbHNlKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnSWxsZWdhbCBmaWxlIG5hbWUnKSk7CgkJCWlmIChzdHJwb3MoJHJlcV9maWxlbmFtZSwgJ1xcJykgIT09IGZhbHNlKSB0aHJvdyBuZXcgT0lEcGx1c0V4'));
	@fwrite($fp, base64_decode('Y2VwdGlvbihfTCgnSWxsZWdhbCBmaWxlIG5hbWUnKSk7CgkJCWlmIChzdHJwb3MoJHJlcV9maWxlbmFtZSwgJy4uJykgIT09IGZhbHNlKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnSWxsZWdhbCBmaWxlIG5hbWUnKSk7CgkJCWlmIChzdHJwb3MoJHJl'));
	@fwrite($fp, base64_decode('cV9maWxlbmFtZSwgY2hyKDApKSAhPT0gZmFsc2UpIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdJbGxlZ2FsIGZpbGUgbmFtZScpKTsKCgkJCSR1cGxvYWRkaXIgPSBzZWxmOjpnZXRVcGxvYWREaXIoJGlkKTsKCQkJJHVwbG9hZGZpbGUgPSAkdXBsb2Fk'));
	@fwrite($fp, base64_decode('ZGlyIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuIGJhc2VuYW1lKCRyZXFfZmlsZW5hbWUpOwoKCQkJaWYgKCFpc19kaXIoJHVwbG9hZGRpcikpIHsKCQkJCUBta2RpcigkdXBsb2FkZGlyLCAwNzc3LCB0cnVlKTsKCQkJCWlmICghaXNfZGlyKCR1cGxvYWRkaXIpKSB7'));
	@fwrite($fp, base64_decode('CgkJCQkJT0lEcGx1czo6bG9nZ2VyKCktPmxvZygiW0VSUl1PSUQoJGlkKStbRVJSXUEhIiwgIlVwbG9hZCBhdHRhY2htZW50ICciLmJhc2VuYW1lKCR1cGxvYWRmaWxlKS4iJyB0byBvYmplY3QgJyRpZCcgZmFpbGVkOiBDYW5ub3QgY3JlYXRlIGRpcmVjdG9yeSAn'));
	@fwrite($fp, base64_decode('Ii5iYXNlbmFtZSgkdXBsb2FkZGlyKS4iJyAocHJvYmxlbSB3aXRoIHBlcm1pc3Npb25zPykiKTsKCQkJCQkkbXNnID0gX0woJ1VwbG9hZCBhdHRhY2htZW50ICIlMSIgdG8gb2JqZWN0ICIlMiIgZmFpbGVkJyxiYXNlbmFtZSgkdXBsb2FkZmlsZSksJGlkKS4nOiAn'));
	@fwrite($fp, base64_decode('Ll9MKCdDYW5ub3QgY3JlYXRlIGRpcmVjdG9yeSAiJTEiIChwcm9ibGVtIHdpdGggcGVybWlzc2lvbnM/KScsYmFzZW5hbWUoJHVwbG9hZGRpcikpOwoJCQkJCWlmIChPSURwbHVzOjphdXRoVXRpbHMoKTo6aXNBZG1pbkxvZ2dlZEluKCkpIHsKCQkJCQkJdGhyb3cg'));
	@fwrite($fp, base64_decode('bmV3IE9JRHBsdXNFeGNlcHRpb24oJG1zZyk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oJG1zZy4nLiAnLl9MKCdQbGVhc2UgY29udGFjdCB0aGUgc3lzdGVtIGFkbWluaXN0cmF0b3IuJykpOwoJCQkJCX0KCQkJCX0KCQkJ'));
	@fwrite($fp, base64_decode('fQoKCQkJaWYgKCFAbW92ZV91cGxvYWRlZF9maWxlKCRfRklMRVNbJ3VzZXJmaWxlJ11bJ3RtcF9uYW1lJ10sICR1cGxvYWRmaWxlKSkgewoJCQkJT0lEcGx1czo6bG9nZ2VyKCktPmxvZygiW0VSUl1PSUQoJGlkKStbRVJSXUEhIiwgIlVwbG9hZCBhdHRhY2htZW50'));
	@fwrite($fp, base64_decode('ICciLmJhc2VuYW1lKCR1cGxvYWRmaWxlKS4iJyB0byBvYmplY3QgJyRpZCcgZmFpbGVkOiBDYW5ub3QgbW92ZSB1cGxvYWRlZCBmaWxlIGludG8gZGlyZWN0b3J5IChwcm9ibGVtIHdpdGggcGVybWlzc2lvbnM/KSIpOwoJCQkJJG1zZyA9IF9MKCdVcGxvYWQgYXR0'));
	@fwrite($fp, base64_decode('YWNobWVudCAiJTEiIHRvIG9iamVjdCAiJTIiIGZhaWxlZCcsYmFzZW5hbWUoJHVwbG9hZGZpbGUpLCRpZCkuJzogJy5fTCgnQ2Fubm90IG1vdmUgdXBsb2FkZWQgZmlsZSBpbnRvIGRpcmVjdG9yeSAocHJvYmxlbSB3aXRoIHBlcm1pc3Npb25zPyknKTsKCQkJCWlm'));
	@fwrite($fp, base64_decode('IChPSURwbHVzOjphdXRoVXRpbHMoKTo6aXNBZG1pbkxvZ2dlZEluKCkpIHsKCQkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigkbXNnKTsKCQkJCX0gZWxzZSB7CgkJCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oJG1zZy4nLiAnLl9MKCdQbGVhc2Ug'));
	@fwrite($fp, base64_decode('Y29udGFjdCB0aGUgc3lzdGVtIGFkbWluaXN0cmF0b3IuJykpOwoJCQkJfQoJCQl9CgoJCQlPSURwbHVzOjpsb2dnZXIoKS0+bG9nKCJbT0tdT0lEKCRpZCkrWz9JTkZPLyFPS11PSURSQSgkaWQpPy9bP0lORk8vIU9LXUE/IiwgIlVwbG9hZGVkIGF0dGFjaG1lbnQg'));
	@fwrite($fp, base64_decode('JyIuYmFzZW5hbWUoJHVwbG9hZGZpbGUpLiInIHRvIG9iamVjdCAnJGlkJyIpOwoKCQkJcmV0dXJuIGFycmF5KCJzdGF0dXMiID0+IDApOwoJCX0gZWxzZSB7CgkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdVbmtub3duIGFjdGlvbiBJRCcpKTsKCQl9'));
	@fwrite($fp, base64_decode('Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGluaXQoJGh0bWw9dHJ1ZSkgewoJCU9JRHBsdXM6OmNvbmZpZygpLT5wcmVwYXJlQ29uZmlnS2V5KCdhdHRhY2htZW50c19ibG9ja19leHRlbnNpb25zJywgJ0Jsb2NrIGZpbGUgbmFtZSBleHRlbnNpb25zIGJlaW5nIHVzZWQg'));
	@fwrite($fp, base64_decode('aW4gZmlsZSBhdHRhY2htZW50cyAoY29tbWEgc2VwYXJhdGVkKScsICdleGUsc2NyLHBpZixiYXQsY29tLHZicyxjbWQnLCBPSURwbHVzQ29uZmlnOjpQUk9URUNUSU9OX0VESVRBQkxFLCBmdW5jdGlvbigkdmFsdWUpIHsKCQl9KTsKCQlPSURwbHVzOjpjb25maWco'));
	@fwrite($fp, base64_decode('KS0+cHJlcGFyZUNvbmZpZ0tleSgnYXR0YWNobWVudHNfYWxsb3dfcmFfZGVsZXRlJywgJ0FsbG93IHRoYXQgUkFzIGRlbGV0ZSBmaWxlIGF0dGFjaG1lbnRzPyAoMD1ubywgMT15ZXMpJywgJzAnLCBPSURwbHVzQ29uZmlnOjpQUk9URUNUSU9OX0VESVRBQkxFLCBm'));
	@fwrite($fp, base64_decode('dW5jdGlvbigkdmFsdWUpIHsKCQkJaWYgKCFpc19udW1lcmljKCR2YWx1ZSkgfHwgKCR2YWx1ZSA8IDApIHx8ICgkdmFsdWUgPiAxKSkgewoJCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ1BsZWFzZSBlbnRlciBhIHZhbGlkIHZhbHVlICgwPW5vLCAx'));
	@fwrite($fp, base64_decode('PXllcykuJykpOwoJCQl9CgkJfSk7CgkJT0lEcGx1czo6Y29uZmlnKCktPnByZXBhcmVDb25maWdLZXkoJ2F0dGFjaG1lbnRzX2FsbG93X3JhX3VwbG9hZCcsICdBbGxvdyB0aGF0IFJBcyB1cGxvYWQgZmlsZSBhdHRhY2htZW50cz8gKDA9bm8sIDE9eWVzKScsICcw'));
	@fwrite($fp, base64_decode('JywgT0lEcGx1c0NvbmZpZzo6UFJPVEVDVElPTl9FRElUQUJMRSwgZnVuY3Rpb24oJHZhbHVlKSB7CgkJCWlmICghaXNfbnVtZXJpYygkdmFsdWUpIHx8ICgkdmFsdWUgPCAwKSB8fCAoJHZhbHVlID4gMSkpIHsKCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9u'));
	@fwrite($fp, base64_decode('KF9MKCdQbGVhc2UgZW50ZXIgYSB2YWxpZCB2YWx1ZSAoMD1ubywgMT15ZXMpLicpKTsKCQkJfQoJCX0pOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBndWkoJGlkLCAmJG91dCwgJiRoYW5kbGVkKSB7CgkJLy8gTm90aGluZwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBwdWJs'));
	@fwrite($fp, base64_decode('aWNTaXRlbWFwKCYkb3V0KSB7CgkJLy8gTm90aGluZwoJfQoKCXB1YmxpYyBmdW5jdGlvbiB0cmVlKCYkanNvbiwgJHJhX2VtYWlsPW51bGwsICRub25qcz1mYWxzZSwgJHJlcV9nb3RvPScnKSB7CgkJcmV0dXJuIGZhbHNlOwoJfQoKCXByaXZhdGUgc3RhdGljIGZ1'));
	@fwrite($fp, base64_decode('bmN0aW9uIGNvbnZlcnRfZmlsZXNpemUoJGJ5dGVzLCAkZGVjaW1hbHMgPSAyKXsKCQkkc2l6ZSA9IGFycmF5KF9MKCdCeXRlcycpLF9MKCdLaUInKSxfTCgnTWlCJyksX0woJ0dpQicpLF9MKCdUaUInKSxfTCgnUGlCJyksX0woJ0VpQicpLF9MKCdaaUInKSxfTCgn'));
	@fwrite($fp, base64_decode('WWlCJykpOwoJCSRmYWN0b3IgPSBmbG9vcigoc3RybGVuKCRieXRlcykgLSAxKSAvIDMpOwoJCXJldHVybiBzcHJpbnRmKCIlLnskZGVjaW1hbHN9ZiIsICRieXRlcyAvIHBvdygxMDI0LCAkZmFjdG9yKSkgLiAnICcgLiBAJHNpemVbJGZhY3Rvcl07Cgl9CgoJcHVi'));
	@fwrite($fp, base64_decode('bGljIGZ1bmN0aW9uIGltcGxlbWVudHNGZWF0dXJlKCRpZCkgewoJCWlmIChzdHJ0b2xvd2VyKCRpZCkgPT0gJzEuMy42LjEuNC4xLjM3NDc2LjIuNS4yLjMuMicpIHJldHVybiB0cnVlOyAvLyBtb2RpZnlDb250ZW50CgkJaWYgKHN0cnRvbG93ZXIoJGlkKSA9PSAn'));
	@fwrite($fp, base64_decode('MS4zLjYuMS40LjEuMzc0NzYuMi41LjIuMy4zJykgcmV0dXJuIHRydWU7IC8vIGJlZm9yZU9iamVjdCosIGFmdGVyT2JqZWN0KgoJCWlmIChzdHJ0b2xvd2VyKCRpZCkgPT0gJzEuMy42LjEuNC4xLjM3NDc2LjIuNS4yLjMuNCcpIHJldHVybiB0cnVlOyAvLyB3aG9p'));
	@fwrite($fp, base64_decode('cypBdHRyaWJ1dGVzCgkJcmV0dXJuIGZhbHNlOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBtb2RpZnlDb250ZW50KCRpZCwgJiR0aXRsZSwgJiRpY29uLCAmJHRleHQpIHsKCQkvLyBJbnRlcmZhY2UgMS4zLjYuMS40LjEuMzc0NzYuMi41LjIuMy4yCgoJCSRmaWxlcyA9'));
	@fwrite($fp, base64_decode('IGdsb2Ioc2VsZjo6Z2V0VXBsb2FkRGlyKCRpZCkgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJyonKTsKCQkkZG9zaG93ID0gZmFsc2U7CgkJJG91dHB1dCA9ICcnOwoJCSRmb3VuZF9maWxlcyA9IGZhbHNlOwoKCQkkb2JqID0gT0lEcGx1c09iamVjdDo6cGFyc2Uo'));
	@fwrite($fp, base64_decode('JGlkKTsKCQlpZiAoJG9iaiA9PT0gbnVsbCkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0ludmFsaWQgb2JqZWN0ICIlMSInLCRpZCkpOwoJCSRjYW5fdXBsb2FkID0gT0lEcGx1czo6YXV0aFV0aWxzKCk6OmlzQWRtaW5Mb2dnZWRJbigpIHx8ICgkdGhp'));
	@fwrite($fp, base64_decode('cy0+cmFNYXlVcGxvYWQoKSAmJiAkb2JqLT51c2VySGFzV3JpdGVSaWdodHMoKSk7CgkJJGNhbl9kZWxldGUgPSBPSURwbHVzOjphdXRoVXRpbHMoKTo6aXNBZG1pbkxvZ2dlZEluKCkgfHwgKCR0aGlzLT5yYU1heURlbGV0ZSgpICYmICRvYmotPnVzZXJIYXNXcml0'));
	@fwrite($fp, base64_decode('ZVJpZ2h0cygpKTsKCgkJJG91dHB1dCAuPSAnPGgyPicuX0woJ0ZpbGUgYXR0YWNobWVudHMnKS4nPC9oMj4nOwoJCSRvdXRwdXQgLj0gJzxkaXYgY2xhc3M9ImNvbnRhaW5lciBib3giPic7CgoJCWlmIChPSURwbHVzOjphdXRoVXRpbHMoKTo6aXNBZG1pbkxvZ2dl'));
	@fwrite($fp, base64_decode('ZEluKCkpIHsKCQkJJG91dHB1dCAuPSAnPHA+Jy5fTCgnQWRtaW4gaW5mbzogVGhlIGRpcmVjdG9yeSBpcyAlMScsJzxiPicuaHRtbGVudGl0aWVzKHNlbGY6OmdldFVwbG9hZERpcigkaWQpKS4nPC9iPicpLic8L3A+JzsKCQkJJGRvc2hvdyA9IHRydWU7CgkJfQoK'));
	@fwrite($fp, base64_decode('CQkkb3V0cHV0IC49ICc8ZGl2IGlkPSJmaWxlYXR0YWNobWVudHNfdGFibGUiIGNsYXNzPSJ0YWJsZS1yZXNwb25zaXZlIj4nOwoJCSRvdXRwdXQgLj0gJzx0YWJsZSBjbGFzcz0idGFibGUgdGFibGUtYm9yZGVyZWQgdGFibGUtc3RyaXBlZCI+JzsKCQkkb3V0cHV0'));
	@fwrite($fp, base64_decode('IC49ICc8dHI+JzsKCQkkb3V0cHV0IC49ICc8dGg+Jy5fTCgnRmlsZW5hbWUnKS4nPC90aD4nOwoJCSRvdXRwdXQgLj0gJzx0aD4nLl9MKCdTaXplJykuJzwvdGg+JzsKCQkkb3V0cHV0IC49ICc8dGg+Jy5fTCgnRmlsZSB0eXBlJykuJzwvdGg+JzsKCQkkb3V0cHV0'));
	@fwrite($fp, base64_decode('IC49ICc8dGg+Jy5fTCgnRG93bmxvYWQnKS4nPC90aD4nOwoJCWlmICgkY2FuX2RlbGV0ZSkgJG91dHB1dCAuPSAnPHRoPicuX0woJ0RlbGV0ZScpLic8L3RoPic7CgkJJG91dHB1dCAuPSAnPC90cj4nOwoJCWZvcmVhY2ggKCRmaWxlcyBhcyAkZmlsZSkgewoJCQlp'));
	@fwrite($fp, base64_decode('ZiAoaXNfZGlyKCRmaWxlKSkgY29udGludWU7CgoJCQkkb3V0cHV0IC49ICc8dHI+JzsKCQkJJG91dHB1dCAuPSAnPHRkPicuaHRtbGVudGl0aWVzKGJhc2VuYW1lKCRmaWxlKSkuJzwvdGQ+JzsKCQkJJG91dHB1dCAuPSAnPHRkPicuaHRtbGVudGl0aWVzKHNlbGY6'));
	@fwrite($fp, base64_decode('OmNvbnZlcnRfZmlsZXNpemUoZmlsZXNpemUoJGZpbGUpLCAwKSkuJzwvdGQ+JzsKCQkJJGxvb2t1cF9maWxlcyA9IGFycmF5KAoJCQkJT0lEcGx1czo6bG9jYWxwYXRoKCkuJ3VzZXJkYXRhL2F0dGFjaG1lbnRzL2ZpbGV0eXBlcyQnLk9JRHBsdXM6OmdldEN1cnJl'));
	@fwrite($fp, base64_decode('bnRMYW5nKCkuJy5jb25mJywKCQkJCU9JRHBsdXM6OmxvY2FscGF0aCgpLid1c2VyZGF0YS9hdHRhY2htZW50cy9maWxldHlwZXMuY29uZicsCgkJCQlPSURwbHVzOjpsb2NhbHBhdGgoKS4nM3AvdnRzX2ZpbGVmb3JtYXRzL2ZpbGV0eXBlcyQnLk9JRHBsdXM6Omdl'));
	@fwrite($fp, base64_decode('dEN1cnJlbnRMYW5nKCkuJy5sb2NhbCcsIC8vIG5vdCByZWNvbW1lbmRlZAoJCQkJT0lEcGx1czo6bG9jYWxwYXRoKCkuJzNwL3Z0c19maWxlZm9ybWF0cy9maWxldHlwZXMubG9jYWwnLCAvLyBub3QgcmVjb21tZW5kZWQKCQkJCU9JRHBsdXM6OmxvY2FscGF0aCgp'));
	@fwrite($fp, base64_decode('LiczcC92dHNfZmlsZWZvcm1hdHMvZmlsZXR5cGVzJCcuT0lEcGx1czo6Z2V0Q3VycmVudExhbmcoKS4nLmNvbmYnLAoJCQkJT0lEcGx1czo6bG9jYWxwYXRoKCkuJzNwL3Z0c19maWxlZm9ybWF0cy9maWxldHlwZXMuY29uZicKCQkJKTsKCQkJJG91dHB1dCAuPSAn'));
	@fwrite($fp, base64_decode('PHRkPicuaHRtbGVudGl0aWVzKFZ0c0ZpbGVUeXBlRGV0ZWN0OjpnZXREZXNjcmlwdGlvbigkZmlsZSwgJGxvb2t1cF9maWxlcykpLic8L3RkPic7CgoJCQkkb3V0cHV0IC49ICcgICAgIDx0ZD48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgbmFtZT0iZG93bmxvYWRfJy5t'));
	@fwrite($fp, base64_decode('ZDUoJGZpbGUpLiciIGlkPSJkb3dubG9hZF8nLm1kNSgkZmlsZSkuJyIgY2xhc3M9ImJ0biBidG4tc3VjY2VzcyBidG4teHMgZG93bmxvYWQiIG9uY2xpY2s9ImRvd25sb2FkQXR0YWNobWVudCgnLmpzX2VzY2FwZShPSURwbHVzOjp3ZWJwYXRoKF9fRElSX18pKS4n'));
	@fwrite($fp, base64_decode('LCBjdXJyZW50X25vZGUsJy5qc19lc2NhcGUoYmFzZW5hbWUoJGZpbGUpKS4nKSI+Jy5fTCgnRG93bmxvYWQnKS4nPC9idXR0b24+PC90ZD4nOwoJCQlpZiAoJGNhbl9kZWxldGUpIHsKCQkJCSRvdXRwdXQgLj0gJyAgICAgPHRkPjxidXR0b24gdHlwZT0iYnV0dG9u'));
	@fwrite($fp, base64_decode('IiBuYW1lPSJkZWxldGVfJy5tZDUoJGZpbGUpLiciIGlkPSJkZWxldGVfJy5tZDUoJGZpbGUpLiciIGNsYXNzPSJidG4gYnRuLWRhbmdlciBidG4teHMgZGVsZXRlIiBvbmNsaWNrPSJkZWxldGVBdHRhY2htZW50KGN1cnJlbnRfbm9kZSwnLmpzX2VzY2FwZShiYXNl'));
	@fwrite($fp, base64_decode('bmFtZSgkZmlsZSkpLicpIj4nLl9MKCdEZWxldGUnKS4nPC9idXR0b24+PC90ZD4nOwoJCQl9CgoJCQkkb3V0cHV0IC49ICc8L3RyPic7CgkJCSRkb3Nob3cgPSB0cnVlOwoJCQkkZm91bmRfZmlsZXMgPSB0cnVlOwoJCX0KCgkJaWYgKCEkZm91bmRfZmlsZXMpICRv'));
	@fwrite($fp, base64_decode('dXRwdXQgLj0gJzx0cj48dGQgY29sc3Bhbj0iJy4oJGNhbl9kZWxldGUgPyA1IDogNCkuJyI+PGk+Jy5fTCgnTm8gYXR0YWNobWVudHMnKS4nPC9pPjwvdGQ+PC90cj4nOwoKCQkkb3V0cHV0IC49ICc8L3RhYmxlPjwvZGl2Pic7CgoJCWlmICgkY2FuX3VwbG9hZCkg'));
	@fwrite($fp, base64_decode('ewoJCQkkb3V0cHV0IC49ICc8Zm9ybSBhY3Rpb249ImphdmFzY3JpcHQ6dm9pZCgwKTsiIG9uc3VibWl0PSJyZXR1cm4gdXBsb2FkQXR0YWNobWVudE9uU3VibWl0KHRoaXMpOyIgZW5jdHlwZT0ibXVsdGlwYXJ0L2Zvcm0tZGF0YSIgaWQ9InVwbG9hZEF0dGFjaG1l'));
	@fwrite($fp, base64_decode('bnRGb3JtIj4nOwoJCQkkb3V0cHV0IC49ICc8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJpZCIgdmFsdWU9IicuaHRtbGVudGl0aWVzKCRpZCkuJyI+JzsKCQkJJG91dHB1dCAuPSAnPGRpdj4nLl9MKCdBZGQgYSBmaWxlIGF0dGFjaG1lbnQnKS4nOjxpbnB1dCB0'));
	@fwrite($fp, base64_decode('eXBlPSJmaWxlIiBuYW1lPSJ1c2VyZmlsZSIgdmFsdWU9IiIgaWQ9ImZpbGVBdHRhY2htZW50Ij4nOwoJCQkkb3V0cHV0IC49ICc8YnI+PGlucHV0IHR5cGU9InN1Ym1pdCIgdmFsdWU9IicuX0woJ1VwbG9hZCcpLiciPjwvZGl2Pic7CgkJCSRvdXRwdXQgLj0gJzwv'));
	@fwrite($fp, base64_decode('Zm9ybT4nOwoJCQkkZG9zaG93ID0gdHJ1ZTsKCQl9CgoJCSRvdXRwdXQgLj0gJzwvZGl2Pic7CgoJCWlmICgkZG9zaG93KSAkdGV4dCAuPSAkb3V0cHV0OwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBiZWZvcmVPYmplY3REZWxldGUoJGlkKSB7fSAvLyBJbnRlcmZhY2Ug'));
	@fwrite($fp, base64_decode('MS4zLjYuMS40LjEuMzc0NzYuMi41LjIuMy4zCglwdWJsaWMgZnVuY3Rpb24gYWZ0ZXJPYmplY3REZWxldGUoJGlkKSB7CgkJLy8gSW50ZXJmYWNlIDEuMy42LjEuNC4xLjM3NDc2LjIuNS4yLjMuMwoJCS8vIERlbGV0ZSB0aGUgYXR0YWNobWVudCBmb2xkZXIgaW5j'));
	@fwrite($fp, base64_decode('bHVkaW5nIGFsbCBmaWxlcyBpbiBpdCAobm90ZTogU3ViZm9sZGVycyBhcmUgbm90IHBvc3NpYmxlKQoJCSR1cGxvYWRkaXIgPSBzZWxmOjpnZXRVcGxvYWREaXIoJGlkKTsKCQlpZiAoJHVwbG9hZGRpciAhPSAnJykgewoJCQkkYXJ5ID0gZ2xvYigkdXBsb2FkZGly'));
	@fwrite($fp, base64_decode('IC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICcqJyk7CgkJCWZvcmVhY2ggKCRhcnkgYXMgJGEpIEB1bmxpbmsoJGEpOwoJCQlAcm1kaXIoJHVwbG9hZGRpcik7CgkJCWlmIChpc19kaXIoJHVwbG9hZGRpcikpIHsKCQkJCU9JRHBsdXM6OmxvZ2dlcigpLT5sb2coIltX'));
	@fwrite($fp, base64_decode('QVJOXU9JRCgkaWQpK1tXQVJOXUEhIiwgIkF0dGFjaG1lbnQgZGlyZWN0b3J5ICckdXBsb2FkZGlyJyBjb3VsZCBub3QgYmUgZGVsZXRlZCBkdXJpbmcgdGhlIGRlbGV0aW9uIG9mIHRoZSBPSUQiKTsKCQkJfQoJCX0KCX0KCXB1YmxpYyBmdW5jdGlvbiBiZWZvcmVP'));
	@fwrite($fp, base64_decode('YmplY3RVcGRhdGVTdXBlcmlvcigkaWQsICYkcGFyYW1zKSB7fSAvLyBJbnRlcmZhY2UgMS4zLjYuMS40LjEuMzc0NzYuMi41LjIuMy4zCglwdWJsaWMgZnVuY3Rpb24gYWZ0ZXJPYmplY3RVcGRhdGVTdXBlcmlvcigkaWQsICYkcGFyYW1zKSB7fSAvLyBJbnRlcmZh'));
	@fwrite($fp, base64_decode('Y2UgMS4zLjYuMS40LjEuMzc0NzYuMi41LjIuMy4zCglwdWJsaWMgZnVuY3Rpb24gYmVmb3JlT2JqZWN0VXBkYXRlU2VsZigkaWQsICYkcGFyYW1zKSB7fSAvLyBJbnRlcmZhY2UgMS4zLjYuMS40LjEuMzc0NzYuMi41LjIuMy4zCglwdWJsaWMgZnVuY3Rpb24gYWZ0'));
	@fwrite($fp, base64_decode('ZXJPYmplY3RVcGRhdGVTZWxmKCRpZCwgJiRwYXJhbXMpIHt9IC8vIEludGVyZmFjZSAxLjMuNi4xLjQuMS4zNzQ3Ni4yLjUuMi4zLjMKCXB1YmxpYyBmdW5jdGlvbiBiZWZvcmVPYmplY3RJbnNlcnQoJGlkLCAmJHBhcmFtcykge30gLy8gSW50ZXJmYWNlIDEuMy42'));
	@fwrite($fp, base64_decode('LjEuNC4xLjM3NDc2LjIuNS4yLjMuMwoJcHVibGljIGZ1bmN0aW9uIGFmdGVyT2JqZWN0SW5zZXJ0KCRpZCwgJiRwYXJhbXMpIHt9IC8vIEludGVyZmFjZSAxLjMuNi4xLjQuMS4zNzQ3Ni4yLjUuMi4zLjMKCglwdWJsaWMgZnVuY3Rpb24gdHJlZV9zZWFyY2goJHJl'));
	@fwrite($fp, base64_decode('cXVlc3QpIHsKCQlyZXR1cm4gZmFsc2U7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHdob2lzT2JqZWN0QXR0cmlidXRlcygkaWQsICYkb3V0KSB7CgkJLy8gSW50ZXJmYWNlIDEuMy42LjEuNC4xLjM3NDc2LjIuNS4yLjMuNAoKCQkkZmlsZXMgPSBnbG9iKHNlbGY6Omdl'));
	@fwrite($fp, base64_decode('dFVwbG9hZERpcigkaWQpIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICcqJyk7CgkJZm9yZWFjaCAoJGZpbGVzIGFzICRmaWxlKSB7CgkJCSRvdXRbXSA9ICdhdHRhY2htZW50LW5hbWU6ICcuYmFzZW5hbWUoJGZpbGUpOwoJCQkkb3V0W10gPSAnYXR0YWNobWVudC11'));
	@fwrite($fp, base64_decode('cmw6ICcuT0lEcGx1czo6d2VicGF0aChfX0RJUl9fKS4nZG93bmxvYWQucGhwP2lkPScudXJsZW5jb2RlKCRpZCkuJyZmaWxlbmFtZT0nLnVybGVuY29kZShiYXNlbmFtZSgkZmlsZSkpOwoJCX0KCgl9CglwdWJsaWMgZnVuY3Rpb24gd2hvaXNSYUF0dHJpYnV0ZXMo'));
	@fwrite($fp, base64_decode('JGVtYWlsLCAmJG91dCkge30gLy8gSW50ZXJmYWNlIDEuMy42LjEuNC4xLjM3NDc2LjIuNS4yLjMuNAp9Cg=='));
	@fclose($fp);
}
if (!is_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php')) {
	warn('File has vanished! Will re-create it: plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
	writefile_3();
	if (!is_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php')) {
		warn('File cannot be created (not existing): plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
	} else if (sha1_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php') != '89681b7246a4b507e86ed28312093681d9091200') {
		warn('File cannot be created (checksum mismatch): plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php', 0644)) {
		warn('Could not change file permissions of plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
	}
} else {
	if (@sha1_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php') !== '89681b7246a4b507e86ed28312093681d9091200') {
		if (@sha1_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php') !== '92d769880ddf8d5ca104d645048637bb5ae1020e') {
			warn('File was modified. Will overwrite the changes now: plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
			$tmp = pathinfo('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_3();
		if (@sha1_file('plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php') !== '89681b7246a4b507e86ed28312093681d9091200') {
			warn('File cannot be written (checksum mismatch): plugins/publicPages/095_attachments/OIDplusPagePublicAttachments.class.php');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 514\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 514') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

