<?php /* <ViaThinkSoftSignature>
tUtIhsYsmi0dDTvjdZFr99VZrvKSmQTSutIxqVawTBTK2AKUqCtBsPQLQfI+n3NYd
EtnO16AWA2pgmZCwTFJHjTR/40e4GAFVPB6+YEXdz3xCUAO9Oii0mATtOKNY9JQVw
eHAgGNH95FnT7tVqbdVeyCWt/b56z++/92gNrME5U9FLaHPEE8uBgsGmONp71Qt5/
+JFm4yuYl2d8s4yqWpdN6Z6vFwvWPWCo4X70T4i4AuKEFR9NPNskR0FrTeo8dWCwX
IEVcLLfZ8AuCQAf/C0hm8L0ZlmcTfSTCnLwNHbSSTmGyHoMdi7ZSRvk1vxuuL4bA2
v1w+rrRSWuugKzgDanH6gfbfDFVtoNNKs/Na1D/sCgchawPCFPxyI/x1imZ0FOE6s
fB3038HBvFWS4h/zLt5/BWU4MtQ21W3OOtbSOcNO2cjy4jSsdYRaHwo+jYabzag45
zgKUncxB7C4ycvwUQci4CiG11kKHFkxmy+knH19hAmE3iPfIeNwDsFzea+W7H4Jmf
4F8P1KZ56jwtki7jVaJznucrdjbqU84vfnYQrp975cxHEf2A48kf5JGTBrus0cuFP
FeTVBtqFg29oJwTobTPWUQkI7kPTMkeQ7F97WTdVG5semphLmwHefhyUWSOdQ47fd
VWWA1+UIsMOripwM0dcDZ26J7sSd+vNx7svTsJotpqKRvdPbLS6AwSz119mg3w9Of
ihpUwhts+LDPJbCmvHjUQfEJ93dazi9PDgZ2FbnbO3kihkYHKI4WTgEh95J60UrXA
Wj0uO6EX9yfO3ydropXFEp2ey+5gAxFw9wMbnR6WpX9/xhmn2B3brD6roGjtS/Kyk
TNjSW3mNqGHv6lmCEWvFfga7Lfl8NvKzC/i14+CequFIxXUOcCs71QHTflhDWrlkq
s23AJjfKTW0JruUtxcrO8w4voE+gffSzuinrL108RnmLVF1pcb3rzjOC6pKICxrWw
bhmpM7pvaEOb7lyf7vATBtQ4lmJUCduIieQ92CRU/lD3cPnIktRSac2pnE6B0HFZf
iU/SPPrmtC5zcor2XXGMjynK6G6PH+sKM9fMAALUr7QarsDNsZ9Qu+s5onQLIBP6p
dJZSjLKke85Aa4N9Wb52xAt5HC1uwcz/qhyP+5p7FvRGrEYHRZDCfhidiEzQTW8tE
sKLEpHvMlN/gl1zSx3ZfR13FUDYIBV9xfBADQRBxdBlKl7tU5vq+JWAni88oCIPfs
gplitav6NaMHZyi2V2CMdCqHchcE66fOZ6dSELANBdJdTrmPVLjg0lW7iilE/JeiE
Gs504KYo6fL0vPZbFbrSx7gU5UAyw81PIu25LN+xVOvpQ+aYpjPlMtUzVhbNCi6UA
w==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 322') {
	err('This update can only be applied to OIDplus version 2.0.0.322!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: plugins/publicPages/500_resources/OIDplusPagePublicResources.class.php
function writefile_1() {
	@$fp = fopen('plugins/publicPages/500_resources/OIDplusPagePublicResources.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDIwIERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmNsYXNzIE9JRHBsdXNQYWdlUHVibGljUmVzb3VyY2VzIGV4dGVuZHMgT0lEcGx1c1BhZ2VQbHVnaW5QdWJsaWMgewoKCXB1YmxpYyBmdW5jdGlvbiBpbml0KCRodG1sPXRydWUpIHsKCQlPSURwbHVz'));
	@fwrite($fp, base64_decode('Ojpjb25maWcoKS0+cHJlcGFyZUNvbmZpZ0tleSgncmVzb3VyY2VfcGx1Z2luX2F1dG9vcGVuX2xldmVsJywgJ1Jlc291cmNlIHBsdWdpbjogSG93IG1hbnkgbGV2ZWxzIHNob3VsZCBiZSBvcGVuIGluIHRoZSB0cmVldmlldyB3aGVuIE9JRHBsdXMgaXMgbG9hZGVk'));
	@fwrite($fp, base64_decode('PycsIDEsIE9JRHBsdXNDb25maWc6OlBST1RFQ1RJT05fRURJVEFCTEUsIGZ1bmN0aW9uKCR2YWx1ZSkgewoJCQlpZiAoIWlzX251bWVyaWMoJHZhbHVlKSB8fCAoJHZhbHVlIDwgMCkpIHsKCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKCJQbGVhc2UgZW50'));
	@fwrite($fp, base64_decode('ZXIgYSB2YWxpZCB2YWx1ZS4iKTsKCQkJfQoJCX0pOwoJCU9JRHBsdXM6OmNvbmZpZygpLT5wcmVwYXJlQ29uZmlnS2V5KCdyZXNvdXJjZV9wbHVnaW5fdGl0bGUnLCAgICAgICAgICAnUmVzb3VyY2UgcGx1Z2luOiBUaXRsZSBvZiB0aGUgcmVzb3VyY2Ugc2VjdGlv'));
	@fwrite($fp, base64_decode('bj8nLCAnRG9jdW1lbnRzIGFuZCByZXNvdXJjZXMnLCBPSURwbHVzQ29uZmlnOjpQUk9URUNUSU9OX0VESVRBQkxFLCBmdW5jdGlvbigkdmFsdWUpIHsKCQkJaWYgKGVtcHR5KCR2YWx1ZSkpIHsKCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKCJQbGVhc2Ug'));
	@fwrite($fp, base64_decode('ZW50ZXIgYSB0aXRsZS4iKTsKCQkJfQoJCX0pOwoJCU9JRHBsdXM6OmNvbmZpZygpLT5kZWxldGVDb25maWdLZXkoJ3Jlc291cmNlX3BsdWdpbl9wYXRoJyk7CgkJT0lEcGx1czo6Y29uZmlnKCktPnByZXBhcmVDb25maWdLZXkoJ3Jlc291cmNlX3BsdWdpbl9oaWRl'));
	@fwrite($fp, base64_decode('X2VtcHR5X3BhdGgnLCdSZXNvdXJjZSBwbHVnaW46IEhpZGUgZW1wdHkgcGF0aHM/IDE9b24sIDA9b2ZmJywgMSwgT0lEcGx1c0NvbmZpZzo6UFJPVEVDVElPTl9FRElUQUJMRSwgZnVuY3Rpb24oJHZhbHVlKSB7CgkJCWlmICghaXNfbnVtZXJpYygkdmFsdWUpIHx8'));
	@fwrite($fp, base64_decode('ICgoJHZhbHVlICE9IDApICYmICgkdmFsdWUgIT0gMSkpKSB7CgkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigiUGxlYXNlIGVudGVyIGEgdmFsaWQgdmFsdWUgKDA9b2ZmLCAxPW9uKS4iKTsKCQkJfQoJCX0pOwoJfQoKCXByaXZhdGUgc3RhdGljIGZ1bmN0'));
	@fwrite($fp, base64_decode('aW9uIGdldERvY3VtZW50VGl0bGUoJGZpbGUpIHsKCgkJJGZpbGUgPSBydHJpbShPSURwbHVzOjpiYXNlUGF0aCgpLCcvJykuJy8nLnNlbGY6OnJlYWxuYW1lKCRmaWxlKTsKCgkJJGNvbnQgPSBmaWxlX2dldF9jb250ZW50cygkZmlsZSk7CgkJaWYgKHByZWdfbWF0'));
	@fwrite($fp, base64_decode('Y2goJ0A8dGl0bGU+KC4rKTwvdGl0bGU+QGlzbVUnLCAkY29udCwgJG0pKSByZXR1cm4gJG1bMV07CgkJaWYgKHByZWdfbWF0Y2goJ0A8aDE+KC4rKTwvaDE+QGlzbVUnLCAkY29udCwgJG0pKSByZXR1cm4gJG1bMV07CgkJaWYgKHByZWdfbWF0Y2goJ0A8aDI+KC4r'));
	@fwrite($fp, base64_decode('KTwvaDI+QGlzbVUnLCAkY29udCwgJG0pKSByZXR1cm4gJG1bMV07CgkJaWYgKHByZWdfbWF0Y2goJ0A8aDM+KC4rKTwvaDM+QGlzbVUnLCAkY29udCwgJG0pKSByZXR1cm4gJG1bMV07CgkJaWYgKHByZWdfbWF0Y2goJ0A8aDQ+KC4rKTwvaDQ+QGlzbVUnLCAkY29u'));
	@fwrite($fp, base64_decode('dCwgJG0pKSByZXR1cm4gJG1bMV07CgkJaWYgKHByZWdfbWF0Y2goJ0A8aDU+KC4rKTwvaDU+QGlzbVUnLCAkY29udCwgJG0pKSByZXR1cm4gJG1bMV07CgkJaWYgKHByZWdfbWF0Y2goJ0A8aDY+KC4rKTwvaDY+QGlzbVUnLCAkY29udCwgJG0pKSByZXR1cm4gJG1b'));
	@fwrite($fp, base64_decode('MV07CgkJcmV0dXJuIHBhdGhpbmZvKCRmaWxlLCBQQVRISU5GT19GSUxFTkFNRSk7IC8vIGZpbGVuYW1lIHdpdGhvdXQgZXh0ZW5zaW9uCgl9CgoJcHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gbXlnbG9iKCRyZWxkaXIsICRvbmx5ZGlyPWZhbHNlKSB7CgkJJG91dCA9'));
	@fwrite($fp, base64_decode('IGFycmF5KCk7CgoJCSRyb290ID0gT0lEcGx1czo6YmFzZVBhdGgoKS4nL3VzZXJkYXRhL3Jlc291cmNlcy8nOwoJCSRyZXMgPSAkb25seWRpciA/IGdsb2IoJHJvb3QubHRyaW0oJHJlbGRpciwnLycpLCBHTE9CX09OTFlESVIpIDogZ2xvYigkcm9vdC5sdHJpbSgk'));
	@fwrite($fp, base64_decode('cmVsZGlyLCcvJykpOwoJCWZvcmVhY2ggKCRyZXMgYXMgJiR4KSB7CgkJCSR4ID0gc3Vic3RyKCR4LCBzdHJsZW4oJHJvb3QpKTsKCQkJJG91dFtdID0gJHg7CgkJfQoKCQkkcm9vdCA9IE9JRHBsdXM6OmJhc2VQYXRoKCkuJy9yZXMvJzsKCQkkcmVzID0gJG9ubHlk'));
	@fwrite($fp, base64_decode('aXIgPyBnbG9iKCRyb290Lmx0cmltKCRyZWxkaXIsJy8nKSwgR0xPQl9PTkxZRElSKSA6IGdsb2IoJHJvb3QubHRyaW0oJHJlbGRpciwnLycpKTsKCQlmb3JlYWNoICgkcmVzIGFzICR4KSB7CgkJCSR4ID0gc3Vic3RyKCR4LCBzdHJsZW4oJHJvb3QpKTsKCQkJJG91'));
	@fwrite($fp, base64_decode('dFtdID0gJHg7CgkJfQoKCQlyZXR1cm4gYXJyYXlfdW5pcXVlKCRvdXQpOwoJfQoKCXByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIHJlYWxuYW1lKCRyZWwpIHsKCQkkY2FuZGlkYXRlMSA9IE9JRHBsdXM6OmJhc2VQYXRoKCkuJy91c2VyZGF0YS9yZXNvdXJjZXMvJy4k'));
	@fwrite($fp, base64_decode('cmVsOwoJCSRjYW5kaWRhdGUyID0gT0lEcGx1czo6YmFzZVBhdGgoKS4nL3Jlcy8nLiRyZWw7CgkJaWYgKGZpbGVfZXhpc3RzKCRjYW5kaWRhdGUxKSB8fCBpc19kaXIoJGNhbmRpZGF0ZTEpKSByZXR1cm4gInVzZXJkYXRhL3Jlc291cmNlcy8kcmVsIjsKCQlpZiAo'));
	@fwrite($fp, base64_decode('ZmlsZV9leGlzdHMoJGNhbmRpZGF0ZTIpIHx8IGlzX2RpcigkY2FuZGlkYXRlMikpIHJldHVybiAicmVzLyRyZWwiOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBndWkoJGlkLCAmJG91dCwgJiRoYW5kbGVkKSB7CgkJaWYgKGV4cGxvZGUoJyQnLCRpZCwyKVswXSA9PT0g'));
	@fwrite($fp, base64_decode('J29pZHBsdXM6cmVzb3VyY2VzJykgewoJCQkkaGFuZGxlZCA9IHRydWU7CgoJCQkkZmlsZSA9IEBleHBsb2RlKCckJywkaWQpWzFdOwoKCQkJLy8gU2VjdXJpdHkgY2hlY2tzCgoJCQlpZiAoCgkJCQkoJGZpbGUgIT0gJycpICYmICgKCQkJCShzdHJwb3MoJGZpbGUs'));
	@fwrite($fp, base64_decode('IGNocigwKSkgIT09IGZhbHNlKSB8fCAvLyBEaXJlY3RvcnkgdHJhdmVyc2FsIChMRkksUkZJKSBoZWxwZXIKCQkJCShzdHJwb3MoJGZpbGUsICcuLi8nKSAhPT0gZmFsc2UpIHx8ICgkZmlsZVswXSA9PSAnLycpIHx8ICgkZmlsZVswXSA9PSAnficpIHx8IC8vIDwt'));
	@fwrite($fp, base64_decode('LSBMb2NhbCBGaWxlIEluamVjdGlvbiAoTEZJKQoJCQkJKCRmaWxlWzBdID09ICcuJykgfHwgKHN0cnBvcygkZmlsZSwgJy8uJykgIT09IGZhbHNlKSB8fCAgICAgICAgICAgICAgICAgICAgICAgLy8gPC0tIENhbGxpbmcgaGlkZGVuIGZpbGVzIGUuZy4gIi5odHBh'));
	@fwrite($fp, base64_decode('c3N3ZCIKCQkJCShzdHJwb3MoJGZpbGUsICc6Ly8nKSAhPT0gZmFsc2UpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDwtLSBSZW1vdGUgRmlsZSBJbmplY3Rpb24gKFJGSSkKCQkJICAgKSkgewoJCQkJaWYgKHN0cnBvcygk'));
	@fwrite($fp, base64_decode('ZmlsZSwgY2hyKDApKSAhPT0gZmFsc2UpIHsKCQkJCQkkZmlsZSA9IHN0cl9yZXBsYWNlKGNocigwKSwgJ1tOVUxdJywgJGZpbGUpOwoJCQkJfQoJCQkJT0lEcGx1czo6bG9nZ2VyKCktPmxvZygiW1dBUk5dQSEiLCAiTEZJL1JGSSBhdHRhY2sgYmxvY2tlZCAocmVx'));
	@fwrite($fp, base64_decode('dWVzdGVkIGZpbGUgJyRmaWxlJykiKTsKCQkJCSRvdXRbJ3RpdGxlJ10gPSAnQWNjZXNzIGRlbmllZCc7CgkJCQkkb3V0WydpY29uJ10gPSAnaW1nL2Vycm9yX2JpZy5wbmcnOwoJCQkJJG91dFsndGV4dCddID0gJzxwPlRoaXMgcmVxdWVzdCBpcyBpbnZhbGlkPC9w'));
	@fwrite($fp, base64_decode('Pic7CgkJCQlyZXR1cm47CgkJCX0KCgkJCSRvdXRbJ3RleHQnXSA9ICcnOwoKCQkJLy8gRmlyc3QsICJHbyBiYWNrIHRvIiBsaW5lCgoJCQlpZiAoJGZpbGUgIT0gJycpIHsKCQkJCSRkaXIgPSBkaXJuYW1lKCRmaWxlKTsKCgkJCQlpZiAoJGRpciA9PSAnLicpIHsK'));
	@fwrite($fp, base64_decode('CQkJCQlpZiAoZmlsZV9leGlzdHMoX19ESVJfXy4nL3RyZWVpY29uLnBuZycpKSB7CgkJCQkJCSR0cmVlX2ljb24gPSBPSURwbHVzOjp3ZWJwYXRoKF9fRElSX18pLid0cmVlaWNvbi5wbmcnOwoJCQkJCX0gZWxzZSB7CgkJCQkJCSR0cmVlX2ljb24gPSBudWxsOyAv'));
	@fwrite($fp, base64_decode('LyBkZWZhdWx0IGljb24gKGZvbGRlcikKCQkJCQl9CgoJCQkJCSRpYyA9IGVtcHR5KCR0cmVlX2ljb24pID8gJycgOiAnPGltZyBzcmM9IicuJHRyZWVfaWNvbi4nIiBhbHQ9IiI+JzsKCgkJCQkJJG91dFsndGV4dCddIC49ICc8cD48YSAnLk9JRHBsdXM6Omd1aSgp'));
	@fwrite($fp, base64_decode('LT5saW5rKCdvaWRwbHVzOnJlc291cmNlcycpLic+PGltZyBzcmM9ImltZy9hcnJvd19iYWNrLnBuZyIgd2lkdGg9IjE2Ij4gR28gYmFjayB0bzogJy4kaWMuJyAnLmh0bWxlbnRpdGllcyhPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ3Jlc291cmNlX3BsdWdp'));
	@fwrite($fp, base64_decode('bl90aXRsZScsICdEb2N1bWVudHMgYW5kIHJlc291cmNlcycpKS4nPC9hPjwvcD4nOwoJCQkJfSBlbHNlIHsKCQkJCQkkcmVhbGRpciA9IHNlbGY6OnJlYWxuYW1lKCRkaXIpOwoKCQkJCQkkdHJlZV9pY29uID0gT0lEcGx1czo6d2VicGF0aChfX0RJUl9fKS4nc2hv'));
	@fwrite($fp, base64_decode('d19pY29uLnBocD9tb2RlPXRyZWVpY29uX2ZvbGRlciZmaWxlPScudXJsZW5jb2RlKCRkaXIpOwoJCQkJCS8qCgkJCQkJJGljb25fY2FuZGlkYXRlID0gcGF0aGluZm8oJHJlYWxkaXIpWydkaXJuYW1lJ10uJy8nLnBhdGhpbmZvKCRyZWFsZGlyKVsnZmlsZW5hbWUn'));
	@fwrite($fp, base64_decode('XS4nX3RyZWUucG5nJzsKCQkJCQlpZiAoZmlsZV9leGlzdHMoJGljb25fY2FuZGlkYXRlKSkgewoJCQkJCQkkdHJlZV9pY29uID0gJGljb25fY2FuZGlkYXRlOwoJCQkJCX0gZWxzZSBpZiAoZmlsZV9leGlzdHMoX19ESVJfXy4nL3RyZWVpY29uX2ZvbGRlci5wbmcn'));
	@fwrite($fp, base64_decode('KSkgewoJCQkJCQkkdHJlZV9pY29uID0gT0lEcGx1czo6d2VicGF0aChfX0RJUl9fKS4ndHJlZWljb25fZm9sZGVyLnBuZyc7CgkJCQkJfSBlbHNlIHsKCQkJCQkJJHRyZWVfaWNvbiA9IG51bGw7IC8vIG5vIGljb24KCQkJCQl9CgkJCQkJKi8KCgkJCQkJJGljID0g'));
	@fwrite($fp, base64_decode('ZW1wdHkoJHRyZWVfaWNvbikgPyAnJyA6ICc8aW1nIHNyYz0iJy4kdHJlZV9pY29uLiciIGFsdD0iIj4nOwoKCQkJCQkkb3V0Wyd0ZXh0J10gLj0gJzxwPjxhICcuT0lEcGx1czo6Z3VpKCktPmxpbmsoJ29pZHBsdXM6cmVzb3VyY2VzJCcucnRyaW0oJGRpciwnLycp'));
	@fwrite($fp, base64_decode('LicvJykuJz48aW1nIHNyYz0iaW1nL2Fycm93X2JhY2sucG5nIiB3aWR0aD0iMTYiPiBHbyBiYWNrIHRvOiAnLiRpYy4nICcuaHRtbGVudGl0aWVzKGJhc2VuYW1lKCRkaXIpKS4nPC9hPjwvcD48YnI+JzsKCQkJCX0KCQkJfQoKCQkJLy8gVGhlbiB0aGUgY29udGVu'));
	@fwrite($fp, base64_decode('dAoKCQkJJHJlYWxmaWxlID0gc2VsZjo6cmVhbG5hbWUoJGZpbGUpOwoKCQkJaWYgKGZpbGVfZXhpc3RzKCRyZWFsZmlsZSkgJiYgKCFpc19kaXIoJHJlYWxmaWxlKSkpIHsKCQkJCWlmIChzdWJzdHIoJGZpbGUsLTQsNCkgPT0gJy51cmwnKSB7CgkJCQkJJG91dFsn'));
	@fwrite($fp, base64_decode('dGl0bGUnXSA9ICR0aGlzLT5nZXRIeXBlcmxpbmtUaXRsZSgkcmVhbGZpbGUpOwoKCQkJCQkkb3V0WydpY29uJ10gPSBPSURwbHVzOjp3ZWJwYXRoKF9fRElSX18pLidzaG93X2ljb24ucGhwP21vZGU9aWNvbl9sZWFmX3VybF9iaWcmZmlsZT0nLnVybGVuY29kZSgk'));
	@fwrite($fp, base64_decode('ZmlsZSk7CgkJCQkJLyoKCQkJCQkkaWNvbl9jYW5kaWRhdGUgPSBwYXRoaW5mbygkcmVhbGZpbGUpWydkaXJuYW1lJ10uJy8nLnBhdGhpbmZvKCRyZWFsZmlsZSlbJ2ZpbGVuYW1lJ10uJ19iaWcucG5nJzsKCQkJCQlpZiAoZmlsZV9leGlzdHMoJGljb25fY2FuZGlk'));
	@fwrite($fp, base64_decode('YXRlKSkgewoJCQkJCQkkb3V0WydpY29uJ10gPSAkaWNvbl9jYW5kaWRhdGU7CgkJCQkJfSBlbHNlIGlmIChmaWxlX2V4aXN0cyhfX0RJUl9fLicvaWNvbl9sZWFmX3VybF9iaWcucG5nJykpIHsKCQkJCQkJJG91dFsnaWNvbiddID0gT0lEcGx1czo6d2VicGF0aChf'));
	@fwrite($fp, base64_decode('X0RJUl9fKS4naWNvbl9sZWFmX3VybF9iaWcucG5nJzsKCQkJCQl9IGVsc2UgewoJCQkJCQkkb3V0WydpY29uJ10gPSAnJzsKCQkJCQl9CgkJCQkJKi8KCgkJCQkJLy8gU2hvdWxkIG5vdCBoYXBwZW4gdGhvdWdoLCBkdWUgdG8gY29uZGl0aW9uYWxzZWxlY3QKCQkJ'));
	@fwrite($fp, base64_decode('CQkkb3V0Wyd0ZXh0J10gLj0gJzxhIGhyZWY9IicuaHRtbGVudGl0aWVzKHNlbGY6OmdldEh5cGVybGlua1VSTCgkcmVhbGZpbGUpKS4nIiB0YXJnZXQ9Il9ibGFuayI+T3BlbiBpbiBuZXcgd2luZG93PC9hPic7CgkJCQl9IGVsc2UgaWYgKChzdWJzdHIoJGZpbGUs'));
	@fwrite($fp, base64_decode('LTQsNCkgPT0gJy5odG0nKSB8fCAoc3Vic3RyKCRmaWxlLC01LDUpID09ICcuaHRtbCcpKSB7CgkJCQkJJG91dFsndGl0bGUnXSA9ICR0aGlzLT5nZXREb2N1bWVudFRpdGxlKCRmaWxlKTsKCgkJCQkJJG91dFsnaWNvbiddID0gT0lEcGx1czo6d2VicGF0aChfX0RJ'));
	@fwrite($fp, base64_decode('Ul9fKS4nc2hvd19pY29uLnBocD9tb2RlPWljb25fbGVhZl9kb2NfYmlnJmZpbGU9Jy51cmxlbmNvZGUoJGZpbGUpOwoJCQkJCS8qCgkJCQkJJGljb25fY2FuZGlkYXRlID0gcGF0aGluZm8oJHJlYWxmaWxlKVsnZGlybmFtZSddLicvJy5wYXRoaW5mbygkcmVhbGZp'));
	@fwrite($fp, base64_decode('bGUpWydmaWxlbmFtZSddLidfYmlnLnBuZyc7CgkJCQkJaWYgKGZpbGVfZXhpc3RzKCRpY29uX2NhbmRpZGF0ZSkpIHsKCQkJCQkJJG91dFsnaWNvbiddID0gJGljb25fY2FuZGlkYXRlOwoJCQkJCX0gZWxzZSBpZiAoZmlsZV9leGlzdHMoX19ESVJfXy4nL2ljb25f'));
	@fwrite($fp, base64_decode('bGVhZl9kb2NfYmlnLnBuZycpKSB7CgkJCQkJCSRvdXRbJ2ljb24nXSA9IE9JRHBsdXM6OndlYnBhdGgoX19ESVJfXykuJ2ljb25fbGVhZl9kb2NfYmlnLnBuZyc7CgkJCQkJfSBlbHNlIHsKCQkJCQkJJG91dFsnaWNvbiddID0gJyc7CgkJCQkJfQoJCQkJCSovCgoJ'));
	@fwrite($fp, base64_decode('CQkJCSRjb250ID0gZmlsZV9nZXRfY29udGVudHMoJHJlYWxmaWxlKTsKCQkJCQkkY29udCA9IHByZWdfcmVwbGFjZSgnQF4oLispPGJvZHlbXj5dKj5AaXNVJywgJycsICRjb250KTsKCQkJCQkkY29udCA9IHByZWdfcmVwbGFjZSgnQDwvYm9keT4uKyRAaXNVJywg'));
	@fwrite($fp, base64_decode('JycsICRjb250KTsKCQkJCQkkY29udCA9IHByZWdfcmVwbGFjZSgnQDx0aXRsZT4uKzwvdGl0bGU+QGlzVScsICcnLCAkY29udCk7CgkJCQkJJGNvbnQgPSBwcmVnX3JlcGxhY2UoJ0A8aDE+Lis8L2gxPkBpc1UnLCAnJywgJGNvbnQsIDEpOwoKCQkJCQkkb3V0Wyd0'));
	@fwrite($fp, base64_decode('ZXh0J10gLj0gJGNvbnQ7CgkJCQl9IGVsc2UgewoJCQkJCSRvdXRbJ3RpdGxlJ10gPSAnVW5rbm93biBmaWxlIHR5cGUnOwoJCQkJCSRvdXRbJ2ljb24nXSA9ICdpbWcvZXJyb3JfYmlnLnBuZyc7CgkJCQkJJG91dFsndGV4dCddID0gJzxwPlRoZSBzeXN0ZW0gZG9l'));
	@fwrite($fp, base64_decode('cyBub3Qga25vdyBob3cgdG8gaGFuZGxlIHRoaXMgZmlsZSB0eXBlLjwvcD4nOwoJCQkJCXJldHVybjsKCQkJCX0KCQkJfSBlbHNlIGlmIChpc19kaXIoJHJlYWxmaWxlKSkgewoJCQkJJG91dFsndGl0bGUnXSA9ICgkZmlsZSA9PSAnJykgPyBPSURwbHVzOjpjb25m'));
	@fwrite($fp, base64_decode('aWcoKS0+Z2V0VmFsdWUoJ3Jlc291cmNlX3BsdWdpbl90aXRsZScsICdEb2N1bWVudHMgYW5kIHJlc291cmNlcycpIDogYmFzZW5hbWUoJGZpbGUpOwoKCQkJCWlmICgkZmlsZSA9PSAnJykgewoJCQkJCSRvdXRbJ2ljb24nXSA9IGZpbGVfZXhpc3RzKF9fRElSX18u'));
	@fwrite($fp, base64_decode('Jy9pY29uX2JpZy5wbmcnKSA/IE9JRHBsdXM6OndlYnBhdGgoX19ESVJfXykuJ2ljb25fYmlnLnBuZycgOiAnJzsKCQkJCX0gZWxzZSB7CgkJCQkJJG91dFsnaWNvbiddID0gT0lEcGx1czo6d2VicGF0aChfX0RJUl9fKS4nc2hvd19pY29uLnBocD9tb2RlPWljb25f'));
	@fwrite($fp, base64_decode('Zm9sZGVyX2JpZyZmaWxlPScudXJsZW5jb2RlKCRmaWxlKTsKCQkJCQkvKgoJCQkJCSRpY29uX2NhbmRpZGF0ZSA9IHBhdGhpbmZvKCRyZWFsZmlsZSlbJ2Rpcm5hbWUnXS4nLycucGF0aGluZm8oJHJlYWxmaWxlKVsnZmlsZW5hbWUnXS4nX2JpZy5wbmcnOwoJCQkJ'));
	@fwrite($fp, base64_decode('CWlmIChmaWxlX2V4aXN0cygkaWNvbl9jYW5kaWRhdGUpKSB7CgkJCQkJCSRvdXRbJ2ljb24nXSA9ICRpY29uX2NhbmRpZGF0ZTsKCQkJCQl9IGVsc2UgaWYgKGZpbGVfZXhpc3RzKF9fRElSX18uJy9pY29uX2ZvbGRlcl9iaWcucG5nJykpIHsKCQkJCQkJJG91dFsn'));
	@fwrite($fp, base64_decode('aWNvbiddID0gT0lEcGx1czo6d2VicGF0aChfX0RJUl9fKS4naWNvbl9mb2xkZXJfYmlnLnBuZyc7CgkJCQkJfSBlbHNlIHsKCQkJCQkJJG91dFsnaWNvbiddID0gbnVsbDsgLy8gbm8gaWNvbgoJCQkJCX0KCQkJCQkqLwoJCQkJfQoKCQkJCWlmIChmaWxlX2V4aXN0'));
	@fwrite($fp, base64_decode('cyhfX0RJUl9fLicvdHJlZWljb24ucG5nJykpIHsKCQkJCQkkdHJlZV9pY29uID0gT0lEcGx1czo6d2VicGF0aChfX0RJUl9fKS4ndHJlZWljb24ucG5nJzsKCQkJCX0gZWxzZSB7CgkJCQkJJHRyZWVfaWNvbiA9IG51bGw7IC8vIGRlZmF1bHQgaWNvbiAoZm9sZGVy'));
	@fwrite($fp, base64_decode('KQoJCQkJfQoKCQkJCSRjb3VudCA9IDA7CgoJCQkJJGRpcnMgPSBzZWxmOjpteWdsb2IocnRyaW0oJGZpbGUsJy8nKS4nLycuJyonLCB0cnVlKTsKCQkJCW5hdGNhc2Vzb3J0KCRkaXJzKTsKCQkJCWZvcmVhY2ggKCRkaXJzIGFzICRkaXIpIHsKCQkJCQkkcmVhbGRp'));
	@fwrite($fp, base64_decode('ciA9IHNlbGY6OnJlYWxuYW1lKCRkaXIpOwoJCQkJCSR0cmVlX2ljb24gPSBPSURwbHVzOjp3ZWJwYXRoKF9fRElSX18pLidzaG93X2ljb24ucGhwP21vZGU9dHJlZWljb25fZm9sZGVyJmZpbGU9Jy51cmxlbmNvZGUoJGRpcik7CgkJCQkJLyoKCQkJCQkkaWNvbl9j'));
	@fwrite($fp, base64_decode('YW5kaWRhdGUgPSBwYXRoaW5mbygkcmVhbGRpcilbJ2Rpcm5hbWUnXS4nLycucGF0aGluZm8oJHJlYWxkaXIpWydmaWxlbmFtZSddLidfdHJlZS5wbmcnOwoJCQkJCWlmIChmaWxlX2V4aXN0cygkaWNvbl9jYW5kaWRhdGUpKSB7CgkJCQkJCSR0cmVlX2ljb24gPSAk'));
	@fwrite($fp, base64_decode('aWNvbl9jYW5kaWRhdGU7CgkJCQkJfSBlbHNlIGlmIChmaWxlX2V4aXN0cyhfX0RJUl9fLicvdHJlZWljb25fZm9sZGVyLnBuZycpKSB7CgkJCQkJCSR0cmVlX2ljb24gPSBPSURwbHVzOjp3ZWJwYXRoKF9fRElSX18pLid0cmVlaWNvbl9mb2xkZXIucG5nJzsKCQkJ'));
	@fwrite($fp, base64_decode('CQl9IGVsc2UgewoJCQkJCQkkdHJlZV9pY29uID0gbnVsbDsgLy8gbm8gaWNvbgoJCQkJCX0KCQkJCQkqLwoKCQkJCQkkaWMgPSBlbXB0eSgkdHJlZV9pY29uKSA/ICcnIDogJzxpbWcgc3JjPSInLiR0cmVlX2ljb24uJyIgYWx0PSIiPic7CgoJCQkJCSRvdXRbJ3Rl'));
	@fwrite($fp, base64_decode('eHQnXSAuPSAnPHA+PGEgJy5PSURwbHVzOjpndWkoKS0+bGluaygnb2lkcGx1czpyZXNvdXJjZXMkJy5ydHJpbSgkZGlyLCcvJykuJy8nKS4nPicuJGljLicgJy5odG1sZW50aXRpZXMoYmFzZW5hbWUoJGRpcikpLic8L2E+PC9wPic7CgkJCQkJJGNvdW50Kys7CgkJ'));
	@fwrite($fp, base64_decode('CQl9CgoJCQkJJGZpbGVzID0gYXJyYXlfbWVyZ2UoCgkJCQkJc2VsZjo6bXlnbG9iKHJ0cmltKCRmaWxlLCcvJykuJy8nLicqLmh0bSonKSwgLy8gVE9ETzogYWxzbyBQSFA/CgkJCQkJc2VsZjo6bXlnbG9iKHJ0cmltKCRmaWxlLCcvJykuJy8nLicqLnVybCcpCgkJ'));
	@fwrite($fp, base64_decode('CQkpOwoJCQkJbmF0Y2FzZXNvcnQoJGZpbGVzKTsKCQkJCWZvcmVhY2ggKCRmaWxlcyBhcyAkZmlsZSkgewoJCQkJCSRyZWFsZmlsZSA9IHNlbGY6OnJlYWxuYW1lKCRmaWxlKTsKCQkJCQlpZiAoc3Vic3RyKCRmaWxlLC00LDQpID09ICcudXJsJykgewoJCQkJCQkk'));
	@fwrite($fp, base64_decode('dHJlZV9pY29uID0gT0lEcGx1czo6d2VicGF0aChfX0RJUl9fKS4nc2hvd19pY29uLnBocD9tb2RlPXRyZWVpY29uX2xlYWZfdXJsJmZpbGU9Jy51cmxlbmNvZGUoJGZpbGUpOwoJCQkJCQkvKgoJCQkJCQkkaWNvbl9jYW5kaWRhdGUgPSBwYXRoaW5mbygkcmVhbGZp'));
	@fwrite($fp, base64_decode('bGUpWydkaXJuYW1lJ10uJy8nLnBhdGhpbmZvKCRyZWFsZmlsZSlbJ2ZpbGVuYW1lJ10uJ190cmVlLnBuZyc7CgkJCQkJCWlmIChmaWxlX2V4aXN0cygkaWNvbl9jYW5kaWRhdGUpKSB7CgkJCQkJCQkkdHJlZV9pY29uID0gJGljb25fY2FuZGlkYXRlOwoJCQkJCQl9'));
	@fwrite($fp, base64_decode('IGVsc2UgaWYgKGZpbGVfZXhpc3RzKF9fRElSX18uJy90cmVlaWNvbl9sZWFmX3VybC5wbmcnKSkgewoJCQkJCQkJJHRyZWVfaWNvbiA9IE9JRHBsdXM6OndlYnBhdGgoX19ESVJfXykuJ3RyZWVpY29uX2xlYWZfdXJsLnBuZyc7CgkJCQkJCX0gZWxzZSB7CgkJCQkJ'));
	@fwrite($fp, base64_decode('CQkkdHJlZV9pY29uID0gbnVsbDsgLy8gZGVmYXVsdCBpY29uIChmb2xkZXIpCgkJCQkJCX0KCQkJCQkJKi8KCgkJCQkJCSRpYyA9IGVtcHR5KCR0cmVlX2ljb24pID8gJycgOiAnPGltZyBzcmM9IicuJHRyZWVfaWNvbi4nIiBhbHQ9IiI+JzsKCgkJCQkJCSRoeXBl'));
	@fwrite($fp, base64_decode('cmxpbmtfcGljID0gJyA8aW1nIHNyYz0iJy5PSURwbHVzOjp3ZWJwYXRoKF9fRElSX18pLidoeXBlcmxpbmsucG5nIiB3aWRodD0iMTMiIGhlaWdodD0iMTMiIGFsdD0iSHlwZXJsaW5rIiBzdHlsZT0idG9wOi0zcHg7cG9zaXRpb246cmVsYXRpdmUiPic7CgoJCQkJ'));
	@fwrite($fp, base64_decode('CQkkb3V0Wyd0ZXh0J10gLj0gJzxwPjxhIGhyZWY9IicuaHRtbGVudGl0aWVzKHNlbGY6OmdldEh5cGVybGlua1VSTCgkcmVhbGZpbGUpKS4nIiB0YXJnZXQ9Il9ibGFuayI+Jy4kaWMuJyAnLmh0bWxlbnRpdGllcygkdGhpcy0+Z2V0SHlwZXJsaW5rVGl0bGUoJHJl'));
	@fwrite($fp, base64_decode('YWxmaWxlKSkuJyAnLiRoeXBlcmxpbmtfcGljLic8L2E+PC9wPic7CgkJCQkJCSRjb3VudCsrOwoJCQkJCX0gZWxzZSB7CgkJCQkJCSR0cmVlX2ljb24gPSBPSURwbHVzOjp3ZWJwYXRoKF9fRElSX18pLidzaG93X2ljb24ucGhwP21vZGU9dHJlZWljb25fbGVhZl9k'));
	@fwrite($fp, base64_decode('b2MmZmlsZT0nLnVybGVuY29kZSgkZmlsZSk7CgkJCQkJCS8qCgkJCQkJCSRpY29uX2NhbmRpZGF0ZSA9IHBhdGhpbmZvKCRyZWFsZmlsZSlbJ2Rpcm5hbWUnXS4nLycucGF0aGluZm8oJHJlYWxmaWxlKVsnZmlsZW5hbWUnXS4nX3RyZWUucG5nJzsKCQkJCQkJaWYg'));
	@fwrite($fp, base64_decode('KGZpbGVfZXhpc3RzKCRpY29uX2NhbmRpZGF0ZSkpIHsKCQkJCQkJCSR0cmVlX2ljb24gPSAkaWNvbl9jYW5kaWRhdGU7CgkJCQkJCX0gZWxzZSBpZiAoZmlsZV9leGlzdHMoX19ESVJfXy4nL3RyZWVpY29uX2xlYWZfZG9jLnBuZycpKSB7CgkJCQkJCQkkdHJlZV9p'));
	@fwrite($fp, base64_decode('Y29uID0gT0lEcGx1czo6d2VicGF0aChfX0RJUl9fKS4ndHJlZWljb25fbGVhZl9kb2MucG5nJzsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCSR0cmVlX2ljb24gPSBudWxsOyAvLyBkZWZhdWx0IGljb24gKGZvbGRlcikKCQkJCQkJfQoJCQkJCQkqLwoKCQkJCQkJJGlj'));
	@fwrite($fp, base64_decode('ID0gZW1wdHkoJHRyZWVfaWNvbikgPyAnJyA6ICc8aW1nIHNyYz0iJy4kdHJlZV9pY29uLiciIGFsdD0iIj4nOwoKCQkJCQkJJG91dFsndGV4dCddIC49ICc8cD48YSAnLk9JRHBsdXM6Omd1aSgpLT5saW5rKCdvaWRwbHVzOnJlc291cmNlcyQnLiRmaWxlKS4nPicu'));
	@fwrite($fp, base64_decode('JGljLicgJy5odG1sZW50aXRpZXMoJHRoaXMtPmdldERvY3VtZW50VGl0bGUoJGZpbGUpKS4nPC9hPjwvcD4nOwoJCQkJCQkkY291bnQrKzsKCQkJCQl9CgkJCQl9CgoJCQkJaWYgKCRjb3VudCA9PSAwKSB7CgkJCQkJJG91dFsndGV4dCddIC49ICc8cD5UaGlzIGZv'));
	@fwrite($fp, base64_decode('bGRlciBkb2VzIG5vdCBjb250YWluIGFueSBlbGVtZW50czwvcD4nOwoJCQkJfQoJCQl9IGVsc2UgewoJCQkJJG91dFsndGl0bGUnXSA9ICdOb3QgZm91bmQnOwoJCQkJJG91dFsnaWNvbiddID0gJ2ltZy9lcnJvcl9iaWcucG5nJzsKCQkJCSRvdXRbJ3RleHQnXSA9'));
	@fwrite($fp, base64_decode('ICc8cD5UaGlzIHJlc291cmNlIGRvZXNuXCd0IGV4aXN0IGFueW1vcmUuPC9wPic7CgkJCX0KCQl9Cgl9CgoJcHJpdmF0ZSBmdW5jdGlvbiB0cmVlX3JlYygmJGNoaWxkcmVuLCAkcm9vdGRpcj1udWxsLCAkZGVwdGg9MCkgewoJCWlmIChpc19udWxsKCRyb290ZGly'));
	@fwrite($fp, base64_decode('KSkgJHJvb3RkaXIgPSAnJzsKCQlpZiAoJGRlcHRoID4gMTAwKSByZXR1cm4gZmFsc2U7IC8vIHNvbWV0aGluZyBpcyB3cm9uZyEKCgkJJGRpcnMgPSBzZWxmOjpteWdsb2IoJHJvb3RkaXIuJyonLicvJywgdHJ1ZSk7CgkJbmF0Y2FzZXNvcnQoJGRpcnMpOwoJCWZv'));
	@fwrite($fp, base64_decode('cmVhY2ggKCRkaXJzIGFzICRkaXIpIHsKCQkJJHRtcCA9IGFycmF5KCk7CgoJCQkkdGhpcy0+dHJlZV9yZWMoJHRtcCwgJGRpciwgJGRlcHRoKzEpOwoKCQkJJHJlYWxkaXIgPSBzZWxmOjpyZWFsbmFtZSgkZGlyKTsKCgkJCSR0cmVlX2ljb24gPSBPSURwbHVzOjp3'));
	@fwrite($fp, base64_decode('ZWJwYXRoKF9fRElSX18pLidzaG93X2ljb24ucGhwP21vZGU9dHJlZWljb25fZm9sZGVyJmZpbGU9Jy51cmxlbmNvZGUoJGRpcik7CgkJCS8qCgkJCSRpY29uX2NhbmRpZGF0ZSA9IHBhdGhpbmZvKCRyZWFsZGlyKVsnZGlybmFtZSddLicvJy5wYXRoaW5mbygkcmVh'));
	@fwrite($fp, base64_decode('bGRpcilbJ2ZpbGVuYW1lJ10uJ190cmVlLnBuZyc7CgkJCWlmIChmaWxlX2V4aXN0cygkaWNvbl9jYW5kaWRhdGUpKSB7CgkJCQkkdHJlZV9pY29uID0gJGljb25fY2FuZGlkYXRlOwoJCQl9IGVsc2UgaWYgKGZpbGVfZXhpc3RzKF9fRElSX18uJy90cmVlaWNvbl9m'));
	@fwrite($fp, base64_decode('b2xkZXIucG5nJykpIHsKCQkJCSR0cmVlX2ljb24gPSBPSURwbHVzOjp3ZWJwYXRoKF9fRElSX18pLid0cmVlaWNvbl9mb2xkZXIucG5nJzsKCQkJfSBlbHNlIHsKCQkJCSR0cmVlX2ljb24gPSBudWxsOyAvLyBkZWZhdWx0IGljb24gKGZvbGRlcikKCQkJfQoJCQkq'));
	@fwrite($fp, base64_decode('LwoKCQkJJGNoaWxkcmVuW10gPSBhcnJheSgKCQkJCSdpZCcgPT4gJ29pZHBsdXM6cmVzb3VyY2VzJCcuJGRpciwKCQkJCSdpY29uJyA9PiAkdHJlZV9pY29uLAoJCQkJJ3RleHQnID0+IGJhc2VuYW1lKCRkaXIpLAoJCQkJJ2NoaWxkcmVuJyA9PiAkdG1wLAoJCQkJ'));
	@fwrite($fp, base64_decode('J3N0YXRlJyA9PiBhcnJheSgib3BlbmVkIiA9PiAkZGVwdGggPD0gT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdyZXNvdXJjZV9wbHVnaW5fYXV0b29wZW5fbGV2ZWwnLCAxKS0xKQoJCQkpOwoJCX0KCgkJJGZpbGVzID0gYXJyYXlfbWVyZ2UoCgkJCXNlbGY6'));
	@fwrite($fp, base64_decode('Om15Z2xvYigkcm9vdGRpci4nKi5odG0qJyksIC8vIFRPRE86IEFsc28gUEhQPwoJCQlzZWxmOjpteWdsb2IoJHJvb3RkaXIuJyoudXJsJykKCQkpOwoJCW5hdGNhc2Vzb3J0KCRmaWxlcyk7CgkJZm9yZWFjaCAoJGZpbGVzIGFzICRmaWxlKSB7CgkJCSRyZWFsZmls'));
	@fwrite($fp, base64_decode('ZSA9IHNlbGY6OnJlYWxuYW1lKCRmaWxlKTsKCQkJaWYgKHN1YnN0cigkZmlsZSwtNCw0KSA9PSAnLnVybCcpIHsKCQkJCSR0cmVlX2ljb24gPSBPSURwbHVzOjp3ZWJwYXRoKF9fRElSX18pLidzaG93X2ljb24ucGhwP21vZGU9dHJlZWljb25fbGVhZl91cmwmZmls'));
	@fwrite($fp, base64_decode('ZT0nLnVybGVuY29kZSgkZmlsZSk7CgkJCQkvKgoJCQkJJGljb25fY2FuZGlkYXRlID0gcGF0aGluZm8oJHJlYWxmaWxlKVsnZGlybmFtZSddLicvJy5wYXRoaW5mbygkcmVhbGZpbGUpWydmaWxlbmFtZSddLidfdHJlZS5wbmcnOwoJCQkJaWYgKGZpbGVfZXhpc3Rz'));
	@fwrite($fp, base64_decode('KCRpY29uX2NhbmRpZGF0ZSkpIHsKCQkJCQkkdHJlZV9pY29uID0gJGljb25fY2FuZGlkYXRlOwoJCQkJfSBlbHNlIGlmIChmaWxlX2V4aXN0cyhfX0RJUl9fLicvdHJlZWljb25fbGVhZl91cmwucG5nJykpIHsKCQkJCQkkdHJlZV9pY29uID0gT0lEcGx1czo6d2Vi'));
	@fwrite($fp, base64_decode('cGF0aChfX0RJUl9fKS4ndHJlZWljb25fbGVhZl91cmwucG5nJzsKCQkJCX0gZWxzZSB7CgkJCQkJJHRyZWVfaWNvbiA9IG51bGw7IC8vIGRlZmF1bHQgaWNvbiAoZm9sZGVyKQoJCQkJfQoJCQkJKi8KCgkJCQkkaHlwZXJsaW5rX3BpYyA9ICcgPGltZyBzcmM9Iicu'));
	@fwrite($fp, base64_decode('T0lEcGx1czo6d2VicGF0aChfX0RJUl9fKS4naHlwZXJsaW5rLnBuZyIgd2lkaHQ9IjEzIiBoZWlnaHQ9IjEzIiBhbHQ9Ikh5cGVybGluayIgc3R5bGU9InRvcDotM3B4O3Bvc2l0aW9uOnJlbGF0aXZlIj4nOwoKCQkJCSRjaGlsZHJlbltdID0gYXJyYXkoCgkJCQkJ'));
	@fwrite($fp, base64_decode('J2lkJyA9PiAnb2lkcGx1czpyZXNvdXJjZXMkJy4kZmlsZSwKCQkJCQknY29uZGl0aW9uYWxzZWxlY3QnID0+ICd3aW5kb3cub3BlbignLmpzX2VzY2FwZShzZWxmOjpnZXRIeXBlcmxpbmtVUkwoJHJlYWxmaWxlKSkuJyk7IGZhbHNlOycsCgkJCQkJJ2ljb24nID0+'));
	@fwrite($fp, base64_decode('ICR0cmVlX2ljb24sCgkJCQkJJ3RleHQnID0+ICR0aGlzLT5nZXRIeXBlcmxpbmtUaXRsZSgkcmVhbGZpbGUpLicgJy4kaHlwZXJsaW5rX3BpYywKCQkJCQknc3RhdGUnID0+IGFycmF5KCJvcGVuZWQiID0+ICRkZXB0aCA8PSBPSURwbHVzOjpjb25maWcoKS0+Z2V0'));
	@fwrite($fp, base64_decode('VmFsdWUoJ3Jlc291cmNlX3BsdWdpbl9hdXRvb3Blbl9sZXZlbCcsIDEpLTEpCgkJCQkpOwoJCQl9IGVsc2UgewoJCQkJJHRyZWVfaWNvbiA9IE9JRHBsdXM6OndlYnBhdGgoX19ESVJfXykuJ3Nob3dfaWNvbi5waHA/bW9kZT10cmVlaWNvbl9sZWFmX2RvYyZmaWxl'));
	@fwrite($fp, base64_decode('PScudXJsZW5jb2RlKCRmaWxlKTsKCQkJCS8qCgkJCQkkaWNvbl9jYW5kaWRhdGUgPSBwYXRoaW5mbygkcmVhbGZpbGUpWydkaXJuYW1lJ10uJy8nLnBhdGhpbmZvKCRyZWFsZmlsZSlbJ2ZpbGVuYW1lJ10uJ190cmVlLnBuZyc7CgkJCQlpZiAoZmlsZV9leGlzdHMo'));
	@fwrite($fp, base64_decode('JGljb25fY2FuZGlkYXRlKSkgewoJCQkJCSR0cmVlX2ljb24gPSAkaWNvbl9jYW5kaWRhdGU7CgkJCQl9IGVsc2UgaWYgKGZpbGVfZXhpc3RzKF9fRElSX18uJy90cmVlaWNvbl9sZWFmX2RvYy5wbmcnKSkgewoJCQkJCSR0cmVlX2ljb24gPSBPSURwbHVzOjp3ZWJw'));
	@fwrite($fp, base64_decode('YXRoKF9fRElSX18pLid0cmVlaWNvbl9sZWFmX2RvYy5wbmcnOwoJCQkJfSBlbHNlIHsKCQkJCQkkdHJlZV9pY29uID0gbnVsbDsgLy8gZGVmYXVsdCBpY29uIChmb2xkZXIpCgkJCQl9CgkJCQkqLwoJCQkJJGNoaWxkcmVuW10gPSBhcnJheSgKCQkJCQknaWQnID0+'));
	@fwrite($fp, base64_decode('ICdvaWRwbHVzOnJlc291cmNlcyQnLiRmaWxlLAoJCQkJCSdpY29uJyA9PiAkdHJlZV9pY29uLAoJCQkJCSd0ZXh0JyA9PiAkdGhpcy0+Z2V0RG9jdW1lbnRUaXRsZSgkZmlsZSksCgkJCQkJJ3N0YXRlJyA9PiBhcnJheSgib3BlbmVkIiA9PiAkZGVwdGggPD0gT0lE'));
	@fwrite($fp, base64_decode('cGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdyZXNvdXJjZV9wbHVnaW5fYXV0b29wZW5fbGV2ZWwnLCAxKS0xKQoJCQkJKTsKCQkJfQoJCX0KCX0KCglwcml2YXRlIGZ1bmN0aW9uIHB1YmxpY1NpdGVtYXBfcmVjKCRqc29uLCAmJG91dCkgewoJCWZvcmVhY2ggKCRq'));
	@fwrite($fp, base64_decode('c29uIGFzICR4KSB7CgkJCWlmIChpc3NldCgkeFsnaWQnXSkgJiYgJHhbJ2lkJ10pIHsKCQkJCSRvdXRbXSA9IE9JRHBsdXM6OmdldFN5c3RlbVVybCgpLic/Z290bz0nLnVybGVuY29kZSgkeFsnaWQnXSk7CgkJCX0KCQkJaWYgKGlzc2V0KCR4WydjaGlsZHJlbidd'));
	@fwrite($fp, base64_decode('KSkgewoJCQkJJHRoaXMtPnB1YmxpY1NpdGVtYXBfcmVjKCR4WydjaGlsZHJlbiddLCAkb3V0KTsKCQkJfQoJCX0KCX0KCglwdWJsaWMgZnVuY3Rpb24gcHVibGljU2l0ZW1hcCgmJG91dCkgewoJCSRqc29uID0gYXJyYXkoKTsKCQkkdGhpcy0+dHJlZSgkanNvbiwg'));
	@fwrite($fp, base64_decode('bnVsbC8qUkEgRU1haWwqLywgZmFsc2UvKkhUTUwgdHJlZSBhbGdvcml0aG0qLywgdHJ1ZS8qZGlzcGxheSBhbGwqLyk7CgkJJHRoaXMtPnB1YmxpY1NpdGVtYXBfcmVjKCRqc29uLCAkb3V0KTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gdHJlZSgmJGpzb24sICRyYV9l'));
	@fwrite($fp, base64_decode('bWFpbD1udWxsLCAkbm9uanM9ZmFsc2UsICRyZXFfZ290bz0nJykgewoJCSRjaGlsZHJlbiA9IGFycmF5KCk7CgoJCSR0aGlzLT50cmVlX3JlYygkY2hpbGRyZW4sICcvJyk7CgoJCWlmICghT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdyZXNvdXJjZV9wbHVn'));
	@fwrite($fp, base64_decode('aW5faGlkZV9lbXB0eV9wYXRoJywgdHJ1ZSkgfHwgKGNvdW50KCRjaGlsZHJlbikgPiAwKSkgewoJCQlpZiAoZmlsZV9leGlzdHMoX19ESVJfXy4nL3RyZWVpY29uLnBuZycpKSB7CgkJCQkkdHJlZV9pY29uID0gT0lEcGx1czo6d2VicGF0aChfX0RJUl9fKS4ndHJl'));
	@fwrite($fp, base64_decode('ZWljb24ucG5nJzsKCQkJfSBlbHNlIHsKCQkJCSR0cmVlX2ljb24gPSBudWxsOyAvLyBkZWZhdWx0IGljb24gKGZvbGRlcikKCQkJfQoKCQkJJGpzb25bXSA9IGFycmF5KAoJCQkJJ2lkJyA9PiAnb2lkcGx1czpyZXNvdXJjZXMnLAoJCQkJJ2ljb24nID0+ICR0cmVl'));
	@fwrite($fp, base64_decode('X2ljb24sCgkJCQknc3RhdGUnID0+IGFycmF5KCJvcGVuZWQiID0+IHRydWUpLAoJCQkJJ3RleHQnID0+IE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgncmVzb3VyY2VfcGx1Z2luX3RpdGxlJywgJ0RvY3VtZW50cyBhbmQgcmVzb3VyY2VzJyksCgkJCQknY2hp'));
	@fwrite($fp, base64_decode('bGRyZW4nID0+ICRjaGlsZHJlbgoJCQkpOwoJCX0KCgkJcmV0dXJuIHRydWU7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHRyZWVfc2VhcmNoKCRyZXF1ZXN0KSB7CgkJcmV0dXJuIGZhbHNlOwoJfQoKCXByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIGdldEh5cGVybGlua1Rp'));
	@fwrite($fp, base64_decode('dGxlKCRmaWxlKSB7CgkJcmV0dXJuIHByZWdfcmVwbGFjZSgnL1xcLlteLlxcc117Myw0fSQvJywgJycsIGJhc2VuYW1lKCRmaWxlKSk7Cgl9CgoJcHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gZ2V0SHlwZXJsaW5rVVJMKCRmaWxlKSB7CgkJLyoKCQlbezAwMDIxNEEw'));
	@fwrite($fp, base64_decode('LTAwMDAtMDAwMC1DMDAwLTAwMDAwMDAwMDA0Nn1dCgkJUHJvcDM9MTksMgoJCVtJbnRlcm5ldFNob3J0Y3V0XQoJCVVSTD1odHRwOi8vd3d3LmV4YW1wbGUuY29tLwoJCUlETGlzdD0KCQkqLwoJCSRjb250ID0gZmlsZV9nZXRfY29udGVudHMoJGZpbGUpOwoJCWlm'));
	@fwrite($fp, base64_decode('ICghcHJlZ19tYXRjaCgnQFVSTD0oLispXG5AaXNtVScsICRjb250LCAkbSkpIHJldHVybiBudWxsOwoJCXJldHVybiB0cmltKCRtWzFdKTsKCX0KfQo='));
	@fclose($fp);
}
if (!is_file('plugins/publicPages/500_resources/OIDplusPagePublicResources.class.php')) {
	warn('File has vanished! Will re-create it: plugins/publicPages/500_resources/OIDplusPagePublicResources.class.php');
	writefile_1();
	if (!is_file('plugins/publicPages/500_resources/OIDplusPagePublicResources.class.php')) {
		warn('File cannot be created (not existing): plugins/publicPages/500_resources/OIDplusPagePublicResources.class.php');
	} else if (sha1_file('plugins/publicPages/500_resources/OIDplusPagePublicResources.class.php') != '620894216d33096cf819e0983fa10872e1037dea') {
		warn('File cannot be created (checksum mismatch): plugins/publicPages/500_resources/OIDplusPagePublicResources.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/publicPages/500_resources/OIDplusPagePublicResources.class.php', 0644)) {
		warn('Could not change file permissions of plugins/publicPages/500_resources/OIDplusPagePublicResources.class.php');
	}
} else {
	if (@sha1_file('plugins/publicPages/500_resources/OIDplusPagePublicResources.class.php') !== '620894216d33096cf819e0983fa10872e1037dea') {
		if (@sha1_file('plugins/publicPages/500_resources/OIDplusPagePublicResources.class.php') !== '4b8adff85d7c686d6864df0f6f49c0e807015bb1') {
			warn('File was modified. Will overwrite the changes now: plugins/publicPages/500_resources/OIDplusPagePublicResources.class.php');
			$tmp = pathinfo('plugins/publicPages/500_resources/OIDplusPagePublicResources.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/publicPages/500_resources/OIDplusPagePublicResources.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/publicPages/500_resources/OIDplusPagePublicResources.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('plugins/publicPages/500_resources/OIDplusPagePublicResources.class.php') !== '620894216d33096cf819e0983fa10872e1037dea') {
			warn('File cannot be written (checksum mismatch): plugins/publicPages/500_resources/OIDplusPagePublicResources.class.php');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 323\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 323') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

