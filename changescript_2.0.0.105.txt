<?php /* <ViaThinkSoftSignature>
qeZpLYg1KoFryRo+IieBEqJZ3jdaXgW5oMhCIjbVw0WWTGHOqkbqWStjnZ86E1jvn
yiZ2bqd4olulGHoyPVAqoYJzuSKFLh6ZbsUs6PYSBDOTb2FQXCyir2noIHg8JkeUo
QZ2C+A2aAXI9LKirAgJhUgenRQLKSYCeC64isUJm9crIfb3Ox7OphNFTEXvte6Wwk
a3xP+5//W/E+Ned/QobSCZx4McaulQPGpnxcAQ3O25WrhoGUgfvQIBII8RaGHDNBs
60AZUlURtuDD3egVmh2PgHaj/doNVldOdIQFBtk6bdtFsa55UINu1uH9VGxfKHZaG
EgGGS7Zu60dz6z+4ASYlczvcdqv/yZSGyeZDGfMYn//GfJTNbByPN4t5YHC2bQlFO
QL9vnuoXhb31OM5TRcNY1v8vEwNPKrOJ1MtK9I6YOaBf/qxVTjUyeIU4HXXi2Fjxj
c1Yn+gyuGpONPUN99Unb59M8z+uLX5ucbfN3xQlnRJGnjo4ptE2BQGFINiLw9PHzq
ryxZVdkc/mCUdG7stIkIB8YnzxWgh5ixMTtquut65v00iHcZxW9q48ZM6DFuJtmBV
DN8iVEAB+GCVnekcQ1wIM2LehUwq5JV1hetP09E+gT3kdgIXtHw8Qn1M1zEiGy3x6
mNPrG22rjiXCpyvcjXZ5fCI3H7M7hC5l7cTN8DTrv69nOll8yAWh8kbgXt+aXX+hM
cN2SpiPX8tCZIYZH1LvNkU3sSPenrxExAa37VGNKP3KC52LM2fX1opjxXFvuzX5fn
MQts6kjhbL4E7sXR5fvxGJw2kqrLNI3hBWCOXklhYDB/Uy5FDXGUBXCF6cuXXFPTD
RmB92juQEtqxRcvjyer560eUNchNGI3YfSz/rV0JGT8C/m4Eg8/w3TJfleVduDuii
aEIYLZvD+dMKZdIdjPlGgnYkI1YB4FDE/IYdglGRLNr4mA6jGcSIBH69hOiV0bsKf
VrheHXCTTnGSnDFVoN1AopXUg8ZY1TdBdkcm/Mn8RJb/ZWdV8oDlq4CX+RvKB49is
Hueq7fZ+u3ddHFKt6/YT7OFbmjknv+dcGVdvhT4Vvrbt72AR54RaijCHAQu5c62bD
zwH9YYJuszd+z2frhVXjMo3Rt/ILisqn8Q01FA2EaMw3kKkUY7crS1v+GiftSffY4
ytX8sAeOs4RvKMXDvFfU63nDVfguP2vhJKjh3PwpaG6ESShl8e6r0im0s7CiYcuFy
VUyaWD27yOZrMduOOKk8117y/8yQ8IAB+3gY1htQGGvPPYKngbj72yesDzTCQzjSw
4YH15d+FA0vAfOyPepXKMA9BU5v+2z199sI6nQ9F1jCLi+pVzDU0EM/fjBpMhTZsZ
A==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 104') {
	err('This update can only be applied to OIDplus version 2.0.0.104!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: 3p/_overview
function writefile_1() {
	@$fp = fopen('3p/_overview', 'w');
	@fwrite($fp, base64_decode('M1AgKCJUaGlyZCBwYXJ0eSIpIGFzc2V0cywgY29kZSBhbmQgZnJhbWV3b3Jrcwo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Cgpqc1RyZWU6CglMaWNlbnNlOiAgTUlUCglWZXJzaW9uOiAgMy4zLjcKCURvd25sb2FkOiBodHRw'));
	@fwrite($fp, base64_decode('czovL3d3dy5qc3RyZWUuY29tLyAob25seSBkaXN0IGRpcmVjdG9yeSkKClRpbnlNQ0U6CglMaWNlbnNlOiAgTEdQTCAyLjEKCVZlcnNpb246ICA1LjAuMgoJRG93bmxvYWQ6IGh0dHBzOi8vd3d3LnRpbnkuY2xvdWQvZG93bmxvYWQvc2VsZi1ob3N0ZWQvCgpCb290'));
	@fwrite($fp, base64_decode('c3RyYXA6CglMaWNlbnNlICAgTUlUCglWZXJzaW9uOiAgMy4zLjcKCURvd25sb2FkOiBodHRwOi8vYmxvZy5nZXRib290c3RyYXAuY29tLzIwMTYvMDcvMjUvYm9vdHN0cmFwLTMtMy03LXJlbGVhc2VkLyAob25seSBkaXN0IGRpcmVjdG9yeSkKCmpRdWVyeToKCUxp'));
	@fwrite($fp, base64_decode('ZW5zZTogICBNSVQKCVZlcnNpb246ICAyLjIuMQoJRG93bmxvYWQ6IGh0dHBzOi8vY29kZS5qcXVlcnkuY29tL2pxdWVyeS0yLjIuMS5taW4uanMKCjB4YmIgU0hBMyBpbXBsZW1lbnRhdGlvbiBpbiBQSFAgKGZvciBQSFA8Ny4xIGNvbXBhdGliaWxpdHkpOgoJTGlj'));
	@fwrite($fp, base64_decode('ZW5zZTogTUlUCglWZXJzaW9uOiA1OTFhNjM2IG9uIDIxIE1heSAyMDE3CglEb3dubG9hZDogaHR0cHM6Ly9naXRodWIuY29tLzB4YmIvcGhwLXNoYTMKCmVtbjE3OCBTSEEzIGltcGxlbWVudGF0aW9uIGluIEphdmFTY3JpcHQ6CglMaWNlbnNlOiBNSVQKCVZlcnNp'));
	@fwrite($fp, base64_decode('b246IDAuOC4wIG9uIDUgQXVnIDIwMTgKCURvd25sb2FkOiBodHRwczovL2dpdGh1Yi5jb20vZW1uMTc4L2pzLXNoYTMKCmFsbHBybyBsYXlvdXQ6CglMaWNlbnNlOiBNSVQgLyBHUEx2MwoJVmVyc2lvbjogMS40LjMgb24gNyBTZXAgMjAxNAoJRG93bmxvYWQ6IGh0'));
	@fwrite($fp, base64_decode('dHBzOi8vZ2l0aHViLmNvbS9hbGxwcm8vbGF5b3V0LwoKalF1ZXJ5IFVJOgoJTGljZW5zZTogTUlUCglWZXJzaW9uOiAxLjEyLjEKCURvd25sb2FkOiBodHRwOi8vanF1ZXJ5dWkuY29tLwoKU3BhbVNwYW46CglMaWNlbnNlOiBHUEx2MgoJVmVyc2lvbjogMS4wMwoJ'));
	@fwrite($fp, base64_decode('RG93bmxvYWQ6IGh0dHA6Ly93d3cuc3BhbXNwYW4uZGUvCgpDb29raWUgY29uc2VudDoKCUxpY2Vuc2U6IE1JVAoJQ3VycmVudGx5IGRpcmVjdGx5IGxpbmtlZAoJRG93bmxvYWQ6IGh0dHBzOi8vY29va2llY29uc2VudC5pbnNpdGVzLmNvbS8KClJlQ2FwdGNoYToK'));
	@fwrite($fp, base64_decode('CUxpY2Vuc2U6IEJTRCAzLUNsYXVzZSAiTmV3IiBvciAiUmV2aXNlZCIgTGljZW5zZQoJQ3VycmVudGx5IGRpcmVjdGx5IGxpbmtlZAoJV2Vic2l0ZTogaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9yZWNhcHRjaGEvCg=='));
	@fclose($fp);
}
if (!is_file('3p/_overview')) {
	warn('File has vanished! Will re-create it: 3p/_overview');
	writefile_1();
	if (!is_file('3p/_overview')) {
		warn('File cannot be created (not existing): 3p/_overview');
	} else if (sha1_file('3p/_overview') != '6e5895d6e3e3540d231649673310b99f7372fbf1') {
		warn('File cannot be created (checksum mismatch): 3p/_overview');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('3p/_overview', 0644)) {
		warn('Could not change file permissions of 3p/_overview');
	}
} else {
	if (@sha1_file('3p/_overview') !== '6e5895d6e3e3540d231649673310b99f7372fbf1') {
		if (@sha1_file('3p/_overview') !== '9cae42562dabbb73b1d8f51e9048f6e55ef151f6') {
			warn('File was modified. Will overwrite the changes now: 3p/_overview');
			$tmp = pathinfo('3p/_overview');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('3p/_overview')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('3p/_overview', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('3p/_overview') !== '6e5895d6e3e3540d231649673310b99f7372fbf1') {
			warn('File cannot be written (checksum mismatch): 3p/_overview');
		}
	}
}

// Files different: index_mobile.php
function writefile_2() {
	@$fp = fopen('index_mobile.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCnJlcXVpcmVfb25jZSBfX0RJUl9fIC4gJy9pbmNsdWRlcy9vaWRwbHVzLmluYy5waHAnOwoKb2Jfc3RhcnQoKTsgLy8gYWxsb3cgY29va2llIGhlYWRlcnMgdG8gYmUgc2VudAoKaGVhZGVyKCdDb250'));
	@fwrite($fp, base64_decode('ZW50LVR5cGU6dGV4dC9odG1sOyBjaGFyc2V0PVVURi04Jyk7CgpPSURwbHVzOjppbml0KHRydWUpOwoKT0lEcGx1czo6ZGIoKS0+c2V0X2NoYXJzZXQoIlVURjgiKTsKT0lEcGx1czo6ZGIoKS0+cXVlcnkoIlNFVCBOQU1FUyAndXRmOCciKTsKCiRzdGF0aWNfbm9k'));
	@fwrite($fp, base64_decode('ZV9pZCA9IGlzc2V0KCRfUkVRVUVTVFsnZ290byddKSA/ICRfUkVRVUVTVFsnZ290byddIDogJ29pZHBsdXM6c3lzdGVtJzsKJHN0YXRpYyA9IE9JRHBsdXM6Omd1aSgpOjpnZW5lcmF0ZUNvbnRlbnRQYWdlKCRzdGF0aWNfbm9kZV9pZCk7CiRzdGF0aWNfdGl0bGUg'));
	@fwrite($fp, base64_decode('PSAkc3RhdGljWyd0aXRsZSddOwokc3RhdGljX2ljb24gPSAkc3RhdGljWydpY29uJ107CiRzdGF0aWNfY29udGVudCA9ICRzdGF0aWNbJ3RleHQnXTsKCmZ1bmN0aW9uIGNvbWJpbmVfc3lzdGVtdGl0bGVfYW5kX3BhZ2V0aXRsZSgkc3lzdGVtdGl0bGUsICRwYWdl'));
	@fwrite($fp, base64_decode('dGl0bGUpIHsKCWlmICgkc3lzdGVtdGl0bGUgPT0gJHBhZ2V0aXRsZSkgewoJCXJldHVybiAkc3lzdGVtdGl0bGU7Cgl9IGVsc2UgewoJCXJldHVybiAkc3lzdGVtdGl0bGUgLiAnIC0gJyAuICRwYWdldGl0bGU7Cgl9Cn0KCiRzeXNpZF9vaWQgPSBPSURwbHVzOjpz'));
	@fwrite($fp, base64_decode('eXN0ZW1faWQodHJ1ZSk7CmlmICghJHN5c2lkX29pZCkgJHN5c2lkX29pZCA9ICd1bmtub3duJzsKaGVhZGVyKCdYLU9JRHBsdXMtU3lzdGVtSUQ6Jy4kc3lzaWRfb2lkKTsKCj8+PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+Cgk8bWV0YSBo'));
	@fwrite($fp, base64_decode('dHRwLWVxdWl2PSJDb250ZW50LVR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD11dGYtOCI+Cgk8bWV0YSBuYW1lPSJ4LW9pZHBsdXMtc3lzdGVtLWlkIiBjb250ZW50PSI8P3BocCBlY2hvICRzeXNpZF9vaWQ7ID8+Ij4KCTxtZXRhIG5hbWU9Ingtb2lk'));
	@fwrite($fp, base64_decode('cGx1cy1zeXN0ZW0tdXJsIiBjb250ZW50PSI8P3BocCBlY2hvIE9JRHBsdXM6OnN5c3RlbV91cmwoKTsgPz4iPgoJPG1ldGEgbmFtZT0idGhlbWUtY29sb3IiIGNvbnRlbnQ9IiNBOURDRjAiPgoJPHRpdGxlPjw/cGhwIGVjaG8gY29tYmluZV9zeXN0ZW10aXRsZV9h'));
	@fwrite($fp, base64_decode('bmRfcGFnZXRpdGxlKE9JRHBsdXM6OmNvbmZpZygpLT5zeXN0ZW1UaXRsZSgpLCAkc3RhdGljX3RpdGxlKTsgPz48L3RpdGxlPgoJPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSIzcC9qc3RyZWUvdGhlbWVzL2RlZmF1bHQvc3R5bGUubWluLmNzcyI+CgoJPCEt'));
	@fwrite($fp, base64_decode('LSBXZSBhcmUgdXNpbmcgalF1ZXJ5IDIuMi4xLCBiZWNhdXNlIDMuMy4xIHNlZW1zIHRvIGJlIGluY29tcGF0aWJsZSB3aXRoIGpzVHJlZSAoSFRNTCBjb250ZW50IHdpbGwgbm90IGJlIGxvYWRlZCBpbnRvIGpzVHJlZSEpIFRPRE86IEZpbGUgYnVnIHJlcG9ydCAt'));
	@fwrite($fp, base64_decode('LT4KCTxzY3JpcHQgc3JjPSIzcC9qcXVlcnkvanF1ZXJ5LTIuMi4xLm1pbi5qcyI+PC9zY3JpcHQ+Cgk8c2NyaXB0IHNyYz0iM3AvYm9vdHN0cmFwL2pzL2Jvb3RzdHJhcC5taW4uanMiPjwvc2NyaXB0PgoJPHNjcmlwdCBzcmM9IjNwL2pzdHJlZS9qc3RyZWUubWlu'));
	@fwrite($fp, base64_decode('LmpzIj48L3NjcmlwdD4KCTxzY3JpcHQgc3JjPSczcC90aW55bWNlL3RpbnltY2UubWluLmpzJz48L3NjcmlwdD4KCTxzY3JpcHQgc3JjPSIzcC9qcXVlcnktdWkvanF1ZXJ5LXVpLmpzIj48L3NjcmlwdD4KCTxzY3JpcHQgc3JjPSIzcC9sYXlvdXQvanF1ZXJ5Lmxh'));
	@fwrite($fp, base64_decode('eW91dC5taW4uanMiPjwvc2NyaXB0PgoJPHNjcmlwdCBzcmM9IjNwL3NwYW1zcGFuL3NwYW1zcGFuLmpzIj48L3NjcmlwdD4KCTxzY3JpcHQgc3JjPSdodHRwczovL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS9hcGkuanMnPjwvc2NyaXB0PgoKCTxtZXRhIG5hbWU9'));
	@fwrite($fp, base64_decode('InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MSI+CgoJPHNjcmlwdCBzcmM9Im9pZHBsdXMuanMiPjwvc2NyaXB0PgoJPD9waHAKCSRhcnkgPSBnbG9iKF9fRElSX18gLiAnL3BsdWdpbnMvcHVibGljUGFnZXMvJy4n'));
	@fwrite($fp, base64_decode('KicuJy9zY3JpcHQuanMnKTsKCXNvcnQoJGFyeSk7Cglmb3JlYWNoICgkYXJ5IGFzICRhKSB7CgkJZWNobyAnPHNjcmlwdCBzcmM9Iicuc3RyX3JlcGxhY2UoX19ESVJfXyAuICcvJywgJycsICRhKS4nIj48L3NjcmlwdD4nOwoJfQoJJGFyeSA9IGdsb2IoX19ESVJf'));
	@fwrite($fp, base64_decode('XyAuICcvcGx1Z2lucy9hZG1pblBhZ2VzLycuJyonLicvc2NyaXB0LmpzJyk7Cglzb3J0KCRhcnkpOwoJZm9yZWFjaCAoJGFyeSBhcyAkYSkgewoJCWVjaG8gJzxzY3JpcHQgc3JjPSInLnN0cl9yZXBsYWNlKF9fRElSX18gLiAnLycsICcnLCAkYSkuJyI+PC9zY3Jp'));
	@fwrite($fp, base64_decode('cHQ+JzsKCX0KCSRhcnkgPSBnbG9iKF9fRElSX18gLiAnL3BsdWdpbnMvcmFQYWdlcy8nLicqJy4nL3NjcmlwdC5qcycpOwoJc29ydCgkYXJ5KTsKCWZvcmVhY2ggKCRhcnkgYXMgJGEpIHsKCQllY2hvICc8c2NyaXB0IHNyYz0iJy5zdHJfcmVwbGFjZShfX0RJUl9f'));
	@fwrite($fp, base64_decode('IC4gJy8nLCAnJywgJGEpLiciPjwvc2NyaXB0Pic7Cgl9Cgk/PgoKCTxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0ib2lkcGx1cy5jc3MiPgoJPD9waHAKCSRhcnkgPSBnbG9iKF9fRElSX18gLiAnL3BsdWdpbnMvcHVibGljUGFnZXMvJy4nKicuJy9zdHlsZS5j'));
	@fwrite($fp, base64_decode('c3MnKTsKCXNvcnQoJGFyeSk7Cglmb3JlYWNoICgkYXJ5IGFzICRhKSB7CgkJZWNobyAnPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSInLnN0cl9yZXBsYWNlKF9fRElSX18gLiAnLycsICcnLCAkYSkuJyI+JzsKCX0KCSRhcnkgPSBnbG9iKF9fRElSX18gLiAn'));
	@fwrite($fp, base64_decode('L3BsdWdpbnMvYWRtaW5QYWdlcy8nLicqJy4nL3N0eWxlLmNzcycpOwoJc29ydCgkYXJ5KTsKCWZvcmVhY2ggKCRhcnkgYXMgJGEpIHsKCQllY2hvICc8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Iicuc3RyX3JlcGxhY2UoX19ESVJfXyAuICcvJywgJycsICRh'));
	@fwrite($fp, base64_decode('KS4nIj4nOwoJfQoJJGFyeSA9IGdsb2IoX19ESVJfXyAuICcvcGx1Z2lucy9yYVBhZ2VzLycuJyonLicvc3R5bGUuY3NzJyk7Cglzb3J0KCRhcnkpOwoJZm9yZWFjaCAoJGFyeSBhcyAkYSkgewoJCWVjaG8gJzxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iJy5z'));
	@fwrite($fp, base64_decode('dHJfcmVwbGFjZShfX0RJUl9fIC4gJy8nLCAnJywgJGEpLiciPic7Cgl9Cgk/PgoJPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSIzcC9ib290c3RyYXAvY3NzL2Jvb3RzdHJhcC5taW4uY3NzIj4KCgk8bGluayByZWw9InNob3J0Y3V0IGljb24iIHR5cGU9Imlt'));
	@fwrite($fp, base64_decode('YWdlL3gtaWNvbiIgaHJlZj0iaW1nL2Zhdmljb24uaWNvIj4KCgk8c2NyaXB0PgoJc3lzdGVtX3RpdGxlID0gPD9waHAgZWNobyBqc19lc2NhcGUoT0lEcGx1czo6Y29uZmlnKCktPnN5c3RlbVRpdGxlKCkpOyA/PjsgLy8gVE9ETzogSXMgdGhhdCB0aW1pbmcgT0sg'));
	@fwrite($fp, base64_decode('b3IgaXMgdGhhdCBhIHJhY2UgY29uZGl0aW9uPwoJPC9zY3JpcHQ+Cgo8IS0tIGh0dHBzOi8vY29va2llY29uc2VudC5pbnNpdGVzLmNvbSAtLT4KPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiB0eXBlPSJ0ZXh0L2NzcyIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZs'));
	@fwrite($fp, base64_decode('YXJlLmNvbS9hamF4L2xpYnMvY29va2llY29uc2VudDIvMy4xLjAvY29va2llY29uc2VudC5taW4uY3NzIiAvPgo8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvY29va2llY29uc2VudDIvMy4xLjAvY29va2llY29uc2Vu'));
	@fwrite($fp, base64_decode('dC5taW4uanMiPjwvc2NyaXB0Pgo8c2NyaXB0Pgp3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsIGZ1bmN0aW9uKCl7CndpbmRvdy5jb29raWVjb25zZW50LmluaXRpYWxpc2UoewoJInBhbGV0dGUiOiB7CgkJInBvcHVwIjogewoJCQkiYmFja2dyb3VuZCI6'));
	@fwrite($fp, base64_decode('ICIjZWRlZmY1IiwKCQkJInRleHQiOiAiIzgzODM5MSIKCQl9LAoJCSJidXR0b24iOiB7CgkJCSJiYWNrZ3JvdW5kIjogIiM0YjgxZTgiCgkJfQoJfSwKCSJwb3NpdGlvbiI6ICJib3R0b20tcmlnaHQiCn0pfSk7Cjwvc2NyaXB0PgoKPC9oZWFkPgoKPGJvZHkgY2xh'));
	@fwrite($fp, base64_decode('c3M9Im1vYmlsZSI+Cgo8ZGl2IGlkPSJzeXN0ZW1fdGl0bGVfYmFyIj4KCTxkaXYgaWQ9InN5c3RlbV90aXRsZV9tZW51IiBvbmNsaWNrPSJtb2JpbGVOYXZCdXR0b25DbGljayh0aGlzKSIgb25tb3VzZWVudGVyPSJtb2JpbGVOYXZCdXR0b25Ib3Zlcih0aGlzKSIg'));
	@fwrite($fp, base64_decode('b25tb3VzZWxlYXZlPSJtb2JpbGVOYXZCdXR0b25Ib3Zlcih0aGlzKSIgc3R5bGU9InZpc2liaWxpdHk6aGlkZGVuIj4KCQk8ZGl2IGlkPSJiYXIxIj48L2Rpdj4KCQk8ZGl2IGlkPSJiYXIyIj48L2Rpdj4KCQk8ZGl2IGlkPSJiYXIzIj48L2Rpdj4KCTwvZGl2PgoK'));
	@fwrite($fp, base64_decode('CTxkaXY+CgkJPGEgaHJlZj0iP2dvdG89b2lkcGx1czpzeXN0ZW0iPgoJCQk8c3BhbiBpZD0ic3lzdGVtX3RpdGxlXzEiIGNsYXNzPSJtb2JpbGUiPlZpYVRoaW5rU29mdCBPSURwbHVzIDIuMDwvc3Bhbj48YnI+CgkJCTxzcGFuIGlkPSJzeXN0ZW1fdGl0bGVfMiIg'));
	@fwrite($fp, base64_decode('Y2xhc3M9Im1vYmlsZSI+PD9waHAgZWNobyBodG1sZW50aXRpZXMoT0lEcGx1czo6Y29uZmlnKCktPnN5c3RlbVRpdGxlKCkpOyA/Pjwvc3Bhbj4KCQk8L2E+Cgk8L2Rpdj4KPC9kaXY+Cgo8ZGl2IGNsYXNzPSJ3cmFwIj4KCTwhLS0gVE9ETzogYWRkIGVsbGlwc2Vz'));
	@fwrite($fp, base64_decode('IGF0IHRoZSBlbmQ/IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzM3MTU4NzU4L2FkZC1hLWdhcC1iZXR3ZWVuLWpzdHJlZS1ub2Rlcy10ZXh0LWFuZC1zY3JvbGxiYXJzIC0tPgoKCTxkaXYgaWQ9Im9pZHRyZWUiIGNsYXNzPSJtb2JpbGUiPjwh'));
	@fwrite($fp, base64_decode('LS0gVE9ETzoganN0cmVlIHNob3VsZCBiZSBpbnNpZGUgYSBzY3JvbGxhYmxlIGNvbnRhaW5lci4gZG9uJ3QgbGV0IHRoZSBwYWdlIGJlIGJyb2FkZXIgdGhhbiB0aGUgc2NyZWVuLiAtLT4KCQk8bm9zY3JpcHQ+CgkJCTxwPjxiPlBsZWFzZSBlbmFibGUgSmF2YVNj'));
	@fwrite($fp, base64_decode('cmlwdCB0byB1c2UgYWxsIGZlYXR1cmVzPC9iPjwvcD4KCQk8L25vc2NyaXB0PgoJCTw/cGhwIE9JRHBsdXNUcmVlOjpub25qc19tZW51KCk7ID8+Cgk8L2Rpdj4KPC9kaXY+Cgo8ZGl2IGlkPSJjb250ZW50X3dpbmRvdyIgY2xhc3M9Im1vYmlsZSI+Cgk8P3BocAoJ'));
	@fwrite($fp, base64_decode('JHN0YXRpY19jb250ZW50ID0gcHJlZ19yZXBsYWNlX2NhbGxiYWNrKAoJCSd8PGFccyhbXj5dKilocmVmPSJtYWlsdG86KFteIl0rKSIoW14+XSopPihbXjxdKik8L2E+fGlzbVUnLAoJCWZ1bmN0aW9uICgkdHJlZmZlcikgewoJCQkkZW1haWwgPSAkdHJlZmZlclsy'));
	@fwrite($fp, base64_decode('XTsKCQkJJHRleHQgPSAkdHJlZmZlcls0XTsKCQkJcmV0dXJuIHNlY3VyZV9lbWFpbCgkZW1haWwsICR0ZXh0LCAxKTsgLy8gQW50aVNwYW0KCQl9LCAkc3RhdGljX2NvbnRlbnQpOwoKCWVjaG8gJzxoMSBpZD0icmVhbF90aXRsZSI+JzsKCWlmICgkc3RhdGljX2lj'));
	@fwrite($fp, base64_decode('b24gIT0gJycpIGVjaG8gJzxpbWcgc3JjPSInLmh0bWxlbnRpdGllcygkc3RhdGljX2ljb24pLiciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgYWx0PSInLmh0bWxlbnRpdGllcygkc3RhdGljX3RpdGxlKS4nIj4gJzsKCWVjaG8gaHRtbGVudGl0aWVzKCRzdGF0aWNf'));
	@fwrite($fp, base64_decode('dGl0bGUpLic8L2gxPic7CgllY2hvICc8ZGl2IGlkPSJyZWFsX2NvbnRlbnQiPicuJHN0YXRpY19jb250ZW50Lic8L2Rpdj4nOwoJaWYgKCRfU0VSVkVSWydSRVFVRVNUX01FVEhPRCddID09ICdHRVQnKSB7CgkJZWNobyAnPGJyPjxwPjxpbWcgc3JjPSJpbWcvc2hh'));
	@fwrite($fp, base64_decode('cmUucG5nIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiIGFsdD0iU2hhcmUiPiA8YSBocmVmPSJpbmRleC5waHA/Z290bz0nLmh0bWxlbnRpdGllcygkc3RhdGljX25vZGVfaWQpLiciIGlkPSJzdGF0aWNfbGluayIgY2xhc3M9ImdyYXlfZm9vdGVyX2ZvbnQiPlN0YXRp'));
	@fwrite($fp, base64_decode('YyBsaW5rIHRvIHRoaXMgcGFnZTwvYT4nOwoJCWVjaG8gJyB8IDxhIGhyZWY9ImluZGV4X21vYmlsZS5waHA/Z290bz0nLmh0bWxlbnRpdGllcygkc3RhdGljX25vZGVfaWQpLiciIGlkPSJzdGF0aWNfbGlua19tb2JpbGUiIGNsYXNzPSJncmF5X2Zvb3Rlcl9mb250'));
	@fwrite($fp, base64_decode('Ij5Nb2JpbGUgdmlldzwvYT4nOwoJCWVjaG8gJyB8IDxhIGhyZWY9ImluZGV4X2Rlc2t0b3AucGhwP2dvdG89Jy5odG1sZW50aXRpZXMoJHN0YXRpY19ub2RlX2lkKS4nIiBpZD0ic3RhdGljX2xpbmtfZGVza3RvcCIgY2xhc3M9ImdyYXlfZm9vdGVyX2ZvbnQiPkRl'));
	@fwrite($fp, base64_decode('c2t0b3AgdmlldzwvYT4nOwoJCWVjaG8gJzwvcD4nOwoJfQoJZWNobyAnPGJyPic7Cgk/Pgo8L2Rpdj4KCjwvYm9keT4KPC9odG1sPgo8P3BocAoKJGNvbnQgPSBvYl9nZXRfY29udGVudHMoKTsKb2JfZW5kX2NsZWFuKCk7CgplY2hvICRjb250Owo='));
	@fclose($fp);
}
if (!is_file('index_mobile.php')) {
	warn('File has vanished! Will re-create it: index_mobile.php');
	writefile_2();
	if (!is_file('index_mobile.php')) {
		warn('File cannot be created (not existing): index_mobile.php');
	} else if (sha1_file('index_mobile.php') != '32b767b0860d77037af00c5789e0a78739d1e323') {
		warn('File cannot be created (checksum mismatch): index_mobile.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('index_mobile.php', 0644)) {
		warn('Could not change file permissions of index_mobile.php');
	}
} else {
	if (@sha1_file('index_mobile.php') !== '32b767b0860d77037af00c5789e0a78739d1e323') {
		if (@sha1_file('index_mobile.php') !== '7fec7753b12402248a6ba50923c211ee81d812e4') {
			warn('File was modified. Will overwrite the changes now: index_mobile.php');
			$tmp = pathinfo('index_mobile.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('index_mobile.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('index_mobile.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_2();
		if (@sha1_file('index_mobile.php') !== '32b767b0860d77037af00c5789e0a78739d1e323') {
			warn('File cannot be written (checksum mismatch): index_mobile.php');
		}
	}
}

// Files different: oidplus.css
function writefile_3() {
	@$fp = fopen('oidplus.css', 'w');
	@fwrite($fp, base64_decode('LyoKICogT0lEcGx1cyAyLjAKICogQ29weXJpZ2h0IDIwMTkgRGFuaWVsIE1hcnNjaGFsbCwgVmlhVGhpbmtTb2Z0CiAqCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5v'));
	@fwrite($fp, base64_decode('dCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4w'));
	@fwrite($fp, base64_decode('CiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lU'));
	@fwrite($fp, base64_decode('SE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRh'));
	@fwrite($fp, base64_decode('dGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwoKLndyYXAgewoJb3ZlcmZsb3cteDogYXV0bzsKCW1hcmdpbjogMCBhdXRvOwoJd2lkdGg6MTAwJTsKfQoKLmdyYXlfZm9vdGVyX2ZvbnQgewoJY29sb3I6Z3JheTsKCWZvbnQtc2l6ZTowLjllbTsKfQoKbGFiZWwu'));
	@fwrite($fp, base64_decode('cGFkZGluZ19sYWJlbCB7Cglmb250LXdlaWdodDogbm9ybWFsICFpbXBvcnRhbnQ7CglkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CglmbG9hdDogbGVmdDsKCWNsZWFyOiBsZWZ0OwoJd2lkdGg6IDEwMHB4OwoJdGV4dC1hbGlnbjogcmlnaHQ7CglwYWRkaW5nLXRvcDog'));
	@fwrite($fp, base64_decode('M3B4OwoJbWFyZ2luLXJpZ2h0OiA4cHg7Cn0KCi5ib3ggewoJd2lkdGg6YXV0byAhaW1wb3J0YW50OwoJcGFkZGluZzoyMHB4OwoJYmFja2dyb3VuZC1jb2xvcjojZmZmOwoJYm9yZGVyOjFweCBzb2xpZCAjY2NjOwoJYm9yZGVyLXJhZGl1czo1cHg7CgltYXJnaW4t'));
	@fwrite($fp, base64_decode('dG9wOjEwcHg7Cn0KI3RpdGxlZWRpdCB7Cgl3aWR0aDoxMDAlOwp9CiNzeXN0ZW1fdGl0bGVfMSB7Cgljb2xvcjojMkQ2QTlGOwp9CiNzeXN0ZW1fdGl0bGVfMS5tb2JpbGUgewoJbWFyZ2luLWxlZnQ6NTBweDsKCXBhZGRpbmctbGVmdDoxM3B4Owp9CiNzeXN0ZW1f'));
	@fwrite($fp, base64_decode('dGl0bGVfMiB7Cgljb2xvcjojMkIzMzZGOwoJZm9udC1zaXplOjJlbTsKfQojc3lzdGVtX3RpdGxlXzIubW9iaWxlIHsKCW1hcmdpbi1sZWZ0OjUwcHg7CglwYWRkaW5nLWxlZnQ6MTNweDsKfQoKLyogTW9iaWxlIG1lbnUgYnV0dG9uICovCgojYmFyMSwgI2JhcjIs'));
	@fwrite($fp, base64_decode('ICNiYXIzIHsKCXdpZHRoOiAzNXB4OwoJaGVpZ2h0OiA1cHg7CgliYWNrZ3JvdW5kLWNvbG9yOiBvcmFuZ2U7CgltYXJnaW46IDZweCAwOwoJdHJhbnNpdGlvbjogMC40czsKCW1hcmdpbi1sZWZ0OjEwcHg7Cn0KCiNzeXN0ZW1fdGl0bGVfbWVudS5hY3RpdmUgewoJ'));
	@fwrite($fp, base64_decode('YmFja2dyb3VuZC1jb2xvcjpvcmFuZ2U7Cn0KCi5hY3RpdmUgI2JhcjEgewoJLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgtNDVkZWcpIHRyYW5zbGF0ZSgtOXB4LCA2cHgpOwoJdHJhbnNmb3JtOiByb3RhdGUoLTQ1ZGVnKSB0cmFuc2xhdGUoLTlweCwgNnB4KTsK'));
	@fwrite($fp, base64_decode('CWJhY2tncm91bmQtY29sb3I6IGJsYWNrOwp9CgouYWN0aXZlICNiYXIyIHsKCW9wYWNpdHk6IDA7CgliYWNrZ3JvdW5kLWNvbG9yOiBibGFjazsKfQoKLmFjdGl2ZSAjYmFyMyB7Cgktd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDQ1ZGVnKSB0cmFuc2xhdGUoLThw'));
	@fwrite($fp, base64_decode('eCwgLThweCk7Cgl0cmFuc2Zvcm06IHJvdGF0ZSg0NWRlZykgdHJhbnNsYXRlKC04cHgsIC04cHgpOwoJYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7Cn0KCi5ob3ZlciAjYmFyMSwgLmhvdmVyICNiYXIyLCAuaG92ZXIgI2JhcjMgewoJYmFja2dyb3VuZC1jb2xvcjp3'));
	@fwrite($fp, base64_decode('aGl0ZTsKfQoKI3N5c3RlbV90aXRsZV9tZW51IHsKCXdpZHRoOjU1cHg7CgloZWlnaHQ6NTVweDsKCXBhZGRpbmctdG9wOjhweDsKCXRleHQtZGVjb3JhdGlvbjogbm9uZTsKCWZvbnQtc2l6ZTogMTlweDsKCWRpc3BsYXk6IGJsb2NrOwoJYmFja2dyb3VuZC1jb2xv'));
	@fwrite($fp, base64_decode('cjogYmxhY2s7Cglwb3NpdGlvbjogYWJzb2x1dGU7CglsZWZ0OiAwOwoJdG9wOiAwOwoJY3Vyc29yOiBwb2ludGVyOwp9CgovKiBUaXRsZSBiYXIgKi8KCiNzeXN0ZW1fdGl0bGVfYmFyIHsKCWxpbmUtaGVpZ2h0OjEuNzVlbTsKCgloZWlnaHQ6NTVweCAhaW1wb3J0'));
	@fwrite($fp, base64_decode('YW50OwoKCWZvbnQtc3R5bGU6aXRhbGljOwoJZm9udC13ZWlnaHQ6Ym9sZGVyOwoJZmxvYXQ6bGVmdDsKCWJvcmRlci1ib3R0b206MXB4OwoKCXdpZHRoOjEwMCU7IC8qIGJyYXVjaGVuIHdpciBmdWVyIE5vU2NyaXB0ICovCglwYWRkaW5nLWxlZnQ6NXB4Oy8qIGJy'));
	@fwrite($fp, base64_decode('YXVjaGVuIHdpciBmdWVyIE5vU2NyaXB0ICovCglwYWRkaW5nLXJpZ2h0OjVweDsvKiBicmF1Y2hlbiB3aXIgZnVlciBOb1NjcmlwdCAqLwoKCXBhZGRpbmctbGVmdDowcHg7CgltYXJnaW4tbGVmdDowcHg7CgoJZGlzcGxheTpibG9jazsgLyogVE9ETzogZ2VodCBu'));
	@fwrite($fp, base64_decode('aWNodCAqLwoKCS8qIFBlcm1hbGluayAtIHVzZSB0byBlZGl0IGFuZCBzaGFyZSB0aGlzIGdyYWRpZW50OiBodHRwOi8vY29sb3J6aWxsYS5jb20vZ3JhZGllbnQtZWRpdG9yLyNhMGQ4ZWYrMCxkZGYxZjkrNjUsZmVmZmZmKzEwMCAqLwoJYmFja2dyb3VuZDogI2Ew'));
	@fwrite($fp, base64_decode('ZDhlZjsgLyogT2xkIGJyb3dzZXJzICovCgliYWNrZ3JvdW5kOiAtbW96LWxpbmVhci1ncmFkaWVudChsZWZ0LCAjYTBkOGVmIDAlLCAjZGRmMWY5IDY1JSwgI2ZlZmZmZiAxMDAlKTsgLyogRkYzLjYtMTUgKi8KCWJhY2tncm91bmQ6IC13ZWJraXQtbGluZWFyLWdy'));
	@fwrite($fp, base64_decode('YWRpZW50KGxlZnQsICNhMGQ4ZWYgMCUsI2RkZjFmOSA2NSUsI2ZlZmZmZiAxMDAlKTsgLyogQ2hyb21lMTAtMjUsU2FmYXJpNS4xLTYgKi8KCWJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgI2EwZDhlZiAwJSwjZGRmMWY5IDY1JSwjZmVmZmZm'));
	@fwrite($fp, base64_decode('IDEwMCUpOyAvKiBXM0MsIElFMTArLCBGRjE2KywgQ2hyb21lMjYrLCBPcGVyYTEyKywgU2FmYXJpNysgKi8KCWZpbHRlcjogcHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KCBzdGFydENvbG9yc3RyPScjYTBkOGVmJywgZW5kQ29sb3Jz'));
	@fwrite($fp, base64_decode('dHI9JyNmZWZmZmYnLEdyYWRpZW50VHlwZT0xICk7IC8qIElFNi05ICovCgoJb3ZlcmZsb3c6aGlkZGVuOwp9CiNzeXN0ZW1fdGl0bGVfYmFyIGE6aG92ZXIsICNzeXN0ZW1fdGl0bGVfYmFyIGE6YWN0aXZlLCAjc3lzdGVtX3RpdGxlX2JhciBhOmZvY3VzLCAjc3lz'));
	@fwrite($fp, base64_decode('dGVtX3RpdGxlX2JhciBhOnZpc2l0ZWQsICNzeXN0ZW1fdGl0bGVfYmFyIGE6bGluayB7Cgl0ZXh0LWRlY29yYXRpb246bm9uZTsKfQoKLyogT0lELVRyZWUgKi8KCiNvaWR0cmVlLnBjIHsKCXBvc2l0aW9uOmFic29sdXRlOwoJbGVmdDowcHg7Cglib3R0b206MHB4'));
	@fwrite($fp, base64_decode('OwoJcGFkZGluZy1sZWZ0OjVweDsvKiBicmF1Y2hlbiB3aXIgZnVlciBOb1NjcmlwdCAqLwoJcGFkZGluZy1yaWdodDo1cHg7LyogYnJhdWNoZW4gd2lyIGZ1ZXIgTm9TY3JpcHQgKi8KCXRvcDo1NXB4OyAvKiBicmF1Y2hlbiB3aXIgZnVlciBOb1NjcmlwdCAqLwoJ'));
	@fwrite($fp, base64_decode('d2lkdGg6NDAwcHg7IC8qIGJyYXVjaGVuIHdpciBmdWVyIE5vU2NyaXB0ICovCglwYWRkaW5nLXRvcDo1cHg7Cn0KI29pZHRyZWUubW9iaWxlIHsKCW1hcmdpbi10b3A6MTBweDsKfQojY29udGVudF93aW5kb3cubW9iaWxlIHsKCXBhZGRpbmctbGVmdDoxNnB4OwoJ'));
	@fwrite($fp, base64_decode('cGFkZGluZy10b3A6MHB4Owp9CiNjb250ZW50X3dpbmRvdy5wYyB7Cglwb3NpdGlvbjphYnNvbHV0ZTsKCWxlZnQ6NDAwcHg7CglyaWdodDowcHg7Cglib3R0b206MHB4OwoJdG9wOjU1cHg7IC8qIGJyYXVjaGVuIHdpciBmdWVyIE5vU2NyaXB0ICovCglwYWRkaW5n'));
	@fwrite($fp, base64_decode('LWxlZnQ6MjBweDsKCXBhZGRpbmctcmlnaHQ6MjBweDsKfQpodG1sIHsKCW1hcmdpbjowOwoJcGFkZGluZzowOwoJaGVpZ2h0OjEwMCU7Cglmb250LWZhbWlseTpIZWx2ZXRpY2E7Cn0KYm9keSB7CgltYXJnaW46MHB4OwoJcGFkZGluZzowcHg7Cglmb250LXNpemU6'));
	@fwrite($fp, base64_decode('MC44NWVtOwoJaGVpZ2h0OjEwMCU7Cn0KYm9keS5wYyB7CglvdmVyZmxvdzpoaWRkZW47Cn0KaDEgewoJZm9udC1zaXplOjEuOGVtOwp9CmgyIHsKCWZvbnQtc2l6ZToxLjZlbSAhaW1wb3J0YW50Owp9Ci5ib3JkZXJib3ggewoJb3ZlcmZsb3c6YXV0bzsKCWJvcmRl'));
	@fwrite($fp, base64_decode('cjoxcHggc29saWQgc2lsdmVyOwp9CgovKioKICoJU3BsaXR0ZXIgLyB1aUxheW91dAogKi8KLnVpLWxheW91dC1wYW5lIHsgLyogYWxsICdwYW5lcycgKi8KCWJvcmRlcjogMXB4IHNvbGlkICNCQkI7Cn0KLnVpLWxheW91dC1wYW5lLWNlbnRlciB7IC8qIGNvbnRl'));
	@fwrite($fp, base64_decode('bnQgYm9keSAqLwoJcGFkZGluZzogMDsKCW1hcmdpbjogIDA7Cn0KLnVpLWxheW91dC1wYW5lLXdlc3QgeyAvKiB3ZXN0IHBhbmUgKi8KCXBhZGRpbmc6IDAgMTBweDsKCWJhY2tncm91bmQtY29sb3I6ICNmOWY5ZjkgIWltcG9ydGFudDsKCW92ZXJmbG93OiBhdXRv'));
	@fwrite($fp, base64_decode('Owp9Ci51aS1sYXlvdXQtcmVzaXplciB7IC8qIGFsbCAncmVzaXplci1iYXJzJyAqLwoJYmFja2dyb3VuZDogI0RERDsKCXRvcDo1NXB4ICFpbXBvcnRhbnQ7IC8qIERNIDEzLjAzLjIwMTkgKi8KfQoudWktbGF5b3V0LXJlc2l6ZXItb3Blbjpob3ZlciB7IC8qIG1v'));
	@fwrite($fp, base64_decode('dXNlLW92ZXIgKi8KCWJhY2tncm91bmQ6ICM5RDk7Cn0KLnVpLWxheW91dC1yZXNpemVyLW5vcnRoIHsKCWJhY2tncm91bmQ6IzJiMzM2ZiAhaW1wb3J0YW50OwoJei1pbmRleDoxMCAhaW1wb3J0YW50OyAvKiBETSAxMy4wMy4zMDI5MSAqLwp9Ci51aS1sYXlvdXQt'));
	@fwrite($fp, base64_decode('dG9nZ2xlciB7IC8qIGFsbCAndG9nZ2xlci1idXR0b25zJyAqLwoJYmFja2dyb3VuZDogI0FBQTsKCX0KLnVpLWxheW91dC10b2dnbGVyLWNsb3NlZCB7IC8qIGNsb3NlZCB0b2dnbGVyLWJ1dHRvbiAqLwoJYmFja2dyb3VuZDogI0NDQzsKCWJvcmRlci1ib3R0b206'));
	@fwrite($fp, base64_decode('IDFweCBzb2xpZCAjQkJCOwp9Ci51aS1sYXlvdXQtdG9nZ2xlciAuY29udGVudCB7IC8qIHRvZ2dsZXItdGV4dCAqLwoJZm9udDogMTRweCBib2xkIFZlcmRhbmEsIFZlcmRhbmEsIEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7Cn0KLnVpLWxheW91dC10b2dn'));
	@fwrite($fp, base64_decode('bGVyOmhvdmVyIHsgLyogbW91c2Utb3ZlciAqLwoJYmFja2dyb3VuZDogI0RDQTsKfQoudWktbGF5b3V0LXRvZ2dsZXI6aG92ZXIgLmNvbnRlbnQgeyAvKiBtb3VzZS1vdmVyICovCgljb2xvcjogIzAwOTsKfQoKLyogbWFza3MgYXJlIHVzdWFsbHkgdHJhbnNwYXJl'));
	@fwrite($fp, base64_decode('bnQgLSBtYWtlIHRoZW0gdmlzaWJsZSAobXVzdCAnb3ZlcnJpZGUnIGRlZmF1bHQpICovCi51aS1sYXlvdXQtbWFzayB7CgliYWNrZ3JvdW5kOiAjQzAwICFpbXBvcnRhbnQ7CglvcGFjaXR5OiAuMjAgIWltcG9ydGFudDsKCWZpbHRlcjogYWxwaGEob3BhY2l0eT0y'));
	@fwrite($fp, base64_decode('MCkgIWltcG9ydGFudDsKfQoKLyogVGFicyAqLwoKI2xvZ2luVGFiIC50YWItY29udGVudCB7Cgljb2xvcjogYmxhY2s7CgliYWNrZ3JvdW5kLWNvbG9yOiAjZWVlZWVlOwoJcGFkZGluZyA6IDVweCAxNXB4Owp9CgojbG9naW5UYWIgLm5hdi1waWxscyA+IGxpID4g'));
	@fwrite($fp, base64_decode('YSB7Cglib3JkZXItcmFkaXVzOiAwOwp9CgojbG9naW5UYWIgLm5hdi1waWxscyA+IGxpLmFjdGl2ZSA+IGEgewoJY29sb3I6IGJsYWNrOwoJZm9udC13ZWlnaHQ6IGJvbGQ7CgliYWNrZ3JvdW5kLWNvbG9yOiAjZWVlZWVlOwp9Cgo='));
	@fclose($fp);
}
if (!is_file('oidplus.css')) {
	warn('File has vanished! Will re-create it: oidplus.css');
	writefile_3();
	if (!is_file('oidplus.css')) {
		warn('File cannot be created (not existing): oidplus.css');
	} else if (sha1_file('oidplus.css') != 'd75bd3a3709ebf35cf7074a1f33d8034a9bc17d7') {
		warn('File cannot be created (checksum mismatch): oidplus.css');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('oidplus.css', 0644)) {
		warn('Could not change file permissions of oidplus.css');
	}
} else {
	if (@sha1_file('oidplus.css') !== 'd75bd3a3709ebf35cf7074a1f33d8034a9bc17d7') {
		if (@sha1_file('oidplus.css') !== '97a33409b4050e6adcdb524daaa49d5b637afba3') {
			warn('File was modified. Will overwrite the changes now: oidplus.css');
			$tmp = pathinfo('oidplus.css');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('oidplus.css')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('oidplus.css', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_3();
		if (@sha1_file('oidplus.css') !== 'd75bd3a3709ebf35cf7074a1f33d8034a9bc17d7') {
			warn('File cannot be written (checksum mismatch): oidplus.css');
		}
	}
}

// Files different: oidplus.js
function writefile_4() {
	@$fp = fopen('oidplus.js', 'w');
	@fwrite($fp, base64_decode('LyoKICogT0lEcGx1cyAyLjAKICogQ29weXJpZ2h0IDIwMTkgRGFuaWVsIE1hcnNjaGFsbCwgVmlhVGhpbmtTb2Z0CiAqCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5v'));
	@fwrite($fp, base64_decode('dCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4w'));
	@fwrite($fp, base64_decode('CiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lU'));
	@fwrite($fp, base64_decode('SE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRh'));
	@fwrite($fp, base64_decode('dGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwoKLypqc2hpbnQgZXN2ZXJzaW9uOiA2ICovCgovLyAkKCcjaHRtbCcpLmpzdHJlZSgpOwoKY3VycmVudF9ub2RlID0gIiI7CnBvcHN0YXRlX3J1bm5pbmcgPSBmYWxzZTsKCnN5c3RlbV90aXRsZSA9ICIiOwoKU3Ry'));
	@fwrite($fp, base64_decode('aW5nLnByb3RvdHlwZS5leHBsb2RlID0gZnVuY3Rpb24gKHNlcGFyYXRvciwgbGltaXQpIHsKCS8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzQ1MTQzMjMvamF2YXNjcmlwdC1lcXVpdmFsZW50LXRvLXBocC1leHBsb2RlCgljb25zdCBhcnJh'));
	@fwrite($fp, base64_decode('eSA9IHRoaXMuc3BsaXQoc2VwYXJhdG9yKTsKCWlmIChsaW1pdCAhPT0gdW5kZWZpbmVkICYmIGFycmF5Lmxlbmd0aCA+PSBsaW1pdCkgewoJCWFycmF5LnB1c2goYXJyYXkuc3BsaWNlKGxpbWl0IC0gMSkuam9pbihzZXBhcmF0b3IpKTsKCX0KCXJldHVybiBhcnJh'));
	@fwrite($fp, base64_decode('eTsKfTsKClN0cmluZy5wcm90b3R5cGUuaHRtbGVudGl0aWVzID0gZnVuY3Rpb24gKCkgewoJcmV0dXJuIHRoaXMucmVwbGFjZSgvJi9nLCAnJmFtcDsnKS5yZXBsYWNlKC88L2csICcmbHQ7JykucmVwbGFjZSgvPi9nLCAnJmd0OycpLnJlcGxhY2UoLyIvZywgJyZx'));
	@fwrite($fp, base64_decode('dW90OycpOwp9OwoKU3RyaW5nLnByb3RvdHlwZS5odG1sX2VudGl0eV9kZWNvZGUgPSBmdW5jdGlvbiAoKSB7CglyZXR1cm4gJCgnPHRleHRhcmVhIC8+JykuaHRtbCh0aGlzKS50ZXh0KCk7Cn07CgpmdW5jdGlvbiBjb21iaW5lX3N5c3RlbXRpdGxlX2FuZF9wYWdl'));
	@fwrite($fp, base64_decode('dGl0bGUoc3lzdGVtdGl0bGUsIHBhZ2V0aXRsZSkgewoJaWYgKHN5c3RlbXRpdGxlID09IHBhZ2V0aXRsZSkgewoJCXJldHVybiBzeXN0ZW10aXRsZTsKCX0gZWxzZSB7CgkJcmV0dXJuIHN5c3RlbXRpdGxlICsgJyAtICcgKyBwYWdldGl0bGU7Cgl9Cn0KCmZ1bmN0'));
	@fwrite($fp, base64_decode('aW9uIGdldFRyZWVMb2FkVVJMKCkgewoJdmFyIHVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpOwoJdmFyIGdvdG8gPSB1cmwuc2VhcmNoUGFyYW1zLmdldCgiZ290byIpOwoJcmV0dXJuIChnb3RvICE9IG51bGwpID8gInRyZWVsb2FkLnBocD9nb3Rv'));
	@fwrite($fp, base64_decode('PSIrZW5jb2RlVVJJQ29tcG9uZW50KGdvdG8pIDogInRyZWVsb2FkLnBocCI7Cn0KCmZ1bmN0aW9uIHJlbG9hZENvbnRlbnQoKSB7CgkvLyBkb2N1bWVudC5sb2NhdGlvbiA9ICc/Z290bz0nK2VuY29kZVVSSUNvbXBvbmVudChjdXJyZW50X25vZGUpOwoJb3Blbk9p'));
	@fwrite($fp, base64_decode('ZEluUGFuZWwoY3VycmVudF9ub2RlKTsKCSQoJyNvaWR0cmVlJykuanN0cmVlKCJyZWZyZXNoIik7Cn0KCmZ1bmN0aW9uIG9wZW5PaWRJblBhbmVsKGlkLCB1bnNlbGVjdD1mYWxzZSkgewoJY29uc29sZS5sb2coIm9wZW5PaWRJblBhbmVsKCIraWQrIiwgIit1bnNl'));
	@fwrite($fp, base64_decode('bGVjdCsiKSIpOwoKCWlmICh1bnNlbGVjdCkgewoJCSQoJyNvaWR0cmVlJykuanN0cmVlKCdkZXNlbGVjdF9hbGwnKTsKCQkkKCcjb2lkdHJlZScpLmpzdHJlZSgnc2VsZWN0X25vZGUnLCBpZCk7Cgl9CgoJLy8gJCgnI2NvbnRlbnRfd2luZG93JykuaGlkZSgpOwoJ'));
	@fwrite($fp, base64_decode('ZG9jdW1lbnQudGl0bGUgPSAiIjsKCSQoJyNyZWFsX3RpdGxlJykuaHRtbCgiJm5ic3A7Iik7CgkkKCcjcmVhbF9jb250ZW50JykuaHRtbCgiTG9hZGluZy4uLiIpOwoJJCgnI3N0YXRpY19saW5rJykuYXR0cigiaHJlZiIsICI/Z290bz0iK2VuY29kZVVSSUNvbXBv'));
	@fwrite($fp, base64_decode('bmVudChpZCkpOwoJJCgnI3N0YXRpY19saW5rX2Rlc2t0b3AnKS5hdHRyKCJocmVmIiwgImluZGV4X2Rlc2t0b3AucGhwP2dvdG89IitlbmNvZGVVUklDb21wb25lbnQoaWQpKTsKCSQoJyNzdGF0aWNfbGlua19tb2JpbGUnKS5hdHRyKCJocmVmIiwgImluZGV4X21v'));
	@fwrite($fp, base64_decode('YmlsZS5waHA/Z290bz0iK2VuY29kZVVSSUNvbXBvbmVudChpZCkpOwoKCWlmIChwb3BzdGF0ZV9ydW5uaW5nKSByZXR1cm47IC8vIFRvIGF2b2lkIHRoYXQgdGhlIGpzdHJlZSBzZWxlY3Rpb24gZHVyaW5nIHBvcHN0YXRlKCkgd29uJ3QgdHJpZ2dlciBhbm90aGVy'));
	@fwrite($fp, base64_decode('IHBhZ2UgbG9hZAoKCS8vIE5vcm1hbCBvcGVuaW5nIG9mIGEgZGVzY3JpcHRpb24KCWZldGNoKCdnZXRfZGVzY3JpcHRpb24ucGhwP2lkPScrZW5jb2RlVVJJQ29tcG9uZW50KGlkKSkKCS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7CgkJcmVzcG9uc2UuanNvbigp'));
	@fwrite($fp, base64_decode('CgkJLnRoZW4oZnVuY3Rpb24oZGF0YSkgewoJCQlkYXRhLmlkID0gaWQ7CgoJCQlkb2N1bWVudC50aXRsZSA9IGNvbWJpbmVfc3lzdGVtdGl0bGVfYW5kX3BhZ2V0aXRsZShzeXN0ZW1fdGl0bGUsIGRhdGEudGl0bGUpOwoJCQl2YXIgc3RhdGUgPSB7CgkJCQkibm9k'));
	@fwrite($fp, base64_decode('ZV9pZCI6ZW5jb2RlVVJJQ29tcG9uZW50KGlkKSwKCQkJCSJ0aXRsZUhUTUwiOihkYXRhLmljb24gPyAnPGltZyBzcmM9IicrZGF0YS5pY29uKyciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgYWx0PSInK2RhdGEudGl0bGUuaHRtbGVudGl0aWVzKCkrJyI+ICcgOiAn'));
	@fwrite($fp, base64_decode('JykgK2RhdGEudGl0bGUuaHRtbGVudGl0aWVzKCksCgkJCQkidGV4dEhUTUwiOmRhdGEudGV4dCwKCQkJCSJzdGF0aWNsaW5rSFJFRiI6Ij9nb3RvPSIrZW5jb2RlVVJJQ29tcG9uZW50KGlkKSwKCQkJCSJzdGF0aWNsaW5rSFJFRl9EZXNrdG9wIjoiaW5kZXhfZGVz'));
	@fwrite($fp, base64_decode('a3RvcC5waHA/Z290bz0iK2VuY29kZVVSSUNvbXBvbmVudChpZCksCgkJCQkic3RhdGljbGlua0hSRUZfTW9iaWxlIjoiaW5kZXhfbW9iaWxlLnBocD9nb3RvPSIrZW5jb2RlVVJJQ29tcG9uZW50KGlkKQoJCQl9OwoJCQlpZiAoY3VycmVudF9ub2RlICE9IGlkKSB7'));
	@fwrite($fp, base64_decode('CgkJCQl3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoc3RhdGUsIGRhdGEudGl0bGUsICI/Z290bz0iK2VuY29kZVVSSUNvbXBvbmVudChpZCkpOwoJCQl9IGVsc2UgewoJCQkJd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHN0YXRlLCBkYXRhLnRpdGxlLCAiP2dv'));
	@fwrite($fp, base64_decode('dG89IitlbmNvZGVVUklDb21wb25lbnQoaWQpKTsKCQkJfQoKCQkJaWYgKGRhdGEuaWNvbikgewoJCQkJJCgnI3JlYWxfdGl0bGUnKS5odG1sKCc8aW1nIHNyYz0iJytkYXRhLmljb24rJyIgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiBhbHQ9IicrZGF0YS50aXRsZS5o'));
	@fwrite($fp, base64_decode('dG1sZW50aXRpZXMoKSsnIj4gJyArIGRhdGEudGl0bGUuaHRtbGVudGl0aWVzKCkpOwoJCQl9IGVsc2UgewoJCQkJJCgnI3JlYWxfdGl0bGUnKS5odG1sKGRhdGEudGl0bGUuaHRtbGVudGl0aWVzKCkpOwoJCQl9CgkJCSQoJyNyZWFsX2NvbnRlbnQnKS5odG1sKGRh'));
	@fwrite($fp, base64_decode('dGEudGV4dCk7CgkJCWRvY3VtZW50LnRpdGxlID0gY29tYmluZV9zeXN0ZW10aXRsZV9hbmRfcGFnZXRpdGxlKHN5c3RlbV90aXRsZSwgZGF0YS50aXRsZSk7CgkJCWN1cnJlbnRfbm9kZSA9IGlkOwoJCX0pCgkJLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7CgkJCWNv'));
	@fwrite($fp, base64_decode('bnNvbGUuZXJyb3IoZXJyb3IpOwoJCX0pOwoJfSkKCS5jYXRjaChmdW5jdGlvbihlcnJvcikgewoJCWNvbnNvbGUuZXJyb3IoZXJyb3IpOwoJfSk7CgoJLy8gJCgnI2NvbnRlbnRfd2luZG93Jykuc2hvdygpOwp9CgpmdW5jdGlvbiB1cGRhdGVEZXNjKCkgewoJJC5h'));
	@fwrite($fp, base64_decode('amF4KHsKCQl1cmw6ImFjdGlvbi5waHAiLAoJCW1ldGhvZDoiUE9TVCIsCgkJZGF0YTogewoJCQlhY3Rpb246IlVwZGF0ZTIiLAoJCQlpZDpjdXJyZW50X25vZGUsCgkJCXRpdGxlOihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGl0bGVlZGl0JykgPyBkb2N1bWVu'));
	@fwrite($fp, base64_decode('dC5nZXRFbGVtZW50QnlJZCgndGl0bGVlZGl0JykudmFsdWUgOiBudWxsKSwKCQkJLy9kZXNjcmlwdGlvbjooZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rlc2NyaXB0aW9uJykgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVzY3JpcHRpb24nKS52YWx1ZSA6'));
	@fwrite($fp, base64_decode('IG51bGwpCgkJCWRlc2NyaXB0aW9uOnRpbnlNQ0UuZ2V0KCdkZXNjcmlwdGlvbicpLmdldENvbnRlbnQoKQoJCX0sCgkJc3VjY2VzczpmdW5jdGlvbihkYXRhKSB7CgkJCWlmIChkYXRhICE9ICJPSyIpIHsKCQkJCWFsZXJ0KCJFcnJvcjogIiArIGRhdGEpOwoJCQl9'));
	@fwrite($fp, base64_decode('IGVsc2UgewoJCQkJYWxlcnQoIlVwZGF0ZSBPSyIpOwoJCQkJLy9yZWxvYWRDb250ZW50KCk7CgkJCQkkKCcjb2lkdHJlZScpLmpzdHJlZSgicmVmcmVzaCIpOwoJCQkJdmFyIGgxcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoMSIpOwoJCQkJZm9y'));
	@fwrite($fp, base64_decode('ICh2YXIgaSA9IDA7IGkgPCBoMXMubGVuZ3RoOyBpKyspIHsKCQkJCQl2YXIgaDEgPSBoMXNbaV07CgkJCQkJaDEuaW5uZXJIVE1MID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpdGxlZWRpdCcpLnZhbHVlLmh0bWxlbnRpdGllcygpOwoJCQkJfQoJCQkJZG9j'));
	@fwrite($fp, base64_decode('dW1lbnQudGl0bGUgPSBjb21iaW5lX3N5c3RlbXRpdGxlX2FuZF9wYWdldGl0bGUoc3lzdGVtX3RpdGxlLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGl0bGVlZGl0JykudmFsdWUpOwoKCQkJCXZhciBtY2UgPSB0aW55bWNlLmdldCgnZGVzY3JpcHRpb24nKTsK'));
	@fwrite($fp, base64_decode('CQkJCWlmIChtY2UgIT0gbnVsbCkgbWNlLmlzTm90RGlydHkgPSAxOwoJCQl9CgkJfQoJfSk7Cn0KCmZ1bmN0aW9uIGNydWRBY3Rpb25TZW5kSW52aXRhdGlvbihvcmlnaW4sIGVtYWlsKSB7CgkvLyBkb2N1bWVudC5sb2NhdGlvbiA9ICc/Z290bz1vaWRwbHVzOmlu'));
	@fwrite($fp, base64_decode('dml0ZV9yYSQnK2VtYWlsKyckJytvcmlnaW47CgoJb3Blbk9pZEluUGFuZWwoJ29pZHBsdXM6aW52aXRlX3JhJCcrZW1haWwrJyQnK29yaWdpbik7Cgp9CgpmdW5jdGlvbiBjcnVkQWN0aW9uSW5zZXJ0KHBhcmVudCkgewoJJC5hamF4KHsKCQl1cmw6ImFjdGlvbi5w'));
	@fwrite($fp, base64_decode('aHAiLAoJCW1ldGhvZDoiUE9TVCIsCgkJZGF0YTp7CgkJCWFjdGlvbjoiSW5zZXJ0IiwKCQkJaWQ6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lkJykudmFsdWUsCgkJCXJhX2VtYWlsOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYV9lbWFpbCcpLnZhbHVlLAoJ'));
	@fwrite($fp, base64_decode('CQlhc24xaWRzOihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXNuMWlkcycpID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FzbjFpZHMnKS52YWx1ZSA6IG51bGwpLAoJCQlpcmlzOihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXJpcycpID8gZG9jdW1lbnQu'));
	@fwrite($fp, base64_decode('Z2V0RWxlbWVudEJ5SWQoJ2lyaXMnKS52YWx1ZSA6IG51bGwpLAoJCQljb25maWRlbnRpYWw6KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoaWRlJykgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGlkZScpLmNoZWNrZWQgOiBudWxsKSwKCQkJcGFyZW50OnBh'));
	@fwrite($fp, base64_decode('cmVudAoJCX0sCgkJc3VjY2VzczpmdW5jdGlvbihkYXRhKSB7CgkJCWlmIChkYXRhID09ICJPSyIpIHsKCQkJCS8vYWxlcnQoIkluc2VydCBPSyIpOwoJCQkJcmVsb2FkQ29udGVudCgpOwoJCQkJLy8gVE9ETzogYXVmIHJlbG9hZENvbnRlbnQoKSB2ZXJ6aWNodGVu'));
	@fwrite($fp, base64_decode('LiBzdGF0dGRlc3NlbiBudXIgdHJlZSBsaW5rcyBha3R1YWxpc2llcmVuLCB1bmQgcmVjaHRzIGVpbmUgbmV1ZSB6ZWlsZSB6dXIgdGFiZWxsZSBoaW56dWb8Z2VuCgkJCX0gZWxzZSBpZiAoZGF0YSA9PSAiT0sgKFJhTm90SW5EYXRhYmFzZSkiKSB7CgkJCQlpZiAo'));
	@fwrite($fp, base64_decode('Y29uZmlybSgiVXBkYXRlIE9LLiBIb3dldmVyLCB0aGUgZW1haWwgYWRkcmVzcyB5b3UgaGF2ZSBlbnRlcmVkICgiK2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYV9lbWFpbCcpLnZhbHVlKyIpIGlzIG5vdCBpbiBvdXIgc3lzdGVtLiBEbyB5b3Ugd2FudCB0byBz'));
	@fwrite($fp, base64_decode('ZW5kIGFuIGludml0YXRpb24sIHNvIHRoYXQgdGhlIFJBIGNhbiByZWdpc3RlciBhbiBhY2NvdW50IHRvIG1hbmFnZSB0aGVpciBPSURzPyIpKSB7CgkJCQkJY3J1ZEFjdGlvblNlbmRJbnZpdGF0aW9uKHBhcmVudCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jh'));
	@fwrite($fp, base64_decode('X2VtYWlsJykudmFsdWUpOwoJCQkJfSBlbHNlIHsKCQkJCQlyZWxvYWRDb250ZW50KCk7CgkJCQkJLy8gVE9ETzogYXVmIHJlbG9hZENvbnRlbnQoKSB2ZXJ6aWNodGVuLiBzdGF0dGRlc3NlbiBudXIgdHJlZSBsaW5rcyBha3R1YWxpc2llcmVuLCB1bmQgcmVjaHRz'));
	@fwrite($fp, base64_decode('IGVpbmUgbmV1ZSB6ZWlsZSB6dXIgdGFiZWxsZSBoaW56dWb8Z2VuCgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlhbGVydCgiRXJyb3I6ICIgKyBkYXRhKTsKCQkJfQoJCX0KCX0pOwp9CgpmdW5jdGlvbiBjcnVkQWN0aW9uVXBkYXRlKGlkLCBwYXJlbnQpIHsKCSQuYWph'));
	@fwrite($fp, base64_decode('eCh7CgkJdXJsOiJhY3Rpb24ucGhwIiwKCQltZXRob2Q6IlBPU1QiLAoJCWRhdGE6IHsKCQkJYWN0aW9uOiJVcGRhdGUiLAoJCQlpZDplbmNvZGVVUklDb21wb25lbnQoaWQpLAoJCQlyYV9lbWFpbDpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmFfZW1haWxfJytp'));
	@fwrite($fp, base64_decode('ZCkudmFsdWUsCgkJCWFzbjFpZHM6KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhc24xaWRzXycraWQpID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FzbjFpZHNfJytpZCkudmFsdWUgOiBudWxsKSwKCQkJaXJpczooZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQo'));
	@fwrite($fp, base64_decode('J2lyaXNfJytpZCkgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXJpc18nK2lkKS52YWx1ZSA6IG51bGwpLAoJCQljb25maWRlbnRpYWw6KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoaWRlXycraWQpID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hpZGVf'));
	@fwrite($fp, base64_decode('JytpZCkuY2hlY2tlZCA6IG51bGwpLAoJCQlwYXJlbnQ6cGFyZW50CgkJfSwKCQlzdWNjZXNzOmZ1bmN0aW9uKGRhdGEpIHsKCQkJaWYgKGRhdGEgPT0gIk9LIikgewoJCQkJYWxlcnQoIlVwZGF0ZSBPSyIpOwoJCQkJLy8gcmVsb2FkQ29udGVudCgpOwoJCQkJJCgn'));
	@fwrite($fp, base64_decode('I29pZHRyZWUnKS5qc3RyZWUoInJlZnJlc2giKTsKCQkJfSBlbHNlIGlmIChkYXRhID09ICJPSyAoUmFOb3RJbkRhdGFiYXNlKSIpIHsKCQkJCWlmIChjb25maXJtKCJVcGRhdGUgT0suIEhvd2V2ZXIsIHRoZSBlbWFpbCBhZGRyZXNzIHlvdSBoYXZlIGVudGVyZWQg'));
	@fwrite($fp, base64_decode('KCIrZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhX2VtYWlsXycraWQpLnZhbHVlKyIpIGlzIG5vdCBpbiBvdXIgc3lzdGVtLiBEbyB5b3Ugd2FudCB0byBzZW5kIGFuIGludml0YXRpb24sIHNvIHRoYXQgdGhlIFJBIGNhbiByZWdpc3RlciBhbiBhY2NvdW50IHRv'));
	@fwrite($fp, base64_decode('IG1hbmFnZSB0aGVpciBPSURzPyIpKSB7CgkJCQkJY3J1ZEFjdGlvblNlbmRJbnZpdGF0aW9uKHBhcmVudCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhX2VtYWlsXycraWQpLnZhbHVlKTsKCQkJCX0gZWxzZSB7CgkJCQkJLy8gcmVsb2FkQ29udGVudCgpOwoJ'));
	@fwrite($fp, base64_decode('CQkJCSQoJyNvaWR0cmVlJykuanN0cmVlKCJyZWZyZXNoIik7CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlhbGVydCgiRXJyb3I6ICIgKyBkYXRhKTsKCQkJfQoJCX0KCX0pOwp9CgpmdW5jdGlvbiBjcnVkQWN0aW9uRGVsZXRlKGlkLCBwYXJlbnQpIHsKCWlmKCF3aW5k'));
	@fwrite($fp, base64_decode('b3cuY29uZmlybSgiQXJlIHlvdSBzdXJlIHRoYXQgeW91IHdhbnQgdG8gZGVsZXRlICIraWQrIj8iKSkgcmV0dXJuIGZhbHNlOwoKCSQuYWpheCh7CgkJdXJsOiJhY3Rpb24ucGhwIiwKCQltZXRob2Q6IlBPU1QiLAoJCWRhdGE6IHsKCQkJYWN0aW9uOiJEZWxldGUi'));
	@fwrite($fp, base64_decode('LAoJCQlpZDplbmNvZGVVUklDb21wb25lbnQoaWQpLAoJCQlwYXJlbnQ6cGFyZW50CgkJfSwKCQlzdWNjZXNzOmZ1bmN0aW9uKGRhdGEpIHsKCQkJaWYgKGRhdGEgIT0gIk9LIikgewoJCQkJYWxlcnQoIkVycm9yOiAiICsgZGF0YSk7CgkJCX0gZWxzZSB7CgkJCQly'));
	@fwrite($fp, base64_decode('ZWxvYWRDb250ZW50KCk7CgkJCQkvLyBUT0RPOiBhdWYgcmVsb2FkQ29udGVudCgpIHZlcnppY2h0ZW4uIHN0YXR0ZGVzc2VuIG51ciB0cmVlIGxpbmtzIGFrdHVhbGlzaWVyZW4sIHVuZCByZWNodHMgZGllIHplaWxlIGF1cyBkZXIgdGFiZWxsZSBs9nNjaGVuCgkJ'));
	@fwrite($fp, base64_decode('CX0KCQl9Cgl9KTsKfQoKZnVuY3Rpb24gZGVsZXRlUmEoZW1haWwsIGdvdG8pIHsKCWlmKCF3aW5kb3cuY29uZmlybSgiQXJlIHlvdSByZWFsbHkgc3VyZSB0aGF0IHlvdSB3YW50IHRvIGRlbGV0ZSAiK2VtYWlsKyI/IChUaGUgT0lEcyBzdGF5IGFjdGl2ZSkiKSkg'));
	@fwrite($fp, base64_decode('cmV0dXJuIGZhbHNlOwoKCSQuYWpheCh7CgkJdXJsOiJhY3Rpb24ucGhwIiwKCQltZXRob2Q6IlBPU1QiLAoJCWRhdGE6IHsKCQkJYWN0aW9uOiJkZWxldGVfcmEiLAoJCQllbWFpbDplbWFpbCwKCQl9LAoJCXN1Y2Nlc3M6ZnVuY3Rpb24oZGF0YSkgewoJCQlpZiAo'));
	@fwrite($fp, base64_decode('ZGF0YSAhPSAiT0siKSB7CgkJCQlhbGVydCgiRXJyb3I6ICIgKyBkYXRhKTsKCQkJfSBlbHNlIHsKCQkJCWFsZXJ0KCJEb25lLiIpOwoJCQkJaWYgKGdvdG8gIT0gbnVsbCkgZG9jdW1lbnQubG9jYXRpb24gPSAnP2dvdG89JyArIGdvdG87CgkJCQkvLyByZWxvYWRD'));
	@fwrite($fp, base64_decode('b250ZW50KCk7CgkJCX0KCQl9Cgl9KTsKfQoKZnVuY3Rpb24gb3BlbkFuZFNlbGVjdE5vZGUoY2hpbGRJRCwgcGFyZW50SUQpIHsKCWlmICgkKCcjb2lkdHJlZScpLmpzdHJlZSh0cnVlKS5nZXRfbm9kZShwYXJlbnRJRCkpIHsKCQkkKCcjb2lkdHJlZScpLmpzdHJl'));
	@fwrite($fp, base64_decode('ZSgnb3Blbl9ub2RlJywgJyMnK3BhcmVudElELCBmdW5jdGlvbihlLCBkYXRhKSB7IC8vIG9wZW4gcGFyZW50IG5vZGUKCQkJaWYgKCQoJyNvaWR0cmVlJykuanN0cmVlKHRydWUpLmdldF9ub2RlKGNoaWxkSUQpKSB7IC8vIGlzIHRoZSBjaGlsZCB0aGVyZT8KCQkJ'));
	@fwrite($fp, base64_decode('CSQoJyNvaWR0cmVlJykuanN0cmVlKCdkZXNlbGVjdF9hbGwnKS5qc3RyZWUoJ3NlbGVjdF9ub2RlJywgJyMnK2NoaWxkSUQpOyAvLyBzZWxlY3QgaXQKCQkJfSBlbHNlIHsKCQkJCS8vIFRoaXMgY2FuIGhhcHBlbiBpZiB0aGUgY29udGVudCBwYWdlIGNvbnRhaW5z'));
	@fwrite($fp, base64_decode('IGJyYW5kIG5ldyBpdGVtcyB3aGljaCBhcmUgbm90IGluIHRoZSB0cmVldmlldyB5ZXQKCQkJCWRvY3VtZW50LmxvY2F0aW9uID0gIj9nb3RvPSIrZW5jb2RlVVJJQ29tcG9uZW50KGNoaWxkSUQpOwoJCQl9CgkJfSwgdHJ1ZSk7Cgl9IGVsc2UgewoJCS8vIFRoaXMg'));
	@fwrite($fp, base64_decode('c2hvdWxkIHVzdWFsbHkgbm90IGhhcHBlbgoJCWRvY3VtZW50LmxvY2F0aW9uID0gIj9nb3RvPSIrZW5jb2RlVVJJQ29tcG9uZW50KGNoaWxkSUQpOwoJfQp9CgokKHdpbmRvdykub24oInBvcHN0YXRlIiwgZnVuY3Rpb24oZSkgewoJcG9wc3RhdGVfcnVubmluZyA9'));
	@fwrite($fp, base64_decode('IHRydWU7Cgl0cnkgewoJCXZhciBkYXRhID0gZS5vcmlnaW5hbEV2ZW50LnN0YXRlOwoKCQljdXJyZW50X25vZGUgPSBkYXRhLm5vZGVfaWQ7CgkJJCgnI29pZHRyZWUnKS5qc3RyZWUoJ2Rlc2VsZWN0X2FsbCcpLmpzdHJlZSgnc2VsZWN0X25vZGUnLCBkYXRhLm5v'));
	@fwrite($fp, base64_decode('ZGVfaWQpOyAvLyBUT0RPOiBzZWFyY2ggYW5kIG9wZW4gdGhlIG5vZGVzCgkJJCgnI3JlYWxfdGl0bGUnKS5odG1sKGRhdGEudGl0bGVIVE1MKTsKCQkkKCcjcmVhbF9jb250ZW50JykuaHRtbChkYXRhLnRleHRIVE1MKTsKCQkkKCcjc3RhdGljX2xpbmsnKS5hdHRy'));
	@fwrite($fp, base64_decode('KCJocmVmIiwgZGF0YS5zdGF0aWNsaW5rSFJFRik7CgkJJCgnI3N0YXRpY19saW5rX2Rlc2t0b3AnKS5hdHRyKCJocmVmIiwgZGF0YS5zdGF0aWNsaW5rSFJFRl9EZXNrdG9wKTsKCQkkKCcjc3RhdGljX2xpbmtfbW9iaWxlJykuYXR0cigiaHJlZiIsIGRhdGEuc3Rh'));
	@fwrite($fp, base64_decode('dGljbGlua0hSRUZfTW9iaWxlKTsKCQlkb2N1bWVudC50aXRsZSA9IGNvbWJpbmVfc3lzdGVtdGl0bGVfYW5kX3BhZ2V0aXRsZShzeXN0ZW1fdGl0bGUsIGRhdGEudGl0bGVIVE1MLmh0bWxfZW50aXR5X2RlY29kZSgpKTsKCX0gY2F0Y2ggKGVycikgewoJCXBvcHN0'));
	@fwrite($fp, base64_decode('YXRlX3J1bm5pbmcgPSBmYWxzZTsKCX0gZmluYWxseSB7CgkJcG9wc3RhdGVfcnVubmluZyA9IGZhbHNlOwoJfQp9KTsKCiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHsKCS8vIC0tLSBKc1RyZWUKCgkkKCcjb2lkdHJlZScpCgkuanN0cmVlKHsKCQlwbHVn'));
	@fwrite($fp, base64_decode('aW5zOiBbJ21hc3Nsb2FkJywnc2VhcmNoJywnY29uZGl0aW9uYWxzZWxlY3QnXSwKCQknY29yZScgOiB7CgkJCSdkYXRhJyA6IHsKCQkJCSJ1cmwiIDogZ2V0VHJlZUxvYWRVUkwoKSwKCQkJCSJkYXRhIiA6IGZ1bmN0aW9uIChub2RlKSB7CgkJCQkJcmV0dXJuIHsg'));
	@fwrite($fp, base64_decode('ImlkIiA6IG5vZGUuaWQgfTsKCQkJCX0KCQkJfSwKCQkJIm11bHRpcGxlIjogZmFsc2UKCQl9LAoJCSdjb25kaXRpb25hbHNlbGVjdCcgOiBmdW5jdGlvbiAobm9kZSkgewoJCQlpZiAobm9kZS5vcmlnaW5hbC5jb25kaXRpb25hbHNlbGVjdCAhPT0gdW5kZWZpbmVk'));
	@fwrite($fp, base64_decode('KSB7CgkJCQlyZXR1cm4gZXZhbChub2RlLm9yaWdpbmFsLmNvbmRpdGlvbmFsc2VsZWN0KTsKCQkJfSBlbHNlIHsKCQkJCXJldHVybiB0cnVlOyAvLyBhbGxvdyBzZWxlY3QKCQkJfQoJCX0sCgl9KQoJLm9uKCdyZWFkeS5qc3RyZWUnLCBmdW5jdGlvbiAoZSwgZGF0'));
	@fwrite($fp, base64_decode('YSkgewoJCXZhciB1cmwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTsKCQl2YXIgZ290byA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCJnb3RvIik7CgkJaWYgKGdvdG8gPT0gbnVsbCkgZ290byA9ICJvaWRwbHVzOnN5c3RlbSI7IC8vIHRoZSBwYWdlIHdh'));
	@fwrite($fp, base64_decode('cyBub3QgY2FsbGVkIHdpdGggP2dvdG89Li4uCgoJCS8vIEJ5IHNldHRpbmcgY3VycmVudF9ub2RlLCBzZWxlY3Rfbm9kZSgpIHdpbGwgbm90IGNhdXNlIGdldF9kZXNjcmlwdGlvbi5waHAgdG8gbG9hZCAoc2luY2Ugd2UgYWxyZWFkeSBsb2FkZWQgdGhlIGZpcnN0'));
	@fwrite($fp, base64_decode('IHN0YXRpYyBjb250ZW50IHZpYSBQSFAsIGZvciBzZWFyY2ggZW5naW5lcyBtYWlubHkpCgkJLy8gQnV0IHRoZW4gd2UgbmVlZCB0byBzZXQgdGhlIGhpc3Rvcnkgc3RhdGUgbWFudWFsbHkKCQljdXJyZW50X25vZGUgPSBnb3RvOwoJCXdpbmRvdy5oaXN0b3J5LnJl'));
	@fwrite($fp, base64_decode('cGxhY2VTdGF0ZSh7CgkJCSJub2RlX2lkIjplbmNvZGVVUklDb21wb25lbnQoZ290byksCgkJCSJ0aXRsZUhUTUwiOiQoJyNyZWFsX3RpdGxlJykuaHRtbCgpLAoJCQkidGV4dEhUTUwiOiQoJyNyZWFsX2NvbnRlbnQnKS5odG1sKCksCgkJCSJzdGF0aWNsaW5rSFJF'));
	@fwrite($fp, base64_decode('RiI6Ij9nb3RvPSIrZW5jb2RlVVJJQ29tcG9uZW50KGdvdG8pLAoJCQkic3RhdGljbGlua0hSRUZfRGVza3RvcCI6ImluZGV4X2Rlc2t0b3AucGhwP2dvdG89IitlbmNvZGVVUklDb21wb25lbnQoZ290byksCgkJCSJzdGF0aWNsaW5rSFJFRl9Nb2JpbGUiOiJpbmRl'));
	@fwrite($fp, base64_decode('eF9tb2JpbGUucGhwP2dvdG89IitlbmNvZGVVUklDb21wb25lbnQoZ290bykKCQl9LCAkKCcjcmVhbF90aXRsZScpLmh0bWwoKSwgJz9nb3RvPScrZW5jb2RlVVJJQ29tcG9uZW50KGdvdG8pKTsKCgkJaWYgKGdvdG8gIT0gbnVsbCkgZGF0YS5pbnN0YW5jZS5zZWxl'));
	@fwrite($fp, base64_decode('Y3Rfbm9kZShbZ290b10pOwoJfSkKCS5vbignc2VsZWN0X25vZGUuanN0cmVlJywgZnVuY3Rpb24gKG5vZGUsIHNlbGVjdGVkLCBldmVudCkgewoJCWlmIChvaWRwbHVzTW9iaWxlKCkpIHsKCQkJJCgiI29pZHRyZWUiKS5oaWRlKCJzbG93Iik7CgkJCSQoIiNzeXN0'));
	@fwrite($fp, base64_decode('ZW1fdGl0bGVfbWVudSIpLnJlbW92ZUNsYXNzKCJhY3RpdmUiKTsKCQl9CgoJCXZhciBpZCA9IHNlbGVjdGVkLm5vZGUuaWQ7CgkJaWYgKGN1cnJlbnRfbm9kZSAhPSBpZCkgewoJCQlvcGVuT2lkSW5QYW5lbChpZCk7CgkJfQoJfSk7CgoJLy8gLS0tIExheW91dAoK'));
	@fwrite($fp, base64_decode('CWlmIChvaWRwbHVzTW9iaWxlKCkpIHsKCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb2lkdHJlZScpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N5c3RlbV90aXRsZV9tZW51Jykuc3R5bGUudmlzaWJpbGl0eSA9'));
	@fwrite($fp, base64_decode('ICJ2aXNpYmxlIjsKCX0gZWxzZSB7CgkJJCgnYm9keScpLmxheW91dCh7CgkJCW5vcnRoX19zaXplOiA0MCwKCQkJbm9ydGhfX3NsaWRhYmxlOiBmYWxzZSwKCQkJbm9ydGhfX2Nsb3NhYmxlOiBmYWxzZSwKCQkJbm9ydGhfX3Jlc2l6YWJsZTogZmFsc2UsCgkJCXdl'));
	@fwrite($fp, base64_decode('c3RfX3NpemU6CQkJNDUwLAoJCQl3ZXN0X19zcGFjaW5nX2Nsb3NlZDoJCTIwLAoJCQl3ZXN0X190b2dnbGVyTGVuZ3RoX2Nsb3NlZDoJMjMwLAoJCQl3ZXN0X190b2dnbGVyQWxpZ25fY2xvc2VkOgkidG9wIiwKCQkJd2VzdF9fdG9nZ2xlckNvbnRlbnRfY2xvc2Vk'));
	@fwrite($fp, base64_decode('OiJPPGJyPkI8YnI+Sjxicj5FPGJyPkM8YnI+VDxicj48YnI+VDxCUj5SPEJSPkU8QlI+RSIsCgkJCXdlc3RfX3RvZ2dsZXJUaXBfY2xvc2VkOgkiT3BlbiAmIFBpbiBNZW51IiwKCQkJd2VzdF9fc2xpZGVyVGlwOgkJIlNsaWRlIE9wZW4gTWVudSIsCgkJCXdlc3Rf'));
	@fwrite($fp, base64_decode('X3NsaWRlVHJpZ2dlcl9vcGVuOgkibW91c2VvdmVyIiwKCQkJY2VudGVyX19tYXNrQ29udGVudHM6CQl0cnVlIC8vIElNUE9SVEFOVCAtIGVuYWJsZSBpZnJhbWUgbWFza2luZwoJCX0pOwoJfQp9KTsKCmZ1bmN0aW9uIG9pZHBsdXNNb2JpbGUoKSB7CglyZXR1cm4g'));
	@fwrite($fp, base64_decode('ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgidWktbGF5b3V0LWNlbnRlciIpLmxlbmd0aCA9PSAwOwp9CgpmdW5jdGlvbiBtb2JpbGVOYXZCdXR0b25DbGljayhzZW5kZXIpIHsKCWlmICgkKCIjb2lkdHJlZSIpLmlzKCI6dmlzaWJsZSIpKSB7CgkJJCgi'));
	@fwrite($fp, base64_decode('I29pZHRyZWUiKS5oaWRlKCJzbG93Iik7CgkJJCgiI3N5c3RlbV90aXRsZV9tZW51IikucmVtb3ZlQ2xhc3MoImFjdGl2ZSIpOwoJfSBlbHNlIHsKCQkkKCIjb2lkdHJlZSIpLnNob3coInNsb3ciKTsKCQkkKCIjc3lzdGVtX3RpdGxlX21lbnUiKS5hZGRDbGFzcygi'));
	@fwrite($fp, base64_decode('YWN0aXZlIik7Cgl9Cn0KCmZ1bmN0aW9uIG1vYmlsZU5hdkJ1dHRvbkhvdmVyKHNlbmRlcikgewoJc2VuZGVyLmNsYXNzTGlzdC50b2dnbGUoImhvdmVyIik7Cn0K'));
	@fclose($fp);
}
if (!is_file('oidplus.js')) {
	warn('File has vanished! Will re-create it: oidplus.js');
	writefile_4();
	if (!is_file('oidplus.js')) {
		warn('File cannot be created (not existing): oidplus.js');
	} else if (sha1_file('oidplus.js') != 'b17e43e07837d9991d1f65db6545f093ef0e2834') {
		warn('File cannot be created (checksum mismatch): oidplus.js');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('oidplus.js', 0644)) {
		warn('Could not change file permissions of oidplus.js');
	}
} else {
	if (@sha1_file('oidplus.js') !== 'b17e43e07837d9991d1f65db6545f093ef0e2834') {
		if (@sha1_file('oidplus.js') !== '81de09a01fab49fd1d0d3159db2ad2624eb18c7f') {
			warn('File was modified. Will overwrite the changes now: oidplus.js');
			$tmp = pathinfo('oidplus.js');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('oidplus.js')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('oidplus.js', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_4();
		if (@sha1_file('oidplus.js') !== 'b17e43e07837d9991d1f65db6545f093ef0e2834') {
			warn('File cannot be written (checksum mismatch): oidplus.js');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 105\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 105') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

