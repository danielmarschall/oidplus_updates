<?php /* <ViaThinkSoftSignature>
EZ8/L5U8TqwfEyxTc1WP2Gt8v29wa8KrJCGP0TOMGqDjccplccRJLDhxMvfLwC/2P
juux35w34OFODZg2oDUvrDqzaxKApQxWu1QRGnDYZ8sfmjrem6N9yn/gdisawB9/6
HkHn4e1T/F10DthSmvctXLQ467YaqwekXME/BEuN22L4iIfqQ2VjziTkGfuoAeXcm
mDZAU5VkhNvJ05QIHGzOlIK8nfCvHYAo+nUmOrPlOm7rqAvYHGdohUEWgxcPBB/Xa
RolFE/MS4EaJGJU+98Ehk0O30zmLLyUhTCPcnGblfAOcOpO6DBRXliH6XnRL+1BpH
c76DccWxGbp6Xhs43eywiEK0K74lN/5AEUwxjiUvRYeidW32Q1c70lVaVYosSH6pP
HHo1fPOlEACFVMIz22QyX1u6G/LXaWIIevQsL63Be+U/ht2UwnZ0eNKLN6Nqs08tX
MJv08gZnp6fJqC8/OaLsJ97Ow7TMf3IJfFeSaUF9qLrtUEi0IrCyIA0kc+j2xBltP
nyhc39SgOxav1eFJ9c04SEja7gluhJI61/ZGwuVnXdvu1vf+iGkg2THXVynpfvebf
cnu1vSSYqGcjJOKKueGt+so6rZd8Mvl4xR8syp7I0vaMNyz34HsWBojLlLAs2vxYe
6hpCpRn1Nzm5wOTIxYgQ0t/pkx4CtDOXRzZoZ5ItBoASsYkVgGV7iNwFEDasDPRI3
Mqzidd8ffZDVhoo69H7RLauJ9PjBcCq6Qd2mQrAH4SAG4uCa+HDQhwM858rFm8+WS
4D6+57zkqbnlKxYf6a4Kv68wQhQTvbThmqq8UQcPLARDv+Eu6Vllpka7EsTmjxJQt
t7JA+F3JygLaQsc4hv0m1cOvYXt/kJRsO9ZeJmFgbTLJDroxWtO0Ku2lqBNuXWrFC
ScCyaghYGC8S/5+x15Fzt0uqANUA6rQuMuctZvzdeyBcNFUfBhj6YULClrIO5KxQ4
OUKhZldFyFp+2Bi+Xr02MM36JRPXWfLwNt1clnGk0P8idbE973gDO81rYMBBEVCs7
8hPk6QVRpudjYsJNvKQgzyByoKs+SWWtFFNX6BpcVzWraYTBeWnbKs+10cvVmqeu6
5lnnYVFFlMkdn6/CRSfuvHSLqvZfXB/KHjUSUFFpD2hr2GTBznFdvxan4KX+UOJwM
lkX4P4atmlqYYrk+kqniF9VFb3ejtGuZzGyEy9dsDy14F8rrc2wfE+SwNmvxwAMt1
cdzav1Zxu70T3uUViAoLf71k8Ie2vYLIb1VRj10+ojY+0TLylcsDCUOux9yXhgy6E
IqpwDEWsSHjDX1YgauZmnvINuRaoyRO542m+GTBttoF7AAz1KWkea4BhbPoxZ0NgC
Q==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('.version.php')) !== '<?php // Revision 1052') {
	err('This update can only be applied to OIDplus version 2.0.0.1052!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php
function writefile_1() {
	@$fp = fopen('plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMiBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgp1c2UgVmlhVGhpbmtTb2Z0XE9JRHBsdXNcT0lEcGx1czsKdXNlIFZpYVRoaW5rU29mdFxPSURwbHVzXE9JRHBsdXNHdWk7CnVzZSBWaWFUaGlua1NvZnRcT0lEcGx1c1xPSURwbHVzRXhj'));
	@fwrite($fp, base64_decode('ZXB0aW9uOwoKaGVhZGVyKCdDb250ZW50LVR5cGU6dGV4dC9odG1sOyBjaGFyc2V0PVVURi04Jyk7CgpyZXF1aXJlX29uY2UgX19ESVJfXyAuICcvLi4vLi4vLi4vLi4vaW5jbHVkZXMvb2lkcGx1cy5pbmMucGhwJzsKCnNldF9leGNlcHRpb25faGFuZGxlcihhcnJh'));
	@fwrite($fp, base64_decode('eShPSURwbHVzR3VpOjpjbGFzcywgJ2h0bWxfZXhjZXB0aW9uX2hhbmRsZXInKSk7CgpAc2V0X3RpbWVfbGltaXQoMCk7CgpPSURwbHVzOjppbml0KHRydWUpOwoKaWYgKE9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ0RJU0FCTEVfUExVR0lOX1ZpYVRo'));
	@fwrite($fp, base64_decode('aW5rU29mdFxPSURwbHVzXE9JRHBsdXNQYWdlQWRtaW5Ob3N0YWxnaWEnLCBmYWxzZSkpIHsKCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdUaGlzIHBsdWdpbiB3YXMgZGlzYWJsZWQgYnkgdGhlIHN5c3RlbSBhZG1pbmlzdHJhdG9yIScpKTsKfQoKaWYg'));
	@fwrite($fp, base64_decode('KCFPSURwbHVzOjphdXRoVXRpbHMoKS0+aXNBZG1pbkxvZ2dlZEluKCkpIHsKCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdZb3UgbmVlZCB0byA8YSAlMT5sb2cgaW48L2E+IGFzIGFkbWluaXN0cmF0b3IuJyxPSURwbHVzOjpndWkoKS0+bGluaygnb2lk'));
	@fwrite($fp, base64_decode('cGx1czpsb2dpbiRhZG1pbicpKSk7Cn0KCmlmICghY2xhc3NfZXhpc3RzKCdaaXBBcmNoaXZlJykpIHsKCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdUaGUgUEhQIGV4dGVuc2lvbiAiWmlwQXJjaGl2ZSIgbmVlZHMgdG8gYmUgaW5zdGFsbGVkIHRvIGNy'));
	@fwrite($fp, base64_decode('ZWF0ZSBhIFpJUCBhcmNoaXZlIHdpdGggYW4gaW5jbHVkZWQgZGF0YWJhc2UuIE90aGVyd2lzZSwgeW91IGNhbiBqdXN0IGRvd25sb2FkIHRoZSBwbGFpbiBwcm9ncmFtIHdpdGhvdXQgZGF0YS4nKSk7Cn0KCiRkb3NfaWRzID0gYXJyYXkoKTsKJHBhcmVudF9vaWRz'));
	@fwrite($fp, base64_decode('ID0gYXJyYXkoKTsKJGkgPSAwOwoKLy8gUm9vdCBub2RlCiRkb3NfaWRzWycnXSA9IHN0cl9wYWQoc3RydmFsKCRpKyspLCA4LCAnMCcsIFNUUl9QQURfTEVGVCk7CiRwYXJlbnRfb2lkc1snJ10gPSAnJzsKJGlyaVsnJ10gPSBhcnJheSgpOwokYXNuMVsnJ10gPSBh'));
	@fwrite($fp, base64_decode('cnJheSgpOwokdGl0bGVbJyddID0gJ09JRCBSb290JzsKJGRlc2NyaXB0aW9uWycnXSA9ICdFeHBvcnRlZCBieSBPSURwbHVzIDIuMCc7CgovLyBOb3cgY2hlY2sgYWxsIE9JRHMKJHJlcyA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgKiBmcm9tICMjI29i'));
	@fwrite($fp, base64_decode('amVjdHMgd2hlcmUgaWQgbGlrZSAnb2lkOiUnIG9yZGVyIGJ5ICIuT0lEcGx1czo6ZGIoKS0+bmF0T3JkZXIoJ2lkJykpOwp3aGlsZSAoJHJvdyA9ICRyZXMtPmZldGNoX29iamVjdCgpKSB7Cgkkb2lkID0gc3Vic3RyKCRyb3ctPmlkLCBzdHJsZW4oJ29pZDonKSk7'));
	@fwrite($fp, base64_decode('CgkkcGFyZW50X29pZCA9IHN1YnN0cigkcm93LT5wYXJlbnQsIHN0cmxlbignb2lkOicpKTsKCgkkZG9zX2lkc1skb2lkXSA9IHN0cl9wYWQoc3RydmFsKCRpKyspLCA4LCAnMCcsIFNUUl9QQURfTEVGVCk7CglmaWxsX2FzbjEoJG9pZCwgJGFzbjEpOwoJZmlsbF9p'));
	@fwrite($fp, base64_decode('cmkoJG9pZCwgJGlyaSk7CgkkdGl0bGVbJG9pZF0gPSAkcm93LT50aXRsZTsKCSRkZXNjcmlwdGlvblskb2lkXSA9ICRyb3ctPmRlc2NyaXB0aW9uOwoKCWlmICgob2lkX2xlbigkb2lkKSA+IDEpICYmICgkcGFyZW50X29pZCA9PSAnJykpIHsKCQlkbyB7CgkJCSRy'));
	@fwrite($fp, base64_decode('ZWFsX3BhcmVudCA9IG9pZF9sZW4oJG9pZCkgPiAxID8gb2lkX3VwKCRvaWQpIDogJyc7CgkJCSRwYXJlbnRfb2lkc1skb2lkXSA9ICRyZWFsX3BhcmVudDsKCgkJCWlmIChpc3NldCgkZG9zX2lkc1skcmVhbF9wYXJlbnRdKSkgYnJlYWs7IC8vIGRpZCB3ZSBhbHJl'));
	@fwrite($fp, base64_decode('YWR5IGhhbmRsZSB0aGlzIHBhcmVudCBub2RlPwoKCQkJJGRvc19pZHNbJHJlYWxfcGFyZW50XSA9IHN0cl9wYWQoc3RydmFsKCRpKyspLCA4LCAnMCcsIFNUUl9QQURfTEVGVCk7CgkJCWZpbGxfYXNuMSgkcmVhbF9wYXJlbnQsICRhc24xKTsgLy8gd2VsbC1rbm93'));
	@fwrite($fp, base64_decode('biBPSURzPwoJCQlmaWxsX2lyaSgkcmVhbF9wYXJlbnQsICRpcmkpOyAvLyB3ZWxsLWtub3duIE9JRHM/CgkJCSR0aXRsZVskcmVhbF9wYXJlbnRdID0gJyc7CgkJCSRkZXNjcmlwdGlvblskcmVhbF9wYXJlbnRdID0gJyc7CgkJCSRyZXMyID0gT0lEcGx1czo6ZGIo'));
	@fwrite($fp, base64_decode('KS0+cXVlcnkoInNlbGVjdCAqIGZyb20gIyMjb2JqZWN0cyB3aGVyZSBpZCA9ICdvaWQ6JHJlYWxfcGFyZW50JyIpOwoJCQl3aGlsZSAoJHJvdzIgPSAkcmVzMi0+ZmV0Y2hfb2JqZWN0KCkpIHsKCQkJCSR0aXRsZVskcmVhbF9wYXJlbnRdID0gJHJvdzItPnRpdGxl'));
	@fwrite($fp, base64_decode('OwoJCQkJJGRlc2NyaXB0aW9uWyRyZWFsX3BhcmVudF0gPSAkcm93Mi0+ZGVzY3JpcHRpb247CgkJCX0KCgkJCS8vIG5leHQKCQkJaWYgKCRyZWFsX3BhcmVudCA9PSAnJykgYnJlYWs7CgkJCSRvaWQgPSAkcmVhbF9wYXJlbnQ7CgkJfSB3aGlsZSAodHJ1ZSk7Cgl9'));
	@fwrite($fp, base64_decode('IGVsc2UgewoJCSRwYXJlbnRfb2lkc1skb2lkXSA9ICRwYXJlbnRfb2lkOwoJfQp9CgokdG1wX2ZpbGUgPSBPSURwbHVzOjpsb2NhbHBhdGgoKS4ndXNlcmRhdGEvZG9zX2V4cG9ydC56aXAnOwoKJHppcCA9IG5ldyBaaXBBcmNoaXZlKCk7CmlmICgkemlwLT5vcGVu'));
	@fwrite($fp, base64_decode('KCR0bXBfZmlsZSwgWmlwQXJjaGl2ZTo6Q1JFQVRFKSE9PSB0cnVlKSB7Cgl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigiY2Fubm90IG9wZW4gPCR0bXBfZmlsZT4iKTsKfQoKZnVuY3Rpb24gbWFrZV9saW5lKCRjb21tYW5kLCAkZGF0YSkgewoJcmV0dXJuICRj'));
	@fwrite($fp, base64_decode('b21tYW5kLiRkYXRhLiJcclxuIjsKfQoKLy8gaHR0cHM6Ly9naXRodWIuY29tL2RhbmllbG1hcnNjaGFsbC9vaWRwbHVzX2Rvcy9ibG9iL21hc3Rlci9PSURGSUxFLlBBUwpkZWZpbmUoJ0NNRF9WRVJTSU9OJywgICAgICAgICAnVkVSUycpOwpkZWZpbmUoJ0NNRF9P'));
	@fwrite($fp, base64_decode('V05fSUQnLCAgICAgICAgICAnU0VMRicpOwpkZWZpbmUoJ0NNRF9QQVJFTlQnLCAgICAgICAgICAnU1VQUicpOwpkZWZpbmUoJ0NNRF9DSElMRCcsICAgICAgICAgICAnQ0hMRCcpOwpkZWZpbmUoJ0NNRF9BU04xX0lERU5USUZJRVInLCAnQVNOMScpOwpkZWZpbmUo'));
	@fwrite($fp, base64_decode('J0NNRF9VTklDT0RFX0xBQkVMJywgICAnVU5JTCcpOwpkZWZpbmUoJ0NNRF9ERVNDUklQVElPTicsICAgICAnREVTQycpOwoKZm9yZWFjaCAoJGRvc19pZHMgYXMgJG9pZCA9PiAkZG9zX2lkKSB7CgkkY29udCA9ICcnOwoKCSRjb250IC49IG1ha2VfbGluZShDTURf'));
	@fwrite($fp, base64_decode('VkVSU0lPTiwgMjAyMik7CgoJJGNvbnQgLj0gbWFrZV9saW5lKENNRF9PV05fSUQsICRkb3NfaWQuJG9pZCk7CgoJJHBhcmVudF9vaWQgPSAkcGFyZW50X29pZHNbJG9pZF07CgkkcGFyZW50X2lkID0gJGRvc19pZHNbJHBhcmVudF9vaWRdOwoJJGNvbnQgLj0gbWFr'));
	@fwrite($fp, base64_decode('ZV9saW5lKENNRF9QQVJFTlQsICRwYXJlbnRfaWQuJHBhcmVudF9vaWQpOwoKCWZvcmVhY2ggKCRwYXJlbnRfb2lkcyBhcyAkY2hpbGRfb2lkID0+ICRwYXJlbnRfb2lkKSB7CgkJaWYgKCRjaGlsZF9vaWQgPT0gJycpIGNvbnRpbnVlOwoJCWlmICgkcGFyZW50X29p'));
	@fwrite($fp, base64_decode('ZCA9PSAkb2lkKSB7CgkJCSRjaGlsZF9pZCA9ICRkb3NfaWRzWyRjaGlsZF9vaWRdOwoJCQkkY29udCAuPSBtYWtlX2xpbmUoQ01EX0NISUxELCAkY2hpbGRfaWQuJGNoaWxkX29pZCk7CgkJfQoJfQoKCWZvcmVhY2ggKCRhc24xWyRvaWRdIGFzICRuYW1lKSB7CgkJ'));
	@fwrite($fp, base64_decode('JGNvbnQgLj0gbWFrZV9saW5lKENNRF9BU04xX0lERU5USUZJRVIsICRuYW1lKTsKCX0KCglmb3JlYWNoICgkaXJpWyRvaWRdIGFzICRuYW1lKSB7CgkJJGNvbnQgLj0gbWFrZV9saW5lKENNRF9VTklDT0RFX0xBQkVMLCAkbmFtZSk7Cgl9CgoJJGRlc2NfYXJ5MSA9'));
	@fwrite($fp, base64_decode('IGhhbmRsZURlc2MoJHRpdGxlWyRvaWRdKTsKCSRkZXNjX2FyeTIgPSBoYW5kbGVEZXNjKCRkZXNjcmlwdGlvblskb2lkXSk7CgkkZGVzY19hcnkgPSBhcnJheV9tZXJnZSgkZGVzY19hcnkxLCAkZGVzY19hcnkyKTsKCSRwcmV2X2xpbmUgPSAnJzsKCWZvcmVhY2gg'));
	@fwrite($fp, base64_decode('KCRkZXNjX2FyeSBhcyAkbGluZV9pZHggPT4gJGxpbmUpIHsKCQlpZiAoJGxpbmUgPT0gJHByZXZfbGluZSkgY29udGludWU7CgkJaWYgKCRsaW5lX2lkeCA+PSAxMC8qREVTQ0VESVRfTElORVMqLykgYnJlYWs7CgkJJGNvbnQgLj0gbWFrZV9saW5lKENNRF9ERVND'));
	@fwrite($fp, base64_decode('UklQVElPTiwgJGxpbmUpOwoJCSRwcmV2X2xpbmUgPSAkbGluZTsKCX0KCgkvL2VjaG8gIioqKiokZG9zX2lkLk9JRFxyXG4iOwoJLy9lY2hvICIkY29udFxyXG4iOwoKCSR6aXAtPmFkZEZyb21TdHJpbmcoIiRkb3NfaWQuT0lEIiwgJGNvbnQpOwp9CgokZXhlX3Vy'));
	@fwrite($fp, base64_decode('bCA9ICdodHRwczovL2dpdGh1Yi5jb20vZGFuaWVsbWFyc2NoYWxsL29pZHBsdXNfZG9zL3Jhdy9tYXN0ZXIvT0lEUExVUy5FWEUnOwokZXhlID0gdXJsX2dldF9jb250ZW50cygkZXhlX3VybCk7CmlmICghJGV4ZSkgewoJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRp'));
	@fwrite($fp, base64_decode('b24oX0woIkNhbm5vdCBkb3dubG9hZCB0aGUgYmluYXJ5IGZpbGUgZnJvbSBHaXRIdWIgKCUxKSIsICRleGVfdXJsKSk7Cn0KJHppcC0+YWRkRnJvbVN0cmluZygnT0lEUExVUy5FWEUnLCAkZXhlKTsKCiR6aXAtPmNsb3NlKCk7CgppZiAoIWhlYWRlcnNfc2VudCgp'));
	@fwrite($fp, base64_decode('KSB7CgloZWFkZXIoJ0NvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vemlwJyk7CgloZWFkZXIoJ0NvbnRlbnQtRGlzcG9zaXRpb246IGF0dGFjaG1lbnQ7IGZpbGVuYW1lPW9pZHBsdXNfZG9zLnppcCcpOwoJcmVhZGZpbGUoJHRtcF9maWxlKTsKfQoKdW5saW5rKCR0'));
	@fwrite($fp, base64_decode('bXBfZmlsZSk7CgpPSURwbHVzOjppbnZva2Vfc2h1dGRvd24oKTsKCiMgLS0tCgpmdW5jdGlvbiBmaWxsX2FzbjEoJG9pZCwgJiRhc24xKSB7CglpZiAoIWlzc2V0KCRhc24xWyRvaWRdKSkgJGFzbjFbJG9pZF0gPSBhcnJheSgpOwoJJHJlcyA9IE9JRHBsdXM6OmRi'));
	@fwrite($fp, base64_decode('KCktPnF1ZXJ5KCJzZWxlY3QgKiBmcm9tICMjI2FzbjFpZCB3aGVyZSBvaWQgPSAnb2lkOiRvaWQnIik7Cgl3aGlsZSAoJHJvdyA9ICRyZXMtPmZldGNoX29iamVjdCgpKSB7CgkJJGFzbjFbJG9pZF1bXSA9ICRyb3ctPm5hbWU7Cgl9Cn0KCmZ1bmN0aW9uIGZpbGxf'));
	@fwrite($fp, base64_decode('aXJpKCRvaWQsICYkaXJpKSB7CglpZiAoIWlzc2V0KCRpcmlbJG9pZF0pKSAkaXJpWyRvaWRdID0gYXJyYXkoKTsKCSRyZXMgPSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0ICogZnJvbSAjIyNpcmkgd2hlcmUgb2lkID0gJ29pZDokb2lkJyIpOwoJd2hpbGUg'));
	@fwrite($fp, base64_decode('KCRyb3cgPSAkcmVzLT5mZXRjaF9vYmplY3QoKSkgewoJCSRpcmlbJG9pZF1bXSA9ICRyb3ctPm5hbWU7Cgl9Cn0KCmZ1bmN0aW9uIGhhbmRsZURlc2MoJGRlc2MpIHsKCSRkZXNjID0gcHJlZ19yZXBsYWNlKCcvXDxicihccyopP1wvP1w+L2knLCAiXG4iLCAkZGVz'));
	@fwrite($fp, base64_decode('Yyk7IC8vIGJyMm5sCgkkZGVzYyA9IHN0cmlwX3RhZ3MoJGRlc2MpOwoJJGRlc2MgPSBzdHJfcmVwbGFjZSgnJm5ic3A7JywgJyAnLCAkZGVzYyk7CgkkZGVzYyA9IGh0bWxfZW50aXR5X2RlY29kZSgkZGVzYyk7CgkkZGVzYyA9IHN0cl9yZXBsYWNlKCJcciIsICIi'));
	@fwrite($fp, base64_decode('LCAkZGVzYyk7CgkkZGVzYyA9IHN0cl9yZXBsYWNlKCJcbiIsICIgICIsICRkZXNjKTsKCSRkZXNjID0gc3RyX3JlcGxhY2UoIlx0IiwgIiAgIiwgJGRlc2MpOwoJJGRlc2MgPSB0cmltKCRkZXNjKTsKCSRkZXNjX2FyeSA9IGV4cGxvZGUoIlxyXG4iLCB3b3Jkd3Jh'));
	@fwrite($fp, base64_decode('cCgkZGVzYywgNzUsICJcclxuIiwgdHJ1ZSkpOwoJaWYgKGltcGxvZGUoJycsJGRlc2NfYXJ5KSA9PSAnJykgJGRlc2NfYXJ5ID0gYXJyYXkoKTsKCXJldHVybiAkZGVzY19hcnk7Cn0K'));
	@fclose($fp);
}
if (!is_file('plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php')) {
	warn('File has vanished! Will re-create it: plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php');
	writefile_1();
	if (!is_file('plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php')) {
		warn('File cannot be created (not existing): plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php');
	} else if (sha1_file('plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php') != '674f11b027ed47482335e43d3fcd383aca450a3a') {
		warn('File cannot be created (checksum mismatch): plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php', 0644)) {
		warn('Could not change file permissions of plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php');
	}
} else {
	if (@sha1_file('plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php') !== '674f11b027ed47482335e43d3fcd383aca450a3a') {
		if (@sha1_file('plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php') !== '4ab172dd0cf0aa6da046a6ff7c6dd761046d5d27') {
			warn('File was modified. Will overwrite the changes now: plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php');
			$tmp = pathinfo('plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php') !== '674f11b027ed47482335e43d3fcd383aca450a3a') {
			warn('File cannot be written (checksum mismatch): plugins/viathinksoft/adminPages/920_nostalgia/export_dos.php');
		}
	}
}

// Files different: plugins/viathinksoft/adminPages/920_nostalgia/export_win.php
function writefile_2() {
	@$fp = fopen('plugins/viathinksoft/adminPages/920_nostalgia/export_win.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMiBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgp1c2UgVmlhVGhpbmtTb2Z0XE9JRHBsdXNcT0lEcGx1czsKdXNlIFZpYVRoaW5rU29mdFxPSURwbHVzXE9JRHBsdXNHdWk7CnVzZSBWaWFUaGlua1NvZnRcT0lEcGx1c1xPSURwbHVzRXhj'));
	@fwrite($fp, base64_decode('ZXB0aW9uOwoKaGVhZGVyKCdDb250ZW50LVR5cGU6dGV4dC9odG1sOyBjaGFyc2V0PVVURi04Jyk7CgpyZXF1aXJlX29uY2UgX19ESVJfXyAuICcvLi4vLi4vLi4vLi4vaW5jbHVkZXMvb2lkcGx1cy5pbmMucGhwJzsKCnNldF9leGNlcHRpb25faGFuZGxlcihhcnJh'));
	@fwrite($fp, base64_decode('eShPSURwbHVzR3VpOjpjbGFzcywgJ2h0bWxfZXhjZXB0aW9uX2hhbmRsZXInKSk7CgpAc2V0X3RpbWVfbGltaXQoMCk7CgpPSURwbHVzOjppbml0KHRydWUpOwoKaWYgKE9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ0RJU0FCTEVfUExVR0lOX1ZpYVRo'));
	@fwrite($fp, base64_decode('aW5rU29mdFxPSURwbHVzXE9JRHBsdXNQYWdlQWRtaW5Ob3N0YWxnaWEnLCBmYWxzZSkpIHsKCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdUaGlzIHBsdWdpbiB3YXMgZGlzYWJsZWQgYnkgdGhlIHN5c3RlbSBhZG1pbmlzdHJhdG9yIScpKTsKfQoKaWYg'));
	@fwrite($fp, base64_decode('KCFPSURwbHVzOjphdXRoVXRpbHMoKS0+aXNBZG1pbkxvZ2dlZEluKCkpIHsKCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdZb3UgbmVlZCB0byA8YSAlMT5sb2cgaW48L2E+IGFzIGFkbWluaXN0cmF0b3IuJyxPSURwbHVzOjpndWkoKS0+bGluaygnb2lk'));
	@fwrite($fp, base64_decode('cGx1czpsb2dpbiRhZG1pbicpKSk7Cn0KCmlmICghY2xhc3NfZXhpc3RzKCdaaXBBcmNoaXZlJykpIHsKCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdUaGUgUEhQIGV4dGVuc2lvbiAiWmlwQXJjaGl2ZSIgbmVlZHMgdG8gYmUgaW5zdGFsbGVkIHRvIGNy'));
	@fwrite($fp, base64_decode('ZWF0ZSBhIFpJUCBhcmNoaXZlIHdpdGggYW4gaW5jbHVkZWQgZGF0YWJhc2UuIE90aGVyd2lzZSwgeW91IGNhbiBqdXN0IGRvd25sb2FkIHRoZSBwbGFpbiBwcm9ncmFtIHdpdGhvdXQgZGF0YS4nKSk7Cn0KCiRkb3NfaWRzID0gYXJyYXkoKTsKJHBhcmVudF9vaWRz'));
	@fwrite($fp, base64_decode('ID0gYXJyYXkoKTsKJGkgPSAwOwoKLy8gUm9vdCBub2RlCiRkb3NfaWRzWycnXSA9IHN0cl9wYWQoc3RydmFsKCRpKyspLCA4LCAnMCcsIFNUUl9QQURfTEVGVCk7CiRwYXJlbnRfb2lkc1snJ10gPSAnJzsKJGlyaVsnJ10gPSBhcnJheSgpOwokYXNuMVsnJ10gPSBh'));
	@fwrite($fp, base64_decode('cnJheSgpOwokdGl0bGVbJyddID0gJ09JRCBSb290JzsKJGRlc2NyaXB0aW9uWycnXSA9ICdFeHBvcnRlZCBieSBPSURwbHVzIDIuMCc7CiRjcmVhdGVkWycnXSA9ICcnOwokdXBkYXRlZFsnJ10gPSAnJzsKCi8vIE5vdyBjaGVjayBhbGwgT0lEcwokcmVzID0gT0lE'));
	@fwrite($fp, base64_decode('cGx1czo6ZGIoKS0+cXVlcnkoInNlbGVjdCAqIGZyb20gIyMjb2JqZWN0cyB3aGVyZSBpZCBsaWtlICdvaWQ6JScgb3JkZXIgYnkgIi5PSURwbHVzOjpkYigpLT5uYXRPcmRlcignaWQnKSk7CndoaWxlICgkcm93ID0gJHJlcy0+ZmV0Y2hfb2JqZWN0KCkpIHsKCSRv'));
	@fwrite($fp, base64_decode('aWQgPSBzdWJzdHIoJHJvdy0+aWQsIHN0cmxlbignb2lkOicpKTsKCSRwYXJlbnRfb2lkID0gc3Vic3RyKCRyb3ctPnBhcmVudCwgc3RybGVuKCdvaWQ6JykpOwoKCSRkb3NfaWRzWyRvaWRdID0gc3RyX3BhZChzdHJ2YWwoJGkrKyksIDgsICcwJywgU1RSX1BBRF9M'));
	@fwrite($fp, base64_decode('RUZUKTsKCWZpbGxfYXNuMSgkb2lkLCAkYXNuMSk7CgkvL2ZpbGxfaXJpKCRvaWQsICRpcmkpOwoJJHRpdGxlWyRvaWRdID0gJHJvdy0+dGl0bGU7CgkkZGVzY3JpcHRpb25bJG9pZF0gPSAkcm93LT5kZXNjcmlwdGlvbjsKCSRjcmVhdGVkWyRvaWRdID0gJHJvdy0+'));
	@fwrite($fp, base64_decode('Y3JlYXRlZDsKCSR1cGRhdGVkWyRvaWRdID0gJHJvdy0+dXBkYXRlZDsKCglpZiAoKG9pZF9sZW4oJG9pZCkgPiAxKSAmJiAoJHBhcmVudF9vaWQgPT0gJycpKSB7CgkJZG8gewoJCQkkcmVhbF9wYXJlbnQgPSBvaWRfbGVuKCRvaWQpID4gMSA/IG9pZF91cCgkb2lk'));
	@fwrite($fp, base64_decode('KSA6ICcnOwoJCQkkcGFyZW50X29pZHNbJG9pZF0gPSAkcmVhbF9wYXJlbnQ7CgoJCQlpZiAoaXNzZXQoJGRvc19pZHNbJHJlYWxfcGFyZW50XSkpIGJyZWFrOyAvLyBkaWQgd2UgYWxyZWFkeSBoYW5kbGUgdGhpcyBwYXJlbnQgbm9kZT8KCgkJCSRkb3NfaWRzWyRy'));
	@fwrite($fp, base64_decode('ZWFsX3BhcmVudF0gPSBzdHJfcGFkKHN0cnZhbCgkaSsrKSwgOCwgJzAnLCBTVFJfUEFEX0xFRlQpOwoJCQlmaWxsX2FzbjEoJHJlYWxfcGFyZW50LCAkYXNuMSk7IC8vIHdlbGwta25vd24gT0lEcz8KCQkJLy9maWxsX2lyaSgkcmVhbF9wYXJlbnQsICRpcmkpOyAv'));
	@fwrite($fp, base64_decode('LyB3ZWxsLWtub3duIE9JRHM/CgkJCSR0aXRsZVskcmVhbF9wYXJlbnRdID0gJyc7CgkJCSRkZXNjcmlwdGlvblskcmVhbF9wYXJlbnRdID0gJyc7CgkJCSRjcmVhdGVkWyRyZWFsX3BhcmVudF0gPSAnJzsKCQkJJHVwZGF0ZWRbJHJlYWxfcGFyZW50XSA9ICcnOwoJ'));
	@fwrite($fp, base64_decode('CQkkcmVzMiA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgKiBmcm9tICMjI29iamVjdHMgd2hlcmUgaWQgPSAnb2lkOiRyZWFsX3BhcmVudCciKTsKCQkJd2hpbGUgKCRyb3cyID0gJHJlczItPmZldGNoX29iamVjdCgpKSB7CgkJCQkkdGl0bGVbJHJlYWxf'));
	@fwrite($fp, base64_decode('cGFyZW50XSA9ICRyb3cyLT50aXRsZTsKCQkJCSRkZXNjcmlwdGlvblskcmVhbF9wYXJlbnRdID0gJHJvdzItPmRlc2NyaXB0aW9uOwoJCQkJJGNyZWF0ZWRbJHJlYWxfcGFyZW50XSA9ICRyb3cyLT5jcmVhdGVkOwoJCQkJJHVwZGF0ZWRbJHJlYWxfcGFyZW50XSA9'));
	@fwrite($fp, base64_decode('ICRyb3cyLT51cGRhdGVkOwoJCQl9CgoJCQkvLyBuZXh0CgkJCWlmICgkcmVhbF9wYXJlbnQgPT0gJycpIGJyZWFrOwoJCQkkb2lkID0gJHJlYWxfcGFyZW50OwoJCX0gd2hpbGUgKHRydWUpOwoJfSBlbHNlIHsKCQkkcGFyZW50X29pZHNbJG9pZF0gPSAkcGFyZW50'));
	@fwrite($fp, base64_decode('X29pZDsKCX0KfQoKJHRtcF9maWxlID0gT0lEcGx1czo6bG9jYWxwYXRoKCkuJ3VzZXJkYXRhL3dpbmRvd3NfZXhwb3J0LnppcCc7CgokemlwID0gbmV3IFppcEFyY2hpdmUoKTsKaWYgKCR6aXAtPm9wZW4oJHRtcF9maWxlLCBaaXBBcmNoaXZlOjpDUkVBVEUpIT09'));
	@fwrite($fp, base64_decode('IHRydWUpIHsKCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKCJjYW5ub3Qgb3BlbiA8JHRtcF9maWxlPiIpOwp9CgokY29udCA9ICcnOwoKZm9yZWFjaCAoJGRvc19pZHMgYXMgJG9pZCA9PiAkZG9zX2lkKSB7CgkkY29udCAuPSAiW09JRDokb2lkXVxyXG4iOwoK'));
	@fwrite($fp, base64_decode('CSRpID0gMTsKCWZvcmVhY2ggKCRwYXJlbnRfb2lkcyBhcyAkY2hpbGRfb2lkID0+ICRwYXJlbnRfb2lkKSB7CgkJaWYgKCRjaGlsZF9vaWQgPT0gJycpIGNvbnRpbnVlOwoJCWlmICgkcGFyZW50X29pZCA9PSAkb2lkKSB7CgkJCSRjb250IC49ICJkZWxlZ2F0ZSRp'));
	@fwrite($fp, base64_decode('PU9JRDokY2hpbGRfb2lkXHJcbiI7CgkJCSRpKys7CgkJfQoJfQoJJGNvbnQgLj0gImRlbGVnYXRlcz0iLigkaS0xKS4iXG4iOwoKCWlmICgkb2lkICE9ICcnKSB7CgkJJGFzbmlkcyA9IGFycmF5KCk7CgkJZm9yZWFjaCAoJGFzbjFbJG9pZF0gYXMgJG5hbWUpIHsK'));
	@fwrite($fp, base64_decode('CQkJJGFzbmlkc1tdID0gJG5hbWU7CgkJfQoJCSRhc25pZHMgPSBpbXBsb2RlKCcsJywgJGFzbmlkcyk7CgkJaWYgKCRhc25pZHMgIT0gJycpICRjb250IC49ICJhc24xaWQ9JGFzbmlkc1xyXG4iOwoKCQkvKgoJCSRpcmlzID0gYXJyYXkoKTsKCQlmb3JlYWNoICgk'));
	@fwrite($fp, base64_decode('aXJpWyRvaWRdIGFzICRuYW1lKSB7CgkJCSRpcmlzW10gPSAkbmFtZTsKCQl9CgkJJGlyaXMgPSBpbXBsb2RlKCcsJywgJGlyaXMpOwoJCWlmICgkaXJpcyAhPSAnJykgJGNvbnQgLj0gImlyaT0kaXJpc1xyXG4iOwoJCSovCgoJCWlmICgkdGl0bGVbJG9pZF0gIT0g'));
	@fwrite($fp, base64_decode('JycpICRjb250IC49ICJkZXNjcmlwdGlvbj0iLiR0aXRsZVskb2lkXS4iXHJcbiI7CgoJCWlmICgkdXBkYXRlZFskb2lkXSAhPSAnJykgJGNvbnQgLj0gInVwZGF0ZWRhdGU9Ii5leHBsb2RlKCcgJywkdXBkYXRlZFskb2lkXSlbMF0uIlxyXG4iOwoJCWlmICgkY3Jl'));
	@fwrite($fp, base64_decode('YXRlZFskb2lkXSAhPSAnJykgJGNvbnQgLj0gImNyZWF0ZWRhdGU9Ii5leHBsb2RlKCcgJywkY3JlYXRlZFskb2lkXSlbMF0uIlxyXG4iOwoKCQkkZGVzYyA9IGhhbmRsZURlc2MoJGRlc2NyaXB0aW9uWyRvaWRdKTsKCQlpZiAodHJpbSgkZGVzYykgIT0gJycpIHsK'));
	@fwrite($fp, base64_decode('CQkJJGNvbnQgLj0gImluZm9ybWF0aW9uPSRkb3NfaWQuVFhUXHJcbiI7CgkJCSR6aXAtPmFkZEZyb21TdHJpbmcoIkRCLy8kZG9zX2lkLlRYVCIsICRkZXNjKTsKCQl9Cgl9Cn0KCi8vZWNobyAnPHByZT4nLiRjb250Lic8L3ByZT4nOwovL2RpZSgpOwoKJHNldHRp'));
	@fwrite($fp, base64_decode('bmdzID0gYXJyYXkoKTsKJHNldHRpbmdzW10gPSAnW1NFVFRJTkdTXSc7CiRzZXR0aW5nc1tdID0gJ0RBVEE9REJcXCc7CiR6aXAtPmFkZEZyb21TdHJpbmcoIk9JRFBMVVMuSU5JIiwgaW1wbG9kZSgiXHJcbiIsJHNldHRpbmdzKS4iXHJcbiIpOwoKJHppcC0+YWRk'));
	@fwrite($fp, base64_decode('RnJvbVN0cmluZygnREIvL09JRC5JTkknLCAkY29udCk7CgokZXhlX3VybCA9ICdodHRwczovL2dpdGh1Yi5jb20vZGFuaWVsbWFyc2NoYWxsL29pZHBsdXNfd2luOTUvcmF3L21hc3Rlci9PSURQTFVTLmV4ZSc7CiRleGUgPSB1cmxfZ2V0X2NvbnRlbnRzKCRleGVf'));
	@fwrite($fp, base64_decode('dXJsKTsKaWYgKCEkZXhlKSB7Cgl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgiQ2Fubm90IGRvd25sb2FkIHRoZSBiaW5hcnkgZmlsZSBmcm9tIEdpdEh1YiAoJTEpIiwgJGV4ZV91cmwpKTsKfQokemlwLT5hZGRGcm9tU3RyaW5nKCdPSURQTFMzMi5FWEUn'));
	@fwrite($fp, base64_decode('LCAkZXhlKTsKCiRleGVfdXJsID0gJ2h0dHBzOi8vZ2l0aHViLmNvbS9kYW5pZWxtYXJzY2hhbGwvb2lkcGx1c193aW4zMTEvcmF3L21hc3Rlci9PSURQTFVTLmV4ZSc7CiRleGUgPSB1cmxfZ2V0X2NvbnRlbnRzKCRleGVfdXJsKTsKaWYgKCEkZXhlKSB7Cgl0aHJv'));
	@fwrite($fp, base64_decode('dyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgiQ2Fubm90IGRvd25sb2FkIHRoZSBiaW5hcnkgZmlsZSBmcm9tIEdpdEh1YiAoJTEpIiwgJGV4ZV91cmwpKTsKfQokemlwLT5hZGRGcm9tU3RyaW5nKCdPSURQTFMxNi5FWEUnLCAkZXhlKTsKCiR6aXAtPmNsb3NlKCk7'));
	@fwrite($fp, base64_decode('CgppZiAoIWhlYWRlcnNfc2VudCgpKSB7CgloZWFkZXIoJ0NvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vemlwJyk7CgloZWFkZXIoJ0NvbnRlbnQtRGlzcG9zaXRpb246IGF0dGFjaG1lbnQ7IGZpbGVuYW1lPW9pZHBsdXNfd2luZG93cy56aXAnKTsKCXJlYWRmaWxl'));
	@fwrite($fp, base64_decode('KCR0bXBfZmlsZSk7Cn0KCnVubGluaygkdG1wX2ZpbGUpOwoKT0lEcGx1czo6aW52b2tlX3NodXRkb3duKCk7CgojIC0tLQoKZnVuY3Rpb24gZmlsbF9hc24xKCRvaWQsICYkYXNuMSkgewoJaWYgKCFpc3NldCgkYXNuMVskb2lkXSkpICRhc24xWyRvaWRdID0gYXJy'));
	@fwrite($fp, base64_decode('YXkoKTsKCSRyZXMgPSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0ICogZnJvbSAjIyNhc24xaWQgd2hlcmUgb2lkID0gJ29pZDokb2lkJyIpOwoJd2hpbGUgKCRyb3cgPSAkcmVzLT5mZXRjaF9vYmplY3QoKSkgewoJCSRhc24xWyRvaWRdW10gPSAkcm93LT5u'));
	@fwrite($fp, base64_decode('YW1lOwoJfQp9CgovKgpmdW5jdGlvbiBmaWxsX2lyaSgkb2lkLCAmJGlyaSkgewoJaWYgKCFpc3NldCgkaXJpWyRvaWRdKSkgJGlyaVskb2lkXSA9IGFycmF5KCk7CgkkcmVzID0gT0lEcGx1czo6ZGIoKS0+cXVlcnkoInNlbGVjdCAqIGZyb20gIyMjaXJpIHdoZXJl'));
	@fwrite($fp, base64_decode('IG9pZCA9ICdvaWQ6JG9pZCciKTsKCXdoaWxlICgkcm93ID0gJHJlcy0+ZmV0Y2hfb2JqZWN0KCkpIHsKCQkkaXJpWyRvaWRdW10gPSAkcm93LT5uYW1lOwoJfQp9CiovCgpmdW5jdGlvbiBoYW5kbGVEZXNjKCRkZXNjKSB7CgkkZGVzYyA9IHByZWdfcmVwbGFjZSgn'));
	@fwrite($fp, base64_decode('L1w8YnIoXHMqKT9cLz9cPi9pJywgIlxuIiwgJGRlc2MpOyAvLyBicjJubAoJJGRlc2MgPSBzdHJpcF90YWdzKCRkZXNjKTsKCSRkZXNjID0gc3RyX3JlcGxhY2UoJyZuYnNwOycsICcgJywgJGRlc2MpOwoJJGRlc2MgPSBodG1sX2VudGl0eV9kZWNvZGUoJGRlc2Mp'));
	@fwrite($fp, base64_decode('OwoJJGRlc2MgPSBzdHJfcmVwbGFjZSgiXHIiLCAiIiwgJGRlc2MpOwoJJGRlc2MgPSBzdHJfcmVwbGFjZSgiXG4iLCAiXHJcbiIsICRkZXNjKTsKCSRkZXNjID0gdHJpbSgkZGVzYykuIlxyXG4iOwoJcmV0dXJuICRkZXNjOwp9Cg=='));
	@fclose($fp);
}
if (!is_file('plugins/viathinksoft/adminPages/920_nostalgia/export_win.php')) {
	warn('File has vanished! Will re-create it: plugins/viathinksoft/adminPages/920_nostalgia/export_win.php');
	writefile_2();
	if (!is_file('plugins/viathinksoft/adminPages/920_nostalgia/export_win.php')) {
		warn('File cannot be created (not existing): plugins/viathinksoft/adminPages/920_nostalgia/export_win.php');
	} else if (sha1_file('plugins/viathinksoft/adminPages/920_nostalgia/export_win.php') != '7516a4454c6fd2a3d7d9800f2e7b63431def89f4') {
		warn('File cannot be created (checksum mismatch): plugins/viathinksoft/adminPages/920_nostalgia/export_win.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/viathinksoft/adminPages/920_nostalgia/export_win.php', 0644)) {
		warn('Could not change file permissions of plugins/viathinksoft/adminPages/920_nostalgia/export_win.php');
	}
} else {
	if (@sha1_file('plugins/viathinksoft/adminPages/920_nostalgia/export_win.php') !== '7516a4454c6fd2a3d7d9800f2e7b63431def89f4') {
		if (@sha1_file('plugins/viathinksoft/adminPages/920_nostalgia/export_win.php') !== 'd24db861e767c9be41e60012a0a6c54b10e2a7a7') {
			warn('File was modified. Will overwrite the changes now: plugins/viathinksoft/adminPages/920_nostalgia/export_win.php');
			$tmp = pathinfo('plugins/viathinksoft/adminPages/920_nostalgia/export_win.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/viathinksoft/adminPages/920_nostalgia/export_win.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/viathinksoft/adminPages/920_nostalgia/export_win.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_2();
		if (@sha1_file('plugins/viathinksoft/adminPages/920_nostalgia/export_win.php') !== '7516a4454c6fd2a3d7d9800f2e7b63431def89f4') {
			warn('File cannot be written (checksum mismatch): plugins/viathinksoft/adminPages/920_nostalgia/export_win.php');
		}
	}
}


file_put_contents('.version.php', "<?php // Revision 1053\n");
if (trim(@file_get_contents('.version.php')) !== '<?php // Revision 1053') err('Could not write to .version.php!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

