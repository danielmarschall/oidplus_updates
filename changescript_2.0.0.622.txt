<?php /* <ViaThinkSoftSignature>
b4MrvdRujF1NJnlS+9EZgDDL3jCVwYgeILOiLC6VLHWXMOXsCMCqo1JUNjJeina06
1VE77ryPQsXtmrcsFEAkBa5PnAMjBA5JO0LtETUMDz1gGRIHLdG/i8JxncIKFtY3+
Uvpadhk7rbUpVN1OINBFZPGU/LXOT9ExlsEOJ9KkWvGliTzNXADbYhGxm+lYuHd0V
b6nOTLP5MTaxAlPfpZkHDOmwyq8tPs1XRSAIbFYraw0e3U0Xj4+6dWzKr52y75I9Y
xBcqocJjybeysGzzB+NCsIZ87jGWnfuvo8IdR94E3umihEpQ5m2DjbftyCC7DeP2A
aDMAsVzsvHgge6tOWqOru5jXooC0tr32PPM0fkLo+TgCRIAbnTAbNUkK3FFN+Db64
pHln74D/eeKm4+/pkO/8e08Z+73fLFQY7vG7QsuFBWM0GYkhb1wYjJieyHiO0Ru0N
wUKl7SEen3oCyHl0RDw0nVVH5Dwwe5TMViEI+h7IJouuj9SEQMpO6YoiVYGhAyXd+
lmd77or/xPf5mve+aynoY61nI/RKpo2FnviDOf8TIXjayDs+BLotrcd827G8dBLSO
tTPgAR+CmKPXKuz6bCZAAFIbD2Ay8ll203d+Vo9dVwF99vH6w0mYnszhNuknBrVC7
tlQW2JYFWK0tu7w6sydItdvqY6HtFlnbWOB47voSU89rBXfc8bZJvm+nwHUYcWJdW
hr1/FaYaY48D8NmQA04bk4fFGgAsN+pvCVoxUApIYhjvqS+yKpYimLQOottLDlKYn
8mmTaCXckJ3oTiTwntEs5Wwn7r8p3W9qprkOzXfF8JaEVWjrs6XCLpmFLeujeEXSv
KfRmfaS2OwdvXKb6kYKYkAbbZ/pZgRbt1b91tUe8jB09uGWwPhTSn0UPHWmI9m6Ap
rvdHbNHpLPvpOx+oN37iYrXhEiVr3pyyUkCRjLOoL/Qo9fCkYORTCvlEd9SkHKTX1
6R/K0ghRu48Fe/LTFCI/LrUgYiE1YYnFXcZzfr2t5wsJgamFNIzB/z3C5S+jqP7a2
zsNyxlFSCuZkgJwo6Stw641vuP3t++/k9m36jdObaowF+Ld+JcjkG1Z0TGEGwFFIx
jWCSldSasiT14+OgGw8VasQX15+5S+VqE+neo5uUfY/LytIJ3DVwgdD/aslEOFMHz
afE6OxImi7L/co0bpJnjLzDFz439AtUD71KAQem4Rp/QWsMLkPl97oux+Pr+3DqUP
e+OBDR59ScUF9/dds1DrMS8/aZj38ahEclTtFT0ea4HB2qQcYN1QiCk7umC+rYn3q
vocxX48XBMrvzVuNDguJOdaGpJLKrKwKqiKAJEIh9DP4Wbd4VEAFumZMQIAe+2YbW
A==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 621') {
	err('This update can only be applied to OIDplus version 2.0.0.621!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: doc/developer_notes/SERVER_SECRET.txt
function writefile_1() {
	@$fp = fopen('doc/developer_notes/SERVER_SECRET.txt', 'w');
	@fwrite($fp, base64_decode('V2hlcmUgaXMgU0VSVkVSX1NFQ1JFVCBiZWluZyB1c2VkPw0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQpTeXN0ZW06DQotIEF1dGggY29udGVudCBTdG9yZQ0KCU9JRHBsdXNBdXRoQ29udGVudFN0b3JlSldULmNsYXNzOg0KCUtleSB0byBz'));
	@fwrite($fp, base64_decode('aWduIEpXVCB0b2tlbnMgKHVzZWQgZm9yIEF1dG9tYXRlZCBBSkFYIHJlcXVlc3RzIGFuZCBsb2dpbnMgd2l0aCAiUmVtZW1iZXIgbWUiKSB1c2luZyBQQktERjIrSE1BQw0KCShPTkxZIGlmIHRoZSBzZXJ2ZXIgZG9lcyBub3QgaGF2ZSBhIFB1YmxpYy9Qcml2YXRl'));
	@fwrite($fp, base64_decode('IGtleSBwYWlyISkNCglKV1QgPSBIUzUxMihoYXNoX3Bia2RmMignc2hhNTEyJywgU0VSVkVSX1NFQ1JFVCsiL09JRHBsdXNBdXRoQ29udGVudFN0b3JlSldUIiwgJycsIDEwMDAwLCA2NC8qMjU2Yml0Ki8sIGZhbHNlKSkNCi0gU2Vzc2lvbiBIYW5kbGVyOg0KCUVu'));
	@fwrite($fp, base64_decode('Y3J5cHRpb24gb2Ygc2Vzc2lvbiBjb250ZW50cyAocmVndWxhciBsb2dpbnMpDQotIEF1dGggdXRpbHM6IEdlbmVyYXRpb24gb2YgYXV0aCBrZXlzDQoJbWFrZUF1dGhLZXkoZGF0YSkgPSBzaGEzXzUxMihTRVJWRVJfU0VDUkVUICsgIi9BVVRIS0VZLyIgKyBkYXRh'));
	@fwrite($fp, base64_decode('KQ0KCXVzZWQgYXQgcGx1Z2luIGludml0ZSBSQSAocmEvMDkyKToNCgkJbWFrZUF1dGhLZXkoImFjdGl2YXRlX3JhOyIgKyBlbWFpbCArICI7IiArIHRpbWVzdGFtcCkNCgkJPSBzaGEzXzUxMihTRVJWRVJfU0VDUkVUICsgIi9BVVRIS0VZL2FjdGl2YXRlX3JhOyIg'));
	@fwrite($fp, base64_decode('KyBlbWFpbCArICI7IiArIHRpbWVzdGFtcCkNCgl1c2VkIGF0IHBsdWdpbiBjaGFuZ2UgUkEgZW1haWwgKHJhLzEwMik6DQoJCW1ha2VBdXRoS2V5KCJhY3RpdmF0ZV9uZXdfcmFfZW1haWw7IiArIG9sZF9lbWFpbCArICI7IiArIG5ld19lbWFpbCArICI7IiArIHRp'));
	@fwrite($fp, base64_decode('bWVzdGFtcCkNCgkJPSBzaGEzXzUxMihTRVJWRVJfU0VDUkVUICsgIi9BVVRIS0VZL2FjdGl2YXRlX25ld19yYV9lbWFpbDsiICsgb2xkX2VtYWlsICsgIjsiICsgbmV3X2VtYWlsICsgIjsiICsgdGltZXN0YW1wKQ0KCXVzZWQgYXQgcGx1Z2luIGZvcmdvdCBSQSBw'));
	@fwrite($fp, base64_decode('YXNzd29yZCAocHVibGljLzA5MSk6DQoJCW1ha2VBdXRoS2V5KCJyZXNldF9wYXNzd29yZDsiICsgZW1haWwgKyAiOyIgKyB0aW1lc3RhbXApDQoJCT0gc2hhM181MTIoU0VSVkVSX1NFQ1JFVCArICIvQVVUSEtFWS9yZXNldF9wYXNzd29yZDsiICsgZW1haWwgKyAi'));
	@fwrite($fp, base64_decode('OyIgKyB0aW1lc3RhbXApDQoJdXNlZCBhdCBwbHVnaW4gVmlhVGhpbmtTb2Z0IEZyZWVPSUQgYWN0aXZhdGlvbiAocHVibGljLzIwMCk6DQoJCW1ha2VBdXRoS2V5KCJjb20udmlhdGhpbmtzb2Z0LmZyZWVvaWQuYWN0aXZhdGVfZnJlZW9pZDsiICsgZW1haWwgKyAi'));
	@fwrite($fp, base64_decode('OyIgKyB0aW1lc3RhbXApDQoJCT0gc2hhM181MTIoU0VSVkVSX1NFQ1JFVCArICIvQVVUSEtFWS9jb20udmlhdGhpbmtzb2Z0LmZyZWVvaWQuYWN0aXZhdGVfZnJlZW9pZDsiICsgZW1haWwgKyAiOyIgKyB0aW1lc3RhbXApDQoNClBsdWdpbiBXSE9JUyAocHVibGlj'));
	@fwrite($fp, base64_decode('LzEwMCk6DQotIEF1dGhlbnRpY2F0aW9uIHRva2VuIGZvciBoaWRkZW4gT0lEcyA9IHNtYWxsaGFzaChTRVJWRVJfU0VDUkVUICsgIi9XSE9JUy8iICsgaWQpOw0KDQpQbHVnaW4gVk5hZyB2ZXJzaW9uIGNoZWNrIChhZG1pbi85MDEpOg0KLSBXZWJyZWFkZXIgcGFz'));
	@fwrite($fp, base64_decode('c3dvcmQgPSBzaGEzXzUxMihTRVJWRVJfU0VDUkVUICsgIi9WTkFHIikNCg=='));
	@fclose($fp);
}
if (!is_file('doc/developer_notes/SERVER_SECRET.txt')) {
	warn('File has vanished! Will re-create it: doc/developer_notes/SERVER_SECRET.txt');
	writefile_1();
	if (!is_file('doc/developer_notes/SERVER_SECRET.txt')) {
		warn('File cannot be created (not existing): doc/developer_notes/SERVER_SECRET.txt');
	} else if (sha1_file('doc/developer_notes/SERVER_SECRET.txt') != 'fda5ac26b937e4af34f23c3f701ecac146bf2794') {
		warn('File cannot be created (checksum mismatch): doc/developer_notes/SERVER_SECRET.txt');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('doc/developer_notes/SERVER_SECRET.txt', 0644)) {
		warn('Could not change file permissions of doc/developer_notes/SERVER_SECRET.txt');
	}
} else {
	if (@sha1_file('doc/developer_notes/SERVER_SECRET.txt') !== 'fda5ac26b937e4af34f23c3f701ecac146bf2794') {
		if (@sha1_file('doc/developer_notes/SERVER_SECRET.txt') !== '147f1252d72e840eab93d816465032fdae1f569a') {
			warn('File was modified. Will overwrite the changes now: doc/developer_notes/SERVER_SECRET.txt');
			$tmp = pathinfo('doc/developer_notes/SERVER_SECRET.txt');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('doc/developer_notes/SERVER_SECRET.txt')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('doc/developer_notes/SERVER_SECRET.txt', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('doc/developer_notes/SERVER_SECRET.txt') !== 'fda5ac26b937e4af34f23c3f701ecac146bf2794') {
			warn('File cannot be written (checksum mismatch): doc/developer_notes/SERVER_SECRET.txt');
		}
	}
}

// Files different: includes/classes/OIDplusAuthContentStoreJWT.class.php
function writefile_2() {
	@$fp = fopen('includes/classes/OIDplusAuthContentStoreJWT.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMSBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgppZiAoIWRlZmluZWQoJ0lOU0lERV9PSURQTFVTJykpIGRpZSgpOwoKY2xhc3MgT0lEcGx1c0F1dGhDb250ZW50U3RvcmVKV1QgZXh0ZW5kcyBPSURwbHVzQXV0aENvbnRlbnRTdG9yZUR1'));
	@fwrite($fp, base64_decode('bW15IHsKCgljb25zdCBDT09LSUVfTkFNRSA9ICdPSURQTFVTX0FVVEhfSldUJzsKCgljb25zdCBKV1RfR0VORVJBVE9SX0FKQVggICA9IDA7IC8vICJBdXRvbWF0ZWQgQUpBWCIgcGx1Z2luCgljb25zdCBKV1RfR0VORVJBVE9SX0xPR0lOICA9IDE7IC8vICJSZW1l'));
	@fwrite($fp, base64_decode('bWJlciBtZSIgbG9naW4gbWV0aG9kCgljb25zdCBKV1RfR0VORVJBVE9SX01BTlVBTCA9IDI7IC8vICJNYW51YWxseSBjcmFmdGVkIiBKV1QgdG9rZW5zCgoJcHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gand0R2V0QmxhY2tsaXN0Q29uZmlnS2V5KCRnZW4sICRzdWIp'));
	@fwrite($fp, base64_decode('IHsKCQkvLyBOb3RlOiBOZWVkcyB0byBiZSA8PSA1MCBjaGFyYWN0ZXJzIQoJCXJldHVybiAnand0X2JsYWNrbGlzdF9nZW4oJy4kZ2VuLicpX3N1YignLnRyaW0oYmFzZTY0X2VuY29kZShtZDUoJHN1Yix0cnVlKSksJz0nKS4nKSc7Cgl9CgoJcHVibGljIHN0YXRp'));
	@fwrite($fp, base64_decode('YyBmdW5jdGlvbiBqd3RCbGFja2xpc3QoJGdlbiwgJHN1YikgewoJCSRjZmcgPSBzZWxmOjpqd3RHZXRCbGFja2xpc3RDb25maWdLZXkoJGdlbiwgJHN1Yik7CgkJJGJsX3RpbWUgPSB0aW1lKCktMTsKCgkJJGdlbl9kZXNjID0gJ1Vua25vd24nOwoJCWlmICgkZ2Vu'));
	@fwrite($fp, base64_decode('ID09PSBzZWxmOjpKV1RfR0VORVJBVE9SX0FKQVgpICAgJGdlbl9kZXNjID0gJ0F1dG9tYXRlZCBBSkFYIGNhbGxzJzsKCQlpZiAoJGdlbiA9PT0gc2VsZjo6SldUX0dFTkVSQVRPUl9MT0dJTikgICRnZW5fZGVzYyA9ICdMb2dpbiAoIlJlbWVtYmVyIG1lIiknOwoJ'));
	@fwrite($fp, base64_decode('CWlmICgkZ2VuID09PSBzZWxmOjpKV1RfR0VORVJBVE9SX01BTlVBTCkgJGdlbl9kZXNjID0gJ01hbnVhbGx5IGNyZWF0ZWQnOwoKCQlPSURwbHVzOjpjb25maWcoKS0+cHJlcGFyZUNvbmZpZ0tleSgkY2ZnLCAnUmV2b2tlIHRpbWVzdGFtcCBvZiBhbGwgSldUIHRv'));
	@fwrite($fp, base64_decode('a2VucyBmb3IgJHN1YiB3aXRoIGdlbmVyYXRvciAkZ2VuICgkZ2VuX2Rlc2MpJywgJGJsX3RpbWUsIE9JRHBsdXNDb25maWc6OlBST1RFQ1RJT05fSElEREVOLCBmdW5jdGlvbigkdmFsdWUpIHt9KTsKCQlPSURwbHVzOjpjb25maWcoKS0+c2V0VmFsdWUoJGNmZywg'));
	@fwrite($fp, base64_decode('JGJsX3RpbWUpOwoJfQoKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gand0R2V0QmxhY2tsaXN0VGltZSgkZ2VuLCAkc3ViKSB7CgkJJGNmZyA9IHNlbGY6Omp3dEdldEJsYWNrbGlzdENvbmZpZ0tleSgkZ2VuLCAkc3ViKTsKCQlyZXR1cm4gT0lEcGx1czo6Y29uZmln'));
	@fwrite($fp, base64_decode('KCktPmdldFZhbHVlKCRjZmcsMCk7Cgl9CgoJcHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gand0U2VjdXJpdHlDaGVjaygkY29udGVudFByb3ZpZGVyKSB7CgkJLy8gQ2hlY2sgaWYgdGhlIHRva2VuIGlzIGludGVuZGVkIGZvciB1cwoJCWlmICgkY29udGVudFByb3Zp'));
	@fwrite($fp, base64_decode('ZGVyLT5nZXRWYWx1ZSgnYXVkJywnJykgIT09ICJodHRwOi8vb2lkcGx1cy5jb20iKSB7CgkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdUb2tlbiBoYXMgd3JvbmcgYXVkaWVuY2UnKSk7CgkJfQoJCSRnZW4gPSAkY29udGVudFByb3ZpZGVyLT5nZXRW'));
	@fwrite($fp, base64_decode('YWx1ZSgnb2lkcGx1c19nZW5lcmF0b3InLCAtMSk7CgoJCSRoYXNfYWRtaW4gPSAkY29udGVudFByb3ZpZGVyLT5pc0FkbWluTG9nZ2VkSW4oKTsKCQkkaGFzX3JhID0gJGNvbnRlbnRQcm92aWRlci0+cmFOdW1Mb2dnZWRJbigpID4gMDsKCgkJLy8gQ2hlY2sgaWYg'));
	@fwrite($fp, base64_decode('dGhlIHRva2VuIGdlbmVyYXRvciBpcyBhbGxvd2VkCgkJaWYgKCRnZW4gPT09IHNlbGY6OkpXVF9HRU5FUkFUT1JfQUpBWCkgewoJCQlpZiAoKCRoYXNfYWRtaW4pICYmICFPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdKV1RfQUxMT1dfQUpBWF9BRE1J'));
	@fwrite($fp, base64_decode('TicsIHRydWUpKSB7CgkJCQkvLyBHZW5lcmF0b3I6IHBsdWdpbnMvYWRtaW5QYWdlcy85MTBfYXV0b21hdGVkX2FqYXhfY2FsbHMvT0lEcGx1c1BhZ2VBZG1pbkF1dG9tYXRlZEFKQVhDYWxscy5jbGFzcy5waHAKCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9u'));
	@fwrite($fp, base64_decode('KF9MKCdUaGUgYWRtaW5pc3RyYXRvciBoYXMgZGlzYWJsZWQgdGhpcyBmZWF0dXJlLiAoQmFzZSBjb25maWd1cmF0aW9uIHNldHRpbmcgJTEpLicsJ0pXVF9BTExPV19BSkFYX0FETUlOJykpOwoJCQl9CgkJCWlmICgoJGhhc19yYSkgJiYgIU9JRHBsdXM6OmJhc2VD'));
	@fwrite($fp, base64_decode('b25maWcoKS0+Z2V0VmFsdWUoJ0pXVF9BTExPV19BSkFYX1VTRVInLCB0cnVlKSkgewoJCQkJLy8gR2VuZXJhdG9yOiBwbHVnaW5zL3JhUGFnZXMvOTEwX2F1dG9tYXRlZF9hamF4X2NhbGxzL09JRHBsdXNQYWdlUmFBdXRvbWF0ZWRBSkFYQ2FsbHMuY2xhc3MucGhw'));
	@fwrite($fp, base64_decode('CgkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnVGhlIGFkbWluaXN0cmF0b3IgaGFzIGRpc2FibGVkIHRoaXMgZmVhdHVyZS4gKEJhc2UgY29uZmlndXJhdGlvbiBzZXR0aW5nICUxKS4nLCdKV1RfQUxMT1dfQUpBWF9VU0VSJykpOwoJCQl9CgkJfQoJ'));
	@fwrite($fp, base64_decode('CWVsc2UgaWYgKCRnZW4gPT09IHNlbGY6OkpXVF9HRU5FUkFUT1JfTE9HSU4pIHsKCQkJLy8gVXNlZCBmb3IgZmVhdHVyZSAiUmVtZW1iZXIgbWUiICh1c2UgSldUIHRva2VuIGluIGEgY29va2llIGFzIGFsdGVybmF0aXZlIHRvIFBIUCBzZXNzaW9uKToKCQkJLy8g'));
	@fwrite($fp, base64_decode('LSBObyBQSFAgc2Vzc2lvbiB3aWxsIGJlIHVzZWQKCQkJLy8gLSBTZXNzaW9uIHdpbGwgbm90IGJlIGJvdW5kIHRvIElQIGFkZHJlc3MgKHRoZXJlZm9yZSwgeW91IGNhbiBzd2l0Y2ggYmV0d2VlbiBtb2JpbGUvV2lGaSBmb3IgZXhhbXBsZSkKCQkJLy8gLSBObyBz'));
	@fwrite($fp, base64_decode('ZXJ2ZXItc2lkZSBzZXNzaW9uIG5lZWRlZAoJCQlpZiAoKCRoYXNfYWRtaW4pICYmICFPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdKV1RfQUxMT1dfTE9HSU5fQURNSU4nLCB0cnVlKSkgewoJCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0wo'));
	@fwrite($fp, base64_decode('J1RoZSBhZG1pbmlzdHJhdG9yIGhhcyBkaXNhYmxlZCB0aGlzIGZlYXR1cmUuIChCYXNlIGNvbmZpZ3VyYXRpb24gc2V0dGluZyAlMSkuJywnSldUX0FMTE9XX0xPR0lOX0FETUlOJykpOwoJCQl9CgkJCWlmICgoJGhhc19yYSkgJiYgIU9JRHBsdXM6OmJhc2VDb25m'));
	@fwrite($fp, base64_decode('aWcoKS0+Z2V0VmFsdWUoJ0pXVF9BTExPV19MT0dJTl9VU0VSJywgdHJ1ZSkpIHsKCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdUaGUgYWRtaW5pc3RyYXRvciBoYXMgZGlzYWJsZWQgdGhpcyBmZWF0dXJlLiAoQmFzZSBjb25maWd1cmF0aW9uIHNl'));
	@fwrite($fp, base64_decode('dHRpbmcgJTEpLicsJ0pXVF9BTExPV19MT0dJTl9VU0VSJykpOwoJCQl9CgkJfQoJCWVsc2UgaWYgKCRnZW4gPT09IHNlbGY6OkpXVF9HRU5FUkFUT1JfTUFOVUFMKSB7CgkJCS8vIEdlbmVyYXRvciAyIGFyZSAiaGFuZC1jcmFmdGVkIiB0b2tlbnMKCQkJaWYgKCFP'));
	@fwrite($fp, base64_decode('SURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdKV1RfQUxMT1dfTUFOVUFMJywgZmFsc2UpKSB7CgkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnVGhlIGFkbWluaXN0cmF0b3IgaGFzIGRpc2FibGVkIHRoaXMgZmVhdHVyZS4gKEJhc2UgY29u'));
	@fwrite($fp, base64_decode('ZmlndXJhdGlvbiBzZXR0aW5nICUxKS4nLCdKV1RfQUxMT1dfTUFOVUFMJykpOwoJCQl9CgkJfSBlbHNlIHsKCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ1Rva2VuIGdlbmVyYXRvciAlMSBub3QgcmVjb2duaXplZCcsJGdlbikpOwoJCX0KCgkJLy8g'));
	@fwrite($fp, base64_decode('TWFrZSBzdXJlIHRoYXQgdGhlIElBVCAoaXNzdWVkIGF0IHRpbWUpIGlzbid0IGluIGEgYmxhY2tsaXN0ZWQgdGltZWZyYW1lCgkJLy8gV2hlbiBhbiB1c2VyIGJlbGlldmVzIHRoYXQgYSB0b2tlbiB3YXMgY29tcHJvbWlzZWQsIHRoZW4gdGhleSBjYW4gYmxhY2ts'));
	@fwrite($fp, base64_decode('aXN0IHRoZSB0b2tlbnMgaWRlbnRpZmllZCBieSB0aGVpciAiaWF0IiAoIklzc3VlZCBhdCIpIHByb3BlcnR5CgkJLy8gV2hlbiBhIHVzZXIgbG9ncyBvdXQgb2YgYSAicmVtZW1iZXIgbWUiIHNlc3Npb24sIHRoZSBKV1QgdG9rZW4gd2lsbCBiZSBibGFja2xpc3Rl'));
	@fwrite($fp, base64_decode('ZCBhcyB3ZWxsCgkJLy8gU21hbGwgc2lkZSBlZmZlY3Q6IEFsbCAicmVtZW1iZXIgbWUiIHNlc3Npb25zIG9mIHRoYXQgdXNlciB3aWxsIGJlIHJldm9rZWQgdGhlbgoJCSRzdWJsaXN0ID0gJGNvbnRlbnRQcm92aWRlci0+bG9nZ2VkSW5SYUxpc3QoKTsKCQlmb3Jl'));
	@fwrite($fp, base64_decode('YWNoICgkc3VibGlzdCBhcyAmJHN1YikgewoJCQkkc3ViID0gJHN1Yi0+cmFFbWFpbCgpOwoJCX0KCQlpZiAoJGhhc19hZG1pbikgJHN1Ymxpc3RbXSA9ICdhZG1pbic7CgkJZm9yZWFjaCAoJHN1Ymxpc3QgYXMgJHN1YikgewoJCQkkYmxfdGltZSA9IHNlbGY6Omp3'));
	@fwrite($fp, base64_decode('dEdldEJsYWNrbGlzdFRpbWUoJGdlbiwgJHN1Yik7CgkJCSRpYXQgPSAkY29udGVudFByb3ZpZGVyLT5nZXRWYWx1ZSgnaWF0JywwKTsKCQkJaWYgKCRpYXQgPD0gJGJsX3RpbWUpIHsKCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdUaGUgSldUIHRv'));
	@fwrite($fp, base64_decode('a2VuIHdhcyBibGFja2xpc3RlZCBvbiAlMS4gUGxlYXNlIGdlbmVyYXRlIGEgbmV3IG9uZScsZGF0ZSgnZCBGIFksIEg6aTpzJywkYmxfdGltZSkpKTsKCQkJfQoJCX0KCgkJLy8gT3B0aW9uYWwgZmVhdHVyZTogTGltaXQgdGhlIEpXVCB0byBhIHNwZWNpZmljIElQ'));
	@fwrite($fp, base64_decode('IGFkZHJlc3MKCQkvLyBDdXJyZW50bHkgbm90IHVzZWQgaW4gT0lEcGx1cwoJCSRpcCA9ICRjb250ZW50UHJvdmlkZXItPmdldFZhbHVlKCdpcCcsJycpOwoJCWlmICgkaXAgIT09ICcnKSB7CgkJCWlmIChpc3NldCgkX1NFUlZFUlsnUkVNT1RFX0FERFInXSkgJiYg'));
	@fwrite($fp, base64_decode('KCRpcCAhPT0gJF9TRVJWRVJbJ1JFTU9URV9BRERSJ10pKSB7CgkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnWW91ciBJUCBhZGRyZXNzIGlzIG5vdCBhbGxvd2VkIHRvIHVzZSB0aGlzIHRva2VuJykpOwoJCQl9CgkJfQoKCQkvLyBDaGVja3Mgd2hp'));
	@fwrite($fp, base64_decode('Y2ggYXJlIGRlcGVuZGVudCBvbiB0aGUgZ2VuZXJhdG9yCgkJaWYgKCRnZW4gPT09IHNlbGY6OkpXVF9HRU5FUkFUT1JfTE9HSU4pIHsKCQkJaWYgKCFpc3NldCgkX0NPT0tJRVtzZWxmOjpDT09LSUVfTkFNRV0pKSB7CgkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2Vw'));
	@fwrite($fp, base64_decode('dGlvbihfTCgnVGhpcyBraW5kIG9mIEpXVCB0b2tlbiBjYW4gb25seSBiZSB1c2VkIHdpdGggdGhlICUxIHJlcXVlc3QgdHlwZScsJ0NPT0tJRScpKTsKCQkJfQoJCX0KCQlpZiAoJGdlbiA9PT0gc2VsZjo6SldUX0dFTkVSQVRPUl9BSkFYKSB7CgkJCWlmICghaXNz'));
	@fwrite($fp, base64_decode('ZXQoJF9HRVRbc2VsZjo6Q09PS0lFX05BTUVdKSAmJiAhaXNzZXQoJF9QT1NUW3NlbGY6OkNPT0tJRV9OQU1FXSkpIHsKCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdUaGlzIGtpbmQgb2YgSldUIHRva2VuIGNhbiBvbmx5IGJlIHVzZWQgd2l0aCB0'));
	@fwrite($fp, base64_decode('aGUgJTEgcmVxdWVzdCB0eXBlJywnR0VUL1BPU1QnKSk7CgkJCX0KCQkJaWYgKGlzc2V0KCRfU0VSVkVSWydTQ1JJUFRfRklMRU5BTUUnXSkgJiYgKHN0cnRvbG93ZXIoYmFzZW5hbWUoJF9TRVJWRVJbJ1NDUklQVF9GSUxFTkFNRSddKSkgIT09ICdhamF4LnBocCcp'));
	@fwrite($fp, base64_decode('KSB7CgkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnVGhpcyBraW5kIG9mIEpXVCB0b2tlbiBjYW4gb25seSBiZSB1c2VkIGluIGFqYXgucGhwJykpOwoJCQl9CgkJfQoJfQoKCS8vIE92ZXJyaWRlIGFic3RyYWN0IGZ1bmN0aW9ucwoKCXB1YmxpYyBm'));
	@fwrite($fp, base64_decode('dW5jdGlvbiBhY3RpdmF0ZSgpIHsKCQkvLyBTZW5kIGNvb2tpZSBhdCB0aGUgZW5kIG9mIHRoZSBIVFRQIHJlcXVlc3QsIGluIGNhc2UgdGhlcmUgYXJlIG11bHRpcGxlIGFjdGl2YXRlKCkgY2FsbHMKCQlyZWdpc3Rlcl9zaHV0ZG93bl9mdW5jdGlvbihhcnJheSgk'));
	@fwrite($fp, base64_decode('dGhpcywnYWN0aXZhdGVOb3cnKSk7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGFjdGl2YXRlTm93KCkgewoJCSR0b2tlbiA9ICR0aGlzLT5nZXRKV1RUb2tlbigpOwoJCSRleHAgPSAkdGhpcy0+Z2V0VmFsdWUoJ2V4cCcsMCk7CgkJT0lEcGx1czo6Y29va2llVXRpbHMo'));
	@fwrite($fp, base64_decode('KS0+c2V0Y29va2llKHNlbGY6OkNPT0tJRV9OQU1FLCAkdG9rZW4sICRleHAsIGZhbHNlKTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZGVzdHJveVNlc3Npb24oKSB7CgkJT0lEcGx1czo6Y29va2llVXRpbHMoKS0+dW5zZXRjb29raWUoc2VsZjo6Q09PS0lFX05BTUUp'));
	@fwrite($fp, base64_decode('OwoJfQoKCXB1YmxpYyBmdW5jdGlvbiByYUxvZ291dCgkZW1haWwpIHsKCQkkZ2VuID0gJHRoaXMtPmdldFZhbHVlKCdvaWRwbHVzX2dlbmVyYXRvcicsIC0xKTsKCQlpZiAoJGdlbiA+PSAwKSBzZWxmOjpqd3RCbGFja2xpc3QoJGdlbiwgJGVtYWlsKTsKCQlwYXJl'));
	@fwrite($fp, base64_decode('bnQ6OnJhTG9nb3V0KCRlbWFpbCk7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHJhTG9nb3V0RXgoJGVtYWlsLCAmJGxvZ2luZm8pIHsKCQkkdGhpcy0+cmFMb2dvdXQoJGVtYWlsKTsKCQkkbG9naW5mbyA9ICdmcm9tIEpXVCBzZXNzaW9uJzsKCX0KCglwdWJsaWMgZnVu'));
	@fwrite($fp, base64_decode('Y3Rpb24gYWRtaW5Mb2dvdXQoKSB7CgkJJGdlbiA9ICR0aGlzLT5nZXRWYWx1ZSgnb2lkcGx1c19nZW5lcmF0b3InLCAtMSk7CgkJaWYgKCRnZW4gPj0gMCkgc2VsZjo6and0QmxhY2tsaXN0KCRnZW4sICdhZG1pbicpOwoJCXBhcmVudDo6YWRtaW5Mb2dvdXQoKTsK'));
	@fwrite($fp, base64_decode('CX0KCglwdWJsaWMgZnVuY3Rpb24gYWRtaW5Mb2dvdXRFeCgmJGxvZ2luZm8pIHsKCQkkdGhpcy0+YWRtaW5Mb2dvdXQoKTsKCQkkbG9naW5mbyA9ICdmcm9tIEpXVCBzZXNzaW9uJzsKCX0KCglwcml2YXRlIHN0YXRpYyAkY29udGVudFByb3ZpZGVyID0gbnVsbDsK'));
	@fwrite($fp, base64_decode('CXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0QWN0aXZlUHJvdmlkZXIoKSB7CgkJaWYgKCFzZWxmOjokY29udGVudFByb3ZpZGVyKSB7CgkJCSRqd3QgPSAnJzsKCQkJaWYgKGlzc2V0KCRfQ09PS0lFW3NlbGY6OkNPT0tJRV9OQU1FXSkpICRqd3QgPSAkX0NPT0tJ'));
	@fwrite($fp, base64_decode('RVtzZWxmOjpDT09LSUVfTkFNRV07CgkJCWlmIChpc3NldCgkX1BPU1Rbc2VsZjo6Q09PS0lFX05BTUVdKSkgICAkand0ID0gJF9QT1NUW3NlbGY6OkNPT0tJRV9OQU1FXTsKCQkJaWYgKGlzc2V0KCRfR0VUW3NlbGY6OkNPT0tJRV9OQU1FXSkpICAgICRqd3QgPSAk'));
	@fwrite($fp, base64_decode('X0dFVFtzZWxmOjpDT09LSUVfTkFNRV07CgoJCQlpZiAoIWVtcHR5KCRqd3QpKSB7CgkJCQkkdG1wID0gbmV3IE9JRHBsdXNBdXRoQ29udGVudFN0b3JlSldUKCk7CgoJCQkJdHJ5IHsKCQkJCQkvLyBEZWNvZGUgdGhlIEpXVC4gSW4gdGhpcyBzdGVwLCB0aGUgc2ln'));
	@fwrite($fp, base64_decode('bmF0dXJlIGFzIHdlbGwgYXMgRVhQL05CRiB0aW1lcyB3aWxsIGJlIGNoZWNrZWQKCQkJCQkkdG1wLT5sb2FkSldUKCRqd3QpOwoKCQkJCQkvLyBEbyB2YXJpb3VzIGNoZWNrcyBpZiB0aGUgdG9rZW4gaXMgYWxsb3dlZCBhbmQgbm90IGJsYWNrbGlzdGVkCgkJCQkJ'));
	@fwrite($fp, base64_decode('c2VsZjo6and0U2VjdXJpdHlDaGVjaygkdG1wKTsKCQkJCX0gY2F0Y2ggKEV4Y2VwdGlvbiAkZSkgewoJCQkJCWlmIChpc3NldCgkX0dFVFtzZWxmOjpDT09LSUVfTkFNRV0pIHx8IGlzc2V0KCRfUE9TVFtzZWxmOjpDT09LSUVfTkFNRV0pKSB7CgkJCQkJCS8vIE1v'));
	@fwrite($fp, base64_decode('c3QgbGlrZWx5IGFuIEFKQVggcmVxdWVzdC4gV2UgY2FuIHRocm93IGFuIEV4Y2VwdGlvbgoJCQkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnVGhlIEpXVCB0b2tlbiB3YXMgcmVqZWN0ZWQ6ICUxJywkZS0+Z2V0TWVzc2FnZSgpKSk7CgkJCQkJfSBl'));
	@fwrite($fp, base64_decode('bHNlIHsKCQkJCQkJLy8gTW9zdCBsaWtlbHkgYW4gZXhwaXJlZCBDb29raWUvTG9naW4gc2Vzc2lvbi4gV2UgbXVzdCBub3QgdGhyb3cgYW4gRXhjZXB0aW9uLCBvdGhlcndpc2Ugd2Ugd2lsbCBicmVhayBqc1RyZWUKCQkJCQkJT0lEcGx1czo6Y29va2llVXRpbHMo'));
	@fwrite($fp, base64_decode('KS0+dW5zZXRjb29raWUoc2VsZjo6Q09PS0lFX05BTUUpOwoJCQkJCQlyZXR1cm4gbnVsbDsKCQkJCQl9CgkJCQl9CgoJCQkJc2VsZjo6JGNvbnRlbnRQcm92aWRlciA9ICR0bXA7CgkJCX0KCQl9CgoJCXJldHVybiBzZWxmOjokY29udGVudFByb3ZpZGVyOwoJfQoK'));
	@fwrite($fp, base64_decode('CXB1YmxpYyBmdW5jdGlvbiByYUxvZ2luRXgoJGVtYWlsLCAmJGxvZ2luZm8pIHsKCQlpZiAoaXNfbnVsbChzZWxmOjpnZXRBY3RpdmVQcm92aWRlcigpKSkgewoJCQkkdGhpcy0+cmFMb2dpbigkZW1haWwpOwoJCQkkbG9naW5mbyA9ICdpbnRvIG5ldyBKV1Qgc2Vz'));
	@fwrite($fp, base64_decode('c2lvbic7CgkJCXNlbGY6OiRjb250ZW50UHJvdmlkZXIgPSAkdGhpczsKCQl9IGVsc2UgewoJCQkkZ2VuID0gJHRoaXMtPmdldFZhbHVlKCdvaWRwbHVzX2dlbmVyYXRvcicsLTEpOwoJCQlzd2l0Y2ggKCRnZW4pIHsKCQkJCWNhc2UgT0lEcGx1c0F1dGhDb250ZW50'));
	@fwrite($fp, base64_decode('U3RvcmVKV1Q6OkpXVF9HRU5FUkFUT1JfQUpBWCA6CgkJCQljYXNlIE9JRHBsdXNBdXRoQ29udGVudFN0b3JlSldUOjpKV1RfR0VORVJBVE9SX01BTlVBTCA6CgkJCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ1RoaXMga2luZCBvZiBKV1QgdG9rZW4g'));
	@fwrite($fp, base64_decode('Y2Fubm90IGJlIGFsdGVyZWQuIFRoZXJlZm9yZSB5b3UgY2Fubm90IGRvIHRoaXMgYWN0aW9uLicpKTsKCQkJCWNhc2UgT0lEcGx1c0F1dGhDb250ZW50U3RvcmVKV1Q6OkpXVF9HRU5FUkFUT1JfTE9HSU4gOgoJCQkJCWlmICghT0lEcGx1czo6YmFzZUNvbmZpZygp'));
	@fwrite($fp, base64_decode('LT5nZXRWYWx1ZSgnSldUX0FMTE9XX0xPR0lOX1VTRVInLCB0cnVlKSkgewoJCQkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnWW91IGNhbm5vdCBhZGQgdGhpcyBsb2dpbiBjcmVkZW50aWFsIHRvIHlvdXIgZXhpc3RpbmcgInJlbWVtYmVyIG1lIiBz'));
	@fwrite($fp, base64_decode('ZXNzaW9uLiBZb3UgbmVlZCB0byBsb2ctb3V0IGZpcnN0LicpKTsKCQkJCQl9CgkJCQkJYnJlYWs7CgkJCQlkZWZhdWx0OgoJCQkJCWFzc2VydChmYWxzZSk7IC8vIFRoaXMgY2Fubm90IGhhcHBlbiBiZWNhdXNlIGp3dFNlY3VyaXR5Q2hlY2sgd2lsbCBjaGVjayBm'));
	@fwrite($fp, base64_decode('b3IgdW5rbm93biBnZW5lcmF0b3JzCgkJCQkJYnJlYWs7CgkJCX0KCQkJJHRoaXMtPnJhTG9naW4oJGVtYWlsKTsKCQkJJGxvZ2luZm8gPSAnaW50byBleGlzdGluZyBKV1Qgc2Vzc2lvbic7CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBhZG1pbkxvZ2luRXgoJiRs'));
	@fwrite($fp, base64_decode('b2dpbmZvKSB7CgkJaWYgKGlzX251bGwoc2VsZjo6Z2V0QWN0aXZlUHJvdmlkZXIoKSkpIHsKCQkJJHRoaXMtPmFkbWluTG9naW4oKTsKCQkJJGxvZ2luZm8gPSAnaW50byBuZXcgSldUIHNlc3Npb24nOwoJCQlzZWxmOjokY29udGVudFByb3ZpZGVyID0gJHRoaXM7'));
	@fwrite($fp, base64_decode('CgkJfSBlbHNlIHsKCQkJJGdlbiA9ICR0aGlzLT5nZXRWYWx1ZSgnb2lkcGx1c19nZW5lcmF0b3InLC0xKTsKCQkJc3dpdGNoICgkZ2VuKSB7CgkJCQljYXNlIE9JRHBsdXNBdXRoQ29udGVudFN0b3JlSldUOjpKV1RfR0VORVJBVE9SX0FKQVggOgoJCQkJY2FzZSBP'));
	@fwrite($fp, base64_decode('SURwbHVzQXV0aENvbnRlbnRTdG9yZUpXVDo6SldUX0dFTkVSQVRPUl9NQU5VQUwgOgoJCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdUaGlzIGtpbmQgb2YgSldUIHRva2VuIGNhbm5vdCBiZSBhbHRlcmVkLiBUaGVyZWZvcmUgeW91IGNhbm5vdCBk'));
	@fwrite($fp, base64_decode('byB0aGlzIGFjdGlvbi4nKSk7CgkJCQljYXNlIE9JRHBsdXNBdXRoQ29udGVudFN0b3JlSldUOjpKV1RfR0VORVJBVE9SX0xPR0lOIDoKCQkJCQlpZiAoIU9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ0pXVF9BTExPV19MT0dJTl9BRE1JTicsIHRydWUp'));
	@fwrite($fp, base64_decode('KSB7CgkJCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdZb3UgY2Fubm90IGFkZCB0aGlzIGxvZ2luIGNyZWRlbnRpYWwgdG8geW91ciBleGlzdGluZyAicmVtZW1iZXIgbWUiIHNlc3Npb24uIFlvdSBuZWVkIHRvIGxvZy1vdXQgZmlyc3QuJykpOwoJ'));
	@fwrite($fp, base64_decode('CQkJCX0KCQkJCQlicmVhazsKCQkJCWRlZmF1bHQ6CgkJCQkJYXNzZXJ0KGZhbHNlKTsgLy8gVGhpcyBjYW5ub3QgaGFwcGVuIGJlY2F1c2Ugand0U2VjdXJpdHlDaGVjayB3aWxsIGNoZWNrIGZvciB1bmtub3duIGdlbmVyYXRvcnMKCQkJCQlicmVhazsKCQkJfQoJ'));
	@fwrite($fp, base64_decode('CQkkdGhpcy0+YWRtaW5Mb2dpbigpOwoJCQkkbG9naW5mbyA9ICdpbnRvIGV4aXN0aW5nIEpXVCBzZXNzaW9uJzsKCQl9Cgl9CgoJLy8gSW5kaXZpZHVhbCBmdW5jdGlvbnMKCglwdWJsaWMgZnVuY3Rpb24gbG9hZEpXVCgkand0KSB7CgkJXEZpcmViYXNlXEpXVFxK'));
	@fwrite($fp, base64_decode('V1Q6OiRsZWV3YXkgPSA2MDsgLy8gbGVld2F5IGluIHNlY29uZHMKCQlpZiAoT0lEcGx1czo6Z2V0UGtpU3RhdHVzKCkpIHsKCQkJJHB1YktleSA9IE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgnb2lkcGx1c19wdWJsaWNfa2V5Jyk7CgkJCSR0aGlzLT5jb250'));
	@fwrite($fp, base64_decode('ZW50ID0gKGFycmF5KSBcRmlyZWJhc2VcSldUXEpXVDo6ZGVjb2RlKCRqd3QsICRwdWJLZXksIGFycmF5KCdSUzI1NicsICdSUzM4NCcsICdSUzUxMicpKTsKCQl9IGVsc2UgewoJCQkka2V5ID0gT0lEcGx1czo6YmFzZUNvbmZpZygpLT5nZXRWYWx1ZSgnU0VSVkVS'));
	@fwrite($fp, base64_decode('X1NFQ1JFVCcsICcnKS4nL09JRHBsdXNBdXRoQ29udGVudFN0b3JlSldUJzsKCQkJJGtleSA9IGhhc2hfcGJrZGYyKCdzaGE1MTInLCAka2V5LCAnJywgMTAwMDAsIDY0LyoyNTZiaXQqLywgZmFsc2UpOwoJCQkkdGhpcy0+Y29udGVudCA9IChhcnJheSkgXEZpcmVi'));
	@fwrite($fp, base64_decode('YXNlXEpXVFxKV1Q6OmRlY29kZSgkand0LCAka2V5LCBhcnJheSgnSFMyNTYnLCAnSFMzODQnLCAnSFM1MTInKSk7CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXRKV1RUb2tlbigpIHsKCQkkcGF5bG9hZCA9ICR0aGlzLT5jb250ZW50OwoJCSRwYXlsb2FkWyJp'));
	@fwrite($fp, base64_decode('c3MiXSA9ICJodHRwOi8vb2lkcGx1cy5jb20iOwoJCSRwYXlsb2FkWyJhdWQiXSA9ICJodHRwOi8vb2lkcGx1cy5jb20iOwoJCSRwYXlsb2FkWyJqdGkiXSA9IGdlbl91dWlkKCk7CgkJJHBheWxvYWRbImlhdCJdID0gdGltZSgpOwoKCQlpZiAoT0lEcGx1czo6Z2V0'));
	@fwrite($fp, base64_decode('UGtpU3RhdHVzKCkpIHsKCQkJJHByaXZLZXkgPSBPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ29pZHBsdXNfcHJpdmF0ZV9rZXknKTsKCQkJcmV0dXJuIFxGaXJlYmFzZVxKV1RcSldUOjplbmNvZGUoJHBheWxvYWQsICRwcml2S2V5LCAnUlM1MTInKTsKCQl9'));
	@fwrite($fp, base64_decode('IGVsc2UgewoJCQkka2V5ID0gT0lEcGx1czo6YmFzZUNvbmZpZygpLT5nZXRWYWx1ZSgnU0VSVkVSX1NFQ1JFVCcsICcnKS4nL09JRHBsdXNBdXRoQ29udGVudFN0b3JlSldUJzsKCQkJJGtleSA9IGhhc2hfcGJrZGYyKCdzaGE1MTInLCAka2V5LCAnJywgMTAwMDAs'));
	@fwrite($fp, base64_decode('IDY0LyoyNTZiaXQqLywgZmFsc2UpOwoJCQlyZXR1cm4gXEZpcmViYXNlXEpXVFxKV1Q6OmVuY29kZSgkcGF5bG9hZCwgJGtleSwgJ0hTNTEyJyk7CgkJfQoJfQoKfQo='));
	@fclose($fp);
}
if (!is_file('includes/classes/OIDplusAuthContentStoreJWT.class.php')) {
	warn('File has vanished! Will re-create it: includes/classes/OIDplusAuthContentStoreJWT.class.php');
	writefile_2();
	if (!is_file('includes/classes/OIDplusAuthContentStoreJWT.class.php')) {
		warn('File cannot be created (not existing): includes/classes/OIDplusAuthContentStoreJWT.class.php');
	} else if (sha1_file('includes/classes/OIDplusAuthContentStoreJWT.class.php') != '80f9e72549addc45b8e717ed7bad3d5bc8f0b5dd') {
		warn('File cannot be created (checksum mismatch): includes/classes/OIDplusAuthContentStoreJWT.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/classes/OIDplusAuthContentStoreJWT.class.php', 0644)) {
		warn('Could not change file permissions of includes/classes/OIDplusAuthContentStoreJWT.class.php');
	}
} else {
	if (@sha1_file('includes/classes/OIDplusAuthContentStoreJWT.class.php') !== '80f9e72549addc45b8e717ed7bad3d5bc8f0b5dd') {
		if (@sha1_file('includes/classes/OIDplusAuthContentStoreJWT.class.php') !== 'c0d11fe97986fc77d9b66e9c23fe897123cd46ed') {
			warn('File was modified. Will overwrite the changes now: includes/classes/OIDplusAuthContentStoreJWT.class.php');
			$tmp = pathinfo('includes/classes/OIDplusAuthContentStoreJWT.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/classes/OIDplusAuthContentStoreJWT.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('includes/classes/OIDplusAuthContentStoreJWT.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_2();
		if (@sha1_file('includes/classes/OIDplusAuthContentStoreJWT.class.php') !== '80f9e72549addc45b8e717ed7bad3d5bc8f0b5dd') {
			warn('File cannot be written (checksum mismatch): includes/classes/OIDplusAuthContentStoreJWT.class.php');
		}
	}
}

// Files different: includes/classes/OIDplusAuthUtils.class.php
function writefile_3() {
	@$fp = fopen('includes/classes/OIDplusAuthUtils.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMSBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgppZiAoIWRlZmluZWQoJ0lOU0lERV9PSURQTFVTJykpIGRpZSgpOwoKY2xhc3MgT0lEcGx1c0F1dGhVdGlscyB7CgoJLy8gVXNlZnVsIGZ1bmN0aW9ucwoKCXB1YmxpYyBzdGF0aWMgZnVu'));
	@fwrite($fp, base64_decode('Y3Rpb24gZ2V0UmFuZG9tQnl0ZXMoJGxlbikgewoJCWlmIChmdW5jdGlvbl9leGlzdHMoJ29wZW5zc2xfcmFuZG9tX3BzZXVkb19ieXRlcycpKSB7CgkJCSRhID0gb3BlbnNzbF9yYW5kb21fcHNldWRvX2J5dGVzKCRsZW4pOwoJCQlpZiAoJGEpIHJldHVybiAkYTsK'));
	@fwrite($fp, base64_decode('CQl9CgoJCWlmIChmdW5jdGlvbl9leGlzdHMoJ21jcnlwdF9jcmVhdGVfaXYnKSkgewoJCQkkYSA9IGJpbjJoZXgobWNyeXB0X2NyZWF0ZV9pdigkbGVuLCBNQ1JZUFRfREVWX1VSQU5ET00pKTsKCQkJaWYgKCRhKSByZXR1cm4gJGE7CgkJfQoKCQlpZiAoZnVuY3Rp'));
	@fwrite($fp, base64_decode('b25fZXhpc3RzKCdyYW5kb21fYnl0ZXMnKSkgewoJCQkkYSA9IHJhbmRvbV9ieXRlcygkbGVuKTsKCQkJaWYgKCRhKSByZXR1cm4gJGE7CgkJfQoKCQkvLyBGYWxsYmFjayB0byBub24tc2VjdXJlIFJORwoJCSRhID0gJyc7CgkJd2hpbGUgKHN0cmxlbigkYSkgPCAk'));
	@fwrite($fp, base64_decode('bGVuKjIpIHsKCQkJJGEgLj0gc2hhMSh1bmlxaWQoKHN0cmluZyltdF9yYW5kKCksIHRydWUpKTsKCQl9CgkJJGEgPSBzdWJzdHIoJGEsIDAsICRsZW4qMik7CgkJcmV0dXJuIGhleDJiaW4oJGEpOwoJfQoKCXByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIHJhUGVwcGVy'));
	@fwrite($fp, base64_decode('UHJvY2Vzc2luZyhzdHJpbmcgJHBhc3N3b3JkKTogc3RyaW5nIHsKCQkvLyBBZGRpdGlvbmFsIGZlYXR1cmU6IFBlcHBlcgoJCS8vIFRoZSBwZXBwZXIgaXMgc3RvcmVkIGluc2lkZSB0aGUgYmFzZSBjb25maWd1cmF0aW9uIGZpbGUKCQkvLyBJdCBwcmV2ZW50cyB0'));
	@fwrite($fp, base64_decode('aGF0IGFuIGF0dGFja2VyIHdpdGggU1FMIHdyaXRlIHJpZ2h0cyBjYW4KCQkvLyBjcmVhdGUgYWNjb3VudHMuCgkJLy8gQVRURU5USU9OISEhIElmIGEgcGVwcGVyIGlzIHVzZWQsIHRoZW4gdGhlCgkJLy8gaGFzaGVzIGFyZSBib3VuZCB0byB0aGF0IHBlcHBlci4g'));
	@fwrite($fp, base64_decode('SWYgeW91IGNoYW5nZSB0aGUgcGVwcGVyLAoJCS8vIHRoZW4gQUxMIHBhc3N3b3JkcyBvZiBSQXMgYmVjb21lIElOVkFMSUQhCgkJJHBlcHBlciA9IE9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ1JBX1BBU1NXT1JEX1BFUFBFUicsJycpOwoJCWlmICgk'));
	@fwrite($fp, base64_decode('cGVwcGVyICE9PSAnJykgewoJCQkvLyBzaGE1MTIgd29ya3Mgd2l0aCBQSFAgNy4wCgkJCSRobWFjID0gaGFzaF9obWFjKCdzaGE1MTInLCAkcGFzc3dvcmQsICRwZXBwZXIpOwoJCQlpZiAoJGhtYWMgPT09IGZhbHNlKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlv'));
	@fwrite($fp, base64_decode('bihfTCgnSE1BQyBmYWlsZWQnKSk7IC8qKiBAcGhwc3Rhbi1pZ25vcmUtbGluZSAqLwoJCQlyZXR1cm4gJGhtYWM7CgkJfSBlbHNlIHsKCQkJcmV0dXJuICRwYXNzd29yZDsKCQl9Cgl9CgoJLy8gQ29udGVudCBwcm92aWRlcgoKCXB1YmxpYyBmdW5jdGlvbiBnZXRB'));
	@fwrite($fp, base64_decode('dXRoTWV0aG9kKCkgewoJCSRhY3MgPSAkdGhpcy0+Z2V0QXV0aENvbnRlbnRTdG9yZSgpOwoJCWlmIChpc19udWxsKCRhY3MpKSByZXR1cm4gJ251bGwnOwoJCXJldHVybiBnZXRfY2xhc3MoJGFjcyk7Cgl9CgoJcHJvdGVjdGVkIGZ1bmN0aW9uIGdldEF1dGhDb250'));
	@fwrite($fp, base64_decode('ZW50U3RvcmUoKSB7CgkJLy8gTG9nZ2VkIGluIHZpYSBKV1QKCQkkdG1wID0gT0lEcGx1c0F1dGhDb250ZW50U3RvcmVKV1Q6OmdldEFjdGl2ZVByb3ZpZGVyKCk7CgkJaWYgKCR0bXApIHJldHVybiAkdG1wOwoKCQkvLyBOb3JtYWwgbG9naW4gdmlhIHdlYi1icm93'));
	@fwrite($fp, base64_decode('c2VyCgkJLy8gQ29va2llIHdpbGwgb25seSBiZSBjcmVhdGVkIG9uY2UgY29udGVudCBpcyBzdG9yZWQKCQkkdG1wID0gT0lEcGx1c0F1dGhDb250ZW50U3RvcmVTZXNzaW9uOjpnZXRBY3RpdmVQcm92aWRlcigpOwoJCWlmICgkdG1wKSByZXR1cm4gJHRtcDsKCgkJ'));
	@fwrite($fp, base64_decode('Ly8gTm8gYWN0aXZlIHNlc3Npb24gYW5kIG5vIEpXVCB0b2tlbiBhdmFpbGFibGUuIFVzZXIgaXMgbm90IGxvZ2dlZCBpbi4KCQlyZXR1cm4gbnVsbDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZ2V0RXh0ZW5kZWRBdHRyaWJ1dGUoJG5hbWUsICRkZWZhdWx0PU5VTEwp'));
	@fwrite($fp, base64_decode('IHsKCQkkYWNzID0gJHRoaXMtPmdldEF1dGhDb250ZW50U3RvcmUoKTsKCQlpZiAoaXNfbnVsbCgkYWNzKSkgcmV0dXJuICRkZWZhdWx0OwoJCXJldHVybiAkYWNzLT5nZXRWYWx1ZSgkbmFtZSwgJGRlZmF1bHQpOwoJfQoKCS8vIFJBIGF1dGhlbnRpY2F0aW9uIGZ1'));
	@fwrite($fp, base64_decode('bmN0aW9ucwoKCXB1YmxpYyBmdW5jdGlvbiByYUxvZ2luKCRlbWFpbCkgewoJCSRhY3MgPSAkdGhpcy0+Z2V0QXV0aENvbnRlbnRTdG9yZSgpOwoJCWlmIChpc19udWxsKCRhY3MpKSByZXR1cm47CgkJcmV0dXJuICRhY3MtPnJhTG9naW4oJGVtYWlsKTsKCX0KCglw'));
	@fwrite($fp, base64_decode('dWJsaWMgZnVuY3Rpb24gcmFMb2dvdXQoJGVtYWlsKSB7CgkJJGFjcyA9ICR0aGlzLT5nZXRBdXRoQ29udGVudFN0b3JlKCk7CgkJaWYgKGlzX251bGwoJGFjcykpIHJldHVybjsKCQlyZXR1cm4gJGFjcy0+cmFMb2dvdXQoJGVtYWlsKTsKCX0KCglwdWJsaWMgZnVu'));
	@fwrite($fp, base64_decode('Y3Rpb24gcmFDaGVja1Bhc3N3b3JkKCRyYV9lbWFpbCwgJHBhc3N3b3JkKSB7CgkJJHJhID0gbmV3IE9JRHBsdXNSQSgkcmFfZW1haWwpOwoKCQkvLyBHZXQgUkEgaW5mbyBmcm9tIFJBCgkJJGF1dGhJbmZvID0gJHJhLT5nZXRBdXRoSW5mbygpOwoJCWlmICghJGF1'));
	@fwrite($fp, base64_decode('dGhJbmZvKSByZXR1cm4gZmFsc2U7IC8vIHVzZXIgbm90IGZvdW5kCgoJCS8vIEFzayBwbHVnaW5zIGlmIHRoZXkgY2FuIHZlcmlmeSB0aGlzIGhhc2gKCQkkcGx1Z2lucyA9IE9JRHBsdXM6OmdldEF1dGhQbHVnaW5zKCk7CgkJaWYgKGNvdW50KCRwbHVnaW5zKSA9'));
	@fwrite($fp, base64_decode('PSAwKSB7CgkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdObyBSQSBhdXRoZW50aWNhdGlvbiBwbHVnaW5zIGZvdW5kJykpOwoJCX0KCQlmb3JlYWNoICgkcGx1Z2lucyBhcyAkcGx1Z2luKSB7CgkJCWlmICgkcGx1Z2luLT52ZXJpZnkoJGF1dGhJbmZv'));
	@fwrite($fp, base64_decode('LCBzZWxmOjpyYVBlcHBlclByb2Nlc3NpbmcoJHBhc3N3b3JkKSkpIHJldHVybiB0cnVlOwoJCX0KCgkJcmV0dXJuIGZhbHNlOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiByYU51bUxvZ2dlZEluKCkgewoJCSRhY3MgPSAkdGhpcy0+Z2V0QXV0aENvbnRlbnRTdG9yZSgp'));
	@fwrite($fp, base64_decode('OwoJCWlmIChpc19udWxsKCRhY3MpKSByZXR1cm4gMDsKCQlyZXR1cm4gJGFjcy0+cmFOdW1Mb2dnZWRJbigpOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBsb2dnZWRJblJhTGlzdCgpIHsKCQlpZiAoJHRoaXMtPmZvcmNlQWxsTG9nZ2VkT3V0KCkpIHsKCQkJcmV0dXJu'));
	@fwrite($fp, base64_decode('IGFycmF5KCk7CgkJfSBlbHNlIHsKCQkJJGFjcyA9ICR0aGlzLT5nZXRBdXRoQ29udGVudFN0b3JlKCk7CgkJCWlmIChpc19udWxsKCRhY3MpKSByZXR1cm4gYXJyYXkoKTsKCQkJcmV0dXJuICRhY3MtPmxvZ2dlZEluUmFMaXN0KCk7CgkJfQoJfQoKCXB1YmxpYyBm'));
	@fwrite($fp, base64_decode('dW5jdGlvbiBpc1JhTG9nZ2VkSW4oJGVtYWlsKSB7CgkJJGFjcyA9ICR0aGlzLT5nZXRBdXRoQ29udGVudFN0b3JlKCk7CgkJaWYgKGlzX251bGwoJGFjcykpIHJldHVybiBmYWxzZTsKCQlyZXR1cm4gJGFjcy0+aXNSYUxvZ2dlZEluKCRlbWFpbCk7Cgl9CgoJLy8g'));
	@fwrite($fp, base64_decode('IkhpZ2ggbGV2ZWwiIGZ1bmN0aW9uIGluY2x1ZGluZyBsb2dnaW5nIGFuZCBjaGVja2luZyBmb3IgdmFsaWQgSldUIGFsdGVybmF0aW9ucwoJcHVibGljIGZ1bmN0aW9uIHJhTG9naW5FeCgkZW1haWwsICRyZW1lbWJlcl9tZSwgJG9yaWdpbj0nJykgewoJCSRsb2dp'));
	@fwrite($fp, base64_decode('bmZvID0gJyc7CgkJJGFjcyA9ICR0aGlzLT5nZXRBdXRoQ29udGVudFN0b3JlKCk7CgkJaWYgKCFpc19udWxsKCRhY3MpKSB7CgkJCSRhY3MtPnJhTG9naW5FeCgkZW1haWwsICRsb2dpbmZvKTsKCQkJJGFjcy0+YWN0aXZhdGUoKTsKCQl9IGVsc2UgewoJCQlpZiAo'));
	@fwrite($fp, base64_decode('JHJlbWVtYmVyX21lKSB7CgkJCQlpZiAoIU9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ0pXVF9BTExPV19MT0dJTl9VU0VSJywgdHJ1ZSkpIHsKCQkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnVGhlIGFkbWluaXN0cmF0b3IgaGFzIGRp'));
	@fwrite($fp, base64_decode('c2FibGVkIHRoaXMgZmVhdHVyZS4gKEJhc2UgY29uZmlndXJhdGlvbiBzZXR0aW5nICUxKS4nLCdKV1RfQUxMT1dfTE9HSU5fVVNFUicpKTsKCQkJCX0KCQkJCSR0dGwgPSBPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdKV1RfVFRMX0xPR0lOX1VTRVIn'));
	@fwrite($fp, base64_decode('LCAxMCozNjUqMjQqNjAqNjApOwoJCQkJJGF1dGhTaW11bGF0aW9uID0gbmV3IE9JRHBsdXNBdXRoQ29udGVudFN0b3JlSldUKCk7CgkJCQkkYXV0aFNpbXVsYXRpb24tPnJhTG9naW5FeCgkZW1haWwsICRsb2dpbmZvKTsKCQkJCSRhdXRoU2ltdWxhdGlvbi0+c2V0'));
	@fwrite($fp, base64_decode('VmFsdWUoJ29pZHBsdXNfZ2VuZXJhdG9yJywgT0lEcGx1c0F1dGhDb250ZW50U3RvcmVKV1Q6OkpXVF9HRU5FUkFUT1JfTE9HSU4pOwoJCQkJJGF1dGhTaW11bGF0aW9uLT5zZXRWYWx1ZSgnZXhwJywgdGltZSgpKyR0dGwpOyAvLyBKV1QgImV4cCIgYXR0cmlidXRl'));
	@fwrite($fp, base64_decode('CgkJCQkkYXV0aFNpbXVsYXRpb24tPmFjdGl2YXRlKCk7CgkJCX0gZWxzZSB7CgkJCQkkYXV0aFNpbXVsYXRpb24gPSBuZXcgT0lEcGx1c0F1dGhDb250ZW50U3RvcmVTZXNzaW9uKCk7CgkJCQkkYXV0aFNpbXVsYXRpb24tPnJhTG9naW5FeCgkZW1haWwsICRsb2dp'));
	@fwrite($fp, base64_decode('bmZvKTsKCQkJCSRhdXRoU2ltdWxhdGlvbi0+YWN0aXZhdGUoKTsKCQkJfQoJCX0KCQkkbG9nbXNnID0gIlJBICckZW1haWwnIGxvZ2dlZCBpbiI7CgkJaWYgKCRvcmlnaW4gIT0gJycpICRsb2dtc2cgLj0gIiB2aWEgJG9yaWdpbiI7CgkJaWYgKCRsb2dpbmZvICE9'));
	@fwrite($fp, base64_decode('ICcnKSAkbG9nbXNnIC49ICIgKCRsb2dpbmZvKSI7CgkJT0lEcGx1czo6bG9nZ2VyKCktPmxvZygiW09LXVJBKCRlbWFpbCkhIiwgJGxvZ21zZyk7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHJhTG9nb3V0RXgoJGVtYWlsKSB7CgkJJGxvZ2luZm8gPSAnJzsKCgkJJGFj'));
	@fwrite($fp, base64_decode('cyA9ICR0aGlzLT5nZXRBdXRoQ29udGVudFN0b3JlKCk7CgkJaWYgKGlzX251bGwoJGFjcykpIHJldHVybjsKCQkkcmVzID0gJGFjcy0+cmFMb2dvdXRFeCgkZW1haWwsICRsb2dpbmZvKTsKCgkJT0lEcGx1czo6bG9nZ2VyKCktPmxvZygiW09LXVJBKCRlbWFpbCkh'));
	@fwrite($fp, base64_decode('IiwgIlJBICckZW1haWwnIGxvZ2dlZCBvdXQgKCRsb2dpbmZvKSIpOwoKCQlpZiAoKCR0aGlzLT5yYU51bUxvZ2dlZEluKCkgPT0gMCkgJiYgKCEkdGhpcy0+aXNBZG1pbkxvZ2dlZEluKCkpKSB7CgkJCS8vIE5vYm9keSBsb2dnZWQgaW4gYW55bW9yZS4gRGVzdHJv'));
	@fwrite($fp, base64_decode('eSBzZXNzaW9uIGNvb2tpZSB0byBtYWtlIEdEUFIgcGVvcGxlIGhhcHB5CgkJCSRhY3MtPmRlc3Ryb3lTZXNzaW9uKCk7CgkJfSBlbHNlIHsKCQkJLy8gR2V0IGEgbmV3IHRva2VuIGZvciB0aGUgcmVtYWluaW5nIHVzZXJzCgkJCSRhY3MtPmFjdGl2YXRlKCk7CgkJ'));
	@fwrite($fp, base64_decode('fQoKCQlyZXR1cm4gJHJlczsKCX0KCgkvLyBBZG1pbiBhdXRoZW50aWNhdGlvbiBmdW5jdGlvbnMKCglwdWJsaWMgZnVuY3Rpb24gYWRtaW5Mb2dpbigpIHsKCQkkYWNzID0gJHRoaXMtPmdldEF1dGhDb250ZW50U3RvcmUoKTsKCQlpZiAoaXNfbnVsbCgkYWNzKSkg'));
	@fwrite($fp, base64_decode('cmV0dXJuOwoJCXJldHVybiAkYWNzLT5hZG1pbkxvZ2luKCk7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGFkbWluTG9nb3V0KCkgewoJCSRhY3MgPSAkdGhpcy0+Z2V0QXV0aENvbnRlbnRTdG9yZSgpOwoJCWlmIChpc19udWxsKCRhY3MpKSByZXR1cm47CgkJcmV0dXJu'));
	@fwrite($fp, base64_decode('ICRhY3MtPmFkbWluTG9nb3V0KCk7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGFkbWluQ2hlY2tQYXNzd29yZCgkcGFzc3dvcmQpIHsKCQkkY2ZnRGF0YSA9IE9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ0FETUlOX1BBU1NXT1JEJywgJycpOwoJCWlmIChl'));
	@fwrite($fp, base64_decode('bXB0eSgkY2ZnRGF0YSkpIHsKCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ05vIGFkbWluIHBhc3N3b3JkIHNldCBpbiAlMScsJ3VzZXJkYXRhL2Jhc2Vjb25maWcvY29uZmlnLmluYy5waHAnKSk7CgkJfQoKCQlpZiAoIWlzX2FycmF5KCRjZmdEYXRh'));
	@fwrite($fp, base64_decode('KSkgewoJCQkkcGFzc3dvcmREYXRhQXJyYXkgPSBhcnJheSgkY2ZnRGF0YSk7CgkJfSBlbHNlIHsKCQkJJHBhc3N3b3JkRGF0YUFycmF5ID0gJGNmZ0RhdGE7CgkJfQoKCQlmb3JlYWNoICgkcGFzc3dvcmREYXRhQXJyYXkgYXMgJHBhc3N3b3JkRGF0YSkgewoJCQlp'));
	@fwrite($fp, base64_decode('ZiAoc3RycG9zKCRwYXNzd29yZERhdGEsICckJykgIT09IGZhbHNlKSB7CgkJCQlpZiAoJHBhc3N3b3JkRGF0YVswXSA9PSAnJCcpIHsKCQkJCQkvLyBWZXJzaW9uIDM6IEJDcnlwdAoJCQkJCXJldHVybiBwYXNzd29yZF92ZXJpZnkoJHBhc3N3b3JkLCAkcGFzc3dv'));
	@fwrite($fp, base64_decode('cmREYXRhKTsKCQkJCX0gZWxzZSB7CgkJCQkJLy8gVmVyc2lvbiAyOiBTSEEzLTUxMiB3aXRoIHNhbHQKCQkJCQlsaXN0KCRzX3NhbHQsICRoYXNoKSA9IGV4cGxvZGUoJyQnLCAkcGFzc3dvcmREYXRhLCAyKTsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCS8vIFZlcnNp'));
	@fwrite($fp, base64_decode('b24gMTogU0hBMy01MTIgd2l0aG91dCBzYWx0CgkJCQkkc19zYWx0ID0gJyc7CgkJCQkkaGFzaCA9ICRwYXNzd29yZERhdGE7CgkJCX0KCgkJCWlmIChoYXNoX2VxdWFscyhzaGEzXzUxMigkc19zYWx0LiRwYXNzd29yZCwgdHJ1ZSksIGJhc2U2NF9kZWNvZGUoJGhh'));
	@fwrite($fp, base64_decode('c2gpKSkgcmV0dXJuIHRydWU7CgkJfQoKCQlyZXR1cm4gZmFsc2U7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGlzQWRtaW5Mb2dnZWRJbigpIHsKCQlpZiAoJHRoaXMtPmZvcmNlQWxsTG9nZ2VkT3V0KCkpIHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0gZWxzZSB7CgkJCSRh'));
	@fwrite($fp, base64_decode('Y3MgPSAkdGhpcy0+Z2V0QXV0aENvbnRlbnRTdG9yZSgpOwoJCQlpZiAoaXNfbnVsbCgkYWNzKSkgcmV0dXJuIGZhbHNlOwoJCQlyZXR1cm4gJGFjcy0+aXNBZG1pbkxvZ2dlZEluKCk7CgkJfQoJfQoKCS8vICJIaWdoIGxldmVsIiBmdW5jdGlvbiBpbmNsdWRpbmcg'));
	@fwrite($fp, base64_decode('bG9nZ2luZyBhbmQgY2hlY2tpbmcgZm9yIHZhbGlkIEpXVCBhbHRlcm5hdGlvbnMKCXB1YmxpYyBmdW5jdGlvbiBhZG1pbkxvZ2luRXgoJHJlbWVtYmVyX21lLCAkb3JpZ2luPScnKSB7CgkJJGxvZ2luZm8gPSAnJzsKCQkkYWNzID0gJHRoaXMtPmdldEF1dGhDb250'));
	@fwrite($fp, base64_decode('ZW50U3RvcmUoKTsKCQlpZiAoIWlzX251bGwoJGFjcykpIHsKCQkJJGFjcy0+YWRtaW5Mb2dpbkV4KCRsb2dpbmZvKTsKCQkJJGFjcy0+YWN0aXZhdGUoKTsKCQl9IGVsc2UgewoJCQlpZiAoJHJlbWVtYmVyX21lKSB7CgkJCQlpZiAoIU9JRHBsdXM6OmJhc2VDb25m'));
	@fwrite($fp, base64_decode('aWcoKS0+Z2V0VmFsdWUoJ0pXVF9BTExPV19MT0dJTl9BRE1JTicsIHRydWUpKSB7CgkJCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ1RoZSBhZG1pbmlzdHJhdG9yIGhhcyBkaXNhYmxlZCB0aGlzIGZlYXR1cmUuIChCYXNlIGNvbmZpZ3VyYXRpb24g'));
	@fwrite($fp, base64_decode('c2V0dGluZyAlMSkuJywnSldUX0FMTE9XX0xPR0lOX0FETUlOJykpOwoJCQkJfQoJCQkJJHR0bCA9IE9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ0pXVF9UVExfTE9HSU5fQURNSU4nLCAxMCozNjUqMjQqNjAqNjApOwoJCQkJJGF1dGhTaW11bGF0aW9u'));
	@fwrite($fp, base64_decode('ID0gbmV3IE9JRHBsdXNBdXRoQ29udGVudFN0b3JlSldUKCk7CgkJCQkkYXV0aFNpbXVsYXRpb24tPmFkbWluTG9naW5FeCgkbG9naW5mbyk7CgkJCQkkYXV0aFNpbXVsYXRpb24tPnNldFZhbHVlKCdvaWRwbHVzX2dlbmVyYXRvcicsIE9JRHBsdXNBdXRoQ29udGVu'));
	@fwrite($fp, base64_decode('dFN0b3JlSldUOjpKV1RfR0VORVJBVE9SX0xPR0lOKTsKCQkJCSRhdXRoU2ltdWxhdGlvbi0+c2V0VmFsdWUoJ2V4cCcsIHRpbWUoKSskdHRsKTsgLy8gSldUICJleHAiIGF0dHJpYnV0ZQoJCQkJJGF1dGhTaW11bGF0aW9uLT5hY3RpdmF0ZSgpOwoJCQl9IGVsc2Ug'));
	@fwrite($fp, base64_decode('ewoJCQkJJGF1dGhTaW11bGF0aW9uID0gbmV3IE9JRHBsdXNBdXRoQ29udGVudFN0b3JlU2Vzc2lvbigpOwoJCQkJJGF1dGhTaW11bGF0aW9uLT5hZG1pbkxvZ2luRXgoJGxvZ2luZm8pOwoJCQkJJGF1dGhTaW11bGF0aW9uLT5hY3RpdmF0ZSgpOwoJCQl9CgkJfQoJ'));
	@fwrite($fp, base64_decode('CSRsb2dtc2cgPSAiQWRtaW4gbG9nZ2VkIGluIjsKCQlpZiAoJG9yaWdpbiAhPSAnJykgJGxvZ21zZyAuPSAiIHZpYSAkb3JpZ2luIjsKCQlpZiAoJGxvZ2luZm8gIT0gJycpICRsb2dtc2cgLj0gIiAoJGxvZ2luZm8pIjsKCQlPSURwbHVzOjpsb2dnZXIoKS0+bG9n'));
	@fwrite($fp, base64_decode('KCJbT0tdQSEiLCAkbG9nbXNnKTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gYWRtaW5Mb2dvdXRFeCgpIHsKCQkkbG9naW5mbyA9ICcnOwoKCQkkYWNzID0gJHRoaXMtPmdldEF1dGhDb250ZW50U3RvcmUoKTsKCQlpZiAoaXNfbnVsbCgkYWNzKSkgcmV0dXJuOwoJCSRy'));
	@fwrite($fp, base64_decode('ZXMgPSAkYWNzLT5hZG1pbkxvZ291dEV4KCRsb2dpbmZvKTsKCgkJaWYgKCR0aGlzLT5yYU51bUxvZ2dlZEluKCkgPT0gMCkgewoJCQkvLyBOb2JvZHkgaGVyZSBhbnltb3JlLiBEZXN0cm95IHRoZSBjb29raWUgdG8gbWFrZSBHRFBSIHBlb3BsZSBoYXBweQoJCQkk'));
	@fwrite($fp, base64_decode('YWNzLT5kZXN0cm95U2Vzc2lvbigpOwoJCX0gZWxzZSB7CgkJCS8vIEdldCBhIG5ldyB0b2tlbiBmb3IgdGhlIHJlbWFpbmluZyB1c2VycwoJCQkkYWNzLT5hY3RpdmF0ZSgpOwoJCX0KCgkJT0lEcGx1czo6bG9nZ2VyKCktPmxvZygiW09LXUEhIiwgIkFkbWluIGxv'));
	@fwrite($fp, base64_decode('Z2dlZCBvdXQgKCRsb2dpbmZvKSIpOwoJCXJldHVybiAkcmVzOwoJfQoKCS8vIEF1dGhlbnRpY2F0aW9uIGtleXMgZm9yIHZhbGlkYXRpbmcgYXJndW1lbnRzIChlLmcuIHNlbnQgYnkgbWFpbCkKCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIG1ha2VBdXRoS2V5KCRk'));
	@fwrite($fp, base64_decode('YXRhKSB7CgkJJGRhdGEgPSBPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdTRVJWRVJfU0VDUkVUJykgLiAnL0FVVEhLRVkvJyAuICRkYXRhOwoJCSRjYWxjX2F1dGhrZXkgPSBzaGEzXzUxMigkZGF0YSwgZmFsc2UpOwoJCXJldHVybiAkY2FsY19hdXRo'));
	@fwrite($fp, base64_decode('a2V5OwoJfQoKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gdmFsaWRhdGVBdXRoS2V5KCRkYXRhLCAkYXV0aF9rZXkpIHsKCQlyZXR1cm4gaGFzaF9lcXVhbHMoc2VsZjo6bWFrZUF1dGhLZXkoJGRhdGEpLCAkYXV0aF9rZXkpOwoJfQoKCS8vICJWZXRvIiBmdW5jdGlv'));
	@fwrite($fp, base64_decode('bnMgdG8gZm9yY2UgbG9nb3V0IHN0YXRlCgoJcHJvdGVjdGVkIGZ1bmN0aW9uIGZvcmNlQWxsTG9nZ2VkT3V0KCkgewoJCWlmIChpc3NldCgkX1NFUlZFUlsnU0NSSVBUX0ZJTEVOQU1FJ10pICYmIChiYXNlbmFtZSgkX1NFUlZFUlsnU0NSSVBUX0ZJTEVOQU1FJ10p'));
	@fwrite($fp, base64_decode('ID09ICdzaXRlbWFwLnBocCcpKSB7CgkJCS8vIFRoZSBzaXRlbWFwIG1heSBub3QgY29udGFpbiBhbnkgY29uZmlkZW50aWFsIGluZm9ybWF0aW9uLAoJCQkvLyBldmVuIGlmIHRoZSB1c2VyIGlzIGxvZ2dlZCBpbiwgYmVjYXVzZSB0aGUgYWRtaW4gY291bGQKCQkJ'));
	@fwrite($fp, base64_decode('Ly8gYWNjaWRlbnRhbGx5IGNvcHktcGFzdGUgdGhlIHNpdGVtYXAgdG8gYQoJCQkvLyBzZWFyY2ggZW5naW5lIGNvbnRyb2wgcGFuZWwgd2hpbGUgdGhleSBhcmUgbG9nZ2VkIGluCgkJCXJldHVybiB0cnVlOwoJCX0gZWxzZSB7CgkJCXJldHVybiBmYWxzZTsKCQl9'));
	@fwrite($fp, base64_decode('Cgl9CgoJLy8gQ1NSRiBmdW5jdGlvbnMKCglwcml2YXRlICRlbmFibGVfY3NyZiA9IHRydWU7CgoJcHVibGljIGZ1bmN0aW9uIGVuYWJsZUNTUkYoKSB7CgkJJHRoaXMtPmVuYWJsZV9jc3JmID0gdHJ1ZTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZGlzYWJsZUNTUkYo'));
	@fwrite($fp, base64_decode('KSB7CgkJJHRoaXMtPmVuYWJsZV9jc3JmID0gZmFsc2U7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGdlbkNTUkZUb2tlbigpIHsKCQlyZXR1cm4gYmluMmhleChzZWxmOjpnZXRSYW5kb21CeXRlcyg2NCkpOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBjaGVja0NTUkYoKSB7'));
	@fwrite($fp, base64_decode('CgkJaWYgKCEkdGhpcy0+ZW5hYmxlX2NzcmYpIHJldHVybjsKCQlpZiAoIWlzc2V0KCRfUkVRVUVTVFsnY3NyZl90b2tlbiddKSB8fCAhaXNzZXQoJF9DT09LSUVbJ2NzcmZfdG9rZW4nXSkgfHwgKCRfUkVRVUVTVFsnY3NyZl90b2tlbiddICE9PSAkX0NPT0tJRVsn'));
	@fwrite($fp, base64_decode('Y3NyZl90b2tlbiddKSkgewoJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnV3JvbmcgQ1NSRiBUb2tlbicpKTsKCQl9Cgl9CgoJLy8gR2VuZXJhdGUgUkEgcGFzc3dvcmRzCgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiByYUdlbmVyYXRlUGFzc3dvcmQo'));
	@fwrite($fp, base64_decode('JHBhc3N3b3JkKTogT0lEcGx1c1JBQXV0aEluZm8gewoJCSRkZWZfbWV0aG9kID0gT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdkZWZhdWx0X3JhX2F1dGhfbWV0aG9kJyk7CgoJCSRwbHVnaW5zID0gT0lEcGx1czo6Z2V0QXV0aFBsdWdpbnMoKTsKCQlmb3Jl'));
	@fwrite($fp, base64_decode('YWNoICgkcGx1Z2lucyBhcyAkcGx1Z2luKSB7CgkJCWlmIChiYXNlbmFtZSgkcGx1Z2luLT5nZXRQbHVnaW5EaXJlY3RvcnkoKSkgPT09ICRkZWZfbWV0aG9kKSB7CgkJCQlyZXR1cm4gJHBsdWdpbi0+Z2VuZXJhdGUoc2VsZjo6cmFQZXBwZXJQcm9jZXNzaW5nKCRw'));
	@fwrite($fp, base64_decode('YXNzd29yZCkpOwoJCQl9CgkJfQoJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdEZWZhdWx0IFJBIGF1dGggbWV0aG9kL3BsdWdpbiAiJTEiIG5vdCBmb3VuZCcsJGRlZl9tZXRob2QpKTsKCX0KCgkvLyBHZW5lcmF0ZSBhZG1pbiBwYXNzd29yZAoKCS8q'));
	@fwrite($fp, base64_decode('IE5vdGhpbmcgaGVyZTsgdGhlIGFkbWluIHBhc3N3b3JkIHdpbGwgYmUgZ2VuZXJhdGVkIGluIHNldHVwX2Jhc2UuanMgLCBwdXJlbHkgaW4gdGhlIHdlYi1icm93c2VyICovCgp9Cg=='));
	@fclose($fp);
}
if (!is_file('includes/classes/OIDplusAuthUtils.class.php')) {
	warn('File has vanished! Will re-create it: includes/classes/OIDplusAuthUtils.class.php');
	writefile_3();
	if (!is_file('includes/classes/OIDplusAuthUtils.class.php')) {
		warn('File cannot be created (not existing): includes/classes/OIDplusAuthUtils.class.php');
	} else if (sha1_file('includes/classes/OIDplusAuthUtils.class.php') != '6c795d58145a23b0fdd29c6a6719530ccd84ba1b') {
		warn('File cannot be created (checksum mismatch): includes/classes/OIDplusAuthUtils.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/classes/OIDplusAuthUtils.class.php', 0644)) {
		warn('Could not change file permissions of includes/classes/OIDplusAuthUtils.class.php');
	}
} else {
	if (@sha1_file('includes/classes/OIDplusAuthUtils.class.php') !== '6c795d58145a23b0fdd29c6a6719530ccd84ba1b') {
		if (@sha1_file('includes/classes/OIDplusAuthUtils.class.php') !== '90c3641010595920ff3a04ea8b239326ff678bd2') {
			warn('File was modified. Will overwrite the changes now: includes/classes/OIDplusAuthUtils.class.php');
			$tmp = pathinfo('includes/classes/OIDplusAuthUtils.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/classes/OIDplusAuthUtils.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('includes/classes/OIDplusAuthUtils.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_3();
		if (@sha1_file('includes/classes/OIDplusAuthUtils.class.php') !== '6c795d58145a23b0fdd29c6a6719530ccd84ba1b') {
			warn('File cannot be written (checksum mismatch): includes/classes/OIDplusAuthUtils.class.php');
		}
	}
}

// Files different: plugins/publicPages/800_login_ldap/OIDplusPagePublicLoginLDAP.class.php
function writefile_4() {
	@$fp = fopen('plugins/publicPages/800_login_ldap/OIDplusPagePublicLoginLDAP.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IC0gMjAyMSBEYW5pZWwgTWFyc2NoYWxsLCBWaWFUaGlua1NvZnQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7'));
	@fwrite($fp, base64_decode('CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z'));
	@fwrite($fp, base64_decode('ZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMi'));
	@fwrite($fp, base64_decode('IEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z'));
	@fwrite($fp, base64_decode('IGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgppZiAoIWRlZmluZWQoJ0lOU0lERV9PSURQTFVTJykpIGRpZSgpOwoKY2xhc3MgT0lEcGx1c1BhZ2VQdWJsaWNMb2dpbkxkYXAgZXh0ZW5kcyBPSURwbHVzUGFnZVBsdWdpblB1YmxpYyB7'));
	@fwrite($fp, base64_decode('CgoJcHJvdGVjdGVkIGZ1bmN0aW9uIGxkYXBMb2dpbigkdXNlcm5hbWUsICRwYXNzd29yZCkgewoJCSRjZmdfbGRhcF9zZXJ2ZXIgICAgICA9IE9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ0xEQVBfU0VSVkVSJyk7CgkJJGNmZ19sZGFwX3BvcnQgICAg'));
	@fwrite($fp, base64_decode('ICAgID0gT0lEcGx1czo6YmFzZUNvbmZpZygpLT5nZXRWYWx1ZSgnTERBUF9QT1JUJywgMzg5KTsKCQkkY2ZnX2xkYXBfYmFzZV9kbiAgICAgPSBPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdMREFQX0JBU0VfRE4nKTsKCgkJLy8gQ29ubmVjdCB0byB0'));
	@fwrite($fp, base64_decode('aGUgc2VydmVyCgkJaWYgKCFlbXB0eSgkY2ZnX2xkYXBfcG9ydCkpIHsKCQkJaWYgKCEoJGxkYXBjb25uID0gQGxkYXBfY29ubmVjdCgkY2ZnX2xkYXBfc2VydmVyLCAkY2ZnX2xkYXBfcG9ydCkpKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnQ2Fubm90'));
	@fwrite($fp, base64_decode('IGNvbm5lY3QgdG8gTERBUCBzZXJ2ZXInKSk7CgkJfSBlbHNlIHsKCQkJaWYgKCEoJGxkYXBjb25uID0gQGxkYXBfY29ubmVjdCgkY2ZnX2xkYXBfc2VydmVyKSkpIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdDYW5ub3QgY29ubmVjdCB0byBMREFQIHNl'));
	@fwrite($fp, base64_decode('cnZlcicpKTsKCQl9CgkJbGRhcF9zZXRfb3B0aW9uKCRsZGFwY29ubiwgTERBUF9PUFRfUFJPVE9DT0xfVkVSU0lPTiwgMyk7CgkJbGRhcF9zZXRfb3B0aW9uKCRsZGFwY29ubiwgTERBUF9PUFRfUkVGRVJSQUxTLCAwKTsKCgkJaWYgKCFzdHJzdHIoJHVzZXJuYW1l'));
	@fwrite($fp, base64_decode('LCdAJykpIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKCdQbGVhc2UgdXNlIHRoZSB1c2VybmFtZSBzY2hlbWEgInVzZXJuYW1lQGRvbWFpbm5hbWUubG9jYWwiICh1c2VyUHJpbmNpcGFsTmFtZSkuJyk7CgoJCS8vIExvZ2luIGFzIHRoZSBuZXcgdXNlciBpbiBv'));
	@fwrite($fp, base64_decode('cmRlciB0byBjaGVjayB0aGUgY3JlZGVudGlhbHMKCQlpZiAoJGxkYXBiaW5kID0gQGxkYXBfYmluZCgkbGRhcGNvbm4sICR1c2VybmFtZSwgJHBhc3N3b3JkKSkgewoKCQkJLy8gU2VhcmNoIHRoZSB1c2VyIHVzaW5nIHRoZSBlbWFpbCBhZGRyZXNzCgoJCQkkY2Zn'));
	@fwrite($fp, base64_decode('X2xkYXBfdXNlcl9maWx0ZXIgPSAiKCYob2JqZWN0Q2xhc3M9dXNlcikob2JqZWN0Q2F0ZWdvcnk9cGVyc29uKSh1c2VyUHJpbmNpcGFsTmFtZT0iLmxkYXBfZXNjYXBlKCR1c2VybmFtZSwgJycsIExEQVBfRVNDQVBFX0ZJTFRFUikuIikpIjsKCgkJCWlmICghKCRy'));
	@fwrite($fp, base64_decode('ZXN1bHQgPSBAbGRhcF9zZWFyY2goJGxkYXBjb25uLCRjZmdfbGRhcF9iYXNlX2RuLCAkY2ZnX2xkYXBfdXNlcl9maWx0ZXIpKSkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0Vycm9yIGluIHNlYXJjaCBxdWVyeTogJTEnLCBsZGFwX2Vycm9yKCRsZGFw'));
	@fwrite($fp, base64_decode('Y29ubikpKTsKCQkJJGRhdGEgPSBsZGFwX2dldF9lbnRyaWVzKCRsZGFwY29ubiwgJHJlc3VsdCk7CgkJCSRsZGFwX3VzZXJpbmZvID0gYXJyYXkoKTsKCgkJCWZvciAoJGk9MDsgJGk8JGRhdGFbJ2NvdW50J107ICRpKyspIHsKCQkJCWZvcmVhY2ggKCRkYXRhWyRp'));
	@fwrite($fp, base64_decode('XSBhcyAkeCA9PiAkeSkgewoJCQkJCWlmIChpc19pbnQoJHgpKSBjb250aW51ZTsKCQkJCQlpZiAoIWlzX2FycmF5KCR5KSkgY29udGludWU7CgkJCQkJJGxkYXBfdXNlcmluZm9bJHhdID0gJHlbMF07CgkJCQl9CgkJCX0KCgkJCS8vbGRhcF91bmJpbmQoJGxkYXBj'));
	@fwrite($fp, base64_decode('b25uKTsgLy8gY29tbWVudGVkIG91dCBiZWNhdXNlIGxkYXBfdW5iaW5kKCkga2lsbHMgdGhlIGxpbmsgZGVzY3JpcHRvcgoJCQlsZGFwX2Nsb3NlKCRsZGFwY29ubik7CgoJCQkvLyBlbXB0eSgkbGRhcF91c2VyaW5mbykgY2FuIGhhcHBlbiBpZiB0aGUgdXNlciBk'));
	@fwrite($fp, base64_decode('aWQgbm90IGxvZy1pbiB1c2luZyB0aGVpciBjb3JyZWN0IHVzZXJQcmluY2lwYWxOYW1lIChlLmcuICJ1c2VybmFtZUBkb21haW5uYW1lIiBpbnN0ZWFkIG9mICJ1c2VybmFtZUBkb21haW5uYW1lLmxvY2FsIikKCQkJcmV0dXJuIGVtcHR5KCRsZGFwX3VzZXJpbmZv'));
	@fwrite($fp, base64_decode('KSA/IGZhbHNlIDogJGxkYXBfdXNlcmluZm87CgkJfSBlbHNlIHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCX0KCglwcml2YXRlIGZ1bmN0aW9uIHJlZ2lzdGVyUkEoJHJhLCAkbGRhcF91c2VyaW5mbykgewoJCSRlbWFpbCA9ICRyYS0+cmFFbWFpbCgpOwoKCQkkcmEt'));
	@fwrite($fp, base64_decode('PnJlZ2lzdGVyX3JhKG51bGwpOyAvLyBjcmVhdGUgYSB1c2VyIGFjY291bnQgd2l0aG91dCBwYXNzd29yZAoKCQkvKgoJCU9JRHBsdXMgREIgRmllbGQgICAgICAgICAgQWN0aXZlRGlyZWN0b3J5IGZpZWxkCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t'));
	@fwrite($fp, base64_decode('LS0tLS0tLS0tLS0tLS0tLS0tCgkJcmFfbmFtZSAgICAgICAgICAgICAgICAgICBjbgoJCXBlcnNvbmFsX25hbWUgICAgICAgICAgICAgZGlzcGxheW5hbWUgKG9yOiBnaXZlbm5hbWUgKyAiICIgKyBzbikKCQlvcmdhbml6YXRpb24gICAgICAgICAgICAgIGNvbXBh'));
	@fwrite($fp, base64_decode('bnkKCQlvZmZpY2UgICAgICAgICAgICAgICAgICAgIHBoeXNpY2FsZGVsaXZlcnlvZmZpY2VuYW1lIG9yIGRlcGFydG1lbnQKCQlzdHJlZXQgICAgICAgICAgICAgICAgICAgIHN0cmVldGFkZHJlc3MKCQl6aXBfdG93biAgICAgICAgICAgICAgICAgIHBvc3RhbGNv'));
	@fwrite($fp, base64_decode('ZGUgKyAiICIgKyBsCgkJY291bnRyeSAgICAgICAgICAgICAgICAgICBjbyAoaHVtYW4tcmVhZGFibGUpIG9yIGMgKElTTyBjb3VudHJ5IGNvZGUpCgkJcGhvbmUgICAgICAgICAgICAgICAgICAgICB0ZWxlcGhvbmVudW1iZXIgb3IgaG9tZXBob25lCgkJbW9iaWxl'));
	@fwrite($fp, base64_decode('ICAgICAgICAgICAgICAgICAgICBtb2JpbGUKCQlmYXggICAgICAgICAgICAgICAgICAgICAgIGZhY3NpbWlsZXRlbGVwaG9uZW51bWJlcgoJCShub25lKSAgICAgICAgICAgICAgICAgICAgd3d3aG9tZXBhZ2UKCQkqLwoKCQlpZiAoIWlzc2V0KCRsZGFwX3VzZXJp'));
	@fwrite($fp, base64_decode('bmZvWydjbiddKSkgICAgICAgICAgICAgICAgICAgICAgICAgJGxkYXBfdXNlcmluZm9bJ2NuJ10gPSAnJzsKCQlpZiAoIWlzc2V0KCRsZGFwX3VzZXJpbmZvWydkaXNwbGF5bmFtZSddKSkgICAgICAgICAgICAgICAgJGxkYXBfdXNlcmluZm9bJ2Rpc3BsYXluYW1l'));
	@fwrite($fp, base64_decode('J10gPSAnJzsKCQlpZiAoIWlzc2V0KCRsZGFwX3VzZXJpbmZvWydnaXZlbm5hbWUnXSkpICAgICAgICAgICAgICAgICAgJGxkYXBfdXNlcmluZm9bJ2dpdmVubmFtZSddID0gJyc7CgkJaWYgKCFpc3NldCgkbGRhcF91c2VyaW5mb1snc24nXSkpICAgICAgICAgICAg'));
	@fwrite($fp, base64_decode('ICAgICAgICAgICAgICRsZGFwX3VzZXJpbmZvWydzbiddID0gJyc7CgkJaWYgKCFpc3NldCgkbGRhcF91c2VyaW5mb1snY29tcGFueSddKSkgICAgICAgICAgICAgICAgICAgICRsZGFwX3VzZXJpbmZvWydjb21wYW55J10gPSAnJzsKCQlpZiAoIWlzc2V0KCRsZGFw'));
	@fwrite($fp, base64_decode('X3VzZXJpbmZvWydwaHlzaWNhbGRlbGl2ZXJ5b2ZmaWNlbmFtZSddKSkgJGxkYXBfdXNlcmluZm9bJ3BoeXNpY2FsZGVsaXZlcnlvZmZpY2VuYW1lJ10gPSAnJzsKCQlpZiAoIWlzc2V0KCRsZGFwX3VzZXJpbmZvWydkZXBhcnRtZW50J10pKSAgICAgICAgICAgICAg'));
	@fwrite($fp, base64_decode('ICAgJGxkYXBfdXNlcmluZm9bJ2RlcGFydG1lbnQnXSA9ICcnOwoJCWlmICghaXNzZXQoJGxkYXBfdXNlcmluZm9bJ3N0cmVldGFkZHJlc3MnXSkpICAgICAgICAgICAgICAkbGRhcF91c2VyaW5mb1snc3RyZWV0YWRkcmVzcyddID0gJyc7CgkJaWYgKCFpc3NldCgk'));
	@fwrite($fp, base64_decode('bGRhcF91c2VyaW5mb1sncG9zdGFsY29kZSddKSkgICAgICAgICAgICAgICAgICRsZGFwX3VzZXJpbmZvWydwb3N0YWxjb2RlJ10gPSAnJzsKCQlpZiAoIWlzc2V0KCRsZGFwX3VzZXJpbmZvWydsJ10pKSAgICAgICAgICAgICAgICAgICAgICAgICAgJGxkYXBfdXNl'));
	@fwrite($fp, base64_decode('cmluZm9bJ2wnXSA9ICcnOwoJCWlmICghaXNzZXQoJGxkYXBfdXNlcmluZm9bJ2NvJ10pKSAgICAgICAgICAgICAgICAgICAgICAgICAkbGRhcF91c2VyaW5mb1snY28nXSA9ICcnOwoJCWlmICghaXNzZXQoJGxkYXBfdXNlcmluZm9bJ2MnXSkpICAgICAgICAgICAg'));
	@fwrite($fp, base64_decode('ICAgICAgICAgICAgICAkbGRhcF91c2VyaW5mb1snYyddID0gJyc7CgkJaWYgKCFpc3NldCgkbGRhcF91c2VyaW5mb1sndGVsZXBob25lbnVtYmVyJ10pKSAgICAgICAgICAgICRsZGFwX3VzZXJpbmZvWyd0ZWxlcGhvbmVudW1iZXInXSA9ICcnOwoJCWlmICghaXNz'));
	@fwrite($fp, base64_decode('ZXQoJGxkYXBfdXNlcmluZm9bJ2hvbWVwaG9uZSddKSkgICAgICAgICAgICAgICAgICAkbGRhcF91c2VyaW5mb1snaG9tZXBob25lJ10gPSAnJzsKCQlpZiAoIWlzc2V0KCRsZGFwX3VzZXJpbmZvWydtb2JpbGUnXSkpICAgICAgICAgICAgICAgICAgICAgJGxkYXBf'));
	@fwrite($fp, base64_decode('dXNlcmluZm9bJ21vYmlsZSddID0gJyc7CgkJaWYgKCFpc3NldCgkbGRhcF91c2VyaW5mb1snZmFjc2ltaWxldGVsZXBob25lbnVtYmVyJ10pKSAgICRsZGFwX3VzZXJpbmZvWydmYWNzaW1pbGV0ZWxlcGhvbmVudW1iZXInXSA9ICcnOwoJCS8vaWYgKCFpc3NldCgk'));
	@fwrite($fp, base64_decode('bGRhcF91c2VyaW5mb1snd3d3aG9tZXBhZ2UnXSkpICAgICAgICAgICAgICAgICRsZGFwX3VzZXJpbmZvWyd3d3dob21lcGFnZSddID0gJyc7CgkJaWYgKCFpc3NldCgkbGRhcF91c2VyaW5mb1snYWRtaW5jb3VudCddKSkgICAgICAgICAgICAgICAgICRsZGFwX3Vz'));
	@fwrite($fp, base64_decode('ZXJpbmZvWydhZG1pbmNvdW50J10gPSAnMCc7CgoJCS8vZmlsZV9wdXRfY29udGVudHMoJ2Q6L2xkYXBfaW5mby50eHQnLHByaW50X3IoJGxkYXBfdXNlcmluZm8sdHJ1ZSkpOwoKCgkJJG9wdXNlcmRhdGEgPSBhcnJheSgpOwoJCSRvcHVzZXJkYXRhWydyYV9uYW1l'));
	@fwrite($fp, base64_decode('J10gPSAkbGRhcF91c2VyaW5mb1snY24nXTsKCQlpZiAoIWVtcHR5KCRsZGFwX3VzZXJpbmZvWydkaXNwbGF5bmFtZSddKSkgewoJCQkkb3B1c2VyZGF0YVsncGVyc29uYWxfbmFtZSddID0gJGxkYXBfdXNlcmluZm9bJ2Rpc3BsYXluYW1lJ107CgkJfSBlbHNlIHsK'));
	@fwrite($fp, base64_decode('CQkJJG9wdXNlcmRhdGFbJ3BlcnNvbmFsX25hbWUnXSA9IHRyaW0oJGxkYXBfdXNlcmluZm9bJ2dpdmVubmFtZSddLicgJy4kbGRhcF91c2VyaW5mb1snc24nXSk7CgkJfQoJCSRvcHVzZXJkYXRhWydvcmdhbml6YXRpb24nXSA9ICRsZGFwX3VzZXJpbmZvWydjb21w'));
	@fwrite($fp, base64_decode('YW55J107CgkJaWYgKCFlbXB0eSgkbGRhcF91c2VyaW5mb1sncGh5c2ljYWxkZWxpdmVyeW9mZmljZW5hbWUnXSkpIHsKCQkJJG9wdXNlcmRhdGFbJ29mZmljZSddID0gJGxkYXBfdXNlcmluZm9bJ3BoeXNpY2FsZGVsaXZlcnlvZmZpY2VuYW1lJ107CgkJfSBlbHNl'));
	@fwrite($fp, base64_decode('IHsKCQkJJG9wdXNlcmRhdGFbJ29mZmljZSddID0gJGxkYXBfdXNlcmluZm9bJ2RlcGFydG1lbnQnXTsKCQl9CgkJJG9wdXNlcmRhdGFbJ3N0cmVldCddID0gJGxkYXBfdXNlcmluZm9bJ3N0cmVldGFkZHJlc3MnXTsKCQkkb3B1c2VyZGF0YVsnemlwX3Rvd24nXSA9'));
	@fwrite($fp, base64_decode('IHRyaW0oJGxkYXBfdXNlcmluZm9bJ3Bvc3RhbGNvZGUnXS4nICcuJGxkYXBfdXNlcmluZm9bJ2wnXSk7CgkJJG9wdXNlcmRhdGFbJ2NvdW50cnknXSA9ICRsZGFwX3VzZXJpbmZvWydjbyddOyAvLyBJU08gY291bnRyeSBjb2RlOiAkbGRhcF91c2VyaW5mb1snYydd'));
	@fwrite($fp, base64_decode('CgkJJG9wdXNlcmRhdGFbJ3Bob25lJ10gPSAkbGRhcF91c2VyaW5mb1sndGVsZXBob25lbnVtYmVyJ107IC8vIGhvbWVwaG9uZSBmb3IgcHJpdmF0ZSBwaG9uZSBudW1iZXIKCQkkb3B1c2VyZGF0YVsnbW9iaWxlJ10gPSAkbGRhcF91c2VyaW5mb1snbW9iaWxlJ107'));
	@fwrite($fp, base64_decode('CgkJJG9wdXNlcmRhdGFbJ2ZheCddID0gJGxkYXBfdXNlcmluZm9bJ2ZhY3NpbWlsZXRlbGVwaG9uZW51bWJlciddOwoKCQlmb3JlYWNoICgkb3B1c2VyZGF0YSBhcyAkZGJmaWVsZCA9PiAkdmFsKSB7CgkJCWlmICghZW1wdHkoJHZhbCkpIHsKCQkJCU9JRHBsdXM6'));
	@fwrite($fp, base64_decode('OmRiKCktPnF1ZXJ5KCJ1cGRhdGUgIyMjcmEgc2V0ICIuJGRiZmllbGQuIiA9ID8gd2hlcmUgZW1haWwgPSA/IiwgYXJyYXkoJHZhbCwgJGVtYWlsKSk7CgkJCX0KCQl9Cgl9CgoJcHJpdmF0ZSBmdW5jdGlvbiBkb0xvZ2luUkEoJHJlbWVtYmVyX21lLCAkZW1haWws'));
	@fwrite($fp, base64_decode('ICRsZGFwX3VzZXJpbmZvKSB7CgkJJHJhID0gbmV3IE9JRHBsdXNSQSgkZW1haWwpOwoJCWlmICghJHJhLT5leGlzdGluZygpKSB7CgkJCSR0aGlzLT5yZWdpc3RlclJBKCRyYSwgJGxkYXBfdXNlcmluZm8pOwoJCQlPSURwbHVzOjpsb2dnZXIoKS0+bG9nKCJbSU5G'));
	@fwrite($fp, base64_decode('T11SQSgkZW1haWwpISIsICJSQSAnJGVtYWlsJyB3YXMgY3JlYXRlZCBiZWNhdXNlIG9mIHN1Y2Nlc3NmdWwgTERBUCBsb2dpbiIpOwoJCX0KCgkJT0lEcGx1czo6YXV0aFV0aWxzKCktPnJhTG9naW5FeCgkZW1haWwsICRyZW1lbWJlcl9tZSwgJ0xEQVAnKTsKCgkJ'));
	@fwrite($fp, base64_decode('T0lEcGx1czo6ZGIoKS0+cXVlcnkoIlVQREFURSAjIyNyYSBzZXQgbGFzdF9sb2dpbiA9ICIuT0lEcGx1czo6ZGIoKS0+c3FsRGF0ZSgpLiIgd2hlcmUgZW1haWwgPSA/IiwgYXJyYXkoJGVtYWlsKSk7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGFjdGlvbigkYWN0aW9u'));
	@fwrite($fp, base64_decode('SUQsICRwYXJhbXMpIHsKCQlpZiAoJGFjdGlvbklEID09ICdyYV9sb2dpbl9sZGFwJykgewoJCQlpZiAoIU9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ0xEQVBfRU5BQkxFRCcsIGZhbHNlKSkgewoJCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24o'));
	@fwrite($fp, base64_decode('X0woJ0xEQVAgYXV0aGVudGljYXRpb24gaXMgZGlzYWJsZWQgb24gdGhpcyBzeXN0ZW0uJykpOwoJCQl9CgoJCQlpZiAoIWZ1bmN0aW9uX2V4aXN0cygnbGRhcF9jb25uZWN0JykpIHRocm93IG5ldyBPSURwbHVzQ29uZmlnSW5pdGlhbGl6YXRpb25FeGNlcHRpb24o'));
	@fwrite($fp, base64_decode('X0woJ1BIUCBleHRlbnNpb24gIiUxIiBub3QgaW5zdGFsbGVkJywnTERBUCcpKTsKCgkJCWlmIChPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdSRUNBUFRDSEFfRU5BQkxFRCcsIGZhbHNlKSkgewoJCQkJJHNlY3JldD1PSURwbHVzOjpiYXNlQ29uZmln'));
	@fwrite($fp, base64_decode('KCktPmdldFZhbHVlKCdSRUNBUFRDSEFfUFJJVkFURScsICcnKTsKCQkJCV9DaGVja1BhcmFtRXhpc3RzKCRwYXJhbXMsICdjYXB0Y2hhJyk7CgkJCQkkcmVzcG9uc2U9JHBhcmFtc1siY2FwdGNoYSJdOwoJCQkJJHZlcmlmeT1maWxlX2dldF9jb250ZW50cygiaHR0'));
	@fwrite($fp, base64_decode('cHM6Ly93d3cuZ29vZ2xlLmNvbS9yZWNhcHRjaGEvYXBpL3NpdGV2ZXJpZnk/c2VjcmV0PXskc2VjcmV0fSZyZXNwb25zZT17JHJlc3BvbnNlfSIpOwoJCQkJJGNhcHRjaGFfc3VjY2Vzcz1qc29uX2RlY29kZSgkdmVyaWZ5KTsKCQkJCWlmICgkY2FwdGNoYV9zdWNj'));
	@fwrite($fp, base64_decode('ZXNzLT5zdWNjZXNzPT1mYWxzZSkgewoJCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKF9MKCdDQVBUQ0hBIG5vdCBzdWNjZXNzZnVsbHkgdmVyaWZpZWQnKSk7CgkJCQl9CgkJCX0KCgkJCV9DaGVja1BhcmFtRXhpc3RzKCRwYXJhbXMsICdlbWFpbCcpOwoJ'));
	@fwrite($fp, base64_decode('CQlfQ2hlY2tQYXJhbUV4aXN0cygkcGFyYW1zLCAncGFzc3dvcmQnKTsKCgkJCSRlbWFpbCA9ICRwYXJhbXNbJ2VtYWlsJ107CgkJCSRwYXNzd29yZCA9ICRwYXJhbXNbJ3Bhc3N3b3JkJ107CgoJCQlpZiAoZW1wdHkoJGVtYWlsKSkgewoJCQkJdGhyb3cgbmV3IE9J'));
	@fwrite($fp, base64_decode('RHBsdXNFeGNlcHRpb24oX0woJ1BsZWFzZSBlbnRlciBhIHZhbGlkIHVzZXJuYW1lJykpOwoJCQl9CgoJCQlpZiAoISgkbGRhcF91c2VyaW5mbyA9ICR0aGlzLT5sZGFwTG9naW4oJGVtYWlsLCAkcGFzc3dvcmQpKSkgewoJCQkJaWYgKE9JRHBsdXM6OmNvbmZpZygp'));
	@fwrite($fp, base64_decode('LT5nZXRWYWx1ZSgnbG9nX2ZhaWxlZF9yYV9sb2dpbnMnLCBmYWxzZSkpIHsKCQkJCQlPSURwbHVzOjpsb2dnZXIoKS0+bG9nKCJbV0FSTl1BISIsICJGYWlsZWQgbG9naW4gdG8gUkEgYWNjb3VudCAnJGVtYWlsJyB1c2luZyBMREFQIik7CgkJCQl9CgkJCQl0aHJv'));
	@fwrite($fp, base64_decode('dyBuZXcgT0lEcGx1c0V4Y2VwdGlvbihfTCgnV3JvbmcgcGFzc3dvcmQgb3IgdXNlciBub3QgcmVnaXN0ZXJlZCcpKTsKCQkJfQoKCQkJaWYgKCFPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdMREFQX0FVVEhFTlRJQ0FURV9VUE4nLHRydWUpICYmCgkJ'));
	@fwrite($fp, base64_decode('CSAgICAhT0lEcGx1czo6YmFzZUNvbmZpZygpLT5nZXRWYWx1ZSgnTERBUF9BVVRIRU5USUNBVEVfRU1BSUwnLGZhbHNlKSkgewoJCQkgICAgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ0Vycm9yIGluIGJhc2UgY29uZmlnOiAlMSBhbmQgJTIgY2Fubm90'));
	@fwrite($fp, base64_decode('IGJlIGJvdGggZGlzYWJsZWQnLCdMREFQX0FVVEhFTlRJQ0FURV9VUE4nLCdMREFQX0FVVEhFTlRJQ0FURV9FTUFJTCcpKTsKCQkJfQoKCQkJaWYgKE9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ0xEQVBfQVVUSEVOVElDQVRFX1VQTicsdHJ1ZSkpIHsK'));
	@fwrite($fp, base64_decode('CQkJCSRyZW1lbWJlcl9tZSA9IGlzc2V0KCRwYXJhbXNbJ3JlbWVtYmVyX21lJ10pICYmICgkcGFyYW1zWydyZW1lbWJlcl9tZSddKTsKCQkJCSR0aGlzLT5kb0xvZ2luUkEoJHJlbWVtYmVyX21lLCAkZW1haWwsICRsZGFwX3VzZXJpbmZvKTsKCQkJfQoKCQkJaWYg'));
	@fwrite($fp, base64_decode('KE9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ0xEQVBfQVVUSEVOVElDQVRFX0VNQUlMJyxmYWxzZSkpIHsKCQkJCWlmIChpc3NldCgkbGRhcF91c2VyaW5mb1snbWFpbCddKSAmJiAoIWVtcHR5KCRsZGFwX3VzZXJpbmZvWydtYWlsJ10pKSkgewoJCQkJ'));
	@fwrite($fp, base64_decode('CSRyZW1lbWJlcl9tZSA9IGlzc2V0KCRwYXJhbXNbJ3JlbWVtYmVyX21lJ10pICYmICgkcGFyYW1zWydyZW1lbWJlcl9tZSddKTsKCQkJCQkkdGhpcy0+ZG9Mb2dpblJBKCRyZW1lbWJlcl9tZSwgJGxkYXBfdXNlcmluZm9bJ21haWwnXSwgJGxkYXBfdXNlcmluZm8p'));
	@fwrite($fp, base64_decode('OwoJCQkJfQoJCQl9CgoJCQlpZiAoT0lEcGx1czo6YmFzZUNvbmZpZygpLT5nZXRWYWx1ZSgnTERBUF9BRE1JTl9JU19PSURQTFVTX0FETUlOJyxmYWxzZSkpIHsKCQkJCWlmICgkbGRhcF91c2VyaW5mb1snYWRtaW5jb3VudCddID09IDEpIHsKCQkJCQkkcmVtZW1i'));
	@fwrite($fp, base64_decode('ZXJfbWUgPSBpc3NldCgkcGFyYW1zWydyZW1lbWJlcl9tZSddKSAmJiAoJHBhcmFtc1sncmVtZW1iZXJfbWUnXSk7CgkJCQkJT0lEcGx1czo6YXV0aFV0aWxzKCktPmFkbWluTG9naW5FeCgkcmVtZW1iZXJfbWUsICdMREFQIGxvZ2luIChhZG1pbmNvdW50KScpOwoJ'));
	@fwrite($fp, base64_decode('CQkJfQoJCQl9CgoJCQlyZXR1cm4gYXJyYXkoInN0YXR1cyIgPT4gMCk7CgkJfSBlbHNlIHsKCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oX0woJ1Vua25vd24gYWN0aW9uIElEJykpOwoJCX0KCX0KCglwdWJsaWMgZnVuY3Rpb24gaW5pdCgkaHRtbD10cnVl'));
	@fwrite($fp, base64_decode('KSB7CgkJLy8gTm90aGluZwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBndWkoJGlkLCAmJG91dCwgJiRoYW5kbGVkKSB7CgkJaWYgKCRpZCA9PT0gJ29pZHBsdXM6bG9naW5fbGRhcCcpIHsKCQkJJGhhbmRsZWQgPSB0cnVlOwoJCQkkb3V0Wyd0aXRsZSddID0gX0woJ0xv'));
	@fwrite($fp, base64_decode('Z2luIHVzaW5nIExEQVAgLyBBY3RpdmVEaXJlY3RvcnknKTsKCQkJJG91dFsnaWNvbiddICA9IE9JRHBsdXM6OndlYnBhdGgoX19ESVJfXykuJ2ljb25fYmlnLnBuZyc7CgoJCQlpZiAoIU9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ0xEQVBfRU5BQkxF'));
	@fwrite($fp, base64_decode('RCcsIGZhbHNlKSkgewoJCQkJJG91dFsnaWNvbiddID0gJ2ltZy9lcnJvcl9iaWcucG5nJzsKCQkJCSRvdXRbJ3RleHQnXSA9IF9MKCdMREFQIGF1dGhlbnRpY2F0aW9uIGlzIGRpc2FibGVkIG9uIHRoaXMgc3lzdGVtLicpOwoJCQkJcmV0dXJuOwoJCQl9CgoJCQlp'));
	@fwrite($fp, base64_decode('ZiAoIWZ1bmN0aW9uX2V4aXN0cygnbGRhcF9jb25uZWN0JykpIHsKCQkJCSRvdXRbJ2ljb24nXSA9ICdpbWcvZXJyb3JfYmlnLnBuZyc7CgkJCQkkb3V0Wyd0ZXh0J10gPSBfTCgnUEhQIGV4dGVuc2lvbiAiJTEiIG5vdCBpbnN0YWxsZWQnLCdMREFQJyk7CgkJCQly'));
	@fwrite($fp, base64_decode('ZXR1cm47CgkJCX0KCgkJCSRvdXRbJ3RleHQnXSA9ICcnOwoKCQkJJG91dFsndGV4dCddIC49ICc8bm9zY3JpcHQ+JzsKCQkJJG91dFsndGV4dCddIC49ICc8cD4nLl9MKCdZb3UgbmVlZCB0byBlbmFibGUgSmF2YVNjcmlwdCB0byB1c2UgdGhlIGxvZ2luIGFyZWEu'));
	@fwrite($fp, base64_decode('JykuJzwvcD4nOwoJCQkkb3V0Wyd0ZXh0J10gLj0gJzwvbm9zY3JpcHQ+JzsKCgkJCSRvdXRbJ3RleHQnXSAuPSAnPGRpdiBpZD0ibG9naW5MZGFwQXJlYSIgc3R5bGU9InZpc2liaWxpdHk6IGhpZGRlbiI+JzsKCQkJJG91dFsndGV4dCddIC49IChPSURwbHVzOjpi'));
	@fwrite($fp, base64_decode('YXNlQ29uZmlnKCktPmdldFZhbHVlKCdSRUNBUFRDSEFfRU5BQkxFRCcsIGZhbHNlKSA/CgkJCSAgICAgICAgICAgICAgICAnPHA+Jy5fTCgnQmVmb3JlIGxvZ2dpbmcgaW4sIHBsZWFzZSBzb2x2ZSB0aGUgZm9sbG93aW5nIENBUFRDSEEnKS4nPC9wPicuCgkJCSAg'));
	@fwrite($fp, base64_decode('ICAgICAgICAgICAgICAnPGRpdiBpZD0iZy1yZWNhcHRjaGEiIGNsYXNzPSJnLXJlY2FwdGNoYSIgZGF0YS1zaXRla2V5PSInLk9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ1JFQ0FQVENIQV9QVUJMSUMnLCAnJykuJyI+PC9kaXY+Jy4KCQkJICAgICAg'));
	@fwrite($fp, base64_decode('ICAgICAgICAgICc8c2NyaXB0PiBncmVjYXB0Y2hhLnJlbmRlcigkKCIjZy1yZWNhcHRjaGEiKVswXSwgeyAic2l0ZWtleSIgOiAiJy5PSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdSRUNBUFRDSEFfUFVCTElDJywgJycpLiciIH0pOyA8L3NjcmlwdD4n'));
	@fwrite($fp, base64_decode('IDogJycpOwoJCQkkb3V0Wyd0ZXh0J10gLj0gJzxicj4nOwoKCQkJJG91dFsndGV4dCddIC49ICc8cD48YSAnLk9JRHBsdXM6Omd1aSgpLT5saW5rKCdvaWRwbHVzOmxvZ2luJykuJz48aW1nIHNyYz0iaW1nL2Fycm93X2JhY2sucG5nIiB3aWR0aD0iMTYiIGFsdD0i'));
	@fwrite($fp, base64_decode('Jy5fTCgnR28gYmFjaycpLiciPiAnLl9MKCdSZWd1bGFyIGxvZ2luIG1ldGhvZCcpLic8L2E+PC9wPic7CgoJCQkkb3V0Wyd0ZXh0J10gLj0gJzxoMj4nLl9MKCdMb2dpbiBhcyBSQScpLic8L2gyPic7CgoJCQkkbG9naW5fbGlzdCA9IE9JRHBsdXM6OmF1dGhVdGls'));
	@fwrite($fp, base64_decode('cygpLT5sb2dnZWRJblJhTGlzdCgpOwoJCQlpZiAoY291bnQoJGxvZ2luX2xpc3QpID4gMCkgewoJCQkJZm9yZWFjaCAoJGxvZ2luX2xpc3QgYXMgJHgpIHsKCQkJCQkkb3V0Wyd0ZXh0J10gLj0gJzxwPicuX0woJ1lvdSBhcmUgbG9nZ2VkIGluIGFzICUxJywnPGI+'));
	@fwrite($fp, base64_decode('Jy4keC0+cmFFbWFpbCgpLic8L2I+JykuJyAoPGEgaHJlZj0iIyIgb25jbGljaz0icmV0dXJuIE9JRHBsdXNQYWdlUHVibGljTG9naW4ucmFMb2dvdXQoJy5qc19lc2NhcGUoJHgtPnJhRW1haWwoKSkuJyk7Ij4nLl9MKCdMb2dvdXQnKS4nPC9hPik8L3A+JzsKCQkJ'));
	@fwrite($fp, base64_decode('CX0KCQkJCSRvdXRbJ3RleHQnXSAuPSAnPHA+Jy5fTCgnSWYgeW91IGhhdmUgbW9yZSBhY2NvdW50cywgeW91IGNhbiBsb2cgaW4gd2l0aCBhbm90aGVyIGFjY291bnQgaGVyZS4nKS4nPC9wPic7CgkJCX0gZWxzZSB7CgkJCQkkb3V0Wyd0ZXh0J10gLj0gJzxwPicu'));
	@fwrite($fp, base64_decode('X0woJ0VudGVyIHlvdXIgZG9tYWluIHVzZXJuYW1lIChlLmcuIDxiPnVzZXJuYW1lQGNvbnRvc28ubG9jYWw8L2I+KSBhbmQgeW91ciBwYXNzd29yZCB0byBsb2cgaW4gYXMgUmVnaXN0cmF0aW9uIEF1dGhvcml0eS4nKS4nPC9wPic7CgkJCX0KCQkJJG91dFsndGV4'));
	@fwrite($fp, base64_decode('dCddIC49ICc8Zm9ybSBvbnN1Ym1pdD0icmV0dXJuIE9JRHBsdXNQYWdlUHVibGljTG9naW5MREFQLnJhTG9naW5MZGFwT25TdWJtaXQodGhpcyk7Ij4nOwoJCQkkb3V0Wyd0ZXh0J10gLj0gJzxkaXY+PGxhYmVsIGNsYXNzPSJwYWRkaW5nX2xhYmVsIj4nLl9MKCdV'));
	@fwrite($fp, base64_decode('c2VybmFtZScpLic6PC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0iZW1haWwiIHZhbHVlPSIiIGlkPSJyYUxvZ2luTGRhcEVNYWlsIj48L2Rpdj4nOwoJCQkkb3V0Wyd0ZXh0J10gLj0gJzxkaXY+PGxhYmVsIGNsYXNzPSJwYWRkaW5nX2xhYmVsIj4nLl9M'));
	@fwrite($fp, base64_decode('KCdQYXNzd29yZCcpLic6PC9sYWJlbD48aW5wdXQgdHlwZT0icGFzc3dvcmQiIG5hbWU9InBhc3N3b3JkIiB2YWx1ZT0iIiBpZD0icmFMb2dpbkxkYXBQYXNzd29yZCI+PC9kaXY+JzsKCQkJaWYgKE9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ0pXVF9B'));
	@fwrite($fp, base64_decode('TExPV19MT0dJTl9VU0VSJywgdHJ1ZSkpIHsKCQkJCWlmICgoT0lEcGx1czo6YXV0aFV0aWxzKCktPmdldEF1dGhNZXRob2QoKSA9PT0gT0lEcGx1c0F1dGhDb250ZW50U3RvcmVKV1Q6OmNsYXNzKSkgewoJCQkJCWlmIChPSURwbHVzOjphdXRoVXRpbHMoKS0+Z2V0'));
	@fwrite($fp, base64_decode('RXh0ZW5kZWRBdHRyaWJ1dGUoJ29pZHBsdXNfZ2VuZXJhdG9yJywtMSkgPT09IE9JRHBsdXNBdXRoQ29udGVudFN0b3JlSldUOjpKV1RfR0VORVJBVE9SX0xPR0lOKSB7CgkJCQkJCSRhdHQgPSAnZGlzYWJsZWQgY2hlY2tlZCc7CgkJCQkJfSBlbHNlIHsKCQkJCQkJ'));
	@fwrite($fp, base64_decode('JGF0dCA9ICdkaXNhYmxlZCc7CgkJCQkJfQoJCQkJfSBlbHNlIGlmICgoT0lEcGx1czo6YXV0aFV0aWxzKCktPmdldEF1dGhNZXRob2QoKSA9PT0gT0lEcGx1c0F1dGhDb250ZW50U3RvcmVTZXNzaW9uOjpjbGFzcykpIHsKCQkJCQkkYXR0ID0gJ2Rpc2FibGVkJzsK'));
	@fwrite($fp, base64_decode('CQkJCX0gZWxzZSB7CgkJCQkJJGF0dCA9ICcnOwoJCQkJfQoJCQkJJG91dFsndGV4dCddIC49ICc8ZGl2PjxpbnB1dCAnLiRhdHQuJyB0eXBlPSJjaGVja2JveCIgdmFsdWU9IjEiIGlkPSJyZW1lbWJlcl9tZV9sZGFwIiBuYW1lPSJyZW1lbWJlcl9tZV9sZGFwIj4g'));
	@fwrite($fp, base64_decode('PGxhYmVsIGZvcj0icmVtZW1iZXJfbWVfbGRhcCI+Jy5fTCgnUmVtZW1iZXIgbWUnKS4nPC9sYWJlbD48L2Rpdj4nOwoJCQl9CgkJCSRvdXRbJ3RleHQnXSAuPSAnPGJyPjxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSInLl9MKCdMb2dpbicpLiciPjxicj48YnI+'));
	@fwrite($fp, base64_decode('JzsKCQkJJG91dFsndGV4dCddIC49ICc8L2Zvcm0+JzsKCgkJCSRpbnZpdGVQbHVnaW4gPSBPSURwbHVzOjpnZXRQbHVnaW5CeU9pZCgnMS4zLjYuMS40LjEuMzc0NzYuMi41LjIuNC4yLjkyJyk7IC8vIE9JRHBsdXNQYWdlUmFJbnZpdGUKCQkJJG91dFsndGV4dCdd'));
	@fwrite($fp, base64_decode('IC49ICc8cD48YWJiciB0aXRsZT0iJy5fTCgnWW91IGRvblwndCBuZWVkIHRvIHJlZ2lzdGVyLiBKdXN0IGVudGVyIHlvdXIgV2luZG93cy9Db21wYW55IGNyZWRlbnRpYWxzLicpLiciPicuX0woJ0hvdyB0byByZWdpc3Rlcj8nKS4nPC9hYmJyPjwvcD4nOwoKCQkJ'));
	@fwrite($fp, base64_decode('JG1pbnMgPSBjZWlsKE9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ1NFU1NJT05fTElGRVRJTUUnLCAzMCo2MCkvNjApOwoJCQkkb3V0Wyd0ZXh0J10gLj0gJzxwPjxmb250IHNpemU9Ii0xIj4nLl9MKCc8aT5Qcml2YWN5IGluZm9ybWF0aW9uPC9pPjog'));
	@fwrite($fp, base64_decode('QnkgdXNpbmcgdGhlIGxvZ2luIGZ1bmN0aW9uYWxpdHksIHlvdSBhcmUgYWNjZXB0aW5nIHRoYXQgYSAic2Vzc2lvbiBjb29raWUiIGlzIHRlbXBvcmFyaWx5IHN0b3JlZCBpbiB5b3VyIGJyb3dzZXIuIFRoZSBzZXNzaW9uIGNvb2tpZSBpcyBhIHNtYWxsIHRleHQg'));
	@fwrite($fp, base64_decode('ZmlsZSB0aGF0IGlzIHNlbnQgdG8gdGhpcyB3ZWJzaXRlIGV2ZXJ5IHRpbWUgeW91IHZpc2l0IGl0LCB0byBpZGVudGlmeSB5b3UgYXMgYW4gYWxyZWFkeSBsb2dnZWQgaW4gdXNlci4gSXQgZG9lcyBub3QgdHJhY2sgYW55IG9mIHlvdXIgb25saW5lIGFjdGl2aXRp'));
	@fwrite($fp, base64_decode('ZXMgb3V0c2lkZSBPSURwbHVzLiBUaGUgY29va2llIHdpbGwgYmUgZGVzdHJveWVkIHdoZW4geW91IGxvZyBvdXQgb3IgYWZ0ZXIgYW4gaW5hY3Rpdml0eSBvZiAlMSBtaW51dGVzLicsICRtaW5zKTsKCQkJJHByaXZhY3lfZG9jdW1lbnRfZmlsZSA9ICdPSURwbHVz'));
	@fwrite($fp, base64_decode('L3ByaXZhY3lfZG9jdW1lbnRhdGlvbi5odG1sJzsKCQkJJHJlc291cmNlUGx1Z2luID0gT0lEcGx1czo6Z2V0UGx1Z2luQnlPaWQoJzEuMy42LjEuNC4xLjM3NDc2LjIuNS4yLjQuMS41MDAnKTsgLy8gT0lEcGx1c1BhZ2VQdWJsaWNSZXNvdXJjZXMKCQkJaWYgKCFp'));
	@fwrite($fp, base64_decode('c19udWxsKCRyZXNvdXJjZVBsdWdpbikgJiYgZmlsZV9leGlzdHMoT0lEcGx1czo6bG9jYWxwYXRoKCkuJ3Jlcy8nLiRwcml2YWN5X2RvY3VtZW50X2ZpbGUpKSB7CgkJCQkkb3V0Wyd0ZXh0J10gLj0gJyA8YSAnLk9JRHBsdXM6Omd1aSgpLT5saW5rKCdvaWRwbHVz'));
	@fwrite($fp, base64_decode('OnJlc291cmNlcyQnLiRwcml2YWN5X2RvY3VtZW50X2ZpbGUuJyNjb29raWVzJykuJz4nLl9MKCdNb3JlIGluZm9ybWF0aW9uIGFib3V0IHRoZSBjb29raWVzIHVzZWQnKS4nPC9hPic7CgkJCX0KCQkJJG91dFsndGV4dCddIC49ICc8L2ZvbnQ+PC9wPjwvZGl2Pic7'));
	@fwrite($fp, base64_decode('CgoJCQkkb3V0Wyd0ZXh0J10gLj0gJzxzY3JpcHQ+JCgiI2xvZ2luTGRhcEFyZWEiKVswXS5zdHlsZS52aXNpYmlsaXR5ID0gInZpc2libGUiOzwvc2NyaXB0Pic7CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBwdWJsaWNTaXRlbWFwKCYkb3V0KSB7CgkJJG91dFtd'));
	@fwrite($fp, base64_decode('ID0gJ29pZHBsdXM6bG9naW5fbGRhcCc7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHRyZWUoJiRqc29uLCAkcmFfZW1haWw9bnVsbCwgJG5vbmpzPWZhbHNlLCAkcmVxX2dvdG89JycpIHsKCQlyZXR1cm4gdHJ1ZTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gdHJlZV9zZWFy'));
	@fwrite($fp, base64_decode('Y2goJHJlcXVlc3QpIHsKCQlyZXR1cm4gZmFsc2U7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGltcGxlbWVudHNGZWF0dXJlKCRpZCkgewoJCWlmIChzdHJ0b2xvd2VyKCRpZCkgPT0gJzEuMy42LjEuNC4xLjM3NDc2LjIuNS4yLjMuNScpIHJldHVybiB0cnVlOyAvLyBh'));
	@fwrite($fp, base64_decode('bHRlcm5hdGl2ZUxvZ2luTWV0aG9kcwoJCXJldHVybiBmYWxzZTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gYWx0ZXJuYXRpdmVMb2dpbk1ldGhvZHMoKSB7CgkJJGxvZ2lucyA9IGFycmF5KCk7CgkJaWYgKE9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ0xE'));
	@fwrite($fp, base64_decode('QVBfRU5BQkxFRCcsIGZhbHNlKSkgewoJCQkkbG9naW5zW10gPSBhcnJheSgKCQkJCSdvaWRwbHVzOmxvZ2luX2xkYXAnLAoJCQkJX0woJ0xvZ2luIHVzaW5nIExEQVAgLyBBY3RpdmVEaXJlY3RvcnknKSwKCQkJCU9JRHBsdXM6OndlYnBhdGgoX19ESVJfXykuJ3Ry'));
	@fwrite($fp, base64_decode('ZWVpY29uLnBuZycKCQkJKTsKCQl9CgkJcmV0dXJuICRsb2dpbnM7Cgl9Cn0K'));
	@fclose($fp);
}
if (!is_file('plugins/publicPages/800_login_ldap/OIDplusPagePublicLoginLDAP.class.php')) {
	warn('File has vanished! Will re-create it: plugins/publicPages/800_login_ldap/OIDplusPagePublicLoginLDAP.class.php');
	writefile_4();
	if (!is_file('plugins/publicPages/800_login_ldap/OIDplusPagePublicLoginLDAP.class.php')) {
		warn('File cannot be created (not existing): plugins/publicPages/800_login_ldap/OIDplusPagePublicLoginLDAP.class.php');
	} else if (sha1_file('plugins/publicPages/800_login_ldap/OIDplusPagePublicLoginLDAP.class.php') != '47af9bf93ac9b4cbcfb46caf40ded91e121dc20e') {
		warn('File cannot be created (checksum mismatch): plugins/publicPages/800_login_ldap/OIDplusPagePublicLoginLDAP.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/publicPages/800_login_ldap/OIDplusPagePublicLoginLDAP.class.php', 0644)) {
		warn('Could not change file permissions of plugins/publicPages/800_login_ldap/OIDplusPagePublicLoginLDAP.class.php');
	}
} else {
	if (@sha1_file('plugins/publicPages/800_login_ldap/OIDplusPagePublicLoginLDAP.class.php') !== '47af9bf93ac9b4cbcfb46caf40ded91e121dc20e') {
		if (@sha1_file('plugins/publicPages/800_login_ldap/OIDplusPagePublicLoginLDAP.class.php') !== 'a43e191a44cf298174d3fa4beaa02059cc6ffd87') {
			warn('File was modified. Will overwrite the changes now: plugins/publicPages/800_login_ldap/OIDplusPagePublicLoginLDAP.class.php');
			$tmp = pathinfo('plugins/publicPages/800_login_ldap/OIDplusPagePublicLoginLDAP.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/publicPages/800_login_ldap/OIDplusPagePublicLoginLDAP.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/publicPages/800_login_ldap/OIDplusPagePublicLoginLDAP.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_4();
		if (@sha1_file('plugins/publicPages/800_login_ldap/OIDplusPagePublicLoginLDAP.class.php') !== '47af9bf93ac9b4cbcfb46caf40ded91e121dc20e') {
			warn('File cannot be written (checksum mismatch): plugins/publicPages/800_login_ldap/OIDplusPagePublicLoginLDAP.class.php');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 622\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 622') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

