<?php /* <ViaThinkSoftSignature>
sBEoq1vX03OnyBleK7UiSTmwDWvn6OVWbB0afxSe5lNRP2yyn2qB4sniVcDqBSJPx
EGz3OIxi5IvwSqyKcjy1EbiIzpvSKi0qRXmESRWTI+nUk9TdS2YHJY4FdbXotff/q
61o07xTryRR9rxrAiubAsAy0VhHqui4qmx6YFo33YYBIarXzf0tCOYjVQ1AdxCeaM
ArcwD5bLAjLMwkiwe3wjA+v6A5/OjEsIc+JL8JnUJQkh0+7itjyze5kK13MENfhvj
RhzSyFasWTtyudue0G3UykgtojdzPhx0MR/OizAsjdZoScAQLgIbyRlzALaRM6coh
ulvwjtB9958euEltv7ctAdw/YFFpH7G+pewi7QiLJUlyOSiI9fCt3Tb8wvoYgVgiL
2R6XYKb0hX0X0SAKS9af2CY00OEMlaKuswkLQ09WmghBl70pn0HoWwtCpc78f1JdP
69Mn/fXK0CQHcymjBT2CzEk2ATKIJBDgIOYzx+0MzM17HKxIvg0COYBlYqhiId6yq
Z8OF1NtZJG2wHbpMFZn34EwbV4nLbzIpIYzRkCJPe57L6mjKwG4Y+wAtN2z+Hf+5v
sbrdwaxXZKuSrwdQcBj/LNYum2+FZpz7h2xPZkHI14rPej73wAs+PCHTfRmIKzbvY
sZFNLJ4QDptV/x1e4JMY8MVrX92XJcVAhIUvD8jjB4GuGWS6NEt0Kebix6lJJV+X8
viupqAhLzE7edO2dLyBVbgpdt+xOicICKRudZceZWg9xZUfJlt6brsyey4vUhjnJX
qCmZnrKDViZ9CDbJkSu35mygorVJn+sLgTvS6Uy7N0plF9lSe5xu6LL7JnmhxhzZX
pHhYS6+UAOeAxMSam7pU8Hotl56bgNmgAxGDtLzoMZxshOVOQThKdhI6bhs5/3Nz2
f3qy0OTSFgrQYVnxrmspHd2eD82TaBByD4UAaxcAqMKflnw9ENLbThNJd/PuPVcc9
32UjpoZnYCiiaHEHTEikKCqZANW0/AnkB2DD5qQD0HxhXLwLxrmOg3JL8Y1p9Mc/7
17mwtOPBFUS+td/u7SB3Tjfk42wyJ1URaPtMEyYtzaeCyHRbOd2KE0amd6EksXdpm
Ez4TPNRGBqDT4j2D8pMmpeiAaCDdjfUBSc7zenYXeqJdVH/NowJdHCQNOf11wf3F2
GMEzCvzAeAUUAjNpVzMobZnvaYHw0DVmTw4w2czb4g47ULYT+Bd6EynEqu/P0poeH
X8rhMBVjzlDx1u9u/J0KL6li+RqHiqcJj452SsQJY5UcedWTx4mWVjw635JSNfEag
3/B7bqC+4A13FWaYQw0461KlR9IDIiuiBHhE6gh8xd5+A7UOyDCvX3/SWkg+6Fcti
A==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 241') {
	err('This update can only be applied to OIDplus version 2.0.0.241!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: includes/classes/OIDplusDataBasePlugin.class.php
function writefile_1() {
	@$fp = fopen('includes/classes/OIDplusDataBasePlugin.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmlmICghZGVmaW5lZCgnSU5fT0lEUExVUycpKSBkaWUoKTsKCmFic3RyYWN0IGNsYXNzIE9JRHBsdXNEYXRhQmFzZVBsdWdpbiBleHRlbmRzIE9JRHBsdXNQbHVnaW4gewoJcHJvdGVjdGVkICRjb25u'));
	@fwrite($fp, base64_decode('ZWN0ZWQgPSBmYWxzZTsKCXByb3RlY3RlZCAkaHRtbCA9IG51bGw7CgoJcHVibGljIGFic3RyYWN0IHN0YXRpYyBmdW5jdGlvbiBuYW1lKCk6IHN0cmluZzsgLy8gdGhpcyBpcyB0aGUgbmFtZSB0aGF0IGlzIHNldCB0byB0aGUgY29uZmlndXJhdGlvbiB2YWx1ZSBP'));
	@fwrite($fp, base64_decode('SURQTFVTX0RBVEFCQVNFX1BMVUdJTiB0byBpZGVudGlmeSB0aGUgZGF0YWJhc2UgcGx1Z2luCglwdWJsaWMgYWJzdHJhY3QgZnVuY3Rpb24gcXVlcnkoc3RyaW5nICRzcWwsIC8qP2FycmF5Ki8gJHByZXBhcmVkX2FyZ3M9bnVsbCk6IE9JRHBsdXNRdWVyeVJlc3Vs'));
	@fwrite($fp, base64_decode('dDsKCXB1YmxpYyBhYnN0cmFjdCBmdW5jdGlvbiBpbnNlcnRfaWQoKTogaW50OwoJcHVibGljIGFic3RyYWN0IGZ1bmN0aW9uIGVycm9yKCk6IHN0cmluZzsKCXB1YmxpYyBhYnN0cmFjdCBmdW5jdGlvbiB0cmFuc2FjdGlvbl9iZWdpbigpOiB2b2lkOwoJcHVibGlj'));
	@fwrite($fp, base64_decode('IGFic3RyYWN0IGZ1bmN0aW9uIHRyYW5zYWN0aW9uX2NvbW1pdCgpOiB2b2lkOwoJcHVibGljIGFic3RyYWN0IGZ1bmN0aW9uIHRyYW5zYWN0aW9uX3JvbGxiYWNrKCk6IHZvaWQ7CgoJcHVibGljIGZ1bmN0aW9uIG5hdE9yZGVyKCRmaWVsZG5hbWUsICRvcmRlcj0n'));
	@fwrite($fp, base64_decode('YXNjJyk6IHN0cmluZyB7CgkKCQkkb3JkZXIgPSBzdHJ0b2xvd2VyKCRvcmRlcik7CgkJaWYgKCgkb3JkZXIgIT0gJ2FzYycpICYmICgkb3JkZXIgIT0gJ2Rlc2MnKSkgewoJCQl0aHJvdyBuZXcgRXhjZXB0aW9uKCJJbnZhbGlkIG9yZGVyICckb3JkZXInIChuZWVk'));
	@fwrite($fp, base64_decode('cyB0byBiZSAnYXNjJyBvciAnZGVzYycpIik7CgkJfQoKCQkkbWF4ZGVwdGggPSAxMDA7IC8vIGFkanVzdCB0aGlzIGlmIHlvdSBoYXZlIHBlcmZvcm1hbmNlIGlzc3VlcyAob25seSBNeVNRTCkKCQkkbWF4X2FyY19sZW4gPSAxMDAwOwoJCQoJCSRvdXQgPSBhcnJh'));
	@fwrite($fp, base64_decode('eSgpOwoJCQoJCWlmICgkdGhpcy0+c2xhbmcoKSA9PSAncGdzcWwnKSB7CgkJCQoJCQkvLyAxLiBTb3J0IGJ5IG5hbWVzcGFjZSAob2lkLCBndWlkLCAuLi4pCgkJCSRvdXRbXSA9ICJTUExJVF9QQVJUKCRmaWVsZG5hbWUsICc6JywgMSkgJG9yZGVyIjsKCQkJCgkJ'));
	@fwrite($fp, base64_decode('CS8vIDIuIE9ubHkgaWYgbmFtZXNwYWNlIGlzICdvaWQ6JzogU29ydCBPSUQgYXMgaW50ZWdlciBhcnJheQoJCQkkb3V0W10gPSAiU1RSSU5HX1RPX0FSUkFZKFNQTElUX1BBUlQoJGZpZWxkbmFtZSwgJ29pZDonLCAyKSwgJy4nKTo6bnVtZXJpYygkbWF4X2FyY19s'));
	@fwrite($fp, base64_decode('ZW4pW10gJG9yZGVyIjsKCQkJCgkJCS8vIDMuIE90aGVyd2lzZSBvcmRlciBieSBJRAoJCQkkb3V0W10gPSAiJGZpZWxkbmFtZSAkb3JkZXIiOwoJCQkKCQl9IGVsc2UgaWYgKCR0aGlzLT5zbGFuZygpID09ICdteXNxbCcpIHsKCQkJCgkJCS8vIDEuIHNvcnQgYnkg'));
	@fwrite($fp, base64_decode('bmFtZXNwYWNlIChvaWQsIGd1aWQsIC4uLikKCQkJJG91dFtdID0gIlNVQlNUUklOR19JTkRFWCgkZmllbGRuYW1lLCc6JywxKSAkb3JkZXIiOwoJCQkKCQkJLy8gMi4gc29ydCBieSBmaXJzdCBhcmMgKDAsMSwyKQoJCQkkb3V0W10gPSAiU1VCU1RSSU5HKFNVQlNU'));
	@fwrite($fp, base64_decode('UklOR19JTkRFWCgkZmllbGRuYW1lLCcuJywxKSwgTEVOR1RIKFNVQlNUUklOR19JTkRFWCgkZmllbGRuYW1lLCc6JywxKSkrMiwgJG1heF9hcmNfbGVuKSAkb3JkZXIiOwoJCQkKCQkJZm9yICgkaT0yOyAkaTw9JG1heGRlcHRoOyAkaSsrKSB7CgkJCQkvLyAzLiBT'));
	@fwrite($fp, base64_decode('b3J0IGJ5IHRoZSByZXN0IGFyY3Mgb25lIGJ5IG9uZSwgbm90IHRoYXQgTXlTUUwgY2FuIG9ubHkgaGFuZGxlIGRlY2ltYWwoNjUpLCBub3QgZGVjaW1hbCgkbWF4X2FyY19sZW4pCgkJCQkkb3V0W10gPSAiY2FzdChTVUJTVFJJTkcoU1VCU1RSSU5HX0lOREVYKCRm'));
	@fwrite($fp, base64_decode('aWVsZG5hbWUsJy4nLCRpKSwgTEVOR1RIKFNVQlNUUklOR19JTkRFWCgkZmllbGRuYW1lLCcuJywiLigkaS0xKS4iKSkrMiwgJG1heF9hcmNfbGVuKSBhcyBkZWNpbWFsKDY1KSkgJG9yZGVyIjsKCQkJfQoKCQkJLy8gNC4gYXMgbGFzdCByZXNvcnQsIHNvcnQgYnkg'));
	@fwrite($fp, base64_decode('dGhlIGlkZW50aWZpZXIgaXRzZWxmLCBlLmcuIGlmIHRoZSBjYXN0cyBhYm92ZSBkaWQgZmFpbCAoaGFwcGVucyBpZiBpdCBpcyBub3QgYW4gT0lEKQkJCQoJCQkkb3V0W10gPSAiJGZpZWxkbmFtZSAkb3JkZXIiOwoJCQkKCQl9IGVsc2UgaWYgKCR0aGlzLT5zbGFu'));
	@fwrite($fp, base64_decode('ZygpID09ICdtc3NxbCcpIHsKCQkKCQkJLy8gMS4gc29ydCBieSBuYW1lc3BhY2UgKG9pZCwgZ3VpZCwgLi4uKQoJCQkkb3V0W10gPSAic3Vic3RyaW5nKCRmaWVsZG5hbWUsMSxjaGFyaW5kZXgoJzonLCRmaWVsZG5hbWUpLTEpICRvcmRlciI7CgkJCQoJCQlmb3Ig'));
	@fwrite($fp, base64_decode('KCRpPTE7ICRpPD0kbWF4ZGVwdGg7ICRpKyspIHsKCQkJCS8vIDIuIFNvcnQgYnkgdGhlIHJlc3QgYXJjcyBvbmUgYnkgb25lLCBub3QgdGhhdCBNeVNRTCBjYW4gb25seSBoYW5kbGUgZGVjaW1hbCg2NSksIG5vdCBkZWNpbWFsKCRtYXhfYXJjX2xlbikKCQkJCSRv'));
	@fwrite($fp, base64_decode('dXRbXSA9ICJkYm8uZ2V0T2lkQXJjKCRmaWVsZG5hbWUsICcuJywgJGkpICRvcmRlciI7CgkJCX0KCgkJCS8vIDMuIGFzIGxhc3QgcmVzb3J0LCBzb3J0IGJ5IHRoZSBpZGVudGlmaWVyIGl0c2VsZiwgZS5nLiBpZiB0aGUgZnVuY3Rpb24gZ2V0T2lkQXJjIGFsd2F5'));
	@fwrite($fp, base64_decode('cyByZXR1cm4gMCAoaGFwcGVucyBpZiBpdCBpcyBub3QgYW4gT0lEKQkJCQoJCQkkb3V0W10gPSAiJGZpZWxkbmFtZSAkb3JkZXIiOwoJCX0gZWxzZSB7CgkJCgkJCS8vIEZvciAoeWV0KSB1bnN1cHBvcnRlZCBEQk1TLCB3ZSBkbyBub3Qgb2ZmZXIgbmF0dXJhbCBz'));
	@fwrite($fp, base64_decode('b3J0CgkJCSRvdXRbXSA9ICIkZmllbGRuYW1lICRvcmRlciI7CgoJCX0KCgkJcmV0dXJuIGltcGxvZGUoJywgJywgJG91dCk7IAoJfQoKCXByb3RlY3RlZCBmdW5jdGlvbiBhZnRlckNvbm5lY3QoKTogdm9pZCB7CgkJLy8gQ2hlY2sgaWYgZGF0YWJhc2UgdGFibGVz'));
	@fwrite($fp, base64_decode('IGFyZSBleGlzdGluZwoJCSR0YWJsZV9uYW1lcyA9IGFycmF5KCdvYmplY3RzJywgJ2FzbjFpZCcsICdpcmknLCAncmEnLCAnY29uZmlnJyk7CgkJZm9yZWFjaCAoJHRhYmxlX25hbWVzIGFzICR0YWJsZW5hbWUpIHsKCQkJdHJ5IHsKCQkJCSR0aGlzLT5xdWVyeSgi'));
	@fwrite($fp, base64_decode('c2VsZWN0IDAgZnJvbSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4kdGFibGVuYW1lLiIgd2hlcmUgMT0wIik7CgkJCX0gY2F0Y2ggKEV4Y2VwdGlvbiAkZSkgewoJCQkJdGhyb3cgbmV3IE9JRHBsdXNDb25maWdJbml0aWFsaXphdGlvbkV4Y2VwdGlvbignVGFi'));
	@fwrite($fp, base64_decode('bGUgJy5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguJHRhYmxlbmFtZS4nIGlzIG1pc3NpbmchJyk7CgkJCX0KCQl9CgoJCS8vIERvIHRoZSBkYXRhYmFzZSB0YWJsZSB0YWJsZXMgbmVlZCBhbiB1cGRhdGU/CgkJLy8gTm90ZTogVGhlIGNvbmZpZyBzZXR0aW5nICJk'));
	@fwrite($fp, base64_decode('YXRhYmFzZV92ZXJzaW9uIiBpcyBpbnNlcnRlZCBpbiBzZXR1cC9zcWwvLi4uc3FsLCBub3QgaW4gdGhlIE9JRHBsdXMgY29yZSBpbml0CgoJCSRyZXMgPSAkdGhpcy0+cXVlcnkoIlNFTEVDVCB2YWx1ZSBGUk9NICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJj'));
	@fwrite($fp, base64_decode('b25maWcgV0hFUkUgbmFtZSA9ICdkYXRhYmFzZV92ZXJzaW9uJyIpOwoJCSRyb3cgPSAkcmVzLT5mZXRjaF9hcnJheSgpOwoJCQoJCWlmICgkcm93ID09IG51bGwpIHsKCQkJdGhyb3cgbmV3IE9JRHBsdXNDb25maWdJbml0aWFsaXphdGlvbkV4Y2VwdGlvbignQ2Fu'));
	@fwrite($fp, base64_decode('bm90IGRldGVybWluZSBkYXRhYmFzZSB2ZXJzaW9uICh0aGUgZW50cnkgImRhdGFiYXNlX3ZlcnNpb24iIGluc2lkZSB0aGUgdGFibGUgIicuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLidjb25maWciIGlzIHByb2JhYmx5IG1pc3NpbmcpJyk7CgkJfQoJCQoJCSR2'));
	@fwrite($fp, base64_decode('ZXJzaW9uID0gJHJvd1sndmFsdWUnXTsKCQlpZiAoJHZlcnNpb24gPT0gMjAwKSB7CgkJCSR0aGlzLT50cmFuc2FjdGlvbl9iZWdpbigpOwoJCQkkdGhpcy0+cXVlcnkoIkFMVEVSIFRBQkxFICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJvYmplY3RzIEFERCBj'));
	@fwrite($fp, base64_decode('b21tZW50IHZhcmNoYXIoMjU1KSBOVUxMIik7CgkJCSR2ZXJzaW9uID0gMjAxOwoJCQkkdGhpcy0+cXVlcnkoIlVQREFURSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4iY29uZmlnIFNFVCB2YWx1ZSA9ID8gV0hFUkUgbmFtZSA9ICdkYXRhYmFzZV92ZXJzaW9u'));
	@fwrite($fp, base64_decode('JyIsIGFycmF5KCR2ZXJzaW9uKSk7CgkJCSR0aGlzLT50cmFuc2FjdGlvbl9jb21taXQoKTsKCQl9CgkJaWYgKCR2ZXJzaW9uID09IDIwMSkgewoJCQkvLyBDaGFuZ2UgYml0KDEpIHR5cGVzIHRvIGJvb2xlYW4vdGlueWludCgxKQoJCQkkdGhpcy0+dHJhbnNhY3Rp'));
	@fwrite($fp, base64_decode('b25fYmVnaW4oKTsKCQkJaWYgKCR0aGlzLT5zbGFuZygpID09ICdwZ3NxbCcpIHsKCQkJCSR0aGlzLT5xdWVyeSgiYWx0ZXIgdGFibGUgIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguImNvbmZpZyAgYWx0ZXIgcHJvdGVjdGVkICAgIGRyb3AgZGVmYXVsdCIpOwoJ'));
	@fwrite($fp, base64_decode('CQkJJHRoaXMtPnF1ZXJ5KCJhbHRlciB0YWJsZSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4iY29uZmlnICBhbHRlciBwcm90ZWN0ZWQgICAgdHlwZSBib29sZWFuIHVzaW5nIGdldF9iaXQocHJvdGVjdGVkICAgLDApOjpib29sZWFuIik7CgkJCQkkdGhpcy0+'));
	@fwrite($fp, base64_decode('cXVlcnkoImFsdGVyIHRhYmxlICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJjb25maWcgIGFsdGVyIHByb3RlY3RlZCAgICBzZXQgZGVmYXVsdCBmYWxzZSIpOwoJCQkJCgkJCQkkdGhpcy0+cXVlcnkoImFsdGVyIHRhYmxlICIuT0lEUExVU19UQUJMRU5BTUVf'));
	@fwrite($fp, base64_decode('UFJFRklYLiJjb25maWcgIGFsdGVyIHZpc2libGUgICAgICBkcm9wIGRlZmF1bHQiKTsKCQkJCSR0aGlzLT5xdWVyeSgiYWx0ZXIgdGFibGUgIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguImNvbmZpZyAgYWx0ZXIgdmlzaWJsZSAgICAgIHR5cGUgYm9vbGVhbiB1'));
	@fwrite($fp, base64_decode('c2luZyBnZXRfYml0KHZpc2libGUgICAgICwwKTo6Ym9vbGVhbiIpOwoJCQkJJHRoaXMtPnF1ZXJ5KCJhbHRlciB0YWJsZSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4iY29uZmlnICBhbHRlciB2aXNpYmxlICAgICAgc2V0IGRlZmF1bHQgZmFsc2UiKTsKCgkJ'));
	@fwrite($fp, base64_decode('CQkkdGhpcy0+cXVlcnkoImFsdGVyIHRhYmxlICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJhc24xaWQgIGFsdGVyIHN0YW5kYXJkaXplZCBkcm9wIGRlZmF1bHQiKTsKCQkJCSR0aGlzLT5xdWVyeSgiYWx0ZXIgdGFibGUgIi5PSURQTFVTX1RBQkxFTkFNRV9Q'));
	@fwrite($fp, base64_decode('UkVGSVguImFzbjFpZCAgYWx0ZXIgc3RhbmRhcmRpemVkIHR5cGUgYm9vbGVhbiB1c2luZyBnZXRfYml0KHN0YW5kYXJkaXplZCwwKTo6Ym9vbGVhbjsiKTsKCQkJCSR0aGlzLT5xdWVyeSgiYWx0ZXIgdGFibGUgIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguImFz'));
	@fwrite($fp, base64_decode('bjFpZCAgYWx0ZXIgc3RhbmRhcmRpemVkIHNldCBkZWZhdWx0IGZhbHNlIik7CgoJCQkJJHRoaXMtPnF1ZXJ5KCJhbHRlciB0YWJsZSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4iYXNuMWlkICBhbHRlciB3ZWxsX2tub3duICAgZHJvcCBkZWZhdWx0Iik7CgkJ'));
	@fwrite($fp, base64_decode('CQkkdGhpcy0+cXVlcnkoImFsdGVyIHRhYmxlICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJhc24xaWQgIGFsdGVyIHdlbGxfa25vd24gICB0eXBlIGJvb2xlYW4gdXNpbmcgZ2V0X2JpdCh3ZWxsX2tub3duICAsMCk6OmJvb2xlYW47Iik7CgkJCQkkdGhpcy0+'));
	@fwrite($fp, base64_decode('cXVlcnkoImFsdGVyIHRhYmxlICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJhc24xaWQgIGFsdGVyIHdlbGxfa25vd24gICBzZXQgZGVmYXVsdCBmYWxzZSIpOwoKCQkJCSR0aGlzLT5xdWVyeSgiYWx0ZXIgdGFibGUgIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVG'));
	@fwrite($fp, base64_decode('SVguImlyaSAgICAgYWx0ZXIgbG9uZ2FyYyAgICAgIGRyb3AgZGVmYXVsdCIpOwoJCQkJJHRoaXMtPnF1ZXJ5KCJhbHRlciB0YWJsZSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4iaXJpICAgICBhbHRlciBsb25nYXJjICAgICAgdHlwZSBib29sZWFuIHVzaW5n'));
	@fwrite($fp, base64_decode('IGdldF9iaXQobG9uZ2FyYyAgICAgLDApOjpib29sZWFuOyIpOwoJCQkJJHRoaXMtPnF1ZXJ5KCJhbHRlciB0YWJsZSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4iaXJpICAgICBhbHRlciBsb25nYXJjICAgICAgc2V0IGRlZmF1bHQgZmFsc2UiKTsKCgkJCQkk'));
	@fwrite($fp, base64_decode('dGhpcy0+cXVlcnkoImFsdGVyIHRhYmxlICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJpcmkgICAgIGFsdGVyIHdlbGxfa25vd24gICBkcm9wIGRlZmF1bHQiKTsKCQkJCSR0aGlzLT5xdWVyeSgiYWx0ZXIgdGFibGUgIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVG'));
	@fwrite($fp, base64_decode('SVguImlyaSAgICAgYWx0ZXIgd2VsbF9rbm93biAgIHR5cGUgYm9vbGVhbiB1c2luZyBnZXRfYml0KHdlbGxfa25vd24gICwwKTo6Ym9vbGVhbjsiKTsKCQkJCSR0aGlzLT5xdWVyeSgiYWx0ZXIgdGFibGUgIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguImlyaSAg'));
	@fwrite($fp, base64_decode('ICAgYWx0ZXIgd2VsbF9rbm93biAgIHNldCBkZWZhdWx0IGZhbHNlIik7CgoJCQkJJHRoaXMtPnF1ZXJ5KCJhbHRlciB0YWJsZSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4ib2JqZWN0cyBhbHRlciBjb25maWRlbnRpYWwgdHlwZSBib29sZWFuIHVzaW5nIGdl'));
	@fwrite($fp, base64_decode('dF9iaXQoY29uZmlkZW50aWFsLDApOjpib29sZWFuOyIpOwoKCQkJCSR0aGlzLT5xdWVyeSgiYWx0ZXIgdGFibGUgIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguInJhICAgICAgYWx0ZXIgcHJpdmFjeSAgICAgIGRyb3AgZGVmYXVsdCIpOwoJCQkJJHRoaXMtPnF1'));
	@fwrite($fp, base64_decode('ZXJ5KCJhbHRlciB0YWJsZSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4icmEgICAgICBhbHRlciBwcml2YWN5ICAgICAgdHlwZSBib29sZWFuIHVzaW5nIGdldF9iaXQocHJpdmFjeSAgICAgLDApOjpib29sZWFuOyIpOwoJCQkJJHRoaXMtPnF1ZXJ5KCJhbHRl'));
	@fwrite($fp, base64_decode('ciB0YWJsZSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4icmEgICAgICBhbHRlciBwcml2YWN5ICAgICAgc2V0IGRlZmF1bHQgZmFsc2UiKTsKCQkJfSBlbHNlIGlmICgkdGhpcy0+c2xhbmcoKSA9PSAnbXlzcWwnKSB7CgkJCQkkdGhpcy0+cXVlcnkoImFsdGVy'));
	@fwrite($fp, base64_decode('IHRhYmxlICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJjb25maWcgIG1vZGlmeSBwcm90ZWN0ZWQgICAgYm9vbGVhbjsiKTsKCQkJCSR0aGlzLT5xdWVyeSgiYWx0ZXIgdGFibGUgIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguImNvbmZpZyAgbW9kaWZ5IHZp'));
	@fwrite($fp, base64_decode('c2libGUgICAgICBib29sZWFuOyIpOwoJCQkJJHRoaXMtPnF1ZXJ5KCJhbHRlciB0YWJsZSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4iYXNuMWlkICBtb2RpZnkgc3RhbmRhcmRpemVkIGJvb2xlYW47Iik7CgkJCQkkdGhpcy0+cXVlcnkoImFsdGVyIHRhYmxl'));
	@fwrite($fp, base64_decode('ICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJhc24xaWQgIG1vZGlmeSB3ZWxsX2tub3duICAgYm9vbGVhbjsiKTsKCQkJCSR0aGlzLT5xdWVyeSgiYWx0ZXIgdGFibGUgIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguImlyaSAgICAgbW9kaWZ5IGxvbmdhcmMg'));
	@fwrite($fp, base64_decode('ICAgICBib29sZWFuOyIpOwoJCQkJJHRoaXMtPnF1ZXJ5KCJhbHRlciB0YWJsZSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4iaXJpICAgICBtb2RpZnkgd2VsbF9rbm93biAgIGJvb2xlYW47Iik7CgkJCQkkdGhpcy0+cXVlcnkoImFsdGVyIHRhYmxlICIuT0lE'));
	@fwrite($fp, base64_decode('UExVU19UQUJMRU5BTUVfUFJFRklYLiJvYmplY3RzIG1vZGlmeSBjb25maWRlbnRpYWwgYm9vbGVhbjsiKTsKCQkJCSR0aGlzLT5xdWVyeSgiYWx0ZXIgdGFibGUgIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguInJhICAgICAgbW9kaWZ5IHByaXZhY3kgICAgICBi'));
	@fwrite($fp, base64_decode('b29sZWFuOyIpOwoJCQl9CgkJCQoJCQkvLyBSZW5hbWUgbG9nX3VzZXIudXNlciB0byBsb2dfdXNlci51c2VybmFtZSwgc2luY2UgdXNlciBpcyBhIGtleXdvcmQgaW4gUG9zdGdyZVNRTCBhbmQgTVNTUUwKCQkJaWYgKCR0aGlzLT5zbGFuZygpID09ICdwZ3NxbCcp'));
	@fwrite($fp, base64_decode('IHsKCQkJCSR0aGlzLT5xdWVyeSgiYWx0ZXIgdGFibGUgIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguImxvZ191c2VyIHJlbmFtZSBjb2x1bW4gXCJ1c2VyXCIgdG8gXCJ1c2VybmFtZVwiOyIpOwoJCQl9IGVsc2UgaWYgKCR0aGlzLT5zbGFuZygpID09ICdteXNx'));
	@fwrite($fp, base64_decode('bCcpIHsKCQkJCSR0aGlzLT5xdWVyeSgiYWx0ZXIgdGFibGUgIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguImxvZ191c2VyIGNoYW5nZSBgdXNlcmAgYHVzZXJuYW1lYCB2YXJjaGFyKDI1NSkgTk9UIE5VTEw7Iik7CgkJCX0KICAKCQkJJHZlcnNpb24gPSAyMDI7'));
	@fwrite($fp, base64_decode('CgkJCSR0aGlzLT5xdWVyeSgiVVBEQVRFICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJjb25maWcgU0VUIHZhbHVlID0gPyBXSEVSRSBuYW1lID0gJ2RhdGFiYXNlX3ZlcnNpb24nIiwgYXJyYXkoJHZlcnNpb24pKTsKCQkJJHRoaXMtPnRyYW5zYWN0aW9uX2Nv'));
	@fwrite($fp, base64_decode('bW1pdCgpOwoJCX0KCQlpZiAoJHZlcnNpb24gPT0gMjAyKSB7CgkJCSR0aGlzLT50cmFuc2FjdGlvbl9iZWdpbigpOwoJCQlpZiAoJHRoaXMtPnNsYW5nKCkgPT0gJ21zc3FsJykgewoJCQkJJHNxbCA9ICJDUkVBVEUgRlVOQ1RJT04gW2Rib10uW2dldE9pZEFyY10g'));
	@fwrite($fp, base64_decode('KEBzdHJMaXN0IHZhcmNoYXIoNTEyKSwgQHNlcGFyYXRvciB2YXJjaGFyKDEpLCBAb2NjdXJlbmNlIHRpbnlpbnQpCgkJCQlSRVRVUk5TIGJpZ2ludCBBUwoJCQkJQkVHSU4gCgkJCQkJREVDTEFSRSBAaW50UG9zIHRpbnlpbnQKCQkJCQoJCQkJCURFQ0xBUkUgQGNu'));
	@fwrite($fp, base64_decode('dCB0aW55aW50CgkJCQkJU0VUIEBjbnQgPSAwCgkJCQkKCQkJCQlpZiBzdWJzdHJpbmcoQHN0ckxpc3QsIDEsIDQpIDw+ICdvaWQ6JwoJCQkJCWJlZ2luCgkJCQkJCXJldHVybiAwCgkJCQkJZW5kCgkJCQkKCQkJCQlTRVQgQHN0ckxpc3QgPSBSSUdIVChAc3RyTGlz'));
	@fwrite($fp, base64_decode('dCwgTEVOKEBzdHJMaXN0KS00KTsKCQkJCQoJCQkJCVdISUxFIENIQVJJTkRFWChAc2VwYXJhdG9yLEBzdHJMaXN0KSA+IDAKCQkJCQlCRUdJTgoJCQkJCQlTRVQgQGludFBvcyA9IENIQVJJTkRFWChAc2VwYXJhdG9yLEBzdHJMaXN0KSAKCQkJCQkJU0VUIEBjbnQg'));
	@fwrite($fp, base64_decode('PSBAY250ICsgMQoJCQkJCQlJRiBAY250ID0gQG9jY3VyZW5jZQoJCQkJCQlCRUdJTgoJCQkJCQkJUkVUVVJOIENPTlZFUlQoYmlnaW50LCBMRUZUKEBzdHJMaXN0LEBpbnRQb3MtMSkpOwoJCQkJCQlFTkQKCQkJCQkJU0VUIEBzdHJMaXN0ID0gUklHSFQoQHN0ckxp'));
	@fwrite($fp, base64_decode('c3QsIExFTihAc3RyTGlzdCktQGludFBvcykKCQkJCQlFTkQKCQkJCQlJRiBMRU4oQHN0ckxpc3QpID4gMAoJCQkJCUJFR0lOCgkJCQkJCVNFVCBAY250ID0gQGNudCArIDEKCQkJCQkJSUYgQGNudCA9IEBvY2N1cmVuY2UKCQkJCQkJQkVHSU4KCQkJCQkJCVJFVFVS'));
	@fwrite($fp, base64_decode('TiBDT05WRVJUKGJpZ2ludCwgQHN0ckxpc3QpOwoJCQkJCQlFTkQKCQkJCQlFTkQKCQkJCQoJCQkJCVJFVFVSTiAtMQoJCQkJRU5EIjsKCQkJCSR0aGlzLT5xdWVyeSgkc3FsKTsKCQkJfQoJCQkJCgkJCSR2ZXJzaW9uID0gMjAzOwoJCQkkdGhpcy0+cXVlcnkoIlVQ'));
	@fwrite($fp, base64_decode('REFURSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4iY29uZmlnIFNFVCB2YWx1ZSA9ID8gV0hFUkUgbmFtZSA9ICdkYXRhYmFzZV92ZXJzaW9uJyIsIGFycmF5KCR2ZXJzaW9uKSk7CgkJCSR0aGlzLT50cmFuc2FjdGlvbl9jb21taXQoKTsKCQl9Cgl9CgoJcHJv'));
	@fwrite($fp, base64_decode('dGVjdGVkIGZ1bmN0aW9uIHNob3dDb25uZWN0RXJyb3IoJG1lc3NhZ2UpOiB2b2lkIHsKCQl0aHJvdyBuZXcgT0lEcGx1c0NvbmZpZ0luaXRpYWxpemF0aW9uRXhjZXB0aW9uKCdDb25uZWN0aW9uIHRvIHRoZSBkYXRhYmFzZSBmYWlsZWQhICcuJG1lc3NhZ2UpOwoJ'));
	@fwrite($fp, base64_decode('fQoKCXB1YmxpYyBmdW5jdGlvbiBpc0Nvbm5lY3RlZCgpOiBib29sIHsKCQlyZXR1cm4gJHRoaXMtPmNvbm5lY3RlZDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gaW5pdCgkaHRtbCA9IHRydWUpOiB2b2lkIHsKCQkkdGhpcy0+aHRtbCA9ICRodG1sOwoJfQoKCXB1Ymxp'));
	@fwrite($fp, base64_decode('YyBmdW5jdGlvbiBzbGFuZygpOiBzdHJpbmcgewoJCS8vIFRoZSBjb25zdGFudCBPSURQTFVTX0RCTVNfU0xBTkcgaXMgdXNlZCBhcyBjYWNoZS4KCQkvLyBZb3UgY2FuIGFsc28gcHV0IGl0IGluIHlvdXIgY29uZmlnLmluYy5waHAgaWYgeW91IHdhbnQgdG8gZW5m'));
	@fwrite($fp, base64_decode('b3JjZSBhIHNsYW5nIHRvIGJlIHVzZWQKCgkJaWYgKGRlZmluZWQoJ09JRFBMVVNfREJNU19TTEFORycpKSB7CgkJCXJldHVybiBPSURQTFVTX0RCTVNfU0xBTkc7CgkJfSBlbHNlIHsKCQkJdHJ5IHsKCQkJCS8vIE15U1FMLCBNYXJpYURCIGFuZCBQb3N0Z3JlU1FM'));
	@fwrite($fp, base64_decode('CgkJCQkkdmVycyA9ICR0aGlzLT5xdWVyeSgic2VsZWN0IHZlcnNpb24oKSBhcyBkYm1zX3ZlcnNpb247IiktPmZldGNoX29iamVjdCgpLT5kYm1zX3ZlcnNpb247CgkJCQkkdmVycyA9IHN0cnRvbG93ZXIoJHZlcnMpOwoJCQl9IGNhdGNoIChFeGNlcHRpb24gJGUp'));
	@fwrite($fp, base64_decode('IHsKCQkJCXRyeSB7CgkJCQkJLy8gTWljcm9zb2Z0IFNRTCBTZXJ2ZXIKCQkJCQkkdmVycyA9ICR0aGlzLT5xdWVyeSgic2VsZWN0IEBAdmVyc2lvbiBhcyBkYm1zX3ZlcnNpb247IiktPmZldGNoX29iamVjdCgpLT5kYm1zX3ZlcnNpb247CgkJCQkJJHZlcnMgPSBz'));
	@fwrite($fp, base64_decode('dHJ0b2xvd2VyKCR2ZXJzKTsKCQkJCX0gY2F0Y2ggKEV4Y2VwdGlvbiAkZSkgewoJCQkJCXRocm93IG5ldyBFeGNlcHRpb24oIkNhbm5vdCBkZXRlcm1pbmUgdGhlIHNsYW5nIG9mIHlvdXIgREJNUyAoZnVuY3Rpb24gJ3ZlcnNpb24oKScgY291bGQgbm90IGJlIGNh'));
	@fwrite($fp, base64_decode('bGxlZCkuIFlvdXIgREJNUyBpcyBwcm9iYWJseSBub3Qgc3VwcG9ydGVkLiIpOwoJCQkJfQoJCQl9CgoJCQkkc2xhbmcgPSBudWxsOwoJCQlpZiAoc3RycG9zKCR2ZXJzLCAncG9zdGdyZXNxbCcpICAgICAgICAgICAhPT0gZmFsc2UpICRzbGFuZyA9ICdwZ3NxbCc7'));
	@fwrite($fp, base64_decode('CgkJCWlmIChzdHJwb3MoJHZlcnMsICdteXNxbCcpICAgICAgICAgICAgICAgICE9PSBmYWxzZSkgJHNsYW5nID0gJ215c3FsJzsKCQkJaWYgKHN0cnBvcygkdmVycywgJ21hcmlhZGInKSAgICAgICAgICAgICAgIT09IGZhbHNlKSAkc2xhbmcgPSAnbXlzcWwnOwoJ'));
	@fwrite($fp, base64_decode('CQlpZiAoc3RycG9zKCR2ZXJzLCAnbWljcm9zb2Z0IHNxbCBzZXJ2ZXInKSAhPT0gZmFsc2UpICRzbGFuZyA9ICdtc3NxbCc7CgkJCWlmICghaXNfbnVsbCgkc2xhbmcpKSB7CgkJCQlkZWZpbmUoJ09JRFBMVVNfREJNU19TTEFORycsICRzbGFuZyk7CgkJCQlyZXR1'));
	@fwrite($fp, base64_decode('cm4gJHNsYW5nOwoJCQl9IGVsc2UgewoJCQkJdGhyb3cgbmV3IEV4Y2VwdGlvbigiQ2Fubm90IGRldGVybWluZSB0aGUgc2xhbmcgb2YgeW91ciBEQk1TICh3ZSBkb24ndCBrbm93IHdoYXQgdG8gZG8gd2l0aCB0aGUgREJNUyAnJHZlcnMnKS4gWW91ciBEQk1TIGlz'));
	@fwrite($fp, base64_decode('IHByb2JhYmx5IG5vdCBzdXBwb3J0ZWQuIik7CgkJCX0KCQl9Cgl9Cn0KCg=='));
	@fclose($fp);
}
if (!is_file('includes/classes/OIDplusDataBasePlugin.class.php')) {
	warn('File has vanished! Will re-create it: includes/classes/OIDplusDataBasePlugin.class.php');
	writefile_1();
	if (!is_file('includes/classes/OIDplusDataBasePlugin.class.php')) {
		warn('File cannot be created (not existing): includes/classes/OIDplusDataBasePlugin.class.php');
	} else if (sha1_file('includes/classes/OIDplusDataBasePlugin.class.php') != 'fae9df1d1b8102a6a5999e4e1618177ef5bca6b5') {
		warn('File cannot be created (checksum mismatch): includes/classes/OIDplusDataBasePlugin.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/classes/OIDplusDataBasePlugin.class.php', 0644)) {
		warn('Could not change file permissions of includes/classes/OIDplusDataBasePlugin.class.php');
	}
} else {
	if (@sha1_file('includes/classes/OIDplusDataBasePlugin.class.php') !== 'fae9df1d1b8102a6a5999e4e1618177ef5bca6b5') {
		if (@sha1_file('includes/classes/OIDplusDataBasePlugin.class.php') !== 'd37ee9a8e18b320043318f7f358cbda0009639de') {
			warn('File was modified. Will overwrite the changes now: includes/classes/OIDplusDataBasePlugin.class.php');
			$tmp = pathinfo('includes/classes/OIDplusDataBasePlugin.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/classes/OIDplusDataBasePlugin.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('includes/classes/OIDplusDataBasePlugin.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('includes/classes/OIDplusDataBasePlugin.class.php') !== 'fae9df1d1b8102a6a5999e4e1618177ef5bca6b5') {
			warn('File cannot be written (checksum mismatch): includes/classes/OIDplusDataBasePlugin.class.php');
		}
	}
}

// Files different: index.php
function writefile_2() {
	@$fp = fopen('index.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmhlYWRlcignQ29udGVudC1UeXBlOnRleHQvaHRtbDsgY2hhcnNldD1VVEYtOCcpOwoKcmVxdWlyZV9vbmNlIF9fRElSX18gLiAnL2luY2x1ZGVzL29pZHBsdXMuaW5jLnBocCc7CgpzZXRfZXhjZXB0'));
	@fwrite($fp, base64_decode('aW9uX2hhbmRsZXIoJ2h0bWxfZXhjZXB0aW9uX2hhbmRsZXInKTsKZnVuY3Rpb24gaHRtbF9leGNlcHRpb25faGFuZGxlcigkZXhjZXB0aW9uKSB7CglpZiAoJGV4Y2VwdGlvbiBpbnN0YW5jZW9mIE9JRHBsdXNDb25maWdJbml0aWFsaXphdGlvbkV4Y2VwdGlvbikg'));
	@fwrite($fp, base64_decode('ewoJCWVjaG8gIjxoMT5PSURwbHVzIGluaXRpYWxpemF0aW9uIGVycm9yPC9oMT4iOwoJCWVjaG8gJzxwPicuaHRtbGVudGl0aWVzKCRleGNlcHRpb24tPmdldE1lc3NhZ2UoKSkuJzwvcD4nOwoJCWVjaG8gJzxwPlBsZWFzZSBjaGVjayA8Yj5pbmNsdWRlcy9jb25m'));
	@fwrite($fp, base64_decode('aWcuaW5jLnBocDwvYj4nOwoJCWlmIChpc19kaXIoX19ESVJfXyAuICcvc2V0dXAnKSkgewoJCQllY2hvICcgb3IgcnVuIDxhIGhyZWY9IicuT0lEcGx1czo6Z2V0U3lzdGVtVXJsKCkuJ3NldHVwLyI+c2V0dXA8L2E+IGFnYWluJzsKCQl9CgkJZWNobyAnPC9wPic7'));
	@fwrite($fp, base64_decode('Cgl9IGVsc2UgewoJCWVjaG8gIjxoMT5PSURwbHVzIGVycm9yPC9oMT4iOwoJCS8vIEVOVF9TVUJTVElUVVRFIGJlY2F1c2UgT0RCQyBkcml2ZXJzIG1pZ2h0IHJldHVybiBBTlNJIGluc3RlYWQgb2YgVVRGLTggc3R1ZmYKCQllY2hvICc8cD4nLmh0bWxlbnRpdGll'));
	@fwrite($fp, base64_decode('cygkZXhjZXB0aW9uLT5nZXRNZXNzYWdlKCksIEVOVF9TVUJTVElUVVRFKS4nPC9wPic7CgkJZWNobyAnPHA+PGI+VGVjaG5pY2FsIGluZm9ybWF0aW9uIGFib3V0IHRoZSBwcm9ibGVtOjwvYj48L3A+JzsKCQllY2hvICc8cHJlPic7CgkJZWNobyBnZXRfY2xhc3Mo'));
	@fwrite($fp, base64_decode('JGV4Y2VwdGlvbikuIlxuIjsKCQllY2hvICdhdCAnLiRleGNlcHRpb24tPmdldEZpbGUoKS4nKCcuJGV4Y2VwdGlvbi0+Z2V0TGluZSgpLiIpXG4iOwoJCWVjaG8gIlN0YWNrdHJhY2U6XG4iOwoJCWVjaG8gJGV4Y2VwdGlvbi0+Z2V0VHJhY2VBc1N0cmluZygpOwoJ'));
	@fwrite($fp, base64_decode('CWVjaG8gJzwvcHJlPic7Cgl9Cn0KCm9iX3N0YXJ0KCk7IC8vIGFsbG93IGNvb2tpZSBoZWFkZXJzIHRvIGJlIHNlbnQKCk9JRHBsdXM6OmluaXQodHJ1ZSk7Cgokc3RhdGljX25vZGVfaWQgPSBpc3NldCgkX1JFUVVFU1RbJ2dvdG8nXSkgPyAkX1JFUVVFU1RbJ2dv'));
	@fwrite($fp, base64_decode('dG8nXSA6ICdvaWRwbHVzOnN5c3RlbSc7CiRzdGF0aWMgPSBPSURwbHVzOjpndWkoKTo6Z2VuZXJhdGVDb250ZW50UGFnZSgkc3RhdGljX25vZGVfaWQpOwokc3RhdGljX3RpdGxlID0gJHN0YXRpY1sndGl0bGUnXTsKJHN0YXRpY19pY29uID0gJHN0YXRpY1snaWNv'));
	@fwrite($fp, base64_decode('biddOwokc3RhdGljX2NvbnRlbnQgPSAkc3RhdGljWyd0ZXh0J107CgpmdW5jdGlvbiBjb21iaW5lX3N5c3RlbXRpdGxlX2FuZF9wYWdldGl0bGUoJHN5c3RlbXRpdGxlLCAkcGFnZXRpdGxlKSB7CglpZiAoJHN5c3RlbXRpdGxlID09ICRwYWdldGl0bGUpIHsKCQly'));
	@fwrite($fp, base64_decode('ZXR1cm4gJHN5c3RlbXRpdGxlOwoJfSBlbHNlIHsKCQlyZXR1cm4gJHN5c3RlbXRpdGxlIC4gJyAtICcgLiAkcGFnZXRpdGxlOwoJfQp9Cgokc3lzaWRfb2lkID0gT0lEcGx1czo6Z2V0U3lzdGVtSWQodHJ1ZSk7CmlmICghJHN5c2lkX29pZCkgJHN5c2lkX29pZCA9'));
	@fwrite($fp, base64_decode('ICd1bmtub3duJzsKaGVhZGVyKCdYLU9JRHBsdXMtU3lzdGVtSUQ6Jy4kc3lzaWRfb2lkKTsKCiRzeXNfdXJsID0gT0lEcGx1czo6Z2V0U3lzdGVtVXJsKCk7CmhlYWRlcignWC1PSURwbHVzLVN5c3RlbVVSTDonLiRzeXNfdXJsKTsKCiRzeXNfdmVyID0gT0lEcGx1'));
	@fwrite($fp, base64_decode('czo6Z2V0VmVyc2lvbigpOwppZiAoISRzeXNfdmVyKSAkc3lzX3ZlciA9ICd1bmtub3duJzsKaGVhZGVyKCdYLU9JRHBsdXMtU3lzdGVtVmVyc2lvbjonLiRzeXNfdmVyKTsKCiRzeXNfaW5zdGFsbF90eXBlID0gT0lEcGx1czo6Z2V0SW5zdGFsbFR5cGUoKTsKaGVh'));
	@fwrite($fp, base64_decode('ZGVyKCdYLU9JRHBsdXMtU3lzdGVtSW5zdGFsbFR5cGU6Jy4kc3lzX2luc3RhbGxfdHlwZSk7Cgokc3lzX3RpdGxlID0gT0lEcGx1czo6Y29uZmlnKCktPnN5c3RlbVRpdGxlKCk7CmhlYWRlcignWC1PSURwbHVzLVN5c3RlbVRpdGxlOicuJHN5c190aXRsZSk7Cgpp'));
	@fwrite($fp, base64_decode('ZiAoY2xhc3NfZXhpc3RzKCdPSURwbHVzUGFnZUFkbWluQ29sb3JzJykpIHsKCSRjc3MgPSAnb2lkcGx1cy5taW4uY3NzLnBocD9oX3NoaWZ0PScuKE9JRHBsdXM6OmNvbmZpZygpLT5nZXRWYWx1ZSgnY29sb3JfaHVlX3NoaWZ0JykvMzYwKS4nJnNfc2hpZnQ9Jy4o'));
	@fwrite($fp, base64_decode('T0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdjb2xvcl9zYXRfc2hpZnQnKS8xMDApLicmdl9zaGlmdD0nLihPSURwbHVzOjpjb25maWcoKS0+Z2V0VmFsdWUoJ2NvbG9yX3ZhbF9zaGlmdCcpLzEwMCk7Cn0gZWxzZSB7CgkkY3NzID0gJ29pZHBsdXMubWluLmNz'));
	@fwrite($fp, base64_decode('cy5waHAnOwp9CgokanMgPSAnb2lkcGx1cy5taW4uanMucGhwJzsKCj8+PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KCjxoZWFkPgoJPG1ldGEgaHR0cC1lcXVpdj0iQ29udGVudC1UeXBlIiBjb250ZW50PSJ0ZXh0L2h0bWw7IGNoYXJzZXQ9dXRmLTgi'));
	@fwrite($fp, base64_decode('PgoJPG1ldGEgbmFtZT0iT0lEcGx1cy1TeXN0ZW1JRCIgY29udGVudD0iPD9waHAgZWNobyBodG1sZW50aXRpZXMoJHN5c2lkX29pZCk7ID8+Ij4KCTxtZXRhIG5hbWU9Ik9JRHBsdXMtU3lzdGVtVVJMIiBjb250ZW50PSI8P3BocCBlY2hvIGh0bWxlbnRpdGllcygk'));
	@fwrite($fp, base64_decode('c3lzX3VybCk7ID8+Ij4KCTxtZXRhIG5hbWU9Ik9JRHBsdXMtU3lzdGVtVmVyc2lvbiIgY29udGVudD0iPD9waHAgZWNobyBodG1sZW50aXRpZXMoJHN5c192ZXIpOyA/PiI+Cgk8bWV0YSBuYW1lPSJPSURwbHVzLVN5c3RlbUluc3RhbGxUeXBlIiBjb250ZW50PSI8'));
	@fwrite($fp, base64_decode('P3BocCBlY2hvIGh0bWxlbnRpdGllcygkc3lzX2luc3RhbGxfdHlwZSk7ID8+Ij4KCTxtZXRhIG5hbWU9Ik9JRHBsdXMtU3lzdGVtVGl0bGUiIGNvbnRlbnQ9Ijw/cGhwIGVjaG8gaHRtbGVudGl0aWVzKCRzeXNfdGl0bGUpOyAvKiBEbyBub3QgcmVtb3ZlLiBUaGlz'));
	@fwrite($fp, base64_decode('IG1ldGEgdGFnIGlzIGFjZXNzZWQgYnkgb2lkcGx1c19iYXNlLmpzICovID8+Ij4KCTxtZXRhIG5hbWU9InRoZW1lLWNvbG9yIiBjb250ZW50PSIjQTlEQ0YwIj4KCTxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRp'));
	@fwrite($fp, base64_decode('YWwtc2NhbGU9MS4wIj4KCgk8dGl0bGU+PD9waHAgZWNobyBjb21iaW5lX3N5c3RlbXRpdGxlX2FuZF9wYWdldGl0bGUoT0lEcGx1czo6Y29uZmlnKCktPnN5c3RlbVRpdGxlKCksICRzdGF0aWNfdGl0bGUpOyA/PjwvdGl0bGU+CgoJPHNjcmlwdCBzcmM9Ijw/cGhw'));
	@fwrite($fp, base64_decode('IGVjaG8gaHRtbGVudGl0aWVzKCRqcyk7ID8+Ij48L3NjcmlwdD4KCgk8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Ijw/cGhwIGVjaG8gaHRtbGVudGl0aWVzKCRjc3MpOyA/PiI+Cgk8bGluayByZWw9InNob3J0Y3V0IGljb24iIHR5cGU9ImltYWdlL3gtaWNv'));
	@fwrite($fp, base64_decode('biIgaHJlZj0iaW1nL2Zhdmljb24uaWNvIj4KPC9oZWFkPgoKPGJvZHk+Cgo8ZGl2IGlkPSJmcmFtZXMiPgoJPGRpdiBpZD0iY29udGVudF93aW5kb3ciIGNsYXNzPSJib3JkZXJib3giPgoJCTw/cGhwCgkJJHN0YXRpY19jb250ZW50ID0gcHJlZ19yZXBsYWNlX2Nh'));
	@fwrite($fp, base64_decode('bGxiYWNrKAoJCQknfDxhXHMoW14+XSopaHJlZj0ibWFpbHRvOihbXiJdKykiKFtePl0qKT4oW148XSopPC9hPnxpc21VJywKCQkJZnVuY3Rpb24gKCR0cmVmZmVyKSB7CgkJCQkkZW1haWwgPSAkdHJlZmZlclsyXTsKCQkJCSR0ZXh0ID0gJHRyZWZmZXJbNF07CgkJ'));
	@fwrite($fp, base64_decode('CQlyZXR1cm4gc2VjdXJlX2VtYWlsKCRlbWFpbCwgJHRleHQsIDEpOyAvLyBBbnRpU3BhbQoJCQl9LCAkc3RhdGljX2NvbnRlbnQpOwoKCQllY2hvICc8aDEgaWQ9InJlYWxfdGl0bGUiPic7CgkJaWYgKCRzdGF0aWNfaWNvbiAhPSAnJykgZWNobyAnPGltZyBzcmM9'));
	@fwrite($fp, base64_decode('IicuaHRtbGVudGl0aWVzKCRzdGF0aWNfaWNvbikuJyIgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiBhbHQ9IiI+ICc7CgkJZWNobyBodG1sZW50aXRpZXMoJHN0YXRpY190aXRsZSkuJzwvaDE+JzsKCQllY2hvICc8ZGl2IGlkPSJyZWFsX2NvbnRlbnQiPicuJHN0YXRp'));
	@fwrite($fp, base64_decode('Y19jb250ZW50Lic8L2Rpdj4nOwoJCWlmICgkX1NFUlZFUlsnUkVRVUVTVF9NRVRIT0QnXSA9PSAnR0VUJykgewoJCQllY2hvICc8YnI+PHA+PGltZyBzcmM9ImltZy9zaGFyZS5wbmciIHdpZHRoPSIxNSIgaGVpZ2h0PSIxNSIgYWx0PSJTaGFyZSI+IDxhIGhyZWY9'));
	@fwrite($fp, base64_decode('Ij9nb3RvPScuaHRtbGVudGl0aWVzKCRzdGF0aWNfbm9kZV9pZCkuJyIgaWQ9InN0YXRpY19saW5rIiBjbGFzcz0iZ3JheV9mb290ZXJfZm9udCI+U3RhdGljIGxpbmsgdG8gdGhpcyBwYWdlPC9hPic7CgkJCWVjaG8gJzwvcD4nOwoJCX0KCQllY2hvICc8YnI+JzsK'));
	@fwrite($fp, base64_decode('CQk/PgoJPC9kaXY+CgoJPGRpdiBpZD0ic3lzdGVtX3RpdGxlX2JhciI+CgkJPGRpdiBpZD0ic3lzdGVtX3RpdGxlX21lbnUiIG9uY2xpY2s9Im1vYmlsZU5hdkJ1dHRvbkNsaWNrKHRoaXMpIiBvbm1vdXNlZW50ZXI9Im1vYmlsZU5hdkJ1dHRvbkhvdmVyKHRoaXMp'));
	@fwrite($fp, base64_decode('IiBvbm1vdXNlbGVhdmU9Im1vYmlsZU5hdkJ1dHRvbkhvdmVyKHRoaXMpIj4KCQkJPGRpdiBpZD0iYmFyMSI+PC9kaXY+CgkJCTxkaXYgaWQ9ImJhcjIiPjwvZGl2PgoJCQk8ZGl2IGlkPSJiYXIzIj48L2Rpdj4KCQk8L2Rpdj4KCgkJPGRpdiBpZD0ic3lzdGVtX3Rp'));
	@fwrite($fp, base64_decode('dGxlX3RleHQiPgoJCQk8YSA8P3BocCBlY2hvIG9pZHBsdXNfbGluaygnb2lkcGx1czpzeXN0ZW0nKTsgPz4+CgkJCQk8c3BhbiBpZD0ic3lzdGVtX3RpdGxlXzEiPlZpYVRoaW5rU29mdCBPSURwbHVzIDIuMDwvc3Bhbj48YnI+CgkJCQk8c3BhbiBpZD0ic3lzdGVt'));
	@fwrite($fp, base64_decode('X3RpdGxlXzIiPjw/cGhwIGVjaG8gaHRtbGVudGl0aWVzKE9JRHBsdXM6OmNvbmZpZygpLT5zeXN0ZW1UaXRsZSgpKTsgPz48L3NwYW4+CgkJCTwvYT4KCQk8L2Rpdj4KCTwvZGl2PgoKCTxkaXYgaWQ9ImdvdG9ib3giPgoJCTxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1l'));
	@fwrite($fp, base64_decode('PSJnb3RvIiBpZD0iZ290b2VkaXQiIHZhbHVlPSI8P3BocCBlY2hvIGh0bWxlbnRpdGllcygkc3RhdGljX25vZGVfaWQpOyA/PiI+CgkJPGlucHV0IHR5cGU9ImJ1dHRvbiIgdmFsdWU9IkdvIiBvbmNsaWNrPSJnb3RvQnV0dG9uQ2xpY2tlZCgpIiBpZD0iZ290b2J1'));
	@fwrite($fp, base64_decode('dHRvbiI+Cgk8L2Rpdj4KCgk8ZGl2IGlkPSJvaWR0cmVlIiBjbGFzcz0iYm9yZGVyYm94Ij4KCQk8IS0tIDxub3NjcmlwdD4KCQkJPHA+PGI+UGxlYXNlIGVuYWJsZSBKYXZhU2NyaXB0IHRvIHVzZSBhbGwgZmVhdHVyZXM8L2I+PC9wPgoJCTwvbm9zY3JpcHQ+IC0t'));
	@fwrite($fp, base64_decode('PgoJCTw/cGhwIE9JRHBsdXNUcmVlOjpub25qc19tZW51KCk7ID8+Cgk8L2Rpdj4KPC9kaXY+Cgo8L2JvZHk+CjwvaHRtbD4KPD9waHAKCiRjb250ID0gb2JfZ2V0X2NvbnRlbnRzKCk7Cm9iX2VuZF9jbGVhbigpOwoKZWNobyAkY29udDsK'));
	@fclose($fp);
}
if (!is_file('index.php')) {
	warn('File has vanished! Will re-create it: index.php');
	writefile_2();
	if (!is_file('index.php')) {
		warn('File cannot be created (not existing): index.php');
	} else if (sha1_file('index.php') != 'bc8249b79711aa9b161af7dcac05fb9f48addffb') {
		warn('File cannot be created (checksum mismatch): index.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('index.php', 0644)) {
		warn('Could not change file permissions of index.php');
	}
} else {
	if (@sha1_file('index.php') !== 'bc8249b79711aa9b161af7dcac05fb9f48addffb') {
		if (@sha1_file('index.php') !== 'f3fc34cfb725294451e15b951590c28938ed65ff') {
			warn('File was modified. Will overwrite the changes now: index.php');
			$tmp = pathinfo('index.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('index.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('index.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_2();
		if (@sha1_file('index.php') !== 'bc8249b79711aa9b161af7dcac05fb9f48addffb') {
			warn('File cannot be written (checksum mismatch): index.php');
		}
	}
}

// Files different: setup/sql/struct_mssql.sql
function writefile_3() {
	@$fp = fopen('setup/sql/struct_mssql.sql', 'w');
	@fwrite($fp, base64_decode('SUYgT0JKRUNUX0lEKCdkYm8uYXNuMWlkJywgJ1UnKSBJUyBOT1QgTlVMTCANCglEUk9QIFRBQkxFIFthc24xaWRdDQpJRiBPQkpFQ1RfSUQoJ2Riby5jb25maWcnLCAnVScpIElTIE5PVCBOVUxMIA0KCURST1AgVEFCTEUgW2NvbmZpZ10NCklGIE9CSkVDVF9JRCgn'));
	@fwrite($fp, base64_decode('ZGJvLmlyaScsICdVJykgSVMgTk9UIE5VTEwgDQoJRFJPUCBUQUJMRSBbaXJpXQ0KSUYgT0JKRUNUX0lEKCdkYm8ubG9nJywgJ1UnKSBJUyBOT1QgTlVMTCANCglEUk9QIFRBQkxFIFtsb2ddDQpJRiBPQkpFQ1RfSUQoJ2Riby5sb2dfb2JqZWN0JywgJ1UnKSBJUyBO'));
	@fwrite($fp, base64_decode('T1QgTlVMTCANCglEUk9QIFRBQkxFIFtsb2dfb2JqZWN0XQ0KSUYgT0JKRUNUX0lEKCdkYm8ubG9nX3VzZXInLCAnVScpIElTIE5PVCBOVUxMIA0KCURST1AgVEFCTEUgW2xvZ191c2VyXQ0KSUYgT0JKRUNUX0lEKCdkYm8ub2JqZWN0cycsICdVJykgSVMgTk9UIE5V'));
	@fwrite($fp, base64_decode('TEwgDQoJRFJPUCBUQUJMRSBbb2JqZWN0c10NCklGIE9CSkVDVF9JRCgnZGJvLnJhJywgJ1UnKSBJUyBOT1QgTlVMTCANCglEUk9QIFRBQkxFIFtyYV0NCg0KDQovKioqKioqIE9iamVjdDogIFRhYmxlIFtkYm9dLlthc24xaWRdICAgIFNjcmlwdCBEYXRlOiAwOC4w'));
	@fwrite($fp, base64_decode('NC4yMDIwIDIyOjUxOjQ3ICoqKioqKi8NClNFVCBBTlNJX05VTExTIE9ODQpHTw0KDQpTRVQgUVVPVEVEX0lERU5USUZJRVIgT04NCkdPDQoNClNFVCBBTlNJX1BBRERJTkcgT04NCkdPDQoNCkNSRUFURSBUQUJMRSBbZGJvXS5bYXNuMWlkXSgNCglbbGZkXSBbaW50'));
	@fwrite($fp, base64_decode('XSBJREVOVElUWSgxLDEpIE5PVCBOVUxMLA0KCVtvaWRdIFt2YXJjaGFyXSgyNTUpIE5PVCBOVUxMLA0KCVtuYW1lXSBbdmFyY2hhcl0oMjU1KSBOT1QgTlVMTCwNCglbc3RhbmRhcmRpemVkXSBbYml0XSBOT1QgTlVMTCwNCglbd2VsbF9rbm93bl0gW2JpdF0gTk9U'));
	@fwrite($fp, base64_decode('IE5VTEwsDQogQ09OU1RSQUlOVCBbUEtfYXNuMWlkXSBQUklNQVJZIEtFWSBDTFVTVEVSRUQgDQooDQoJW2xmZF0gQVNDDQopV0lUSCAoUEFEX0lOREVYID0gT0ZGLCBTVEFUSVNUSUNTX05PUkVDT01QVVRFID0gT0ZGLCBJR05PUkVfRFVQX0tFWSA9IE9GRiwgQUxM'));
	@fwrite($fp, base64_decode('T1dfUk9XX0xPQ0tTID0gT04sIEFMTE9XX1BBR0VfTE9DS1MgPSBPTikgT04gW1BSSU1BUlldDQopIE9OIFtQUklNQVJZXQ0KDQpHTw0KDQpTRVQgQU5TSV9QQURESU5HIE9GRg0KR08NCg0KQUxURVIgVEFCTEUgW2Rib10uW2FzbjFpZF0gQUREICBDT05TVFJBSU5U'));
	@fwrite($fp, base64_decode('IFtERl9fYXNuMWlkX19zdGFuZGFyZF9fMjFCNjA1NURdICBERUZBVUxUICgnMCcpIEZPUiBbc3RhbmRhcmRpemVkXQ0KR08NCg0KQUxURVIgVEFCTEUgW2Rib10uW2FzbjFpZF0gQUREICBDT05TVFJBSU5UIFtERl9fYXNuMWlkX193ZWxsX2tub19fMjJBQTI5OTZd'));
	@fwrite($fp, base64_decode('ICBERUZBVUxUICgnMCcpIEZPUiBbd2VsbF9rbm93bl0NCkdPDQoNCg0KLyoqKioqKiBPYmplY3Q6ICBUYWJsZSBbZGJvXS5bY29uZmlnXSAgICBTY3JpcHQgRGF0ZTogMDguMDQuMjAyMCAyMjo1MjoyMiAqKioqKiovDQpTRVQgQU5TSV9OVUxMUyBPTg0KR08NCg0K'));
	@fwrite($fp, base64_decode('U0VUIFFVT1RFRF9JREVOVElGSUVSIE9ODQpHTw0KDQpTRVQgQU5TSV9QQURESU5HIE9ODQpHTw0KDQpDUkVBVEUgVEFCTEUgW2Rib10uW2NvbmZpZ10oDQoJW25hbWVdIFt2YXJjaGFyXSg1MCkgTk9UIE5VTEwsDQoJW3ZhbHVlXSBbdGV4dF0gTk9UIE5VTEwsDQoJ'));
	@fwrite($fp, base64_decode('W2Rlc2NyaXB0aW9uXSBbdmFyY2hhcl0oMjU1KSBOVUxMLA0KCVtwcm90ZWN0ZWRdIFtiaXRdIE5PVCBOVUxMIERFRkFVTFQgKCcwJyksDQoJW3Zpc2libGVdIFtiaXRdIE5PVCBOVUxMIERFRkFVTFQgKCcwJyksDQogQ09OU1RSQUlOVCBbUEtfY29uZmlnXSBQUklN'));
	@fwrite($fp, base64_decode('QVJZIEtFWSBDTFVTVEVSRUQgDQooDQoJW25hbWVdIEFTQw0KKVdJVEggKFBBRF9JTkRFWCA9IE9GRiwgU1RBVElTVElDU19OT1JFQ09NUFVURSA9IE9GRiwgSUdOT1JFX0RVUF9LRVkgPSBPRkYsIEFMTE9XX1JPV19MT0NLUyA9IE9OLCBBTExPV19QQUdFX0xPQ0tT'));
	@fwrite($fp, base64_decode('ID0gT04pIE9OIFtQUklNQVJZXQ0KKSBPTiBbUFJJTUFSWV0gVEVYVElNQUdFX09OIFtQUklNQVJZXQ0KDQpHTw0KDQpTRVQgQU5TSV9QQURESU5HIE9GRg0KR08NCg0KDQovKioqKioqIE9iamVjdDogIFRhYmxlIFtkYm9dLltpcmldICAgIFNjcmlwdCBEYXRlOiAw'));
	@fwrite($fp, base64_decode('OC4wNC4yMDIwIDIyOjUyOjMyICoqKioqKi8NClNFVCBBTlNJX05VTExTIE9ODQpHTw0KDQpTRVQgUVVPVEVEX0lERU5USUZJRVIgT04NCkdPDQoNClNFVCBBTlNJX1BBRERJTkcgT04NCkdPDQoNCkNSRUFURSBUQUJMRSBbZGJvXS5baXJpXSgNCglbbGZkXSBbaW50'));
	@fwrite($fp, base64_decode('XSBJREVOVElUWSgxLDEpIE5PVCBOVUxMLA0KCVtvaWRdIFt2YXJjaGFyXSgyNTUpIE5PVCBOVUxMLA0KCVtuYW1lXSBbdmFyY2hhcl0oMjU1KSBOT1QgTlVMTCwNCglbbG9uZ2FyY10gW2JpdF0gTk9UIE5VTEwsDQoJW3dlbGxfa25vd25dIFtiaXRdIE5PVCBOVUxM'));
	@fwrite($fp, base64_decode('LA0KIENPTlNUUkFJTlQgW1BLX2lyaV0gUFJJTUFSWSBLRVkgQ0xVU1RFUkVEIA0KKA0KCVtsZmRdIEFTQw0KKVdJVEggKFBBRF9JTkRFWCA9IE9GRiwgU1RBVElTVElDU19OT1JFQ09NUFVURSA9IE9GRiwgSUdOT1JFX0RVUF9LRVkgPSBPRkYsIEFMTE9XX1JPV19M'));
	@fwrite($fp, base64_decode('T0NLUyA9IE9OLCBBTExPV19QQUdFX0xPQ0tTID0gT04pIE9OIFtQUklNQVJZXQ0KKSBPTiBbUFJJTUFSWV0NCg0KR08NCg0KU0VUIEFOU0lfUEFERElORyBPRkYNCkdPDQoNCkFMVEVSIFRBQkxFIFtkYm9dLltpcmldIEFERCAgQ09OU1RSQUlOVCBbREZfX2lyaV9f'));
	@fwrite($fp, base64_decode('bG9uZ2FyY19fMjQ5MjcyMDhdICBERUZBVUxUICgnMCcpIEZPUiBbbG9uZ2FyY10NCkdPDQoNCkFMVEVSIFRBQkxFIFtkYm9dLltpcmldIEFERCAgQ09OU1RSQUlOVCBbREZfX2lyaV9fd2VsbF9rbm93bl9fMjU4Njk2NDFdICBERUZBVUxUICgnMCcpIEZPUiBbd2Vs'));
	@fwrite($fp, base64_decode('bF9rbm93bl0NCkdPDQoNCg0KLyoqKioqKiBPYmplY3Q6ICBUYWJsZSBbZGJvXS5bbG9nXSAgICBTY3JpcHQgRGF0ZTogMDguMDQuMjAyMCAyMjo1Mjo0MSAqKioqKiovDQpTRVQgQU5TSV9OVUxMUyBPTg0KR08NCg0KU0VUIFFVT1RFRF9JREVOVElGSUVSIE9ODQpH'));
	@fwrite($fp, base64_decode('Tw0KDQpTRVQgQU5TSV9QQURESU5HIE9ODQpHTw0KDQpDUkVBVEUgVEFCTEUgW2Rib10uW2xvZ10oDQoJW2lkXSBbaW50XSBJREVOVElUWSgxLDEpIE5PVCBOVUxMLA0KCVt1bml4X3RzXSBbYmlnaW50XSBOT1QgTlVMTCwNCglbYWRkcl0gW3ZhcmNoYXJdKDQ1KSBO'));
	@fwrite($fp, base64_decode('T1QgTlVMTCwNCglbZXZlbnRdIFt0ZXh0XSBOT1QgTlVMTCwNCiBDT05TVFJBSU5UIFtQS19sb2ddIFBSSU1BUlkgS0VZIENMVVNURVJFRCANCigNCglbaWRdIEFTQw0KKVdJVEggKFBBRF9JTkRFWCA9IE9GRiwgU1RBVElTVElDU19OT1JFQ09NUFVURSA9IE9GRiwg'));
	@fwrite($fp, base64_decode('SUdOT1JFX0RVUF9LRVkgPSBPRkYsIEFMTE9XX1JPV19MT0NLUyA9IE9OLCBBTExPV19QQUdFX0xPQ0tTID0gT04pIE9OIFtQUklNQVJZXQ0KKSBPTiBbUFJJTUFSWV0gVEVYVElNQUdFX09OIFtQUklNQVJZXQ0KDQpHTw0KDQpTRVQgQU5TSV9QQURESU5HIE9GRg0K'));
	@fwrite($fp, base64_decode('R08NCg0KDQovKioqKioqIE9iamVjdDogIFRhYmxlIFtkYm9dLltsb2dfb2JqZWN0XSAgICBTY3JpcHQgRGF0ZTogMDguMDQuMjAyMCAyMjo1Mjo1MCAqKioqKiovDQpTRVQgQU5TSV9OVUxMUyBPTg0KR08NCg0KU0VUIFFVT1RFRF9JREVOVElGSUVSIE9ODQpHTw0K'));
	@fwrite($fp, base64_decode('DQpTRVQgQU5TSV9QQURESU5HIE9ODQpHTw0KDQpDUkVBVEUgVEFCTEUgW2Rib10uW2xvZ19vYmplY3RdKA0KCVtpZF0gW2ludF0gSURFTlRJVFkoMSwxKSBOT1QgTlVMTCwNCglbbG9nX2lkXSBbaW50XSBOT1QgTlVMTCwNCglbb2JqZWN0XSBbdmFyY2hhcl0oMjU1'));
	@fwrite($fp, base64_decode('KSBOT1QgTlVMTCwNCiBDT05TVFJBSU5UIFtQS19sb2dfb2JqZWN0XSBQUklNQVJZIEtFWSBDTFVTVEVSRUQgDQooDQoJW2lkXSBBU0MNCilXSVRIIChQQURfSU5ERVggPSBPRkYsIFNUQVRJU1RJQ1NfTk9SRUNPTVBVVEUgPSBPRkYsIElHTk9SRV9EVVBfS0VZID0g'));
	@fwrite($fp, base64_decode('T0ZGLCBBTExPV19ST1dfTE9DS1MgPSBPTiwgQUxMT1dfUEFHRV9MT0NLUyA9IE9OKSBPTiBbUFJJTUFSWV0NCikgT04gW1BSSU1BUlldDQoNCkdPDQoNClNFVCBBTlNJX1BBRERJTkcgT0ZGDQpHTw0KDQoNCi8qKioqKiogT2JqZWN0OiAgVGFibGUgW2Rib10uW2xv'));
	@fwrite($fp, base64_decode('Z191c2VyXSAgICBTY3JpcHQgRGF0ZTogMDguMDQuMjAyMCAyMjo1Mjo1OCAqKioqKiovDQpTRVQgQU5TSV9OVUxMUyBPTg0KR08NCg0KU0VUIFFVT1RFRF9JREVOVElGSUVSIE9ODQpHTw0KDQpTRVQgQU5TSV9QQURESU5HIE9ODQpHTw0KDQpDUkVBVEUgVEFCTEUg'));
	@fwrite($fp, base64_decode('W2Rib10uW2xvZ191c2VyXSgNCglbaWRdIFtpbnRdIElERU5USVRZKDEsMSkgTk9UIE5VTEwsDQoJW2xvZ19pZF0gW2ludF0gTk9UIE5VTEwsDQoJW3VzZXJuYW1lXSBbdmFyY2hhcl0oMjU1KSBOT1QgTlVMTCwNCiBDT05TVFJBSU5UIFtQS19sb2dfdXNlcl0gUFJJ'));
	@fwrite($fp, base64_decode('TUFSWSBLRVkgQ0xVU1RFUkVEIA0KKA0KCVtpZF0gQVNDDQopV0lUSCAoUEFEX0lOREVYID0gT0ZGLCBTVEFUSVNUSUNTX05PUkVDT01QVVRFID0gT0ZGLCBJR05PUkVfRFVQX0tFWSA9IE9GRiwgQUxMT1dfUk9XX0xPQ0tTID0gT04sIEFMTE9XX1BBR0VfTE9DS1Mg'));
	@fwrite($fp, base64_decode('PSBPTikgT04gW1BSSU1BUlldDQopIE9OIFtQUklNQVJZXQ0KDQpHTw0KDQpTRVQgQU5TSV9QQURESU5HIE9GRg0KR08NCg0KDQovKioqKioqIE9iamVjdDogIFRhYmxlIFtkYm9dLltvYmplY3RzXSAgICBTY3JpcHQgRGF0ZTogMDguMDQuMjAyMCAyMjo1MzowNyAq'));
	@fwrite($fp, base64_decode('KioqKiovDQpTRVQgQU5TSV9OVUxMUyBPTg0KR08NCg0KU0VUIFFVT1RFRF9JREVOVElGSUVSIE9ODQpHTw0KDQpTRVQgQU5TSV9QQURESU5HIE9ODQpHTw0KDQpDUkVBVEUgVEFCTEUgW2Rib10uW29iamVjdHNdKA0KCVtpZF0gW3ZhcmNoYXJdKDI1NSkgTk9UIE5V'));
	@fwrite($fp, base64_decode('TEwsDQoJW3BhcmVudF0gW3ZhcmNoYXJdKDI1NSkgTlVMTCwNCglbdGl0bGVdIFt2YXJjaGFyXSgyNTUpIE5PVCBOVUxMLA0KCVtkZXNjcmlwdGlvbl0gW3RleHRdIE5PVCBOVUxMLA0KCVtyYV9lbWFpbF0gW3ZhcmNoYXJdKDEwMCkgTlVMTCwNCglbY29uZmlkZW50'));
	@fwrite($fp, base64_decode('aWFsXSBbYml0XSBOT1QgTlVMTCwNCglbY3JlYXRlZF0gW2RhdGV0aW1lXSBOVUxMLA0KCVt1cGRhdGVkXSBbZGF0ZXRpbWVdIE5VTEwsDQoJW2NvbW1lbnRdIFt2YXJjaGFyXSgyNTUpIE5VTEwsDQogQ09OU1RSQUlOVCBbUEtfb2JqZWN0c10gUFJJTUFSWSBLRVkg'));
	@fwrite($fp, base64_decode('Q0xVU1RFUkVEIA0KKA0KCVtpZF0gQVNDDQopV0lUSCAoUEFEX0lOREVYID0gT0ZGLCBTVEFUSVNUSUNTX05PUkVDT01QVVRFID0gT0ZGLCBJR05PUkVfRFVQX0tFWSA9IE9GRiwgQUxMT1dfUk9XX0xPQ0tTID0gT04sIEFMTE9XX1BBR0VfTE9DS1MgPSBPTikgT04g'));
	@fwrite($fp, base64_decode('W1BSSU1BUlldDQopIE9OIFtQUklNQVJZXSBURVhUSU1BR0VfT04gW1BSSU1BUlldDQoNCkdPDQoNClNFVCBBTlNJX1BBRERJTkcgT0ZGDQpHTw0KDQpBTFRFUiBUQUJMRSBbZGJvXS5bb2JqZWN0c10gQUREICBERUZBVUxUIChOVUxMKSBGT1IgW3BhcmVudF0NCkdP'));
	@fwrite($fp, base64_decode('DQoNCg0KLyoqKioqKiBPYmplY3Q6ICBUYWJsZSBbZGJvXS5bcmFdICAgIFNjcmlwdCBEYXRlOiAwOC4wNC4yMDIwIDIyOjUzOjE2ICoqKioqKi8NClNFVCBBTlNJX05VTExTIE9ODQpHTw0KDQpTRVQgUVVPVEVEX0lERU5USUZJRVIgT04NCkdPDQoNClNFVCBBTlNJ'));
	@fwrite($fp, base64_decode('X1BBRERJTkcgT04NCkdPDQoNCkNSRUFURSBUQUJMRSBbZGJvXS5bcmFdKA0KCVtyYV9pZF0gW2ludF0gSURFTlRJVFkoMSwxKSBOT1QgTlVMTCwNCglbZW1haWxdIFt2YXJjaGFyXSgxMDApIE5PVCBOVUxMLA0KCVtyYV9uYW1lXSBbdmFyY2hhcl0oMTAwKSBOT1Qg'));
	@fwrite($fp, base64_decode('TlVMTCwNCglbcGVyc29uYWxfbmFtZV0gW3ZhcmNoYXJdKDEwMCkgTk9UIE5VTEwsDQoJW29yZ2FuaXphdGlvbl0gW3ZhcmNoYXJdKDEwMCkgTk9UIE5VTEwsDQoJW29mZmljZV0gW3ZhcmNoYXJdKDEwMCkgTk9UIE5VTEwsDQoJW3N0cmVldF0gW3ZhcmNoYXJdKDEw'));
	@fwrite($fp, base64_decode('MCkgTk9UIE5VTEwsDQoJW3ppcF90b3duXSBbdmFyY2hhcl0oMTAwKSBOT1QgTlVMTCwNCglbY291bnRyeV0gW3ZhcmNoYXJdKDEwMCkgTk9UIE5VTEwsDQoJW3Bob25lXSBbdmFyY2hhcl0oMTAwKSBOT1QgTlVMTCwNCglbbW9iaWxlXSBbdmFyY2hhcl0oMTAwKSBO'));
	@fwrite($fp, base64_decode('T1QgTlVMTCwNCglbZmF4XSBbdmFyY2hhcl0oMTAwKSBOT1QgTlVMTCwNCglbcHJpdmFjeV0gW2JpdF0gTk9UIE5VTEwsDQoJW3NhbHRdIFt2YXJjaGFyXSgxMDApIE5PVCBOVUxMLA0KCVthdXRoa2V5XSBbdmFyY2hhcl0oMTAwKSBOT1QgTlVMTCwNCglbcmVnaXN0'));
	@fwrite($fp, base64_decode('ZXJlZF0gW2RhdGV0aW1lXSBOVUxMLA0KCVt1cGRhdGVkXSBbZGF0ZXRpbWVdIE5VTEwsDQoJW2xhc3RfbG9naW5dIFtkYXRldGltZV0gTlVMTCwNCiBDT05TVFJBSU5UIFtQS19yYV0gUFJJTUFSWSBLRVkgQ0xVU1RFUkVEIA0KKA0KCVtyYV9pZF0gQVNDDQopV0lU'));
	@fwrite($fp, base64_decode('SCAoUEFEX0lOREVYID0gT0ZGLCBTVEFUSVNUSUNTX05PUkVDT01QVVRFID0gT0ZGLCBJR05PUkVfRFVQX0tFWSA9IE9GRiwgQUxMT1dfUk9XX0xPQ0tTID0gT04sIEFMTE9XX1BBR0VfTE9DS1MgPSBPTikgT04gW1BSSU1BUlldDQopIE9OIFtQUklNQVJZXQ0KDQpH'));
	@fwrite($fp, base64_decode('Tw0KDQpTRVQgQU5TSV9QQURESU5HIE9GRg0KR08NCg0KQUxURVIgVEFCTEUgW2Rib10uW3JhXSBBREQgIENPTlNUUkFJTlQgW0RGX19yYV9fcHJpdmFjeV9fMjk1NzI3MjVdICBERUZBVUxUICgnMCcpIEZPUiBbcHJpdmFjeV0NCkdPDQoNCg0KLyoqKioqKiBPYmpl'));
	@fwrite($fp, base64_decode('Y3Q6ICBVc2VyRGVmaW5lZEZ1bmN0aW9uIFtkYm9dLltnZXRPaWRBcmNdICAgIFNjcmlwdCBEYXRlOiAxMS4wNC4yMDIwIDAwOjAzOjEwICoqKioqKi8NClNFVCBBTlNJX05VTExTIE9ODQpHTw0KDQpTRVQgUVVPVEVEX0lERU5USUZJRVIgT04NCkdPDQoNCkNSRUFU'));
	@fwrite($fp, base64_decode('RSBGVU5DVElPTiBbZGJvXS5bZ2V0T2lkQXJjXSAoQHN0ckxpc3QgdmFyY2hhcig4MDAwKSwgQHNlcGFyYXRvciB2YXJjaGFyKDEpLCBAb2NjdXJlbmNlIHRpbnlpbnQpDQpSRVRVUk5TIGJpZ2ludCBBUw0KQkVHSU4gDQoJREVDTEFSRSBAaW50UG9zIHRpbnlpbnQN'));
	@fwrite($fp, base64_decode('Cg0KCURFQ0xBUkUgQGNudCB0aW55aW50DQoJU0VUIEBjbnQgPSAwDQoNCglpZiBzdWJzdHJpbmcoQHN0ckxpc3QsIDEsIDQpIDw+ICdvaWQ6Jw0KCWJlZ2luDQoJCXJldHVybiAwDQoJZW5kDQoNCglTRVQgQHN0ckxpc3QgPSBSSUdIVChAc3RyTGlzdCwgTEVOKEBz'));
	@fwrite($fp, base64_decode('dHJMaXN0KS00KTsNCg0KCVdISUxFIENIQVJJTkRFWChAc2VwYXJhdG9yLEBzdHJMaXN0KSA+IDANCglCRUdJTg0KCQlTRVQgQGludFBvcyA9IENIQVJJTkRFWChAc2VwYXJhdG9yLEBzdHJMaXN0KSANCgkJU0VUIEBjbnQgPSBAY250ICsgMQ0KCQlJRiBAY250ID0g'));
	@fwrite($fp, base64_decode('QG9jY3VyZW5jZQ0KCQlCRUdJTg0KCQkJUkVUVVJOIENPTlZFUlQoYmlnaW50LCBMRUZUKEBzdHJMaXN0LEBpbnRQb3MtMSkpOw0KCQlFTkQNCgkJU0VUIEBzdHJMaXN0ID0gUklHSFQoQHN0ckxpc3QsIExFTihAc3RyTGlzdCktQGludFBvcykNCglFTkQNCglJRiBM'));
	@fwrite($fp, base64_decode('RU4oQHN0ckxpc3QpID4gMA0KCUJFR0lODQoJCVNFVCBAY250ID0gQGNudCArIDENCgkJSUYgQGNudCA9IEBvY2N1cmVuY2UNCgkJQkVHSU4NCgkJCVJFVFVSTiBDT05WRVJUKGJpZ2ludCwgQHN0ckxpc3QpOw0KCQlFTkQNCglFTkQNCg0KCVJFVFVSTiAtMQ0KRU5E'));
	@fwrite($fp, base64_decode('DQpHTw0KDQoNCg0KSU5TRVJUIElOVE8gW2NvbmZpZ10gKG5hbWUsIGRlc2NyaXB0aW9uLCB2YWx1ZSwgcHJvdGVjdGVkLCB2aXNpYmxlKSBWQUxVRVMgKCdkYXRhYmFzZV92ZXJzaW9uJywgJ1ZlcnNpb24gb2YgdGhlIGRhdGFiYXNlIHRhYmxlcycsICcyMDMnLCAn'));
	@fwrite($fp, base64_decode('MScsICcwJyk7DQo='));
	@fclose($fp);
}
if (!is_file('setup/sql/struct_mssql.sql')) {
	warn('File has vanished! Will re-create it: setup/sql/struct_mssql.sql');
	writefile_3();
	if (!is_file('setup/sql/struct_mssql.sql')) {
		warn('File cannot be created (not existing): setup/sql/struct_mssql.sql');
	} else if (sha1_file('setup/sql/struct_mssql.sql') != 'ff9f5112636836526fa01e4618c87f4f8376a436') {
		warn('File cannot be created (checksum mismatch): setup/sql/struct_mssql.sql');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('setup/sql/struct_mssql.sql', 0644)) {
		warn('Could not change file permissions of setup/sql/struct_mssql.sql');
	}
} else {
	if (@sha1_file('setup/sql/struct_mssql.sql') !== 'ff9f5112636836526fa01e4618c87f4f8376a436') {
		if (@sha1_file('setup/sql/struct_mssql.sql') !== 'fe8705854008d361c75a972d3f833415b0d709f4') {
			warn('File was modified. Will overwrite the changes now: setup/sql/struct_mssql.sql');
			$tmp = pathinfo('setup/sql/struct_mssql.sql');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('setup/sql/struct_mssql.sql')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('setup/sql/struct_mssql.sql', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_3();
		if (@sha1_file('setup/sql/struct_mssql.sql') !== 'ff9f5112636836526fa01e4618c87f4f8376a436') {
			warn('File cannot be written (checksum mismatch): setup/sql/struct_mssql.sql');
		}
	}
}

// Files different: setup/sql/struct_mysql.sql
function writefile_4() {
	@$fp = fopen('setup/sql/struct_mysql.sql', 'w');
	@fwrite($fp, base64_decode('RFJPUCBUQUJMRSBJRiBFWElTVFMgYGNvbmZpZ2A7CkNSRUFURSBUQUJMRSBgY29uZmlnYCAoCiAgYG5hbWVgIHZhcmNoYXIoNTApIE5PVCBOVUxMLAogIGB2YWx1ZWAgdGV4dCBOT1QgTlVMTCwKICBgZGVzY3JpcHRpb25gIHZhcmNoYXIoMjU1KSwKICBgcHJvdGVj'));
	@fwrite($fp, base64_decode('dGVkYCBib29sZWFuIE5PVCBOVUxMIERFRkFVTFQgJzAnLAogIGB2aXNpYmxlYCBib29sZWFuIE5PVCBOVUxMIERFRkFVTFQgJzAnCikgLypFTkdJTkU9SW5ub0RCKi8gREVGQVVMVCBDSEFSU0VUPXV0Zjg7CgpEUk9QIFRBQkxFIElGIEVYSVNUUyBgYXNuMWlkYDsK'));
	@fwrite($fp, base64_decode('Q1JFQVRFIFRBQkxFIGBhc24xaWRgICgKICBgbGZkYCBpbnQoMTEpIE5PVCBOVUxMLAogIGBvaWRgIHZhcmNoYXIoMjU1KSBOT1QgTlVMTCwKICBgbmFtZWAgdmFyY2hhcigyNTUpIE5PVCBOVUxMLAogIGBzdGFuZGFyZGl6ZWRgIGJvb2xlYW4gTk9UIE5VTEwgREVG'));
	@fwrite($fp, base64_decode('QVVMVCAnMCcsCiAgYHdlbGxfa25vd25gIGJvb2xlYW4gTk9UIE5VTEwgREVGQVVMVCAnMCcKKSAvKkVOR0lORT1Jbm5vREIqLyBERUZBVUxUIENIQVJTRVQ9dXRmODsKCkRST1AgVEFCTEUgSUYgRVhJU1RTIGBpcmlgOwpDUkVBVEUgVEFCTEUgYGlyaWAgKAogIGBs'));
	@fwrite($fp, base64_decode('ZmRgIGludCgxMSkgTk9UIE5VTEwsCiAgYG9pZGAgdmFyY2hhcigyNTUpIE5PVCBOVUxMLAogIGBuYW1lYCB2YXJjaGFyKDI1NSkgTk9UIE5VTEwsCiAgYGxvbmdhcmNgIGJvb2xlYW4gTk9UIE5VTEwgREVGQVVMVCAnMCcsCiAgYHdlbGxfa25vd25gIGJvb2xlYW4g'));
	@fwrite($fp, base64_decode('Tk9UIE5VTEwgREVGQVVMVCAnMCcKKSAvKkVOR0lORT1Jbm5vREIqLyBERUZBVUxUIENIQVJTRVQ9dXRmODsKCkRST1AgVEFCTEUgSUYgRVhJU1RTIGBvYmplY3RzYDsKQ1JFQVRFIFRBQkxFIGBvYmplY3RzYCAoCiAgYGlkYCB2YXJjaGFyKDI1NSkgTk9UIE5VTEws'));
	@fwrite($fp, base64_decode('CiAgYHBhcmVudGAgdmFyY2hhcigyNTUpIERFRkFVTFQgTlVMTCwKICBgdGl0bGVgIHZhcmNoYXIoMjU1KSBOT1QgTlVMTCwKICBgZGVzY3JpcHRpb25gIHRleHQgTk9UIE5VTEwsCiAgYHJhX2VtYWlsYCB2YXJjaGFyKDEwMCkgTlVMTCwKICBgY29uZmlkZW50aWFs'));
	@fwrite($fp, base64_decode('YCBib29sZWFuIE5PVCBOVUxMLAogIGBjcmVhdGVkYCBkYXRldGltZSwKICBgdXBkYXRlZGAgZGF0ZXRpbWUsCiAgYGNvbW1lbnRgIHZhcmNoYXIoMjU1KSBOVUxMCikgLypFTkdJTkU9SW5ub0RCKi8gREVGQVVMVCBDSEFSU0VUPXV0Zjg7CgpEUk9QIFRBQkxFIElG'));
	@fwrite($fp, base64_decode('IEVYSVNUUyBgcmFgOwpDUkVBVEUgVEFCTEUgYHJhYCAoCiAgYHJhX2lkYCBpbnQoMTEpIE5PVCBOVUxMLAogIGBlbWFpbGAgdmFyY2hhcigxMDApIE5PVCBOVUxMLAogIGByYV9uYW1lYCB2YXJjaGFyKDEwMCkgTk9UIE5VTEwsCiAgYHBlcnNvbmFsX25hbWVgIHZh'));
	@fwrite($fp, base64_decode('cmNoYXIoMTAwKSBOT1QgTlVMTCwKICBgb3JnYW5pemF0aW9uYCB2YXJjaGFyKDEwMCkgTk9UIE5VTEwsCiAgYG9mZmljZWAgdmFyY2hhcigxMDApIE5PVCBOVUxMLAogIGBzdHJlZXRgIHZhcmNoYXIoMTAwKSBOT1QgTlVMTCwKICBgemlwX3Rvd25gIHZhcmNoYXIo'));
	@fwrite($fp, base64_decode('MTAwKSBOT1QgTlVMTCwKICBgY291bnRyeWAgdmFyY2hhcigxMDApIE5PVCBOVUxMLAogIGBwaG9uZWAgdmFyY2hhcigxMDApIE5PVCBOVUxMLAogIGBtb2JpbGVgIHZhcmNoYXIoMTAwKSBOT1QgTlVMTCwKICBgZmF4YCB2YXJjaGFyKDEwMCkgTk9UIE5VTEwsCiAg'));
	@fwrite($fp, base64_decode('YHByaXZhY3lgIGJvb2xlYW4gTk9UIE5VTEwgREVGQVVMVCAnMCcsCiAgYHNhbHRgIHZhcmNoYXIoMTAwKSBOT1QgTlVMTCwKICBgYXV0aGtleWAgdmFyY2hhcigxMDApIE5PVCBOVUxMLAogIGByZWdpc3RlcmVkYCBkYXRldGltZSwKICBgdXBkYXRlZGAgZGF0ZXRp'));
	@fwrite($fp, base64_decode('bWUsCiAgYGxhc3RfbG9naW5gIGRhdGV0aW1lCikgLypFTkdJTkU9SW5ub0RCKi8gREVGQVVMVCBDSEFSU0VUPXV0Zjg7CgpEUk9QIFRBQkxFIElGIEVYSVNUUyBgbG9nYDsKQ1JFQVRFIFRBQkxFIGBsb2dgICgKICBgaWRgIGludCgxMSkgTk9UIE5VTEwsCiAgYHVu'));
	@fwrite($fp, base64_decode('aXhfdHNgIGJpZ2ludCBOT1QgTlVMTCwKICBgYWRkcmAgdmFyY2hhcig0NSkgTk9UIE5VTEwsCiAgYGV2ZW50YCB0ZXh0IE5PVCBOVUxMCikgLypFTkdJTkU9SW5ub0RCKi8gREVGQVVMVCBDSEFSU0VUPXV0Zjg7CgpEUk9QIFRBQkxFIElGIEVYSVNUUyBgbG9nX3Vz'));
	@fwrite($fp, base64_decode('ZXJgOwpDUkVBVEUgVEFCTEUgYGxvZ191c2VyYCAoCiAgYGlkYCBpbnQoMTEpIE5PVCBOVUxMLAogIGBsb2dfaWRgIGludCgxMSkgTk9UIE5VTEwsCiAgYHVzZXJuYW1lYCB2YXJjaGFyKDI1NSkgTk9UIE5VTEwKKSAvKkVOR0lORT1Jbm5vREIqLyBERUZBVUxUIENI'));
	@fwrite($fp, base64_decode('QVJTRVQ9dXRmODsKCkRST1AgVEFCTEUgSUYgRVhJU1RTIGBsb2dfb2JqZWN0YDsKQ1JFQVRFIFRBQkxFIGBsb2dfb2JqZWN0YCAoCiAgYGlkYCBpbnQoMTEpIE5PVCBOVUxMLAogIGBsb2dfaWRgIGludCgxMSkgTk9UIE5VTEwsCiAgYG9iamVjdGAgdmFyY2hhcigy'));
	@fwrite($fp, base64_decode('NTUpIE5PVCBOVUxMCikgLypFTkdJTkU9SW5ub0RCKi8gREVGQVVMVCBDSEFSU0VUPXV0Zjg7CgpBTFRFUiBUQUJMRSBgY29uZmlnYAogIEFERCBQUklNQVJZIEtFWSAoYG5hbWVgKTsKCkFMVEVSIFRBQkxFIGBhc24xaWRgCiAgQUREIFBSSU1BUlkgS0VZIChgbGZk'));
	@fwrite($fp, base64_decode('YCksCiAgQUREIFVOSVFVRSBLRVkgYG9pZGAgKGBvaWRgLGBuYW1lYCk7CkFMVEVSIFRBQkxFIGBhc24xaWRgCiAgTU9ESUZZIGBsZmRgIGludCgxMSkgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQ7CgpBTFRFUiBUQUJMRSBgaXJpYAogIEFERCBQUklNQVJZIEtFWSAo'));
	@fwrite($fp, base64_decode('YGxmZGApLAogIEFERCBVTklRVUUgS0VZIGBvaWRgIChgb2lkYCxgbmFtZWApOwpBTFRFUiBUQUJMRSBgaXJpYAogIE1PRElGWSBgbGZkYCBpbnQoMTEpIE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5UOwoKQUxURVIgVEFCTEUgYG9iamVjdHNgCiAgQUREIFBSSU1BUlkg'));
	@fwrite($fp, base64_decode('S0VZIChgaWRgKSBVU0lORyBCVFJFRSwKICBBREQgSU5ERVggYHBhcmVudGAgKGBwYXJlbnRgKTsKCkFMVEVSIFRBQkxFIGByYWAKICBBREQgUFJJTUFSWSBLRVkgKGByYV9pZGApLAogIEFERCBVTklRVUUgS0VZIGBlbWFpbGAgKGBlbWFpbGApOwpBTFRFUiBUQUJM'));
	@fwrite($fp, base64_decode('RSBgcmFgCiAgTU9ESUZZIGByYV9pZGAgaW50KDExKSBOT1QgTlVMTCBBVVRPX0lOQ1JFTUVOVDsKCkFMVEVSIFRBQkxFIGBsb2dgCiAgQUREIFBSSU1BUlkgS0VZIChgaWRgKTsKQUxURVIgVEFCTEUgYGxvZ2AKICBNT0RJRlkgYGlkYCBpbnQoMTEpIE5PVCBOVUxM'));
	@fwrite($fp, base64_decode('IEFVVE9fSU5DUkVNRU5UOwoKQUxURVIgVEFCTEUgYGxvZ191c2VyYAogIEFERCBQUklNQVJZIEtFWSAoYGlkYCk7CkFMVEVSIFRBQkxFIGBsb2dfdXNlcmAKICBNT0RJRlkgYGlkYCBpbnQoMTEpIE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5UOwoKQUxURVIgVEFCTEUg'));
	@fwrite($fp, base64_decode('YGxvZ19vYmplY3RgCiAgQUREIFBSSU1BUlkgS0VZIChgaWRgKTsKQUxURVIgVEFCTEUgYGxvZ19vYmplY3RgCiAgTU9ESUZZIGBpZGAgaW50KDExKSBOT1QgTlVMTCBBVVRPX0lOQ1JFTUVOVDsKCklOU0VSVCBJTlRPIGBjb25maWdgIChuYW1lLCBkZXNjcmlwdGlv'));
	@fwrite($fp, base64_decode('biwgdmFsdWUsIHByb3RlY3RlZCwgdmlzaWJsZSkgVkFMVUVTICgnZGF0YWJhc2VfdmVyc2lvbicsICdWZXJzaW9uIG9mIHRoZSBkYXRhYmFzZSB0YWJsZXMnLCAnMjAzJywgJzEnLCAnMCcpOwo='));
	@fclose($fp);
}
if (!is_file('setup/sql/struct_mysql.sql')) {
	warn('File has vanished! Will re-create it: setup/sql/struct_mysql.sql');
	writefile_4();
	if (!is_file('setup/sql/struct_mysql.sql')) {
		warn('File cannot be created (not existing): setup/sql/struct_mysql.sql');
	} else if (sha1_file('setup/sql/struct_mysql.sql') != 'e5ca0decfd67948ffe67623becb6b6e83dd774aa') {
		warn('File cannot be created (checksum mismatch): setup/sql/struct_mysql.sql');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('setup/sql/struct_mysql.sql', 0644)) {
		warn('Could not change file permissions of setup/sql/struct_mysql.sql');
	}
} else {
	if (@sha1_file('setup/sql/struct_mysql.sql') !== 'e5ca0decfd67948ffe67623becb6b6e83dd774aa') {
		if (@sha1_file('setup/sql/struct_mysql.sql') !== 'df0f0bd9b18a613cca90766b7d30ed32a34d4a59') {
			warn('File was modified. Will overwrite the changes now: setup/sql/struct_mysql.sql');
			$tmp = pathinfo('setup/sql/struct_mysql.sql');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('setup/sql/struct_mysql.sql')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('setup/sql/struct_mysql.sql', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_4();
		if (@sha1_file('setup/sql/struct_mysql.sql') !== 'e5ca0decfd67948ffe67623becb6b6e83dd774aa') {
			warn('File cannot be written (checksum mismatch): setup/sql/struct_mysql.sql');
		}
	}
}

// Files different: setup/sql/struct_pgsql.sql
function writefile_5() {
	@$fp = fopen('setup/sql/struct_pgsql.sql', 'w');
	@fwrite($fp, base64_decode('RFJPUCBUQUJMRSBJRiBFWElTVFMgImNvbmZpZyI7CkNSRUFURSBUQUJMRSAiY29uZmlnIiAoCiAgIm5hbWUiIHZhcmNoYXIoNTApIFBSSU1BUlkgS0VZLAogICJ2YWx1ZSIgdGV4dCBOT1QgTlVMTCwKICAiZGVzY3JpcHRpb24iIHZhcmNoYXIoMjU1KSwKICAicHJv'));
	@fwrite($fp, base64_decode('dGVjdGVkIiBib29sZWFuIE5PVCBOVUxMIERFRkFVTFQgZmFsc2UsCiAgInZpc2libGUiIGJvb2xlYW4gTk9UIE5VTEwgREVGQVVMVCBmYWxzZQopOwoKRFJPUCBUQUJMRSBJRiBFWElTVFMgImFzbjFpZCI7CkNSRUFURSBUQUJMRSAiYXNuMWlkIiAoCiAgImxmZCIg'));
	@fwrite($fp, base64_decode('c2VyaWFsIFBSSU1BUlkgS0VZLAogICJvaWQiIHZhcmNoYXIoMjU1KSBOT1QgTlVMTCwKICAibmFtZSIgdmFyY2hhcigyNTUpIE5PVCBOVUxMLAogICJzdGFuZGFyZGl6ZWQiIGJvb2xlYW4gTk9UIE5VTEwgREVGQVVMVCBmYWxzZSwKICAid2VsbF9rbm93biIgYm9v'));
	@fwrite($fp, base64_decode('bGVhbiBOT1QgTlVMTCBERUZBVUxUIGZhbHNlCik7CgpEUk9QIFRBQkxFIElGIEVYSVNUUyAiaXJpIjsKQ1JFQVRFIFRBQkxFICJpcmkiICgKICAibGZkIiBzZXJpYWwgUFJJTUFSWSBLRVksCiAgIm9pZCIgdmFyY2hhcigyNTUpIE5PVCBOVUxMLAogICJuYW1lIiB2'));
	@fwrite($fp, base64_decode('YXJjaGFyKDI1NSkgTk9UIE5VTEwsCiAgImxvbmdhcmMiIGJvb2xlYW4gTk9UIE5VTEwgREVGQVVMVCBmYWxzZSwKICAid2VsbF9rbm93biIgYm9vbGVhbiBOT1QgTlVMTCBERUZBVUxUIGZhbHNlCik7CgpEUk9QIFRBQkxFIElGIEVYSVNUUyAib2JqZWN0cyI7CkNS'));
	@fwrite($fp, base64_decode('RUFURSBUQUJMRSAib2JqZWN0cyIgKAogICJpZCIgdmFyY2hhcigyNTUpIFBSSU1BUlkgS0VZLAogICJwYXJlbnQiIHZhcmNoYXIoMjU1KSBERUZBVUxUIE5VTEwsCiAgInRpdGxlIiB2YXJjaGFyKDI1NSkgTk9UIE5VTEwsCiAgImRlc2NyaXB0aW9uIiB0ZXh0IE5P'));
	@fwrite($fp, base64_decode('VCBOVUxMLAogICJyYV9lbWFpbCIgdmFyY2hhcigxMDApIE5VTEwsCiAgImNvbmZpZGVudGlhbCIgYm9vbGVhbiBOT1QgTlVMTCwKICAiY3JlYXRlZCIgdGltZXN0YW1wLAogICJ1cGRhdGVkIiB0aW1lc3RhbXAsCiAgImNvbW1lbnQiIHZhcmNoYXIoMjU1KSBOVUxM'));
	@fwrite($fp, base64_decode('Cik7CgpEUk9QIFRBQkxFIElGIEVYSVNUUyAicmEiOwpDUkVBVEUgVEFCTEUgInJhIiAoCiAgInJhX2lkIiBzZXJpYWwgUFJJTUFSWSBLRVksCiAgImVtYWlsIiB2YXJjaGFyKDEwMCkgTk9UIE5VTEwsCiAgInJhX25hbWUiIHZhcmNoYXIoMTAwKSBOT1QgTlVMTCwK'));
	@fwrite($fp, base64_decode('ICAicGVyc29uYWxfbmFtZSIgdmFyY2hhcigxMDApIE5PVCBOVUxMLAogICJvcmdhbml6YXRpb24iIHZhcmNoYXIoMTAwKSBOT1QgTlVMTCwKICAib2ZmaWNlIiB2YXJjaGFyKDEwMCkgTk9UIE5VTEwsCiAgInN0cmVldCIgdmFyY2hhcigxMDApIE5PVCBOVUxMLAog'));
	@fwrite($fp, base64_decode('ICJ6aXBfdG93biIgdmFyY2hhcigxMDApIE5PVCBOVUxMLAogICJjb3VudHJ5IiB2YXJjaGFyKDEwMCkgTk9UIE5VTEwsCiAgInBob25lIiB2YXJjaGFyKDEwMCkgTk9UIE5VTEwsCiAgIm1vYmlsZSIgdmFyY2hhcigxMDApIE5PVCBOVUxMLAogICJmYXgiIHZhcmNo'));
	@fwrite($fp, base64_decode('YXIoMTAwKSBOT1QgTlVMTCwKICAicHJpdmFjeSIgYm9vbGVhbiBOT1QgTlVMTCBERUZBVUxUIGZhbHNlLAogICJzYWx0IiB2YXJjaGFyKDEwMCkgTk9UIE5VTEwsCiAgImF1dGhrZXkiIHZhcmNoYXIoMTAwKSBOT1QgTlVMTCwKICAicmVnaXN0ZXJlZCIgdGltZXN0'));
	@fwrite($fp, base64_decode('YW1wLAogICJ1cGRhdGVkIiB0aW1lc3RhbXAsCiAgImxhc3RfbG9naW4iIHRpbWVzdGFtcAopOwoKRFJPUCBUQUJMRSBJRiBFWElTVFMgImxvZyI7CkNSRUFURSBUQUJMRSAibG9nIiAoCiAgImlkIiBzZXJpYWwgUFJJTUFSWSBLRVksCiAgInVuaXhfdHMiIGJpZ2lu'));
	@fwrite($fp, base64_decode('dCBOT1QgTlVMTCwKICAiYWRkciIgdmFyY2hhcig0NSkgTk9UIE5VTEwsCiAgImV2ZW50IiB0ZXh0IE5PVCBOVUxMCik7CgpEUk9QIFRBQkxFIElGIEVYSVNUUyAibG9nX3VzZXIiOwpDUkVBVEUgVEFCTEUgImxvZ191c2VyIiAoCiAgImlkIiBzZXJpYWwgUFJJTUFS'));
	@fwrite($fp, base64_decode('WSBLRVksCiAgImxvZ19pZCIgaW50ZWdlciBOT1QgTlVMTCwKICAidXNlcm5hbWUiIHZhcmNoYXIoMjU1KSBOT1QgTlVMTAopOwoKRFJPUCBUQUJMRSBJRiBFWElTVFMgImxvZ19vYmplY3QiOwpDUkVBVEUgVEFCTEUgImxvZ19vYmplY3QiICgKICAiaWQiIHNlcmlh'));
	@fwrite($fp, base64_decode('bCBQUklNQVJZIEtFWSwKICAibG9nX2lkIiBpbnRlZ2VyIE5PVCBOVUxMLAogICJvYmplY3QiIHZhcmNoYXIoMjU1KSBOT1QgTlVMTAopOwoKRFJPUCBJTkRFWCBJRiBFWElTVFMgImluZGV4X2FzbjFpZF91cV9vaWRfbmFtZSI7CkRST1AgSU5ERVggSUYgRVhJU1RT'));
	@fwrite($fp, base64_decode('ICJpbmRleF9pcmlfdXFfb2lkX25hbWUiOwpEUk9QIElOREVYIElGIEVYSVNUUyAiaW5kZXhfb2JqZWN0c19ma19wYXJlbnQiOwpEUk9QIElOREVYIElGIEVYSVNUUyAiaW5kZXhfcmFfdXFfZW1haWwiOwoKQ1JFQVRFIFVOSVFVRSBJTkRFWCAiaW5kZXhfYXNuMWlk'));
	@fwrite($fp, base64_decode('X3VxX29pZF9uYW1lIiBPTiAiYXNuMWlkIigib2lkIiwibmFtZSIpOwpDUkVBVEUgVU5JUVVFIElOREVYICJpbmRleF9pcmlfdXFfb2lkX25hbWUiICAgIE9OICJpcmkiKCJvaWQiLCJuYW1lIik7CkNSRUFURSAgICAgICAgSU5ERVggImluZGV4X29iamVjdHNfZmtf'));
	@fwrite($fp, base64_decode('cGFyZW50IiAgT04gIm9iamVjdHMiKCJwYXJlbnQiKTsKQ1JFQVRFIFVOSVFVRSBJTkRFWCAiaW5kZXhfcmFfdXFfZW1haWwiICAgICAgICBPTiAicmEiKCJlbWFpbCIpOwoKSU5TRVJUIElOVE8gImNvbmZpZyIgKCJuYW1lIiwgImRlc2NyaXB0aW9uIiwgInZhbHVl'));
	@fwrite($fp, base64_decode('IiwgInByb3RlY3RlZCIsICJ2aXNpYmxlIikgVkFMVUVTICgnZGF0YWJhc2VfdmVyc2lvbicsICdWZXJzaW9uIG9mIHRoZSBkYXRhYmFzZSB0YWJsZXMnLCAnMjAzJywgdHJ1ZSwgZmFsc2UpOwo='));
	@fclose($fp);
}
if (!is_file('setup/sql/struct_pgsql.sql')) {
	warn('File has vanished! Will re-create it: setup/sql/struct_pgsql.sql');
	writefile_5();
	if (!is_file('setup/sql/struct_pgsql.sql')) {
		warn('File cannot be created (not existing): setup/sql/struct_pgsql.sql');
	} else if (sha1_file('setup/sql/struct_pgsql.sql') != '910b6a392c3834c6906ecebc569c3d8f89d67098') {
		warn('File cannot be created (checksum mismatch): setup/sql/struct_pgsql.sql');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('setup/sql/struct_pgsql.sql', 0644)) {
		warn('Could not change file permissions of setup/sql/struct_pgsql.sql');
	}
} else {
	if (@sha1_file('setup/sql/struct_pgsql.sql') !== '910b6a392c3834c6906ecebc569c3d8f89d67098') {
		if (@sha1_file('setup/sql/struct_pgsql.sql') !== '697f559bd7b037e3fd8d79ec14b4ec9dbfd854b8') {
			warn('File was modified. Will overwrite the changes now: setup/sql/struct_pgsql.sql');
			$tmp = pathinfo('setup/sql/struct_pgsql.sql');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('setup/sql/struct_pgsql.sql')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('setup/sql/struct_pgsql.sql', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_5();
		if (@sha1_file('setup/sql/struct_pgsql.sql') !== '910b6a392c3834c6906ecebc569c3d8f89d67098') {
			warn('File cannot be written (checksum mismatch): setup/sql/struct_pgsql.sql');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 242\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 242') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

