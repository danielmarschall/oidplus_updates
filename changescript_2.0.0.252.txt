<?php /* <ViaThinkSoftSignature>
Uwl5/OcFheWuZNISGTY9ysiBp984OjbaOl4Vi+TPJDCNhKWc94OuweG8drZ9fnWYY
39pr6EHr1AZHQpUxPFpS/86mTKgU+sUL+t3vK6j06HalOK3GcQwK8XOVW45fUyjlg
yq/6KYYMWUq/mYxJ5PDDi+nCJX6RszJ95RIl0emdj2tYJ2LMv51eqjFS1gRCzuWyT
XSNGof6/u+CjWHO+wJcutZ+wwAOrj1n5Gror2DgKr6HlQQZra7YxeMsBcOyOLQsz6
Id5YGbHAu2ArvKdMynNdMDrR/OldrtQAUE/RlczqZHpntJ4zu8ntONw/iHRNZ0Hpj
3tOVRPbh9/N6r7T+nz0SV6QwvD3lQNtthWMDKjzWOCYpWKJv6ekLT/OmgSmpPFPms
P+g3A5jCqID1tqDCKmq9NtwioPFxtrTI/8yrhRt0n7dkpV2r1DYTaCVNpQLpTQjG5
voetgOKy91Zt8wIQpnJGCE/raBqz+76jW9jvEot3Q7RpBepCRXMuZd5qetJKHwH9v
dSd2VT+1GotufP8baksNuHA9xym/Em1wlhEtpClExh/fJvCFs3FceXIQTc4vdN7Ng
qmZQ7o/07ucdi5iJ3VnKDVGGRXAnwu+Yw/LnZyEREc333lApSzVnQ9OfR54sxRkWN
KkNVhAfLSqMahOtW0WveHMmWkJie+ymn7b9oWEWYKECGt7G1rURweyJ9DbAiXVAWG
KbduxT4S8TGU3DAAgimvvCw8r9vNdKFelHOunJZEhjDUg4Qb4NNTC6IdyOi3v1NrC
0X4WGSQE9Giq9UyCEmV+kN6s5u1HBqByrulmngoNsn38liDT6srxU41CSSEbDpG6x
uC1jtxIycLQnZqfFicHaV/FKaxtNKDFNvwR7FX2Zi6+t10/SmvP2pPw22qriIIFnz
FzLL2v5cAeiZYiaq6XZlJW/kHNC8jNACyhY0j5C6Xjm1K0Td2AZ0Dxap6Orty/uXW
9sLL4fE34lz8TN54XdD1vMIZDPvK6xfXmoAW9rNdzFeiDaBMMhrkEjHvT+MsNjoHj
pXZ3gJZcUGM8ItN4NHwiM9vpKLj5XuNHfg4A17pHjGZsS3mWgPQAMPD5Rb85sEiP9
hlLrWAMZh315VNkGZzZzLCv2i4+pKvZvAqxzEi0J6kh0indnqnfD4GphQeuwTzaM6
U5KhQOMFfHUB2Qd/AZxqMBwDwTyz3wT8PgdLkPfj5KvPFS/Cm3lb4LmWsyTsRNyEo
YYUkZuXAwNA2kLU+sJRWyY14SjDLpeOmFiZqKjci7NuasdrErrYUxs2aBzm8JZj+i
jDwjb4XKdFOsckJzcuxCSYyYU57MKnxPzrmYJ21kZp5JLfLd9jFStoDGyzxt/c6ZE
w==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 251') {
	err('This update can only be applied to OIDplus version 2.0.0.251!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Files different: ajax.php
function writefile_1() {
	@$fp = fopen('ajax.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCnJlcXVpcmVfb25jZSBfX0RJUl9fIC4gJy9pbmNsdWRlcy9vaWRwbHVzLmluYy5waHAnOwoKT0lEcGx1czo6aW5pdChmYWxzZSk7CgpoZWFkZXIoJ0NvbnRlbnQtVHlwZTphcHBsaWNhdGlvbi9qc29u'));
	@fwrite($fp, base64_decode('OyBjaGFyc2V0PXV0Zi04Jyk7Cgp0cnkgewoJT0lEcGx1czo6ZGIoKS0+dHJhbnNhY3Rpb25fYmVnaW4oKTsKCSRoYW5kbGVkID0gZmFsc2U7CgoJLy8gQWN0aW9uOiAgICAgKGFjdGlvbnMgZGVmaW5lZCBieSBwbHVnaW5zKQoJLy8gTWV0aG9kOiAgICAgR0VUIC8g'));
	@fwrite($fp, base64_decode('UE9TVAoJLy8gUGFyYW1ldGVyczogLi4uCgkvLyBPdXRwdXRzOiAgICAuLi4KCWZvcmVhY2ggKE9JRHBsdXM6OmdldFBhZ2VQbHVnaW5zKCcqJykgYXMgJHBsdWdpbikgewoJCSRwbHVnaW4tPmFjdGlvbigkaGFuZGxlZCk7Cgl9CgoJLy8gQWN0aW9uOiAgICAgZ2V0'));
	@fwrite($fp, base64_decode('X2Rlc2NyaXB0aW9uCgkvLyBNZXRob2Q6ICAgICBHRVQgLyBQT1NUCgkvLyBQYXJhbWV0ZXJzOiBpZAoJLy8gT3V0cHV0czogICAgSlNPTgoJaWYgKGlzc2V0KCRfUkVRVUVTVFsiYWN0aW9uIl0pICYmICgkX1JFUVVFU1RbJ2FjdGlvbiddID09ICdnZXRfZGVzY3Jp'));
	@fwrite($fp, base64_decode('cHRpb24nKSkgewoJCSRoYW5kbGVkID0gdHJ1ZTsKCQlpZiAoIWlzc2V0KCRfUkVRVUVTVFsnaWQnXSkpIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKCJJbnZhbGlkIGFyZ3MiKTsKCQl0cnkgewoJCQkkb3V0ID0gT0lEcGx1czo6Z3VpKCk6OmdlbmVyYXRlQ29u'));
	@fwrite($fp, base64_decode('dGVudFBhZ2UoJF9SRVFVRVNUWydpZCddKTsKCQl9IGNhdGNoKEV4Y2VwdGlvbiAkZSkgewoJCQkkb3V0ID0gYXJyYXkoKTsKCQkJJG91dFsndGl0bGUnXSA9ICdFcnJvcic7CgkJCSRvdXRbJ2ljb24nXSA9ICdpbWcvZXJyb3JfYmlnLnBuZyc7CgkJCSRvdXRbJ3Rl'));
	@fwrite($fp, base64_decode('eHQnXSA9ICRlLT5nZXRNZXNzYWdlKCk7CgkJfQoJCWVjaG8ganNvbl9lbmNvZGUoJG91dCk7Cgl9CgoJLy8gPT09IGpzVHJlZSA9PT0KCgkvLyBBY3Rpb246ICAgICB0cmVlX3NlYXJjaAoJLy8gTWV0aG9kOiAgICAgR0VUIC8gUE9TVAoJLy8gUGFyYW1ldGVyczog'));
	@fwrite($fp, base64_decode('c2VhcmNoCgkvLyBPdXRwdXRzOiAgICBKU09OCglpZiAoaXNzZXQoJF9SRVFVRVNUWyJhY3Rpb24iXSkgJiYgKCRfUkVRVUVTVFsnYWN0aW9uJ10gPT0gJ3RyZWVfc2VhcmNoJykpIHsKCQkkaGFuZGxlZCA9IHRydWU7CgkJaWYgKCFpc3NldCgkX1JFUVVFU1RbJ3Nl'));
	@fwrite($fp, base64_decode('YXJjaCddKSkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oIkludmFsaWQgYXJncyIpOwoKCQkkZm91bmQgPSBmYWxzZTsKCQlmb3JlYWNoIChPSURwbHVzOjpnZXRQYWdlUGx1Z2lucygnKicpIGFzICRwbHVnaW4pIHsKCQkJJHJlcyA9ICRwbHVnaW4tPnRyZWVf'));
	@fwrite($fp, base64_decode('c2VhcmNoKCRfUkVRVUVTVFsnc2VhcmNoJ10pOwoJCQlpZiAoJHJlcykgewoJCQkJZWNobyBqc29uX2VuY29kZSgkcmVzKTsKCQkJCSRmb3VuZCA9IHRydWU7CgkJCQlicmVhazsKCQkJfQoJCX0KCgkJaWYgKCEkZm91bmQpIHsKCQkJZWNobyBqc29uX2VuY29kZShh'));
	@fwrite($fp, base64_decode('cnJheSgpKTsKCQl9Cgl9CgoJLy8gQWN0aW9uOiAgICAgdHJlZV9sb2FkCgkvLyBNZXRob2Q6ICAgICBHRVQgLyBQT1NUCgkvLyBQYXJhbWV0ZXJzOiBpZDsgZ290byAob3B0aW9uYWwpCgkvLyBPdXRwdXRzOiAgICBKU09OCglpZiAoaXNzZXQoJF9SRVFVRVNUWyJh'));
	@fwrite($fp, base64_decode('Y3Rpb24iXSkgJiYgKCRfUkVRVUVTVFsnYWN0aW9uJ10gPT0gJ3RyZWVfbG9hZCcpKSB7CgkJJGhhbmRsZWQgPSB0cnVlOwoJCWlmICghaXNzZXQoJF9SRVFVRVNUWydpZCddKSkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oIkludmFsaWQgYXJncyIpOwoJCSRq'));
	@fwrite($fp, base64_decode('c29uID0gT0lEcGx1czo6bWVudVV0aWxzKCktPmpzb25fdHJlZSgkX1JFUVVFU1RbJ2lkJ10sIGlzc2V0KCRfUkVRVUVTVFsnZ290byddKSA/ICRfUkVRVUVTVFsnZ290byddIDogJycpOwoJCWVjaG8gJGpzb247Cgl9CgoJLy8gPT09IEFkbWluIC8gUkEgYWN0aW9u'));
	@fwrite($fp, base64_decode('cyA9PT0KCgkvLyBBY3Rpb246ICAgICBkZWxldGVfcmEKCS8vIE1ldGhvZDogICAgIFBPU1QKCS8vIFBhcmFtZXRlcnM6IGVtYWlsCgkvLyBPdXRwdXRzOiAgICBUZXh0CglpZiAoaXNzZXQoJF9QT1NUWyJhY3Rpb24iXSkgJiYgKCRfUE9TVFsiYWN0aW9uIl0gPT0g'));
	@fwrite($fp, base64_decode('ImRlbGV0ZV9yYSIpKSB7CgkJJGhhbmRsZWQgPSB0cnVlOwoKCQkkZW1haWwgPSAkX1BPU1RbJ2VtYWlsJ107CgoJCSRyYV9sb2dnZWRfaW4gPSBPSURwbHVzOjphdXRoVXRpbHMoKS0+aXNSYUxvZ2dlZEluKCRlbWFpbCk7CgoJCWlmICghT0lEcGx1czo6YXV0aFV0'));
	@fwrite($fp, base64_decode('aWxzKCktPmlzQWRtaW5Mb2dnZWRJbigpICYmICEkcmFfbG9nZ2VkX2luKSB7CgkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKCdBdXRoZW50aWZpY2F0aW9uIGVycm9yLiBQbGVhc2UgbG9nIGluLicpOwoJCX0KCgkJaWYgKCRyYV9sb2dnZWRfaW4pIE9JRHBs'));
	@fwrite($fp, base64_decode('dXM6OmF1dGhVdGlscygpLT5yYUxvZ291dCgkZW1haWwpOwoKCQkkcmEgPSBuZXcgT0lEcGx1c1JBKCRlbWFpbCk7CgkJJHJhLT5kZWxldGUoKTsKCgkJT0lEcGx1czo6bG9nZ2VyKCktPmxvZygiUkEoJGVtYWlsKT8vQT8iLCAiUkEgJyRlbWFpbCcgZGVsZXRlZCIp'));
	@fwrite($fp, base64_decode('OwoKCQllY2hvIGpzb25fZW5jb2RlKGFycmF5KCJzdGF0dXMiID0+IDApKTsKCX0KCgkvLyA9PT0gT0lEIENSVUQgPT09CgoJLy8gQWN0aW9uOiAgICAgRGVsZXRlCgkvLyBNZXRob2Q6ICAgICBQT1NUCgkvLyBQYXJhbWV0ZXJzOiBpZAoJLy8gT3V0cHV0czogICAg'));
	@fwrite($fp, base64_decode('VGV4dAoJaWYgKGlzc2V0KCRfUE9TVFsiYWN0aW9uIl0pICYmICgkX1BPU1RbImFjdGlvbiJdID09ICJEZWxldGUiKSkgewoJCSRoYW5kbGVkID0gdHJ1ZTsKCgkJJGlkID0gJF9QT1NUWydpZCddOwoJCSRvYmogPSBPSURwbHVzT2JqZWN0OjpwYXJzZSgkaWQpOwoJ'));
	@fwrite($fp, base64_decode('CWlmICgkb2JqID09PSBudWxsKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigiREVMRVRFIGFjdGlvbiBmYWlsZWQgYmVjYXVzZSBvYmplY3QgJyRpZCcgY2Fubm90IGJlIHBhcnNlZCEiKTsKCgkJaWYgKE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgaWQg'));
	@fwrite($fp, base64_decode('ZnJvbSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4ib2JqZWN0cyB3aGVyZSBpZCA9ID8iLCBhcnJheSgkaWQpKS0+bnVtX3Jvd3MoKSA9PSAwKSB7CgkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKCJPYmplY3QgJyRpZCcgZG9lcyBub3QgZXhpc3QiKTsK'));
	@fwrite($fp, base64_decode('CQl9CgoJCS8vIENoZWNrIGlmIHBlcm1pdHRlZAoJCWlmICghJG9iai0+dXNlckhhc1BhcmVudGFsV3JpdGVSaWdodHMoKSkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oJ0F1dGhlbnRpZmljYXRpb24gZXJyb3IuIFBsZWFzZSBsb2cgaW4gYXMgdGhlIHN1cGVy'));
	@fwrite($fp, base64_decode('aW9yIFJBIHRvIGRlbGV0ZSB0aGlzIE9JRC4nKTsKCgkJT0lEcGx1czo6bG9nZ2VyKCktPmxvZygiT0lEKCRpZCkrU1VQT0lEUkEoJGlkKT8vQT8iLCAiT2JqZWN0ICckaWQnIChyZWN1cnNpdmVseSkgZGVsZXRlZCIpOwoJCU9JRHBsdXM6OmxvZ2dlcigpLT5sb2co'));
	@fwrite($fp, base64_decode('Ik9JRFJBKCRpZCkhIiwgIkxvc3Qgb3duZXJzaGlwIG9mIG9iamVjdCAnJGlkJyBiZWNhdXNlIGl0IHdhcyBkZWxldGVkIik7CgoJCWlmICgkcGFyZW50T2JqID0gJG9iai0+Z2V0UGFyZW50KCkpIHsKCQkJT0lEcGx1czo6bG9nZ2VyKCktPmxvZygiT0lEKCIuJHBh'));
	@fwrite($fp, base64_decode('cmVudE9iai0+bm9kZUlkKCkuIikiLCAiT2JqZWN0ICckaWQnIChyZWN1cnNpdmVseSkgZGVsZXRlZCIpOwoJCX0KCgkJLy8gRGVsZXRlIG9iamVjdAoJCU9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJkZWxldGUgZnJvbSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4i'));
	@fwrite($fp, base64_decode('b2JqZWN0cyB3aGVyZSBpZCA9ID8iLCBhcnJheSgkaWQpKTsKCgkJLy8gRGVsZXRlIG9ycGhhbiBzdHVmZgoJCWZvcmVhY2ggKE9JRHBsdXM6OmdldEVuYWJsZWRPYmplY3RUeXBlcygpIGFzICRvdCkgewoJCQlkbyB7CgkJCQkkcmVzID0gT0lEcGx1czo6ZGIoKS0+'));
	@fwrite($fp, base64_decode('cXVlcnkoInNlbGVjdCB0Y2hpbGQuaWQgZnJvbSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4ib2JqZWN0cyB0Y2hpbGQgIiAuCgkJCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgImxlZnQgam9pbiAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4ib2Jq'));
	@fwrite($fp, base64_decode('ZWN0cyB0cGFyZW50IG9uIHRwYXJlbnQuaWQgPSB0Y2hpbGQucGFyZW50ICIgLgoJCQkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ3aGVyZSB0Y2hpbGQucGFyZW50IDw+ID8gYW5kIHRjaGlsZC5pZCBsaWtlID8gYW5kIHRwYXJlbnQuaWQgaXMgbnVsbDsi'));
	@fwrite($fp, base64_decode('LCBhcnJheSgkb3Q6OnJvb3QoKSwgJG90Ojpyb290KCkuJyUnKSk7CgkJCQlpZiAoJHJlcy0+bnVtX3Jvd3MoKSA9PSAwKSBicmVhazsKCgkJCQl3aGlsZSAoJHJvdyA9ICRyZXMtPmZldGNoX2FycmF5KCkpIHsKCQkJCQkkaWRfdG9fZGVsZXRlID0gJHJvd1snaWQn'));
	@fwrite($fp, base64_decode('XTsKCQkJCQlPSURwbHVzOjpsb2dnZXIoKS0+bG9nKCJPSURSQSgkaWRfdG9fZGVsZXRlKSEiLCAiTG9zdCBvd25lcnNoaXAgb2Ygb2JqZWN0ICckaWRfdG9fZGVsZXRlJyBiZWNhdXNlIG9uZSBvZiB0aGUgc3VwZXJpb3Igb2JqZWN0cyAoJyRpZCcpIHdhcyByZWN1'));
	@fwrite($fp, base64_decode('cnNpdmVseSBkZWxldGVkIik7CgkJCQkJT0lEcGx1czo6ZGIoKS0+cXVlcnkoImRlbGV0ZSBmcm9tICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJvYmplY3RzIHdoZXJlIGlkID0gPyIsIGFycmF5KCRpZF90b19kZWxldGUpKTsKCQkJCX0KCQkJfSB3aGlsZSAo'));
	@fwrite($fp, base64_decode('dHJ1ZSk7CgkJfQoJCU9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJkZWxldGUgZnJvbSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4iYXNuMWlkIHdoZXJlIHdlbGxfa25vd24gPSAnMCcgYW5kIG9pZCBub3QgaW4gKHNlbGVjdCBpZCBmcm9tICIuT0lEUExVU19UQUJM'));
	@fwrite($fp, base64_decode('RU5BTUVfUFJFRklYLiJvYmplY3RzIHdoZXJlIGlkIGxpa2UgJ29pZDolJykiKTsKCQlPSURwbHVzOjpkYigpLT5xdWVyeSgiZGVsZXRlIGZyb20gIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguImlyaSAgICB3aGVyZSB3ZWxsX2tub3duID0gJzAnIGFuZCBvaWQg'));
	@fwrite($fp, base64_decode('bm90IGluIChzZWxlY3QgaWQgZnJvbSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4ib2JqZWN0cyB3aGVyZSBpZCBsaWtlICdvaWQ6JScpIik7CgoJCWVjaG8ganNvbl9lbmNvZGUoYXJyYXkoInN0YXR1cyIgPT4gMCkpOwoJfQoKCS8vIEFjdGlvbjogICAgIFVw'));
	@fwrite($fp, base64_decode('ZGF0ZQoJLy8gTWV0aG9kOiAgICAgUE9TVAoJLy8gUGFyYW1ldGVyczogaWQsIHJhX2VtYWlsLCBjb21tZW50LCBpcmlzLCBhc24xaWRzLCBjb25maWRlbnRpYWwKCS8vIE91dHB1dHM6ICAgIFRleHQKCWlmIChpc3NldCgkX1BPU1RbImFjdGlvbiJdKSAmJiAoJF9Q'));
	@fwrite($fp, base64_decode('T1NUWyJhY3Rpb24iXSA9PSAiVXBkYXRlIikpIHsKCQkkaGFuZGxlZCA9IHRydWU7CgoJCSRpZCA9ICRfUE9TVFsnaWQnXTsKCQkkb2JqID0gT0lEcGx1c09iamVjdDo6cGFyc2UoJGlkKTsKCQlpZiAoJG9iaiA9PT0gbnVsbCkgdGhyb3cgbmV3IE9JRHBsdXNFeGNl'));
	@fwrite($fp, base64_decode('cHRpb24oIlVQREFURSBhY3Rpb24gZmFpbGVkIGJlY2F1c2Ugb2JqZWN0ICckaWQnIGNhbm5vdCBiZSBwYXJzZWQhIik7CgoJCWlmIChPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0IGlkIGZyb20gIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguIm9iamVjdHMg'));
	@fwrite($fp, base64_decode('d2hlcmUgaWQgPSA/IiwgYXJyYXkoJGlkKSktPm51bV9yb3dzKCkgPT0gMCkgewoJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigiT2JqZWN0ICckaWQnIGRvZXMgbm90IGV4aXN0Iik7CgkJfQoKCQkvLyBDaGVjayBpZiBwZXJtaXR0ZWQKCQlpZiAoISRvYmot'));
	@fwrite($fp, base64_decode('PnVzZXJIYXNQYXJlbnRhbFdyaXRlUmlnaHRzKCkpIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKCdBdXRoZW50aWZpY2F0aW9uIGVycm9yLiBQbGVhc2UgbG9nIGluIGFzIHRoZSBzdXBlcmlvciBSQSB0byB1cGRhdGUgdGhpcyBPSUQuJyk7CgoJCS8vIFZhbGlk'));
	@fwrite($fp, base64_decode('YXRlIFJBIGVtYWlsIGFkZHJlc3MKCQkkbmV3X3JhID0gJF9QT1NUWydyYV9lbWFpbCddOwoJCWlmICghZW1wdHkoJG5ld19yYSkgJiYgIU9JRHBsdXM6Om1haWxVdGlscygpLT52YWxpZE1haWxBZGRyZXNzKCRuZXdfcmEpKSB7CgkJCXRocm93IG5ldyBPSURwbHVz'));
	@fwrite($fp, base64_decode('RXhjZXB0aW9uKCdJbnZhbGlkIFJBIGVtYWlsIGFkZHJlc3MnKTsKCQl9CgoJCS8vIEZpcnN0LCBkbyBhIHNpbXVsYXRpb24gZm9yIEFTTi4xIElEcyBhbmQgSVJJcyB0byBjaGVjayBpZiB0aGVyZSBhcmUgYW55IHByb2JsZW1zICh0aGVuIGFuIEV4Y2VwdGlvbiB3'));
	@fwrite($fp, base64_decode('aWxsIGJlIHRocm93bikKCQlpZiAoJG9iajo6bnMoKSA9PSAnb2lkJykgewoJCQkkaWRzID0gKCRfUE9TVFsnaXJpcyddID09ICcnKSA/IGFycmF5KCkgOiBleHBsb2RlKCcsJywkX1BPU1RbJ2lyaXMnXSk7CgkJCSRpZHMgPSBhcnJheV9tYXAoJ3RyaW0nLCRpZHMp'));
	@fwrite($fp, base64_decode('OwoJCQkkb2JqLT5yZXBsYWNlSXJpcygkaWRzLCB0cnVlKTsKCgkJCSRpZHMgPSAoJF9QT1NUWydhc24xaWRzJ10gPT0gJycpID8gYXJyYXkoKSA6IGV4cGxvZGUoJywnLCRfUE9TVFsnYXNuMWlkcyddKTsKCQkJJGlkcyA9IGFycmF5X21hcCgndHJpbScsJGlkcyk7'));
	@fwrite($fp, base64_decode('CgkJCSRvYmotPnJlcGxhY2VBc24xSWRzKCRpZHMsIHRydWUpOwoJCX0KCgkJLy8gQ2hhbmdlIFJBIHJlY3Vyc2l2ZWx5CgkJJHJlcyA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgcmFfZW1haWwgZnJvbSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4i'));
	@fwrite($fp, base64_decode('b2JqZWN0cyB3aGVyZSBpZCA9ID8iLCBhcnJheSgkaWQpKTsKCQlpZiAoJHJvdyA9ICRyZXMtPmZldGNoX2FycmF5KCkpIHsKCQkJJGN1cnJlbnRfcmEgPSAkcm93WydyYV9lbWFpbCddOwoJCQlpZiAoJG5ld19yYSAhPSAkY3VycmVudF9yYSkgewoJCQkJT0lEcGx1'));
	@fwrite($fp, base64_decode('czo6bG9nZ2VyKCktPmxvZygiT0lEKCRpZCkrU1VQT0lEUkEoJGlkKT8vQT8iLCAiUkEgb2Ygb2JqZWN0ICckaWQnIGNoYW5nZWQgZnJvbSAnJGN1cnJlbnRfcmEnIHRvICckbmV3X3JhJyIpOwoJCQkJT0lEcGx1czo6bG9nZ2VyKCktPmxvZygiUkEoJGN1cnJlbnRf'));
	@fwrite($fp, base64_decode('cmEpISIsICAgICAgICAgICAiTG9zdCBvd25lcnNoaXAgb2Ygb2JqZWN0ICckaWQnIGR1ZSB0byBSQSB0cmFuc2ZlciBvZiBzdXBlcmlvciBSQSAvIGFkbWluLiIpOwoJCQkJT0lEcGx1czo6bG9nZ2VyKCktPmxvZygiUkEoJG5ld19yYSkhIiwgICAgICAgICAgICAg'));
	@fwrite($fp, base64_decode('ICAiR2FpbmVkIG93bmVyc2hpcCBvZiBvYmplY3QgJyRpZCcgZHVlIHRvIFJBIHRyYW5zZmVyIG9mIHN1cGVyaW9yIFJBIC8gYWRtaW4uIik7CgkJCQlpZiAoJHBhcmVudE9iaiA9ICRvYmotPmdldFBhcmVudCgpKSB7CgkJCQkJT0lEcGx1czo6bG9nZ2VyKCktPmxv'));
	@fwrite($fp, base64_decode('ZygiT0lEKCIuJHBhcmVudE9iai0+bm9kZUlkKCkuIikiLCAiUkEgb2Ygb2JqZWN0ICckaWQnIGNoYW5nZWQgZnJvbSAnJGN1cnJlbnRfcmEnIHRvICckbmV3X3JhJyIpOwoJCQkJfQoJCQkJX3JhX2NoYW5nZV9yZWMoJGlkLCAkY3VycmVudF9yYSwgJG5ld19yYSk7'));
	@fwrite($fp, base64_decode('IC8vIEluaGVyaXRlZCBSQXMgcmVrdXJzaXYgbWl05G5kZXJuCgkJCX0KCQl9CgoJCS8vIExvZyBpZiBjb25maWRlbnRpYWxseSBmbGFnIHdhcyBjaGFuZ2VkCgkJT0lEcGx1czo6bG9nZ2VyKCktPmxvZygiT0lEKCRpZCkrU1VQT0lEUkEoJGlkKT8vQT8iLCAiSWRl'));
	@fwrite($fp, base64_decode('bnRpZmllcnMvQ29uZmlkZW50aWFsIGZsYWcgb2Ygb2JqZWN0ICckaWQnIHVwZGF0ZWQiKTsgLy8gVE9ETzogQ2hlY2sgaWYgdGhleSB3ZXJlIEFDVFVBTExZIHVwZGF0ZWQhCgkJaWYgKCRwYXJlbnRPYmogPSAkb2JqLT5nZXRQYXJlbnQoKSkgewoJCQlPSURwbHVz'));
	@fwrite($fp, base64_decode('Ojpsb2dnZXIoKS0+bG9nKCJPSUQoIi4kcGFyZW50T2JqLT5ub2RlSWQoKS4iKSIsICJJZGVudGlmaWVycy9Db25maWRlbnRpYWwgZmxhZyBvZiBvYmplY3QgJyRpZCcgdXBkYXRlZCIpOyAvLyBUT0RPOiBDaGVjayBpZiB0aGV5IHdlcmUgQUNUVUFMTFkgdXBkYXRl'));
	@fwrite($fp, base64_decode('ZCEKCQl9CgoJCS8vIFJlcGxhY2UgQVNOLjEgSURzIHVuZCBJUklzCgkJaWYgKCRvYmo6Om5zKCkgPT0gJ29pZCcpIHsKCQkJJGlkcyA9ICgkX1BPU1RbJ2lyaXMnXSA9PSAnJykgPyBhcnJheSgpIDogZXhwbG9kZSgnLCcsJF9QT1NUWydpcmlzJ10pOwoJCQkkaWRz'));
	@fwrite($fp, base64_decode('ID0gYXJyYXlfbWFwKCd0cmltJywkaWRzKTsKCQkJJG9iai0+cmVwbGFjZUlyaXMoJGlkcywgZmFsc2UpOwoKCQkJJGlkcyA9ICgkX1BPU1RbJ2FzbjFpZHMnXSA9PSAnJykgPyBhcnJheSgpIDogZXhwbG9kZSgnLCcsJF9QT1NUWydhc24xaWRzJ10pOwoJCQkkaWRz'));
	@fwrite($fp, base64_decode('ID0gYXJyYXlfbWFwKCd0cmltJywkaWRzKTsKCQkJJG9iai0+cmVwbGFjZUFzbjFJZHMoJGlkcywgZmFsc2UpOwoKCQkJLy8gVE9ETzogQ2hlY2sgaWYgYW55IGlkZW50aWZpZXJzIGhhdmUgYmVlbiBhY3R1YWxseSBjaGFuZ2VkLAoJCQkvLyBhbmQgbG9nIGl0IHRv'));
	@fwrite($fp, base64_decode('IE9JRCgkaWQpLCBPSUQoJHBhcmVudCksIC4uLiAoc2VlIGFib3ZlKQoJCX0KCgkJJGNvbmZpZGVudGlhbCA9ICRfUE9TVFsnY29uZmlkZW50aWFsJ10gPT0gJ3RydWUnOwoJCSRjb21tZW50ID0gJF9QT1NUWydjb21tZW50J107CgkJaWYgKE9JRHBsdXM6OmRiKCkt'));
	@fwrite($fp, base64_decode('PnNsYW5nKCkgPT0gJ21zc3FsJykgewoJCQlPSURwbHVzOjpkYigpLT5xdWVyeSgiVVBEQVRFICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJvYmplY3RzIFNFVCBjb25maWRlbnRpYWwgPSA/LCBjb21tZW50ID0gPywgdXBkYXRlZCA9IGdldGRhdGUoKSBXSEVS'));
	@fwrite($fp, base64_decode('RSBpZCA9ID8iLCBhcnJheSgkY29uZmlkZW50aWFsLCAkY29tbWVudCwgJGlkKSk7CgkJfSBlbHNlIHsKCQkJLy8gTXlTUUwgKyBQZ1NRTAoJCQlPSURwbHVzOjpkYigpLT5xdWVyeSgiVVBEQVRFICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJvYmplY3RzIFNF'));
	@fwrite($fp, base64_decode('VCBjb25maWRlbnRpYWwgPSA/LCBjb21tZW50ID0gPywgdXBkYXRlZCA9IG5vdygpIFdIRVJFIGlkID0gPyIsIGFycmF5KCRjb25maWRlbnRpYWwsICRjb21tZW50LCAkaWQpKTsKCQl9CgoJCSRzdGF0dXMgPSAwOwoKCQlpZiAoIWVtcHR5KCRuZXdfcmEpKSB7CgkJ'));
	@fwrite($fp, base64_decode('CSRyZXMgPSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0IHJhX25hbWUgZnJvbSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4icmEgd2hlcmUgZW1haWwgPSA/IiwgYXJyYXkoJG5ld19yYSkpOwoJCQlpZiAoJHJlcy0+bnVtX3Jvd3MoKSA9PSAwKSAkc3Rh'));
	@fwrite($fp, base64_decode('dHVzID0gT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVlKCdyYV9pbnZpdGF0aW9uX2VuYWJsZWQnKSA/IDEgOiAyOwoJCX0KCgkJZWNobyBqc29uX2VuY29kZShhcnJheSgic3RhdHVzIiA9PiAkc3RhdHVzKSk7Cgl9CgoJLy8gQWN0aW9uOiAgICAgVXBkYXRlMgoJ'));
	@fwrite($fp, base64_decode('Ly8gTWV0aG9kOiAgICAgUE9TVAoJLy8gUGFyYW1ldGVyczogaWQsIHRpdGxlLCBkZXNjcmlwdGlvbgoJLy8gT3V0cHV0czogICAgVGV4dAoJaWYgKGlzc2V0KCRfUE9TVFsiYWN0aW9uIl0pICYmICgkX1BPU1RbImFjdGlvbiJdID09ICJVcGRhdGUyIikpIHsKCQkk'));
	@fwrite($fp, base64_decode('aGFuZGxlZCA9IHRydWU7CgoJCSRpZCA9ICRfUE9TVFsnaWQnXTsKCQkkb2JqID0gT0lEcGx1c09iamVjdDo6cGFyc2UoJGlkKTsKCQlpZiAoJG9iaiA9PT0gbnVsbCkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oIlVQREFURTIgYWN0aW9uIGZhaWxlZCBiZWNh'));
	@fwrite($fp, base64_decode('dXNlIG9iamVjdCAnJGlkJyBjYW5ub3QgYmUgcGFyc2VkISIpOwoKCQlpZiAoT0lEcGx1czo6ZGIoKS0+cXVlcnkoInNlbGVjdCBpZCBmcm9tICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJvYmplY3RzIHdoZXJlIGlkID0gPyIsIGFycmF5KCRpZCkpLT5udW1f'));
	@fwrite($fp, base64_decode('cm93cygpID09IDApIHsKCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oIk9iamVjdCAnJGlkJyBkb2VzIG5vdCBleGlzdCIpOwoJCX0KCgkJLy8gQ2hlY2sgaWYgYWxsb3dlZAoJCWlmICghJG9iai0+dXNlckhhc1dyaXRlUmlnaHRzKCkpIHRocm93IG5ldyBP'));
	@fwrite($fp, base64_decode('SURwbHVzRXhjZXB0aW9uKCdBdXRoZW50aWZpY2F0aW9uIGVycm9yLiBQbGVhc2UgbG9nIGluIGFzIHRoZSBSQSB0byB1cGRhdGUgdGhpcyBPSUQuJyk7CgoJCU9JRHBsdXM6OmxvZ2dlcigpLT5sb2coIk9JRCgkaWQpK09JRFJBKCRpZCk/L0E/IiwgIlRpdGxlL0Rl'));
	@fwrite($fp, base64_decode('c2NyaXB0aW9uIG9mIG9iamVjdCAnJGlkJyB1cGRhdGVkIik7CgoJCWlmIChPSURwbHVzOjpkYigpLT5zbGFuZygpID09ICdtc3NxbCcpIHsKCQkJT0lEcGx1czo6ZGIoKS0+cXVlcnkoIlVQREFURSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4ib2JqZWN0cyBT'));
	@fwrite($fp, base64_decode('RVQgdGl0bGUgPSA/LCBkZXNjcmlwdGlvbiA9ID8sIHVwZGF0ZWQgPSBnZXRkYXRlKCkgV0hFUkUgaWQgPSA/IiwgYXJyYXkoJF9QT1NUWyd0aXRsZSddLCAkX1BPU1RbJ2Rlc2NyaXB0aW9uJ10sICRpZCkpOwoJCX0gZWxzZSB7CgkJCS8vIE15U1FMICsgUGdTUUwK'));
	@fwrite($fp, base64_decode('CQkJT0lEcGx1czo6ZGIoKS0+cXVlcnkoIlVQREFURSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4ib2JqZWN0cyBTRVQgdGl0bGUgPSA/LCBkZXNjcmlwdGlvbiA9ID8sIHVwZGF0ZWQgPSBub3coKSBXSEVSRSBpZCA9ID8iLCBhcnJheSgkX1BPU1RbJ3RpdGxl'));
	@fwrite($fp, base64_decode('J10sICRfUE9TVFsnZGVzY3JpcHRpb24nXSwgJGlkKSk7CgkJfQoKCQllY2hvIGpzb25fZW5jb2RlKGFycmF5KCJzdGF0dXMiID0+IDApKTsKCX0KCgkvLyBBY3Rpb246ICAgICBJbnNlcnQKCS8vIE1ldGhvZDogICAgIFBPU1QKCS8vIFBhcmFtZXRlcnM6IHBhcmVu'));
	@fwrite($fp, base64_decode('dCwgaWQsIHJhX2VtYWlsLCBjb25maWRlbnRpYWwsIGlyaXMsIGFzbjFpZHMKCS8vIE91dHB1dHM6ICAgIFRleHQKCWlmIChpc3NldCgkX1BPU1RbImFjdGlvbiJdKSAmJiAoJF9QT1NUWyJhY3Rpb24iXSA9PSAiSW5zZXJ0IikpIHsKCQkkaGFuZGxlZCA9IHRydWU7'));
	@fwrite($fp, base64_decode('CgoJCS8vIFZhbGlkYXRlZCBhcmU6IElELCByYSBlbWFpbCwgYXNuMSBpZHMsIGlyaSBpZHMKCgkJLy8gQ2hlY2sgaWYgeW91IGhhdmUgd3JpdGUgcmlnaHRzIG9uIHRoZSBwYXJlbnQgKHRvIGNyZWF0ZSBhIG5ldyBvYmplY3QpCgkJJG9ialBhcmVudCA9IE9JRHBs'));
	@fwrite($fp, base64_decode('dXNPYmplY3Q6OnBhcnNlKCRfUE9TVFsncGFyZW50J10pOwoJCWlmICgkb2JqUGFyZW50ID09PSBudWxsKSB0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigiSU5TRVJUIGFjdGlvbiBmYWlsZWQgYmVjYXVzZSBwYXJlbnQgb2JqZWN0ICciLiRfUE9TVFsncGFyZW50'));
	@fwrite($fp, base64_decode('J10uIicgY2Fubm90IGJlIHBhcnNlZCEiKTsKCgkJaWYgKE9JRHBsdXM6OmRiKCktPnF1ZXJ5KCJzZWxlY3QgaWQgZnJvbSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4ib2JqZWN0cyB3aGVyZSBpZCA9ID8iLCBhcnJheSgkb2JqUGFyZW50LT5ub2RlSWQoKSkp'));
	@fwrite($fp, base64_decode('LT5udW1fcm93cygpID09IDApIHsKCQkJdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oIlBhcmVudCBvYmplY3QgJyIuKCRvYmpQYXJlbnQtPm5vZGVJZCgpKS4iJyBkb2VzIG5vdCBleGlzdCIpOwoJCX0KCgkJaWYgKCEkb2JqUGFyZW50LT51c2VySGFzV3JpdGVS'));
	@fwrite($fp, base64_decode('aWdodHMoKSkgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oJ0F1dGhlbnRpZmljYXRpb24gZXJyb3IuIFBsZWFzZSBsb2cgaW4gYXMgdGhlIGNvcnJlY3QgUkEgdG8gaW5zZXJ0IGFuIE9JRCBhdCB0aGlzIGFyYy4nKTsKCgkJLy8gQ2hlY2sgaWYgdGhlIElEIGlz'));
	@fwrite($fp, base64_decode('IHZhbGlkCgkJaWYgKCRfUE9TVFsnaWQnXSA9PSAnJykgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oJ0lEIG1heSBub3QgYmUgZW1wdHknKTsKCgkJLy8gRGV0ZXJtaW5lIGFic29sdXRlIE9JRCBuYW1lCgkJLy8gTm90ZTogQXQgYWRkU3RyaW5nKCkgYW5kIHBh'));
	@fwrite($fp, base64_decode('cnNlKCksIHRoZSBzeW50YXggb2YgdGhlIElEIHdpbGwgYmUgY2hlY2tlZAoJCSRpZCA9ICRvYmpQYXJlbnQtPmFkZFN0cmluZygkX1BPU1RbJ2lkJ10pOwoKCQkvLyBDaGVjaywgaWYgdGhlIE9JRCBleGlzdHMKCQkkdGVzdCA9IE9JRHBsdXM6OmRiKCktPnF1ZXJ5'));
	@fwrite($fp, base64_decode('KCJzZWxlY3QgaWQgZnJvbSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4ib2JqZWN0cyB3aGVyZSBpZCA9ID8iLCBhcnJheSgkaWQpKTsKCQlpZiAoJHRlc3QtPm51bV9yb3dzKCkgPj0gMSkgewoJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbigiT2JqZWN0'));
	@fwrite($fp, base64_decode('ICRpZCBhbHJlYWR5IGV4aXN0cyEiKTsKCQl9CgoJCSRvYmogPSBPSURwbHVzT2JqZWN0OjpwYXJzZSgkaWQpOwogICAgICAgICAgICAgICAgaWYgKCRvYmogPT09IG51bGwpIHRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKCJJTlNFUlQgYWN0aW9uIGZhaWxlZCBi'));
	@fwrite($fp, base64_decode('ZWNhdXNlIG9iamVjdCAnJGlkJyBjYW5ub3QgYmUgcGFyc2VkISIpOwoKCQkvLyBGaXJzdCBzaW11bGF0ZSBpZiB0aGVyZSBhcmUgYW55IHByb2JsZW1zIG9mIEFTTi4xIElEcyB1bmQgSVJJcwoJCWlmICgkb2JqOjpucygpID09ICdvaWQnKSB7CgkJCSRpZHMgPSAo'));
	@fwrite($fp, base64_decode('JF9QT1NUWydpcmlzJ10gPT0gJycpID8gYXJyYXkoKSA6IGV4cGxvZGUoJywnLCRfUE9TVFsnaXJpcyddKTsKCQkJJGlkcyA9IGFycmF5X21hcCgndHJpbScsJGlkcyk7CgkJCSRvYmotPnJlcGxhY2VBc24xSWRzKCRpZHMsIHRydWUpOwoKCQkJJGlkcyA9ICgkX1BP'));
	@fwrite($fp, base64_decode('U1RbJ2FzbjFpZHMnXSA9PSAnJykgPyBhcnJheSgpIDogZXhwbG9kZSgnLCcsJF9QT1NUWydhc24xaWRzJ10pOwoJCQkkaWRzID0gYXJyYXlfbWFwKCd0cmltJywkaWRzKTsKCQkJJG9iai0+cmVwbGFjZUlyaXMoJGlkcywgdHJ1ZSk7CgkJfQoKCQkvLyBBcHBseSBz'));
	@fwrite($fp, base64_decode('dXBlcmlvciBSQSBjaGFuZ2UKCQkkcGFyZW50ID0gJF9QT1NUWydwYXJlbnQnXTsKCQkkcmFfZW1haWwgPSAkX1BPU1RbJ3JhX2VtYWlsJ107CgkJaWYgKCFlbXB0eSgkcmFfZW1haWwpICYmICFPSURwbHVzOjptYWlsVXRpbHMoKS0+dmFsaWRNYWlsQWRkcmVzcygk'));
	@fwrite($fp, base64_decode('cmFfZW1haWwpKSB7CgkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKCdJbnZhbGlkIFJBIGVtYWlsIGFkZHJlc3MnKTsKCQl9CgoJCU9JRHBsdXM6OmxvZ2dlcigpLT5sb2coIk9JRCgkcGFyZW50KStPSUQoJGlkKStPSURSQSgkcGFyZW50KT8vQT8iLCAiT2Jq'));
	@fwrite($fp, base64_decode('ZWN0ICckaWQnIGNyZWF0ZWQsICIuKGVtcHR5KCRyYV9lbWFpbCkgPyAid2l0aG91dCBkZWZpbmVkIFJBIiA6ICJnaXZlbiB0byBSQSAnJHJhX2VtYWlsJyIpKS4iLCBzdXBlcmlvciBvYmplY3QgaXMgJyRwYXJlbnQnIjsKCQlpZiAoIWVtcHR5KCRyYV9lbWFpbCkp'));
	@fwrite($fp, base64_decode('IHsKCQkJT0lEcGx1czo6bG9nZ2VyKCktPmxvZygiUkEoJHJhX2VtYWlsKSEiLCAiR2FpbmVkIG93bmVyc2hpcCBvZiBuZXdseSBjcmVhdGVkIG9iamVjdCAnJGlkJyIpOwoJCX0KCgkJJGNvbmZpZGVudGlhbCA9ICRfUE9TVFsnY29uZmlkZW50aWFsJ10gPT0gJ3Ry'));
	@fwrite($fp, base64_decode('dWUnOwoJCSRjb21tZW50ID0gJF9QT1NUWydjb21tZW50J107CgkJJHRpdGxlID0gJyc7CgkJJGRlc2NyaXB0aW9uID0gJyc7CgkJCgkJaWYgKHN0cmxlbigkaWQpID4gT0lEUExVU19NQVhfSURfTEVOR1RIKSB7CgkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9u'));
	@fwrite($fp, base64_decode('KCJUaGUgaWRlbnRpZmllciAnJGlkJyBpcyB0b28gbG9uZyAobWF4IGFsbG93ZWQgbGVuZ3RoOiAiLk9JRFBMVVNfTUFYX0lEX0xFTkdUSC4iKSIpOwoJCX0KCQoJCWlmIChPSURwbHVzOjpkYigpLT5zbGFuZygpID09ICdtc3NxbCcpIHsKCQkJT0lEcGx1czo6ZGIo'));
	@fwrite($fp, base64_decode('KS0+cXVlcnkoIklOU0VSVCBJTlRPICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJvYmplY3RzIChpZCwgcGFyZW50LCByYV9lbWFpbCwgY29uZmlkZW50aWFsLCBjb21tZW50LCBjcmVhdGVkLCB0aXRsZSwgZGVzY3JpcHRpb24pIFZBTFVFUyAoPywgPywgPywg'));
	@fwrite($fp, base64_decode('PywgPywgZ2V0ZGF0ZSgpLCA/LCA/KSIsIGFycmF5KCRpZCwgJHBhcmVudCwgJHJhX2VtYWlsLCAkY29uZmlkZW50aWFsLCAkY29tbWVudCwgJHRpdGxlLCAkZGVzY3JpcHRpb24pKTsKCQl9IGVsc2UgewoJCQkvLyBNeVNRTCArIFBnU1FMCgkJCU9JRHBsdXM6OmRi'));
	@fwrite($fp, base64_decode('KCktPnF1ZXJ5KCJJTlNFUlQgSU5UTyAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4ib2JqZWN0cyAoaWQsIHBhcmVudCwgcmFfZW1haWwsIGNvbmZpZGVudGlhbCwgY29tbWVudCwgY3JlYXRlZCwgdGl0bGUsIGRlc2NyaXB0aW9uKSBWQUxVRVMgKD8sID8sID8s'));
	@fwrite($fp, base64_decode('ID8sID8sIG5vdygpLCA/LCA/KSIsIGFycmF5KCRpZCwgJHBhcmVudCwgJHJhX2VtYWlsLCAkY29uZmlkZW50aWFsLCAkY29tbWVudCwgJHRpdGxlLCAkZGVzY3JpcHRpb24pKTsKCQl9CgoJCS8vIFNldCBBU04uMSBJRHMgdW5kIElSSXMKCQlpZiAoJG9iajo6bnMo'));
	@fwrite($fp, base64_decode('KSA9PSAnb2lkJykgewoJCQkkaWRzID0gKCRfUE9TVFsnaXJpcyddID09ICcnKSA/IGFycmF5KCkgOiBleHBsb2RlKCcsJywkX1BPU1RbJ2lyaXMnXSk7CgkJCSRpZHMgPSBhcnJheV9tYXAoJ3RyaW0nLCRpZHMpOwoJCQkkb2JqLT5yZXBsYWNlSXJpcygkaWRzLCBm'));
	@fwrite($fp, base64_decode('YWxzZSk7CgoJCQkkaWRzID0gKCRfUE9TVFsnYXNuMWlkcyddID09ICcnKSA/IGFycmF5KCkgOiBleHBsb2RlKCcsJywkX1BPU1RbJ2FzbjFpZHMnXSk7CgkJCSRpZHMgPSBhcnJheV9tYXAoJ3RyaW0nLCRpZHMpOwoJCQkkb2JqLT5yZXBsYWNlQXNuMUlkcygkaWRz'));
	@fwrite($fp, base64_decode('LCBmYWxzZSk7CgkJfQoKCQkkc3RhdHVzID0gMDsKCgkJaWYgKCFlbXB0eSgkcmFfZW1haWwpKSB7CgkJCS8vIERvIHdlIG5lZWQgdG8gbm90aWZ5IHRoYXQgdGhlIFJBIGRvZXMgbm90IGV4aXN0PwoJCQkkcmVzID0gT0lEcGx1czo6ZGIoKS0+cXVlcnkoInNlbGVj'));
	@fwrite($fp, base64_decode('dCByYV9uYW1lIGZyb20gIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguInJhIHdoZXJlIGVtYWlsID0gPyIsIGFycmF5KCRyYV9lbWFpbCkpOwoJCQlpZiAoJHJlcy0+bnVtX3Jvd3MoKSA9PSAwKSAkc3RhdHVzID0gT0lEcGx1czo6Y29uZmlnKCktPmdldFZhbHVl'));
	@fwrite($fp, base64_decode('KCdyYV9pbnZpdGF0aW9uX2VuYWJsZWQnKSA/IDEgOiAyOwoJCX0KCgkJZWNobyBqc29uX2VuY29kZShhcnJheSgic3RhdHVzIiA9PiAkc3RhdHVzKSk7Cgl9CgoJaWYgKCEkaGFuZGxlZCkgewoJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKCdJbnZhbGlkIGFj'));
	@fwrite($fp, base64_decode('dGlvbiBJRCcpOwoJfQoKCU9JRHBsdXM6OmRiKCktPnRyYW5zYWN0aW9uX2NvbW1pdCgpOwp9IGNhdGNoIChFeGNlcHRpb24gJGUpIHsKCXRyeSB7CgkJT0lEcGx1czo6ZGIoKS0+dHJhbnNhY3Rpb25fcm9sbGJhY2soKTsKCX0gY2F0Y2ggKEV4Y2VwdGlvbiAkZTEp'));
	@fwrite($fp, base64_decode('IHsKCX0KCQoJJGFyeSA9IGFycmF5KCk7CgkkYXJ5WydlcnJvciddID0gJGUtPmdldE1lc3NhZ2UoKTsKCSRvdXQgPSBqc29uX2VuY29kZSgkYXJ5KTsKCglpZiAoJG91dCA9PT0gZmFsc2UpIHsKCQkvLyBTb21lIG1vZHVsZXMgKGxpa2UgT0RCQykgbWlnaHQgb3V0'));
	@fwrite($fp, base64_decode('cHV0IG5vbi1VVEY4IGRhdGEKCQkkYXJ5WydlcnJvciddID0gdXRmOF9lbmNvZGUoJGUtPmdldE1lc3NhZ2UoKSk7CgkJJG91dCA9IGpzb25fZW5jb2RlKCRhcnkpOwoJfQoJCglkaWUoJG91dCk7Cn0KCiMgLS0tCgpmdW5jdGlvbiBfcmFfY2hhbmdlX3JlYygkaWQs'));
	@fwrite($fp, base64_decode('ICRvbGRfcmEsICRuZXdfcmEpIHsKCWlmIChPSURwbHVzOjpkYigpLT5zbGFuZygpID09ICdtc3NxbCcpIHsKCQlPSURwbHVzOjpkYigpLT5xdWVyeSgidXBkYXRlICIuT0lEUExVU19UQUJMRU5BTUVfUFJFRklYLiJvYmplY3RzIHNldCByYV9lbWFpbCA9ID8sIHVw'));
	@fwrite($fp, base64_decode('ZGF0ZWQgPSBnZXRkYXRlKCkgd2hlcmUgaWQgPSA/IGFuZCBpZm51bGwocmFfZW1haWwsJycpID0gPyIsIGFycmF5KCRuZXdfcmEsICRpZCwgJG9sZF9yYSkpOwoJfSBlbHNlIHsKCQkvLyBNeVNRTCArIFBnU1FMCgkJT0lEcGx1czo6ZGIoKS0+cXVlcnkoInVwZGF0'));
	@fwrite($fp, base64_decode('ZSAiLk9JRFBMVVNfVEFCTEVOQU1FX1BSRUZJWC4ib2JqZWN0cyBzZXQgcmFfZW1haWwgPSA/LCB1cGRhdGVkID0gbm93KCkgd2hlcmUgaWQgPSA/IGFuZCBpZm51bGwocmFfZW1haWwsJycpID0gPyIsIGFycmF5KCRuZXdfcmEsICRpZCwgJG9sZF9yYSkpOwoJfQoK'));
	@fwrite($fp, base64_decode('CSRyZXMgPSBPSURwbHVzOjpkYigpLT5xdWVyeSgic2VsZWN0IGlkIGZyb20gIi5PSURQTFVTX1RBQkxFTkFNRV9QUkVGSVguIm9iamVjdHMgd2hlcmUgcGFyZW50ID0gPyBhbmQgaWZudWxsKHJhX2VtYWlsLCcnKSA9ID8iLCBhcnJheSgkaWQsICRvbGRfcmEpKTsK'));
	@fwrite($fp, base64_decode('CXdoaWxlICgkcm93ID0gJHJlcy0+ZmV0Y2hfYXJyYXkoKSkgewoJCV9yYV9jaGFuZ2VfcmVjKCRyb3dbJ2lkJ10sICRvbGRfcmEsICRuZXdfcmEpOwoJfQp9Cg=='));
	@fclose($fp);
}
if (!is_file('ajax.php')) {
	warn('File has vanished! Will re-create it: ajax.php');
	writefile_1();
	if (!is_file('ajax.php')) {
		warn('File cannot be created (not existing): ajax.php');
	} else if (sha1_file('ajax.php') != '1dc01af77901e3c0c555c3e7e5856da279a8c748') {
		warn('File cannot be created (checksum mismatch): ajax.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('ajax.php', 0644)) {
		warn('Could not change file permissions of ajax.php');
	}
} else {
	if (@sha1_file('ajax.php') !== '1dc01af77901e3c0c555c3e7e5856da279a8c748') {
		if (@sha1_file('ajax.php') !== 'fe9695f3f26f0f72f89a5e44b5badcebbd2b6159') {
			warn('File was modified. Will overwrite the changes now: ajax.php');
			$tmp = pathinfo('ajax.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('ajax.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('ajax.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_1();
		if (@sha1_file('ajax.php') !== '1dc01af77901e3c0c555c3e7e5856da279a8c748') {
			warn('File cannot be written (checksum mismatch): ajax.php');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 252\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 252') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

