<?php /* <ViaThinkSoftSignature>
nj+Srx4k9p6yox986L7WdLl8NZwehGPv+xoDZg15GB4fJRmezSMGP/2VuLjQKjE7g
nUBGiyFuuvYF5z7zW94j0sxZF1Ksazozg+SYU62KLCNSDz8c6pX651Iyc/u6CazlA
h2TKBIeBPpRicGmpDF6OrOJOaHyIXLbPHf/XAP3kZsQcuSp71dYwBhZ4/Boy/ENMX
kWxNxLXLtpeYaV59SPuxkHUsOwVIya3eVvCPA8VmQrInmJr6f+SLep0PqmsbDUbtI
x5jRbE2eLcWSHiqeziojonWuVw8F9k2j0cuSCO5Hohw/joyLwEB+MjEJAPnxFQyqM
tqhGiMaqHeEoPlSxchqUU5ZRZXpiGrxlH87cgi3vpNi3R9p9dkgovk3Nf7zR0pdRv
3mKKJjfTCFc17wMftz2X3ZldeCHIj3znEIirOgp3UXrKpYZrhz8VorPjh+roQkrgH
yE0XGE0WEW6RHVciF2n6vW9Na68E9rbEipCpY9wbJAq4d3Iqyq7WyECw6TfwMZqiw
Cuk9wOfQVh/K3M7ugZXJ+u6MjmOBDzgGir8yn0bABw3ef+zYhea6ocTWq164idpBY
N+OWmOtpy0UeGJc2cl4L10JtLtKOw6x+b+9j3w8FG3U1rtKWSKCzfuQCyIsT4TIUr
kKL0ir2nmK+ylP5EXyksnFF7A+54hjnKOCep79UvBMo2Tpj8jeGmJvLntLb0Zug3T
ypr0niIKgwbaV0eMT51/j8E03eAh1RgIQO+bN3ZtAJYDpWqOoLZGUA2aghCejldqf
kNhX4itAlolgKehJ2KOiqaxZm1QQpj5LaKKufXxFasfUCGRPKhLZhb26jpgZsV73u
0yIMAsWFOnKAdJ/2FWEDUCERXpufirZx77dszkspoomuVL0nQZX62zmy/fOiXqiYZ
+pkVj4HrssAJsuu2PjeWKv+8vq5/Pj4H1TmP5OJ7+acWkuhxNEomTmbcN2t989E3f
RH9YPXDRucpjVzxxQ71/rTmlH0HvSJR/Txb4u93lB2JBPReYRdH0lb6H3zqREU3tu
i3k5k33b1RPJ+1aGgvTLa+EbCqTEYL8aEGuOPVkl3+f4yCNSAtO/7GOeZYRNoIQPt
0vbq/plhze3xSMKICnhfMPyNm/aVp142OMp069k6DlBmAnkZBxsFhsU26KRW8lNFv
i7MlYphqwCavqjgLht1qNZTDiIXk+jm+xcW2/pm1dWxbDwPwm/j7IxBH6LHeZBQZK
iP47Sn/Rx5D9ASwSNhwOwxAYbU/nzClluBv/Bqpu3UE6WjfCPqnHj+W2bEbgnW+3s
/zS36w1gSvej71YW7El2gIpz03OW3RE1flSPqbUzNeHQT2I6GIMMg3jGFpFLgAOtg
Q==
</ViaThinkSoftSignature> */ ?>
<?php

/*
 * OIDplus 2.0
 * Copyright 2019 - 2023 Daniel Marschall, ViaThinkSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function info($str) { echo "INFO: $str\n"; }
function warn($str) { echo "WARNING: $str\n"; }
function err($str) { die("FATAL ERROR: $str\n"); }

@set_time_limit(0);

@header('Content-Type: text/plain');

chdir(__DIR__);
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 289') {
	err('This update can only be applied to OIDplus version 2.0.0.289!');
}

if (version_compare(PHP_VERSION, '7.0.0') < 0) {
	err('You need PHP Version 7.0 to update to this version');
}

// Dir added: secure
@mkdir('secure');
if (!is_dir('secure')) {
	warn('Directory could not be created: secure');
} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('secure', 0755)) {
	warn('Could not change directory permissions of secure');
}

// File added: secure/.htaccess
function writefile_1() {
	@$fp = fopen('secure/.htaccess', 'w');
	@fwrite($fp, base64_decode('T3JkZXIgRGVueSxBbGxvdwpEZW55IEZyb20gQWxsCgo='));
	@fclose($fp);
}
if (is_file('secure/.htaccess') && (sha1_file('secure/.htaccess') != '2e61197b1437bb55c9d20379ff16969a9f872967')) {
	warn('File was created by someone else. Will overwrite the changes now: secure/.htaccess');
	$tmp = pathinfo('secure/.htaccess');
	$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('secure/.htaccess')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
	warn('Creating a backup as '.$backup_name);
	if (!@copy('secure/.htaccess', $backup_name)) {
		warn('Creation of backup failed');
	}
}
writefile_1();
if (!is_file('secure/.htaccess')) {
	warn('File cannot be created (not existing): secure/.htaccess');
} else if (sha1_file('secure/.htaccess') != '2e61197b1437bb55c9d20379ff16969a9f872967') {
	warn('File cannot be created (checksum mismatch): secure/.htaccess');
} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('secure/.htaccess', 0644)) {
	warn('Could not change file permissions of secure/.htaccess');
}

// File added: secure/info.txt
function writefile_2() {
	@$fp = fopen('secure/info.txt', 'w');
	@fwrite($fp, base64_decode('DQpJbiB0aGlzIGZvbGRlciwgeW91IGNhbiBwbGFjZSBjb25maWRlbnRpYWwgc3R1ZmYgbGlrZSBsb2cgZmlsZXMgb3IgYSBTUUxpdGUgZGF0YWJhc2UuDQoNClBsZWFzZSBtYWtlIHN1cmUgdGhhdCB5b3VyIHdlYnNlcnZlciAoZS5nLiBBcGFjaGUpIGRvZXMgbm90'));
	@fwrite($fp, base64_decode('IGFsbG93IGFjY2VzcyB0byB0aGlzIGRpcmVjdG9yeSB0aHJvdWdoIHRoZSB3ZWIgYnJvd3Nlci4NCg0KSWYgdGhlcmUgYXJlIHByb2JsZW1zLCBwbGVhc2UgY2hlY2sgLmh0YWNjZXNzIChmb3IgQXBhY2hlKSwgbmdpbnguY29uZiAoZm9yIE5naW54KSBvciB3ZWIu'));
	@fwrite($fp, base64_decode('Y29uZmlnIChmb3IgTWljcm9zb2Z0IElJUykuDQo='));
	@fclose($fp);
}
if (is_file('secure/info.txt') && (sha1_file('secure/info.txt') != 'e9e1dd313ef98e7611a644c0fe864de1adb0bf2e')) {
	warn('File was created by someone else. Will overwrite the changes now: secure/info.txt');
	$tmp = pathinfo('secure/info.txt');
	$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('secure/info.txt')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
	warn('Creating a backup as '.$backup_name);
	if (!@copy('secure/info.txt', $backup_name)) {
		warn('Creation of backup failed');
	}
}
writefile_2();
if (!is_file('secure/info.txt')) {
	warn('File cannot be created (not existing): secure/info.txt');
} else if (sha1_file('secure/info.txt') != 'e9e1dd313ef98e7611a644c0fe864de1adb0bf2e') {
	warn('File cannot be created (checksum mismatch): secure/info.txt');
} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('secure/info.txt', 0644)) {
	warn('Could not change file permissions of secure/info.txt');
}

// Files different: TODO
function writefile_3() {
	@$fp = fopen('TODO', 'w');
	@fwrite($fp, base64_decode('ClJFQ0VOVCBTVFVGRgotIENvb2tpZSBsYXc6CglEb3dubG9hZCBDb29raWVDb25zZW50IGNvZGUgaW50byBfM3AgZm9sZGVyLCBkbyBub3QgaG90bGluayBpdAoJd2UgbmVlZCB0byBsb2cgYWxsIGNvbnNlbnRzCglkbyB3ZSBuZWVkIGFuIGV4cGxpY2l0IGNvbnNl'));
	@fwrite($fp, base64_decode('bnQgYXQgdGhlIGxvZ2luIGZvcm0/CglkbyB3ZSBuZWVkIGEgY29uc2VudCBmb3IgdGhlIGNvb2tpZSBTU0xfQ0hFQ0s/Ci0gVmVyaWZ5IHRoYXQgbG9nZ2VyIHdvcmtzIGNvcnJlY3RseSwgY2hlY2sgaWYgYWxsIGxvZ21hc2tzIGFyZSBjb3JyZWN0Ci0gdGhlIGlu'));
	@fwrite($fp, base64_decode('YWN0aXZpdHkgdGltZXIgaXMgbXVjaCB0b28gZmFzdCEKLSBEb2VzIHRoZSBhZG1pbiBmZWF0dXJlICI2MDBfbG9nIiBhbHNvIHNob3cgYWxsIGxvZyBldmVudHMgZnJvbSBhbGwgT2JqZWN0cyBhbmQgYWxsIFJBcz8KLSBhdCBhIGxvdCBvZiBmb3JtcywgaWYgeW91'));
	@fwrite($fp, base64_decode('IHByZXNzICJlbnRlciIsIHRoZSAiZm9ybSIgd2lsbCBub3QgYmUgc3VibWl0dGVkIChlLmcuICJjcmVhdGUgcmEiIHBsdWdpbiksIGNhbm5vdCByZXByb2R1Y2U/Ci0gVGVzdCBldmVyeSBmdW5jdGlvbiBvZiBPSURwbHVzIHRvIGVuc3VyZSBldmVyeXRoaW5nIHdv'));
	@fwrite($fp, base64_decode('cmtzIGFmdGVyIHRoZSByZWNlbnQgY2hhbmdlcyBpbiBPT1AKLSBDcmVhdGUgYSBsb2dnZXIgcGx1Z2luIHRoYXQgY3JlYXRlcyBhIGZsYXRmaWxlIGxvZyBmaWxlIGluICJzZWN1cmUvIgoKV0hPSVMKLSB3ZWJ3aG9pczogYmVzaWRlIFRYVC9YTUwvSlNPTiBtb3Jl'));
	@fwrite($fp, base64_decode('IG91dHB1dCBtb2RpPyAgQ1NWLCBTL01JTUUgIChhbmQgYWRkIHRoZSBTL01JTUUga2V5cHVycG9zZSB0byB0aGUgWC41MDkgY2VydGlmaWNhdGVzKQotIHdob2lzIHF1ZXJ5ICdvaWQ6JyBzaG91bGQgc2hvdyBhbGwgcm9vdCBlbnRyaWVzIChzdWJvcmRpbmF0ZSBl'));
	@fwrite($fp, base64_decode('bnRyaWVzKSwgYnV0IHRoZXJlIGlzIG9ubHkgdGhlIG1lc3NhZ2UgIm5vdCBmb3VuZCIKClJGQwotIHByb29mIHJlYWQKLSBzaG91bGQgdGhlIHdob2xlIFdIT0lTIG91dHB1dCBiZSBjYXNlIGluc2Vuc2l0aXZlPwotIHNob3VsZCAiZGlzdGFuY2UiIGJlIG1hbmRh'));
	@fwrite($fp, base64_decode('dG9yeT8KLSB0cnkgdG8gdXNlIE1VU1QsIE1VU1QgTk9ULCBTSEFMTCBldGMuIGFjY29yZGluZyB0byBSRkMgMjExOQotIGZlbGRlciBkaWUgbmljaHQgb3B0aW9uYWwgc2luZCA9PiBtYW5kYXRvcnkga2VubnplaWNobmVuCgpPT0JFL1NFVFVQCi0gVGhlcmUgc2hv'));
	@fwrite($fp, base64_decode('dWxkIGJlIGEgInRlc3QgZGF0YWJhc2UgY29ubmVjdGlvbiIgYnV0dG9uCgpTTUFMTCBUSElOR1MKLSBSQSBhZGRyZXNzIGRhdGE6IENvdW50cnkgc2VsZWN0aW9uIGJveCBsaWtlIGluIE9JREluZm8KLSBXZSBzaG91bGQgcmVtb3ZlICJkaWUoKSIgd2hlbmV2ZXIg'));
	@fwrite($fp, base64_decode('cG9zc2libGUsIGJlY2F1c2UgaXQgaXMgdmVyeSB1bmZsZXhpYmxlCi0gb2ZmZXIgc2lnbmF0dXJlIGNoZWNrZXIgdG9vbCB0byB2ZXJpZnkgV0hPSVMgcmVzcG9uc2VzCi0gd2ViIHN2biB1cGRhdGVyOiAiYmxhY2sgbGlzdCIgKGRvIG5vdCBvdmVyd3JpdGUgc3Bl'));
	@fwrite($fp, base64_decode('Y2lmaWMgZmlsZXMgbGlrZSBmYXZpY29uLmljbykKLSBtaW5pbXVtLWF1ZmtsYXBwc3R1ZmVuIGZ1ZXIgYWxsZSBvYmpla3RlIHVuZCBwbHVnaW5zIGVpbnN0ZWxsYmFyIG1hY2hlbiwgc29kYXNzIHouYi4gYWxsZSBPSURzIGltbWVyIGJpcyB6dXIgc3R1ZmUgMiBh'));
	@fwrite($fp, base64_decode('dWZnZWtsYXBwdCBzaW5kLCB3ZW5uIG1hbiBPSURwbHVzIGZyaXNjaCDDtmZmbmV0Ci0gbWFrZSB1c2Ugb2YgYXV0b2xvYWRpbmcgb2YgUEhQIGNsYXNzZXMKLSBSZXZpdmUgdGhlIGlkZWEgb2YgImluZm9ybWF0aW9uIG9iamVjdHMiID0gT0lEcyB0aGF0IGNvbnRh'));
	@fwrite($fp, base64_decode('aW4gY29udGVudAotIFRoaW5ncyBsaWtlICJjb25maWcoKS0+bWluUmFQYXNzd29yZExlbmd0aCIgc2hvdWxkIG5vdCBiZSBoYXJkY29kZWQgZnVuY3Rpb25zLCBidXQgcmF0aGVyIHF1ZXJpZWQgd2l0aCBub3JtYWwgZ2V0VmFsdWUoKSBldGMuCi0gQVBJIDogTWFr'));
	@fwrite($fp, base64_decode('ZSBhIGZ1bmN0aW9uIHRoYXQgY2hlY2tzIGlmIGEgUkEgZXhpc3RzLCBhbmQgdXNlIGl0IGV2ZXJ5d2hlcmUgd2hlcmUgbmVlZGVkCi0gU2hvdWxkIHdlIHNlbGYtaG9zdCBwb2x5ZmlsbCBkdWUgdG8gR0RQUiBzdHVmZj8KLSBPYmplY3QgdHlwZSBwbHVnaW5zIDog'));
	@fwrite($fp, base64_decode('dGFrZSBjYXJlIHRoYXQgInRyZWVpY29uLnBuZyIgYW5kICJpY29uX2JpZy5wbmciIGV4aXN0IGV2ZXJ5d2hlcmUgKGJlY29tZSBzdGFuZGFyZCkKLSB3aGVuIGFqYXgucGhwIGdlbmVyYXRlcyBhIFBIUCBlcnJvciwgdGhlIGNsaWVudCBnaXZlcyBhICJzeW50YXgg'));
	@fwrite($fp, base64_decode('ZXJyb3IiIG1lc3NhZ2UuLi4gaXQgd291bGQgYmUgYmV0dGVyIGlmIHRoZSBjbGllbnQgc2hvd3MgdGhlIGZ1bGwgcGhwIGVycm9yPyBvciBzb21ldGhpbmcgbW9yZSB1c2VyLWZyaWVuZGx5PwotIGZyZWVvaWQ6IGdtYWlsIGFwcCBkb2VzIG5vdCBoeXBlcmxpbmsg'));
	@fwrite($fp, base64_decode('dGhlIGFjdGl2YXRpb24gVVJMLiB3aHk/Ci0gaG93IHRvIGF2b2lkIGludml0ZSBzcGFtbWluZz8KLSB3aGVuIGEgUEhQIGVycm9yIGhhcHBlbnMgKGkuZS4gdGhlIEFKQVggc2NyaXB0IGRpZCBub3QgbWFuYWdlIHRvIG91dHB1dCBhIEpTT04pLCB0aGUgQUpBWCBz'));
	@fwrite($fp, base64_decode('Y3JpcHQgb3V0cHV0cyAiRXJyb3I6IFN5bnRheEVycm9yOiBVbmV4cGVjdGVkIHRva2VuIDwgaW4gSlNPTiBhdCBwb3NpdGlvbiAwIiAuLi4gYmV0dGVyIHNob3cgdGhlIHVzZXIgdGhlIGFjdHVhbCBtZXNzYWdlCi0gd2hlbiBsb2dpbiBleHBpcmVkLCByZW1vdmUg'));
	@fwrite($fp, base64_decode('ZW50cmllcyBpbiB0aGUgdHJlZXZpZXcKLSBkaXNhYmxlIHNwZWNpZmljIGZ1bmN0aW9ucyAoZS5nLiBpbnZpdGUsIGxvZ2luLCByYWluZm8sIGZvcmdvdCBwYXNzd29yZCkgaWYgdGhlIHBsdWdpbnMgYXJlIG5vdCBpbnN0YWxsZWQgKGNoZWNrIGlmIGNsYXNzIHR5'));
	@fwrite($fp, base64_decode('cGUgaXMgcmVnaXN0ZXJlZCB1c2luZyBjbGFzc19leGlzdHMoKSkKLSBtYWtlIHVzYWdlIG9mIEZvcmVpZ24gS2V5cwoJUFJPQkxFTTogd2UgbmVlZCBmb3JlaWduIGtleXMgd2l0aCBubyBjaGVjaywgYmVjYXVzZQoJYSkgd2Ugd2FudCB0byBrZWVwIGxvZyBlbnRy'));
	@fwrite($fp, base64_decode('aWVzIGV2ZW4gaWYgYW4gb2JqZWN0L3VzZXIgaXMgZGVsZXRlZAoJYikgbG9nX3VzZXIudXNlcm5hbWUgY2FuIGFsc28gYmUgJ2FkbWluJyAoYW5kIHRoZXJlZm9yZSBub3QgYmUgYSBmb3JlaWduIGtleSB0byB0YWJsZSAncmEnKQoJYykgbm90IGV2ZXJ5IG9iamVj'));
	@fwrite($fp, base64_decode('dCBzaG91bGQgaGF2ZSBhIHJlZ2lzdGVyZWQgUkEuIFRoZXJlIHNob3VsZCBiZSAidW5rbm93biIgUkFzIHdoZXJlIG9ubHkgdGhlIGVtYWlsIGFkZHJlc3MgaXMga25vd24KLSA8YWJicj4gaW4gPGNvZGU+IHdpcmQgZG9wcGVsdCB1bnRlcnN0cmljaGVuCi0gd2Vu'));
	@fwrite($fp, base64_decode('biBtYW4gZWluZSB3ZWxsLWtub3duIE9JRCBhbmxlZ2VuIG32Y2h0ZSwgZGFubiBrb21tdCBmZWhsZXIgd2VnZW4gcmVwbGFjZUFzbjEvcmVwbGFjZUlyaSwgYWJlciBkaWUgT0lEIGlzdCBlcnN0ZWxsdC4gRGllIEFQSSBpc3QgYWJlciBuaWNodCByZWxvYWRlZC4g'));
	@fwrite($fp, base64_decode('TWFuIHNpZWh0IGFsc28gbmljaHQsIGRhc3MgZGllIE9JRCBlcnN0ZWxsdCB3dXJkZSwgdW5kIGVpbiBlcm5ldXRlciBrbGljayBhdWYgSW5zZXJ0IGb8aHJ0IHp1bSBQcmltYXJ5LUtleSBmZWhsZXIKLSBwcm9ibGVtOiB3ZW5uIGVpbmUgUkEgZWluZ2VsYWRlbiB3'));
	@fwrite($fp, base64_decode('ZXJkZW4gbfZjaHRlLCBtdXNzIG1hbiAidXBkYXRlIiBkcvxja2VuIHVuZCBkaWUgT0lEIHdpcmQgYWxzIHVwZGF0ZWQgbWFya2llcnQKLSBiZWkgbWVocmVyZW4gaWRlbnRpZmllcm4ga2FubiBtYW4gbmljaHQgYmVzdGltbWVuLCB3ZWxjaGVyIGlkZW50aWZpZXIg'));
	@fwrite($fp, base64_decode('ZGVyIGJldm9yenVndGUgc2VpbiBzb2xsISEKLSBzaG93IHdob2lzIGxpbmtzIG9ubHkgaWYgZm9sZGVyICJ3aG9pcy8iIGV4aXN0cwotIGRpc2FibGUgYXV0b2NvbXBsZXRlIG9uIHNvbWUgZm9ybXMKLSBncmFwaGljYWwgaW1wb3J2ZW1lbnRzIG9mIGZvcm1zIChp'));
	@fwrite($fp, base64_decode('bnB1dCBlZGl0cyBhbGlnbmVkKQotICJEb2N1bWVudHMiIHNlY3Rpb246IE1ha2UgZG9jdW1lbnRhdGlvbiBmb3IgdXNhZ2Ugb2YgT0lEcGx1cyAoZm9yIG1lbWJlcnMgb25seSkKLSBhZG1pbiBjb25maWcgbWVociB1c2VyIGZyaWVuZGx5LCBlLmcuIGhhdmluZyB0'));
	@fwrite($fp, base64_decode('aGUgZW5hYmxlL2Rpc2FibGUgb2JqZWN0IHR5cGUgc3R1ZmYgKGxpa2UgaW4gcmVnaXN0cmF0aW9uIHdpemFyZCkgYWxzbyBpbiB0aGUgYWRtaW4gY29udHJvbCBwYW5lbAotIGl0IHdvdWxkIGJlIGNvb2wgaWYgYWZ0ZXIgdGhlIGxvZ2luLCB0aGUgb3BlbmVkIG5v'));
	@fwrite($fp, base64_decode('ZGVzIGluIHRoZSB0cmVlIHdvdWxkIHN0YXkgb3BlbgotIHNob3VsZCB3ZSBsb2cgc29tZXdoZXJlLCB3aGVuIHRoZSBhZG1pbiBhY2NvdW50IHdhcyBsb2dnZWQgaW4/Ci0gaHRtbCBjaGVja2JveDogImxhYmVsIGZvciIgdmVyd2VuZGVuCi0gd2hlbiBqYXZhc2Ny'));
	@fwrite($fp, base64_decode('aXB0IGZhaWxzLCB0aGUgZm9ybSB3aWxsIGJlIHN1Ym1pdHRlZCB0byAnLi8nICwgdGhhdCBpcyBub3QgZ29vZCEgZmFpbGVkIGphdmFzY3JpcHQgbXVzdCByZXR1cm4gZmFsc2UsIHNvIHRoYXQgdGhlIGZvcm0gZG9lcyBub3QgZ2V0IHN1Ym1pdHRlZAotIGFkbWlu'));
	@fwrite($fp, base64_decode('OiBzaG93IHByaXZhY3kgZW50cmllcyBmcm9tIFJBcyAoYnV0IGdyZXksIHNvIHlvdSBrbm93IHRoYXQgaXQgaXMgcHJpdmF0ZSkKLSBhZG1pbiBzb2xsIGNvbnRhY3QgZGF0YSBlaW5lciBmcmVtZGVuIFJBIORuZGVybiBk/HJmZW4KLSBmcmVlb2lkOiBhc24uMSB1'));
	@fwrite($fp, base64_decode('bmQgaXJpIHNwYWx0ZW4gYXVzYmxlbmRlbiwgZGEgZGllc2VyIGFyYyBrZWluZSBJRHMgdmVyZ2lidD8KLSBQcml2YWN5OiBNZWhyIHN0dWZlbiwgei5iLiBkYXNzIG1hbiBkZW4gcGVyc29uYWwgbmFtZSBldnRsIGdhciBuaWNodCB6ZWlnZW4gbfZjaHRlCi0gTWFu'));
	@fwrite($fp, base64_decode('IHNvbGx0ZSAiY3JlYXRlZCIgYWLkbmRlcm4gZPxyZmVuISBvZGVyIGV2dGwgZ2FueiB2ZXJzdGVja2VuLCB3ZW5uIG1hbiBlcyBuaWNodCB3ZWnfCi0gaW4gZGVyIGNydWQgbGlzdGUgZGVuIHRpdGVsIGRlcyBvYmpla3RzIHplaWdlbgotIG5hdE9yZGVyKCkgaXN0'));
	@fwrite($fp, base64_decode('IG51ciBm/HIgT0lEIGf8bHRpZyEhISBhbmRlcmUgc29ydC1tZWNoYW5pc21lbiBm/HIgYW5kZXJlIG9iamVrdHR5cGVuIGVyZm9yZGVybGljaAotIHRpbnltY2UKCW1jZSBkaXJ0eSBmbGFnOgoJCS0gd2VubiBtYW4gd2VjaHNlbCAoanMgdHJlZSBzZWxlY3QpLCBk'));
	@fwrite($fp, base64_decode('YW5uIHNvbGwgYWJnZWZyYWd0IHdlcmRlbiwgb2IgdGlueW1jZSBkaXJ0eSBpc3QsIHVuZCBlaW5lIHdhcm51bmcgYnJpbmdlbiwgYWxzbyBzbywgd2llIHdlbm4gbWFuIGRpZSBzZWl0ZSBuZXUgbGFkZW4gd/xyZGUKCQktIGtyaXRpc2NoZXIgYnVnOiBzZWl0ZSD2'));
	@fwrite($fp, base64_decode('ZmZuZW4sIHRpbnkgbWNlIGVkaXRpZXJlbiwgc3BlaWNoZXJuIGtsaWNrZW4uIGRhbm4gZjUgbmV1IGxhZGVuIChuaWNodCBzdHJnK2Y1KTogZGFubiBpc3QgZGVyIGFsdGUgY29udGVudCB3aWVkZXIgZGEuIGF132VyIG1hbiBkcvxja3Qgc3RyZytmNQotIGpzdHJl'));
	@fwrite($fp, base64_decode('ZSBzZWxlY3Q6IGF1dG9tYXRpY2FsbHkgc2Nyb2xsIGRvd24KLSBvcHRpc2NoIGF1Zmj8YnNjaGVuLiBkaW5nZSB3aWUgUkE6IG1laHIgZGluZ2UgemVpZ2VuLCBhZHJlc3NlLCBlbWFpbCBldGMKCkRBVEFCQVNFCi0gY2hlY2sgaWYgdGhlIE5VTEwgYW5kIE5PVCBO'));
	@fwrite($fp, base64_decode('VUxMIGRlZmluaXRpb25zIGFyZSBtZWFuaW5nZnVsLiBJdCBpcyBub3QgZ29vZCBhdCBpbiAqX3JhIGV2ZXJ5dGhpbmcgaXMgTk9UIE5VTEwKLSBTUUxpdGUzOiBJbXBsZW1lbnQgTmF0dXJhbCBPSUQgc29ydGluZyAobmF0U29ydCkKCkZVVFVSRQotIG11bHRpbGFu'));
	@fwrite($fp, base64_decode('ZwotIG1ha2UgdXNlIG9mIENvbXBvc2VyLiBQcm9ibGVtczoKICAqIFdoYXQgaWYgY29tcG9zZXIgaW5zdGFsbHMgYSB2ZXJzaW9uIG9mIGEgY29tcG9uZW50LCB3aGljaCBpcyBpbmNvbXBhdGlibGU/CiAgKiBXZSBuZWVkIGEgbmV3IHB1Ymxpc2hpbmcgc2NyaXB0'));
	@fwrite($fp, base64_decode('LCBiZWNhdXNlIHNpbXBseSBjaGVja2luZyBvdXQgU1ZOIGlzIG5vdCBlbm91Z2ggYW55bW9yZS4gVGhlIHVzZXIgbmVlZHMgdG8gZXhlY3V0ZSBjb21wb3Nlci4gQnV0IHdoYXQgaXMgaWYgdGhlIHVzZXIgZG9uJ3QgaGF2ZSBjb21wb3NlciAob3IgZG9udCBoYXZl'));
	@fwrite($fp, base64_decode('IHNoZWxsIGFjY2VzcyBhdCBhbGw/KQotIGltcGxlbWVudCBzaXRlbWFwcyB4bWwKLSBhZG1pbiBzaG91bGQgYmUgYWJsZSB0byBjaGFuZ2Ugd2VsbGtub3duIG9pZHM/Ci0gbW92ZSBvaWQgdG8gZGlmZmVyZW50IGFyYwotIGJlaSBzZWhyIGdyb99lbiBhcmNzICh6'));
	@fwrite($fp, base64_decode('LkIuIFBFTikgc29sbGVuIG5pY2h0IGFsbGUgYW5nZXplaWd0IHdlcmRlbgotIHVudGVyc3T8dHp1bmcgZvxyIE9SUz8KLSBNZWhyICJDdXR0aW5nIEVkZ2UgVGVjaG5vbG9naWUiIHNvbGwgaW4gZGllc2VtIFByb2pla3QgenVtIFRyYWdlbiBrb21tZW46IEFKQVgs'));
	@fwrite($fp, base64_decode('IEpTT04sIHZvbGxzdORuZGlnIFVURjgsIENSVUQgZnJhbWV3b3JrcywgUERPLCBIVE1MNSwgTW9iaWxlcyBEZXNpZ24sIFB1cmUgQ1NTLCBBdXRvbG9hZGluZywgT2JqZWt0b3JpZW50aWVydW5nIChhYmVyIG5pY2h0IHVuYmVkaW5ndCBNVkMpLCBUZXN0aW5nLCAu'));
	@fwrite($fp, base64_decode('Li48YnI+Ci0gIlNlYXJjaCIgcGx1Z2luOiBGZWF0dXJlIHRvIHNlYXJjaCBpbnNpZGUgZG9jdW1lbnRhdGlvbiAoZG9jLyBkaXJlY3RvcnkpCi0gIlNlYXJjaCIgcGx1Z2luOiBJIHdhbnQgdG8gc2VhcmNoIGluIGFsbCBvYmplY3QgdHlwZXMgYW5kIFJBcy4gTm90'));
	@fwrite($fp, base64_decode('IGZpcnN0IHNlbGVjdCB0aGUgdHlwZS4KLSBIb3cgY2FuIHdlIG1ha2Ugc3VyZSB0aGF0IGV4YW1wbGUgb2JqZWN0cyBhcmUgbm90IGV4cG9ydGVkIHVzaW5nIG9pZC1pbmZvLmNvbSBleHBvcnQ/Ci0gQWRtaW5pc3RyYXRvci1JbnRlcmZhY2U6IGVuYWJsZSBhbmQg'));
	@fwrite($fp, base64_decode('ZGlzYWJsZSBvYmplY3QgdHlwZXMKLSBkZXRhaWxsZWQgY2hhbmdlLWhpc3Rvcnkgb2YgZWFjaCBvaWQKCkJVR1M/Ci0gT0lEcGx1cyBkb2VzIG5vdCB3b3JrIGluIFNhZmFyaSBNb2JpbGUhCgkxLiBZb3UgY2Fubm90IHNjcm9sbCB0aGUgT0lEIGdyaWQsIGFzIHRo'));
	@fwrite($fp, base64_decode('ZSBzY3JvbGxpbmcgYWZmZWN0cyB0aGUgd2hvbGUgcGFnZSwgbm90IHRoZSBncmlkLgoJMi4gSlF1ZXJ5VUkgc2xpZGVycyBjYW5ub3QgYmUgZHJhZ2dlZAoKUkVKRUNURUQgSURFQVMKLSBzb2xsdGUgZXMgbWVoZXJlIGFkbWlucyBnZWJlbj8KLSByZWNvcmQgZmly'));
	@fwrite($fp, base64_decode('c3QgUkEgYW5kIGN1cnJlbnQgUkEgPT4gWC42NjAgZG9lcyBub3QgaGF2ZSB0aGlzIHJlcXVpcmVtZW50Ci0gbWFya2VycyBEUkFGVCwgTEVBRiBhbmQgRlJPWkVOIGV0Yy4gPT4gdXNlICJQcm90ZWN0ZWQiIGlmIHlvdSB3YW50IHRvIG1ha2UgaXQgaW52aXNpYmxl'));
	@fwrite($fp, base64_decode('CgpJREVBUwotIHdoZW4gYSBuZXcgb2lkIGlzIGNyZWF0ZWQsIHNob3VsZCB3ZSByZWRpcmVjdCB0byB0aGUgbmV3bHkgY3JlYXRlZCBPSUQsIHNvIHRoYXQgdGhlIHVzZXIgY2FuIGJlZ2luIGVudGVyaW5nIHRoZSBkZXNjcmlwdGlvbiBldGM/Ci0gd2hlbiBhbiBv'));
	@fwrite($fp, base64_decode('YmplY3Qgd2FzIG5vdCBmb3VuZCwgdGhlIGVycm9yIG1lc3NhZ2UgY291bGQgc2hvdyB0aGUgbmV4dCBwb3NzaWJsZSBrbm93biBvYmplY3QgKGxpa2UgV2ViV0hPSVMgZG9lcykKLSB0aGUgImdvdG8iIHF1aWNrYmFyIChhdCB0aGUgdG9wIHJpZ2h0KSBjb3VsZCBh'));
	@fwrite($fp, base64_decode('bHNvIGJlIHVzZWQgdG8gc2VhcmNoIHNvbWV0aGluZyAuLi4KLSAuLi4gYWx0ZXJuYXRpdmVseSwgdGhlICJvYmplY3Qgbm90IGZvdW5kIiBlcnJvciBwYWdlIGNvdWxkIGxpbmsgdG8gdGhlIHNlYXJjaCBwbHVnaW4KLSBtYWtlIGNvbG9yIHBsdWdpbiBhdmFpbGFi'));
	@fwrite($fp, base64_decode('bGUgZm9yIGV2ZXJ5b25lLiBBZG1pbiBtYXkgcGVybWFuZW50bHkgc2F2ZSB0aGUgY29sb3JzLCBidXQgdXNlcnMgc2hvdWxkIGJlIGFibGUgdG8gc2V0IHRoZWlyIG93biB0aGVtZSwgc2F2ZWQgdmlhIGNvb2tpZXMKLSB0aGVyZSBzaG91bGQgYmUgYSBmb3JtIHdo'));
	@fwrite($fp, base64_decode('ZXJlIGFuIFJBIGNhbiByZXF1ZXN0IGFuIGludml0YXRpb24sIGV2ZW4gaWYgdGhlIHN1cGVyaW9yIFJBIGRpZCBub3QgaW52aXRlIHRoZW0uCiAgdGhlIGZhY3QgdGhhdCBhIFJBIGV4aXN0cyBpbiB0aGUgT2JqZWN0IFRhYmxlIHNob3VsZCBwZXJtaXQgdGhlIFJB'));
	@fwrite($fp, base64_decode('IHRvIGludml0ZSB0aGVpcnNlbGYuCi0gYmVpbSB2ZXJsYXNzZW4gZGVyIHNlaXRlLCB6LmIuIHdlbm4gbWFuIGxpbmtzIGF1ZiBlaW5lbiBuZXVlbiBtZW78cHVua3Qga2xpY2t0LCBzb2xsIGVpbmUgYWJmcmFnZSBrb21tZW4sIG9iIG1hbiBzcGVpY2hlcm4gbfZj'));
	@fwrite($fp, base64_decode('aHRlCi0gbWFrZSBhIGxpc3Qgb2YgT0lEcyB0aGF0IGRvIG5vdCBhc3NpZ24gQVNOMS9JUkkgaWRlbnRpZmllcnMgKGUuZy4gSUFOQSBQRU4gb3IgVmlhVGhpbmtTb2Z0IEZyZWVPSUQpLCB0aGVuIHJlamVjdCBhbnkgaWRlbnRpZmllciB0aGUgdXNlciBwcm92aWRl'));
	@fwrite($fp, base64_decode('cwotIHNhbml0aXplIElQdjQsIElQdjYsIEdVSUQgZHVyaW5nIGNyZWF0aW9uCgliZWkgSVB2NCB1bmQgSVB2NjogLSBpZiBpdCBpcyBhIHNpbmdsZSBob3N0IGFkZHJlc3MsIGRvbid0IHB1dCAvMzIgb3IgLzEyOCBzdWZmaXgKCSAgICAgICAgICAgICAgICAgICAt'));
	@fwrite($fp, base64_decode('IHN0cmlrZSB1bm5lY2Vzc2FyeSBiaXRzIHRoYXQgYXJlIG5vdCBkZWZpbmVkIGluIHRoZSBuZXRtYXNrIChhbHNvIGF0IHRoZSB3aG9pcyBvdXRwdXQpCi0gbGV0IHRoZSBzeXNhZG1pbiBkZWNpZGUgaWYgdGhleSB3YW50IHRoZSB0aXRsZSBiZSAic3lzdGVtdGl0'));
	@fwrite($fp, base64_decode('bGUgLSBvYmplY3QgdGl0bGUiIG9yICJvYmplY3QgdGl0bGUgLSBzeXN0ZW10aXRsZSIKLSBzaG91bGQgYSBSQSBiZSBhYmxlIHRvIG1hcmsgdGhlaXIgb3duIG9pZCBhcyBjb25maWRlbnRpYWwsIGluc3RlYWQgb2YgYXNraW5nIHRoZSBzdXBlcmlvciBSQT8KLSBz'));
	@fwrite($fp, base64_decode('b2xsdGUgZXMgZWluZSBvaWRwbHVzIHByb2pla3RzZWl0ZSBnZWJlbiBhbnN0ZWxsZSBudXIgZGFzIG5hY2t0ZSBzeXN0ZW0/Ci0gdmVuZG9yIHNpZ25hdHVyZSB0byBwbHVnaW5zICsgdmlhdGhpbmtzb2Z0IHNpZ25hdHVyZXMgKyAiY2hlY2siIHByb2dyYW0gaWYg'));
	@fwrite($fp, base64_decode('YWxsIHNpZ25hdHVyZXMgbWF0Y2gKLSBoYXZlIGEgbWVudSBpdGVtIChwbHVnaW4pICJsYXRlc3QgdXBkYXRlcyIgd2hpY2ggbGlzdHMgT0lEcyB0aGF0IGhhdmUgYmVlbiBjaGFuZ2VkIG9yIGFkZGVkIHJlY2VudGx5PwotICh1bnN1cmU6KSB3b3VsZCBpdCBiZSBn'));
	@fwrite($fp, base64_decode('b29kIGlmIHRoZSBzdXBlcmlvciBSQSBjb21tZW50IGlzIHNob3duIGluIHRoZSBvYmplY3QgcGFnZSBpdHNlbGY/Ci0gRHVyaW5nIGFuIG9iamVjdCBpbnNlcnRpb246IElmIGV2ZXJ5dGhpbmcgaXMgZW1wdHkgKEFTTjEsIElSSSwgY29tbWVudCksIHNob3VsZCB0'));
	@fwrite($fp, base64_decode('aGVuIHRoZXJlIGJlIGEgd2FybmluZz8KLSBUaGUgc3lzdGVtIHNob3VsZCB3YXJuIGlmIHRoZXJlIGFyZSB0d28gT0lEcyB3aXRoIHRoZSBzYW1lIEFTTi4xIGlkZW50aWZpZXIgKGl0IGlzIGFsbG93ZWQsIGJ1dCBub3QgcmVjb21tZW5kZWQhKQoKUVVFU1RJT05T'));
	@fwrite($fp, base64_decode('Ci0gc2hvdWxkIHRoZSBjb2xsYXRpb24gYmUgY2FzZSBzZW5zaXRpdmUgb3IgY2FzZSBpbnNlbnNpdGl2ZT8gRm9yIEphdmEgcGFja2FnZSBuYW1lcywgaXQgc2hvdWxkIGJlIGNhc2Ugc2Vuc3RpdmllCi0gd29ydCAiZ3VpZCIgb2RlciAidXVpZCIgdmVyd2VuZGVu'));
	@fwrite($fp, base64_decode('PwotIHNob3VsZCAiT0lEIHVwZGF0ZWQiIGJlIHNwbGl0IGludG8gdHdvIGNhdGVnb3JpZXMgInVwZGF0ZWQgYnkgc3VwZXJpb3IiIChlLmcuIGlkZW50aWZpZXJzKSBhbmQgInVwZGF0ZWQgYnkgb3duZXIiIChkZXNjcmlwdGlvbiBldGMpPwotICJ1cGRhdGVkIiBu'));
	@fwrite($fp, base64_decode('aWNodCBha3R1YWxpc2llcmVuLCB3ZW5uIG1hbiBudXIgYXVmICJ1cGRhdGUiIGtsaWNrdCBhYmVyIG5peCBnZeRuZGVydCBoYXQKLSAiRG9jdW1lbnRzIiBzZWN0aW9uOiBDYW4gYmFzZSBvZiBVUkxzL2ltYWdlcyBpbnNpZGUgdGhlIEhUTUwgYmUgY2hhbmdlZCBh'));
	@fwrite($fp, base64_decode('dXRvbWF0aWNhbGx5PwoKUFJJVkFDWToKLSBicmluZyBiYWNrICIzcC9jb29raWVjb250ZW50Ij8gRE0gMjggTWF5IDIwMTk6IFJlbW92ZWQgQ29va2llQ29uc2VudCB0ZW1wb3JhcmlseSwgYmVjYXVzZSBpdCBpcyBwbGFjZWQgYXQgdGhlIGJlZ2lubmluZyBvZiB0'));
	@fwrite($fp, base64_decode('aGUgcGFnZSBhbmQgdGhlcmVmb3JlIHJ1aW5zIHRoZSBHb29nbGUgaW5kZXggLi4uCgk9PiBXZSBtaWdodCBub3QgbmVlZCBpdCwgYmVjYXVzZSBjb29raWVzIGFyZSBvbmx5IHNldCBkdXJpbmcgbG9naW4sIGFuZCBhdCB0aGUgbG9naW4gcGFnZSBpdHNlbGYsIHdl'));
	@fwrite($fp, base64_decode('IGFscmVhZHkgd2FybiBhYm91dCBjb29raWVzLCBpbiBhZGRpdGlvbiB0byB0aGUgUHJpdmFjeSBkb2N1bWVudGF0aW9uCgpHVUlEIE1hbmFnZW1lbnQKLSBMZWFmIG5vZGVzIChHVUlEcykgc2hvdWxkIHNob3cvZWRpdCB0aGUgVGl0bGUgaW4gdGhlIENSVUQsIHNv'));
	@fwrite($fp, base64_decode('IHlvdSBkb250IGhhdmUgdG8gY2xpY2sgdGhlIEdVSUQgdG8gc2VlIHRoZSB0aXRsZQotIHNlbHRzYW1lciBidWc6IHdlbm4gaWNoIGd1aWQ6b2lkcGx1cyBlZGl0aWVyZSwgZGFubiD2ZmZuZXQgc2ljaCBsaW5rcyBndWlkOmFjdGl2ZWRpcmVjdG9yeSBiZWltIG5l'));
	@fwrite($fp, base64_decode('dWxhZGVuIGRlcyBiYXVtcyBuYWNoIGRlbSB1cGRhdGUuIGlyZ2VuZHdpZSD2ZmZuZXQgZXIgZGVuIHp1bGV0enQgZ2X2ZmZuZXRlbiBub2RlIGJlaW0gcmVsb2FkIG5vY2htYWwKClJlcHJvOgotIENhbiBhIHByZXZpb3VzbHkgZGVsZXRlZCAyLjk5OSBub3QgYmUg'));
	@fwrite($fp, base64_decode('Y3JlYXRlZCBhbnltb3JlPyAoZHVyaW5nIElOU0VSVDogImlkZW50aWZpZXJzIGNhbm5vdCBiZSBjaGFuZ2VkIikK'));
	@fclose($fp);
}
if (!is_file('TODO')) {
	warn('File has vanished! Will re-create it: TODO');
	writefile_3();
	if (!is_file('TODO')) {
		warn('File cannot be created (not existing): TODO');
	} else if (sha1_file('TODO') != '597592e690fee046e9fd3e5aa0c2385fecc0c0e8') {
		warn('File cannot be created (checksum mismatch): TODO');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('TODO', 0644)) {
		warn('Could not change file permissions of TODO');
	}
} else {
	if (@sha1_file('TODO') !== '597592e690fee046e9fd3e5aa0c2385fecc0c0e8') {
		if (@sha1_file('TODO') !== 'a84b1eff7c2d6ea74dbd6f0b1979a946899b026b') {
			warn('File was modified. Will overwrite the changes now: TODO');
			$tmp = pathinfo('TODO');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('TODO')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('TODO', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_3();
		if (@sha1_file('TODO') !== '597592e690fee046e9fd3e5aa0c2385fecc0c0e8') {
			warn('File cannot be written (checksum mismatch): TODO');
		}
	}
}

// Files different: includes/config_values.txt
function writefile_4() {
	@$fp = fopen('includes/config_values.txt', 'w');
	@fwrite($fp, base64_decode('DQpPVkVSVklFVyBPRiBBTEwgQ09ORklHLklOQy5QSFAgU0VUVElOR1MNCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KDQpUaGUgZmlsZSBpbmNsdWRlcy9jb25maWcuaW5jLnBocCBjb250YWlucyB2YXJpb3VzIHNldHRpbmdzDQp3aGlj'));
	@fwrite($fp, base64_decode('aCBhcmUgZXNzZW50aWFsIHRvIGNvbm5lY3QgdG8geW91ciBkYXRhYmFzZSBhbmQgb3RoZXINCnRoaW5ncyB0aGF0IHNob3VsZCBiZSBrbm93biBiZWZvcmUgdGhlIGRhdGFiYXNlIGNvbm5lY3Rpb24NCmlzIG9wZW5lZC4NCg0KTm90ZSB0aGF0IG90aGVyIHNldHRp'));
	@fwrite($fp, base64_decode('bmdzIGFyZSBzdG9yZWQgaW4gdGhlIGRhdGFiYXNlICh0YWJsZSAiY29uZmlnIikNCmFuZCBjYW4gYmUgYWNjZXNzZWQgdXNpbmcgdGhlIGFkbWluIGxvZ2luIGFyZWEuDQoNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KKDEpIENPTkZJ'));
	@fwrite($fp, base64_decode('RyBTRVRUSU5HUyBQUk9WSURFRCBCWSBTRVRVUA0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQpPSURwbHVzOjpiYXNlQ29uZmlnKCktPnNldFZhbHVlKCdDT05GSUdfVkVSU0lPTicsICAgICAgICAgICAyLjEpOw0KT2xkIDIuMCBmb3Jt'));
	@fwrite($fp, base64_decode('YXQ6ICAgICAgICAgIGRlZmluZSgnT0lEUExVU19DT05GSUdfVkVSU0lPTicsICAgMi4wKTsNCg0KT0lEcGx1czo6YmFzZUNvbmZpZygpLT5zZXRWYWx1ZSgnQURNSU5fUEFTU1dPUkQnLCAgICAgICAgICAgJzxiYXNlNjQgZW5jb2RlZCBTSEEzLTUxMiBoYXNoPicp'));
	@fwrite($fp, base64_decode('Ow0KT2xkIDIuMCBmb3JtYXQ6ICAgICAgICAgIGRlZmluZSgnT0lEUExVU19BRE1JTl9QQVNTV09SRCcsICAgJzxiYXNlNjQgZW5jb2RlZCBTSEEzLTUxMiBoYXNoPicpOw0KDQpPSURwbHVzOjpiYXNlQ29uZmlnKCktPnNldFZhbHVlKCdEQVRBQkFTRV9QTFVHSU4n'));
	@fwrite($fp, base64_decode('LCAgICAgICAgICAnJyk7DQpPbGQgMi4wIGZvcm1hdDogICAgICAgICAgZGVmaW5lKCdPSURQTFVTX0RBVEFCQVNFX1BMVUdJTicsICAnJyk7DQoNCk9JRHBsdXM6OmJhc2VDb25maWcoKS0+c2V0VmFsdWUoJ09EQkNfRFNOJywgICAgICAgICAgICAgICAgICdEUklW'));
	@fwrite($fp, base64_decode('RVI9e1NRTCBTZXJ2ZXJ9O1NFUlZFUj1sb2NhbGhvc3Q7REFUQUJBU0U9b2lkcGx1cztDSEFSU0VUPVVURjgnKTsNCk9sZCAyLjAgZm9ybWF0OiAgICAgICAgICBkZWZpbmUoJ09JRFBMVVNfT0RCQ19EU04nLCAgICAgICAgICdEUklWRVI9e1NRTCBTZXJ2ZXJ9O1NF'));
	@fwrite($fp, base64_decode('UlZFUj1sb2NhbGhvc3Q7REFUQUJBU0U9b2lkcGx1cztDSEFSU0VUPVVURjgnKTsNCg0KT0lEcGx1czo6YmFzZUNvbmZpZygpLT5zZXRWYWx1ZSgnT0RCQ19VU0VSTkFNRScsICAgICAgICAgICAgJ3NhJyk7DQpPbGQgMi4wIGZvcm1hdDogICAgICAgICAgZGVmaW5l'));
	@fwrite($fp, base64_decode('KCdPSURQTFVTX09EQkNfVVNFUk5BTUUnLCAgICAnc2EnKTsNCg0KT0lEcGx1czo6YmFzZUNvbmZpZygpLT5zZXRWYWx1ZSgnT0RCQ19QQVNTV09SRCcsICAgICAgICAgICAgYmFzZTY0X2RlY29kZSgnPGJhc2U2NF9lbmNvZGVkX3Bhc3N3b3JkPicpKTsgLy8gYWx0'));
	@fwrite($fp, base64_decode('ZXJuYXRpdmVseSBhcyBwbGFpbnRleHQNCk9sZCAyLjAgZm9ybWF0OiAgICAgICAgICBkZWZpbmUoJ09JRFBMVVNfT0RCQ19QQVNTV09SRCcsICAgICc8YmFzZTY0X2VuY29kZWRfcGFzc3dvcmQ+Jyk7IC8vIG11c3QgYmUgYmFzZTY0IGVuY29kZWQNCkluZm9ybWF0'));
	@fwrite($fp, base64_decode('aW9uOiAgICAgICAgICAgICBUaGUgYmFzZTY0IGVuY29kaW5nICJwcm90ZWN0cyIgeW91ciBwYXNzd29yZCBmcm9tIGJlaW5nIHJlYWQgaWYNCiAgICAgICAgICAgICAgICAgICAgICAgICBzb21lb25lIHF1aWNrbHkgbG9va3MgYXQgeW91ciBkaXNwbGF5IHdoaWxl'));
	@fwrite($fp, base64_decode('IHlvdSBoYXZlIHRoZSBjb25maWd1cmF0aW9uIGZpbGUgb3BlbmVkLg0KDQpPSURwbHVzOjpiYXNlQ29uZmlnKCktPnNldFZhbHVlKCdQRE9fRFNOJywgICAgICAgICAgICAgICAgICAncGdzcWw6aG9zdD1sb2NhbGhvc3Q7ZGJuYW1lPW9pZHBsdXMnKTsNCk9sZCAy'));
	@fwrite($fp, base64_decode('LjAgZm9ybWF0OiAgICAgICAgICBkZWZpbmUoJ09JRFBMVVNfUERPX0RTTicsICAgICAgICAgICdwZ3NxbDpob3N0PWxvY2FsaG9zdDtkYm5hbWU9b2lkcGx1cycpOw0KDQpPSURwbHVzOjpiYXNlQ29uZmlnKCktPnNldFZhbHVlKCdQRE9fVVNFUk5BTUUnLCAgICAg'));
	@fwrite($fp, base64_decode('ICAgICAgICAncG9zdGdyZXMnKTsNCk9sZCAyLjAgZm9ybWF0OiAgICAgICAgICBkZWZpbmUoJ09JRFBMVVNfUERPX1VTRVJOQU1FJywgICAgICdwb3N0Z3JlcycpOw0KDQpPSURwbHVzOjpiYXNlQ29uZmlnKCktPnNldFZhbHVlKCdQRE9fUEFTU1dPUkQnLCAgICAg'));
	@fwrite($fp, base64_decode('ICAgICAgICBiYXNlNjRfZGVjb2RlKCc8YmFzZTY0X2VuY29kZWRfcGFzc3dvcmQ+JykpOyAvLyBhbHRlcm5hdGl2ZWx5IGFzIHBsYWludGV4dA0KT2xkIDIuMCBmb3JtYXQ6ICAgICAgICAgIGRlZmluZSgnT0lEUExVU19QRE9fUEFTU1dPUkQnLCAgICAgJzxiYXNl'));
	@fwrite($fp, base64_decode('NjRfZW5jb2RlZF9wYXNzd29yZD4nKTsgLy8gbXVzdCBiZSBiYXNlNjQgZW5jb2RlZA0KSW5mb3JtYXRpb246ICAgICAgICAgICAgIFRoZSBiYXNlNjQgZW5jb2RpbmcgInByb3RlY3RzIiB5b3VyIHBhc3N3b3JkIGZyb20gYmVpbmcgcmVhZCBpZg0KICAgICAgICAg'));
	@fwrite($fp, base64_decode('ICAgICAgICAgICAgICAgIHNvbWVvbmUgcXVpY2tseSBsb29rcyBhdCB5b3VyIGRpc3BsYXkgd2hpbGUgeW91IGhhdmUgdGhlIGNvbmZpZ3VyYXRpb24gZmlsZSBvcGVuZWQuDQoNCk9JRHBsdXM6OmJhc2VDb25maWcoKS0+c2V0VmFsdWUoJ01ZU1FMX0hPU1QnLCAg'));
	@fwrite($fp, base64_decode('ICAgICAgICAgICAgICdsb2NhbGhvc3Q6MzMwNicpOw0KT2xkIDIuMCBmb3JtYXQ6ICAgICAgICAgIGRlZmluZSgnT0lEUExVU19NWVNRTF9IT1NUJywgICAgICAgJ2xvY2FsaG9zdDozMzA2Jyk7DQpJbmZvcm1hdGlvbjogICAgICAgICAgICAgUG9ydCBpcyBvcHRp'));
	@fwrite($fp, base64_decode('b25hbA0KDQpPSURwbHVzOjpiYXNlQ29uZmlnKCktPnNldFZhbHVlKCdNWVNRTF9VU0VSTkFNRScsICAgICAgICAgICAncm9vdCcpOw0KT2xkIDIuMCBmb3JtYXQ6ICAgICAgICAgIGRlZmluZSgnT0lEUExVU19NWVNRTF9VU0VSTkFNRScsICAgJ3Jvb3QnKTsNCg0K'));
	@fwrite($fp, base64_decode('T0lEcGx1czo6YmFzZUNvbmZpZygpLT5zZXRWYWx1ZSgnTVlTUUxfUEFTU1dPUkQnLCAgICAgICAgICAgYmFzZTY0X2RlY29kZSgnPGJhc2U2NF9lbmNvZGVkX3Bhc3N3b3JkPicpKTsgLy8gYWx0ZXJuYXRpdmVseSBhcyBwbGFpbnRleHQNCk9sZCAyLjAgZm9ybWF0'));
	@fwrite($fp, base64_decode('OiAgICAgICAgICBkZWZpbmUoJ09JRFBMVVNfTVlTUUxfUEFTU1dPUkQnLCAgICc8YmFzZTY0X2VuY29kZWRfcGFzc3dvcmQ+Jyk7IC8vIG11c3QgYmUgYmFzZTY0IGVuY29kZWQNCkluZm9ybWF0aW9uOiAgICAgICAgICAgICBUaGUgYmFzZTY0IGVuY29kaW5nICJw'));
	@fwrite($fp, base64_decode('cm90ZWN0cyIgeW91ciBwYXNzd29yZCBmcm9tIGJlaW5nIHJlYWQgaWYNCiAgICAgICAgICAgICAgICAgICAgICAgICBzb21lb25lIHF1aWNrbHkgbG9va3MgYXQgeW91ciBkaXNwbGF5IHdoaWxlIHlvdSBoYXZlIHRoZSBjb25maWd1cmF0aW9uIGZpbGUgb3BlbmVk'));
	@fwrite($fp, base64_decode('Lg0KDQpPSURwbHVzOjpiYXNlQ29uZmlnKCktPnNldFZhbHVlKCdNWVNRTF9EQVRBQkFTRScsICAgICAgICAgICAnb2lkcGx1cycpOw0KT2xkIDIuMCBmb3JtYXQ6ICAgICAgICAgIGRlZmluZSgnT0lEUExVU19NWVNRTF9EQVRBQkFTRScsICAgJ29pZHBsdXMnKTsN'));
	@fwrite($fp, base64_decode('Cg0KT0lEcGx1czo6YmFzZUNvbmZpZygpLT5zZXRWYWx1ZSgnUEdTUUxfSE9TVCcsICAgICAgICAgICAgICAgJ2xvY2FsaG9zdDo1NDMyJyk7DQpPbGQgMi4wIGZvcm1hdDogICAgICAgICAgZGVmaW5lKCdPSURQTFVTX1BHU1FMX0hPU1QnLCAgICAgICAnbG9jYWxo'));
	@fwrite($fp, base64_decode('b3N0OjU0MzInKTsNCkluZm9ybWF0aW9uOiAgICAgICAgICAgICBQb3J0IGlzIG9wdGlvbmFsDQoNCk9JRHBsdXM6OmJhc2VDb25maWcoKS0+c2V0VmFsdWUoJ1BHU1FMX1VTRVJOQU1FJywgICAgICAgICAgICdwb3N0Z3JlcycpOw0KT2xkIDIuMCBmb3JtYXQ6ICAg'));
	@fwrite($fp, base64_decode('ICAgICAgIGRlZmluZSgnT0lEUExVU19QR1NRTF9VU0VSTkFNRScsICAgJ3Bvc3RncmVzJyk7DQoNCk9JRHBsdXM6OmJhc2VDb25maWcoKS0+c2V0VmFsdWUoJ1BHU1FMX1BBU1NXT1JEJywgICAgICAgICAgIGJhc2U2NF9kZWNvZGUoJzxiYXNlNjRfZW5jb2RlZF9w'));
	@fwrite($fp, base64_decode('YXNzd29yZD4nKSk7IC8vIGFsdGVybmF0aXZlbHkgYXMgcGxhaW50ZXh0DQpPbGQgMi4wIGZvcm1hdDogICAgICAgICAgZGVmaW5lKCdPSURQTFVTX1BHU1FMX1BBU1NXT1JEJywgICAnPGJhc2U2NF9lbmNvZGVkX3Bhc3N3b3JkPicpOyAvLyBtdXN0IGJlIGJhc2U2'));
	@fwrite($fp, base64_decode('NCBlbmNvZGVkDQpJbmZvcm1hdGlvbjogICAgICAgICAgICAgVGhlIGJhc2U2NCBlbmNvZGluZyAicHJvdGVjdHMiIHlvdXIgcGFzc3dvcmQgZnJvbSBiZWluZyByZWFkIGlmDQogICAgICAgICAgICAgICAgICAgICAgICAgc29tZW9uZSBxdWlja2x5IGxvb2tzIGF0'));
	@fwrite($fp, base64_decode('IHlvdXIgZGlzcGxheSB3aGlsZSB5b3UgaGF2ZSB0aGUgY29uZmlndXJhdGlvbiBmaWxlIG9wZW5lZC4NCg0KT0lEcGx1czo6YmFzZUNvbmZpZygpLT5zZXRWYWx1ZSgnUEdTUUxfREFUQUJBU0UnLCAgICAgICAgICAgJ29pZHBsdXMnKTsNCk9sZCAyLjAgZm9ybWF0'));
	@fwrite($fp, base64_decode('OiAgICAgICAgICBkZWZpbmUoJ09JRFBMVVNfUEdTUUxfREFUQUJBU0UnLCAgICdvaWRwbHVzJyk7DQoNCg0KT0lEcGx1czo6YmFzZUNvbmZpZygpLT5zZXRWYWx1ZSgnU1FMSVRFM19GSUxFJywgICAgICAgICAgICdzZWN1cmUvb2lkcGx1cy5kYicpOw0KT2xkIDIu'));
	@fwrite($fp, base64_decode('MCBmb3JtYXQ6ICAgICAgICAgIGRlZmluZSgnT0lEUExVU19TUUxJVEUzX0ZJTEUnLCAgICdzZWN1cmUvb2lkcGx1cy5kYicpOw0KQXR0ZW50aW9uOiAgICAgICAgICAgICAgIFRoaXMgZmlsZSBtdXN0IGJlIGxvY2F0ZWQgaW4gYSBsb2NhdGlvbiB0aGF0IGlzIG5v'));
	@fwrite($fp, base64_decode('dCB3b3JsZC1yZWFkYWJsZS9kb3dubG9hZGFibGUhDQoNCk9JRHBsdXM6OmJhc2VDb25maWcoKS0+c2V0VmFsdWUoJ1NRTElURTNfRU5DUllQVElPTicsICAgICAgICAgICAnJyk7DQpPbGQgMi4wIGZvcm1hdDogICAgICAgICAgZGVmaW5lKCdPSURQTFVTX1NRTElU'));
	@fwrite($fp, base64_decode('RTNfRU5DUllQVElPTicsICAgJycpOw0KTm90ZTogICAgICAgICAgICAgICAgICAgIE9wdGlvbnMNCg0KT0lEcGx1czo6YmFzZUNvbmZpZygpLT5zZXRWYWx1ZSgnVEFCTEVOQU1FX1BSRUZJWCcsICAgICAgICAgJ29pZHBsdXNfJyk7DQpPbGQgMi4wIGZvcm1hdDog'));
	@fwrite($fp, base64_decode('ICAgICAgICAgZGVmaW5lKCdPSURQTFVTX1RBQkxFTkFNRV9QUkVGSVgnLCAnb2lkcGx1c18nKTsNCg0KT0lEcGx1czo6YmFzZUNvbmZpZygpLT5zZXRWYWx1ZSgnU0VSVkVSX1NFQ1JFVCcsICAgICAgICAgICAgJ3h4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4'));
	@fwrite($fp, base64_decode('eHh4Jyk7DQpPbGQgMi4wIGZvcm1hdDogICAgICAgICAgZGVmaW5lKCdPSURQTFVTX1NFU1NJT05fU0VDUkVUJywgICAneHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHgnKTsNCkluZm9ybWF0aW9uOiAgICAgICAgICAgICBJdCBpcyB2ZXJ5IHZlcnkgaW1w'));
	@fwrite($fp, base64_decode('b3J0YW50IHRoYXQgeW91IGNob29zZSBhIGxvbmcgc2VxdWVuY2Ugb2YNCiAgICAgICAgICAgICAgICAgICAgICAgICByYW5kb20gY2hhcmFjdGVycy4gT0lEcGx1cyB1c2VzIHRoaXMgc2VjcmV0IGZvciB2YXJpb3VzDQogICAgICAgICAgICAgICAgICAgICAgICAg'));
	@fwrite($fp, base64_decode('c2VjdXJpdHkgcmVsYXRlZCBwdXJwb3Nlcy4gSWYgc29tZW9uZSBhY2NpZGVudGx5IHJlY2VpdmVkIHRoaXMgc2VjcmV0LA0KICAgICAgICAgICAgICAgICAgICAgICAgIHBsZWFzZSBjaGFuZ2UgdGhlIHNlcXVlbmNlLg0KDQpPSURwbHVzOjpiYXNlQ29uZmlnKCkt'));
	@fwrite($fp, base64_decode('PnNldFZhbHVlKCdSRUNBUFRDSEFfRU5BQkxFRCcsICAgICAgICB0cnVlKTsNCk9sZCAyLjAgZm9ybWF0OiAgICAgICAgICBkZWZpbmUoJ1JFQ0FQVENIQV9FTkFCTEVEJywgICAgICAgIDApOw0KDQpPSURwbHVzOjpiYXNlQ29uZmlnKCktPnNldFZhbHVlKCdSRUNB'));
	@fwrite($fp, base64_decode('UFRDSEFfUFVCTElDJywgICAgICAgICAnJyk7DQpPbGQgMi4wIGZvcm1hdDogICAgICAgICAgZGVmaW5lKCdSRUNBUFRDSEFfUFVCTElDJywgICAgICAgICAnJyk7DQoNCk9JRHBsdXM6OmJhc2VDb25maWcoKS0+c2V0VmFsdWUoJ1JFQ0FQVENIQV9QUklWQVRFJywg'));
	@fwrite($fp, base64_decode('ICAgICAgICcnKTsNCk9sZCAyLjAgZm9ybWF0OiAgICAgICAgICBkZWZpbmUoJ1JFQ0FQVENIQV9QUklWQVRFJywgICAgICAgICcnKTsNCg0KT0lEcGx1czo6YmFzZUNvbmZpZygpLT5zZXRWYWx1ZSgnRU5GT1JDRV9TU0wnLCAgICAgICAgICAgICAgMik7DQpPbGQg'));
	@fwrite($fp, base64_decode('Mi4wIGZvcm1hdDogICAgICAgICAgZGVmaW5lKCdPSURQTFVTX0VORk9SQ0VfU1NMJywgICAgICAyKTsNCkluZm9ybWF0aW9uOiAgICAgICAgICAgICBWYWx1ZXMgMCAob2ZmKSwgMSAob24pLCAyIChhdXRvIGRldGVjdCkNCg0KDQotLS0tLS0tLS0tLS0tLS0tLS0t'));
	@fwrite($fp, base64_decode('LS0tDQooMikgU1lTVEVNIExJTUlUQVRJT05TIChkZWZpbmVkIGFuZCBkb2N1bWVudGVkIGluIGluY2x1ZGVzL2xpbWl0cy5pbmMucGhwICwgY2FuIGJlIG92ZXJ3cml0dGVuIGJ5IGNvbmZpZy5pbmMucGhwKQ0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQpPSURw'));
	@fwrite($fp, base64_decode('bHVzOjpiYXNlQ29uZmlnKCktPnNldFZhbHVlKCdMSU1JVFNfTUFYX09JRF9ERVBUSCcsICAzMCk7DQpPbGQgMi4wIGZvcm1hdDogICAgICAgICAgZGVmaW5lKCdPSURQTFVTX01BWF9PSURfREVQVEgnLCAzMCk7DQpJbmZvcm1hdGlvbjogICAgICAgICAgICAgUGxl'));
	@fwrite($fp, base64_decode('YXNlIHJlYWQgdGhlIGRvY3VtZW50YXRpb24gaW4gdGhlIGZpbGUgaW5jbHVkZXMvbGltaXRzLmluYy5waHANCg0KT0lEcGx1czo6YmFzZUNvbmZpZygpLT5zZXRWYWx1ZSgnTElNSVRTX01BWF9JRF9MRU5HVEgnLCAgICAgMjU1KTsNCk9sZCAyLjAgZm9ybWF0OiAg'));
	@fwrite($fp, base64_decode('ICAgICAgICBkZWZpbmUoJ09JRFBMVVNfTUFYX09JRF9BUkNfU0laRScsIDI1NSk7DQpJbmZvcm1hdGlvbjogICAgICAgICAgICAgUGxlYXNlIHJlYWQgdGhlIGRvY3VtZW50YXRpb24gaW4gdGhlIGZpbGUgaW5jbHVkZXMvbGltaXRzLmluYy5waHANCg0KT0lEcGx1'));
	@fwrite($fp, base64_decode('czo6YmFzZUNvbmZpZygpLT5zZXRWYWx1ZSgnTElNSVRTX01BWF9PSURfQVJDX1NJWkUnLCAgNTApOw0KT2xkIDIuMCBmb3JtYXQ6ICAgICAgICAgIGRlZmluZSgnT0lEUExVU19NQVhfT0lEX0FSQ19TSVpFJywgNTApOw0KSW5mb3JtYXRpb246ICAgICAgICAgICAg'));
	@fwrite($fp, base64_decode('IFBsZWFzZSByZWFkIHRoZSBkb2N1bWVudGF0aW9uIGluIHRoZSBmaWxlIGluY2x1ZGVzL2xpbWl0cy5pbmMucGhwDQoNCk9JRHBsdXM6OmJhc2VDb25maWcoKS0+c2V0VmFsdWUoJ0xJTUlUU19NQVhfT0lEX0FTTjFfSURfTEVOJywgIDI1NSk7DQpPbGQgMi4wIGZv'));
	@fwrite($fp, base64_decode('cm1hdDogICAgICAgICAgZGVmaW5lKCdPSURQTFVTX01BWF9PSURfQVNOMV9JRF9MRU4nLCAyNTUpOw0KSW5mb3JtYXRpb246ICAgICAgICAgICAgIFBsZWFzZSByZWFkIHRoZSBkb2N1bWVudGF0aW9uIGluIHRoZSBmaWxlIGluY2x1ZGVzL2xpbWl0cy5pbmMucGhw'));
	@fwrite($fp, base64_decode('DQoNCk9JRHBsdXM6OmJhc2VDb25maWcoKS0+c2V0VmFsdWUoJ0xJTUlUU19NQVhfT0lEX1VOSUNPREVfTEFCRUxfTEVOJywgIDI1NSk7DQpPbGQgMi4wIGZvcm1hdDogICAgICAgICAgZGVmaW5lKCdPSURQTFVTX01BWF9PSURfVU5JQ09ERV9MQUJFTF9MRU4nLCAy'));
	@fwrite($fp, base64_decode('NTUpOw0KSW5mb3JtYXRpb246ICAgICAgICAgICAgIFBsZWFzZSByZWFkIHRoZSBkb2N1bWVudGF0aW9uIGluIHRoZSBmaWxlIGluY2x1ZGVzL2xpbWl0cy5pbmMucGhwDQoNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCigzKSAi'));
	@fwrite($fp, base64_decode('SElEREVOIi9VTkRPQ1VNRU5URUQgQ09ORklHIFNFVFRJTkdTDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQpPSURwbHVzOjpiYXNlQ29uZmlnKCktPnNldFZhbHVlKCdPSURJTkZPX1NFQ1JFVF9BRE1JTl9VU0VSTkFNRScsICc8'));
	@fwrite($fp, base64_decode('ZW1haWwgYWRkcmVzcz4nKTsNCk9sZCAyLjAgZm9ybWF0OiAgICAgICAgICBkZWZpbmUoJ09JRElORk9fU0VDUkVUX0FETUlOX1VTRVJOQU1FJywgJzxlbWFpbCBhZGRyZXNzPicpOw0KSW5mb3JtYXRpb246ICAgICAgICAgICAgIEN1cnJlbnRseSBvbmx5IGludGVy'));
	@fwrite($fp, base64_decode('bmFsIHVzZSBmb3IgZGV2ZWxvcG1lbnQgdXRpbGl0aWVzIChkZXYvKS4NCg0KT0lEcGx1czo6YmFzZUNvbmZpZygpLT5zZXRWYWx1ZSgnT0lESU5GT19TRUNSRVRfQURNSU5fUEFTU1dPUkQnLCAnPHBsYWludGV4dCBwYXNzd29yZD4nKTsNCk9sZCAyLjAgZm9ybWF0'));
	@fwrite($fp, base64_decode('OiAgICAgICAgICBkZWZpbmUoJ09JRElORk9fU0VDUkVUX0FETUlOX1BBU1NXT1JEJywgJzxwbGFpbnRleHQgcGFzc3dvcmQ+Jyk7DQpJbmZvcm1hdGlvbjogICAgICAgICAgICAgQ3VycmVudGx5IG9ubHkgaW50ZXJuYWwgdXNlIGZvciBkZXZlbG9wbWVudCB1dGls'));
	@fwrite($fp, base64_decode('aXRpZXMgKGRldi8pLg0KDQpPSURwbHVzOjpiYXNlQ29uZmlnKCktPnNldFZhbHVlKCdPSURJTkZPX0FQSV9VUkwnLCAnPHVybD4nKTsNCk9sZCAyLjAgZm9ybWF0OiAgICAgICAgICBkZWZpbmUoJ09JRElORk9fQVBJX1VSTCcsICc8dXJsPicpOw0KSW5mb3JtYXRp'));
	@fwrite($fp, base64_decode('b246ICAgICAgICAgICAgIEN1cnJlbnRseSBvbmx5IGludGVybmFsIHVzZSBmb3IgZGV2ZWxvcG1lbnQgdXRpbGl0aWVzIChkZXYvKS4NCg0KT0lEcGx1czo6YmFzZUNvbmZpZygpLT5zZXRWYWx1ZSgnUkVHSVNUUkFUSU9OX0hJREVfU1lTVEVNJywgdHJ1ZSk7DQpP'));
	@fwrite($fp, base64_decode('bGQgMi4wIGZvcm1hdDogICAgICAgICAgZGVmaW5lKCdSRUdJU1RSQVRJT05fSElERV9TWVNURU0nLCB0cnVlKTsNCkluZm9ybWF0aW9uOiAgICAgICAgICAgICBTZXQgdGhpcyBpZiB5b3UgaGF2ZSBhIGNsb25lIG9mIGEgcHJvZHVjdGl2ZSBzeXN0ZW0gYW5kIHlv'));
	@fwrite($fp, base64_decode('dSB3YW50DQogICAgICAgICAgICAgICAgICAgICAgICAgdG8gYXZvaWQgdGhhdCB0aGUgY2xvbmUgcmVnaXN0ZXJzIGF0IHRoZSBWaWFUaGlua1NvZnQgZGlyZWN0b3J5DQogICAgICAgICAgICAgICAgICAgICAgICAgKHdoaWNoIHdvdWxkIG92ZXJ3cml0ZSB0aGUg'));
	@fwrite($fp, base64_decode('VVJMIG9mIHRoZSBwcm9kdWN0aXZlIHN5c3RlbSBhbmQgcmV2ZWFsDQogICAgICAgICAgICAgICAgICAgICAgICAgdGhlIFVSTCBvZiB5b3VyIHRlc3Rpbmcgc3lzdGVtKQ0KDQpPSURwbHVzOjpiYXNlQ29uZmlnKCktPnNldFZhbHVlKCdNWVNRTF9GT1JDRV9NWVNR'));
	@fwrite($fp, base64_decode('TE5EX1NVUFBMRU1FTlQnLCAgICAgICAgIGZhbHNlKTsNCk9sZCAyLjAgZm9ybWF0OiAgICAgICAgICBkZWZpbmUoJ09JRFBMVVNfTVlTUUxfRk9SQ0VfTVlTUUxORF9TVVBQTEVNRU5UJywgZmFsc2UpOw0KSW5mb3JtYXRpb246ICAgICAgICAgICAgIFRoZSBNeVNR'));
	@fwrite($fp, base64_decode('TGkgcGx1Z2luIGNvbnRhaW5zIGEgc3VwcGxlbWVudCBjb2RlIHRvIGhhbmRsZQ0KICAgICAgICAgICAgICAgICAgICAgICAgIHByZXBhcmVkIHN0YXRlbWVudHMgb24gc2VydmVycyB3aGljaCBkbyBub3QgaGF2ZSB0aGUgTXlTUUxuZCBleHRlbnNpb24NCiAgICAg'));
	@fwrite($fp, base64_decode('ICAgICAgICAgICAgICAgICAgICBpbnN0YWxsZWQuIFNldCB0aGlzIGZsYWcgdG8gZm9yY2UgdGhlIHN1cHBsZW1lbnQgdG8gYmUgdXNlZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICBldmVuIGlmIE15U1FMbmQgaXMgYXZhaWxhYmxlLiAoRm9yIHRlc3Rpbmcg'));
	@fwrite($fp, base64_decode('cHVycG9zZXMgb25seSkNCg0KT0lEcGx1czo6YmFzZUNvbmZpZygpLT5zZXRWYWx1ZSgnUVVFUllfTE9HRklMRScsICAgICAgICAgICcnKTsNCk9sZCAyLjAgZm9ybWF0OiAgICAgICAgICBkZWZpbmUoJ09JRFBMVVNfTVlTUUxfUVVFUllMT0cnLCBmYWxzZSk7DQpJ'));
	@fwrite($fp, base64_decode('bmZvcm1hdGlvbjogICAgICAgICAgICAgU2V0IHRoaXMgc2V0dGluZyB0byBhIGZpbGVuYW1lIHdoZXJlIGFsbCBxdWVyaWVzIGluY2x1ZGluZyB0aW1lc3RhbXBzIHdvdWxkIGJlIHdyaXR0ZW4uDQogICAgICAgICAgICAgICAgICAgICAgICAgVGhpcyBpcyB1c2Vk'));
	@fwrite($fp, base64_decode('IGZvciBwZXJmb3JtYW5jZSBhbmFseXNpcy4NCiAgICAgICAgICAgICAgICAgICAgICAgICBQbGVhc2UgY2hvb3NlIGEgZGlyZWN0b3J5IHRoYXQgY2Fubm90IGJlIGFjY2Vzc2VkIGJ5IHdvcmxkLXdpZGUuDQoNCk9JRHBsdXM6OmJhc2VDb25maWcoKS0+c2V0VmFs'));
	@fwrite($fp, base64_decode('dWUoJ1NFU1NJT05fTElGRVRJTUUnLCAzMCo2MCk7DQpPbGQgMi4wIGZvcm1hdDogICAgICAgICAgZGVmaW5lKCdTRVNTSU9OX0xJRkVUSU1FJywgMzAqNjApOw0KSW5mb3JtYXRpb246ICAgICAgICAgICAgIFNlc3Npb24gbGlmZXRpbWUgaW4gc2Vjb25kcy4NCg0K'));
	@fwrite($fp, base64_decode('T0lEcGx1czo6YmFzZUNvbmZpZygpLT5zZXRWYWx1ZSgnT0JKRUNUX0NBQ0hJTkcnLCAgICAgICAgIHRydWUpOw0KT2xkIDIuMCBmb3JtYXQ6ICAgICAgICAgIGRlZmluZSgnT0lEUExVU19PQkpFQ1RfQ0FDSElORycsIHRydWUpOw0KDQpPSURwbHVzOjpiYXNlQ29u'));
	@fwrite($fp, base64_decode('ZmlnKCktPnNldFZhbHVlKCdGT1JDRV9EQk1TX1NMQU5HJywgJycpOw0KT2xkIDIuMCBmb3JtYXQ6ICAgICAgICAgIGRlZmluZSgnREJNU19TTEFORycsICAgICAgICcnKTsNCkluZm9ybWF0aW9uOiAgICAgICAgICAgICBDdXJyZW50bHkgdmFsaWQgdmFsdWVzOiBt'));
	@fwrite($fp, base64_decode('eXNxbCwgbXNzcWwsIHBnc3FsLCBzcWxpdGUNCg0KT0lEcGx1czo6YmFzZUNvbmZpZygpLT5zZXRWYWx1ZSgnTUlOSUZZX0NTUycsIHRydWUpOw0KT2xkIDIuMCBmb3JtYXQ6ICAgICAgICAgIGRlZmluZSgnRE9fTUlOSUZZJywgIHRydWUpOw0KDQpPSURwbHVzOjpi'));
	@fwrite($fp, base64_decode('YXNlQ29uZmlnKCktPnNldFZhbHVlKCdNSU5JRllfSlMnLCAgdHJ1ZSk7DQpPbGQgMi4wIGZvcm1hdDogICAgICAgICAgKE5vdCBhdmFpbGFibGUpDQoNCk9JRHBsdXM6OmJhc2VDb25maWcoKS0+c2V0VmFsdWUoJ0RJU0FCTEVfTVNJRV9DT01QQVQnLCBmYWxzZSk7'));
	@fwrite($fp, base64_decode('DQpPbGQgMi4wIGZvcm1hdDogICAgICAgICAgZGVmaW5lKCdESVNBQkxFX01TSUVfQ09NUEFUJywgZmFsc2UpOw0KSW5mb3JtYXRpb246ICAgICAgICAgICAgIFNldCB0byAidHJ1ZSIgaWYgeW91IHdhbnQgdG8gYXZvaWQgdGhhdCB0aGUgZXh0ZXJuYWwgcG9seWZp'));
	@fwrite($fp, base64_decode('bGwNCiAgICAgICAgICAgICAgICAgICAgICAgICBKYXZhU2NyaXB0IHdpbGwgYmUgaW5jbHVkZWQgaWYgSW50ZXJuZXQgRXhwbG9yZXIgaXMgZGV0ZWN0ZWQuDQogICAgICAgICAgICAgICAgICAgICAgICAgT25seSByZWNvbW1lbmRlZCBpZiB5b3UgaGF2ZSBjb25j'));
	@fwrite($fp, base64_decode('ZXJucyBhYm91dCBwcml2YWN5Lg0K'));
	@fclose($fp);
}
if (!is_file('includes/config_values.txt')) {
	warn('File has vanished! Will re-create it: includes/config_values.txt');
	writefile_4();
	if (!is_file('includes/config_values.txt')) {
		warn('File cannot be created (not existing): includes/config_values.txt');
	} else if (sha1_file('includes/config_values.txt') != '3a7ad203f4be801977634df136e69857ec472a8b') {
		warn('File cannot be created (checksum mismatch): includes/config_values.txt');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('includes/config_values.txt', 0644)) {
		warn('Could not change file permissions of includes/config_values.txt');
	}
} else {
	if (@sha1_file('includes/config_values.txt') !== '3a7ad203f4be801977634df136e69857ec472a8b') {
		if (@sha1_file('includes/config_values.txt') !== '098628bcf0c6b6aa3e4a1525ea3ac8082aba7438') {
			warn('File was modified. Will overwrite the changes now: includes/config_values.txt');
			$tmp = pathinfo('includes/config_values.txt');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('includes/config_values.txt')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('includes/config_values.txt', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_4();
		if (@sha1_file('includes/config_values.txt') !== '3a7ad203f4be801977634df136e69857ec472a8b') {
			warn('File cannot be written (checksum mismatch): includes/config_values.txt');
		}
	}
}

// Files different: nginx.conf
function writefile_5() {
	@$fp = fopen('nginx.conf', 'w');
	@fwrite($fp, base64_decode('CiMgVG8gZW5hYmxlIHRoaXMgY29uZmlndXJhdGlvbiBmaWxlIGluIE5HSU5YLCB5b3UKIyBuZWVkIHRvIGluY2x1ZGUgdGhpcyBmaWxlIGluIHlvdXIgbWFzdGVyIGNvbmZpZ3VyYXRpb24gZmlsZQojIHVzaW5nIHRoZSAiaW5jbHVkZSIgY29tbWFuZC4gWW91IHBy'));
	@fwrite($fp, base64_decode('b2JhYmx5IG5lZWQKIyB0byBjaGFuZ2UgInJvb3QiIGxpbmVzLgoKIyBXaGVuIHlvdSBhcmUgZG9uZSwgcGxlYXNlIHZlcmlmeSB0aGF0IHRoZSBmaWxlCiMgaHR0cDovLy4uLi4uL2luY2x1ZGVzL2NvbmZpZ192YWx1ZXMudHh0IGNhbid0IGJlCiMgcmVhZCB1c2lu'));
	@fwrite($fp, base64_decode('ZyB5b3VyIHdlYiBicm93c2VyLgojIFlvdSBzaG91bGQgc2VlIHRoZSBIVFRQIDQwMyBlcnJvciBtZXNzYWdlLgoKIyAtLS0KCiMgSWYgeW91IGdldCBIVFRQIGVycm9yICI1MDIgQmFkIEdhdGV3YXkiIHdpdGggTkdJTlgsIG9yIHRoZSBlcnJvciBsb2cgbWVzc2Fn'));
	@fwrite($fp, base64_decode('ZQojICJ1cHN0cmVhbSBzZW50IHRvbyBiaWcgaGVhZGVyIHdoaWxlIHJlYWRpbmcgcmVzcG9uc2UgaGVhZGVyIGZyb20gdXBzdHJlYW0iLAojIHRoZW4gdGhlIGZvbGxvd2luZyBzZXR0aW5ncyBtaWdodCBzb2x2ZSB0aGUgcHJvYmxlbToKCnByb3h5X2ludGVyY2Vw'));
	@fwrite($fp, base64_decode('dF9lcnJvcnMgb247CmZhc3RjZ2lfYnVmZmVycyAgICAgICAgMTYgIDE2azsKZmFzdGNnaV9idWZmZXJfc2l6ZSAgICAgICAgMzJrOwpwcm94eV9idWZmZXJfc2l6ZSAgICAgICAgIDEyOGs7CnByb3h5X2J1ZmZlcnMgICAgICAgICAgIDQgMjU2azsKcHJveHlfYnVz'));
	@fwrite($fp, base64_decode('eV9idWZmZXJzX3NpemUgICAyNTZrOwoKIyBGb2xkZXIgcmVzdHJpY3Rpb25zCgpsb2NhdGlvbiAvc2VjdXJlLyB7Cglyb290IGh0bWw7ICAjIDwtLSBZb3UgcHJvYmFibHkgbmVlZCB0byBhZGp1c3QgdGhpcwoJZGVueSBhbGw7Cn0KCmxvY2F0aW9uIC9kZXYvIHsK'));
	@fwrite($fp, base64_decode('CXJvb3QgaHRtbDsgICMgPC0tIFlvdSBwcm9iYWJseSBuZWVkIHRvIGFkanVzdCB0aGlzCglkZW55IGFsbDsKfQoKbG9jYXRpb24gL2luY2x1ZGVzLyB7Cglyb290IGh0bWw7ICAjIDwtLSBZb3UgcHJvYmFibHkgbmVlZCB0byBhZGp1c3QgdGhpcwoJZGVueSBhbGw7'));
	@fwrite($fp, base64_decode('Cn0KCmxvY2F0aW9uIC9wbHVnaW5zL3B1YmxpY1BhZ2VzLzEwMF93aG9pcy93aG9pcy9jbGkvIHsKCXJvb3QgaHRtbDsgICMgPC0tIFlvdSBwcm9iYWJseSBuZWVkIHRvIGFkanVzdCB0aGlzCglkZW55IGFsbDsKfQo='));
	@fclose($fp);
}
if (!is_file('nginx.conf')) {
	warn('File has vanished! Will re-create it: nginx.conf');
	writefile_5();
	if (!is_file('nginx.conf')) {
		warn('File cannot be created (not existing): nginx.conf');
	} else if (sha1_file('nginx.conf') != '13182b222fe7c5b4099fdfef138b65835fff80c2') {
		warn('File cannot be created (checksum mismatch): nginx.conf');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('nginx.conf', 0644)) {
		warn('Could not change file permissions of nginx.conf');
	}
} else {
	if (@sha1_file('nginx.conf') !== '13182b222fe7c5b4099fdfef138b65835fff80c2') {
		if (@sha1_file('nginx.conf') !== 'f05b666c452fbd71082dea3b838d9ba9f11b56f9') {
			warn('File was modified. Will overwrite the changes now: nginx.conf');
			$tmp = pathinfo('nginx.conf');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('nginx.conf')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('nginx.conf', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_5();
		if (@sha1_file('nginx.conf') !== '13182b222fe7c5b4099fdfef138b65835fff80c2') {
			warn('File cannot be written (checksum mismatch): nginx.conf');
		}
	}
}

// Files different: plugins/database/sqlite3/OIDplusDatabasePluginSQLite3.class.php
function writefile_6() {
	@$fp = fopen('plugins/database/sqlite3/OIDplusDatabasePluginSQLite3.class.php', 'w');
	@fwrite($fp, base64_decode('PD9waHAKCi8qCiAqIE9JRHBsdXMgMi4wCiAqIENvcHlyaWdodCAyMDE5IERhbmllbCBNYXJzY2hhbGwsIFZpYVRoaW5rU29mdAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91'));
	@fwrite($fp, base64_decode('IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNF'));
	@fwrite($fp, base64_decode('TlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMs'));
	@fwrite($fp, base64_decode('CiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq'));
	@fwrite($fp, base64_decode('IGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmNsYXNzIE9JRHBsdXNEYXRhYmFzZVBsdWdpblNRTGl0ZTMgZXh0ZW5kcyBPSURwbHVzRGF0YWJhc2VQbHVnaW4gewoJcHJpdmF0ZSAkY29ubiA9IG51bGw7Cglwcml2YXRlICRwcmVwYXJlX2NhY2hl'));
	@fwrite($fp, base64_decode('ID0gYXJyYXkoKTsKCXByaXZhdGUgJGxhc3RfZXJyb3IgPSBudWxsOyAvLyBkbyB0aGUgc2FtZSBsaWtlIE15U1FMK1BETywganVzdCB0byBiZSBlcXVhbCBpbiB0aGUgYmVoYXZpb3IKCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGlkKCk6IHN0cmluZyB7CgkJcmV0'));
	@fwrite($fp, base64_decode('dXJuICJTUUxpdGUzIjsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZG9RdWVyeShzdHJpbmcgJHNxbCwgLyo/YXJyYXkqLyAkcHJlcGFyZWRfYXJncz1udWxsKTogT0lEcGx1c1F1ZXJ5UmVzdWx0IHsKCQkkdGhpcy0+bGFzdF9lcnJvciA9IG51bGw7CgkJaWYgKGlzX251'));
	@fwrite($fp, base64_decode('bGwoJHByZXBhcmVkX2FyZ3MpKSB7CgkJCXRyeSB7CgkJCQkkcmVzID0gJHRoaXMtPmNvbm4tPnF1ZXJ5KCRzcWwpOwoJCQl9IGNhdGNoIChFeGNlcHRpb24gJGUpIHsKCQkJCSRyZXMgPSBmYWxzZTsKCQkJfQoJCQlpZiAoJHJlcyA9PT0gZmFsc2UpIHsKCQkJCSR0'));
	@fwrite($fp, base64_decode('aGlzLT5sYXN0X2Vycm9yID0gJHRoaXMtPmNvbm4tPmxhc3RFcnJvck1zZygpOwoJCQkJdGhyb3cgbmV3IE9JRHBsdXNTUUxFeGNlcHRpb24oJHNxbCwgJHRoaXMtPmVycm9yKCkpOwoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIG5ldyBPSURwbHVzUXVlcnlSZXN1bHRT'));
	@fwrite($fp, base64_decode('UUxpdGUzKCRyZXMpOwoJCQl9CgkJfSBlbHNlIHsKCQkJaWYgKCFpc19hcnJheSgkcHJlcGFyZWRfYXJncykpIHsKCQkJCXRocm93IG5ldyBPSURwbHVzRXhjZXB0aW9uKCIncHJlcGFyZWRfYXJncycgbXVzdCBiZSBlaXRoZXIgTlVMTCBvciBhbiBBUlJBWS4iKTsK'));
	@fwrite($fp, base64_decode('CQkJfQoKCQkJLy8gY29udmVydCA/ID8gPyB0byA6cGFyYW0xIDpwYXJhbTIgOnBhcmFtMyAuLi4KCQkJJHNxbCA9IHByZWdfcmVwbGFjZV9jYWxsYmFjaygnQFxcP0AnLCBmdW5jdGlvbigkZm91bmQpIHsKCQkJCXN0YXRpYyAkaSA9IDA7CgkJCQkkaSsrOwoJCQkJ'));
	@fwrite($fp, base64_decode('cmV0dXJuICc6cGFyYW0nLiRpOwoJCQl9LCAkc3FsKTsKCgkJCWlmIChpc3NldCgkdGhpcy0+cHJlcGFyZV9jYWNoZVskc3FsXSkpIHsKCQkJCSRzdG10ID0gJHRoaXMtPnByZXBhcmVfY2FjaGVbJHNxbF07CgkJCX0gZWxzZSB7CgkJCQl0cnkgewoJCQkJCSRzdG10'));
	@fwrite($fp, base64_decode('ID0gJHRoaXMtPmNvbm4tPnByZXBhcmUoJHNxbCk7CgkJCQl9IGNhdGNoIChFeGNlcHRpb24gJGUpIHsKCQkJCQkkc3RtdCA9IGZhbHNlOwoJCQkJfQoJCQkJaWYgKCRzdG10ID09PSBmYWxzZSkgewoJCQkJCSR0aGlzLT5sYXN0X2Vycm9yID0gJHRoaXMtPmNvbm4t'));
	@fwrite($fp, base64_decode('Pmxhc3RFcnJvck1zZygpOwoJCQkJCXRocm93IG5ldyBPSURwbHVzU1FMRXhjZXB0aW9uKCRzcWwsICdDYW5ub3QgcHJlcGFyZSBzdGF0ZW1lbnQ6ICcuJHRoaXMtPmVycm9yKCkpOwoJCQkJfQoJCQkJJHRoaXMtPnByZXBhcmVfY2FjaGVbJHNxbF0gPSAkc3RtdDsK'));
	@fwrite($fp, base64_decode('CQkJfQoKCQkJaWYgKCRzdG10LT5wYXJhbUNvdW50KCkgIT0gY291bnQoJHByZXBhcmVkX2FyZ3MpKSB7CgkJCQl0aHJvdyBuZXcgT0lEcGx1c0V4Y2VwdGlvbignUHJlcGFyZWQgYXJndW1lbnQgbGlzdCBzaXplIG5vdCBtYXRjaGluZyBudW1iZXIgb2YgcHJlcGFy'));
	@fwrite($fp, base64_decode('ZWQgc3RhdGVtZW50IGFyZ3VtZW50cycpOwoJCQl9CgkJCSRpID0gMTsKCQkJZm9yZWFjaCAoJHByZXBhcmVkX2FyZ3MgYXMgJiR2YWx1ZSkgewoJCQkJaWYgKGlzX2Jvb2woJHZhbHVlKSkgJHZhbHVlID0gJHZhbHVlID8gJzEnIDogJzAnOwoJCQkJJHN0bXQtPmJp'));
	@fwrite($fp, base64_decode('bmRWYWx1ZSgnOnBhcmFtJy4kaSwgJHZhbHVlLCBTUUxJVEUzX1RFWFQpOwoJCQkJJGkrKzsKCQkJfQoKCQkJdHJ5IHsKCQkJCSRwcyA9ICRzdG10LT5leGVjdXRlKCk7CgkJCX0gY2F0Y2ggKEV4Y2VwdGlvbiAkZSkgewoJCQkJJHBzID0gZmFsc2U7CgkJCX0KCQkJ'));
	@fwrite($fp, base64_decode('aWYgKCRwcyA9PT0gZmFsc2UpIHsKCQkJCSR0aGlzLT5sYXN0X2Vycm9yID0gJHRoaXMtPmNvbm4tPmxhc3RFcnJvck1zZygpOwoJCQkJdGhyb3cgbmV3IE9JRHBsdXNTUUxFeGNlcHRpb24oJHNxbCwgJHRoaXMtPmVycm9yKCkpOwoJCQl9CgkJCXJldHVybiBuZXcg'));
	@fwrite($fp, base64_decode('T0lEcGx1c1F1ZXJ5UmVzdWx0U1FMaXRlMygkcHMpOwoJCX0KCX0KCglwdWJsaWMgZnVuY3Rpb24gaW5zZXJ0X2lkKCk6IGludCB7CgkJdHJ5IHsKCQkJLy8gTm90ZTogVGhpcyB3aWxsIGFsd2F5cyBnaXZlIHJlc3VsdHMgZXZlbiBmb3IgdGFibGVzIHRoYXQgZG8g'));
	@fwrite($fp, base64_decode('bm90CgkJCS8vIGhhdmUgYXV0b2luY3JlbWVudHMsIGJlY2F1c2UgU1FMaXRlMyBhc3NpZ25zIGFuICJhdXRvaW5kZXgiIGZvciBldmVyeSB0YWJsZSwKCQkJLy8gZS5nLiB0aGUgY29uZmlnIHRhYmxlLiBUaGVyZWZvcmUsIG91ciB0ZXN0Y2FzZSB3aWxsIGZhaWwu'));
	@fwrite($fp, base64_decode('CgkJCXJldHVybiAoaW50KSR0aGlzLT5jb25uLT5sYXN0SW5zZXJ0Um93SUQoKTsKCQkJLy9yZXR1cm4gKGludCkkdGhpcy0+cXVlcnkoJ3NlbGVjdCBsYXN0X2luc2VydF9yb3dpZCgpIGFzIGlkJyktPmZldGNoX29iamVjdCgpLT5pZDsKCQl9IGNhdGNoIChFeGNl'));
	@fwrite($fp, base64_decode('cHRpb24gJGUpIHsKCQkJcmV0dXJuIDA7CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBlcnJvcigpOiBzdHJpbmcgewoJCSRlcnIgPSAkdGhpcy0+bGFzdF9lcnJvcjsKCQlpZiAoJGVyciA9PSBudWxsKSAkZXJyID0gJyc7CgkJcmV0dXJuICRlcnI7Cgl9CgoJcHJv'));
	@fwrite($fp, base64_decode('dGVjdGVkIGZ1bmN0aW9uIGRvQ29ubmVjdCgpLyo6IHZvaWQqLyB7CgkJaWYgKCFjbGFzc19leGlzdHMoJ1NRTGl0ZTMnKSkgdGhyb3cgbmV3IE9JRHBsdXNDb25maWdJbml0aWFsaXphdGlvbkV4Y2VwdGlvbignUEhQIGV4dGVuc2lvbiAiU1FMaXRlMyIgbm90IGlu'));
	@fwrite($fp, base64_decode('c3RhbGxlZCcpOwoKCQkvLyBUcnkgY29ubmVjdGluZyB0byB0aGUgZGF0YWJhc2UKCQl0cnkgewoJCQkkZmlsZW5hbWUgICA9IE9JRHBsdXM6OmJhc2VDb25maWcoKS0+Z2V0VmFsdWUoJ1NRTElURTNfRklMRScsICdzZWN1cmUvb2lkcGx1cy5kYicpOwoJCQkkZmxh'));
	@fwrite($fp, base64_decode('Z3MgICAgICA9IFNRTElURTNfT1BFTl9SRUFEV1JJVEUvKiB8IFNRTElURTNfT1BFTl9DUkVBVEUqLzsKCQkJJGVuY3J5cHRpb24gPSBPSURwbHVzOjpiYXNlQ29uZmlnKCktPmdldFZhbHVlKCdTUUxJVEUzX0VOQ1JZUFRJT04nLCAnJyk7CgoJCQkkaXNfYWJzb2x1'));
	@fwrite($fp, base64_decode('dGVfcGF0aCA9ICgoc3Vic3RyKCRmaWxlbmFtZSwwLDEpID09ICcvJykgfHwgKHN1YnN0cigkZmlsZW5hbWUsMSwxKSA9PSAnOicpKTsKCQkJaWYgKCEkaXNfYWJzb2x1dGVfcGF0aCkgewoJCQkJLy8gRmlsZW5hbWUgbXVzdCBiZSBhYnNvbHV0ZSBwYXRoLCBzaW5j'));
	@fwrite($fp, base64_decode('ZSBPSURwbHVzIGNhbiBiZSBjYWxsZWQgZnJvbSBzZXZlcmFsIGxvY2F0aW9ucyAoZS5nLiByZWdpc3RyYXRpb24gd2l6YXJkKQoJCQkJJGZpbGVuYW1lID0gX19ESVJfXyAuICcvLi4vLi4vLi4vJyAuICRmaWxlbmFtZTsKCQkJfQoKCQkJJHRoaXMtPmNvbm4gPSBu'));
	@fwrite($fp, base64_decode('ZXcgU1FMaXRlMygkZmlsZW5hbWUsICRmbGFncywgJGVuY3J5cHRpb24pOwoJCX0gY2F0Y2ggKEV4Y2VwdGlvbiAkZSkgewoJCQl0aHJvdyBuZXcgT0lEcGx1c0NvbmZpZ0luaXRpYWxpemF0aW9uRXhjZXB0aW9uKCdDb25uZWN0aW9uIHRvIHRoZSBkYXRhYmFzZSBm'));
	@fwrite($fp, base64_decode('YWlsZWQhICcgLiAkZS0+Z2V0TWVzc2FnZSgpKTsKCQl9CgoJCSR0aGlzLT5jb25uLT5jcmVhdGVDb2xsYXRpb24oJ05BVFVSQUxfQ01QJywgJ3N0cm5hdGNtcCcpOyAvLyB3ZSBuZWVkIHRoYXQgZm9yIG5hdFNvcnQoKQoJCSR0aGlzLT5jb25uLT5lbmFibGVFeGNl'));
	@fwrite($fp, base64_decode('cHRpb25zKHRydWUpOyAvLyBUaHJvdyBleGNlcHRpb25zIGluc3RlYWQgb2YgUEhQIHdhcm5pbmdzCgoJCSR0aGlzLT5wcmVwYXJlX2NhY2hlID0gYXJyYXkoKTsKCQkkdGhpcy0+bGFzdF9lcnJvciA9IG51bGw7CgoJCSR0aGlzLT5zbGFuZyA9IHNlbGY6OmdldEhh'));
	@fwrite($fp, base64_decode('cmRjb2RlZFNsYW5nQnlJZCgnc3FsaXRlJyk7CgkJaWYgKGlzX251bGwoJHRoaXMtPnNsYW5nKSkgewoJCQl0aHJvdyBuZXcgT0lEcGx1c0NvbmZpZ0luaXRpYWxpemF0aW9uRXhjZXB0aW9uKCJTbGFuZyBwbHVnaW4gJ3NxbGl0ZScgaXMgbWlzc2luZyIpOwoJCX0K'));
	@fwrite($fp, base64_decode('CX0KCglwcm90ZWN0ZWQgZnVuY3Rpb24gZG9EaXNjb25uZWN0KCkvKjogdm9pZCovIHsKCQkkdGhpcy0+cHJlcGFyZV9jYWNoZSA9IGFycmF5KCk7CgkJJHRoaXMtPmNvbm4gPSBudWxsOwoJfQoKCXByaXZhdGUgJGludHJhbnNhY3Rpb24gPSBmYWxzZTsKCglwdWJs'));
	@fwrite($fp, base64_decode('aWMgZnVuY3Rpb24gdHJhbnNhY3Rpb25fYmVnaW4oKS8qOiB2b2lkKi8gewoJCWlmICgkdGhpcy0+aW50cmFuc2FjdGlvbikgdGhyb3cgbmV3IE9JRHBsdXNFeGNlcHRpb24oIk5lc3RlZCB0cmFuc2FjdGlvbnMgYXJlIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBkYXRh'));
	@fwrite($fp, base64_decode('YmFzZSBwbHVnaW4uIik7CgkJJHRoaXMtPnF1ZXJ5KCdiZWdpbiB0cmFuc2FjdGlvbicpOwoJCSR0aGlzLT5pbnRyYW5zYWN0aW9uID0gdHJ1ZTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gdHJhbnNhY3Rpb25fY29tbWl0KCkvKjogdm9pZCovIHsKCQkkdGhpcy0+cXVl'));
	@fwrite($fp, base64_decode('cnkoJ2NvbW1pdCcpOwoJCSR0aGlzLT5pbnRyYW5zYWN0aW9uID0gZmFsc2U7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHRyYW5zYWN0aW9uX3JvbGxiYWNrKCkvKjogdm9pZCovIHsKCQkkdGhpcy0+cXVlcnkoJ3JvbGxiYWNrJyk7CgkJJHRoaXMtPmludHJhbnNhY3Rp'));
	@fwrite($fp, base64_decode('b24gPSBmYWxzZTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gc3FsRGF0ZSgpOiBzdHJpbmcgewoJCXJldHVybiAnZGF0ZXRpbWUoKSc7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIG5hdE9yZGVyKCRmaWVsZG5hbWUsICRvcmRlcj0nYXNjJyk6IHN0cmluZyB7CgoJCS8vIFRo'));
	@fwrite($fp, base64_decode('aXMgY29sbGF0aW9uIGlzIGRlZmluZWQgaW4gdGhlIGRhdGFiYXNlIHBsdWdpbiB1c2luZyBTUUxpdGUzOjpjcmVhdGVDb2xsYXRpb24oKQoJCXJldHVybiAiJGZpZWxkbmFtZSBDT0xMQVRFIE5BVFVSQUxfQ01QICRvcmRlciI7CgoJfQp9Cg=='));
	@fclose($fp);
}
if (!is_file('plugins/database/sqlite3/OIDplusDatabasePluginSQLite3.class.php')) {
	warn('File has vanished! Will re-create it: plugins/database/sqlite3/OIDplusDatabasePluginSQLite3.class.php');
	writefile_6();
	if (!is_file('plugins/database/sqlite3/OIDplusDatabasePluginSQLite3.class.php')) {
		warn('File cannot be created (not existing): plugins/database/sqlite3/OIDplusDatabasePluginSQLite3.class.php');
	} else if (sha1_file('plugins/database/sqlite3/OIDplusDatabasePluginSQLite3.class.php') != '0d3b86b37e6c441b0106dacd15f764f685c5d1ea') {
		warn('File cannot be created (checksum mismatch): plugins/database/sqlite3/OIDplusDatabasePluginSQLite3.class.php');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('plugins/database/sqlite3/OIDplusDatabasePluginSQLite3.class.php', 0644)) {
		warn('Could not change file permissions of plugins/database/sqlite3/OIDplusDatabasePluginSQLite3.class.php');
	}
} else {
	if (@sha1_file('plugins/database/sqlite3/OIDplusDatabasePluginSQLite3.class.php') !== '0d3b86b37e6c441b0106dacd15f764f685c5d1ea') {
		if (@sha1_file('plugins/database/sqlite3/OIDplusDatabasePluginSQLite3.class.php') !== '9e14cb79877c11f1c8731a908c58601e23ce33e1') {
			warn('File was modified. Will overwrite the changes now: plugins/database/sqlite3/OIDplusDatabasePluginSQLite3.class.php');
			$tmp = pathinfo('plugins/database/sqlite3/OIDplusDatabasePluginSQLite3.class.php');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('plugins/database/sqlite3/OIDplusDatabasePluginSQLite3.class.php')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('plugins/database/sqlite3/OIDplusDatabasePluginSQLite3.class.php', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_6();
		if (@sha1_file('plugins/database/sqlite3/OIDplusDatabasePluginSQLite3.class.php') !== '0d3b86b37e6c441b0106dacd15f764f685c5d1ea') {
			warn('File cannot be written (checksum mismatch): plugins/database/sqlite3/OIDplusDatabasePluginSQLite3.class.php');
		}
	}
}

// Files different: web.config
function writefile_7() {
	@$fp = fopen('web.config', 'w');
	@fwrite($fp, base64_decode('PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+DQo8Y29uZmlndXJhdGlvbj4NCg0KPCEtLSBUaGlzIGNvbmZpZyBmaWxlIGlzIGZvciBNaWNyb3NvZnQgSW50ZXJuZXQgSW5mb3JtYXRpb24gU2VydmljZXMgLS0+DQo8IS0tIEl0IGlzIHRoZSBy'));
	@fwrite($fp, base64_decode('ZXBsYWNlbWVudCBmb3IgdGhlIC5odGFjY2VzcyBmaWxlcyB0byBwcm90ZWN0IGRpcmVjdG9yaWVzIGZyb20gYmVpbmcgYWNjZXNzZWQgdGhyb3VnaCBIVFRQIC0tPg0KDQo8c3lzdGVtLndlYlNlcnZlcj4NCgk8ZGlyZWN0b3J5QnJvd3NlIGVuYWJsZWQ9ImZhbHNl'));
	@fwrite($fp, base64_decode('IiAvPg0KDQoJPHNlY3VyaXR5Pg0KCQk8YXV0aGVudGljYXRpb24+DQoJCQk8IS0tIFRoaXMgaXMgcmVxdWlyZWQgYmVjYXVzZSB0aGUgSVVTUiB1c2VyIGFjY291bnQgY2FuJ3QgbG9nIGludG8gdGhlIFdpbmRvd3MgRXJyb3IgTG9nIGZvciBzb21lIHJlYXNvbnMg'));
	@fwrite($fp, base64_decode('LS0+DQoJCQk8IS0tIHNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTY5Mzg2ODcvNDg4NTM5IC0tPg0KCQkJPGFub255bW91c0F1dGhlbnRpY2F0aW9uIHVzZXJOYW1lPSIiIC8+DQoJCTwvYXV0aGVudGljYXRpb24+DQoJPC9zZWN1cml0eT4NCjwvc3lz'));
	@fwrite($fp, base64_decode('dGVtLndlYlNlcnZlcj4NCg0KPGxvY2F0aW9uIHBhdGg9InNlY3VyZSI+DQoJPHN5c3RlbS53ZWJTZXJ2ZXI+DQoJCTxzZWN1cml0eT4NCgkJCTxhdXRoZW50aWNhdGlvbj4NCgkJCQk8IS0tDQoJCQkJVG8gInVubG9jayIgdGhpcyBzZWN0aW9uLCBydW4gdGhpcyBj'));
	@fwrite($fp, base64_decode('b21tYW5kOg0KCQkJCSV3aW5kaXIlXHN5c3RlbTMyXGluZXRzcnZcYXBwY21kLmV4ZSB1bmxvY2sgY29uZmlnIC1zZWN0aW9uOnN5c3RlbS53ZWJTZXJ2ZXIvc2VjdXJpdHkvYXV0aGVudGljYXRpb24vYW5vbnltb3VzQXV0aGVudGljYXRpb24NCgkJCQktLT4NCgkJ'));
	@fwrite($fp, base64_decode('CQk8YW5vbnltb3VzQXV0aGVudGljYXRpb24gZW5hYmxlZD0iZmFsc2UiIC8+DQoJCQk8L2F1dGhlbnRpY2F0aW9uPg0KCQk8L3NlY3VyaXR5Pg0KCTwvc3lzdGVtLndlYlNlcnZlcj4NCjwvbG9jYXRpb24+DQoNCjxsb2NhdGlvbiBwYXRoPSJkZXYiPg0KCTxzeXN0'));
	@fwrite($fp, base64_decode('ZW0ud2ViU2VydmVyPg0KCQk8c2VjdXJpdHk+DQoJCQk8YXV0aGVudGljYXRpb24+DQoJCQkJPCEtLQ0KCQkJCVRvICJ1bmxvY2siIHRoaXMgc2VjdGlvbiwgcnVuIHRoaXMgY29tbWFuZDoNCgkJCQkld2luZGlyJVxzeXN0ZW0zMlxpbmV0c3J2XGFwcGNtZC5leGUg'));
	@fwrite($fp, base64_decode('dW5sb2NrIGNvbmZpZyAtc2VjdGlvbjpzeXN0ZW0ud2ViU2VydmVyL3NlY3VyaXR5L2F1dGhlbnRpY2F0aW9uL2Fub255bW91c0F1dGhlbnRpY2F0aW9uDQoJCQkJLS0+DQoJCQkJPGFub255bW91c0F1dGhlbnRpY2F0aW9uIGVuYWJsZWQ9ImZhbHNlIiAvPg0KCQkJ'));
	@fwrite($fp, base64_decode('PC9hdXRoZW50aWNhdGlvbj4NCgkJPC9zZWN1cml0eT4NCgk8L3N5c3RlbS53ZWJTZXJ2ZXI+DQo8L2xvY2F0aW9uPg0KDQo8bG9jYXRpb24gcGF0aD0iaW5jbHVkZXMiPg0KCTxzeXN0ZW0ud2ViU2VydmVyPg0KCQk8c2VjdXJpdHk+DQoJCQk8YXV0aGVudGljYXRp'));
	@fwrite($fp, base64_decode('b24+DQoJCQkJPCEtLQ0KCQkJCVRvICJ1bmxvY2siIHRoaXMgc2VjdGlvbiwgcnVuIHRoaXMgY29tbWFuZDoNCgkJCQkld2luZGlyJVxzeXN0ZW0zMlxpbmV0c3J2XGFwcGNtZC5leGUgdW5sb2NrIGNvbmZpZyAtc2VjdGlvbjpzeXN0ZW0ud2ViU2VydmVyL3NlY3Vy'));
	@fwrite($fp, base64_decode('aXR5L2F1dGhlbnRpY2F0aW9uL2Fub255bW91c0F1dGhlbnRpY2F0aW9uDQoJCQkJLS0+DQoJCQkJPGFub255bW91c0F1dGhlbnRpY2F0aW9uIGVuYWJsZWQ9ImZhbHNlIiAvPg0KCQkJPC9hdXRoZW50aWNhdGlvbj4NCgkJPC9zZWN1cml0eT4NCgk8L3N5c3RlbS53'));
	@fwrite($fp, base64_decode('ZWJTZXJ2ZXI+DQo8L2xvY2F0aW9uPg0KDQo8bG9jYXRpb24gcGF0aD0icGx1Z2lucy9wdWJsaWNQYWdlcy8xMDBfd2hvaXMvd2hvaXMvY2xpIj4NCgk8c3lzdGVtLndlYlNlcnZlcj4NCgkJPHNlY3VyaXR5Pg0KCQkJPGF1dGhlbnRpY2F0aW9uPg0KCQkJCTwhLS0N'));
	@fwrite($fp, base64_decode('CgkJCQlUbyAidW5sb2NrIiB0aGlzIHNlY3Rpb24sIHJ1biB0aGlzIGNvbW1hbmQ6DQoJCQkJJXdpbmRpciVcc3lzdGVtMzJcaW5ldHNydlxhcHBjbWQuZXhlIHVubG9jayBjb25maWcgLXNlY3Rpb246c3lzdGVtLndlYlNlcnZlci9zZWN1cml0eS9hdXRoZW50aWNh'));
	@fwrite($fp, base64_decode('dGlvbi9hbm9ueW1vdXNBdXRoZW50aWNhdGlvbg0KCQkJCS0tPg0KCQkJCTxhbm9ueW1vdXNBdXRoZW50aWNhdGlvbiBlbmFibGVkPSJmYWxzZSIgLz4NCgkJCTwvYXV0aGVudGljYXRpb24+DQoJCTwvc2VjdXJpdHk+DQoJPC9zeXN0ZW0ud2ViU2VydmVyPg0KPC9s'));
	@fwrite($fp, base64_decode('b2NhdGlvbj4NCg0KPC9jb25maWd1cmF0aW9uPg0K'));
	@fclose($fp);
}
if (!is_file('web.config')) {
	warn('File has vanished! Will re-create it: web.config');
	writefile_7();
	if (!is_file('web.config')) {
		warn('File cannot be created (not existing): web.config');
	} else if (sha1_file('web.config') != 'd08e5510f96f888716704c520ece73bee10030f4') {
		warn('File cannot be created (checksum mismatch): web.config');
	} else if ((DIRECTORY_SEPARATOR === '/') && !@chmod('web.config', 0644)) {
		warn('Could not change file permissions of web.config');
	}
} else {
	if (@sha1_file('web.config') !== 'd08e5510f96f888716704c520ece73bee10030f4') {
		if (@sha1_file('web.config') !== 'af593e06809475f746f74c24867d1e799d84296b') {
			warn('File was modified. Will overwrite the changes now: web.config');
			$tmp = pathinfo('web.config');
			$backup_name = $tmp['dirname'].DIRECTORY_SEPARATOR.$tmp['filename'].'.'.date('Ymdhis',@filemtime('web.config')).(isset($tmp['extension']) ? '.'.$tmp['extension'] : '');
			warn('Creating a backup as '.$backup_name);
			if (!@copy('web.config', $backup_name)) {
				warn('Creation of backup failed');
			}
		}
		writefile_7();
		if (@sha1_file('web.config') !== 'd08e5510f96f888716704c520ece73bee10030f4') {
			warn('File cannot be written (checksum mismatch): web.config');
		}
	}
}


file_put_contents('oidplus_version.txt', "Revision 290\n");
if (trim(@file_get_contents('oidplus_version.txt')) !== 'Revision 290') err('Could not write to oidplus_version.txt!');


echo 'DONE'; // This exact string will be compared in Update v3

@unlink(__FILE__);
if (is_file(__FILE__)) warn('Could not delete '.basename(__FILE__).'! Please delete it manually');

